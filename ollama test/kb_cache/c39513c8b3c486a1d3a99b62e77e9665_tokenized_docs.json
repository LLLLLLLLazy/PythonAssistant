[["第一", "部分", "　", "基础知识", "\n", "本书", "的", "第一", "部分", "介绍", "编写", " ", "Python", " ", "程序", "所", "需要", "熟悉", "的", "基本概念", "，", "其中", "很多", "都", "适用", "于", "所有", "编程语言", "，", "因此", "它们", "在", "你", "的", "整个", "程序员", "生涯", "中", "都", "很", "有用", "。", "\n", "第", " ", "1", " ", "章", "介绍", "在", "计算机", "中", "安装", "Python", "，", "并", "运行", "第一个", "程序", "—", "—", "它", "在", "屏幕", "上", "打印消息", "“", "Hello", " ", "world", "!", "”", "。", "\n", "第", " ", "2", " ", "章", "论述", "如何", "在", "变量", "中", "存储", "信息", "以及", "如何", "使用", "文本", "和", "数字", "。", "\n", "第", " ", "3", " ", "章", "和", "第", " ", "4", " ", "章", "介绍", "列表", "。", "使用", "列表", "能够", "在", "一个", "变量", "中", "存储", "任意", "数量", "的", "信息", "，", "从而", "高效", "地", "处理", "数据", "：", "只", "需", "几行", "代码", "，", "你", "就", "能够", "处理", "数百", "、", "数千", "乃至", "数百万个", "值", "。", "\n", "第", " ", "5", " ", "章", "讲解", "使用", " ", "if", " ", "语句", "来", "编写", "这样", "的", "代码", "：", "在", "特定条件", "满足", "时", "采取", "一种", "措施", "，", "而", "在", "该", "条件", "不", "满足", "时", "采取", "另", "一种", "措施", "。", "\n", "第", " ", "6", " ", "章", "演示", "如何", "使用", " ", "Python", " ", "字典", "，", "将", "不同", "的", "信息", "关联", "起来", "。", "与", "列表", "一样", "，", "你", "也", "可以", "根据", "需要", "在", "字典", "中", "存储", "任意", "数量", "的", "信息", "。", "\n", "第", " ", "7", " ", "章", "讲解", "如何", "从", "用户", "那里", "获取", "输入", "，", "以", "让", "程序", "变成", "交互式", "的", "。", "你", "还", "将", "学习", " ", "while", " ", "循环", "，", "它", "不断", "地", "运行", "代码", "块", "，", "直到", "指定", "的", "条件", "不再", "满足", "为止", "。", "\n", "第", " ", "8", " ", "章", "介绍", "编写", "函数", "。", "函数", "是", "执行", "特定", "任务", "的", "被", "命名", "的", "代码", "块", "，", "你", "可以", "根据", "需要", "随时", "运行", "它", "。"], ["第", " ", "8", " ", "章", "介绍", "编写", "函数", "。", "函数", "是", "执行", "特定", "任务", "的", "被", "命名", "的", "代码", "块", "，", "你", "可以", "根据", "需要", "随时", "运行", "它", "。", "\n", "第", " ", "9", " ", "章", "介绍", "类", "，", "它", "让", "你", "能够", "模拟", "实物", "，", "如", "小狗", "、", "小猫", "、", "人", "、", "汽车", "、", "火箭", "等", "，", "让", "你", "的", "代码", "能够", "表示", "任何", "真实", "或", "抽象", "的", "东西", "。", "\n", "第", " ", "10", " ", "章", "介绍", "如何", "使用", "文件", "，", "以及", "如何", "处理错误", "以免", "程序", "意外", "地", "崩溃", "。", "你", "需要", "在", "程序", "关闭", "前", "保存", "数据", "，", "并", "在", "程序", "再次", "运行", "时", "读取", "它们", "。", "你", "将", "学习", " ", "Python", " ", "异常", "，", "它们", "让", "你", "能够", "未雨绸", "\n", "缪", "，", "从而", "让", "程序", "妥善", "地", "处理错误", "。", "\n", "第", " ", "11", " ", "章为", "代码", "编写", "测试", "，", "以", "核实", "程序", "是否", "像", "你", "期望", "的", "那样", "工作", "。", "这样", "，", "扩展", "程序", "时", "，", "你", "就", "不用", "担心", "引入", "新", "的", "bug", "。", "要", "想", "脱离", "初级", "程序员", "的", "阵容", "，", "跻身于", "中级", "程序员", "的", "行列", "，", "测试", "\n", "代码", "是", "你", "必须", "掌握", "的", "基本技能", "之一", "。", "\n", "第", " ", "1", " ", "章", "　", "起步", "\n", "章", "　", "起步", "\n", "在", "本章", "中", "，", "你", "将", "运行", "自己", "的", "第一个", "程序", "—", "—", "hello", "_", "world", ".", "py", "。", "为此", "，", "你", "首先", "需要", "检查", "自己", "的", "计算机", "是否", "安装", "了", "Python", "；", "如果", "没有", "安装", "，", "你", "需要", "安装", "它", "。", "你", "还要", "安装", "一个", "文", "\n", "本", "编辑器", "，", "用于", "编写", "和", "运行", "Python", "程序", "。", "你", "输入", "Python", "代码", "时", "，", "这个", "文本编辑", "器", "能够", "识别", "它们", "并", "突出", "显示", "不同", "的", "部分", "，", "让", "你", "能够", "轻松", "地", "了解", "代码", "的", "结构", "。", "\n", "1.1", "　", "搭建", "编程", "环境", "\n", "　", "搭建", "编程", "环境"], ["1.1", "　", "搭建", "编程", "环境", "\n", "　", "搭建", "编程", "环境", "\n", "在", "不同", "的", "操作系统", "中", "，", "Python", "存在", "细微", "的", "差别", "，", "因此", "有", "几点", "你", "需要", "牢记在心", "。", "这里", "将", "介绍", "大家", "使用", "的", "两个", "主要", "的", "Python", "版本", "，", "并", "简要", "介绍", "Python", "的", "安装", "步骤", "。", "\n", "1.1", ".", "1", "　", "\n", "　", "Python", " ", "2", "和", "\n", "和", "Python", " ", "3", "\n", "当前", "，", "有", "两个", "不同", "的", "Python", "版本", "：", "Python", " ", "2", "和", "较", "新", "的", "Python", " ", "3", "。", "每种", "编程语言", "都", "会", "随着", "新", "概念", "和", "新", "技术", "的", "推出", "而", "不断", "发展", "，", "Python", "的", "开发者", "也", "一直", "致力于", "丰富", "和", "强化", "其", "功能", "。", "大多数", "\n", "修改", "都", "是", "逐步", "进行", "的", "，", "你", "几乎", "意识", "不到", "，", "但", "如果", "你", "的", "系统", "安装", "的", "是", "Python", " ", "3", "，", "那么", "有些", "使用", "Python", " ", "2", "编写", "的", "代码", "可能", "无法", "正确", "地", "运行", "。", "在", "本书", "中", "，", "我", "将", "指出", "Python", " ", "2", "和", "Python", " ", "3", "的", "重大", "\n", "差别", "，", "这样", "无论", "你", "安装", "的", "是", "哪个", "Python", "版本", "，", "都", "能够", "按书", "中", "的", "说明", "去", "做", "。", "\n", "如果", "你", "的", "系统", "安装", "了", "这", "两个", "版本", "，", "请", "使用", "Python", " ", "3", "；", "如果", "没有", "安装", "Python", "，", "请", "安装", "Python", " ", "3", "；", "如果", "只", "安装", "了", "Python", " ", "2", "，", "也", "可", "直接", "使用", "它", "来", "编写", "代码", "，", "但", "还是", "尽快", "升级", "到", "Python", " ", "3", "为", "好", "，", "\n", "因为", "这样", "你", "就", "能", "使用", "最新", "的", "Python", "版本", "了", "。", "\n", "1.1", ".", "2", "　", "运行", "\n", "　", "运行", "Python", "代码", "片段", "\n", "代码", "片段"], ["1.1", ".", "2", "　", "运行", "\n", "　", "运行", "Python", "代码", "片段", "\n", "代码", "片段", "\n", "Python", "自带", "了", "一个", "在", "终端", "窗口", "中", "运行", "的", "解释器", "，", "让", "你", "无需", "保存", "并", "运行", "整个", "程序", "就", "能", "尝试", "运行", "Python", "代码", "片段", "。", "\n", "本书", "将", "以", "如下", "方式", "列出", "代码", "片段", "：", "\n", "❶", " ", ">", ">", ">", " ", "print", "(", "\"", "Hello", " ", "Python", " ", "interpreter", "!", "\"", ")", "\n", " ", " ", "Hello", " ", "Python", " ", "interpreter", "!", "\n", "加粗", "的", "文本", "表示", "需要", "你", "输入", "之后", "按", "回车键", "来", "执行", "的", "代码", "。", "本书", "的", "大多数", "示例", "都", "是", "独立", "的", "小", "程序", "，", "你", "将", "在", "编辑器", "中", "执行", "它们", "，", "因为", "大多数", "代码", "都", "是", "这样", "编写", "出来", "的", "。", "然而", "，", "为", "高效", "\n", "地", "演示", "某", "基本概念", "，", "需要", "在", "Python", "终端", "会话", "中", "执行", "一系列", "代码", "片段", "。", "只要", "代码", "清单", "中", "包含", "三个", "尖括号", "（", "如", "❶", "所示", "）", "，", "就", "意味着", "输出", "来自", "终端", "会话", "。", "稍后", "将", "演示", "如何", "在", "Python", "解释器", "\n", "中", "编写", "代码", "。", "\n", "1.1", ".", "3", "　", "\n", "　", "Hello", " ", "World", "程序", "\n", "程序", "\n", "长期以来", "，", "编程", "界", "都", "认为", "刚", "接触", "一门", "新", "语言", "时", "，", "如果", "首先", "使用", "它", "来", "编写", "一个", "在", "屏幕", "上", "显示", "消息", "“", "Hello", " ", "world", "!", "”", "的", "程序", "，", "将", "给", "你", "带来", "好运", "。", "\n", "要", "使用", "Python", "来", "编写", "这种", "Hello", " ", "World", "程序", "，", "只", "需", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "world", "!", "\"", ")"], ["print", "(", "\"", "Hello", " ", "world", "!", "\"", ")", "\n", "这种", "程序", "虽然", "简单", "，", "却", "有", "其", "用途", "：", "如果", "它", "能够", "在", "你", "的", "系统", "上", "正确", "地", "运行", "，", "你", "编写", "的", "任何", "Python", "程序", "都", "将", "如此", "。", "稍后", "将", "介绍", "如何", "在", "特定", "的", "系统", "中", "编写", "这样", "的", "程序", "。", "\n", "1.2", "　", "在", "不同", "操作系统", "中", "搭建", "\n", "　", "在", "不同", "操作系统", "中", "搭建", "Python", "编程", "环境", "\n", "编程", "环境", "\n", "Python", "是", "一种", "跨平台", "的", "编程语言", "，", "这", "意味着", "它", "能够", "运行", "在", "所有", "主要", "的", "操作系统", "中", "。", "在", "所有", "安装", "了", "Python", "的", "现代", "计算机", "上", "，", "都", "能够", "运行", "你", "编写", "的", "任何", "Python", "程序", "。", "然而", "，", "在", "不同", "的", "操", "\n", "作", "系统", "中", "，", "安装", "Python", "的", "方法", "存在", "细微", "的", "差别", "。"], ["在", "这", "一节", "中", "，", "你", "将", "学习", "如何", "在", "自己", "的", "系统", "中", "安装", "Python", "和", "运行", "Hello", " ", "World", "程序", "。", "你", "首先", "要", "检查", "自己", "的", "系统", "是否", "安装", "了", "Python", "，", "如果", "没有", "，", "就", "安装", "它", "；", "接下来", "，", "你", "需要", "安装", "一个", "简单", "\n", "的", "文本编辑", "器", "，", "并", "创建", "一个", "空", "的", "Python", "文件", "—", "—", "hello", "_", "world", ".", "py", "。", "最后", "，", "你", "将", "运行", "Hello", " ", "World", "程序", "，", "并", "排除", "各种", "故障", "。", "我", "将", "详细", "介绍", "如何", "在", "各种", "操作系统", "中", "完成", "这些", "任务", "，", "让", "你", "能够", "\n", "搭建", "一个", "对", "初学者", "友好", "的", "Python", "编程", "环境", "。", "\n", "1.2", ".", "1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "搭建", "\n", "系统", "中", "搭建", "Python", "编程", "环境", "\n", "编程", "环境", "\n", "Linux", "系统", "是", "为", "编程", "而", "设计", "的", "，", "因此", "在", "大多数", "Linux", "计算机", "中", "，", "都", "默认", "安装", "了", "Python", "。", "编写", "和", "维护", "Linux", "的", "人", "认为", "，", "你", "很", "可能", "会", "使用", "这种", "系统", "进行", "编程", "，", "他们", "也", "鼓励", "你", "这样", "做", "。", "鉴于", "\n", "此", "，", "要", "在", "这种", "系统", "中", "编程", "，", "你", "几乎", "不用", "安装", "什么", "软件", "，", "也", "几乎", "不用", "修改", "设置", "。", "\n", "1", ".", " ", "检查", "\n", "检查", "Python", "版本", "\n", "版本", "\n", "在", "你", "的", "系统", "中", "运行", "应用程序", "Terminal", "（", "如果", "你", "使用", "的", "是", "Ubuntu", "，", "可", "按", "Ctrl", " ", "+", " ", "Alt", " ", "+", " ", "T", "）", "，", "打开", "一个", "终端", "窗口", "。", "为", "确定", "是否", "安装", "了", "Python", "，", "执行命令", "python", " ", "（", "请", "注意", "，", "其中", "的", "p", "是", "小写"], ["的", "）", "。", "输出", "将", "类似", "下面", "这样", "，", "它", "指出", "了", "安装", "的", "Python", "版本", "；", "最后", "的", ">", ">", ">", " ", "是", "一个", "提示符", "，", "让", "你", "能够", "输入", "Python", "命令", "。", "\n", "$", " ", "python", "\n", "Python", " ", "2.7", ".", "6", " ", "(", "default", ",", " ", "Mar", " ", "22", " ", "2014", ",", " ", "22", ":", "59", ":", "38", ")", "\n", "[", "GCC", " ", "4.8", ".", "2", "]", " ", "on", " ", "linux2", "\n", "Type", " ", "\"", "help", "\"", ",", " ", "\"", "copyright", "\"", ",", " ", "\"", "credits", "\"", " ", "or", " ", "\"", "license", "\"", " ", "for", " ", "more", " ", "information", ".", "\n", ">", ">", ">", "\n", "上述", "输出", "表明", "，", "当前", "计算机", "默认", "使用", "的", "Python", "版本", "为", "Python", " ", "2.7", ".", "6", "。", "看到", "上述", "输出", "后", "，", "如果", "要", "退出", "Python", "并", "返回", "到", "终端", "窗口", "，", "可", "按", "Ctrl", " ", "+", " ", "D", "或", "执行命令", "exit", "(", ")", " ", "。", "\n", "要", "检查", "系统", "是否", "安装", "了", "Python", " ", "3", "，", "可能", "需要", "指定", "相应", "的", "版本", "。", "换句话说", "，", "如果", "输出", "指出", "默认", "版本", "为", "Python", " ", "2.7", "，", "请", "尝试", "执行命令", "python3", " ", "：", "\n", "$", " ", "python3", "\n", "Python", " ", "3.5", ".", "0", " ", "(", "default", ",", " ", "Sep", " ", "17", " ", "2015", ",", " ", "13", ":", "05", ":", "18", ")", "\n", "[", "GCC", " ", "4.8", ".", "4", "]", " ", "on", " ", "linux"], ["[", "GCC", " ", "4.8", ".", "4", "]", " ", "on", " ", "linux", "\n", "Type", " ", "\"", "help", "\"", ",", " ", "\"", "copyright", "\"", ",", " ", "\"", "credits", "\"", " ", "or", " ", "\"", "license", "\"", " ", "for", " ", "more", " ", "information", ".", "\n", ">", ">", ">", "\n", "上述", "输出", "表明", "，", "系统", "中", "也", "安装", "了", "Python", " ", "3", "，", "因此", "你", "可以", "使用", "这", "两个", "版本", "中", "的", "任何", "一个", "。", "在", "这种", "情况", "下", "，", "请", "将", "本书", "中", "的", "命令", "python", " ", "都", "替换", "为", "python3", " ", "。", "大多数", "Linux", "系统", "都", "默认", "安", "\n", "装", "了", "Python", "，", "但", "如果", "你", "的", "Linux", "系统", "不知", "什么", "原因", "没有", "安装", "Python", "或", "只", "安装", "了", "Python", " ", "2", "，", "而", "你", "要", "安装", "Python", " ", "3", "，", "请", "参见", "附录", "A", "。", "\n", "2", ".", " ", "安装", "文本编辑", "器", "\n", "安装", "文本编辑", "器", "\n", "Geany", "是", "一款", "简单", "的", "文本编辑", "器", "：", "它", "易于", "安装", "；", "让", "你", "能够", "直接", "运行", "几乎", "所有", "的", "程序", "（", "而", "无需", "通过", "终端", "来", "运行", "）", "；", "使用", "不同", "的", "颜色", "来", "显示", "代码", "，", "以", "突出", "代码", "语法", "；", "在", "终端", "窗口", "中", "运行", "\n", "代码", "，", "让", "你", "能够", "习惯", "使用", "终端", "。", "附录", "B", "介绍", "了", "其他", "一些", "文本编辑", "器", "，", "但", "我", "强烈建议", "你", "使用", "Geany", "，", "除非", "你", "有", "充分", "的", "理由", "不", "这样", "做", "。", "\n", "在", "大多数", "Linux", "系统", "中", "，", "都", "只", "需", "执行", "一个", "命令", "就", "可以", "安装", "Geany", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "geany"], ["$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "geany", "\n", "如果", "这个", "命令", "不管", "用", "，", "请参阅", "http", ":", "/", "/", "geany", ".", "org", "/", "Download", "/", "ThirdPartyPackages", "/", " ", "的", "说明", "。", "\n", "3", ".", " ", "运行", "\n", "运行", "Hello", " ", "World", "程序", "\n", "程序", "\n", "为", "编写", "第一个", "程序", "，", "需要", "启动", "Geany", "。", "为此", "，", "可", "按", "超级", "（", "Super", "）", "键", "（", "俗称", "Windows", "键", "）", "，", "并", "在", "系统", "中", "搜索", "Geany", "。", "找到", "Geany", "后", "，", "双击", "以", "启动", "它", "；", "再", "将", "其", "拖曳", "到", "任务栏", "或", "桌面上", "，", "以", "\n", "创建", "一个", "快捷方式", "。", "接下来", "，", "创建", "一个", "用于", "存储", "项目", "的", "文件夹", "，", "并", "将", "其", "命名", "为", "python", "_", "work", "（", "在", "文件名", "和", "文件夹", "名中", "，", "最好", "使用", "小写字母", "，", "并", "使用", "下划线", "来", "表示", "空格", "，", "因为", "这是", "\n", "Python", "采用", "的", "命名", "约定", "）", "。", "回到", "Geany", "，", "选择", "菜单", "File", " ", "▶", " ", "Save", " ", "As", "，", "将", "当前", "的", "空", "Python", "文件", "保存", "到", "文件夹", "python", "_", "work", "，", "并", "将", "其", "命名", "为", "hello", "_", "world", ".", "py", "。", "扩展名", ".", "py", "告诉", "Geany", "，", "文件", "包含", "的", "\n", "是", "Python", "程序", "；", "它", "还", "让", "Geany", "知道", "如何", "运行", "该", "程序", "，", "并", "以", "有益", "的", "方式", "突出", "其中", "的", "代码", "。", "\n", "保存", "文件", "后", "，", "在", "其中", "输入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")"], ["保存", "文件", "后", "，", "在", "其中", "输入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "如果", "你", "的", "系统", "安装", "了", "多个", "Python", "版本", "，", "就", "必须", "对", "Geany", "进行", "配置", "，", "使", "其", "使用", "正确", "的", "版本", "。", "为此", "，", "可", "选择", "菜单", "Build", "（", "生成", "）", "▶", " ", "Set", " ", "Build", " ", "Commands", "（", "设置", "生成", "命令", "）", "；", "你", "将", "看到", "文字", "\n", "Compile", "（", "编译", "）", "和", "Execute", "（", "执行", "）", "，", "它们", "旁边", "都", "有", "一个", "命令", "。", "默认", "情况", "下", "，", "这", "两个", "命令", "都", "是", "python", " ", "，", "要", "让", "Geany", "使用", "命令", "python3", " ", "，", "必须", "做", "相应", "的", "修改", "。", "\n", "如果", "在", "终端", "会话", "中", "能够", "执行命令", "python3", " ", "，", "请", "修改", "编译", "命令", "和", "执行命令", "，", "让", "Geany", "使用", "Python", " ", "3", "解释器", "。", "为此", "，", "将", "编译", "命令", "修改", "成", "下面", "这样", "：", "\n", "python3", " ", "-", "m", " ", "py", "_", "compile", " ", "\"", "%", "f", "\"", "\n", "你", "必须", "完全", "按", "上面", "的", "代码", "显示", "的", "那样", "输出", "这个", "命令", "，", "确保", "空格", "和", "大小写", "都", "完全相同", "。", "\n", "将", "执行命令", "修改", "成", "下面", "这样", "：", "\n", "python3", " ", "\"", "%", "f", "\"", "\n", "同样", "，", "务必", "确保", "空格", "和", "大小写", "都", "完全", "与", "显示", "的", "相同", "。", "图", "1", "-", "1", "显示", "了", "该", "如何", "在", "Geany", "中", "配置", "这些", "命令", "。"], ["图", "\n", "图", "1", "-", "1", "　", "在", "\n", "　", "在", "Linux", "中", "配置", "\n", "中", "配置", "Geany", "，", "使", "其", "使用", "\n", "，", "使", "其", "使用", "Python", " ", "3", "\n", "现在", "来", "运行", "程序", "hello", "_", "world", ".", "py", "。", "为此", "，", "可", "选择", "菜单", "Build", " ", "▶", " ", "Execute", "、", "单击", "Execute", "图标", "（", "两个", "齿轮", "）", "或", "按", "F5", "。", "将", "弹出", "一个", "终端", "窗口", "，", "其中", "包含", "如下", "输出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "------------------", "\n", "(", "program", " ", "exited", " ", "with", " ", "code", ":", " ", "0", ")", "\n", "Press", " ", "return", " ", "to", " ", "continue", "\n", "如果", "没有", "看到", "这样", "的", "输出", "，", "请", "检查", "你", "输入", "的", "每个", "字符", "。", "你", "是不是", "将", "print", " ", "的", "首字母", "大写", "了", "？", "是不是", "遗漏", "了", "引号", "或", "括号", "？", "编程语言", "对", "语法", "的", "要求", "非常", "严格", "，", "只要", "你", "没有", "严格遵守", "语", "\n", "法", "，", "就", "会", "出错", "。", "如果", "代码", "都", "正确", "，", "这个", "程序", "也", "不能", "正确", "地", "运行", "，", "请参阅", "1.3", "节", "。", "\n", "4", ".", " ", "在", "终端", "会话", "中", "运行", "\n", "在", "终端", "会话", "中", "运行", "Python", "代码", "\n", "代码", "\n", "你", "可以", "打开", "一个", "终端", "窗口", "并", "执行命令", "python", " ", "或", "python3", " ", "，", "再", "尝试", "运行", "Python", "代码", "片段", "。", "检查", "Python", "版本", "时", "，", "你", "就", "这样", "做过", "。", "下面", "再次", "这样", "做", "，", "但", "在", "终端", "会话", "中", "输入", "如下", "代码", "\n", "行", "："], ["行", "：", "\n", ">", ">", ">", " ", "print", "(", "\"", "Hello", " ", "Python", " ", "interpreter", "!", "\"", ")", "\n", "Hello", " ", "Python", " ", "interpreter", "!", "\n", ">", ">", ">", "\n", "消息", "将", "直接", "打印", "到", "当前", "终端", "窗口", "中", "。", "别忘了", "，", "要", "关闭", "Python", "解释器", "，", "可", "按", "Ctrl", " ", "+", " ", "D", "或", "执行命令", "exit", "(", ")", " ", "。", "\n", "1.2", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "搭建", "\n", "系统", "中", "搭建", "Python", "编程", "环境", "\n", "编程", "环境", "\n", "大多数", "OS", " ", "X", "系统", "都", "默认", "安装", "了", "Python", "。", "确定", "安装", "了", "Python", "后", "，", "你", "还", "需", "安装", "一个", "文本编辑", "器", "，", "并", "确保", "其", "配置", "正确", "无误", "。", "\n", "1", ".", " ", "检查", "是否", "安装", "了", "\n", "检查", "是否", "安装", "了", "Python", "\n", "在", "文件夹", "Applications", "/", "Utilities", "中", "，", "选择", "Terminal", "，", "打开", "一个", "终端", "窗口", "；", "你", "也", "可以", "按", "Command", " ", "+", " ", "空格键", "，", "再", "输入", "terminal", " ", "并", "按", "回车", "。", "为", "确定", "是否", "安装", "了", "Python", "，", "请", "执行命令", "python", "\n", "（", "注意", "，", "其中", "的", "p", "是", "小写", "的", "）", "。", "输出", "将", "类似", "于", "下面", "这样", "，", "它", "指出", "了", "安装", "的", "Python", "版本", "；", "最后", "的", ">", ">", ">", " ", "是", "一个", "提示符", "，", "让", "你", "能够", "输入", "Python", "命令", "。", "\n", "$", " ", "python", "\n", "Python", " ", "2.7", ".", "5", " ", "(", "default", ",", " ", "Mar", " ", "9", " ", "2014", ",", " ", "22", ":", "15", ":", "05", ")"], ["Python", " ", "2.7", ".", "5", " ", "(", "default", ",", " ", "Mar", " ", "9", " ", "2014", ",", " ", "22", ":", "15", ":", "05", ")", "\n", "[", "GCC", " ", "4.2", ".", "1", " ", "Compatible", " ", "Apple", " ", "LLVM", " ", "5.0", " ", "(", "clang", "-", "500.0", ".", "68", ")", "]", " ", "on", " ", "darwin", "\n", "Type", " ", "\"", "help", "\"", ",", " ", "\"", "copyright", "\"", ",", " ", "\"", "credits", "\"", ",", " ", "or", " ", "\"", "license", "\"", " ", "for", " ", "more", " ", "information", ".", "\n", ">", ">", ">", "\n", "上述", "输出", "表明", "，", "当前", "计算机", "默认", "使用", "的", "Python", "版本", "为", "Python", " ", "2.7", ".", "5", "。", "看到", "上述", "输出", "后", "，", "如果", "要", "退出", "Python", "并", "返回", "到", "终端", "窗口", "，", "可", "按", "Ctrl", " ", "+", " ", "D", "或", "执行命令", "exit", "(", ")", " ", "。", "\n", "要", "检查", "系统", "是否", "安装", "了", "Python", " ", "3", "，", "可", "尝试", "执行命令", "python3", " ", "。", "可能", "会", "出现", "一条", "错误", "消息", "，", "但", "如果", "输出", "指出", "系统", "安装", "了", "Python", " ", "3", "，", "则", "无需", "安装", "就", "可", "使用", "它", "。", "如果", "在", "你", "的", "系统", "中", "能够", "执", "\n", "行", "命令", "python3", " ", "，", "则", "对于", "本书", "的", "所有", "命令", "python", " ", "，", "都", "请", "替换", "为", "命令", "python3", " ", "。", "如果", "不", "知道", "出于", "什么", "原因", "你", "的", "系统", "没有", "安装", "Python", "，", "或者", "只", "安装", "了", "Python", " ", "2", "，", "而", "你", "又", "想", "安装", "\n", "Python", " ", "3", "，", "请参阅", "附录", "A", "。", "\n", "2", ".", " ", "在", "终端", "会话", "中", "运行", "\n", "在", "终端", "会话", "中", "运行", "Python", "代码", "\n", "代码"], ["Python", " ", "3", "，", "请参阅", "附录", "A", "。", "\n", "2", ".", " ", "在", "终端", "会话", "中", "运行", "\n", "在", "终端", "会话", "中", "运行", "Python", "代码", "\n", "代码", "\n", "你", "可以", "打开", "一个", "终端", "窗口", "并", "执行命令", "python", " ", "或", "python3", " ", "，", "再", "尝试", "运行", "Python", "代码", "片段", "。", "检查", "Python", "版本", "时", "，", "你", "就", "这样", "做过", "。", "下面", "再次", "这样", "做", "，", "但", "在", "终端", "会话", "中", "输入", "如下", "代码", "\n", "行", "：", "\n", ">", ">", ">", " ", "print", "(", "\"", "Hello", " ", "Python", " ", "interpreter", "!", "\"", ")", "\n", "Hello", " ", "Python", " ", "interpreter", "!", "\n", ">", ">", ">", "\n", "消息", "将", "直接", "打印", "到", "当前", "终端", "窗口", "中", "。", "别忘了", "，", "要", "关闭", "Python", "解释器", "，", "可", "按", "Ctrl", " ", "+", " ", "D", "或", "执行命令", "exit", "(", ")", " ", "。", "\n", "3", ".", " ", "安装", "文本编辑", "器", "\n", "安装", "文本编辑", "器"], ["Sublime", " ", "Text", "是", "一款", "简单", "的", "文本编辑", "器", "：", "它", "在", "OS", " ", "X", "中", "易于", "安装", "；", "让", "你", "能够", "直接", "运行", "几乎", "所有", "程序", "（", "而", "无需", "通过", "终端", "）", "；", "使用", "不同", "的", "颜色", "来", "显示", "代码", "，", "以", "突出", "代码", "语法", "；", "在内", "嵌", "在", "\n", "Sublime", " ", "Text", "窗口", "内", "的", "终端", "会话", "中", "运行", "代码", "，", "让", "你", "能够", "轻松", "地", "查看", "输出", "。", "附录", "B", "介绍", "了", "其他", "一些", "文本编辑", "器", "，", "但", "我", "强烈建议", "你", "使用", "Sublime", " ", "Text", "，", "除非", "你", "有", "充分", "的", "理由", "不", "这样", "做", "。", "\n", "要", "下载", "Sublime", " ", "Text", "安装程序", "，", "可", "访问", "http", ":", "/", "/", "sublimetext", ".", "com", "/", "3", " ", "，", "单击", "Download", "链接", "，", "并", "查找", "OS", " ", "X", "安装程序", "。", "Sublime", " ", "Text", "的", "许可", "策略", "非常灵活", "，", "你", "可以", "免费", "使用", "这", "款", "编辑器", "，", "但", "如果", "你", "\n", "喜欢", "它", "并", "想", "长期", "使用", "，", "建议", "你", "购买", "许可证", "。", "下载安装", "程序", "后", "，", "打开", "它", "，", "再", "将", "Sublime", " ", "Text", "图标", "拖", "放到", "Applications", "文件夹", "。", "\n", "4", ".", " ", "配置", "\n", "配置", "Sublime", " ", "Text", "使", "其", "使用", "\n", "使", "其", "使用", "Python", " ", "3", "\n", "如果", "你", "启动", "Python", "终端", "会话", "时", "使用", "的", "命令", "不是", "python", " ", "，", "就", "需要", "配置", "Sublime", " ", "Text", "，", "让", "它", "知道", "到", "系统", "的", "什么", "地方", "去", "查找", "正确", "的", "Python", "版本", "。", "要", "获悉", "Python", "解释器", "的", "完整", "路径", "，", "请", "执行", "\n", "如下", "命令", "："], ["如下", "命令", "：", "\n", "$", " ", "type", " ", "-", "a", " ", "python3", "\n", "python3", " ", "is", " ", "/", "usr", "/", "local", "/", "bin", "/", "python3", "\n", "现在", "，", "启动", "Sublime", " ", "Text", "，", "并", "选择", "菜单", "Tools", " ", "▶", " ", "Build", " ", "System", " ", "▶", " ", "New", " ", "Build", " ", "System", "，", "这", "将", "打开", "一个", "新", "的", "配置文件", "。", "删除", "其中", "的", "所有", "内容", "，", "再", "输入", "如下", "内容", "：", "\n", "{", "\n", " ", " ", " ", " ", "\"", "cmd", "\"", ":", " ", "[", "\"", "/", "usr", "/", "local", "/", "bin", "/", "python3", "\"", ",", " ", "\"", "-", "u", "\"", ",", " ", "\"", "$", "file", "\"", "]", ",", "\n", "}", "\n", "这些", "代码", "让", "Sublime", " ", "Text", "使用", "命令", "python3", " ", "来", "运行", "当前", "打开", "的", "文件", "。", "请", "确保", "其中", "的", "路径", "为", "你", "在", "前", "一步", "使用", "命令", "type", " ", "-", "a", " ", "python3", " ", "获悉", "的", "路径", "。", "将", "这个", "配置文件", "命名", "为", "\n", "Python3", ".", "sublime", "-", "build", "，", "并", "将", "其", "保存", "到", "默认", "目录", "—", "—", "你", "选择", "菜单", "Save", "时", "Sublime", " ", "Text", "打开", "的", "目录", "。", "\n", "5", ".", " ", "运行", "\n", "运行", "Hello", " ", "World", "程序", "\n", "程序", "\n", "为", "编写", "第一个", "程序", "，", "需要", "启动", "Sublime", " ", "Text", "。", "为此", "，", "可", "打开", "文件夹", "Applications", "，", "并", "双击", "图标", "Sublime", " ", "Text", "；", "也", "可", "按", "Command", " ", "+", " ", "空格键", "，", "再", "在", "弹出", "的", "搜索", "框中", "输入", "sublime", " ", "text", "。"], ["创建", "一个", "用于", "存储", "项目", "的", "文件夹", "，", "并", "将", "其", "命名", "为", "python", "_", "work", "（", "在", "文件名", "和", "文件夹", "名中", "，", "最好", "使用", "小写字母", "，", "并", "使用", "下划线", "来", "表示", "空格", "，", "因为", "这是", "Python", "采用", "的", "命名", "约定", "）", "。", "在", "\n", "Sublime", " ", "Text", "中", "，", "选择", "菜单", "File", " ", "▶", " ", "Save", " ", "As", "，", "将", "当前", "的", "空", "Python", "文件", "保存", "到", "文件夹", "python", "_", "work", "，", "并", "将", "其", "命名", "为", "hello", "_", "world", ".", "py", "。", "扩展名", ".", "py", "告诉", "Sublime", " ", "Text", "，", "文件", "包含", "的", "是", "Python", "程序", "；", "它", "\n", "还", "让", "Sublime", " ", "Text", "知道", "如何", "运行", "该", "程序", "，", "并", "以", "有益", "的", "方式", "突出", "其中", "的", "代码", "。", "\n", "保存", "文件", "后", "，", "在", "其中", "输入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "如果", "在", "系统", "中", "能够", "运行", "命令", "python", " ", "，", "就", "可", "选择", "菜单", "Tools", " ", "▶", " ", "Build", "或", "按", "Ctrl", " ", "+", " ", "B", "来", "运行", "程序", "。", "如果", "你", "对", "Sublime", " ", "Text", "进行", "了", "配置", "，", "使", "其", "使用", "的", "命令", "不是", "python", " ", "，", "请", "选择", "菜单", "Tools", " ", "▶", "\n", "Build", " ", "System", "，", "再", "选择", "Python", " ", "3", "。", "这", "将", "把", "Python", " ", "3", "设置", "为", "默认", "使用", "的", "Python", "版本", "；", "此后", "，", "你", "就", "可", "选择", "菜单", "Tools", " ", "▶", " ", "Build", "或", "按", "Command", "+", " ", "B", "来", "运行", "程序", "了", "。"], ["Sublime", " ", "Text", "窗口", "底部", "将", "出现", "一个", "终端", "屏幕", "，", "其中", "包含", "如下", "输出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "[", "Finished", " ", "in", " ", "0.1", "s", "]", "\n", "如果", "没有", "看到", "这样", "的", "输出", "，", "请", "检查", "你", "输入", "的", "每个", "字符", "。", "你", "是不是", "将", "print", " ", "的", "首字母", "大写", "了", "？", "是不是", "遗漏", "了", "引号", "或", "括号", "？", "编程语言", "对", "语法", "的", "要求", "非常", "严格", "，", "只要", "你", "没有", "严格遵守", "语", "\n", "法", "，", "就", "会", "出错", "。", "如果", "代码", "都", "正确", "，", "这个", "程序", "也", "不能", "正确", "地", "运行", "，", "请参阅", "1.3", "节", "。", "\n", "1.2", ".", "3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "搭建", "\n", "系统", "中", "搭建", "Python", "编程", "环境", "\n", "编程", "环境", "\n", "Windows", "系统", "并非", "都", "默认", "安装", "了", "Python", "，", "因此", "你", "可能", "需要", "下载", "并", "安装", "它", "，", "再", "下载", "并", "安装", "一个", "文本编辑", "器", "。", "\n", "1", ".", " ", "安装", "\n", "安装", "Python", "\n", "首先", "，", "检查", "你", "的", "系统", "是否", "安装", "了", "Python", "。", "为此", "，", "在", "“", "开始", "”", "菜单", "中", "输入", "command", " ", "并", "按", "回车", "以", "打开", "一个", "命令", "窗口", "；", "你", "也", "可", "按住", "Shift", "键", "并", "右击", "桌面", "，", "再", "选择", "“", "在", "此处", "打开", "命令", "窗口", "”", "。", "在", "终", "\n", "端", "窗口", "中", "输入", "python", "并", "按", "回车", "；", "如果", "出现", "了", "Python", "提示符", "（", ">", ">", ">", " ", "）", "，", "就", "说明", "你", "的", "系统", "安装", "了", "Python", "。", "然而", "，", "你", "也", "可能", "会", "看到", "一条", "错误", "消息", "，", "指出", "python", " ", "是", "无法", "识别", "的", "命令", "。"], ["如果", "是", "这样", "，", "就", "需要", "下载", "Windows", " ", "Python", "安装程序", "。", "为此", "，", "请", "访问", "http", ":", "/", "/", "python", ".", "org", "/", "downloads", "/", " ", "。", "你", "将", "看到", "两个", "按钮", "，", "分别", "用于", "下载", "Python", " ", "3", "和", "Python", " ", "2", "。", "单击", "用于", "下载", "Python", " ", "3", "的", "按", "\n", "钮", "，", "这会", "根据", "你", "的", "系统", "自动", "下载", "正确", "的", "安装程序", "。", "下载安装", "程序", "后", "，", "运行", "它", "。", "请", "务必", "选中", "复选框", "Add", " ", "Python", " ", "to", " ", "PATH", "（", "如图", "1", "-", "2", "所示", "）", "，", "这", "让", "你", "能够", "更", "轻松", "地", "配置", "系统", "。", "\n", "图", "\n", "图", "1", "-", "2", "　", "确保", "选中", "复选框", "\n", "　", "确保", "选中", "复选框", "Add", " ", "Python", " ", "to", " ", "PATH"], ["2", ".", " ", "启动", "\n", "启动", "Python", "终端", "会话", "\n", "终端", "会话", "\n", "通过", "配置", "系统", "，", "让", "其", "能够", "在", "终端", "会话", "中", "运行", "Python", "，", "可简化", "文本编辑", "器", "的", "配置", "工作", "。", "打开", "一个", "命令", "窗口", "，", "并", "在", "其中", "执行命令", "python", " ", "。", "如果", "出现", "了", "Python", "提示符", "（", ">", ">", ">", " ", "）", "，", "就", "说明", "\n", "Windows", "找到", "了", "你", "刚", "安装", "的", "Python", "版本", "。", "\n", "C", ":", "\\", ">", " ", "python", "\n", "Python", " ", "3.5", ".", "0", " ", "(", "v3.5", ".", "0", ":", "374f501f4567", ",", " ", "Sep", " ", "13", " ", "2015", ",", " ", "22", ":", "15", ":", "05", ")", " ", "[", "MSC", " ", "v.1900", " ", "32", " ", "bit", "\n", "(", "Intel", ")", "]", " ", "on", " ", "win32", "\n", "Type", " ", "\"", "help", "\"", ",", " ", "\"", "copyright", "\"", ",", " ", "\"", "credits", "\"", " ", "or", " ", "\"", "license", "\"", " ", "for", " ", "more", " ", "information", ".", "\n", ">", ">", ">", "\n", "如果", "是", "这样", "，", "就", "可以", "直接", "跳到", "下", "一部分", "—", "—", "“", "在", "终端", "会话", "中", "运行", "Python", "”", "。", "\n", "然而", "，", "输出", "可能", "类似", "于", "下面", "这样", "：", "\n", "C", ":", "\\", ">", " ", "python", "\n", "'", "python", "'", " ", "is", " ", "not", " ", "recognized", " ", "as", " ", "an", " ", "internal", " ", "or", " ", "external", " ", "command", ",", " ", "operable", "\n", "program", " ", "or", " ", "batch", " ", "file", "."], ["program", " ", "or", " ", "batch", " ", "file", ".", "\n", "在", "这种", "情况", "下", "，", "你", "就", "必须", "告诉", "Windows", "如何", "找到", "你", "刚", "安装", "的", "Python", "版本", "。", "命令", "python", " ", "通常", "存储", "在", "C盘", "，", "因此", "请", "在", "Windows", "资源管理", "器中", "打开", "C盘", "，", "在", "其中", "找到", "并", "打开", "以", "Python", "打头", "\n", "的", "文件夹", "，", "再", "找到", "文件", "python", "。", "例如", "，", "在", "我", "的", "计算机", "中", "，", "有", "一个", "名为", "Python35", "的", "文件夹", "，", "其中", "有", "一个", "名为", "python", "的", "文件", "，", "因此", "文件", "python", "的", "路径", "为", "C", ":", "\\", "Python35", "\\", "python", "。", "如果", "找", "不到", "这", "\n", "个", "文件", "，", "请", "在", "Windows", "资源管理", "器", "的", "搜索", "框中", "输入", "python", "，", "这", "将", "让", "你", "能够", "准确", "地", "获悉", "命令", "python", " ", "在", "系统", "中", "的", "存储", "位置", "。", "\n", "如果", "认为", "已", "知道", "命令", "python", " ", "的", "路径", "，", "就", "在", "终端", "窗口", "中", "输入", "该", "路径", "进行", "测试", "。", "为此", "，", "打开", "一个", "命令", "窗口", "，", "并", "输入", "你", "确定", "的", "完整", "路径", "：", "\n", "C", ":", "\\", ">", " ", "C", ":", "\\", "Python35", "\\", "python", "\n", "Python", " ", "3.5", ".", "0", " ", "(", "v3.5", ".", "0", ":", "374f501f4567", ",", " ", "Sep", " ", "13", " ", "2015", ",", " ", "22", ":", "15", ":", "05", ")", " ", "[", "MSC", " ", "v.1900", " ", "32", " ", "bit", "\n", "(", "Intel", ")", "]", " ", "on", " ", "win32"], ["(", "Intel", ")", "]", " ", "on", " ", "win32", "\n", "Type", " ", "\"", "help", "\"", ",", " ", "\"", "copyright", "\"", ",", " ", "\"", "credits", "\"", " ", "or", " ", "\"", "license", "\"", " ", "for", " ", "more", " ", "information", ".", "\n", ">", ">", ">", "\n", "如果", "可行", "，", "就", "说明", "你", "已经", "知道", "如何", "访问", "Python", "了", "。", "\n", "3", ".", " ", "在", "终端", "会话", "中", "运行", "\n", "在", "终端", "会话", "中", "运行", "Python", "\n", "在", "Python", "会话", "中", "执行", "下面", "的", "命令", "，", "并", "确认", "看到", "了", "输出", "“", "Hello", " ", "Python", " ", "world", "!", "”", "。", "\n", ">", ">", ">", " ", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", ">", ">", ">", "\n", "每当", "要", "运行", "Python", "代码", "片段", "时", "，", "都", "请", "打开", "一个", "命令", "窗口", "并", "启动", "Python", "终端", "会话", "。", "要", "关闭", "该", "终端", "会话", "，", "可", "按", "Ctrl", " ", "+", " ", "Z", "，", "再", "按", "回车键", "，", "也", "可", "执行命令", "exit", "(", ")", " ", "。", "\n", "4", ".", " ", "安装", "文本编辑", "器", "\n", "安装", "文本编辑", "器", "\n", "Geany", "是", "一款", "简单", "的", "文本编辑", "器", "：", "它", "易于", "安装", "；", "让", "你", "能够", "直接", "运行", "几乎", "所有", "的", "程序", "（", "而", "无需", "通过", "终端", "）", "；", "使用", "不同", "的", "颜色", "来", "显示", "代码", "，", "以", "突出", "代码", "语法", "；", "在", "终端", "窗口", "中", "运行", "代码", "，", "\n", "让", "你", "能够", "习惯", "使用", "终端", "。", "附录", "B", "介绍", "了", "其他", "一些", "文本编辑", "器", "，", "但", "我", "强烈建议", "你", "使用", "Geany", "，", "除非", "你", "有", "充分", "的", "理由", "不", "这样", "做", "。"], ["要", "下载", "Windows", " ", "Geany", "安装程序", "，", "可", "访问", "http", ":", "/", "/", "geany", ".", "org", "/", " ", "，", "单击", "Download", "下", "的", "Releases", "，", "找到", "安装程序", "geany", "-", "1.25", "_", "setup", ".", "exe", "或", "类似", "的", "文件", "。", "下载安装", "程序", "后", "，", "运行", "它", "并", "接受", "所有", "的", "默认", "\n", "设置", "。", "\n", "为", "编写", "第一个", "程序", "，", "需要", "启动", "Geany", "。", "为此", "，", "可", "按", "超级", "（", "Super", "）", "键", "（", "俗称", "Windows", "键", "）", "，", "并", "在", "系统", "中", "搜索", "Geany", "。", "找到", "Geany", "后", "，", "双击", "以", "启动", "它", "；", "再", "将", "其", "拖曳", "到", "任务栏", "或", "桌面上", "，", "以", "\n", "创建", "一个", "快捷方式", "。", "接下来", "，", "创建", "一个", "用于", "存储", "项目", "的", "文件夹", "，", "并", "将", "其", "命名", "为", "python", "_", "work", "（", "在", "文件名", "和", "文件夹", "名中", "，", "最好", "使用", "小写字母", "，", "并", "使用", "下划线", "来", "表示", "空格", "，", "因为", "这是", "\n", "Python", "采用", "的", "命名", "约定", "）", "。", "回到", "Geany", "，", "选择", "菜单", "File", " ", "▶", " ", "Save", " ", "As", "，", "将", "当前", "的", "空", "Python", "文件", "保存", "到", "文件夹", "python", "_", "work", "，", "并", "将", "其", "命名", "为", "hello", "_", "world", ".", "py", "。", "扩展名", ".", "py", "告诉", "Geany", "，", "文件", "包含", "的", "\n", "是", "Python", "程序", "；", "它", "还", "让", "Geany", "知道", "如何", "运行", "该", "程序", "，", "并", "以", "有益", "的", "方式", "突出", "其中", "的", "代码", "。", "\n", "保存", "文件", "后", "，", "在", "其中", "输入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")"], ["保存", "文件", "后", "，", "在", "其中", "输入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "如果", "能够", "在", "系统", "中", "执行命令", "python", " ", "，", "就", "无需", "配置", "Geany", "，", "因此", "你", "可以", "跳过", "下", "一部分", "，", "直接", "进入", "“", "运行", "Hello", " ", "World", "程序", "”", "部分", "。", "如果", "启动", "Python", "解释器", "时", "必须", "指定", "路径", "，", "如", "\n", "C", ":", "\\", "Python35", "\\", "python", "，", "请", "按", "下面", "的", "说明", "对", "Geany", "进行", "配置", "。", "\n", "5", ".", " ", "配置", "\n", "配置", "Geany", "\n", "要", "配置", "Geany", "，", "请", "选择", "菜单", "Build", " ", "▶", " ", "Set", " ", "Build", " ", "Commands", "；", "你", "将", "看到", "文字", "Compile", "和", "Execute", "，", "它们", "旁边", "都", "有", "一个", "命令", "。", "默认", "情况", "下", "，", "编译", "命令", "和", "执行命令", "的", "开头", "都", "是", "python", " ", "，", "但", "Geany", "\n", "不", "知道", "命令", "python", " ", "存储", "在", "系统", "的", "什么", "地方", "，", "因此", "你", "需要", "在", "其中", "添加", "你", "在", "终端", "会话", "中", "使用", "的", "路径", "。", "\n", "为此", "，", "在", "编译", "命令", "和", "执行命令", "中", "，", "加上", "命令", "python", " ", "所在", "的", "驱动器", "和", "文件夹", "。", "其中", "编译", "命令", "应", "类似", "于", "下面", "这样", "：", "\n", "C", ":", "\\", "Python35", "\\", "python", " ", "-", "m", " ", "py", "_", "compile", " ", "\"", "%", "f", "\"", "\n", "在", "你", "的", "系统", "中", "，", "路径", "可能", "稍", "有", "不同", "，", "但", "请", "务必", "确保", "空格", "和", "大小写", "与", "这里", "显示", "的", "一致", "。", "\n", "执行命令", "应", "类似", "于", "下面", "这样", "："], ["执行命令", "应", "类似", "于", "下面", "这样", "：", "\n", "C", ":", "\\", "Python35", "\\", "python", " ", "\"", "%", "f", "\""], ["同样", "，", "指定", "执行命令", "时", "，", "务必", "确保", "空格", "和", "大小写", "与", "这里", "显示", "的", "一致", "。", "图", "1", "-", "3", "显示", "了", "该", "如何", "在", "Geany", "中", "配置", "这些", "命令", "。", "\n", "图", "\n", "图", "1", "-", "3", "　", "在", "\n", "　", "在", "Windows", "中", "配置", "\n", "中", "配置", "Geany", "，", "使", "其", "使用", "\n", "，", "使", "其", "使用", "Python", " ", "3", "\n", "正确", "地", "设置", "这些", "命令", "后", "，", "单击", "OK", "按钮", "。", "\n", "6", ".", " ", "运行", "\n", "运行", "Hello", " ", "World", "程序", "\n", "程序", "\n", "现在", "应该", "能够", "成功", "地", "运行", "程序", "了", "。", "请", "运行", "程序", "hello", "_", "world", ".", "py", "；", "为此", "，", "可", "选择", "菜单", "Build", " ", "▶", " ", "Execute", "、", "单击", "Execute", "图标", "（", "两个", "齿轮", "）", "或", "按", "F5", "。", "将", "弹出", "一个", "终端", "窗口", "，", "其中", "包含", "如下", "输", "\n", "出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "------------------", "\n", "(", "program", " ", "exited", " ", "with", " ", "code", ":", " ", "0", ")", "\n", "Press", " ", "return", " ", "to", " ", "continue", "\n", "如果", "没有", "看到", "这样", "的", "输出", "，", "请", "检查", "你", "输入", "的", "每个", "字符", "。", "你", "是不是", "将", "print", " ", "的", "首字母", "大写", "了", "？", "是不是", "遗漏", "了", "引号", "或", "括号", "？", "编程语言", "对", "语法", "的", "要求", "非常", "严格", "，", "只要", "你", "没有", "严格遵守", "语", "\n", "法", "，", "就", "会", "出错", "。", "如果", "代码", "都", "正确", "，", "这个", "程序", "也", "不能", "正确", "地", "运行", "，", "请参阅", "下", "一节", "。", "\n", "1.3", "　", "解决", "安装", "问题", "\n", "　", "解决", "安装", "问题"], ["1.3", "　", "解决", "安装", "问题", "\n", "　", "解决", "安装", "问题", "\n", "如果", "你", "按", "前面", "的", "步骤", "做", "，", "应该", "能够", "成功", "地", "搭建", "编程", "环境", "。", "但", "如果", "你", "始终", "无法", "运行", "程序", "hello", "_", "world", ".", "py", "，", "可", "尝试", "如下", "几个", "解决方案", "。", "\n", "程序", "存在", "严重", "的", "错误", "时", "，", "Python", "将", "显示", "traceback", "。", "Python", "会", "仔细", "研究", "文件", "，", "试图", "找出", "其中", "的", "问题", "。", "trackback", "可能", "会", "提供线索", "，", "让", "你", "知道", "是", "什么", "问题", "让", "程序", "无法", "运行", "。", "\n", "离开", "计算机", "，", "先", "休息", "一会儿", "，", "再", "尝试", "。", "别忘了", "，", "在", "编程", "中", "，", "语法", "非常", "重要", "，", "即便", "是", "少", "一个", "冒号", "、", "引号", "不", "匹配", "或", "括号", "不", "匹配", "，", "都", "可能", "导致", "程序", "无法", "正确", "地", "运行", "。", "请", "再次", "阅读", "本", "\n", "章", "相关", "的", "内容", "，", "再次", "审视", "你", "所", "做", "的", "工作", "，", "看看", "能否", "找出", "错误", "。", "\n", "推倒重来", "。", "你", "也许", "不", "需要", "把", "一切", "都", "推倒重来", "，", "但", "将", "文件", "hello", "_", "world", ".", "py", "删除", "并", "重新", "创建", "它", "也许", "是", "合理", "的", "选择", "。", "\n", "让", "别人", "在", "你", "的", "计算机", "或", "其他", "计算机", "上", "按", "本章", "的", "步骤", "重做", "一遍", "，", "并", "仔细观察", "。", "你", "可能", "遗漏", "了", "一", "小步", "，", "而", "别人", "刚好", "没有", "遗漏", "。", "\n", "请", "懂", "Python", "的", "人", "帮忙", "。", "当", "你", "有", "这样", "的", "想法", "时", "，", "可能", "会", "发现", "在", "你", "认识", "的", "人", "当中", "就", "有人", "使用", "Python", "。"], ["请", "懂", "Python", "的", "人", "帮忙", "。", "当", "你", "有", "这样", "的", "想法", "时", "，", "可能", "会", "发现", "在", "你", "认识", "的", "人", "当中", "就", "有人", "使用", "Python", "。", "\n", "本章", "的", "安装", "说明", "在", "网上", "也", "可以", "找到", "，", "其", "网址", "为", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrash", "-", "course", "/", " ", "。", "对", "你", "来说", "，", "在线", "版", "也许", "更", "合适", "。", "\n", "到", "网上", "寻求", "帮助", "。", "附录", "C", "提供", "了", "很多", "在线", "资源", "，", "如", "论坛", "或", "在线", "聊天", "网站", "，", "你", "可以", "前往", "这些", "地方", "，", "请求", "解决", "过", "你", "面临", "的", "问题", "的", "人", "提供", "解决方案", "。", "\n", "不要", "担心", "这会", "打扰", "经验丰富", "的", "程序员", "。", "每个", "程序员", "都", "遇到", "过", "问题", "，", "而", "大多数", "程序员", "都", "会", "乐意", "帮助", "你", "正确", "地", "设置", "系统", "。", "只要", "能", "清晰", "地", "说明", "你", "要", "做", "什么", "、", "尝试", "了", "哪些", "方法", "及其", "结果", "，", "\n", "就", "很", "可能", "有人", "能够", "帮到", "你", "。", "正如", "前言", "中", "指出", "的", "，", "Python", "社区", "对", "初学者", "非常", "友好", "。", "\n", "任何", "现代", "计算机", "都", "能够", "运行", "Python", "，", "如果", "你", "遇到", "了", "困难", "，", "请", "想", "办法", "寻求", "帮助", "吧", "。", "前期", "的", "问题", "可能", "令人", "沮丧", "，", "但", "很", "值得", "你", "花", "时间", "去", "解决", "。", "能够", "运行", "hello", "_", "world", ".", "py", "后", "，", "你", "就", "可以", "开始", "学", "\n", "习", "Python", "了", "，", "而且", "编程", "工作", "会", "更", "有趣", "，", "也", "更", "令人", "愉快", "。", "\n", "1.4", "　", "从", "终端", "运行", "\n", "　", "从", "终端", "运行", "Python", "程序", "\n", "程序"], ["1.4", "　", "从", "终端", "运行", "\n", "　", "从", "终端", "运行", "Python", "程序", "\n", "程序", "\n", "你", "编写", "的", "大多数", "程序", "都", "将", "直接", "在", "文本编辑", "器中", "运行", "，", "但", "有时候", "，", "从", "终端", "运行", "程序", "很", "有用", "。", "例如", "，", "你", "可能", "想", "直接", "运行", "既有", "的", "程序", "。", "\n", "在", "任何", "安装", "了", "Python", "的", "系统", "上", "都", "可以", "这样", "做", "，", "前提", "是", "你", "知道", "如何", "进入", "程序", "文件", "所在", "的", "目录", "。", "为", "尝试", "这样", "做", "，", "请", "确保", "已", "将", "文件", "hello", "_", "world", ".", "py", "存储", "到", "了", "桌面", "的", "python", "_", "work", "文件夹", "中", "。", "\n", "1.4", ".", "1", "　", "在", "\n", "　", "在", "Linux", "和", "\n", "和", "OS", " ", "X", "系统", "中", "从", "终端", "运行", "\n", "系统", "中", "从", "终端", "运行", "Python", "程序", "\n", "程序", "\n", "在", "Linux", "和", "OS", " ", "X", "系统", "中", "，", "从", "终端", "运行", "Python", "程序", "的", "方式", "相同", "。", "在", "终端", "会话", "中", "，", "可", "使用", "终端", "命令", "cd", " ", "（", "表示", "切换", "目录", "\n", "切换", "目录", " ", "，", "change", " ", "directory", "）", "在", "文件系统", "中", "导航", "。", "命令", "ls", " ", "（", "list", "的", "简写", "）", "显", "\n", "示", "当前目录", "中", "所有", "未", "隐藏", "的", "文件", "。", "\n", "为", "运行", "程序", "hello", "_", "world", ".", "py", "，", "请", "打开", "一个", "新", "的", "终端", "窗口", "，", "并", "执行", "下面", "的", "命令", "：", "\n", "❶", " ", "~", "$", " ", "cd", " ", "Desktop", "/", "python", "_", "work", "/", "\n", "❷", " ", "~", "/", "Desktop", "/", "python", "_", "work", "$", " ", "ls", "\n", " ", " ", "hello", "_", "world", ".", "py"], ["❷", " ", "~", "/", "Desktop", "/", "python", "_", "work", "$", " ", "ls", "\n", " ", " ", "hello", "_", "world", ".", "py", "\n", "❸", " ", "~", "/", "Desktop", "/", "python", "_", "work", "$", " ", "python", " ", "hello", "_", "world", ".", "py"], ["Hello", " ", "Python", " ", "world", "!", "\n", "这里", "使用", "了", "命令", "cd", " ", "来", "切换", "到", "文件夹", "Desktop", "/", "python", "_", "work", "（", "见", "❶", "）", "。", "接下来", "，", "使用", "命令", "ls", " ", "来", "确认", "这个", "文件夹", "中", "包含", "文件", "hello", "_", "world", ".", "py", "（", "见", "❷", "）", "。", "最后", "，", "使用", "命令", "python", "\n", "hello", "_", "world", ".", "py", " ", "来", "运行", "这个", "文件", "（", "见", "❸", "）", "。", "\n", "就", "这么", "简单", "。", "要", "运行", "Python", "程序", "，", "只", "需", "使用", "命令", "python", " ", "（", "或", "python3", " ", "）", "即可", "。", "\n", "1.4", ".", "2", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "从", "终端", "运行", "\n", "系统", "中", "从", "终端", "运行", "Python", "程序", "\n", "程序", "\n", "在", "命令", "窗口", "中", "，", "要", "在", "文件系统", "中", "导航", "，", "可", "使用", "终端", "命令", "cd", " ", "；", "要", "列出", "当前目录", "中", "的", "所有", "文件", "，", "可", "使用", "命令", "dir", " ", "（", "表示", "目录", "，", " ", "directory", "）", "。", "\n", "为", "运行", "程序", "hello", "_", "world", ".", "py", "，", "请", "打开", "一个", "新", "的", "终端", "窗口", "，", "并", "执行", "下面", "的", "命令", "：", "\n", "❶", " ", "C", ":", "\\", ">", " ", "cd", " ", "Desktop", "\\", "python", "_", "work", "\n", "❷", " ", "C", ":", "\\", "Desktop", "\\", "python", "_", "work", ">", " ", "dir", "\n", " ", " ", "hello", "_", "world", ".", "py", "\n", "❸", " ", "C", ":", "\\", "Desktop", "\\", "python", "_", "work", ">", " ", "python", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "Hello", " ", "Python", " ", "world", "!"], ["Hello", " ", "Python", " ", "world", "!", "\n", "这里", "使用", "了", "命令", "cd", " ", "来", "切换", "到", "文件夹", "Desktop", "\\", "python", "_", "work", "（", "见", "❶", "）", "。", "接下来", "，", "使用", "命令", "dir", " ", "来", "确认", "这个", "文件夹", "中", "包含", "文件", "hello", "_", "world", ".", "py", "（", "见", "❷", "）", "。", "最后", "，", "使用", "命令", "python", "\n", "hello", "_", "world", ".", "py", " ", "来", "运行", "这个", "文件", "（", "见", "❸", "）", "。", "\n", "如果", "你", "没有", "对系统", "进行", "配置", "以", "使用", "简单", "命令", "python", " ", "，", "就", "可能", "需要", "指定", "这个", "命令", "的", "路径", "：", "\n", "C", ":", "\\", "$", " ", "cd", " ", "Desktop", "\\", "python", "_", "work", "\n", "C", ":", "\\", "Desktop", "\\", "python", "_", "work", "$", " ", "dir", "\n", "hello", "_", "world", ".", "py", "\n", "C", ":", "\\", "Desktop", "\\", "python", "_", "work", "$", " ", "C", ":", "\\", "Python35", "\\", "python", " ", "hello", "_", "world", ".", "py", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "大多数", "程序", "都", "可以", "直接", "从", "编辑器", "运行", "，", "但", "需要", "解决", "的", "问题", "比较复杂", "时", "，", "你", "编写", "的", "程序", "可能", "需要", "从", "终端", "运行", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "本章", "的", "练习", "都", "是", "探索性", "的", "，", "但", "从", "第", "2", "章", "开始", "将", "要求", "你", "用", "那", "一章", "学到", "的", "知识", "来", "解决问题", "。"], ["动手", "试一试", "\n", "本章", "的", "练习", "都", "是", "探索性", "的", "，", "但", "从", "第", "2", "章", "开始", "将", "要求", "你", "用", "那", "一章", "学到", "的", "知识", "来", "解决问题", "。", "\n", "1", "-", "1", " ", "python", ".", "org", " ", "：", "浏览", "Python", "主页", "（", "http", ":", "/", "/", "python", ".", "org", "/", " ", "）", "，", "寻找", "你", "感兴趣", "的", "主题", "。", "你", "对", "Python", "越", "熟悉", "，", "这个", "网站", "对", "你", "来说", "就", "越", "有用", "。", "\n", "1", "-", "2", " ", "输入", "错误", "\n", "输入", "错误", " ", "：", "打开", "你", "刚", "创建", "的", "文件", "hello", "_", "world", ".", "py", "，", "在", "代码", "中", "添加", "一个", "输入", "错误", "，", "再", "运行", "这个", "程序", "。", "输入", "错误", "会", "引发", "错误", "吗", "？", "你", "能", "理解", "显示", "的", "错误", "消息", "吗", "？", "你", "能", "添加", "\n", "一个", "不会", "导致", "错误", "的", "输入", "错误", "吗", "？", "你", "凭", "什么", "认为", "它", "不会", "导致", "错误", "？", "\n", "1", "-", "3", " ", "无穷的", "技艺", "\n", "无穷的", "技艺", " ", "：", "如果", "你", "编程", "技艺", "无穷", "，", "你", "打算", "开发", "什么样", "的", "程序", "呢", "？", "你", "就要", "开始", "学习", "编程", "了", "；", "如果", "心中", "有", "目标", "，", "就", "能", "立即", "将", "新学", "到", "的", "技能", "付诸", "应用", "；", "现在", "正是", "草拟", "\n", "目标", "的", "大好时机", "。", "将", "想法", "记录下来", "是", "个", "不错", "的", "习惯", "，", "这样", "每当", "需要", "开始", "新", "项目", "时", "，", "都", "可", "参考", "它们", "。", "现在", "请花点", "时间", "描绘", "三个", "你", "想", "创建", "的", "程序", "。", "\n", "1.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "大致", "了解", "了", "Python", "，", "并", "在", "自己", "的", "系统", "中", "安装", "了", "Python", "。", "你", "还", "安装", "了", "一个", "文本编辑", "器", "，", "以", "简化", "Python", "代码", "的", "编写", "工作", "。", "你", "学习", "了", "如何", "在", "终端", "会话", "中", "运行", "Python", "代码", "片段", "，"], ["并", "运行", "了", "第一个", "货真价实", "的", "程序", "—", "—", "hello", "_", "world", ".", "py", "。", "你", "还", "大致", "了解", "了", "如何", "解决", "安装", "问题", "。", "\n", "在", "下", "一章", "，", "你", "将", "学习", "如何", "在", "Python", "程序", "中", "使用", "各种", "数据", "和", "变量", "。", "\n", "第", "\n", "第", " ", "2", " ", "章", "　", "变量", "和", "简单", "数据类型", "\n", "章", "　", "变量", "和", "简单", "数据类型"], ["在", "本章", "中", "，", "你", "将", "学习", "可", "在", "Python", "程序", "中", "使用", "的", "各种", "数据", "，", "还", "将", "学习", "如何", "将", "数据", "存储", "到", "变量", "中", "，", "以及", "如何", "在", "程序", "中", "使用", "这些", "变量", "。", "\n", "2.1", "　", "运行", "\n", "　", "运行", "hello", "_", "world", ".", "py", "时", "发生", "的", "情况", "\n", "时", "发生", "的", "情况", "\n", "运行", "hello", "_", "world", ".", "py", "时", "，", "Python", "都", "做", "了", "些", "什么", "呢", "？", "下面", "来", "深入研究", "一下", "。", "实际上", "，", "即便", "是", "运行", "简单", "的", "程序", "，", "Python", "所", "做", "的", "工作", "也", "相当", "多", "：", "\n", "hello", "_", "world", ".", "py", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "运行", "上述", "代码", "时", "，", "你", "将", "看到", "如下", "输出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "运行", "文件", "hello", "_", "world", ".", "py", "时", "，", "末尾", "的", ".", "py", "指出", "这是", "一个", "Python", "程序", "，", "因此", "编辑器", "将", "使用", "Python", "解释器", "\n", "解释器", " ", "来", "运行", "它", "。", "Python", "解释器", "读取", "整个", "程序", "，", "确定", "其中", "每个", "单词", "的", "含义", "。", "例如", "，", "看到", "单", "\n", "词", "print", " ", "时", "，", "解释器", "就", "会", "将", "括号", "中", "的", "内容", "打印", "到", "屏幕", "，", "而", "不会", "管", "括号", "中", "的", "内容", "是", "什么", "。", "\n", "编写程序", "时", "，", "编辑器", "会以", "各种", "方式", "突出", "程序", "的", "不同", "部分", "。", "例如", "，", "它", "知道", "print", " ", "是", "一个", "函数", "的", "名称", "，", "因此", "将", "其", "显示", "为", "蓝色", "；", "它", "知道", "“", "Hello", " ", "Python", " ", "world", "!", "”", "不是", "Python", "代码", "，", "因此", "将", "其显"], ["示为", "橙色", "。", "这种", "功能", "称为", "语法", "突出", "\n", "语法", "突出", " ", "，", "在", "你", "刚", "开始", "编写程序", "时", "很", "有", "帮助", "。", "\n", "2.2", "　", "变量", "\n", "　", "变量", "\n", "下面", "来", "尝试", "在", "hello", "_", "world", ".", "py", "中", "使用", "一个", "变量", "。", "在", "这个", "文件", "开头", "添加", "一行", "代码", "，", "并", "对", "第", "2", "行", "代码", "进行", "修改", "，", "如下", "所示", "：", "\n", "message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", "\n", "print", "(", "message", ")", "\n", "运行", "这个", "程序", "，", "看看", "结果", "如何", "。", "你", "会", "发现", "，", "输出", "与", "以前", "相同", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "我们", "添加", "了", "一个", "名为", "message", " ", "的", "变量", "\n", "变量", " ", "。", "每个", "变量", "都", "存储", "了", "一个", "值", "\n", "值", " ", "—", "—", "与", "变量", "相关联", "的", "信息", "。", "在", "这里", "，", "存储", "的", "值", "为", "文本", "“", "Hello", " ", "Python", " ", "world", "!", "”", "。", "\n", "添加", "变量", "导致", "Python", "解释器", "需要", "做", "更", "多", "工作", "。", "处理", "第", "1", "行", "代码", "时", "，", "它", "将", "文本", "“", "Hello", " ", "Python", " ", "world", "!", "”", "与", "变量", "message", " ", "关联", "起来", "；", "而", "处理", "第", "2", "行", "代码", "时", "，", "它", "将", "与", "变量", "message", " ", "关联", "的", "值", "打", "\n", "印", "到", "屏幕", "。", "\n", "下面", "来", "进一步", "扩展", "这个", "程序", "：", "修改", "hello", "_", "world", ".", "py", "，", "使", "其", "再", "打印", "一条", "消息", "。", "为此", "，", "在", "hello", "_", "world", ".", "py", "中", "添加", "一个", "空行", "，", "再", "添加", "下面", "两行", "代码", "：", "\n", "message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "world", "!", "\""], ["message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", "\n", "print", "(", "message", ")", "\n", "message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "Crash", " ", "Course", " ", "world", "!", "\"", "\n", "print", "(", "message", ")"], ["现在", "如果", "运行", "这个", "程序", "，", "将", "看到", "两行", "输出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "Hello", " ", "Python", " ", "Crash", " ", "Course", " ", "world", "!", "\n", "在", "程序", "中", "可", "随时", "修改", "变量", "的", "值", "，", "而", "Python", "将", "始终", "记录", "变量", "的", "最新", "值", "。", "\n", "2.2", ".", "1", "　", "变量", "的", "命名", "和", "使用", "\n", "　", "变量", "的", "命名", "和", "使用", "\n", "在", "Python", "中", "使用", "变量", "时", "，", "需要", "遵守", "一些", "规则", "和", "指南", "。", "违反", "这些", "规则", "将", "引发", "错误", "，", "而", "指南", "旨在", "让", "你", "编写", "的", "代码", "更", "容易", "阅读", "和", "理解", "。", "请", "务必", "牢记", "下述", "有关", "变量", "的", "规则", "。", "\n", "变量名", "只能", "包含", "字母", "、", "数字", "和", "下划线", "。", "变量名", "可以", "字母", "或", "下划线", "打头", "，", "但", "不能", "以", "数字", "打头", "，", "例如", "，", "可", "将", "变量", "命名", "为", "message", "_", "1", "，", "但", "不能", "将", "其", "命名", "为", "1", "_", "message", "。", "\n", "变量名", "不能", "包含", "空格", "，", "但", "可", "使用", "下划线", "来", "分隔", "其中", "的", "单词", "。", "例如", "，", "变量名", "greeting", "_", "message", "可行", "，", "但", "变量名", "greeting", " ", "message", "会", "引发", "错误", "。", "\n", "不要", "将", "Python", "关键字", "和", "函数", "名", "用作", "变量名", "，", "即", "不要", "使用", "Python", "保留", "用于", "特殊", "用途", "的", "单词", "，", "如", "print", " ", "（", "请", "参见", "附录", "A.4", "）", "。", "\n", "变量名", "应", "既", "简短", "又", "具有", "描述性", "。", "例如", "，", "name", "比", "n", "好", "，", "student", "_", "name", "比", "s", "_", "n", "好", "，", "name", "_", "length", "比", "length", "_", "of", "_", "persons", "_", "name", "好", "。"], ["慎用", "小写字母", "l", "和", "大写字母", "O", "，", "因为", "它们", "可能", "被", "人错", "看成", "数字", "1", "和", "0", "。", "\n", "要", "创建", "良好", "的", "变量名", "，", "需要", "经过", "一定", "的", "实践", "，", "在", "程序", "复杂", "而", "有趣", "时", "尤其", "如此", "。", "随着", "你", "编写", "的", "程序", "越来越", "多", "，", "并", "开始", "阅读", "别人", "编写", "的", "代码", "，", "将", "越来越", "善于", "创建", "有", "意义", "的", "变量名", "。", "\n", "注意", "\n", "注意", " ", "　", "就", "目前", "而言", "，", "应", "使用", "小写", "的", "Python", "变量名", "。", "在", "变量名", "中", "使用", "大写字母", "虽然", "不会", "导致", "错误", "，", "但", "避免", "使用", "大写字母", "是", "个", "不错", "的", "主意", "。", "\n", "2.2", ".", "2", "　", "使用", "变量", "时", "避免", "命名", "错误", "\n", "　", "使用", "变量", "时", "避免", "命名", "错误", "\n", "程序员", "都", "会", "犯错", "，", "而且", "大多数", "程序员", "每天", "都", "会", "犯错", "。", "虽然", "优秀", "的", "程序员", "也", "会", "犯错", "，", "但", "他们", "也", "知道", "如何", "高效", "地", "消除", "错误", "。", "下面", "来看", "一种", "你", "可能", "会犯", "的", "错误", "，", "并", "学习", "如何", "消除", "它", "。", "\n", "我们", "将", "有意", "地", "编写", "一些", "引发", "错误", "的", "代码", "。", "请", "输入", "下面", "的", "代码", "，", "包括", "其中", "以", "粗体", "显示", "但", "拼写", "不", "正确", "的", "单词", "mesage", "：", "\n", "message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "Crash", " ", "Course", " ", "reader", "!", "\"", "\n", "print", "(", "mesage", ")", "\n", "程序", "存在", "错误", "时", "，", "Python", "解释器", "将", "竭尽所能", "地", "帮助", "你", "找出", "问题所在", "。", "程序", "无法", "成功", "地", "运行", "时", "，", "解释器", "会", "提供", "一个", "traceback", "。", "traceback", "是", "一条", "记录", "，", "指出", "了", "解释器", "尝试", "运行", "代码", "时", "，"], ["在", "什么", "地方", "陷入", "了", "困境", "。", "下面", "是", "你", "不", "小心", "错误", "地", "拼写", "了", "变量名", "时", "，", "Python", "解释器", "提供", "的", "traceback", "：", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", "❶", " ", " ", " ", "File", " ", "\"", "hello", "_", "world", ".", "py", "\"", ",", " ", "line", " ", "2", ",", " ", "in", " ", "<", "module", ">", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "mesage", ")", "\n", "❸", " ", "NameError", ":", " ", "name", " ", "'", "mesage", "'", " ", "is", " ", "not", " ", "defined", "\n", "解释器", "指出", "，", "文件", "hello", "_", "world", ".", "py", "的", "第", "2", "行", "存在", "错误", "（", "见", "❶", "）", "；", "它", "列出", "了", "这行", "代码", "，", "旨在", "帮助", "你", "快速", "找出", "错误", "（", "见", "❷", "）", "；", "它", "还", "指出", "了", "它", "发现", "的", "是", "什么样", "的", "错误", "（", "见", "❸", "）", "。", "在", "这里", "，", "解", "\n", "释器", "发现", "了", "一个", "名称", "错误", "，", "并", "指出", "打印", "的", "变量", "mesage", " ", "未定义", "：", "Python", "无法", "识别", "你", "提供", "的", "变量名", "。", "名称", "错误", "通常", "意味着", "两种", "情况", "：", "要么", "是", "使用", "变量", "前", "忘记", "了", "给", "它", "赋值", "，", "要么", "是", "输入", "\n", "变量名", "时", "拼写", "不", "正确", "。", "\n", "在", "这个", "示例", "中", "，", "第", "2", "行", "的", "变量名", "message", " ", "中", "遗漏", "了", "字母", "s", "。", "Python", "解释器", "不会", "对", "代码", "做", "拼写", "检查", "，", "但", "要求", "变量名", "的", "拼写", "一致", "。", "例如", "，", "如果", "在", "代码", "的", "另", "一个", "地方", "也", "将", "message", "错误", "地", "拼", "\n", "写成", "了", "mesage", "，", "结果", "将", "如何", "呢", "？"], ["写成", "了", "mesage", "，", "结果", "将", "如何", "呢", "？", "\n", "mesage", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "Crash", " ", "Course", " ", "reader", "!", "\"", "\n", "print", "(", "mesage", ")", "\n", "在", "这种", "情况", "下", "，", "程序", "将", "成功", "地", "运行", "：", "\n", "Hello", " ", "Python", " ", "Crash", " ", "Course", " ", "reader", "!", "\n", "计算机", "一丝不苟", "，", "但", "不", "关心", "拼写", "是否", "正确", "。", "因此", "，", "创建", "变量名", "和", "编写", "代码", "时", "，", "你", "无需", "考虑", "英语", "中", "的", "拼写", "和", "语法", "规则", "。", "\n", "很多", "编程", "错误", "都", "很", "简单", "，", "只是", "在", "程序", "的", "某", "一行", "输错", "了", "一个", "字符", "。", "为", "找出", "这种", "错误", "而", "花费", "很", "长时间", "的", "大有人在", "。", "很多", "程序员", "天资聪颖", "、", "经验丰富", "，", "却", "为", "找出", "这种", "细微", "的", "错误", "花费", "数", "\n", "小时", "。", "你", "可能", "觉得", "这", "很", "好笑", "，", "但", "别忘了", "，", "在", "你", "的", "编程", "生涯", "中", "，", "经常", "会", "有", "同样", "的", "遭遇", "。", "\n", "注意", "\n", "注意", " ", "　", "要", "理解", "新", "的", "编程", "概念", "，", "最佳", "的", "方式", "是", "尝试", "在", "程序", "中", "使用", "它们", "。", "如果", "你", "在", "做", "本书", "的", "练习", "时", "陷入", "了", "困境", "，", "请", "尝试", "做点", "其他", "的", "事情", "。", "如果", "这样", "做后", "依然", "无法", "摆脱", "困", "\n", "境", "，", "请", "复习", "相关", "内容", "。", "如果", "这样", "做后", "情况", "依然如故", "，", "请参阅", "附录", "C", "的", "建议", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "请", "完成", "下面", "的", "练习", "，", "在", "做", "每个", "练习", "时", "，", "都", "编写", "一个", "独立", "的", "程序", "。", "保存", "每个", "程序", "时", "，", "使用", "符合标准", "Python", "约定", "的", "文件名", "：", "使用", "小写字母", "和", "下划线", "，", "如", "simple", "_", "message", ".", "py", "和"], ["simple", "_", "messages", ".", "py", "。", "\n", "2", "-", "1", " ", "简单", "消息", "：", "\n", "简单", "消息", "：", " ", "将", "一条", "消息", "存储", "到", "变量", "中", "，", "再", "将", "其", "打印", "出来", "。", "\n", "2", "-", "2", " ", "多条", "简单", "消息", "：", "\n", "多条", "简单", "消息", "：", " ", "将", "一条", "消息", "存储", "到", "变量", "中", "，", "将", "其", "打印", "出来", "；", "再", "将", "变量", "的", "值", "修改", "为", "一条", "新", "消息", "，", "并", "将", "其", "打印", "出来", "。", "\n", "2.3", "　", "字符串", "\n", "　", "字符串", "\n", "大多数", "程序", "都", "定义", "并", "收集", "某种", "数据", "，", "然后", "使用", "它们", "来", "做些", "有", "意义", "的", "事情", "。", "鉴于", "此", "，", "对", "数据", "进行", "分类", "大有裨益", "。", "我们", "将", "介绍", "的", "第一种", "数据类型", "是", "字符串", "。", "字符串", "虽然", "看似", "简单", "，", "但", "\n", "能够", "以", "很多", "不同", "的", "方式", "使用", "它们", "。"], ["字符串", "\n", "字符串", " ", "就是", "一系列", "字符", "。", "在", "Python", "中", "，", "用", "引号", "括起", "的", "都", "是", "字符串", "，", "其中", "的", "引号", "可以", "是", "单引号", "，", "也", "可以", "是", "双引号", "，", "如下", "所示", "：", "\n", "\"", "This", " ", "is", " ", "a", " ", "string", ".", "\"", "\n", "'", "This", " ", "is", " ", "also", " ", "a", " ", "string", ".", "'", "\n", "这种", "灵活性", "让", "你", "能够", "在", "字符串", "中", "包含", "引号", "和", "撇", "号", "：", "\n", "'", "I", " ", "told", " ", "my", " ", "friend", ",", " ", "\"", "Python", " ", "is", " ", "my", " ", "favorite", " ", "language", "!", "\"", "'", "\n", "\"", "The", " ", "language", " ", "'", "Python", "'", " ", "is", " ", "named", " ", "after", " ", "Monty", " ", "Python", ",", " ", "not", " ", "the", " ", "snake", ".", "\"", "\n", "\"", "One", " ", "of", " ", "Python", "'", "s", " ", "strengths", " ", "is", " ", "its", " ", "diverse", " ", "and", " ", "supportive", " ", "community", ".", "\"", "\n", "下面", "来看", "一些", "使用", "字符串", "的", "方式", "。", "\n", "2.3", ".", "1", "　", "使用", "方法", "修改", "字符串", "的", "大小写", "\n", "　", "使用", "方法", "修改", "字符串", "的", "大小写", "\n", "对于", "字符串", "，", "可", "执行", "的", "最", "简单", "的", "操作", "之一", "是", "修改", "其中", "的", "单词", "的", "大小写", "。", "请", "看", "下面", "的", "代码", "，", "并", "尝试", "判断", "其", "作用", "：", "\n", "name", ".", "py", "\n", "name", " ", "=", " ", "\"", "ada", " ", "lovelace", "\"", "\n", "print", "(", "name", ".", "title", "(", ")", ")", "\n", "将", "这个", "文件", "保存", "为", "name", ".", "py", "，", "再", "运行", "它", "。", "你", "将", "看到", "如下", "输出", "："], ["将", "这个", "文件", "保存", "为", "name", ".", "py", "，", "再", "运行", "它", "。", "你", "将", "看到", "如下", "输出", "：", "\n", "Ada", " ", "Lovelace", "\n", "在", "这个", "示例", "中", "，", "小写", "的", "字符串", "\"", "ada", " ", "lovelace", "\"", " ", "存储", "到", "了", "变量", "name", " ", "中", "。", "在", "print", "(", ")", " ", "语句", "中", "，", "方法", "title", "(", ")", " ", "出现", "在", "这个", "变量", "的", "后面", "。", "方法", "\n", "方法", " ", "是", "Python", "可", "对", "数据", "执行", "的", "操作", "。", "\n", "在", "name", ".", "title", "(", ")", " ", "中", "，", "name", " ", "后面", "的", "句点", "（", ".", " ", "）", "让", "Python", "对", "变量", "name", " ", "执行", "方法", "title", "(", ")", " ", "指定", "的", "操作", "。", "每个", "方法", "后面", "都", "跟着", "一对", "括号", "，", "这", "是因为", "方法", "通常", "需要", "额外", "的", "信息", "来", "完成", "\n", "其", "工作", "。", "这种", "信息", "是", "在", "括号", "内", "提供", "的", "。", "函数", "title", "(", ")", " ", "不", "需要", "额外", "的", "信息", "，", "因此", "它", "后面", "的", "括号", "是", "空", "的", "。", "\n", "title", "(", ")", " ", "以", "首字母", "大写", "的", "方式", "显示", "每个", "单词", "，", "即将", "每个", "单词", "的", "首字母", "都", "改为", "大写", "。", "这", "很", "有用", "，", "因为", "你", "经常", "需要", "将", "名字", "视为", "信息", "。", "例如", "，", "你", "可能", "希望", "程序", "将值", "Ada", " ", "、", "ADA", " ", "和", "ada", "\n", "视为", "同一个", "名字", "，", "并", "将", "它们", "都", "显示", "为", "Ada", " ", "。", "\n", "还有", "其他", "几个", "很", "有用", "的", "大小写", "处理", "方法", "。", "例如", "，", "要", "将", "字符串", "改为", "全部", "大写", "或", "全部", "小写", "，", "可以", "像", "下面", "这样", "做", "：", "\n", "name", " ", "=", " ", "\"", "Ada", " ", "Lovelace", "\"", "\n", "print", "(", "name", ".", "upper", "(", ")", ")", "\n", "print", "(", "name", ".", "lower", "(", ")", ")"], ["print", "(", "name", ".", "upper", "(", ")", ")", "\n", "print", "(", "name", ".", "lower", "(", ")", ")", "\n", "这些", "代码", "的", "输出", "如下", "：", "\n", "ADA", " ", "LOVELACE", "\n", "ada", " ", "lovelace", "\n", "存储", "数据", "时", "，", "方法", "lower", "(", ")", " ", "很", "有用", "。", "很多", "时候", "，", "你", "无法", "依靠", "用户", "来", "提供", "正确", "的", "大小写", "，", "因此", "需要", "将", "字符串", "先", "转换", "为", "小写", "，", "再", "存储", "它们", "。", "以后", "需要", "显示", "这些", "信息", "时", "，", "再", "将", "其", "转换", "为", "\n", "最合适", "的", "大小写", "方式", "。", "\n", "2.3", ".", "2", "　", "合并", "（", "拼接", "）", "字符串", "\n", "　", "合并", "（", "拼接", "）", "字符串", "\n", "在", "很多", "情况", "下", "，", "都", "需要", "合并", "字符串", "。", "例如", "，", "你", "可能", "想", "将", "姓", "和", "名", "存储", "在", "不同", "的", "变量", "中", "，", "等", "要", "显示", "姓名", "时", "再", "将", "它们", "合而为一", "：", "\n", " ", " ", "first", "_", "name", " ", "=", " ", "\"", "ada", "\"", "\n", " ", " ", "last", "_", "name", " ", "=", " ", "\"", "lovelace", "\"", "\n", "❶", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "\"", " ", "\"", " ", "+", " ", "last", "_", "name", "\n", " ", " ", "print", "(", "full", "_", "name", ")", "\n", "Python", "使用", "加号", "（", "+", " ", "）", "来", "合并", "字符串", "。", "在", "这个", "示例", "中", "，", "我们", "使用", "+", " ", "来", "合并", "first", "_", "name", " ", "、", "空格", "和", "last", "_", "name", " ", "，", "以", "得到", "完整", "的", "姓名", "（", "见", "❶", "）", "，", "其", "结果", "如下", "：", "\n", "ada", " ", "lovelace", "\n", "这种", "合并", "字符串", "的", "方法", "称为", "拼接", "\n", "拼接", " ", "。", "通过", "拼接", "，", "可", "使用", "存储", "在", "变量", "中", "的", "信息", "来", "创建", "完整", "的", "消息", "。", "下面", "来看", "一个", "例子", "："], ["拼接", " ", "。", "通过", "拼接", "，", "可", "使用", "存储", "在", "变量", "中", "的", "信息", "来", "创建", "完整", "的", "消息", "。", "下面", "来看", "一个", "例子", "：", "\n", " ", " ", " ", "first", "_", "name", " ", "=", " ", "\"", "ada", "\"", "\n", " ", " ", " ", "last", "_", "name", " ", "=", " ", "\"", "lovelace", "\"", "\n", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "\"", " ", "\"", " ", "+", " ", "last", "_", "name", "\n", "❶", " ", "print", "(", "\"", "Hello", ",", " ", "\"", " ", "+", " ", "full", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", ")", "\n", "在", "这里", "，", "一个", "问候", "用户", "的", "句子", "中", "使用", "了", "全名", "（", "见", "❶", "）", "，", "并", "使用", "了", "方法", "title", "(", ")", " ", "来", "将", "姓名", "设置", "为", "合适", "的", "格式", "。", "这些", "代码", "显示", "一条", "格式", "良好", "的", "简单", "问候语", "："], ["Hello", ",", " ", "Ada", " ", "Lovelace", "!", "\n", "你", "可以", "使用", "拼接", "来", "创建", "消息", "，", "再", "把", "整条", "消息", "都", "存储", "在", "一个", "变量", "中", "：", "\n", " ", " ", "first", "_", "name", " ", "=", " ", "\"", "ada", "\"", "\n", " ", " ", "last", "_", "name", " ", "=", " ", "\"", "lovelace", "\"", "\n", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "\"", " ", "\"", " ", "+", " ", "last", "_", "name", "\n", "❶", " ", "message", " ", "=", " ", "\"", "Hello", ",", " ", "\"", " ", "+", " ", "full", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", "\n", "❷", " ", "print", "(", "message", ")", "\n", "上述", "代码", "也", "显示", "消息", "“", "Hello", ",", " ", "Ada", " ", "Lovelace", "!", "”", "，", "但", "将", "这条", "消息", "存储", "在", "了", "一个", "变量", "中", "（", "见", "❶", "）", "，", "这", "让", "最后", "的", "print", " ", "语句", "简单", "得", "多", "（", "见", "❷", "）", "。", "\n", "2.3", ".", "3", "　", "使用", "制表符", "或", "换行符", "来", "添加", "空白", "\n", "　", "使用", "制表符", "或", "换行符", "来", "添加", "空白", "\n", "在", "编程", "中", "，", "空白", "\n", "空白", " ", "泛指", "任何", "非", "打印", "字符", "，", "如", "空格", "、", "制表符", "和", "换行符", "。", "你", "可", "使用", "空白", "来", "组织", "输出", "，", "以使", "其", "更", "易读", "。", "\n", "要", "在", "字符串", "中", "添加", "制表符", "，", "可", "使用", "字符", "组合", "\\", "t", " ", "，", "如", "下述", "代码", "的", "❶", "处所", "示", "：", "\n", " ", " ", ">", ">", ">", " ", "print", "(", "\"", "Python", "\"", ")", "\n", " ", " ", "Python", "\n", "❶", " ", ">", ">", ">", " ", "print", "(", "\"", "\\", "tPython", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "Python", "\n", "要", "在", "字符串", "中", "添加", "换行符", "，", "可", "使用", "字符", "组合", "\\", "n", " ", "："], ["Python", "\n", "要", "在", "字符串", "中", "添加", "换行符", "，", "可", "使用", "字符", "组合", "\\", "n", " ", "：", "\n", ">", ">", ">", " ", "print", "(", "\"", "Languages", ":", "\\", "nPython", "\\", "nC", "\\", "nJavaScript", "\"", ")", "\n", "Languages", ":", "\n", "Python", "\n", "C", "\n", "JavaScript", "\n", "还", "可", "在", "同一个", "字符串", "中", "同时", "包含", "制表符", "和", "换行符", "。", "字符串", "\"", "\\", "n", "\\", "t", "\"", " ", "让", "Python", "换到", "下", "一行", "，", "并", "在", "下", "一行", "开头", "添加", "一个", "制表符", "。", "下面", "的", "示例", "演示", "了", "如何", "使用", "一个", "单行", "字符串", "来", "生成", "四行", "\n", "输出", "：", "\n", ">", ">", ">", " ", "print", "(", "\"", "Languages", ":", "\\", "n", "\\", "tPython", "\\", "n", "\\", "tC", "\\", "n", "\\", "tJavaScript", "\"", ")", "\n", "Languages", ":", "\n", " ", " ", " ", " ", "Python", "\n", " ", " ", " ", " ", "C", "\n", " ", " ", " ", " ", "JavaScript", "\n", "在", "接下来", "的", "两章", "中", "，", "你", "将", "使用", "为数不多", "的", "几行", "代码", "来", "生成", "很多", "行", "输出", "，", "届时", "制表符", "和", "换行符", "将", "提供", "极大", "的", "帮助", "。", "\n", "2.3", ".", "4", "　", "删除", "空白", "\n", "　", "删除", "空白", "\n", "在", "程序", "中", "，", "额外", "的", "空白", "可能", "令人", "迷惑", "。", "对", "程序员", "来说", "，", "'", "python", "'", " ", "和", "'", "python", " ", "'", " ", "看起来", "几乎", "没什么", "两样", "，", "但", "对", "程序", "来说", "，", "它们", "却是", "两个", "不同", "的", "字符串", "。", "Python", "能够", "发", "\n", "现", "'", "python", " ", "'", " ", "中", "额外", "的", "空白", "，", "并", "认为", "它", "是", "有", "意义", "的", "—", "—", "除非", "你", "告诉", "它", "不是", "这样", "的", "。"], ["现", "'", "python", " ", "'", " ", "中", "额外", "的", "空白", "，", "并", "认为", "它", "是", "有", "意义", "的", "—", "—", "除非", "你", "告诉", "它", "不是", "这样", "的", "。", "\n", "空白", "很", "重要", "，", "因为", "你", "经常", "需要", "比较", "两个", "字符串", "是否", "相同", "。", "例如", "，", "一个", "重要", "的", "示例", "是", "，", "在", "用户", "登录", "网站", "时", "检查", "其", "用户名", "。", "但", "在", "一些", "简单", "得", "多", "的", "情形", "下", "，", "额外", "的", "空格", "也", "可能", "令人", "迷", "\n", "惑", "。", "所幸", "在", "Python", "中", "，", "删除", "用户", "输入", "的", "数据", "中", "的", "多余", "的", "空白", "易如反掌", "。", "\n", "Python", "能够", "找出", "字符串", "开头", "和", "末尾", "多余", "的", "空白", "。", "要", "确保", "字符串", "末尾", "没有", "空白", "，", "可", "使用", "方法", "rstrip", "(", ")", " ", "。", "\n", "❶", " ", ">", ">", ">", " ", "favorite", "_", "language", " ", "=", " ", "'", "python", " ", "'", "\n", "❷", " ", ">", ">", ">", " ", "favorite", "_", "language", "\n", " ", " ", "'", "python", " ", "'", "\n", "❸", " ", ">", ">", ">", " ", "favorite", "_", "language", ".", "rstrip", "(", ")", "\n", " ", " ", "'", "python", "'", "\n", "❹", " ", ">", ">", ">", " ", "favorite", "_", "language", "\n", " ", " ", "'", "python", " ", "'", "\n", "存储", "在", "变量", "favorite", "_", "language", " ", "中", "的", "字符串", "末尾", "包含", "多余", "的", "空白", "（", "见", "❶", "）", "。", "你", "在", "终端", "会话", "中", "向", "Python", "询问", "这个", "变量", "的", "值时", "，", "可", "看到", "末尾", "的", "空格", "（", "见", "❷", "）", "。", "对变"], ["量", "favorite", "_", "language", " ", "调用", "方法", "rstrip", "(", ")", " ", "后", "（", "见", "❸", "）", "，", "这个", "多余", "的", "空格", "被", "删除", "了", "。", "然而", "，", "这种", "删除", "只是", "暂时", "的", "，", "接下来", "再次", "询问", "favorite", "_", "language", " ", "的", "值时", "，", "你会发", "\n", "现", "这个", "字符串", "与", "输入", "时", "一样", "，", "依然", "包含", "多余", "的", "空白", "（", "见", "❹", "）", "。", "\n", "要", "永久", "删除", "这个", "字符串", "中", "的", "空白", "，", "必须", "将", "删除", "操作", "的", "结果", "存", "回到", "变量", "中", "：", "\n", " ", " ", ">", ">", ">", " ", "favorite", "_", "language", " ", "=", " ", "'", "python", " ", "'", "\n", "❶", " ", ">", ">", ">", " ", "favorite", "_", "language", " ", "=", " ", "favorite", "_", "language", ".", "rstrip", "(", ")", "\n", " ", " ", ">", ">", ">", " ", "favorite", "_", "language", "\n", " ", " ", "'", "python", "'", "\n", "为", "删除", "这个", "字符串", "中", "的", "空白", "，", "你", "需要", "将", "其", "末尾", "的", "空白", "剔除", "，", "再", "将", "结果", "存", "回到", "原来", "的", "变量", "中", "（", "见", "❶", "）", "。", "在", "编程", "中", "，", "经常", "需要", "修改", "变量", "的", "值", "，", "再", "将", "新值", "存", "回到", "原来", "的", "变量", "中", "。", "这", "就是", "\n", "变量", "的", "值", "可能", "随", "程序", "的", "运行", "或", "用户", "输入", "数据", "而", "发生变化", "的", "原因", "。", "\n", "你", "还", "可以", "剔除", "字符串", "开头", "的", "空白", "，", "或", "同时", "剔除", "字符串", "两端", "的", "空白", "。", "为此", "，", "可", "分别", "使用", "方法", "lstrip", "(", ")", " ", "和", "strip", "(", ")", " ", "：", "\n", "❹", " ", ">", ">", ">", " ", "favorite", "_", "language", " ", "=", " ", "'", " ", "python", " ", "'"], ["❹", " ", ">", ">", ">", " ", "favorite", "_", "language", " ", "=", " ", "'", " ", "python", " ", "'", "\n", "❷", " ", ">", ">", ">", " ", "favorite", "_", "language", ".", "rstrip", "(", ")", "\n", " ", " ", "'", " ", "python", "'"], ["❸", " ", ">", ">", ">", " ", "favorite", "_", "language", ".", "lstrip", "(", ")", "\n", " ", " ", "'", "python", " ", "'", "\n", "❹", " ", ">", ">", ">", " ", "favorite", "_", "language", ".", "strip", "(", ")", "\n", " ", " ", "'", "python", "'", "\n", "在", "这个", "示例", "中", "，", "我们", "首先", "创建", "了", "一个", "开头", "和", "末尾", "都", "有", "空白", "的", "字符串", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "分别", "删除", "末尾", "（", "见", "❷", "）", "、", "开头", "（", "见", "❸", "）", "和", "两端", "（", "见", "❹", "）", "的", "空格", "。", "尝试", "使用", "这些", "剥除", "函", "\n", "数", "有助于", "你", "熟悉", "字符串", "操作", "。", "在", "实际", "程序", "中", "，", "这些", "剥除", "函数", "最", "常用", "于", "在", "存储用户", "输入", "前", "对", "其", "进行", "清理", "。", "\n", "2.3", ".", "5", "　", "使用", "字符串", "时", "避免", "语法错误", "\n", "　", "使用", "字符串", "时", "避免", "语法错误", "\n", "语法错误", "\n", "语法错误", " ", "是", "一种", "时不时", "会", "遇到", "的", "错误", "。", "程序", "中", "包含", "非法", "的", "Python", "代码", "时", "，", "就", "会", "导致", "语法错误", "。", "例如", "，", "在", "用", "单引号", "括起", "的", "字符串", "中", "，", "如果", "包含", "撇号", "，", "就", "将", "导致", "错误", "。", "这", "是因为", "这会", "\n", "导致", "Python", "将", "第一个", "单引号", "和", "撇", "号", "之间", "的", "内容", "视为", "一个", "字符串", "，", "进而", "将", "余下", "的", "文本", "视为", "Python", "代码", "，", "从而", "引发", "错误", "。", "\n", "下面", "演示", "了", "如何", "正确", "地", "使用", "单引号", "和", "双引号", "。", "请", "将", "该", "程序", "保存", "为", "apostrophe", ".", "py", "，", "再", "运行", "它", "：", "\n", "apostrophe", ".", "py"], ["apostrophe", ".", "py", "\n", "message", " ", "=", " ", "\"", "One", " ", "of", " ", "Python", "'", "s", " ", "strengths", " ", "is", " ", "its", " ", "diverse", " ", "community", ".", "\"", "\n", "print", "(", "message", ")", "\n", "撇号", "位于", "两个", "双引号", "之间", "，", "因此", "Python", "解释器", "能够", "正确", "地", "理解", "这个", "字符串", "：", "\n", "One", " ", "of", " ", "Python", "'", "s", " ", "strengths", " ", "is", " ", "its", " ", "diverse", " ", "community", ".", "\n", "然而", "，", "如果", "你", "使用", "单引号", "，", "Python", "将", "无法", "正确", "地", "确定", "字符串", "的", "结束", "位置", "：", "\n", "message", " ", "=", " ", "'", "One", " ", "of", " ", "Python", "'", "s", " ", "strengths", " ", "is", " ", "its", " ", "diverse", " ", "community", ".", "'", "\n", "print", "(", "message", ")", "\n", "而", "你", "将", "看到", "如下", "输出", "：", "\n", " ", " ", "File", " ", "\"", "apostrophe", ".", "py", "\"", ",", " ", "line", " ", "1", "\n", " ", " ", " ", " ", "message", " ", "=", " ", "'", "One", " ", "of", " ", "Python", "'", "s", " ", "strengths", " ", "is", " ", "its", " ", "diverse", " ", "community", ".", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "^", "❶", "\n", "SyntaxError", ":", " ", "invalid", " ", "syntax", "\n", "从", "上述", "输出", "可知", "，", "错误", "发生", "在", "第二个", "单引号", "后面", "（", "见", "❶", "）", "。", "这种", "语法错误"], ["从", "上述", "输出", "可知", "，", "错误", "发生", "在", "第二个", "单引号", "后面", "（", "见", "❶", "）", "。", "这种", "语法错误", "\n", "语法错误", " ", "表明", "，", "在", "解释器", "看来", "，", "其中", "的", "有些", "内容", "不是", "有效", "的", "Python", "代码", "。", "错误", "的", "来源", "多种多样", "，", "这里", "指出", "一些", "常", "\n", "见", "的", "。", "学习", "编写", "Python", "代码", "时", "，", "你", "可能", "会", "经常", "遇到", "语法错误", "。", "语法错误", "也", "是", "最", "不", "具体", "的", "错误", "类型", "，", "因此", "可能", "难以", "找出", "并", "修复", "。", "受困", "于", "非常", "棘手", "的", "错误", "时", "，", "请参阅", "附录", "C", "提供", "的", "建", "\n", "议", "。", "\n", "注意", "\n", "注意", " ", "　", "编写程序", "时", "，", "编辑器", "的", "语法", "突出", "功能", "可", "帮助", "你", "快速", "找出", "某些", "语法错误", "。", "看到", "Python", "代码", "以", "普通", "句子", "的", "颜色", "显示", "，", "或者", "普通", "句子", "以", "Python", "代码", "的", "颜色", "显示", "时", "，", "就", "可", "\n", "能", "意味着", "文件", "中", "存在", "引号", "不", "匹配", "的", "情况", "。", "\n", "2.3", ".", "6", "　", "\n", "　", "Python", " ", "2", "中", "的", "\n", "中", "的", "print", " ", "语句", "\n", "语句", "\n", "在", "Python", " ", "2", "中", "，", "print", " ", "语句", "的", "语法", "稍", "有", "不同", "：", "\n", ">", ">", ">", " ", "python2.7", "\n", ">", ">", ">", " ", "print", " ", "\"", "Hello", " ", "Python", " ", "2.7", " ", "world", "!", "\"", "\n", "Hello", " ", "Python", " ", "2.7", " ", "world", "!", "\n", "在", "Python", " ", "2", "中", "，", "无需", "将要", "打印", "的", "内容", "放在", "括号", "内", "。", "从技术上", "说", "，", "Python", " ", "3", "中", "的", "print", " ", "是", "一个", "函数", "，", "因此", "括号", "必不可少", "。", "有些", "Python", " ", "2", " ", "print", " ", "语句", "也", "包含", "括号", "，", "但", "其", "行为", "与", "Python", " ", "3", "中"], ["稍", "有", "不同", "。", "简单", "地说", "，", "在", "Python", " ", "2", "代码", "中", "，", "有些", "print", " ", "语句", "包含", "括号", "，", "有些", "不", "包含", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "在", "做", "下面", "的", "每个", "练习", "时", "，", "都", "编写", "一个", "独立", "的", "程序", "，", "并", "将", "其", "保存", "为", "名称", "类似", "于", "name", "_", "cases", ".", "py", "的", "文件", "。", "如果", "遇到", "了", "困难", "，", "请", "休息", "一会儿", "或", "参阅", "附录", "C", "提供", "的", "建议", "。", "\n", "2", "-", "3", " ", "个性化", "消息", "：", "\n", "个性化", "消息", "：", " ", "将", "用户", "的", "姓名", "存", "到", "一个", "变量", "中", "，", "并", "向", "该", "用户", "显示", "一条", "消息", "。", "显示", "的", "消息", "应", "非常简单", "，", "如", "“", "Hello", " ", "Eric", ",", " ", "would", " ", "you", " ", "like", " ", "to", " ", "learn", " ", "some", " ", "Python", " ", "today", "?", "”", "。", "\n", "2", "-", "4", " ", "调整", "名字", "的", "大小写", "：", "\n", "调整", "名字", "的", "大小写", "：", " ", "将", "一个", "人", "名", "存储", "到", "一个", "变量", "中", "，", "再", "以", "小写", "、", "大写", "和", "首字母", "大写", "的", "方式", "显示", "这个", "人", "名", "。", "\n", "2", "-", "5", " ", "名言", "：", "\n", "名言", "：", " ", "找", "一句", "你", "钦佩", "的", "名人", "说", "的", "名言", "，", "将", "这个", "名人", "的", "姓名", "和", "他", "的", "名言", "打印", "出来", "。", "输出", "应", "类似", "于", "下面", "这样", "（", "包括", "引号", "）", "：", "\n", "Albert", " ", "Einstein", " ", "once", " ", "said", ",", " ", "“", "A", " ", "person", " ", "who", " ", "never", " ", "made", " ", "a", " ", "mistake", " ", "never", " ", "tried", " ", "anything", " ", "new", ".", "”", "\n", "2", "-", "6", " ", "名言", "\n", "名言", "2", "："], ["2", "-", "6", " ", "名言", "\n", "名言", "2", "：", "\n", "：", " ", "重复", "练习", "2", "-", "5", "，", "但", "将", "名人", "的", "姓名", "存储", "在", "变量", "famous", "_", "person", " ", "中", "，", "再", "创建", "要", "显示", "的", "消息", "，", "并", "将", "其", "存储", "在", "变量", "message", " ", "中", "，", "然后", "打印", "这", "条", "消息", "。", "\n", "2", "-", "7", " ", "剔除", "人名", "中", "的", "空白", "：", "\n", "剔除", "人名", "中", "的", "空白", "：", " ", "存储", "一个", "人", "名", "，", "并", "在", "其", "开头", "和", "末尾", "都", "包含", "一些", "空白", "字符", "。", "务必", "至少", "使用", "字符", "组合", "\"", "\\", "t", "\"", " ", "和", "\"", "\\", "n", "\"", " ", "各", "一次", "。", "\n", "打印", "这个", "人", "名", "，", "以", "显示", "其", "开头", "和", "末尾", "的", "空白", "。", "然后", "，", "分别", "使用", "剔除", "函数", "lstrip", "(", ")", " ", "、", "rstrip", "(", ")", " ", "和", "strip", "(", ")", " ", "对人名", "进行", "处理", "，", "并", "将", "结果", "打印", "出来", "。", "\n", "2.4", "　", "数字", "\n", "　", "数字", "\n", "在", "编程", "中", "，", "经常", "使用", "数字", "来", "记录", "游戏", "得分", "、", "表示", "可视化", "数据", "、", "存储", "Web", "应用", "信息", "等", "。", "Python", "根据", "数字", "的", "用法", "以", "不同", "的", "方式", "处理", "它们", "。", "鉴于", "整数", "使用", "起来", "最", "简单", "，", "下面", "就", "先来", "看看", "\n", "Python", "是", "如何", "管理", "它们", "的", "。", "\n", "2.4", ".", "1", "　", "整数", "\n", "　", "整数", "\n", "在", "Python", "中", "，", "可", "对", "整数", "执行", "加", "（", "+", " ", "）", "减", "（", "-", " ", "）", "乘", "（", "*", " ", "）", "除", "（", "/", " ", "）", "运算", "。"], [">", ">", ">", " ", "2", " ", "+", " ", "3", "\n", "5", "\n", ">", ">", ">", " ", "3", " ", "-", " ", "2", "\n", "1", "\n", ">", ">", ">", " ", "2", " ", "*", " ", "3", "\n", "6", "\n", ">", ">", ">", " ", "3", " ", "/", " ", "2", "\n", "1.5", "\n", "在", "终端", "会话", "中", "，", "Python", "直接", "返回", "运算", "结果", "。", "Python", "使用", "两个", "乘", "号", "表示", "乘方", "运算", "：", "\n", ">", ">", ">", " ", "3", " ", "*", "*", " ", "2", "\n", "9", "\n", ">", ">", ">", " ", "3", " ", "*", "*", " ", "3", "\n", "27", "\n", ">", ">", ">", " ", "10", " ", "*", "*", " ", "6", "\n", "1000000", "\n", "Python", "还", "支持", "运算", "次序", "，", "因此", "你", "可", "在", "同一个", "表达式", "中", "使用", "多种", "运算", "。", "你", "还", "可以", "使用", "括号", "来", "修改", "运算", "次序", "，", "让", "Python", "按", "你", "指定", "的", "次序", "执行", "运算", "，", "如下", "所示", "：", "\n", ">", ">", ">", " ", "2", " ", "+", " ", "3", "*", "4", "\n", "14", "\n", ">", ">", ">", " ", "(", "2", " ", "+", " ", "3", ")", " ", "*", " ", "4", "\n", "20", "\n", "在", "这些", "示例", "中", "，", "空格", "不", "影响", "Python", "计算", "表达式", "的", "方式", "，", "它们", "的", "存在", "旨在", "让", "你", "阅读", "代码", "时", "，", "能", "迅速", "确定", "先", "执行", "哪些", "运算", "。", "\n", "2.4", ".", "2", "　", "浮点数", "\n", "　", "浮点数", "\n", "Python", "将", "带", "小数点", "的", "数字", "都", "称为", "浮点数", "\n", "浮点数", " ", "。", "大多数", "编程语言", "都", "使用", "了", "这个", "术语", "，", "它", "指出", "了", "这样", "一个", "事实", "：", "小数点", "可", "出现", "在", "数字", "的", "任何", "位置", "。", "每种", "编程语言", "都", "须", "细心", "设计", "，", "以", "妥善", "地", "\n", "处理", "浮点数", "，", "确保", "不管", "小数点", "出现", "在", "什么", "位置", "，", "数字", "的", "行为", "都", "是", "正常", "的", "。", "\n", "从", "很大", "程度", "上", "说", "，", "使用", "浮点数", "时", "都", "无需", "考虑", "其", "行为", "。", "你", "只", "需", "输入", "要", "使用", "的", "数字", "，", "Python", "通常", "都", "会", "按", "你", "期望", "的", "方式", "处理", "它们", "：", "\n", ">", ">", ">", " ", "0.1", " ", "+", " ", "0.1"], [">", ">", ">", " ", "0.1", " ", "+", " ", "0.1", "\n", "0.2", "\n", ">", ">", ">", " ", "0.2", " ", "+", " ", "0.2", "\n", "0.4", "\n", ">", ">", ">", " ", "2", " ", "*", " ", "0.1", "\n", "0.2", "\n", ">", ">", ">", " ", "2", " ", "*", " ", "0.2", "\n", "0.4", "\n", "但", "需要", "注意", "的", "是", "，", "结果", "包含", "的", "小数位", "数", "可能", "是", "不", "确定", "的", "：", "\n", ">", ">", ">", " ", "0.2", " ", "+", " ", "0.1", "\n", "0.30000000000000004", "\n", ">", ">", ">", " ", "3", " ", "*", " ", "0.1", "\n", "0.30000000000000004", "\n", "所有", "语言", "都", "存在", "这种", "问题", "，", "没有", "什么", "可", "担心", "的", "。", "Python", "会", "尽力", "找到", "一种", "方式", "，", "以", "尽可能", "精确", "地", "表示", "结果", "，", "但", "鉴于", "计算机", "内部", "表示", "数字", "的", "方式", "，", "这", "在", "有些", "情况", "下", "很", "难", "。", "就", "现在", "而言", "，", "\n", "暂时", "忽略", "多余", "的", "小数位", "数", "即可", "；", "在", "第二", "部分", "的", "项目", "中", "，", "你", "将", "学习", "在", "需要", "时", "处理", "多余", "小数位", "的", "方式", "。", "\n", "2.4", ".", "3", "　", "使用", "函数", "\n", "　", "使用", "函数", "str", "(", ")", " ", "避免", "类型", "错误", "\n", "避免", "类型", "错误", "\n", "你", "经常", "需要", "在", "消息", "中", "使用", "变量", "的", "值", "。", "例如", "，", "假设", "你", "要", "祝人", "生日快乐", "，", "可能", "会", "编写", "类似", "于", "下面", "的", "代码", "：", "\n", "birthday", ".", "py", "\n", "age", " ", "=", " ", "23", "\n", "message", " ", "=", " ", "\"", "Happy", " ", "\"", " ", "+", " ", "age", " ", "+", " ", "\"", "rd", " ", "Birthday", "!", "\"", "\n", "print", "(", "message", ")"], ["print", "(", "message", ")", "\n", "你", "可能", "认为", "，", "上述", "代码", "会", "打印", "一条", "简单", "的", "生日", "祝福语", "：", "Happy", " ", "23rd", " ", "birthday", "!", "。", "但", "如果", "你", "运行", "这些", "代码", "，", "将", "发现", "它们", "会", "引发", "错误", "：", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "File", " ", "\"", "birthday", ".", "py", "\"", ",", " ", "line", " ", "2", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", " ", " ", "message", " ", "=", " ", "\"", "Happy", " ", "\"", " ", "+", " ", "age", " ", "+", " ", "\"", "rd", " ", "Birthday", "!", "\"", "\n", "❶", " ", "TypeError", ":", " ", "Can", "'", "t", " ", "convert", " ", "'", "int", "'", " ", "object", " ", "to", " ", "str", " ", "implicitly", "\n", "这是", "一个", "类型", "错误", "\n", "类型", "错误", " ", "，", "意味着", "Python", "无法", "识别", "你", "使用", "的", "信息", "。", "在", "这个", "示例", "中", "，", "Python", "发现", "你", "使用", "了", "一个", "值为", "整数", "（", "int", " ", "）", "的", "变量", "，", "但", "它", "不", "知道", "该", "如何", "解读", "这个", "值", "（", "见", "❶", "）", "。", "Python", "知", "\n", "道", "，", "这个", "变量", "表示", "的", "可能", "是", "数值", "23", "，", "也", "可能", "是", "字符", "2", "和", "3", "。", "像", "上面", "这样", "在", "字符串", "中", "使用", "整数", "时", "，", "需要", "显式", "地", "指出", "你", "希望", "Python", "将", "这个", "整数", "用作", "字符串", "。", "为此", "，", "可", "调用函数", "str", "(", ")", " ", "，", "\n", "它", "让", "Python", "将", "非", "字符串", "值", "表示", "为", "字符串", "：", "\n", "age", " ", "=", " ", "23"], ["它", "让", "Python", "将", "非", "字符串", "值", "表示", "为", "字符串", "：", "\n", "age", " ", "=", " ", "23", "\n", "message", " ", "=", " ", "\"", "Happy", " ", "\"", " ", "+", " ", "str", "(", "age", ")", " ", "+", " ", "\"", "rd", " ", "Birthday", "!", "\"", "\n", "print", "(", "message", ")"], ["这样", "，", "Python", "就", "知道", "你", "要", "将", "数值", "23", "转换", "为", "字符串", "，", "进而", "在", "生日", "祝福", "消息", "中", "显示字符", "2", "和", "3", "。", "经过", "上述", "处理", "后", "，", "将", "显示", "你", "期望", "的", "消息", "，", "而", "不会", "引发", "错误", "：", "\n", "Happy", " ", "23rd", " ", "Birthday", "!", "\n", "大多数", "情况", "下", "，", "在", "Python", "中", "使用", "数字", "都", "非常简单", "。", "如果", "结果", "出乎意料", "，", "请", "检查", "Python", "是否", "按", "你", "期望", "的", "方式", "将", "数字", "解读", "为了", "数值", "或", "字符串", "。", "\n", "2.4", ".", "4", "　", "\n", "　", "Python", " ", "2", "中", "的", "整数", "\n", "中", "的", "整数", "\n", "在", "Python", " ", "2", "中", "，", "将", "两个", "整数", "相除", "得到", "的", "结果", "稍", "有", "不同", "：", "\n", ">", ">", ">", " ", "python2.7", "\n", ">", ">", ">", " ", "3", " ", "/", " ", "2", "\n", "1", "\n", "Python", "返回", "的", "结果", "为", "1", "，", "而", "不是", "1.5", "。", "在", "Python", " ", "2", "中", "，", "整数", "除法", "的", "结果", "只", "包含", "整数", "部分", "，", "小数", "部分", "被", "删除", "。", "请", "注意", "，", "计算", "整数", "结果", "时", "，", "采取", "的", "方式", "不是", "四舍五入", "，", "而是", "将", "小数", "部分", "直", "\n", "接", "删除", "。", "\n", "在", "Python", " ", "2", "中", "，", "若", "要", "避免", "这种", "情况", "，", "务必", "确保", "至少", "有", "一个", "操作数", "为", "浮点数", "，", "这样", "结果", "也", "将", "为", "浮点数", "：", "\n", ">", ">", ">", " ", "3", " ", "/", " ", "2", "\n", "1", "\n", ">", ">", ">", " ", "3.0", " ", "/", " ", "2", "\n", "1.5", "\n", ">", ">", ">", " ", "3", " ", "/", " ", "2.0", "\n", "1.5", "\n", ">", ">", ">", " ", "3.0", " ", "/", " ", "2.0", "\n", "1.5"], [">", ">", ">", " ", "3.0", " ", "/", " ", "2", "\n", "1.5", "\n", ">", ">", ">", " ", "3", " ", "/", " ", "2.0", "\n", "1.5", "\n", ">", ">", ">", " ", "3.0", " ", "/", " ", "2.0", "\n", "1.5", "\n", "从", "Python", " ", "3", "转而", "用", "Python", " ", "2", "或", "从", "Python", " ", "2", "转而", "用", "Python", " ", "3", "时", "，", "这种", "除法", "行为", "常常", "会", "令人", "迷惑", "。", "使用", "或", "编写", "同时", "使用", "浮点数", "和", "整数", "的", "代码", "时", "，", "一定", "要", "注意", "这种", "异常", "行为", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "2", "-", "8", " ", "数字", "\n", "数字", "8", "：", "\n", "：", " ", "编写", "4", "个", "表达式", "，", "它们", "分别", "使用", "加法", "、", "减法", "、", "乘法", "和", "除法", "运算", "，", "但", "结果", "都", "是", "数字", "8", "。", "为", "使用", "print", " ", "语句", "来", "显示", "结果", "，", "务必", "将", "这些", "表达式", "用", "括号", "括", "起来", "，", "也", "\n", "就是说", "，", "你", "应该", "编写", "4", "行", "类似", "于", "下面", "的", "代码", "：", "\n", "print", "(", "5", " ", "+", " ", "3", ")", "\n", "输出", "应为", "4", "行", "，", "其中", "每行", "都", "只", "包含", "数字", "8", "。", "\n", "2", "-", "9", " ", "最", "喜欢", "的", "数字", "：", "\n", "最", "喜欢", "的", "数字", "：", " ", "将", "你", "最", "喜欢", "的", "数字", "存储", "在", "一个", "变量", "中", "，", "再", "使用", "这个", "变量", "创建", "一条", "消息", "，", "指出", "你", "最", "喜欢", "的", "数字", "，", "然后", "将", "这条", "消息", "打印", "出来", "。", "\n", "2.5", "　", "注释", "\n", "　", "注释", "\n", "在", "大多数", "编程语言", "中", "，", "注释", "都", "是", "一项", "很", "有用", "的", "功能", "。", "本书", "前面", "编写", "的", "程序", "中", "都", "只", "包含", "Python", "代码", "，", "但", "随着", "程序", "越来越", "大", "、", "越来越", "复杂", "，", "就", "应", "在", "其中", "添加", "说明", "，", "对", "你", "解决问题", "的", "方法", "\n", "进行", "大致", "的", "阐述", "。", "注释", "\n", "注释", " ", "让", "你", "能够", "使用", "自然语言", "在", "程序", "中", "添加", "说明", "。", "\n", "2.5", ".", "1", "　", "如何", "编写", "注释"], ["进行", "大致", "的", "阐述", "。", "注释", "\n", "注释", " ", "让", "你", "能够", "使用", "自然语言", "在", "程序", "中", "添加", "说明", "。", "\n", "2.5", ".", "1", "　", "如何", "编写", "注释", "\n", "　", "如何", "编写", "注释", "\n", "在", "Python", "中", "，", "注释", "用井号", "（", "#", " ", "）", "标识", "。", "井号", "后面", "的", "内容", "都", "会", "被", "Python", "解释器", "忽略", "，", "如下", "所示", "：", "\n", "comment", ".", "py", "\n", "#", " ", "向", "大家", "问好", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "people", "!", "\"", ")", "\n", "Python", "解释器", "将", "忽略", "第", "1", "行", "，", "只", "执行", "第", "2", "行", "。", "\n", "Hello", " ", "Python", " ", "people", "!", "\n", "2.5", ".", "2", "　", "该", "编写", "什么样", "的", "注释", "\n", "　", "该", "编写", "什么样", "的", "注释", "\n", "编写", "注释", "的", "主要", "目的", "是", "阐述", "代码", "要", "做", "什么", "，", "以及", "是", "如何", "做", "的", "。", "在", "开发", "项目", "期间", "，", "你", "对", "各个", "部分", "如何", "协同工作", "了如指掌", "，", "但", "过段时间", "后", "，", "有些", "细节", "你", "可能", "不", "记得", "了", "。", "当然", "，", "你", "总是", "\n", "可以", "通过", "研究", "代码", "来", "确定", "各个", "部分", "的", "工作", "原理", "，", "但", "通过", "编写", "注释", "，", "以", "清晰", "的", "自然语言", "对", "解决方案", "进行", "概述", "，", "可", "节省", "很多", "时间", "。", "\n", "要", "成为", "专业", "程序员", "或", "与", "其他", "程序员", "合作", "，", "就", "必须", "编写", "有", "意义", "的", "注释", "。", "当前", "，", "大多数", "软件", "都", "是", "合作", "编写", "的", "，", "编写者", "可能", "是", "同", "一家", "公司", "的", "多名", "员工", "，", "也", "可能", "是", "众多", "致力于", "同一个", "开源"], ["项目", "的", "人员", "。", "训练有素", "的", "程序员", "都", "希望", "代码", "中", "包含", "注释", "，", "因此", "你", "最好", "从", "现在", "开始", "就", "在", "程序", "中", "添加", "描述性", "注释", "。", "作为", "新手", "，", "最", "值得", "养成", "的", "习惯", "之一", "是", "，", "在", "代码", "中", "编写", "清晰", "、", "简洁", "的", "\n", "注释", "。", "\n", "如果", "不", "确定", "是否", "要", "编写", "注释", "，", "就", "问问", "自己", "，", "找到", "合理", "的", "解决方案", "前", "，", "是否", "考虑", "了", "多个", "解决方案", "。", "如果", "答案", "是", "肯定", "的", "，", "就", "编写", "注释", "对", "你", "的", "解决方案", "进行", "说明", "吧", "。", "相比", "回过", "头去", "再", "添", "\n", "加", "注释", "，", "删除", "多余", "的", "注释", "要", "容易", "得", "多", "。", "从", "现在", "开始", "，", "本书", "的", "示例", "都", "将", "使用", "注释", "来", "阐述", "代码", "的", "工作", "原理", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "2", "-", "10", " ", "添加", "注释", "：", "\n", "添加", "注释", "：", " ", "选择", "你", "编写", "的", "两个", "程序", "，", "在", "每个", "程序", "中", "都", "至少", "添加", "一条", "注释", "。", "如果", "程序", "太", "简单", "，", "实在", "没有", "什么", "需要", "说明", "的", "，", "就", "在", "程序", "文件", "开头", "加上", "你", "的", "姓名", "和", "当前", "日", "\n", "期", "，", "再用", "一句", "话", "阐述", "程序", "的", "功能", "。", "\n", "2.6", "　", "\n", "　", "Python", "之禅", "\n", "之禅"], ["编程语言", "Perl", "曾", "在", "互联网", "领域", "长期", "占据", "着", "统治", "地位", "，", "早期", "的", "大多数", "交互式", "网站", "使用", "的", "都", "是", "Perl", "脚本", "。", "彼时", "，", "“", "解决问题", "的", "办法", "有", "多个", "”", "被", "Perl", "社区", "奉", "为", "座右铭", "。", "这种", "理念", "一度", "深受", "大家", "\n", "的", "喜爱", "，", "因为", "这种", "语言", "固有", "的", "灵活性", "使得", "大多数", "问题", "都", "有", "很多", "不同", "的", "解决之道", "。", "在", "开发", "项目", "期间", "，", "这种", "灵活性", "是", "可以", "接受", "的", "，", "但", "大家", "最终", "认识", "到", "，", "过于", "强调", "灵活性", "会", "导致", "大型", "项", "\n", "目", "难以", "维护", "：", "要", "通过", "研究", "代码", "搞清楚", "当时", "解决", "复杂", "问题", "的", "人", "是", "怎么", "想", "的", "，", "既", "困难", "又", "麻烦", "，", "还会", "耗费", "大量", "的", "时间", "。", "\n", "经验丰富", "的", "程序员", "倡导", "尽可能", "避繁就简", "。", "Python", "社区", "的", "理念", "都", "包含", "在", "Tim", " ", "Peters", "撰写", "的", "“", "Python", "之禅", "”", "中", "。", "要", "获悉", "这些", "有关", "编写", "优秀", "Python", "代码", "的", "指导", "原则", "，", "只", "需", "在", "解释器", "中", "执行", "命", "\n", "令", "import", " ", "this", " ", "。", "这里", "不", "打算", "赘述", "整个", "“", "Python", "之禅", "”", "，", "而", "只", "与", "大家", "分享", "其中", "的", "几条", "原则", "，", "让", "你", "明白", "为何", "它们", "对", "Python", "新手", "来说", "至关重要", "。", "\n", ">", ">", ">", " ", "import", " ", "this", "\n", "The", " ", "Zen", " ", "of", " ", "Python", ",", " ", "by", " ", "Tim", " ", "Peters", "\n", "Beautiful", " ", "is", " ", "better", " ", "than", " ", "ugly", "."], ["Beautiful", " ", "is", " ", "better", " ", "than", " ", "ugly", ".", "\n", "Python", "程序员", "笃信", "代码", "可以", "编写", "得", "漂亮", "而", "优雅", "。", "编程", "是", "要", "解决问题", "的", "，", "设计", "良好", "、", "高效", "而", "漂亮", "的", "解决方案", "都", "会", "让", "程序员", "心", "生", "敬意", "。", "随着", "你", "对", "Python", "的", "认识", "越来越", "深入", "，", "并", "使用", "它", "来", "\n", "编写", "越来越", "多", "的", "代码", "，", "有", "一天", "也许", "会", "有人", "站", "在", "你", "后面", "惊呼", "：", "“", "哇", "，", "代码", "编写", "得", "真是", "漂亮", "！", "”", "\n", "Simple", " ", "is", " ", "better", " ", "than", " ", "complex", ".", "\n", "如果", "有", "两个", "解决方案", "，", "一个", "简单", "，", "一个", "复杂", "，", "但", "都", "行之有效", "，", "就", "选择", "简单", "的", "解决方案", "吧", "。", "这样", "，", "你", "编写", "的", "代码", "将", "更", "容易", "维护", "，", "你", "或", "他人", "以后", "改进", "这些", "代码", "时", "也", "会", "更", "容易", "。", "\n", "Complex", " ", "is", " ", "better", " ", "than", " ", "complicated", ".", "\n", "现实", "是", "复杂", "的", "，", "有时候", "可能", "没有", "简单", "的", "解决方案", "。", "在", "这种", "情况", "下", "，", "就", "选择", "最", "简单", "可行", "的", "解决方案", "吧", "。", "\n", "Readability", " ", "counts", ".", "\n", "即便", "是", "复杂", "的", "代码", "，", "也", "要", "让", "它", "易于", "理解", "。", "开发", "的", "项目", "涉及", "复杂", "代码", "时", "，", "一定", "要", "为", "这些", "代码", "编写", "有益", "的", "注释", "。", "\n", "There", " ", "should", " ", "be", " ", "one", "--", " ", "and", " ", "preferably", " ", "only", " ", "one", " ", "--", "obvious", " ", "way", " ", "to", " ", "do", " ", "it", "."], ["如果", "让", "两名", "Python", "程序员", "去", "解决", "同一个", "问题", "，", "他们", "提供", "的", "解决方案", "应", "大致相同", "。", "这", "并", "不是", "说", "编程", "没有", "创意", "空间", "，", "而是", "恰恰相反", "！", "然而", "，", "大部分", "编程", "工作", "都", "是", "使用", "常见", "解决方案", "来解", "\n", "决", "简单", "的", "小", "问题", "，", "但", "这些", "小", "问题", "都", "包含", "在", "更", "庞大", "、", "更", "有", "创意", "空间", "的", "项目", "中", "。", "在", "你", "的", "程序", "中", "，", "各种", "具体", "细节", "对", "其他", "Python", "程序员", "来说", "都", "应", "易于", "理解", "。", "\n", "Now", " ", "is", " ", "better", " ", "than", " ", "never", ".", "\n", "你", "可以", "将", "余生", "都", "用来", "学习", "Python", "和", "编程", "的", "纷繁", "难懂", "之", "处", "，", "但", "这样", "你", "什么", "项目", "都", "完", "不成", "。", "不要", "企图", "编写", "完美无缺", "的", "代码", "；", "先", "编写", "行之有效", "的", "代码", "，", "再", "决定", "是", "对", "其", "做", "进一步", "改进", "，", "还是", "\n", "转而", "去", "编写", "新", "代码", "。", "\n", "等", "你", "进入", "下", "一章", "，", "开始", "研究", "更", "复杂", "的", "主题", "时", "，", "务必", "牢记", "这种", "简约", "而", "清晰", "的", "理念", "。", "如此", "，", "经验丰富", "的", "程序员", "定", "将", "对", "你", "编写", "的", "代码", "心", "生", "敬意", "，", "进而", "乐意", "向", "你", "提供", "反馈", "，", "并", "与", "你", "合作", "开", "\n", "发", "有趣", "的", "项目", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "2", "-", "11", " ", "Python", "之禅", "：", "\n", "之禅", "：", " ", "在", "Python", "终端", "会话", "中", "执行命令", "import", " ", "this", " ", "，", "并", "粗略地", "浏览", "一下", "其他", "的", "指导", "原则", "。", "\n", "2.7", "　", "小结", "\n", "　", "小结"], ["2.7", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "使用", "变量", "；", "如何", "创建", "描述性", "变量名", "以及", "如何", "消除", "名称", "错误", "和", "语法错误", "；", "字符串", "是", "什么", "，", "以及", "如何", "使用", "小写", "、", "大写", "和", "首字母", "大写", "方式", "显示", "字符串", "；", "使用", "\n", "空白", "来", "显示", "整洁", "的", "输出", "，", "以及", "如何", "剔除", "字符串", "中", "多余", "的", "空白", "；", "如何", "使用", "整数", "和", "浮点数", "；", "使用", "数值数据", "时", "需要", "注意", "的", "意外", "行为", "。", "你", "还", "学习", "了", "如何", "编写", "说明性", "注释", "，", "让", "代码", "对", "你", "和", "其", "\n", "他人", "来说", "更", "容易", "理解", "。", "最后", "，", "你", "了解", "了", "让", "代码", "尽可能", "简单", "的", "理念", "。", "\n", "在", "第", "3", "章", "，", "你", "将", "学习", "如何", "在", "被", "称为", "列表", "\n", "列表", " ", "的", "变量", "中", "存储", "信息", "集", "，", "以及", "如何", "通过", "遍历", "列表", "来", "操作", "其中", "的", "信息", "。", "\n", "第", "\n", "第", " ", "3", " ", "章", "　", "列表", "简介", "\n", "章", "　", "列表", "简介"], ["在", "本章", "和", "下", "一章", "中", "，", "你", "将", "学习", "列表", "是", "什么", "以及", "如何", "使用", "列表", "元素", "。", "列表", "让", "你", "能够", "在", "一个", "地方", "存储", "成组", "的", "信息", "，", "其中", "可以", "只", "包含", "几个", "元素", "，", "也", "可以", "包含", "数百万个", "元素", "。", "\n", "列表", "是", "新手", "可", "直接", "使用", "的", "最", "强大", "的", "Python", "功能", "之一", "，", "它", "融合", "了", "众多", "重要", "的", "编程", "概念", "。", "\n", "3.1", "　", "列表", "是", "什么", "\n", "　", "列表", "是", "什么", "\n", "列表", "\n", "列表", " ", "由", "一系列", "按", "特定", "顺序排列", "的", "元素", "组成", "。", "你", "可以", "创建", "包含", "字母表", "中", "所有", "字母", "、", "数字", "0", "~", "9", "或", "所有", "家庭成员", "姓名", "的", "列表", "；", "也", "可以", "将", "任何", "东西", "加入", "列表", "中", "，", "其中", "的", "元素", "之间", "可以", "没有", "\n", "任何", "关系", "。", "鉴于", "列表", "通常", "包含", "多个", "元素", "，", "给", "列表", "指定", "一个", "表示", "复数", "的", "名称", "（", "如", "letters", " ", "、", "digits", " ", "或", "names", " ", "）", "是", "个", "不错", "的", "主意", "。", "\n", "在", "Python", "中", "，", "用", "方括号", "（", "[", "]", " ", "）", "来", "表示", "列表", "，", "并用", "逗号", "来", "分隔", "其中", "的", "元素", "。", "下面", "是", "一个", "简单", "的", "列表", "示例", "，", "这个", "列表", "包含", "几种", "自行车", "：", "\n", "bicycles", ".", "py", "\n", "bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "print", "(", "bicycles", ")", "\n", "如果", "你", "让", "Python", "将", "列表", "打印", "出来", "，", "Python", "将", "打印", "列表", "的", "内部", "表示", "，", "包括", "方括号", "："], ["如果", "你", "让", "Python", "将", "列表", "打印", "出来", "，", "Python", "将", "打印", "列表", "的", "内部", "表示", "，", "包括", "方括号", "：", "\n", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "鉴于", "这", "不是", "你", "要", "让", "用户", "看到", "的", "输出", "，", "下面", "来", "学习", "如何", "访问", "列表", "元素", "。", "\n", "3.1", ".", "1", "　", "访问", "列表", "元素", "\n", "　", "访问", "列表", "元素", "\n", "列表", "是", "有序", "集合", "，", "因此", "要", "访问", "列表", "的", "任何", "元素", "，", "只", "需", "将", "该", "元素", "的", "位置", "或", "索引", "告诉", "Python", "即可", "。", "要", "访问", "列表", "元素", "，", "可", "指出", "列表", "的", "名称", "，", "再", "指出", "元素", "的", "索引", "，", "并", "将", "其", "放在", "方括号", "内", "。", "\n", "例如", "，", "下面", "的", "代码", "从", "列表", "bicycles", " ", "中", "提取", "第一款", "自行车", "：", "\n", " ", " ", "bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "❶", " ", "print", "(", "bicycles", "[", "0", "]", ")", "\n", "❶", "处", "演示", "了", "访问", "列表", "元素", "的", "语法", "。", "当", "你", "请求", "获取", "列表", "元素", "时", "，", "Python", "只", "返回", "该", "元素", "，", "而", "不", "包括", "方括号", "和", "引号", "：", "\n", "trek", "\n", "这", "正是", "你", "要", "让", "用户", "看到", "的", "结果", "—", "—", "整洁", "、", "干净", "的", "输出", "。", "\n", "你", "还", "可以", "对", "任何", "列表", "元素", "调用", "第", "2", "章", "介绍", "的", "字符串", "方法", "。", "例如", "，", "可", "使用", "方法", "title", "(", ")", " ", "让", "元素", "'", "trek", "'", " ", "的", "格式", "更", "整洁", "："], ["bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "print", "(", "bicycles", "[", "0", "]", ".", "title", "(", ")", ")"], ["这个", "示例", "的", "输出", "与", "前", "一个", "示例", "相同", "，", "只是", "首字母", "T", "是", "大写", "的", "。", "\n", "3.1", ".", "2", "　", "索引", "从", "\n", "　", "索引", "从", "0", "而", "不是", "\n", "而", "不是", "1", "开始", "\n", "开始", "\n", "在", "Python", "中", "，", "第一个", "列表", "元素", "的", "索引", "为", "0", "，", "而", "不是", "1", "。", "在", "大多数", "编程语言", "中", "都", "是", "如此", "，", "这", "与", "列表", "操作", "的", "底层", "实现", "相关", "。", "如果", "结果", "出乎意料", "，", "请", "看看", "你", "是否", "犯", "了", "简单", "的", "差", "一", "错误", "。", "\n", "第二个", "列表", "元素", "的", "索引", "为", "1", "。", "根据", "这种", "简单", "的", "计数", "方式", "，", "要", "访问", "列表", "的", "任何", "元素", "，", "都", "可", "将", "其", "位置", "减", "1", "，", "并", "将", "结果", "作为", "索引", "。", "例如", "，", "要", "访问", "第四个", "列表", "元素", "，", "可", "使用", "索引", "3", "。", "\n", "下面", "的", "代码", "访问", "索引", "1", " ", "和", "3", " ", "处", "的", "自行车", "：", "\n", "bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "print", "(", "bicycles", "[", "1", "]", ")", "\n", "print", "(", "bicycles", "[", "3", "]", ")", "\n", "这些", "代码", "返回", "列表", "中", "的", "第二个", "和", "第四个", "元素", "：", "\n", "cannondale", "\n", "specialized", "\n", "Python", "为", "访问", "最后", "一个", "列表", "元素", "提供", "了", "一种", "特殊", "语法", "。", "通过", "将", "索引", "指定", "为", "-", "1", " ", "，", "可", "让", "Python", "返回", "最后", "一个", "列表", "元素", "：", "\n", "bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]"], ["print", "(", "bicycles", "[", "-", "1", "]", ")", "\n", "这些", "代码", "返回", "'", "specialized", "'", " ", "。", "这种", "语法", "很", "有用", "，", "因为", "你", "经常", "需要", "在", "不", "知道", "列表", "长度", "的", "情况", "下", "访问", "最后", "的", "元素", "。", "这种", "约定", "也", "适用", "于", "其他", "负数", "索引", "，", "例如", "，", "索引", "-", "2", " ", "返回", "倒数第", "\n", "二个", "列表", "元素", "，", "索引", "-", "3", " ", "返回", "倒数", "第三个", "列表", "元素", "，", "以此类推", "。", "\n", "3.1", ".", "3", "　", "使用", "列表", "中", "的", "各个", "值", "\n", "　", "使用", "列表", "中", "的", "各个", "值", "\n", "可像", "使用", "其他", "变量", "一样", "使用", "列表", "中", "的", "各个", "值", "。", "例如", "，", "你", "可以", "使用", "拼接", "根据", "列表", "中", "的", "值来", "创建", "消息", "。", "\n", "下面", "来", "尝试", "从", "列表", "中", "提取", "第一款", "自行车", "，", "并", "使用", "这个", "值来", "创建", "一条", "消息", "：", "\n", " ", " ", "bicycles", " ", "=", " ", "[", "'", "trek", "'", ",", " ", "'", "cannondale", "'", ",", " ", "'", "redline", "'", ",", " ", "'", "specialized", "'", "]", "\n", "❶", " ", "message", " ", "=", " ", "\"", "My", " ", "first", " ", "bicycle", " ", "was", " ", "a", " ", "\"", " ", "+", " ", "bicycles", "[", "0", "]", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", "\n", " ", " ", "print", "(", "message", ")", "\n", "我们", "使用", "bicycles", "[", "0", "]", " ", "的", "值", "生成", "了", "一个", "句子", "，", "并", "将", "其", "存储", "在", "变量", "message", " ", "中", "（", "见", "❶", "）", "。", "输出", "是", "一个", "简单", "的", "句子", "，", "其中", "包含", "列表", "中", "的", "第一款", "自行车", "：", "\n", "My", " ", "first", " ", "bicycle", " ", "was", " ", "a", " ", "Trek", ".", "\n", "动手", "试一试", "\n", "动手", "试一试"], ["My", " ", "first", " ", "bicycle", " ", "was", " ", "a", " ", "Trek", ".", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "请", "尝试", "编写", "一些", "简短", "的", "程序", "来", "完成", "下面", "的", "练习", "，", "以", "获得", "一些", "使用", "Python", "列表", "的", "第一手", "经验", "。", "你", "可能", "需要", "为", "每章", "的", "练习", "创建", "一个", "文件夹", "，", "以", "整洁", "有序", "的", "方式", "存储", "为", "完成", "各", "\n", "章", "的", "练习", "而", "编写", "的", "程序", "。", "\n", "3", "-", "1", " ", "姓名", "：", "\n", "姓名", "：", " ", "将", "一些", "朋友", "的", "姓名", "存储", "在", "一个", "列表", "中", "，", "并", "将", "其", "命名", "为", "names", " ", "。", "依次", "访问", "该", "列表", "中", "的", "每个", "元素", "，", "从而", "将", "每个", "朋友", "的", "姓名", "都", "打印", "出来", "。", "\n", "3", "-", "2", " ", "问候语", "：", "\n", "问候语", "：", " ", "继续", "使用", "练习", "3", "-", "1", "中", "的", "列表", "，", "但", "不", "打印", "每个", "朋友", "的", "姓名", "，", "而", "为", "每人", "打印", "一条", "消息", "。", "每条", "消息", "都", "包含", "相同", "的", "问候语", "，", "但", "抬头", "为", "相应", "朋友", "的", "姓名", "。", "\n", "3", "-", "3", " ", "自己", "的", "列表", "：", "\n", "自己", "的", "列表", "：", " ", "想想", "你", "喜欢", "的", "通勤", "方式", "，", "如骑", "摩托车", "或开", "汽车", "，", "并", "创建", "一个", "包含", "多种", "通勤", "方式", "的", "列表", "。", "根据", "该", "列表", "打印", "一系列", "有关", "这些", "通勤", "方式", "的", "宣言", "，", "如", "“", "I", " ", "would", "\n", "like", " ", "to", " ", "own", " ", "a", " ", "Honda", " ", "motorcycle", "”", "。", "\n", "3.2", "　", "修改", "、", "添加", "和", "删除", "元素", "\n", "　", "修改", "、", "添加", "和", "删除", "元素", "\n", "你", "创建", "的", "大多数", "列表", "都", "将", "是", "动态", "的", "，", "这", "意味着", "列表", "创建", "后", "，", "将", "随着", "程序", "的", "运行", "增删", "元素", "。", "例如", "，", "你", "创建", "一个", "游戏", "，", "要求", "玩家", "射杀", "从天而降", "的", "外星人", "；", "为此", "，", "可", "在", "开始", "时", "将", "一些", "外"], ["星人", "存储", "在", "列表", "中", "，", "然后", "每当", "有", "外星人", "被", "射杀", "时", "，", "都", "将", "其", "从", "列表", "中", "删除", "，", "而", "每次", "有", "新", "的", "外星人", "出现", "在", "屏幕", "上时", "，", "都", "将", "其", "添加", "到", "列表", "中", "。", "在", "整个", "游戏", "运行", "期间", "，", "外星人", "列表", "的", "长度", "\n", "将", "不断", "变化", "。", "\n", "3.2", ".", "1", "　", "修改", "列表", "元素", "\n", "　", "修改", "列表", "元素", "\n", "修改", "列表", "元素", "的", "语法", "与", "访问", "列表", "元素", "的", "语法", "类似", "。", "要", "修改", "列表", "元素", "，", "可", "指定", "列表", "名和要", "修改", "的", "元素", "的", "索引", "，", "再", "指定", "该", "元素", "的", "新值", "。", "\n", "例如", "，", "假设", "有", "一个", "摩托车", "列表", "，", "其中", "的", "第一个", "元素", "为", "'", "honda", "'", " ", "，", "如何", "修改", "它", "的", "值", "呢", "？", "\n", "motorcycles", ".", "py", "\n", "❶", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❷", " ", "motorcycles", "[", "0", "]", " ", "=", " ", "'", "ducati", "'", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "我们", "首先", "定义", "一个", "摩托车", "列表", "，", "其中", "的", "第一个", "元素", "为", "'", "honda", "'", " ", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "将", "第一个", "元素", "的", "值", "改为", "'", "ducati", "'", " ", "（", "见", "❷", "）", "。", "输出", "表明", "，", "第一个", "元素", "的", "值", "确实", "变", "了", "，", "但", "\n", "其他", "列表", "元素", "的", "值", "没变", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "[", "'", "ducati", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]"], ["你", "可以", "修改", "任何", "列表", "元素", "的", "值", "，", "而", "不仅仅", "是", "第一个", "元素", "的", "值", "。", "\n", "3.2", ".", "2", "　", "在", "列表", "中", "添加", "元素", "\n", "　", "在", "列表", "中", "添加", "元素", "\n", "你", "可能", "出于", "众多", "原因", "要", "在", "列表", "中", "添加", "新元素", "，", "例如", "，", "你", "可能", "希望", "游戏", "中", "出现", "新", "的", "外星人", "、", "添加", "可视化", "数据", "或", "给", "网站", "添加", "新", "注册", "的", "用户", "。", "Python", "提供", "了", "多种", "在", "既有", "列表", "中", "添加", "新", "数据", "\n", "的", "方式", "。", "\n", "1", ".", " ", "在", "列表", "末尾", "添加", "元素", "\n", "在", "列表", "末尾", "添加", "元素", "\n", "在", "列表", "中", "添加", "新元素", "时", "，", "最", "简单", "的", "方式", "是", "将", "元素", "附加", "到", "列表", "末尾", "。", "给", "列表", "附加", "元素", "时", "，", "它", "将", "添加", "到", "列表", "末尾", "。", "继续", "使用", "前", "一个", "示例", "中", "的", "列表", "，", "在", "其", "末尾", "添加", "新元素", "'", "ducati", "'", " ", "：", "\n", " ", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❶", " ", "motorcycles", ".", "append", "(", "'", "ducati", "'", ")", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "方法", "append", "(", ")", " ", "将", "元素", "'", "ducati", "'", " ", "添加", "到", "了", "列表", "末尾", "（", "见", "❶", " ", "）", "，", "而", "不", "影响", "列表", "中", "的", "其他", "所有", "元素", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]"], ["[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]", "\n", "方法", "append", "(", ")", " ", "让", "动态", "地", "创建", "列表", "易如反掌", "，", "例如", "，", "你", "可以", "先", "创建", "一个", "空", "列表", "，", "再", "使用", "一系列", "的", "append", "(", ")", " ", "语句", "添加", "元素", "。", "下面", "来", "创建", "一个", "空", "列表", "，", "再", "在", "其中", "添加", "元", "\n", "素", "'", "honda", "'", " ", "、", "'", "yamaha", "'", " ", "和", "'", "suzuki", "'", " ", "：", "\n", "motorcycles", " ", "=", " ", "[", "]", "\n", "motorcycles", ".", "append", "(", "'", "honda", "'", ")", "\n", "motorcycles", ".", "append", "(", "'", "yamaha", "'", ")", "\n", "motorcycles", ".", "append", "(", "'", "suzuki", "'", ")", "\n", "print", "(", "motorcycles", ")", "\n", "最终", "的", "列表", "与", "前述", "示例", "中", "的", "列表", "完全相同", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "这种", "创建", "列表", "的", "方式", "极其", "常见", "，", "因为", "经常", "要", "等", "程序运行", "后", "，", "你", "才", "知道", "用户", "要", "在", "程序", "中", "存储", "哪些", "数据", "。", "为", "控制", "用户", "，", "可", "首先", "创建", "一个", "空", "列表", "，", "用于", "存储用户", "将要", "输入", "的", "值", "，", "然后", "将", "\n", "用户", "提供", "的", "每个", "新值", "附加", "到", "列表", "中", "。", "\n", "2", ".", " ", "在", "列表", "中", "插入", "元素", "\n", "在", "列表", "中", "插入", "元素", "\n", "使用", "方法", "insert", "(", ")", " ", "可", "在", "列表", "的", "任何", "位置", "添加", "新元素", "。", "为此", "，", "你", "需要", "指定", "新元素", "的", "索引", "和", "值", "。"], ["使用", "方法", "insert", "(", ")", " ", "可", "在", "列表", "的", "任何", "位置", "添加", "新元素", "。", "为此", "，", "你", "需要", "指定", "新元素", "的", "索引", "和", "值", "。", "\n", " ", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "❶", " ", "motorcycles", ".", "insert", "(", "0", ",", " ", "'", "ducati", "'", ")", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "在", "这个", "示例", "中", "，", "值", "'", "ducati", "'", " ", "被", "插入", "到", "了", "列表", "开头", "（", "见", "❶", "）", "；", "方法", "insert", "(", ")", " ", "在", "索引", "0", " ", "处", "添加", "空间", "，", "并", "将", "值", "'", "ducati", "'", " ", "存储", "到", "这个", "地方", "。", "这种", "操作", "将", "列表", "中", "既有", "的", "每个", "元素", "都", "右", "\n", "移", "一个", "位置", "：", "\n", "[", "'", "ducati", "'", ",", " ", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "3.2", ".", "3", "　", "从", "列表", "中", "删除", "元素", "\n", "　", "从", "列表", "中", "删除", "元素", "\n", "你", "经常", "需要", "从", "列表", "中", "删除", "一个", "或", "多个", "元素", "。", "例如", "，", "玩家", "将", "空中", "的", "一个", "外星人", "射杀", "后", "，", "你", "很", "可能", "要", "将", "其", "从", "存活", "的", "外星人", "列表", "中", "删除", "；", "当", "用户", "在", "你", "创建", "的", "Web", "应用", "中", "注销", "其", "账户", "时", "，", "\n", "你", "需要", "将", "该", "用户", "从", "活跃", "用户", "列表", "中", "删除", "。", "你", "可以", "根据", "位置", "或值", "来", "删除", "列表", "中", "的", "元素", "。", "\n", "1", ".", " ", "使用", "\n", "使用", "del", " ", "语句", "删除", "元素", "\n", "语句", "删除", "元素", "\n", "如果", "知道", "要", "删除", "的", "元素", "在", "列表", "中", "的", "位置", "，", "可", "使用", "del", " ", "语句", "。"], ["使用", "del", " ", "语句", "删除", "元素", "\n", "语句", "删除", "元素", "\n", "如果", "知道", "要", "删除", "的", "元素", "在", "列表", "中", "的", "位置", "，", "可", "使用", "del", " ", "语句", "。", "\n", " ", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❶", " ", "del", " ", "motorcycles", "[", "0", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❶", " ", "处", "的", "代码", "使用", "del", " ", "删除", "了", "列表", "motorcycles", " ", "中", "的", "第一个", "元素", "—", "—", "'", "honda", "'", " ", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "[", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]"], ["使用", "del", " ", "可", "删除", "任何", "位置", "处", "的", "列表", "元素", "，", "条件", "是", "知道", "其", "索引", "。", "下", "例", "演示", "了", "如何", "删除", "前述", "列表", "中", "的", "第二个", "元素", "—", "—", "'", "yamaha", "'", " ", "：", "\n", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "print", "(", "motorcycles", ")", "\n", "del", " ", "motorcycles", "[", "1", "]", "\n", "print", "(", "motorcycles", ")", "\n", "下面", "的", "输出", "表明", "，", "已经", "将", "第二款", "摩托车", "从", "列表", "中", "删除", "了", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "[", "'", "honda", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "在", "这", "两个", "示例", "中", "，", "使用", "del", " ", "语句", "将值", "从", "列表", "中", "删除", "后", "，", "你", "就", "无法", "再", "访问", "它", "了", "。", "\n", "2", ".", " ", "使用", "方法", "\n", "使用", "方法", "pop", "(", ")", " ", "删除", "元素", "\n", "删除", "元素", "\n", "有时候", "，", "你", "要", "将", "元素", "从", "列表", "中", "删除", "，", "并", "接着", "使用", "它", "的", "值", "。", "例如", "，", "你", "可能", "需要", "获取", "刚", "被", "射杀", "的", "外星人", "的", " ", "x", " ", "和", " ", "y", " ", "坐标", "，", "以便", "在", "相应", "的", "位置", "显示", "爆炸", "效果", "；", "在", "Web", "应用程序", "中", "，", "你", "可能", "\n", "要", "将", "用户", "从", "活跃", "成员", "列表", "中", "删除", "，", "并", "将", "其", "加入", "到", "非", "活跃", "成员", "列表", "中", "。", "\n", "方法", "pop", "(", ")", " ", "可", "删除", "列表", "末尾", "的", "元素", "，", "并", "让", "你", "能够", "接着", "使用", "它", "。", "术语", "弹", "出", "\n", "弹", "出", " ", "（", "pop", "）", "源自", "这样", "的", "类比", "：", "列表", "就", "像", "一个", "栈", "，", "而", "删除", "列表", "末尾", "的", "元素", "相当于", "弹出", "栈顶", "元素", "。"], ["弹", "出", " ", "（", "pop", "）", "源自", "这样", "的", "类比", "：", "列表", "就", "像", "一个", "栈", "，", "而", "删除", "列表", "末尾", "的", "元素", "相当于", "弹出", "栈顶", "元素", "。", "\n", "下面", "从", "列表", "motorcycles", " ", "中弹", "出", "一款", "摩托车", "：", "\n", "❶", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❷", " ", "popped", "_", "motorcycle", " ", "=", " ", "motorcycles", ".", "pop", "(", ")", "\n", "❸", " ", "print", "(", "motorcycles", ")", "\n", "❹", " ", "print", "(", "popped", "_", "motorcycle", ")", "\n", "我们", "首先", "定义", "并打印", "了", "列表", "motorcycles", " ", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "从", "这个", "列表", "中弹", "出", "一个", "值", "，", "并", "将", "其", "存储", "到", "变量", "popped", "_", "motorcycle", " ", "中", "（", "见", "❷", "）", "。", "然后", "我们", "打印", "这个", "列", "\n", "表", "，", "以", "核实", "从", "其中", "删除", "了", "一个", "值", "（", "见", "❸", "）", "。", "最后", "，", "我们", "打印", "弹出", "的", "值", "，", "以", "证明", "我们", "依然", "能够", "访问", "被", "删除", "的", "值", "（", "见", "❹", "）", "。", "\n", "输出", "表明", "，", "列表", "末尾", "的", "值", "'", "suzuki", "'", " ", "已", "删除", "，", "它", "现在", "存储", "在", "变量", "popped", "_", "motorcycle", " ", "中", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", "]", "\n", "suzuki"], ["[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", "]", "\n", "suzuki", "\n", "方法", "pop", "(", ")", " ", "是", "怎么", "起", "作用", "的", "呢", "？", "假设", "列表", "中", "的", "摩托车", "是", "按", "购买", "时间", "存储", "的", "，", "就", "可", "使用", "方法", "pop", "(", ")", " ", "打印", "一条", "消息", "，", "指出", "最后", "购买", "的", "是", "哪款", "摩托车", "：", "\n", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "last", "_", "owned", " ", "=", " ", "motorcycles", ".", "pop", "(", ")", "\n", "print", "(", "\"", "The", " ", "last", " ", "motorcycle", " ", "I", " ", "owned", " ", "was", " ", "a", " ", "\"", " ", "+", " ", "last", "_", "owned", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "输出", "是", "一个", "简单", "的", "句子", "，", "指出", "了", "最新", "购买", "的", "是", "哪款", "摩托车", "：", "\n", "The", " ", "last", " ", "motorcycle", " ", "I", " ", "owned", " ", "was", " ", "a", " ", "Suzuki", ".", "\n", "3", ".", " ", "弹", "出", "列表", "中", "任何", "位置", "处", "的", "元素", "\n", "弹", "出", "列表", "中", "任何", "位置", "处", "的", "元素", "\n", "实际上", "，", "你", "可以", "使用", "pop", "(", ")", " ", "来", "删除", "列表", "中", "任何", "位置", "的", "元素", "，", "只", "需", "在", "括号", "中", "指定", "要", "删除", "的", "元素", "的", "索引", "即可", "。", "\n", " ", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "❶", " ", "first", "_", "owned", " ", "=", " ", "motorcycles", ".", "pop", "(", "0", ")"], ["❶", " ", "first", "_", "owned", " ", "=", " ", "motorcycles", ".", "pop", "(", "0", ")", "\n", "❷", " ", "print", "(", "'", "The", " ", "first", " ", "motorcycle", " ", "I", " ", "owned", " ", "was", " ", "a", " ", "'", " ", "+", " ", "first", "_", "owned", ".", "title", "(", ")", " ", "+", " ", "'", ".", "'", ")", "\n", "首先", "，", "我们", "弹出", "了", "列表", "中", "的", "第一款", "摩托车", "（", "见", "❶", "）", "，", "然后", "打印", "了", "一条", "有关", "这辆", "摩托车", "的", "消息", "（", "见", "❷", "）", "。", "输出", "是", "一个", "简单", "的", "句子", "，", "描述", "了", "我", "购买", "的", "第一辆", "摩托车", "：", "\n", "The", " ", "first", " ", "motorcycle", " ", "I", " ", "owned", " ", "was", " ", "a", " ", "Honda", ".", "\n", "别忘了", "，", "每当", "你", "使用", "pop", "(", ")", " ", "时", "，", "被", "弹出", "的", "元素", "就", "不再", "在", "列表", "中", "了", "。", "\n", "如果", "你", "不", "确定", "该", "使用", "del", " ", "语句", "还是", "pop", "(", ")", " ", "方法", "，", "下面", "是", "一个", "简单", "的", "判断", "标准", "：", "如果", "你", "要", "从", "列表", "中", "删除", "一个", "元素", "，", "且", "不再", "以", "任何", "方式", "使用", "它", "，", "就", "使用", "del", " ", "语句", "；", "如果", "你", "要", "在", "删除", "元", "\n", "素后", "还", "能", "继续", "使用", "它", "，", "就", "使用", "方法", "pop", "(", ")", " ", "。", "\n", "4", ".", " ", "根据", "值", "删除", "元素", "\n", "根据", "值", "删除", "元素", "\n", "有时候", "，", "你", "不", "知道", "要", "从", "列表", "中", "删除", "的", "值", "所处", "的", "位置", "。", "如果", "你", "只", "知道", "要", "删除", "的", "元素", "的", "值", "，", "可", "使用", "方法", "remove", "(", ")", " ", "。", "\n", "例如", "，", "假设", "我们", "要", "从", "列表", "motorcycles", " ", "中", "删除", "值", "'", "ducati", "'", " ", "。"], ["motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❶", " ", "motorcycles", ".", "remove", "(", "'", "ducati", "'", ")", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❶", " ", "处", "的", "代码", "让", "Python", "确定", "'", "ducati", "'", " ", "出现", "在", "列表", "的", "什么", "地方", "，", "并", "将", "该", "元素", "删除", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "使用", "remove", "(", ")", " ", "从", "列表", "中", "删除", "元素", "时", "，", "也", "可", "接着", "使用", "它", "的", "值", "。", "下面", "删除", "值", "'", "ducati", "'", " ", "，", "并打印", "一条", "消息", "，", "指出", "要", "将", "其", "从", "列表", "中", "删除", "的", "原因", "：", "\n", "❶", " ", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]", "\n", " ", " ", "print", "(", "motorcycles", ")", "\n", "❷", " ", "too", "_", "expensive", " ", "=", " ", "'", "ducati", "'", "\n", "❸", " ", "motorcycles", ".", "remove", "(", "too", "_", "expensive", ")", "\n", " ", " ", "print", "(", "motorcycles", ")"], ["print", "(", "motorcycles", ")", "\n", "❹", " ", "print", "(", "\"", "\\", "nA", " ", "\"", " ", "+", " ", "too", "_", "expensive", ".", "title", "(", ")", " ", "+", " ", "\"", " ", "is", " ", "too", " ", "expensive", " ", "for", " ", "me", ".", "\"", ")", "\n", "在", "❶", "处", "定义", "列表", "后", "，", "我们", "将值", "'", "ducati", "'", " ", "存储", "在", "变量", "too", "_", "expensive", " ", "中", "（", "见", "❷", "）", "。", "接下来", "，", "我们", "使用", "这个", "变量", "来", "告诉", "Python", "将", "哪个", "值", "从", "列表", "中", "删除", "（", "见", "❸", "）", "。", "最后", "，", "\n", "值", "'", "ducati", "'", " ", "已经", "从", "列表", "中", "删除", "，", "但", "它", "还", "存储", "在", "变量", "too", "_", "expensive", " ", "中", "（", "见", "❹", "）", "，", "让", "我们", "能够", "打印", "一条", "消息", "，", "指出", "将", "'", "ducati", "'", " ", "从", "列表", "motorcycles", " ", "中", "删除", "的", "原因", "：", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", ",", " ", "'", "ducati", "'", "]", "\n", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "A", " ", "Ducati", " ", "is", " ", "too", " ", "expensive", " ", "for", " ", "me", ".", "\n", ">", "\n", "注意", " ", "　", "方法", "remove", "(", ")", " ", "只", "删除", "第一个", "指定", "的", "值", "。", "如果", "要", "删除", "的", "值", "可能", "在", "列表", "中", "出现", "多次", "，", "就", "需要", "使用", "循环", "来", "判断", "是否", "删除", "了", "所有", "这样", "的", "值", "。", "你", "将", "在", "第", "7", "章", "学习", "如何", "这", "\n", "样做", "。", "\n", "动手", "试一试", "\n", "下面", "的", "练习", "比", "第", "2", "章", "的", "练习", "要", "复杂", "些", "，", "但", "让", "你", "有", "机会", "以", "前面", "介绍", "过", "的", "各种", "方式", "使用", "列表", "。"], ["样做", "。", "\n", "动手", "试一试", "\n", "下面", "的", "练习", "比", "第", "2", "章", "的", "练习", "要", "复杂", "些", "，", "但", "让", "你", "有", "机会", "以", "前面", "介绍", "过", "的", "各种", "方式", "使用", "列表", "。", "\n", "3", "-", "4", " ", "嘉宾", "名单", "\n", "嘉宾", "名单", " ", "：", "如果", "你", "可以", "邀请", "任何人", "一起", "共", "进晚餐", "（", "无论是", "在世", "的", "还是", "故去", "的", "）", "，", "你", "会", "邀请", "哪些", "人", "？", "请", "创建", "一个", "列表", "，", "其中", "包含", "至少", "3", "个", "你", "想", "邀请", "的", "人", "；", "然后", "，", "使用", "\n", "这个", "列表", "打印消息", "，", "邀请", "这些", "人来", "与", "你", "共", "进晚餐", "。", "\n", "3", "-", "5", " ", "修改", "嘉宾", "名单", "\n", "修改", "嘉宾", "名单", " ", "：", "你", "刚", "得知", "有位", "嘉宾", "无法", "赴约", "，", "因此", "需要", "另外", "邀请", "一位", "嘉宾", "。", "\n", "以", "完成", "练习", "3", "-", "4", "时", "编写", "的", "程序", "为", "基础", "，", "在", "程序", "末尾", "添加", "一条", "print", " ", "语句", "，", "指出", "哪位", "嘉宾", "无法", "赴约", "。", "\n", "修改", "嘉宾", "名单", "，", "将", "无法", "赴约", "的", "嘉宾", "的", "姓名", "替换", "为", "新", "邀请", "的", "嘉宾", "的", "姓名", "。", "\n", "再次", "打印", "一系列", "消息", "，", "向", "名单", "中", "的", "每位", "嘉宾", "发出", "邀请", "。", "\n", "3", "-", "6", " ", "添加", "嘉宾", "\n", "添加", "嘉宾", " ", "：", "你", "刚", "找到", "了", "一个", "更大", "的", "餐桌", "，", "可", "容纳", "更", "多", "的", "嘉宾", "。", "请", "想想", "你", "还", "想", "邀请", "哪", "三位", "嘉宾", "。", "\n", "以", "完成", "练习", "3", "-", "4", "或", "练习", "3", "-", "5", "时", "编写", "的", "程序", "为", "基础", "，", "在", "程序", "末尾", "添加", "一条", "print", " ", "语句", "，", "指出", "你", "找到", "了", "一个", "更大", "的", "餐桌", "。", "\n", "使用", "insert", "(", ")", " ", "将", "一位", "新", "嘉宾", "添加", "到", "名单", "开头", "。", "\n", "使用", "insert", "(", ")", " ", "将", "另", "一位", "新", "嘉宾", "添加", "到", "名单", "中间", "。", "\n", "使用", "append", "(", ")", " ", "将", "最后", "一位", "新", "嘉宾", "添加", "到", "名单", "末尾", "。"], ["使用", "append", "(", ")", " ", "将", "最后", "一位", "新", "嘉宾", "添加", "到", "名单", "末尾", "。", "\n", "打印", "一系列", "消息", "，", "向", "名单", "中", "的", "每位", "嘉宾", "发出", "邀请", "。", "\n", "3", "-", "7", " ", "缩减", "名单", "\n", "缩减", "名单", " ", "：", "你", "刚", "得知", "新", "购买", "的", "餐桌", "无法", "及时", "送达", "，", "因此", "只能", "邀请", "两位", "嘉宾", "。", "\n", "以", "完成", "练习", "3", "-", "6", "时", "编写", "的", "程序", "为", "基础", "，", "在", "程序", "末尾", "添加", "一行", "代码", "，", "打印", "一条", "你", "只能", "邀请", "两位", "嘉宾", "共", "进晚餐", "的", "消息", "。", "\n", "使用", "pop", "(", ")", " ", "不断", "地", "删除", "名单", "中", "的", "嘉宾", "，", "直到", "只有", "两位", "嘉宾", "为止", "。", "每次", "从", "名单", "中弹", "出", "一位", "嘉宾", "时", "，", "都", "打印", "一条", "消息", "，", "让", "该", "嘉宾", "知悉", "你", "很", "抱歉", "，", "无法", "邀请", "他来", "共进", "\n", "晚餐", "。", "\n", "对于", "余下", "的", "两位", "嘉宾", "中", "的", "每", "一位", "，", "都", "打印", "一条", "消息", "，", "指出", "他", "依然", "在", "受邀", "人之列", "。", "\n", "使用", "del", " ", "将", "最后", "两位", "嘉宾", "从", "名单", "中", "删除", "，", "让", "名单", "变成", "空", "的", "。", "打印", "该", "名单", "，", "核实", "程序", "结束", "时", "名单", "确实", "是", "空", "的", "。", "\n", "3.3", "　", "组织", "列表", "\n", "　", "组织", "列表", "\n", "在", "你", "创建", "的", "列表", "中", "，", "元素", "的", "排列", "顺序", "常常", "是", "无法", "预测", "的", "，", "因为", "你", "并非", "总能", "控制", "用户", "提供数据", "的", "顺序", "。", "这", "虽然", "在", "大多数", "情况", "下", "都", "是", "不可避免", "的", "，", "但", "你", "经常", "需要", "以", "特定", "的", "顺序", "呈现", "信", "\n", "息", "。", "有时候", "，", "你", "希望", "保留", "列表", "元素", "最初", "的", "排列", "顺序", "，", "而", "有时候", "又", "需要", "调整", "排列", "顺序", "。", "Python", "提供", "了", "很多", "组织", "列表", "的", "方式", "，", "可", "根据", "具体情况", "选用", "。", "\n", "3.3", ".", "1", "　", "使用", "方法", "\n", "　", "使用", "方法", "sort", "(", ")", " ", "对", "列表", "进行", "永久性", "排序"], ["3.3", ".", "1", "　", "使用", "方法", "\n", "　", "使用", "方法", "sort", "(", ")", " ", "对", "列表", "进行", "永久性", "排序", "\n", "对", "列表", "进行", "永久性", "排序", "\n", "Python", "方法", "sort", "(", ")", " ", "让", "你", "能够", "较为", "轻松", "地", "对", "列表", "进行", "排序", "。", "假设", "你", "有", "一个", "汽车", "列表", "，", "并", "要", "让", "其中", "的", "汽车", "按", "字母", "顺序排列", "。", "为", "简化", "这项", "任务", "，", "我们", "假设", "该", "列表", "中", "的", "所有", "值", "都", "是", "小写", "\n", "的", "。", "\n", "cars", ".", "py", "\n", " ", " ", "cars", " ", "=", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "❶", " ", "cars", ".", "sort", "(", ")", "\n", " ", " ", "print", "(", "cars", ")"], ["方法", "sort", "(", ")", " ", "（", "见", "❶", "）", "永久性", "地", "修改", "了", "列表", "元素", "的", "排列", "顺序", "。", "现在", "，", "汽车", "是", "按", "字母", "顺序排列", "的", "，", "再也", "无法", "恢复", "到", "原来", "的", "排列", "顺序", "：", "\n", "[", "'", "audi", "'", ",", " ", "'", "bmw", "'", ",", " ", "'", "subaru", "'", ",", " ", "'", "toyota", "'", "]", "\n", "你", "还", "可以", "按", "与", "字母", "顺序", "相反", "的", "顺序排列", "列表", "元素", "，", "为此", "，", "只", "需向", "sort", "(", ")", " ", "方法", "传递", "参数", "reverse", "=", "True", " ", "。", "下面", "的", "示例", "将", "汽车", "列表", "按", "与", "字母", "顺序", "相反", "的", "顺序排列", "：", "\n", "cars", " ", "=", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "cars", ".", "sort", "(", "reverse", "=", "True", ")", "\n", "print", "(", "cars", ")", "\n", "同样", "，", "对", "列表", "元素", "排列", "顺序", "的", "修改", "是", "永久性", "的", "：", "\n", "[", "'", "toyota", "'", ",", " ", "'", "subaru", "'", ",", " ", "'", "bmw", "'", ",", " ", "'", "audi", "'", "]", "\n", "3.3", ".", "2", "　", "使用", "函数", "\n", "　", "使用", "函数", "sorted", "(", ")", " ", "对", "列表", "进行", "临时", "排序", "\n", "对", "列表", "进行", "临时", "排序", "\n", "要", "保留", "列表", "元素", "原来", "的", "排列", "顺序", "，", "同时", "以", "特定", "的", "顺序", "呈现", "它们", "，", "可", "使用", "函数", "sorted", "(", ")", " ", "。", "函数", "sorted", "(", ")", " ", "让", "你", "能够", "按", "特定", "顺序", "显示", "列表", "元素", "，", "同时", "不", "影响", "它们", "在", "列表", "中", "的", "原始", "排", "\n", "列", "顺序", "。", "\n", "下面", "尝试", "对", "汽车", "列表", "调用", "这个", "函数", "。"], ["列", "顺序", "。", "\n", "下面", "尝试", "对", "汽车", "列表", "调用", "这个", "函数", "。", "\n", " ", " ", "cars", " ", "=", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "❶", " ", "print", "(", "\"", "Here", " ", "is", " ", "the", " ", "original", " ", "list", ":", "\"", ")", "\n", " ", " ", "print", "(", "cars", ")", "\n", "❷", " ", "print", "(", "\"", "\\", "nHere", " ", "is", " ", "the", " ", "sorted", " ", "list", ":", "\"", ")", "\n", " ", " ", "print", "(", "sorted", "(", "cars", ")", ")", "\n", "❸", " ", "print", "(", "\"", "\\", "nHere", " ", "is", " ", "the", " ", "original", " ", "list", " ", "again", ":", "\"", ")", "\n", " ", " ", "print", "(", "cars", ")", "\n", "我们", "首先", "按", "原始", "顺序", "打印", "列表", "（", "见", "❶", "）", "，", "再", "按", "字母", "顺序", "显示", "该", "列表", "（", "见", "❷", "）", "。", "以", "特定", "顺序", "显示", "列表", "后", "，", "我们", "进行", "核实", "，", "确认", "列表", "元素", "的", "排列", "顺序", "与", "以前", "相同", "（", "见", "❸", "）", "。", "\n", " ", " ", "Here", " ", "is", " ", "the", " ", "original", " ", "list", ":", "\n", " ", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", " ", " ", "Here", " ", "is", " ", "the", " ", "sorted", " ", "list", ":", "\n", " ", " ", "[", "'", "audi", "'", ",", " ", "'", "bmw", "'", ",", " ", "'", "subaru", "'", ",", " ", "'", "toyota", "'", "]", "\n", "❹", " ", "Here", " ", "is", " ", "the", " ", "original", " ", "list", " ", "again", ":"], ["❹", " ", "Here", " ", "is", " ", "the", " ", "original", " ", "list", " ", "again", ":", "\n", " ", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "注意", "，", "调用函数", "sorted", "(", ")", " ", "后", "，", "列表", "元素", "的", "排列", "顺序", "并", "没有", "变", "（", "见", "❹", "）", "。", "如果", "你", "要", "按", "与", "字母", "顺序", "相反", "的", "顺序", "显示", "列表", "，", "也", "可", "向", "函数", "sorted", "(", ")", " ", "传递", "参数", "reverse", "=", "True", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "在", "并非", "所有", "的", "值", "都", "是", "小写", "时", "，", "按", "字母", "顺序排列", "列表", "要", "复杂", "些", "。", "决定", "排列", "顺序", "时", "，", "有", "多种", "解读", "大写字母", "的", "方式", "，", "要", "指定", "准确", "的", "排列", "顺序", "，", "可能", "比", "我们", "这里", "所", "做", "的", "\n", "要", "复杂", "。", "然而", "，", "大多数", "排序", "方式", "都", "基于", "本", "节", "介绍", "的", "知识", "。", "\n", "3.3", ".", "3", "　", "倒", "着", "打印", "列表", "\n", "　", "倒", "着", "打印", "列表", "\n", "要", "反转", "列表", "元素", "的", "排列", "顺序", "，", "可", "使用", "方法", "reverse", "(", ")", " ", "。", "假设", "汽车", "列表", "是", "按", "购买", "时间", "排列", "的", "，", "可", "轻松", "地", "按", "相反", "的", "顺序排列", "其中", "的", "汽车", "：", "\n", "cars", " ", "=", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "print", "(", "cars", ")", "\n", "cars", ".", "reverse", "(", ")", "\n", "print", "(", "cars", ")", "\n", "注意", "，", "reverse", "(", ")", " ", "不是", "指", "按", "与", "字母", "顺序", "相反", "的", "顺序排列", "列表", "元素", "，", "而", "只是", "反转", "列表", "元素", "的", "排列", "顺序", "："], ["注意", "，", "reverse", "(", ")", " ", "不是", "指", "按", "与", "字母", "顺序", "相反", "的", "顺序排列", "列表", "元素", "，", "而", "只是", "反转", "列表", "元素", "的", "排列", "顺序", "：", "\n", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", "[", "'", "subaru", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "bmw", "'", "]", "\n", "方法", "reverse", "(", ")", " ", "永久性", "地", "修改", "列表", "元素", "的", "排列", "顺序", "，", "但", "可", "随时", "恢复", "到", "原来", "的", "排列", "顺序", "，", "为此", "只", "需", "对", "列表", "再次", "调用", "reverse", "(", ")", " ", "即可", "。", "\n", "3.3", ".", "4", "　", "确定", "列表", "的", "长度", "\n", "　", "确定", "列表", "的", "长度", "\n", "使用", "函数", "len", "(", ")", " ", "可", "快速", "获悉", "列表", "的", "长度", "。", "在", "下面", "的", "示例", "中", "，", "列表", "包含", "4", "个", "元素", "，", "因此", "其", "长度", "为", "4", "：", "\n", ">", ">", ">", " ", "cars", " ", "=", " ", "[", "'", "bmw", "'", ",", " ", "'", "audi", "'", ",", " ", "'", "toyota", "'", ",", " ", "'", "subaru", "'", "]", "\n", ">", ">", ">", " ", "len", "(", "cars", ")", "\n", "4"], ["在", "你", "需要", "完成", "如下", "任务", "时", "，", "len", "(", ")", " ", "很", "有用", "：", "确定", "还有", "多少", "个", "外星人", "未", "被", "射杀", "，", "需要", "管理", "多少", "项", "可视化", "数据", "，", "网站", "有", "多少", "注册", "用户", "等", "。", "\n", "注意", "\n", "注意", " ", "　", "Python", "计算", "列表", "元素", "数时", "从", "1", "开始", "，", "因此", "确定", "列表", "长度", "时", "，", "你", "应该", "不会", "遇到", "差一", "错误", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "3", "-", "8", " ", "放眼世界", "\n", "放眼世界", " ", "：", "想", "出", "至少", "5", "个", "你", "渴望", "去", "旅游", "的", "地方", "。", "\n", "将", "这些", "地方", "存储", "在", "一个", "列表", "中", "，", "并", "确保", "其中", "的", "元素", "不是", "按", "字母", "顺序排列", "的", "。", "\n", "按", "原始", "排列", "顺序", "打印", "该", "列表", "。", "不要", "考虑", "输出", "是否", "整洁", "的", "问题", "，", "只管", "打印", "原始", "Python", "列表", "。", "\n", "使用", "sorted", "(", ")", " ", "按", "字母", "顺序", "打印", "这个", "列表", "，", "同时", "不要", "修改", "它", "。", "\n", "再次", "打印", "该", "列表", "，", "核实", "排列", "顺序", "未", "变", "。", "\n", "使用", "sorted", "(", ")", " ", "按", "与", "字母", "顺序", "相反", "的", "顺序", "打印", "这个", "列表", "，", "同时", "不要", "修改", "它", "。", "\n", "再次", "打印", "该", "列表", "，", "核实", "排列", "顺序", "未", "变", "。", "\n", "使用", "reverse", "(", ")", " ", "修改", "列表", "元素", "的", "排列", "顺序", "。", "打印", "该", "列表", "，", "核实", "排列", "顺序", "确实", "变", "了", "。", "\n", "使用", "reverse", "(", ")", " ", "再次", "修改", "列表", "元素", "的", "排列", "顺序", "。", "打印", "该", "列表", "，", "核实", "已", "恢复", "到", "原来", "的", "排列", "顺序", "。", "\n", "使用", "sort", "(", ")", " ", "修改", "该", "列表", "，", "使", "其", "元素", "按", "字母", "顺序排列", "。", "打印", "该", "列表", "，", "核实", "排列", "顺序", "确实", "变", "了", "。"], ["使用", "sort", "(", ")", " ", "修改", "该", "列表", "，", "使", "其", "元素", "按", "字母", "顺序排列", "。", "打印", "该", "列表", "，", "核实", "排列", "顺序", "确实", "变", "了", "。", "\n", "使用", "sort", "(", ")", " ", "修改", "该", "列表", "，", "使", "其", "元素", "按", "与", "字母", "顺序", "相反", "的", "顺序排列", "。", "打印", "该", "列表", "，", "核实", "排列", "顺序", "确实", "变", "了", "。", "\n", "3", "-", "9", " ", "晚餐", "嘉宾", "\n", "晚餐", "嘉宾", " ", "：", "在", "完成", "练习", "3", "-", "4", "~", "练习", "3", "-", "7", "时", "编写", "的", "程序", "之一", "中", "，", "使用", "len", "(", ")", " ", "打印", "一条", "消息", "，", "指出", "你", "邀请", "了", "多少", "位", "嘉宾", "来", "与", "你", "共", "进晚餐", "。", "\n", "3", "-", "10", " ", "尝试", "使用", "各个", "函数", "\n", "尝试", "使用", "各个", "函数", " ", "：", "想想", "可", "存储", "到", "列表", "中", "的", "东西", "，", "如", "山岳", "、", "河流", "、", "国家", "、", "城市", "、", "语言", "或", "你", "喜欢", "的", "任何", "东西", "。", "编写", "一个", "程序", "，", "在", "其中", "创建", "一个", "包含", "这些", "元素", "的", "列", "\n", "表", "，", "然后", "，", "对于", "本章", "介绍", "的", "每个", "函数", "，", "都", "至少", "使用", "一次", "来", "处理", "这个", "列表", "。", "\n", "3.4", "　", "使用", "列表", "时", "避免", "索引", "错误", "\n", "　", "使用", "列表", "时", "避免", "索引", "错误", "\n", "刚", "开始", "使用", "列表", "时", "，", "经常", "会", "遇到", "一种", "错误", "。", "假设", "你", "有", "一个", "包含", "三个", "元素", "的", "列表", "，", "却", "要求", "获取", "第四个", "元素", "：", "\n", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "print", "(", "motorcycles", "[", "3", "]", ")", "\n", "这", "将", "导致", "索引", "错误", "\n", "索引", "错误", " ", "：", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":"], ["索引", "错误", " ", "：", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "motorcycles", ".", "py", "\"", ",", " ", "line", " ", "3", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "print", "(", "motorcycles", "[", "3", "]", ")", "\n", "IndexError", ":", " ", "list", " ", "index", " ", "out", " ", "of", " ", "range", "\n", "Python", "试图", "向", "你", "提供", "位于", "索引", "3", "处", "的", "元素", "，", "但", "它", "搜索", "列表", "motorcycles", " ", "时", "，", "却", "发现", "索引", "3", "处", "没有", "元素", "。", "鉴于", "列表", "索引", "差一", "的", "特征", "，", "这种", "错误", "很", "常见", "。", "有些", "人", "从", "1", "开始", "数", "，", "因此", "以为", "\n", "第三个", "元素", "的", "索引", "为", "3", "；", "但", "在", "Python", "中", "，", "第三个", "元素", "的", "索引", "为", "2", "，", "因为", "索引", "是从", "0", "开始", "的", "。", "\n", "索引", "错误", "意味着", "Python", "无法", "理解", "你", "指定", "的", "索引", "。", "程序", "发生", "索引", "错误", "时", "，", "请", "尝试", "将", "你", "指定", "的", "索引", "减", "1", "，", "然后", "再次", "运行", "程序", "，", "看看", "结果", "是否", "正确", "。", "\n", "别忘了", "，", "每当", "需要", "访问", "最后", "一个", "列表", "元素", "时", "，", "都", "可", "使用", "索引", "-", "1", " ", "。", "这", "在", "任何", "情况", "下", "都", "行之有效", "，", "即便", "你", "最后", "一次", "访问", "列表", "后", "，", "其", "长度", "发生", "了", "变化", "：", "\n", "motorcycles", " ", "=", " ", "[", "'", "honda", "'", ",", " ", "'", "yamaha", "'", ",", " ", "'", "suzuki", "'", "]", "\n", "print", "(", "motorcycles", "[", "-", "1", "]", ")"], ["print", "(", "motorcycles", "[", "-", "1", "]", ")", "\n", "索引", "-", "1", " ", "总是", "返回", "最后", "一个", "列表", "元素", "，", "这里", "为值", "'", "suzuki", "'", " ", "：", "\n", "'", "suzuki", "'", "\n", "仅当", "列表", "为", "空时", "，", "这种", "访问", "最后", "一个", "元素", "的", "方式", "才", "会", "导致", "错误", "：", "\n", "motorcycles", " ", "=", " ", "[", "]", "\n", "print", "(", "motorcycles", "[", "-", "1", "]", ")", "\n", "列表", "motorcycles", " ", "不", "包含", "任何", "元素", "，", "因此", "Python", "返回", "一条", "索引", "错误", "消息", "：", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "motorcyles", ".", "py", "\"", ",", " ", "line", " ", "3", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "print", "(", "motorcycles", "[", "-", "1", "]", ")", "\n", "IndexError", ":", " ", "list", " ", "index", " ", "out", " ", "of", " ", "range", "\n", "注意", "\n", "注意", " ", "　", "发生", "索引", "错误", "却", "找", "不到", "解决办法", "时", "，", "请", "尝试", "将", "列表", "或", "其", "长度", "打印", "出来", "。", "列表", "可能", "与", "你", "以为", "的", "截然不同", "，", "在", "程序", "对", "其", "进行", "了", "动态", "处理", "时", "尤其", "如此", "。", "通过", "查看", "列表", "\n", "或", "其", "包含", "的", "元素", "数", "，", "可", "帮助", "你", "找出", "这种", "逻辑", "错误", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试"], ["3", "-", "11", " ", "有意", "引发", "错误", "\n", "有意", "引发", "错误", " ", "：", "如果", "你", "还", "没有", "在", "程序", "中", "遇到", "过", "索引", "错误", "，", "就", "尝试", "引发", "一个", "这种", "错误", "。", "在", "你", "的", "一个", "程序", "中", "，", "修改", "其中", "的", "索引", "，", "以", "引发", "索引", "错误", "。", "关闭程序", "前", "，", "务", "\n", "必", "消除", "这个", "错误", "。", "\n", "3.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "列表", "是", "什么", "以及", "如何", "使用", "其中", "的", "元素", "；", "如何", "定义", "列表", "以及", "如何", "增删", "元素", "；", "如何", "对", "列表", "进行", "永久性", "排序", "，", "以及", "如何", "为", "展示", "列表", "而", "进行", "临时", "排序", "；", "如何", "确定", "列", "\n", "表", "的", "长度", "，", "以及", "在", "使用", "列表", "时", "如何", "避免", "索引", "错误", "。", "\n", "在", "第", "4", "章", "，", "你", "将", "学习", "如何", "以", "更", "高效", "的", "方式", "处理", "列表", "元素", "。", "通过", "使用", "为数不多", "的", "几行", "代码", "来", "遍历", "列表", "元素", "，", "你", "就", "能", "高效", "地", "处理", "它们", "，", "即便", "列表", "包含", "数千", "乃至", "数百万个", "元素", "。", "\n", "第", "\n", "第", " ", "4", " ", "章", "　", "操作", "列表", "\n", "章", "　", "操作", "列表", "\n", "在", "第", "3", "章", "，", "你", "学习", "了", "如何", "创建", "简单", "的", "列表", "，", "还", "学习", "了", "如何", "操作", "列表", "元素", "。", "在", "本章", "中", "，", "你", "将", "学习", "如何", "遍历", "\n", "遍历", " ", "整个", "列表", "，", "这", "只", "需要", "几行", "代码", "，", "无论", "列表", "有", "多长", "。", "循环", "让你能", "\n", "够", "对", "列表", "的", "每个", "元素", "都", "采取", "一个", "或", "一系列", "相同", "的", "措施", "，", "从而", "高效", "地", "处理", "任何", "长度", "的", "列表", "，", "包括", "包含", "数千", "乃至", "数百万个", "元素", "的", "列表", "。", "\n", "4.1", "　", "遍历", "整个", "列表", "\n", "　", "遍历", "整个", "列表"], ["4.1", "　", "遍历", "整个", "列表", "\n", "　", "遍历", "整个", "列表", "\n", "你", "经常", "需要", "遍历", "列表", "的", "所有", "元素", "，", "对", "每个", "元素", "执行", "相同", "的", "操作", "。", "例如", "，", "在", "游戏", "中", "，", "可能", "需要", "将", "每个", "界面", "元素", "平移", "相同", "的", "距离", "；", "对于", "包含", "数字", "的", "列表", "，", "可能", "需要", "对", "每个", "元素", "执行", "相", "\n", "同", "的", "统计", "运算", "；", "在", "网站", "中", "，", "可能", "需要", "显示", "文章", "列表", "中", "的", "每个", "标题", "。", "需要", "对", "列表", "中", "的", "每个", "元素", "都", "执行", "相同", "的", "操作", "时", "，", "可", "使用", "Python", "中", "的", "for", " ", "循环", "。", "\n", "假设", "我们", "有", "一个", "魔术师", "名单", "，", "需要", "将", "其中", "每个", "魔术师", "的", "名字", "都", "打印", "出来", "。", "为此", "，", "我们", "可以", "分别", "获取", "名单", "中", "的", "每个", "名字", "，", "但", "这种", "做法", "会", "导致", "多个", "问题", "。", "例如", "，", "如果", "名单", "很长", "，", "将", "包", "\n", "含", "大量", "重复", "的", "代码", "。", "另外", "，", "每当", "名单", "的", "长度", "发生变化", "时", "，", "都", "必须", "修改", "代码", "。", "通过", "使用", "for", " ", "循环", "，", "可", "让", "Python", "去", "处理", "这些", "问题", "。", "\n", "下面", "使用", "for", " ", "循环", "来", "打印", "魔术师", "名单", "中", "的", "所有", "名字", "：", "\n", "magicians", ".", "py", "\n", "❶", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", "❷", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", "❸", " ", " ", " ", " ", " ", "print", "(", "magician", ")"], ["❸", " ", " ", " ", " ", " ", "print", "(", "magician", ")", "\n", "首先", "，", "我们", "像", "第", "3", "章", "那样", "定义", "了", "一个", "列表", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "定义", "了", "一个", "for", " ", "循环", "（", "见", "❷", "）", "；", "这", "行", "代码", "让", "Python", "从", "列表", "magicians", " ", "中", "取出", "一个", "名字", "，", "并", "将", "其", "存储", "在", "变", "\n", "量", "magician", " ", "中", "。", "最后", "，", "我们", "让", "Python", "打印", "前面", "存储", "到", "变量", "magician", " ", "中", "的", "名字", "（", "见", "❸", "）", "。", "这样", "，", "对于", "列表", "中", "的", "每个", "名字", "，", "Python", "都", "将", "重复", "执行", "❷", "处", "和", "❸", "处", "的", "代码", "行", "。", "你", "可以", "这", "\n", "样", "解读", "这些", "代码", "：", "对于", "列表", "magicians", " ", "中", "的", "每位", "魔术师", "，", "都", "将", "其", "名字", "打印", "出来", "。", "输出", "很", "简单", "，", "就是", "列表", "中", "所有", "的", "姓名", "：", "\n", "alice", "\n", "david", "\n", "carolina", "\n", "4.1", ".", "1", "　", "深入", "地", "研究", "循环", "\n", "　", "深入", "地", "研究", "循环", "\n", "循环", "这种", "概念", "很", "重要", "，", "因为", "它", "是", "让", "计算机", "自动", "完成", "重复", "工作", "的", "常见", "方式", "之一", "。", "例如", "，", "在", "前面", "的", "magicians", ".", "py", "中", "使用", "的", "简单", "循环", "中", "，", "Python", "将", "首先", "读取", "其中", "的", "第一行", "代码", "：", "\n", "for", " ", "magician", " ", "in", " ", "magicians", ":"], ["这", "行", "代码", "让", "Python", "获取", "列表", "magicians", " ", "中", "的", "第一个", "值", "（", "'", "alice", "'", " ", "）", "，", "并", "将", "其", "存储", "到", "变量", "magician", " ", "中", "。", "接下来", "，", "Python", "读取", "下", "一行", "代码", "：", "\n", " ", " ", " ", " ", "print", "(", "magician", ")", "\n", "它", "让", "Python", "打印", "magician", " ", "的", "值", "—", "—", "依然", "是", "'", "alice", "'", " ", "。", "鉴于", "该", "列表", "还", "包含", "其他", "值", "，", "Python", "返回", "到", "循环", "的", "第一行", "：", "\n", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", "Python", "获取", "列表", "中", "的", "下", "一个", "名字", "—", "—", "'", "david", "'", " ", "，", "并", "将", "其", "存储", "到", "变量", "magician", " ", "中", "，", "再", "执行", "下面", "这", "行", "代码", "：", "\n", " ", " ", " ", " ", "print", "(", "magician", ")", "\n", "Python", "再次", "打印", "变量", "magician", " ", "的", "值", "—", "—", "当前", "为", "'", "david", "'", " ", "。", "接下来", "，", "Python", "再次", "执行", "整个", "循环", "，", "对", "列表", "中", "的", "最后", "一个", "值", "—", "—", "'", "carolina", "'", " ", "进行", "处理", "。", "至此", "，", "列表", "中", "没有", "其他", "的", "值", "\n", "了", "，", "因此", "Python", "接着", "执行程序", "的", "下", "一行", "代码", "。", "在", "这个", "示例", "中", "，", "for", " ", "循环", "后面", "没有", "其他", "的", "代码", "，", "因此", "程序", "就此结束", "。", "\n", "刚", "开始", "使用", "循环", "时请", "牢记", "，", "对", "列表", "中", "的", "每个", "元素", "，", "都", "将", "执行", "循环", "指定", "的", "步骤", "，", "而", "不管", "列表", "包含", "多少", "个", "元素", "。", "如果", "列表", "包含", "一百万个", "元素", "，", "Python", "就", "重复", "执行", "指定", "的", "步骤", "一百万", "次", "，"], ["且", "通常", "速度", "非常", "快", "。", "\n", "另外", "，", "编写", "for", " ", "循环", "时", "，", "对于", "用于", "存储", "列表", "中", "每个", "值", "的", "临时", "变量", "，", "可", "指定", "任何", "名称", "。", "然而", "，", "选择", "描述", "单个", "列表", "元素", "的", "有", "意义", "的", "名称", "大有", "帮助", "。", "例如", "，", "对于", "小猫", "列表", "、", "小狗", "列表", "和", "\n", "一般性", "列表", "，", "像", "下面", "这样", "编写", "for", " ", "循环", "的", "第一行", "代码", "是", "不错", "的", "选择", "：", "\n", "for", " ", "cat", " ", "in", " ", "cats", ":", "\n", "for", " ", "dog", " ", "in", " ", "dogs", ":", "\n", "for", " ", "item", " ", "in", " ", "list", "_", "of", "_", "items", ":", "\n", "这些", "命名", "约定", "有助于", "你", "明白", "for", " ", "循环", "中将", "对", "每个", "元素", "执行", "的", "操作", "。", "使用", "单数", "和", "复数", "式", "名称", "，", "可", "帮助", "你", "判断", "代码段", "处理", "的", "是", "单个", "列表", "元素", "还是", "整个", "列表", "。", "\n", "4.1", ".", "2", "　", "在", "\n", "　", "在", "for", " ", "循环", "中", "执行", "更", "多", "的", "操作", "\n", "循环", "中", "执行", "更", "多", "的", "操作", "\n", "在", "for", " ", "循环", "中", "，", "可", "对", "每个", "元素", "执行", "任何", "操作", "。", "下面", "来", "扩展", "前面", "的", "示例", "，", "对于", "每位", "魔术师", "，", "都", "打印", "一条", "消息", "，", "指出", "他", "的", "表演", "太精彩", "了", "。", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", "❶", " ", " ", " ", " ", " ", "print", "(", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\"", ")"], ["相比", "于", "前", "一个", "示例", "，", "唯一", "的", "不同", "是", "对于", "每位", "魔术师", "，", "都", "打印", "了", "一条", "以", "其", "名字", "为", "抬头", "的", "消息", "（", "见", "❶", "）", "。", "这个", "循环", "第一次", "迭代", "时", "，", "变量", "magician", " ", "的", "值", "为", "'", "alice", "'", " ", "，", "因此", "Python", "打印", "\n", "的", "第一条", "消息", "的", "抬头", "为", "'", "Alice", "'", " ", "。", "第二次", "迭代", "时", "，", "消息", "的", "抬头", "为", "'", "David", "'", " ", "，", "而", "第三次", "迭代", "时", "，", "抬头", "为", "'", "Carolina", "'", " ", "。", "\n", "下面", "的", "输出", "表明", "，", "对于", "列表", "中", "的", "每位", "魔术师", "，", "都", "打印", "了", "一条", "个性化", "消息", "：", "\n", "Alice", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "David", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "在", "for", " ", "循环", "中", "，", "想", "包含", "多少", "行", "代码", "都", "可以", "。", "在", "代码", "行", "for", " ", "magician", " ", "in", " ", "magicians", " ", "后面", "，", "每个", "缩进", "的", "代码", "行都", "是", "循环", "的", "一部分", "，", "且", "将", "针对", "列表", "中", "的", "每个", "值", "都", "执行", "一次", "。", "因", "\n", "此", "，", "可", "对", "列表", "中", "的", "每个", "值", "执行", "任意", "次数", "的", "操作", "。", "\n", "下面", "再", "添加", "一行", "代码", "，", "告诉", "每位", "魔术师", "，", "我们", "期待", "他", "的", "下", "一次", "表演", "：", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":"], ["for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\"", ")", "\n", "❶", " ", " ", " ", " ", " ", "print", "(", "\"", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "\"", " ", "+", " ", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\\", "n", "\"", ")", "\n", "由于", "两条", "print", " ", "语句", "都", "缩进", "了", "，", "因此", "它们", "都", "将", "针对", "列表", "中", "的", "每位", "魔术师", "执行", "一次", "。", "第二条", "print", " ", "语句", "中", "的", "换行符", "\"", "\\", "n", "\"", " ", "（", "见", "❶", "）", "在", "每次", "迭代", "结束", "后", "都", "插入", "一个", "空行", "，", "从而", "整洁地", "\n", "将", "针对", "各位", "魔术师", "的", "消息", "编组", "：", "\n", "Alice", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Alice", ".", "\n", "David", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "David", ".", "\n", "Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Carolina", "."], ["I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Carolina", ".", "\n", "在", "for", " ", "循环", "中", "，", "想", "包含", "多少", "行", "代码", "都", "可以", "。", "实际上", "，", "你", "会", "发现", "使用", "for", " ", "循环", "对", "每个", "元素", "执行", "众多", "不同", "的", "操作", "很", "有用", "。", "\n", "4.1", ".", "3", "　", "在", "\n", "　", "在", "for", " ", "循环", "结束", "后", "执行", "一些", "操作", "\n", "循环", "结束", "后", "执行", "一些", "操作", "\n", "for", " ", "循环", "结束", "后", "再", "怎么", "做", "呢", "？", "通常", "，", "你", "需要", "提供", "总结性", "输出", "或", "接着", "执行程序", "必须", "完成", "的", "其他", "任务", "。", "\n", "在", "for", " ", "循环", "后面", "，", "没有", "缩进", "的", "代码", "都", "只", "执行", "一次", "，", "而", "不会", "重复", "执行", "。", "下面", "来", "打印", "一条", "向", "全体", "魔术师", "致谢", "的", "消息", "，", "感谢", "他们", "的", "精彩表演", "。", "想要", "在", "打印", "给", "各位", "魔术师", "的", "消息", "后面", "打印", "\n", "一条", "给", "全体", "魔术师", "的", "致谢", "消息", "，", "需要", "将", "相应", "的", "代码", "放在", "for", " ", "循环", "后面", "，", "且", "不", "缩进", "："], ["magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "\"", " ", "+", " ", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\\", "n", "\"", ")", "\n", "❶", " ", "print", "(", "\"", "Thank", " ", "you", ",", " ", "everyone", ".", " ", "That", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\"", ")", "\n", "你", "在", "前面", "看到", "了", "，", "开头", "两条", "print", " ", "语句", "针对", "列表", "中", "每位", "魔术师", "重复", "执行", "。", "然而", "，", "由于", "第三条", "print", " ", "语句", "没有", "缩进", "，", "因此", "只", "执行", "一次", "：", "\n", "Alice", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Alice", ".", "\n", "David", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "David", "."], ["I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "David", ".", "\n", "Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Carolina", ".", "\n", "Thank", " ", "you", ",", " ", "everyone", ".", " ", "That", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\n", "使用", "for", " ", "循环", "处理", "数据", "是", "一种", "对", "数据", "集", "执行", "整体", "操作", "的", "不错", "的", "方式", "。", "例如", "，", "你", "可能", "使用", "for", " ", "循环", "来", "初始化", "游戏", "—", "—", "遍历", "角色", "列表", "，", "将", "每个", "角色", "都", "显示", "到", "屏幕", "上", "；", "再", "在", "循环", "后面", "添", "\n", "加", "一个", "不", "缩进", "的", "代码", "块", "，", "在", "屏幕", "上", "绘制", "所有", "角色", "后", "显示", "一个", "Play", " ", "Now", "按钮", "。", "\n", "4.2", "　", "避免", "缩进", "错误", "\n", "　", "避免", "缩进", "错误", "\n", "Python", "根据", "缩", "进来", "判断", "代码", "行", "与", "前", "一个", "代码", "行", "的", "关系", "。", "在", "前面", "的", "示例", "中", "，", "向", "各位", "魔术师", "显示", "消息", "的", "代码", "行是", "for", " ", "循环", "的", "一部分", "，", "因为", "它们", "缩进", "了", "。", "Python", "通过", "使用", "缩进", "让", "代码", "更", "易", "\n", "读", "；", "简单", "地说", "，", "它", "要求", "你", "使用", "缩进", "让", "代码", "整洁", "而", "结构", "清晰", "。", "在", "较", "长", "的", "Python", "程序", "中", "，", "你", "将", "看到", "缩进", "程度", "各不相同", "的", "代码", "块", "，", "这", "让", "你", "对", "程序", "的", "组织", "结构", "有", "大致", "的", "认识", "。", "\n", "当", "你", "开始", "编写", "必须", "正确", "缩进", "的", "代码", "时", "，", "需要", "注意", "一些", "常见", "的", "缩进", "错误"], ["当", "你", "开始", "编写", "必须", "正确", "缩进", "的", "代码", "时", "，", "需要", "注意", "一些", "常见", "的", "缩进", "错误", "\n", "缩进", "错误", " ", "。", "例如", "，", "有时候", "，", "程序员", "会", "将", "不", "需要", "缩进", "的", "代码", "块", "缩进", "，", "而", "对于", "必须", "缩进", "的", "代码", "块", "却", "忘", "了", "缩进", "。", "通过", "查看", "这", "\n", "样", "的", "错误", "示例", "，", "有助于", "你", "以后", "避开", "它们", "，", "以及", "在", "它们", "出现", "在", "程序", "中", "时", "进行", "修复", "。", "\n", "下面", "来看", "一些", "较为", "常见", "的", "缩进", "错误", "。", "\n", "4.2", ".", "1", "　", "忘记", "缩进", "\n", "　", "忘记", "缩进", "\n", "对于", "位于", "for", " ", "语句", "后面", "且", "属于", "循环", "组成部分", "的", "代码", "行", "，", "一定", "要", "缩进", "。", "如果", "你", "忘记", "缩进", "，", "Python", "会", "提醒", "你", "：", "\n", "magicians", ".", "py", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", "❶", " ", "print", "(", "magician", ")", "\n", "print", " ", "语句", "（", "见", "❶", "）", "应", "缩进", "却", "没有", "缩进", "。", "Python", "没有", "找到", "期望", "缩进", "的", "代码", "块", "时", "，", "会", "让", "你", "知道", "哪", "行", "代码", "有", "问题", "。", "\n", " ", " ", "File", " ", "\"", "magicians", ".", "py", "\"", ",", " ", "line", " ", "3", "\n", " ", " ", " ", " ", "print", "(", "magician", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "^", "\n", "IndentationError", ":", " ", "expected", " ", "an", " ", "indented", " ", "block", "\n", "通常", "，", "将", "紧跟", "在", "for", " ", "语句", "后面", "的", "代码", "行", "缩进", "，", "可", "消除", "这种", "缩进", "错误", "。"], ["通常", "，", "将", "紧跟", "在", "for", " ", "语句", "后面", "的", "代码", "行", "缩进", "，", "可", "消除", "这种", "缩进", "错误", "。", "\n", "4.2", ".", "2", "　", "忘记", "缩进", "额外", "的", "代码", "行", "\n", "　", "忘记", "缩进", "额外", "的", "代码", "行", "\n", "有时候", "，", "循环", "能够", "运行", "而", "不会", "报告", "错误", "，", "但", "结果", "可能", "会", "出乎意料", "。", "试图", "在", "循环", "中", "执行", "多项", "任务", "，", "却", "忘记", "缩进", "其中", "的", "一些", "代码", "行时", "，", "就", "会", "出现", "这种", "情况", "。", "\n", "例如", "，", "如果", "忘记", "缩进", "循环", "中", "的", "第", "2", "行", "代码", "（", "它", "告诉", "每位", "魔术师", "，", "我们", "期待", "他", "的", "下", "一次", "表演", "）", "，", "就", "会", "出现", "这种", "情况", "：", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\"", ")", "\n", "❶", " ", "print", "(", "\"", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "\"", " ", "+", " ", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\\", "n", "\"", ")", "\n", "第二条", "print", " ", "语句", "（", "见", "❶", "）", "原本", "需要", "缩进", "，", "但", "Python", "发现", "for", " ", "语句", "后面", "有", "一行", "代码", "是", "缩进", "的", "，", "因此", "它", "没有", "报告", "错误", "。", "最终", "的", "结果", "是", "，", "对于", "列表", "中", "的", "每位", "魔术师", "，", "都", "执行", "了", "第一"], ["条", "print", " ", "语句", "，", "因为", "它", "缩进", "了", "；", "而", "第二条", "print", " ", "语句", "没有", "缩进", "，", "因此", "它", "只", "在", "循环", "结束", "后", "执行", "一次", "。", "由于", "变量", "magician", " ", "的", "终值", "为", "'", "carolina", "'", " ", "，", "因此", "只有", "她", "收到", "了", "消息", "“", "looking", "\n", "forward", " ", "to", " ", "the", " ", "next", " ", "trick", "”", "：", "\n", "Alice", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "David", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Carolina", ".", "\n", "这是", "一个", "逻辑", "错误", "\n", "逻辑", "错误", " ", "。", "从", "语法", "上", "看", "，", "这些", "Python", "代码", "是", "合法", "的", "，", "但", "由于", "存在", "逻辑", "错误", "，", "结果", "并", "不", "符合", "预期", "。", "如果", "你", "预期", "某项", "操作", "将", "针对", "每个", "列表", "元素", "都", "执行", "一次", "，", "但", "它", "却", "只", "执行", "了", "\n", "一次", "，", "请", "确定", "是否", "需要", "将", "一行", "或", "多行", "代码", "缩进", "。", "\n", "4.2", ".", "3", "　", "不必要", "的", "缩进", "\n", "　", "不必要", "的", "缩进", "\n", "如果", "你", "不", "小心", "缩进", "了", "无需", "缩进", "的", "代码", "行", "，", "Python", "将", "指出", "这", "一点", "：", "\n", "hello", "_", "world", ".", "py", "\n", " ", " ", "message", " ", "=", " ", "\"", "Hello", " ", "Python", " ", "world", "!", "\""], ["❶", " ", " ", " ", " ", " ", "print", "(", "message", ")", "\n", "print", " ", "语句", "（", "见", "❶", "）", "无需", "缩进", "，", "因为", "它", "并", "不", "属于", "前", "一行", "代码", "，", "因此", "Python", "将", "指出", "这种", "错误", "：", "\n", " ", " ", "File", " ", "\"", "hello", "_", "world", ".", "py", "\"", ",", " ", "line", " ", "2", "\n", " ", " ", " ", " ", "print", "(", "message", ")", "\n", " ", " ", " ", " ", "^", "\n", "IndentationError", ":", " ", "unexpected", " ", "indent", "\n", "为", "避免", "意外", "缩进", "错误", "，", "请", "只", "缩进", "需要", "缩进", "的", "代码", "。", "在", "前面", "编写", "的", "程序", "中", "，", "只有", "要", "在", "for", " ", "循环", "中", "对", "每个", "元素", "执行", "的", "代码", "需要", "缩进", "。", "\n", "4.2", ".", "4", "　", "循环", "后", "不必要", "的", "缩进", "\n", "　", "循环", "后", "不必要", "的", "缩进", "\n", "如果", "你", "不", "小心", "缩进", "了", "应", "在", "循环", "结束", "后", "执行", "的", "代码", "，", "这些", "代码", "将", "针对", "每个", "列表", "元素", "重复", "执行", "。", "在", "有些", "情况", "下", "，", "这", "可能", "导致", "Python", "报告", "语法错误", "，", "但", "在", "大多数", "情况", "下", "，", "这", "只会", "导致", "逻辑", "\n", "错误", "。", "\n", "例如", "，", "如果", "不", "小心", "缩进", "了", "感谢", "全体", "魔术师", "精彩表演", "的", "代码", "行", "，", "结果", "将", "如何", "呢", "？", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", " ", " ", "for", " ", "magician", " ", "in", " ", "magicians", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\"", ")"], ["print", "(", "\"", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "\"", " ", "+", " ", "magician", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\\", "n", "\"", ")", "\n", "❶", " ", " ", " ", " ", " ", "print", "(", "\"", "Thank", " ", "you", " ", "everyone", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\"", ")", "\n", "由于", "❶", "处", "的", "代码", "行", "被", "缩进", "，", "它", "将", "针对", "列表", "中", "的", "每位", "魔术师", "执行", "一次", "，", "如", "❷", "所示", "：", "\n", " ", " ", "Alice", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", " ", " ", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Alice", ".", "\n", "❷", " ", "Thank", " ", "you", " ", "everyone", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\n", " ", " ", "David", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", " ", " ", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "David", ".", "\n", "❷", " ", "Thank", " ", "you", " ", "everyone", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\n", " ", " ", "Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!"], ["Carolina", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "trick", "!", "\n", " ", " ", "I", " ", "can", "'", "t", " ", "wait", " ", "to", " ", "see", " ", "your", " ", "next", " ", "trick", ",", " ", "Carolina", ".", "\n", "❷", " ", "Thank", " ", "you", " ", "everyone", ",", " ", "that", " ", "was", " ", "a", " ", "great", " ", "magic", " ", "show", "!", "\n", "这", "也", "是", "一个", "逻辑", "错误", "，", "与", "4.2", ".", "2", "节", "的", "错误", "类似", "。", "Python", "不", "知道", "你", "的", "本意", "，", "只要", "代码", "符合", "语法", "，", "它", "就", "会", "运行", "。", "如果", "原本", "只应", "执行", "一次", "的", "操作", "执行", "了", "多次", "，", "请", "确定", "你", "是否", "不", "应该", "缩进", "执行", "\n", "该", "操作", "的", "代码", "。", "\n", "4.2", ".", "5", "　", "遗漏", "了", "冒号", "\n", "　", "遗漏", "了", "冒号", "\n", "for", " ", "语句", "末尾", "的", "冒号", "告诉", "Python", "，", "下", "一行", "是", "循环", "的", "第一行", "。", "\n", " ", " ", "magicians", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "david", "'", ",", " ", "'", "carolina", "'", "]", "\n", "❶", " ", "for", " ", "magician", " ", "in", " ", "magicians", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "magician", ")", "\n", "如果", "你", "不", "小心", "遗漏", "了", "冒号", "，", "如", "❶", "所示", "，", "将", "导致", "语法错误", "，", "因为", "Python", "不", "知道", "你", "意欲何为", "。", "这种", "错误", "虽然", "易于", "消除", "，", "但", "并", "不", "那么", "容易", "发现", "。", "程序员", "为", "找出", "这样", "的", "单", "字符", "错误", "，", "花费", "的", "\n", "时间", "多得", "令人", "惊讶", "。", "这样", "的", "错误", "之所以", "难以", "发现", "，", "是因为", "通常", "在", "我们", "的", "意料之外", "。", "\n", "动手", "试一试", "\n", "动手", "试一试"], ["时间", "多得", "令人", "惊讶", "。", "这样", "的", "错误", "之所以", "难以", "发现", "，", "是因为", "通常", "在", "我们", "的", "意料之外", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "4", "-", "1", " ", "比萨", "\n", "比萨", " ", "：", "想", "出", "至少", "三种", "你", "喜欢", "的", "比萨", "，", "将", "其", "名称", "存储", "在", "一个", "列表", "中", "，", "再", "使用", "for", " ", "循环", "将", "每种", "比萨", "的", "名称", "都", "打印", "出来", "。", "\n", "修改", "这个", "for", " ", "循环", "，", "使", "其", "打印", "包含", "比萨", "名称", "的", "句子", "，", "而", "不仅仅", "是", "比萨", "的", "名称", "。", "对于", "每种", "比萨", "，", "都", "显示", "一行", "输出", "，", "如", "“", "I", " ", "like", " ", "pepperoni", " ", "pizza", "”", "。", "\n", "在", "程序", "末尾", "添加", "一行", "代码", "，", "它", "不", "在", "for", " ", "循环", "中", "，", "指出", "你", "有", "多", "喜欢", "比萨", "。", "输出", "应", "包含", "针对", "每种", "比萨", "的", "消息", "，", "还有", "一个", "总结性", "句子", "，", "如", "“", "I", " ", "really", " ", "love", " ", "pizza", "!", "”", "。", "\n", "4", "-", "2", " ", "动物", "\n", "动物", " ", "：", "想", "出", "至少", "三种", "有", "共同", "特征", "的", "动物", "，", "将", "这些", "动物", "的", "名称", "存储", "在", "一个", "列表", "中", "，", "再", "使用", "for", " ", "循环", "将", "每种", "动物", "的", "名称", "都", "打印", "出来", "。", "\n", "修改", "这个", "程序", "，", "使", "其", "针对", "每种", "动物", "都", "打印", "一个", "句子", "，", "如", "“", "A", " ", "dog", " ", "would", " ", "make", " ", "a", " ", "great", " ", "pet", "”", "。", "\n", "在", "程序", "末尾", "添加", "一行", "代码", "，", "指出", "这些", "动物", "的", "共同之处", "，", "如", "打印", "诸如", "“", "Any", " ", "of", " ", "these", " ", "animals", " ", "would", " ", "make", " ", "a", " ", "great", " ", "pet", "!", "”", "这样", "的", "句子", "。", "\n", "4.3", "　", "创建", "数值", "列表", "\n", "　", "创建", "数值", "列表"], ["4.3", "　", "创建", "数值", "列表", "\n", "　", "创建", "数值", "列表", "\n", "需要", "存储", "一组", "数字", "的", "原因", "有", "很多", "，", "例如", "，", "在", "游戏", "中", "，", "需要", "跟踪", "每个", "角色", "的", "位置", "，", "还", "可能", "需要", "跟踪", "玩家", "的", "几个", "最高", "得分", "。", "在", "数据", "可视化", "中", "，", "处理", "的", "几乎", "都", "是", "由", "数字", "（", "如", "温度", "、", "距", "\n", "离", "、", "人口数量", "、", "经度", "和", "纬度", "等", "）", "组成", "的", "集合", "。", "\n", "列表", "非常适合", "用于", "存储", "数字", "集合", "，", "而", "Python", "提供", "了", "很多", "工具", "，", "可", "帮助", "你", "高效", "地", "处理", "数字", "列表", "。", "明白", "如何", "有效", "地", "使用", "这些", "工具", "后", "，", "即便", "列表", "包含", "数百万个", "元素", "，", "你", "编写", "的", "代码", "也", "能运", "\n", "行得", "很", "好", "。", "\n", "4.3", ".", "1", "　", "使用", "函数", "\n", "　", "使用", "函数", "range", "(", ")", "\n", "Python", "函数", "range", "(", ")", " ", "让", "你", "能够", "轻松", "地", "生成", "一系列", "的", "数字", "。", "例如", "，", "可以", "像", "下面", "这样", "使用", "函数", "range", "(", ")", " ", "来", "打印", "一系列", "的", "数字", "：", "\n", "numbers", ".", "py", "\n", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "5", ")", ":", "\n", " ", " ", " ", " ", "print", "(", "value", ")"], ["上述", "代码", "好像", "应该", "打印", "数字", "1", "~", "5", "，", "但", "实际上", "它", "不会", "打印", "数字", "5", "：", "\n", "1", "\n", "2", "\n", "3", "\n", "4", "\n", "在", "这个", "示例", "中", "，", "range", "(", ")", " ", "只是", "打印", "数字", "1", "~", "4", "，", "这", "是", "你", "在", "编程语言", "中", "经常", "看到", "的", "差", "一", "行为", "的", "结果", "。", "函数", "range", "(", ")", " ", "让", "Python", "从", "你", "指定", "的", "第一个", "值", "开始", "数", "，", "并", "在", "到达", "你", "指定", "的", "第二个", "值", "\n", "后", "停止", "，", "因此", "输出", "不", "包含", "第二个", "值", "（", "这里", "为", "5", "）", "。", "\n", "要", "打印", "数字", "1", "~", "5", "，", "需要", "使用", "range", "(", "1", ",", "6", ")", " ", "：", "\n", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "6", ")", ":", "\n", " ", " ", " ", " ", "print", "(", "value", ")", "\n", "这样", "，", "输出", "将", "从", "1", "开始", "，", "到", "5", "结束", "：", "\n", "1", "\n", "2", "\n", "3", "\n", "4", "\n", "5", "\n", "使用", "range", "(", ")", " ", "时", "，", "如果", "输出", "不", "符合", "预期", "，", "请", "尝试", "将", "指定", "的", "值加", "1", "或", "减", "1", "。", "\n", "4.3", ".", "2", "　", "使用", "\n", "　", "使用", "range", "(", ")", " ", "创建", "数字", "列表", "\n", "创建", "数字", "列表", "\n", "要", "创建", "数字", "列表", "，", "可", "使用", "函数", "list", "(", ")", " ", "将", "range", "(", ")", " ", "的", "结果", "直接", "转换", "为", "列表", "。", "如果", "将", "range", "(", ")", " ", "作为", "list", "(", ")", " ", "的", "参数", "，", "输出", "将", "为", "一个", "数字", "列表", "。", "\n", "在", "前", "一节", "的", "示例", "中", "，", "我们", "打印", "了", "一系列", "数字", "。", "要", "将", "这些", "数字", "转换", "为", "一个", "列表", "，", "可", "使用", "list", "(", ")", " ", "：", "\n", "numbers", " ", "=", " ", "list", "(", "range", "(", "1", ",", "6", ")", ")", "\n", "print", "(", "numbers", ")", "\n", "结果", "如下", "：", "\n", "[", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", ",", " ", "5", "]"], ["print", "(", "numbers", ")", "\n", "结果", "如下", "：", "\n", "[", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", ",", " ", "5", "]", "\n", "使用", "函数", "range", "(", ")", " ", "时", "，", "还", "可", "指定", "步长", "。", "例如", "，", "下面", "的", "代码", "打印", "1", "~", "10", "内", "的", "偶数", "：", "\n", "even", "_", "numbers", ".", "py", "\n", "even", "_", "numbers", " ", "=", " ", "list", "(", "range", "(", "2", ",", "11", ",", "2", ")", ")", "\n", "print", "(", "even", "_", "numbers", ")", "\n", "在", "这个", "示例", "中", "，", "函数", "range", "(", ")", " ", "从", "2", "开始", "数", "，", "然后", "不断", "地加", "2", "，", "直到", "达到", "或", "超过", "终值", "（", "11", "）", "，", "因此", "输出", "如下", "：", "\n", "[", "2", ",", " ", "4", ",", " ", "6", ",", " ", "8", ",", " ", "10", "]", "\n", "使用", "函数", "range", "(", ")", " ", "几乎", "能够", "创建", "任何", "需要", "的", "数字", "集", "，", "例如", "，", "如何", "创建", "一个", "列表", "，", "其中", "包含", "前", "10", "个", "整数", "（", "即", "1", "~", "10", "）", "的", "平方", "呢", "？", "在", "Python", "中", "，", "两个", "星号", "（", "*", "*", " ", "）", "表示", "乘方", "运算", "。", "下面", "\n", "的", "代码", "演示", "了", "如何", "将", "前", "10", "个", "整数", "的", "平方", "加入", "到", "一个", "列表", "中", "：", "\n", "squares", ".", "py", "\n", "❶", " ", "squares", " ", "=", " ", "[", "]", "\n", "❷", " ", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "11", ")", ":", "\n", "❸", " ", " ", " ", " ", " ", "square", " ", "=", " ", "value", "*", "*", "2", "\n", "❹", " ", " ", " ", " ", " ", "squares", ".", "append", "(", "square", ")", "\n", "❺", " ", " ", " ", " ", " ", "print", "(", "squares", ")"], ["❹", " ", " ", " ", " ", " ", "squares", ".", "append", "(", "square", ")", "\n", "❺", " ", " ", " ", " ", " ", "print", "(", "squares", ")", "\n", "首先", "，", "我们", "创建", "了", "一个", "空", "列表", "（", "见", "❶", "）", "；", "接下来", "，", "使用", "函数", "range", "(", ")", " ", "让", "Python", "遍历", "1", "~", "10", "的", "值", "（", "见", "❷", "）", "。", "在", "循环", "中", "，", "计算", "当前", "值", "的", "平方", "，", "并", "将", "结果", "存储", "到", "变量", "square", " ", "中", "（", "见", "\n", "❸", "）", "。", "然后", "，", "将", "新", "计算", "得到", "的", "平方", "值", "附加", "到", "列表", "squares", " ", "末尾", "（", "见", "❹", "）", "。", "最后", "，", "循环", "结束", "后", "，", "打印", "列表", "squares", " ", "（", "见", "❺", "）", "：", "\n", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", ",", " ", "36", ",", " ", "49", ",", " ", "64", ",", " ", "81", ",", " ", "100", "]", "\n", "为", "让", "这些", "代码", "更", "简洁", "，", "可不", "使用", "临时", "变量", "square", " ", "，", "而", "直接", "将", "每个", "计算", "得到", "的", "值", "附加", "到", "列表", "末尾", "：", "\n", " ", " ", "squares", " ", "=", " ", "[", "]"], ["for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "11", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "squares", ".", "append", "(", "value", "*", "*", "2", ")", "\n", " ", " ", "print", "(", "squares", ")", "\n", "❶", "处", "的", "代码", "与", "squares", ".", "py", "中", "❸", "处", "和", "❹", "处", "的", "代码", "等效", "。", "在", "循环", "中", "，", "计算", "每个", "值", "的", "平方", "，", "并", "立即", "将", "结果", "附加", "到", "列表", "squares", " ", "的", "末尾", "。", "\n", "创建", "更", "复杂", "的", "列表", "时", "，", "可", "使用", "上述", "两种", "方法", "中", "的", "任何", "一种", "。", "有时候", "，", "使用", "临时", "变量", "会", "让", "代码", "更", "易读", "；", "而", "在", "其他", "情况", "下", "，", "这样", "做", "只会", "让", "代码", "无谓", "地变长", "。", "你", "首先", "应该", "考虑", "的", "是", "，", "编", "\n", "写", "清晰", "易懂", "且", "能", "完成", "所", "需", "功能", "的", "代码", "；", "等到", "审核", "代码", "时", "，", "再", "考虑", "采用", "更", "高效", "的", "方法", "。", "\n", "4.3", ".", "3", "　", "对", "数字", "列表", "执行", "简单", "的", "统计", "计算", "\n", "　", "对", "数字", "列表", "执行", "简单", "的", "统计", "计算", "\n", "有", "几个", "专门", "用于", "处理", "数字", "列表", "的", "Python", "函数", "。", "例如", "，", "你", "可以", "轻松", "地", "找出", "数字", "列表", "的", "最大值", "、", "最小值", "和", "总和", "：", "\n", ">", ">", ">", " ", "digits", " ", "=", " ", "[", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", ",", " ", "5", ",", " ", "6", ",", " ", "7", ",", " ", "8", ",", " ", "9", ",", " ", "0", "]", "\n", ">", ">", ">", " ", "min", "(", "digits", ")", "\n", "0", "\n", ">", ">", ">", " ", "max", "(", "digits", ")", "\n", "9", "\n", ">", ">", ">", " ", "sum", "(", "digits", ")", "\n", "45", "\n", "注意", "\n", "注意", " ", "　", "出于", "版面", "考虑", "，", "本", "节", "使用", "的", "数字", "列表", "都", "很", "短", "，", "但", "这里", "介绍", "的", "知识", "也", "适用", "于", "包含", "数百万个", "数字", "的", "列表", "。", "\n", "4.3", ".", "4", "　", "列表", "解析"], ["4.3", ".", "4", "　", "列表", "解析", "\n", "　", "列表", "解析", "\n", "前面", "介绍", "的", "生成", "列表", "squares", " ", "的", "方式", "包含", "三", "四行", "代码", "，", "而", "列表", "解析", "让", "你", "只", "需", "编写", "一行", "代码", "就", "能", "生成", "这样", "的", "列表", "。", "列表", "解析", "\n", "列表", "解析", " ", "将", "for", " ", "循环", "和", "创建", "新元素", "的", "代码", "合并", "成", "一行", "，", "并", "自动", "\n", "附加", "新元素", "。", "面向", "初学者", "的", "书籍", "并非", "都", "会", "介绍", "列表", "解析", "，", "这里", "之所以", "介绍", "列表", "解析", "，", "是因为", "等", "你", "开始", "阅读", "他人", "编写", "的", "代码", "时", "，", "很", "可能", "会", "遇到", "它们", "。", "\n", "下面", "的", "示例", "使用", "列表", "解析", "创建", "你", "在", "前面", "看到", "的", "平方", "数", "列表", "：", "\n", "squares", ".", "py", "\n", "squares", " ", "=", " ", "[", "value", "*", "*", "2", " ", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "11", ")", "]", "\n", "print", "(", "squares", ")", "\n", "要", "使用", "这种", "语法", "，", "首先", "指定", "一个", "描述性", "的", "列表", "名", "，", "如", "squares", " ", "；", "然后", "，", "指定", "一个", "左", "方括号", "，", "并", "定义", "一个", "表达式", "，", "用于", "生成", "你", "要", "存储", "到", "列表", "中", "的", "值", "。", "在", "这个", "示例", "中", "，", "表达式", "\n", "为", "value", "*", "*", "2", " ", "，", "它", "计算", "平方", "值", "。", "接下来", "，", "编写", "一个", "for", " ", "循环", "，", "用于", "给", "表达式", "提供", "值", "，", "再", "加上", "右", "方括号", "。", "在", "这个", "示例", "中", "，", "for", " ", "循环", "为", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", "11", ")", " ", "，", "它", "将", "值", "\n", "1", "~", "10", "提供", "给", "表达式", "value", "*", "*", "2", " ", "。", "请", "注意", "，", "这里", "的", "for", " ", "语句", "末尾", "没有", "冒号", "。", "\n", "结果", "与", "你", "在", "前面", "看到", "的", "平方", "数", "列表", "相同", "："], ["结果", "与", "你", "在", "前面", "看到", "的", "平方", "数", "列表", "相同", "：", "\n", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", ",", " ", "36", ",", " ", "49", ",", " ", "64", ",", " ", "81", ",", " ", "100", "]", "\n", "要", "创建", "自己", "的", "列表", "解析", "，", "需要", "经过", "一定", "的", "练习", "，", "但", "能够", "熟练地", "创建", "常规", "列表", "后", "，", "你", "会", "发现", "这样", "做", "是", "完全", "值得", "的", "。", "当", "你", "觉得", "编写", "三", "四行", "代码", "来", "生成", "列表", "有点", "繁复", "时", "，", "就", "应", "考虑", "创建", "\n", "列表", "解析", "了", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "4", "-", "3", " ", "数到", "\n", "数到", "20", " ", "：", "使用", "一个", "for", " ", "循环", "打印", "数字", "1", "~", "20", "（", "含", "）", "。", "\n", "4", "-", "4", " ", "一百万", "\n", "一百万", " ", "：", "创建", "一个", "列表", "，", "其中", "包含", "数字", "1", "~", "1", " ", "000", " ", "000", "，", "再", "使用", "一个", "for", " ", "循环", "将", "这些", "数字", "打印", "出来", "（", "如果", "输出", "的", "时间", "太", "长", "，", "按", "Ctrl", " ", "+", " ", "C", "停止", "输出", "，", "或", "关闭", "输出", "窗口", "）", "。", "\n", "4", "-", "5", " ", "计算", "\n", "计算", "1", "~", "1", " ", "000", " ", "000", "的", "总和", "\n", "的", "总和", " ", "：", "创建", "一个", "列表", "，", "其中", "包含", "数字", "1", "~", "1", " ", "000", " ", "000", "，", "再", "使用", "min", "(", ")", " ", "和", "max", "(", ")", " ", "核实", "该", "列表", "确实", "是从", "1", "开始", "，", "到", "1", " ", "000", " ", "000", "结束", "的", "。", "另外", "，", "对", "这个", "列表", "\n", "调用函数", "sum", "(", ")", " ", "，", "看看", "Python", "将", "一百万个", "数字", "相加", "需要", "多长时间", "。", "\n", "4", "-", "6", " ", "奇数", "\n", "奇数", " ", "：", "通过", "给", "函数", "range", "(", ")", " ", "指定", "第三个", "参数", "来", "创建", "一个", "列表", "，", "其中", "包含", "1", "~", "20", "的", "奇数", "；", "再", "使用", "一个", "for", " ", "循环", "将", "这些", "数字", "都", "打印", "出来", "。", "\n", "4", "-", "7", " ", "3", "的", "倍数"], ["4", "-", "7", " ", "3", "的", "倍数", "\n", "的", "倍数", " ", "：", "创建", "一个", "列表", "，", "其中", "包含", "3", "~", "30", "内能", "被", "3", "整除", "的", "数字", "；", "再", "使用", "一个", "for", " ", "循环", "将", "这个", "列表", "中", "的", "数字", "都", "打印", "出来", "。", "\n", "4", "-", "8", " ", "立方", "\n", "立方", " ", "：", "将", "同一个", "数字", "乘", "三次", "称为", "立方", "。", "例如", "，", "在", "Python", "中", "，", "2", "的", "立方", "用", "2", "*", "*", "3", " ", "表示", "。", "请", "创建", "一个", "列表", "，", "其中", "包含", "前", "10", "个", "整数", "（", "即", "1", "~", "10", "）", "的", "立方", "，", "再", "使用", "一个", "for", " ", "循", "\n", "环将", "这些", "立方", "数都", "打印", "出来", "。", "\n", "4", "-", "9", " ", "立方", "解析", "\n", "立方", "解析", " ", "：", "使用", "列表", "解析", "生成", "一个", "列表", "，", "其中", "包含", "前", "10", "个", "整数", "的", "立方", "。", "\n", "4.4", "　", "使用", "列表", "的", "一部分", "\n", "　", "使用", "列表", "的", "一部分", "\n", "在", "第", "3", "章中", "，", "你", "学习", "了", "如何", "访问", "单个", "列表", "元素", "。", "在", "本章", "中", "，", "你", "一直", "在", "学习", "如何", "处理", "列表", "的", "所有", "元素", "。", "你", "还", "可以", "处理", "列表", "的", "部分", "元素", "—", "—", "Python", "称之为", "切片", "\n", "切片", " ", "。", "\n", "4.4", ".", "1", "　", "切片", "\n", "　", "切片", "\n", "要", "创建", "切片", "，", "可", "指定", "要", "使用", "的", "第一个", "元素", "和", "最后", "一个", "元素", "的", "索引", "。", "与", "函数", "range", "(", ")", " ", "一样", "，", "Python", "在", "到达", "你", "指定", "的", "第二个", "索引", "前面", "的", "元素", "后", "停止", "。", "要", "输出", "列表", "中", "的", "前", "三个", "元素", "，", "需", "\n", "要", "指定", "索引", "0", "~", "3", "，", "这", "将", "输出", "分别", "为", "0", " ", "、", "1", " ", "和", "2", " ", "的", "元素", "。", "\n", "下面", "的", "示例", "处理", "的", "是", "一个", "运动队", "成员", "列表", "：", "\n", "players", ".", "py"], ["下面", "的", "示例", "处理", "的", "是", "一个", "运动队", "成员", "列表", "：", "\n", "players", ".", "py", "\n", " ", " ", "players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "❶", " ", "print", "(", "players", "[", "0", ":", "3", "]", ")", "\n", "❶", "处", "的", "代码", "打印", "该", "列表", "的", "一个", "切片", "，", "其中", "只", "包含", "三名", "队员", "。", "输出", "也", "是", "一个", "列表", "，", "其中", "包含", "前三名", "队员", "："], ["[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", "]", "\n", "你", "可以", "生成", "列表", "的", "任何", "子集", "，", "例如", "，", "如果", "你", "要", "提取", "列表", "的", "第", "2", "~", "4", "个", "元素", "，", "可", "将", "起始", "索引", "指定", "为", "1", " ", "，", "并", "将", "终止", "索引", "指定", "为", "4", " ", "：", "\n", "players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "print", "(", "players", "[", "1", ":", "4", "]", ")", "\n", "这", "一次", "，", "切片", "始于", "'", "marita", "'", " ", "，", "终于", "'", "florence", "'", " ", "：", "\n", "[", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", "]", "\n", "如果", "你", "没有", "指定", "第一个", "索引", "，", "Python", "将", "自动", "从", "列表", "开头", "开始", "：", "\n", "players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "print", "(", "players", "[", ":", "4", "]", ")", "\n", "由于", "没有", "指定", "起始", "索引", "，", "Python", "从", "列表", "开头", "开始", "提取", "：", "\n", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", "]", "\n", "要", "让", "切片", "终止", "于", "列表", "末尾", "，", "也", "可", "使用", "类似", "的", "语法", "。", "例如", "，", "如果", "要", "提取", "从", "第", "3", "个", "元素", "到", "列表", "末尾", "的", "所有", "元素", "，", "可", "将", "起始", "索引", "指定", "为", "2", " ", "，", "并", "省略", "终止", "索引", "："], ["players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "print", "(", "players", "[", "2", ":", "]", ")", "\n", "Python", "将", "返回", "从", "第", "3", "个", "元素", "到", "列表", "末尾", "的", "所有", "元素", "：", "\n", "[", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "无论", "列表", "多长", "，", "这种", "语法", "都", "能够", "让", "你", "输出", "从", "特定", "位置", "到", "列表", "末尾", "的", "所有", "元素", "。", "本书", "前面", "说", "过", "，", "负数", "索引", "返回", "离", "列表", "末尾", "相应", "距离", "的", "元素", "，", "因此", "你", "可以", "输出", "列表", "末尾", "的", "任何", "切片", "。", "\n", "例如", "，", "如果", "你", "要", "输出", "名单", "上", "的", "最后", "三名", "队员", "，", "可", "使用", "切片", "players", "[", "-", "3", ":", "]", " ", "：", "\n", "players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", "print", "(", "players", "[", "-", "3", ":", "]", ")", "\n", "上述", "代码", "打印", "最后", "三名", "队员", "的", "名字", "，", "即便", "队员", "名单", "的", "长度", "发生变化", "，", "也", "依然", "如此", "。", "\n", "4.4", ".", "2", "　", "遍历", "切片", "\n", "　", "遍历", "切片", "\n", "如果", "要", "遍历", "列表", "的", "部分", "元素", "，", "可", "在", "for", " ", "循环", "中", "使用", "切片", "。", "在", "下面", "的", "示例", "中", "，", "我们", "遍历", "前三名", "队员", "，", "并打印", "他们", "的", "名字", "："], ["players", " ", "=", " ", "[", "'", "charles", "'", ",", " ", "'", "martina", "'", ",", " ", "'", "michael", "'", ",", " ", "'", "florence", "'", ",", " ", "'", "eli", "'", "]", "\n", " ", " ", "print", "(", "\"", "Here", " ", "are", " ", "the", " ", "first", " ", "three", " ", "players", " ", "on", " ", "my", " ", "team", ":", "\"", ")", "\n", "❶", " ", "for", " ", "player", " ", "in", " ", "players", "[", ":", "3", "]", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "player", ".", "title", "(", ")", ")", "\n", "❶", "处", "的", "代码", "没有", "遍历", "整个", "队员", "列表", "，", "而", "只", "遍历", "前三名", "队员", "：", "\n", "Here", " ", "are", " ", "the", " ", "first", " ", "three", " ", "players", " ", "on", " ", "my", " ", "team", ":", "\n", "Charles", "\n", "Martina", "\n", "Michael", "\n", "在", "很多", "情况", "下", "，", "切片", "都", "很", "有用", "。", "例如", "，", "编写", "游戏", "时", "，", "你", "可以", "在", "玩家", "退出", "游戏", "时", "将", "其", "最终", "得分", "加入", "到", "一个", "列表", "中", "。", "然后", "，", "为", "获取", "该", "玩家", "的", "三个", "最高", "得分", "，", "你", "可以", "将", "该", "列表", "按", "降序", "排", "\n", "列", "，", "再", "创建", "一个", "只", "包含", "前", "三个", "得分", "的", "切片", "。", "处理", "数据", "时", "，", "可", "使用", "切片", "来", "进行", "批量", "处理", "；", "编写", "Web", "应用程序", "时", "，", "可", "使用", "切片", "来", "分页", "显示信息", "，", "并", "在", "每页", "显示", "数量", "合适", "的", "信息", "。", "\n", "4.4", ".", "3", "　", "复制", "列表", "\n", "　", "复制", "列表", "\n", "你", "经常", "需要", "根据", "既有", "列表", "创建", "全新", "的", "列表", "。", "下面", "来", "介绍", "复制", "列表", "的", "工作", "原理", "，", "以及", "复制", "列表", "可", "提供", "极大", "帮助", "的", "一种", "情形", "。"], ["要", "复制", "列表", "，", "可", "创建", "一个", "包含", "整个", "列表", "的", "切片", "，", "方法", "是", "同时", "省略", "起始", "索引", "和", "终止", "索引", "（", "[", ":", "]", " ", "）", "。", "这", "让", "Python", "创建", "一个", "始于", "第一个", "元素", "，", "终止", "于", "最后", "一个", "元素", "的", "切片", "，", "即", "复制", "整个", "\n", "列表", "。", "\n", "例如", "，", "假设", "有", "一个", "列表", "，", "其中", "包含", "你", "最", "喜欢", "的", "四种", "食品", "，", "而", "你", "还", "想", "创建", "另", "一个", "列表", "，", "在", "其中", "包含", "一位", "朋友", "喜欢", "的", "所有", "食品", "。", "不过", "，", "你", "喜欢", "的", "食品", "，", "这位", "朋友", "都", "喜欢", "，", "因此", "你", "可以", "\n", "通过", "复制", "来", "创建", "这个", "列表", "："], ["foods", ".", "py", "\n", "❶", " ", "my", "_", "foods", " ", "=", " ", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]", "\n", "❷", " ", "friend", "_", "foods", " ", "=", " ", "my", "_", "foods", "[", ":", "]", "\n", " ", " ", "print", "(", "\"", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "my", "_", "foods", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nMy", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "friend", "_", "foods", ")", "\n", "我们", "首先", "创建", "了", "一个", "名为", "my", "_", "foods", " ", "的", "食品", "列表", "（", "见", "❶", "）", "，", "然后", "创建", "了", "一个", "名为", "friend", "_", "foods", " ", "的", "新", "列表", "（", "见", "❷", "）", "。", "我们", "在", "不", "指定", "任何", "索引", "的", "情况", "下", "从", "列表", "my", "_", "foods", " ", "中", "提取", "\n", "一个", "切片", "，", "从而", "创建", "了", "这个", "列表", "的", "副本", "，", "再", "将", "该", "副本", "存储", "到", "变量", "friend", "_", "foods", " ", "中", "。", "打印", "每个", "列表", "后", "，", "我们", "发现", "它们", "包含", "的", "食品", "相同", "：", "\n", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]", "\n", "My", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]"], ["[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]", "\n", "为", "核实", "我们", "确实", "有", "两个", "列表", "，", "下面", "在", "每个", "列表", "中", "都", "添加", "一种", "食品", "，", "并", "核实", "每个", "列表", "都", "记录", "了", "相应", "人员", "喜欢", "的", "食品", "：", "\n", " ", " ", "my", "_", "foods", " ", "=", " ", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]", "\n", "❶", " ", "friend", "_", "foods", " ", "=", " ", "my", "_", "foods", "[", ":", "]", "\n", "❷", " ", "my", "_", "foods", ".", "append", "(", "'", "cannoli", "'", ")", "\n", "❸", " ", "friend", "_", "foods", ".", "append", "(", "'", "ice", " ", "cream", "'", ")", "\n", " ", " ", "print", "(", "\"", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "my", "_", "foods", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nMy", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "friend", "_", "foods", ")", "\n", "与", "前", "一个", "示例", "一样", "，", "我们", "首先", "将", "my", "_", "foods", " ", "的", "元素", "复制到", "新", "列表", "friend", "_", "foods", " ", "中", "（", "见", "❶", "）", "。", "接下来", "，", "在", "每个", "列表", "中", "都", "添加", "一种", "食品", "：", "在", "列表", "my", "_", "foods", " ", "中", "添加", "'", "cannoli", "'", "\n", "（", "见", "❷", "）", "，", "而", "在", "friend", "_", "foods", " ", "中", "添加", "'", "ice", " ", "cream", "'", " ", "（", "见", "❸", "）", "。", "最后", "，", "打印", "这", "两个", "列表", "，", "核实", "这", "两种", "食品", "包含", "在", "正确", "的", "列表", "中", "。"], ["My", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "❹", " ", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", ",", " ", "'", "cannoli", "'", "]", "\n", " ", " ", "My", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "❺", " ", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", ",", " ", "'", "ice", " ", "cream", "'", "]", "\n", "❹", "处", "的", "输出", "表明", "，", "'", "cannoli", "'", " ", "包含", "在", "你", "喜欢", "的", "食品", "列表", "中", "，", "而", "'", "ice", " ", "cream", "'", " ", "没有", "。", "❺", "处", "的", "输出", "表明", "，", "'", "ice", " ", "cream", "'", " ", "包含", "在", "你", "朋友", "喜欢", "的", "食品", "列表", "中", "，", "而", "'", "cannoli", "'", " ", "没", "\n", "有", "。", "倘若", "我们", "只是", "简单", "地", "将", "my", "_", "foods", " ", "赋给", "friend", "_", "foods", " ", "，", "就", "不能", "得到", "两个", "列表", "。", "例如", "，", "下", "例", "演示", "了", "在", "不", "使用", "切片", "的", "情况", "下", "复制", "列表", "的", "情况", "：", "\n", " ", " ", "my", "_", "foods", " ", "=", " ", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", "]", "\n", " ", " ", "#", "这", "行不通", "\n", "❶", " ", "friend", "_", "foods", " ", "=", " ", "my", "_", "foods", "\n", " ", " ", "my", "_", "foods", ".", "append", "(", "'", "cannoli", "'", ")", "\n", " ", " ", "friend", "_", "foods", ".", "append", "(", "'", "ice", " ", "cream", "'", ")", "\n", " ", " ", "print", "(", "\"", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")"], ["print", "(", "\"", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "my", "_", "foods", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nMy", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\"", ")", "\n", " ", " ", "print", "(", "friend", "_", "foods", ")", "\n", "这里", "将", "my", "_", "foods", " ", "赋给", "friend", "_", "foods", " ", "，", "而", "不是", "将", "my", "_", "foods", " ", "的", "副本", "存储", "到", "friend", "_", "foods", " ", "（", "见", "❶", "）", "。", "这种", "语法", "实际上", "是", "让", "Python", "将", "新", "变量", "friend", "_", "foods", " ", "关联", "到", "包含", "\n", "在", "my", "_", "foods", " ", "中", "的", "列表", "，", "因此", "这", "两个", "变量", "都", "指向", "同一个", "列表", "。", "鉴于", "此", "，", "当", "我们", "将", "'", "cannoli", "'", " ", "添加", "到", "my", "_", "foods", " ", "中", "时", "，", "它", "也", "将", "出现", "在", "friend", "_", "foods", " ", "中", "；", "同样", "，", "虽然", "'", "ice", "\n", "cream", "'", " ", "好像", "只", "被", "加入", "到", "了", "friend", "_", "foods", " ", "中", "，", "但", "它", "也", "将", "出现", "在", "这", "两个", "列表", "中", "。", "\n", "输出", "表明", "，", "两个", "列表", "是", "相同", "的", "，", "这", "并非", "我们", "想要", "的", "结果", "：", "\n", "My", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", ",", " ", "'", "cannoli", "'", ",", " ", "'", "ice", " ", "cream", "'", "]", "\n", "My", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":"], ["My", " ", "friend", "'", "s", " ", "favorite", " ", "foods", " ", "are", ":", "\n", "[", "'", "pizza", "'", ",", " ", "'", "falafel", "'", ",", " ", "'", "carrot", " ", "cake", "'", ",", " ", "'", "cannoli", "'", ",", " ", "'", "ice", " ", "cream", "'", "]", "\n", "注意", "\n", "注意", " ", "　", "现在", "暂时", "不要", "考虑", "这个", "示例", "中", "的", "细节", "。", "基本上", "，", "当", "你", "试图", "使用", "列表", "的", "副本", "时", "，", "如果", "结果", "出乎意料", "，", "请", "确认", "你", "像", "第一个", "示例", "那样", "使用", "切片", "复制", "了", "列表", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "4", "-", "10", " ", "切片", "\n", "切片", " ", "：", "选择", "你", "在", "本章", "编写", "的", "一个", "程序", "，", "在", "末尾", "添加", "几行", "代码", "，", "以", "完成", "如下", "任务", "。", "\n", "打印消息", "“", "The", " ", "first", " ", "three", " ", "items", " ", "in", " ", "the", " ", "list", " ", "are", ":", "”", "，", "再", "使用", "切片", "来", "打印", "列表", "的", "前", "三个", "元素", "。", "\n", "打印消息", "“", "Three", " ", "items", " ", "from", " ", "the", " ", "middle", " ", "of", " ", "the", " ", "list", " ", "are", ":", "”", "，", "再", "使用", "切片", "来", "打印", "列表", "中间", "的", "三个", "元素", "。", "\n", "打印消息", "“", "The", " ", "last", " ", "three", " ", "items", " ", "in", " ", "the", " ", "list", " ", "are", ":", "”", "，", "再", "使用", "切片", "来", "打印", "列表", "末尾", "的", "三个", "元素", "。", "\n", "4", "-", "11", " ", "你", "的", "比萨", "和", "我", "的", "比萨", "\n", "你", "的", "比萨", "和", "我", "的", "比萨", " ", "：", "在", "你", "为", "完成", "练习", "4", "-", "1", "而", "编写", "的", "程序", "中", "，", "创建", "比萨", "列表", "的", "副本", "，", "并", "将", "其", "存储", "到", "变量", "friend", "_", "pizzas", " ", "中", "，", "再", "完成", "如下", "任务", "。"], ["在", "原来", "的", "比萨", "列表", "中", "添加", "一种", "比萨", "。", "\n", "在", "列表", "friend", "_", "pizzas", " ", "中", "添加", "另", "一种", "比萨", "。", "\n", "核实", "你", "有", "两个", "不同", "的", "列表", "。", "为此", "，", "打印消息", "“", "My", " ", "favorite", " ", "pizzas", " ", "are", ":", "”", "，", "再", "使用", "一个", "for", " ", "循环", "来", "打印", "第一个", "列表", "；", "打印消息", "“", "My", " ", "friend", "'", "s", " ", "favorite", " ", "pizzas", " ", "are", ":", "”", "，", "再", "使用", "一", "\n", "个", "for", " ", "循环", "来", "打印", "第二个", "列表", "。", "核实", "新增", "的", "比萨", "被", "添加", "到", "了", "正确", "的", "列表", "中", "。", "\n", "4", "-", "12", " ", "使用", "多个", "循环", "\n", "使用", "多个", "循环", " ", "：", "在", "本节", "中", "，", "为", "节省", "篇幅", "，", "程序", "foods", ".", "py", "的", "每个", "版本", "都", "没有", "使用", "for", " ", "循环", "来", "打印", "列表", "。", "请", "选择", "一个", "版本", "的", "foods", ".", "py", "，", "在", "其中", "编写", "两个", "for", " ", "循环", "，", "将", "各", "\n", "个", "食品", "列表", "都", "打印", "出来", "。", "\n", "4.5", "　", "元组", "\n", "　", "元组", "\n", "列表", "非常适合", "用于", "存储", "在", "程序运行", "期间", "可能", "变化", "的", "数据", "集", "。", "列表", "是", "可以", "修改", "的", "，", "这", "对", "处理", "网站", "的", "用户", "列表", "或", "游戏", "中", "的", "角色", "列表", "至关重要", "。", "然而", "，", "有时候", "你", "需要", "创建", "一系列", "不可", "修", "\n", "改", "的", "元素", "，", "元组", "可以", "满足", "这种", "需求", "。", "Python", "将", "不能", "修改", "的", "值", "称为", "不可", "变", "的", "\n", "不可", "变", "的", " ", "，", "而", "不可", "变", "的", "列表", "被", "称为", "元组", "\n", "元组", " ", "。", "\n", "4.5", ".", "1", "　", "定义", "元组", "\n", "　", "定义", "元组"], ["不可", "变", "的", " ", "，", "而", "不可", "变", "的", "列表", "被", "称为", "元组", "\n", "元组", " ", "。", "\n", "4.5", ".", "1", "　", "定义", "元组", "\n", "　", "定义", "元组", "\n", "元组", "看起来", "犹如", "列表", "，", "但", "使用", "圆括号", "而", "不是", "方括号", "来", "标识", "。", "定义", "元组", "后", "，", "就", "可以", "使用", "索引", "来", "访问", "其", "元素", "，", "就", "像", "访问", "列表", "元素", "一样", "。", "\n", "例如", "，", "如果", "有", "一个", "大小", "不", "应", "改变", "的", "矩形", "，", "可", "将", "其", "长度", "和", "宽度", "存储", "在", "一个", "元组", "中", "，", "从而", "确保", "它们", "是", "不能", "修改", "的", "：", "\n", "dimensions", ".", "py", "\n", "❶", " ", "dimensions", " ", "=", " ", "(", "200", ",", " ", "50", ")", "\n", "❷", " ", "print", "(", "dimensions", "[", "0", "]", ")", "\n", " ", " ", "print", "(", "dimensions", "[", "1", "]", ")", "\n", "我们", "首先", "定义", "了", "元组", "dimensions", " ", "（", "见", "❶", "）", "，", "为此", "我们", "使用", "了", "圆括号", "而", "不是", "方括号", "。", "接下来", "，", "我们", "分别", "打印", "该", "元组", "的", "各个", "元素", "，", "使用", "的", "语法", "与", "访问", "列表", "元素", "时", "使用", "的", "语法", "相同", "\n", "（", "见", "❷", "）", "：", "\n", "200", "\n", "50", "\n", "下面", "来", "尝试", "修改", "元组", "dimensions", " ", "中", "的", "一个", "元素", "，", "看看", "结果", "如何", "：", "\n", " ", " ", "dimensions", " ", "=", " ", "(", "200", ",", " ", "50", ")", "\n", "❶", " ", "dimensions", "[", "0", "]", " ", "=", " ", "250", "\n", "❶", "处", "的", "代码", "试图", "修改", "第一个", "元素", "的", "值", "，", "导致", "Python", "返回", "类型", "错误", "消息", "。", "由于", "试图", "修改", "元组", "的", "操作", "是", "被", "禁止", "的", "，", "因此", "Python", "指出", "不能", "给", "元组", "的", "元素", "赋值", "："], ["Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "dimensions", ".", "py", "\"", ",", " ", "line", " ", "3", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "dimensions", "[", "0", "]", " ", "=", " ", "250", "\n", "TypeError", ":", " ", "'", "tuple", "'", " ", "object", " ", "does", " ", "not", " ", "support", " ", "item", " ", "assignment", "\n", "代码", "试图", "修改", "矩形", "的", "尺寸", "时", "，", "Python", "报告", "错误", "，", "这", "很", "好", "，", "因为", "这", "正是", "我们", "希望", "的", "。", "\n", "4.5", ".", "2", "　", "遍历", "元组", "中", "的", "所有", "值", "\n", "　", "遍历", "元组", "中", "的", "所有", "值", "\n", "像", "列表", "一样", "，", "也", "可以", "使用", "for", " ", "循环", "来", "遍历", "元组", "中", "的", "所有", "值", "：", "\n", "dimensions", " ", "=", " ", "(", "200", ",", " ", "50", ")", "\n", "for", " ", "dimension", " ", "in", " ", "dimensions", ":", "\n", " ", " ", " ", " ", "print", "(", "dimension", ")", "\n", "就", "像", "遍历", "列表", "时", "一样", "，", "Python", "返回", "元组", "中", "所有", "的", "元素", "，", "：", "\n", "200", "\n", "50", "\n", "4.5", ".", "3", "　", "修改", "元组", "变量", "\n", "　", "修改", "元组", "变量", "\n", "虽然", "不能", "修改", "元组", "的", "元素", "，", "但", "可以", "给", "存储", "元组", "的", "变量", "赋值", "。", "因此", "，", "如果", "要", "修改", "前述", "矩形", "的", "尺寸", "，", "可", "重新", "定义", "整个", "元组", "：", "\n", "❶", " ", "dimensions", " ", "=", " ", "(", "200", ",", " ", "50", ")", "\n", " ", " ", "print", "(", "\"", "Original", " ", "dimensions", ":", "\"", ")"], ["print", "(", "\"", "Original", " ", "dimensions", ":", "\"", ")", "\n", " ", " ", "for", " ", "dimension", " ", "in", " ", "dimensions", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "dimension", ")", "\n", "❷", " ", "dimensions", " ", "=", " ", "(", "400", ",", " ", "100", ")", "\n", "❸", " ", "print", "(", "\"", "\\", "nModified", " ", "dimensions", ":", "\"", ")", "\n", " ", " ", "for", " ", "dimension", " ", "in", " ", "dimensions", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "dimension", ")", "\n", "我们", "首先", "定义", "了", "一个", "元组", "，", "并", "将", "其", "存储", "的", "尺寸", "打印", "了", "出来", "（", "见", "❶", "）", "；", "接下来", "，", "将", "一个", "新元", "组", "存储", "到", "变量", "dimensions", " ", "中", "（", "见", "❷", "）", "；", "然后", "，", "打印", "新", "的", "尺寸", "（", "见", "❸", "）", "。", "这次", "，", "Python", "\n", "不会", "报告", "任何", "错误", "，", "因为", "给", "元组", "变量", "赋值", "是", "合法", "的", "：", "\n", "Original", " ", "dimensions", ":"], ["200", "\n", "50", "\n", "Modified", " ", "dimensions", ":", "\n", "400", "\n", "100", "\n", "相比", "于", "列表", "，", "元组", "是", "更", "简单", "的", "数据结构", "。", "如果", "需要", "存储", "的", "一组", "值", "在", "程序", "的", "整个", "生命周期", "内", "都", "不变", "，", "可", "使用", "元组", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "4", "-", "13", " ", "自助餐", "\n", "自助餐", " ", "：", "有", "一家", "自助式", "餐馆", "，", "只", "提供", "五种", "简单", "的", "食品", "。", "请", "想", "出", "五种", "简单", "的", "食品", "，", "并", "将", "其", "存储", "在", "一个", "元组", "中", "。", "\n", "使用", "一个", "for", " ", "循环", "将", "该", "餐馆", "提供", "的", "五种", "食品", "都", "打印", "出来", "。", "\n", "尝试", "修改", "其中", "的", "一个", "元素", "，", "核实", "Python", "确实", "会", "拒绝", "你", "这样", "做", "。", "\n", "餐馆", "调整", "了", "菜单", "，", "替换", "了", "它", "提供", "的", "其中", "两种", "食品", "。", "请", "编写", "一个", "这样", "的", "代码", "块", "：", "给", "元组", "变量", "赋值", "，", "并", "使用", "一个", "for", " ", "循环", "将", "新元", "组", "的", "每个", "元素", "都", "打印", "出来", "。", "\n", "4.6", "　", "设置", "代码", "格式", "\n", "　", "设置", "代码", "格式", "\n", "随着", "你", "编写", "的", "程序", "越来越", "长", "，", "有", "必要", "了解", "一些", "代码", "格式", "设置", "约定", "。", "请花", "时间", "让", "你", "的", "代码", "尽可能", "易于", "阅读", "；", "让", "代码", "易于", "阅读", "有助于", "你", "掌握", "程序", "是", "做", "什么", "的", "，", "也", "可以", "帮助", "他人", "理解", "你", "\n", "编写", "的", "代码", "。", "\n", "为", "确保", "所有人", "编写", "的", "代码", "的", "结构", "都", "大致", "一致", "，", "Python", "程序员", "都", "遵循", "一些", "格式", "设置", "约定", "。", "学会", "编写", "整洁", "的", "Python", "后", "，", "就", "能", "明白", "他人", "编写", "的", "Python", "代码", "的", "整体", "结构", "—", "—", "只要", "他们", "和", "你", "遵"], ["循", "相同", "的", "指南", "。", "要", "成为", "专业", "程序员", "，", "应从", "现在", "开始", "就", "遵循", "这些", "指南", "，", "以", "养成", "良好", "的", "习惯", "。", "\n", "4.6", ".", "1", "　", "格式", "设置", "指南", "\n", "　", "格式", "设置", "指南", "\n", "若", "要", "提出", "Python", "语言", "修改", "建议", "，", "需要", "编写", "Python", "改进", "提案", "\n", "改进", "提案", " ", "（", "Python", " ", "Enhancement", " ", "Proposal", "，", "PEP", "）", "。", "PEP", " ", "8", "是", "最", "古老", "的", "PEP", "之一", "，", "它", "向", "Python", "程序员", "提供", "了", "代码", "格式", "设置", "指南", "。", "PEP", " ", "8", "的", "\n", "篇幅", "很长", "，", "但", "大都", "与", "复杂", "的", "编码", "结构", "相关", "。", "\n", "Python", "格式", "设置", "指南", "的", "编写者", "深知", "，", "代码", "被", "阅读", "的", "次数", "比", "编写", "的", "次数", "多", "。", "代码", "编写", "出来", "后", "，", "调试", "时", "你", "需要", "阅读", "它", "；", "给", "程序", "添加", "新", "功能", "时", "，", "需要", "花", "很长", "的", "时间", "阅读", "代码", "；", "与", "其他", "程序", "\n", "员", "分享", "代码", "时", "，", "这些", "程序员", "也", "将", "阅读", "它们", "。", "\n", "如果", "一定", "要", "在", "让", "代码", "易于", "编写", "和", "易于", "阅读", "之间", "做出", "选择", "，", "Python", "程序员", "几乎", "总是", "会", "选择", "后者", "。", "下面", "的", "指南", "可", "帮助", "你", "从", "一", "开始", "就", "编写出", "清晰", "的", "代码", "。", "\n", "4.6", ".", "2", "　", "缩进", "\n", "　", "缩进", "\n", "PEP", " ", "8", "建议", "每级", "缩进", "都", "使用", "四个", "空格", "，", "这", "既", "可", "提高", "可读性", "，", "又", "留下", "了", "足够", "的", "多级", "缩进", "空间", "。", "\n", "在", "字", "处理", "文档", "中", "，", "大家", "常常", "使用", "制表符", "而", "不是", "空格", "来", "缩进", "。", "对于", "字", "处理", "文档", "来说", "，", "这样", "做", "的", "效果", "很", "好", "，", "但", "混合", "使用", "制表符", "和", "空格", "会", "让", "Python", "解释器", "感到", "迷惑", "。", "每款", "文本编辑", "器", "都", "提"], ["供", "了", "一种", "设置", "，", "可", "将", "输入", "的", "制表符", "转换", "为", "指定", "数量", "的", "空格", "。", "你", "在", "编写", "代码", "时", "应该", "使用", "制表符", "键", "，", "但", "一定", "要", "对", "编辑器", "进行", "设置", "，", "使", "其", "在", "文档", "中", "插入", "空格", "而", "不是", "制表符", "。", "\n", "在", "程序", "中", "混合", "使用", "制表符", "和", "空格", "可能", "导致", "极难", "解决", "的", "问题", "。", "如果", "你", "混合", "使用", "了", "制表符", "和", "空格", "，", "可", "将", "文件", "中", "所有", "的", "制表符", "转换", "为", "空格", "，", "大多数", "编辑器", "都", "提供", "了", "这样", "的", "功能", "。", "\n", "4.6", ".", "3", "　", "行长", "\n", "　", "行长", "\n", "很多", "Python", "程序员", "都", "建议", "每行", "不", "超过", "80", "字符", "。", "最初", "制定", "这样", "的", "指南", "时", "，", "在", "大多数", "计算机", "中", "，", "终端", "窗口", "每行", "只能", "容纳", "79", "字符", "；", "当前", "，", "计算机屏幕", "每行", "可", "容纳", "的", "字符", "数", "多得多", "，", "为何", "还", "\n", "要", "使用", "79", "字符", "的", "标准", "行长", "呢", "？", "这里", "有", "别的", "原因", "。", "专业", "程序员", "通常", "会", "在", "同一个", "屏幕", "上", "打开", "多个", "文件", "，", "使用", "标准", "行长", "可以", "让", "他们", "在", "屏幕", "上", "并排", "打开", "两三个", "文件", "时能", "同时", "看到", "各个", "文件", "\n", "的", "完整", "行", "。", "PEP", " ", "8", "还", "建议", "注释", "的", "行长", "都", "不", "超过", "72", "字符", "，", "因为", "有些", "工具", "为", "大型项目", "自动", "生成", "文档", "时", "，", "会", "在", "每行", "注释", "开头", "添加", "格式化", "字符", "。", "\n", "PEP", " ", "8", "中", "有关", "行长", "的", "指南", "并非", "不可逾越", "的", "红线", "，", "有些", "小组", "将", "最大", "行长", "设置", "为", "99", "字符", "。", "在", "学习", "期间", "，", "你", "不用", "过多地", "考虑", "代码", "的", "行长", "，", "但", "别忘了", "，", "协作", "编写程序", "时", "，", "大家", "几乎", "都", "遵守"], ["PEP", " ", "8", "指南", "。", "在", "大多数", "编辑器", "中", "，", "都", "可", "设置", "一个", "视觉", "标志", "—", "—", "通常", "是", "一条", "竖线", "，", "让", "你", "知道", "不能", "越过", "的", "界线", "在", "什么", "地方", "。", "\n", "注意", "\n", "注意", " ", "　", "附录", "B", "介绍", "了", "如何", "配置", "文本编辑", "器", "，", "以使", "其", "：", "在", "你", "按", "制表符", "键时", "插入", "四个", "空格", "；", "显示", "一条", "垂直", "参考", "线", "，", "帮助", "你", "遵守", "行长", "不能", "超过", "79", "字符", "的", "约定", "。", "\n", "4.6", ".", "4", "　", "空行", "\n", "　", "空行", "\n", "要", "将", "程序", "的", "不同", "部分", "分开", "，", "可", "使用", "空行", "。", "你", "应该", "使用", "空行", "来", "组织", "程序", "文件", "，", "但", "也", "不能", "滥用", "；", "只要", "按", "本书", "的", "示例", "展示", "的", "那样", "做", "，", "就", "能", "掌握", "其中", "的", "平衡", "。", "例如", "，", "如果", "你", "有", "5", "行", "创建", "列表", "\n", "的", "代码", "，", "还有", "3", "行", "处理", "该", "列表", "的", "代码", "，", "那么", "用", "一个", "空行", "将", "这", "两", "部分", "隔开", "是", "合适", "的", "。", "然而", "，", "你", "不应", "使用", "三四个", "空行", "将", "它们", "隔开", "。", "\n", "空行", "不会", "影响", "代码", "的", "运行", "，", "但会", "影响", "代码", "的", "可读性", "。", "Python", "解释器", "根据", "水平", "缩进", "情况", "来", "解读", "代码", "，", "但", "不", "关心", "垂直", "间距", "。", "\n", "4.6", ".", "5", "　", "其他", "格式", "设置", "指南", "\n", "　", "其他", "格式", "设置", "指南", "\n", "PEP", " ", "8", "还有", "很多", "其他", "的", "格式", "设置", "建议", "，", "但", "这些", "指南针", "对", "的", "程序", "大都", "比", "目前为止", "本书", "提到", "的", "程序", "复杂", "。", "等", "介绍", "更", "复杂", "的", "Python", "结构", "时", "，", "我们", "再", "来", "分享", "相关", "的", "PEP", " ", "8", "指南", "。", "\n", "动手", "试一试", "\n", "动手", "试一试"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "4", "-", "14", " ", "PEP", " ", "8", " ", "：", "请", "访问", "https", ":", "/", "/", "python", ".", "org", "/", "dev", "/", "peps", "/", "pep", "-", "0008", "/", " ", "，", "阅读", "PEP", " ", "8", "格式", "设置", "指南", "。", "当前", "，", "这些", "指南", "适用", "的", "不", "多", "，", "但", "你", "可以", "大致", "浏览", "一下", "。", "\n", "4", "-", "15", " ", "代码", "审核", "\n", "代码", "审核", " ", "：", "从", "本章", "编写", "的", "程序", "中", "选择", "三个", "，", "根据", "PEP", " ", "8", "指南", "对", "它们", "进行", "修改", "。", "\n", "每级", "缩进", "都", "使用", "四个", "空格", "。", "对", "你", "使用", "的", "文本编辑", "器", "进行", "设置", "，", "使", "其", "在", "你", "按", "Tab", "键时", "都", "插入", "四个", "空格", "；", "如果", "你", "还", "没有", "这样", "做", "，", "现在", "就", "去", "做", "吧", "（", "有关", "如何", "设置", "，", "请", "参", "\n", "阅", "附录", "B", "）", "。", "\n", "每行", "都", "不要", "超过", "80", "字符", "。", "对", "你", "使用", "的", "编辑器", "进行", "设置", "，", "使", "其", "在", "第", "80", "个字符", "处", "显示", "一条", "垂直", "参考", "线", "。", "\n", "不要", "在", "程序", "文件", "中过", "多", "地", "使用", "空行", "。", "\n", "4.7", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "高效", "地", "处理", "列表", "中", "的", "元素", "；", "如何", "使用", "for", " ", "循环", "遍历", "列表", "，", "Python", "如何", "根据", "缩", "进来", "确定", "程序", "的", "结构", "以及", "如何", "避免", "一些", "常见", "的", "缩进", "错误", "；", "如何", "创建", "简单", "的", "\n", "数字", "列表", "，", "以及", "可", "对", "数字", "列表", "执行", "的", "一些", "操作", "；", "如何", "通过", "切片", "来", "使用", "列表", "的", "一部分", "和", "复制", "列表", "。", "你", "还", "学习", "了", "元组", "（", "它", "对", "不应", "变化", "的", "值", "提供", "了", "一定", "程度", "的", "保护", "）", "，", "以及", "在", "代码", "变得", "\n", "越来越", "复杂", "时", "如何", "设置", "格式", "，", "使", "其", "易于", "阅读", "。"], ["越来越", "复杂", "时", "如何", "设置", "格式", "，", "使", "其", "易于", "阅读", "。", "\n", "在", "第", "5", "章中", "，", "你", "将", "学习", "如何", "使用", "if", " ", "语句", "在", "不同", "的", "条件", "下", "采取", "不同", "的", "措施", "；", "学习", "如何", "将", "一组", "较", "复杂", "的", "条件", "测试", "组合", "起来", "，", "并", "在", "满足", "特定条件", "时", "采取相应", "的", "措施", "。", "你", "还", "将", "学习", "如何", "在", "\n", "遍历", "列表", "时", "，", "通过", "使用", "if", " ", "语句", "对", "特定", "元素", "采取", "特定", "的", "措施", "。", "\n", "第", "\n", "第", " ", "5", " ", "章", "　", "\n", "章", "　", "if", " ", "语句", "\n", "语句"], ["编程", "时", "经常", "需要", "检查", "一系列", "条件", "，", "并", "据此", "决定", "采取", "什么", "措施", "。", "在", "Python", "中", "，", "if", " ", "语句", "让", "你", "能够", "检查程序", "的", "当前", "状态", "，", "并", "据此", "采取相应", "的", "措施", "。", "\n", "在", "本章", "中", "，", "你", "将", "学习", "条件", "测试", "，", "以", "检查", "感兴趣", "的", "任何", "条件", "。", "你", "将", "学习", "简单", "的", "if", " ", "语句", "，", "以及", "创建", "一系列", "复杂", "的", "if", " ", "语句", "来", "确定", "当前", "到底", "处于", "什么", "情形", "。", "接下来", "，", "你", "将", "把", "\n", "学到", "的", "知识", "应用", "于", "列表", "，", "以", "编写", "for", " ", "循环", "，", "以", "一种", "方式", "处理", "列表", "中", "的", "大多数", "元素", "，", "并", "以", "另", "一种", "不同", "的", "方式", "处理", "包含", "特定", "值", "的", "元素", "。", "\n", "5.1", "　", "一个", "简单", "示例", "\n", "　", "一个", "简单", "示例", "\n", "下面", "是", "一个", "简短", "的", "示例", "，", "演示", "了", "如何", "使用", "if", " ", "语句", "来", "正确", "地", "处理", "特殊", "情形", "。", "假设", "你", "有", "一个", "汽车", "列表", "，", "并", "想", "将", "其中", "每辆", "汽车", "的", "名称", "打印", "出来", "。", "对于", "大多数", "汽车", "，", "都", "应以", "首字母", "大写", "的", "\n", "方式", "打印", "其", "名称", "，", "但", "对于", "汽车", "名", "'", "bmw", "'", " ", "，", "应以", "全", "大写", "的", "方式", "打印", "。", "下面", "的", "代码", "遍历", "一个", "列表", "，", "并", "以", "首字母", "大写", "的", "方式", "打印", "其中", "的", "汽车", "名", "，", "但", "对于", "汽车", "名", "'", "bmw", "'", " ", "，", "以全", "大写", "的", "方", "\n", "式", "打印", "：", "\n", "cars", ".", "py", "\n", " ", " ", "cars", " ", "=", " ", "[", "'", "audi", "'", ",", " ", "'", "bmw", "'", ",", " ", "'", "subaru", "'", ",", " ", "'", "toyota", "'", "]", "\n", " ", " ", "for", " ", "car", " ", "in", " ", "cars", ":", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "car", " ", "=", "=", " ", "'", "bmw", "'", ":"], ["for", " ", "car", " ", "in", " ", "cars", ":", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "car", " ", "=", "=", " ", "'", "bmw", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "car", ".", "upper", "(", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "car", ".", "title", "(", ")", ")", "\n", "这个", "示例", "中", "的", "循环", "首先", "检查", "当前", "的", "汽车", "名", "是否是", "'", "bmw", "'", " ", "（", "见", "❶", "）", "。", "如果", "是", "，", "就", "以全", "大写", "的", "方式", "打印", "它", "；", "否则", "就", "以", "首字母", "大写", "的", "方式", "打印", "：", "\n", "Audi", "\n", "BMW", "\n", "Subaru", "\n", "Toyota", "\n", "这个", "示例", "涵盖", "了", "本章", "将", "介绍", "的", "很多", "概念", "。", "下面", "先", "来", "介绍", "可用", "来", "在", "程序", "中", "检查", "条件", "的", "测试", "。", "\n", "5.2", "　", "条件", "测试", "\n", "　", "条件", "测试", "\n", "每条", "if", " ", "语句", "的", "核心", "都", "是", "一个", "值为", "True", " ", "或", "False", " ", "的", "表达式", "，", "这种", "表达式", "被", "称为", "条件", "测试", "\n", "条件", "测试", " ", "。", "Python", "根据", "条件", "测试", "的", "值", "为", "True", " ", "还是", "False", " ", "来", "决定", "是否", "执行", "if", " ", "语句", "中", "的", "代码", "。", "如果", "\n", "条件", "测试", "的", "值", "为", "True", " ", "，", "Python", "就", "执行", "紧跟", "在", "if", " ", "语句", "后面", "的", "代码", "；", "如果", "为", "False", " ", "，", "Python", "就", "忽略", "这些", "代码", "。", "\n", "5.2", ".", "1", "　", "检查", "是否", "相等", "\n", "　", "检查", "是否", "相等", "\n", "大多数", "条件", "测试", "都", "将", "一个", "变量", "的", "当前", "值同", "特定", "值", "进行", "比较", "。", "最", "简单", "的", "条件", "测试", "检查", "变量", "的", "值", "是否", "与", "特定", "值", "相等", "：", "\n", "❶", " ", ">", ">", ">", " ", "car", " ", "=", " ", "'", "bmw", "'"], ["❶", " ", ">", ">", ">", " ", "car", " ", "=", " ", "'", "bmw", "'", "\n", "❷", " ", ">", ">", ">", " ", "car", " ", "=", "=", " ", "'", "bmw", "'", "\n", " ", " ", "True", "\n", "我们", "首先", "使用", "一个", "等", "号", "将", "car", " ", "的", "值", "设置", "为", "'", "bmw", "'", " ", "（", "见", "❶", "）", "，", "这种", "做法", "你", "已", "见", "过", "很", "多次", "。", "接下来", "，", "使用", "两个", "等", "号", "（", "=", "=", " ", "）", "检查", "car", " ", "的", "值", "是否", "为", "'", "bmw", "'", " ", "。", "这个", "相等", "运算符", "\n", "相等", "运算符", " ", "在", "它", "两边", "\n", "的", "值", "相等", "时", "返回", "True", " ", "，", "否则", "返回", "False", " ", "。", "在", "这个", "示例", "中", "，", "两边", "的", "值", "相等", "，", "因此", "Python", "返回", "True", " ", "。", "\n", "如果", "变量", "car", " ", "的", "值", "不是", "'", "bmw", "'", " ", "，", "上述", "测试", "将", "返回", "False", " ", "：", "\n", "❶", " ", ">", ">", ">", " ", "car", " ", "=", " ", "'", "audi", "'"], ["❷", " ", ">", ">", ">", " ", "car", " ", "=", "=", " ", "'", "bmw", "'", "\n", " ", " ", "False", "\n", "一个", "等", "号", "是", "陈述", "；", "对于", "❶", "处", "的", "代码", "，", "可", "解读", "为", "“", "将", "变量", "car", " ", "的", "值", "设置", "为", "'", "audi", "'", " ", "”", "。", "两个", "等", "号", "是", "发问", "；", "对于", "❷", "处", "的", "代码", "，", "可", "解读", "为", "“", "变量", "car", " ", "的", "值", "是", "'", "bmw", "'", " ", "吗", "？", "”", "。", "大多数", "编程语言", "\n", "使用", "等", "号", "的", "方式", "都", "与", "这里", "演示", "的", "相同", "。", "\n", "5.2", ".", "2", "　", "检查", "是否", "相等", "时", "不", "考虑", "大小写", "\n", "　", "检查", "是否", "相等", "时", "不", "考虑", "大小写", "\n", "在", "Python", "中", "检查", "是否", "相等", "时", "区分", "大小写", "，", "例如", "，", "两个", "大小写", "不同", "的", "值会", "被", "视为", "不", "相等", "：", "\n", ">", ">", ">", " ", "car", " ", "=", " ", "'", "Audi", "'", "\n", ">", ">", ">", " ", "car", " ", "=", "=", " ", "'", "audi", "'", "\n", "False", "\n", "如果", "大小写", "很", "重要", "，", "这种", "行为", "有", "其", "优点", "。", "但", "如果", "大小写", "无关紧要", "，", "而", "只", "想", "检查", "变量", "的", "值", "，", "可", "将", "变量", "的", "值", "转换", "为", "小写", "，", "再", "进行", "比较", "：", "\n", ">", ">", ">", " ", "car", " ", "=", " ", "'", "Audi", "'", "\n", ">", ">", ">", " ", "car", ".", "lower", "(", ")", " ", "=", "=", " ", "'", "audi", "'", "\n", "True", "\n", "无论", "值", "'", "Audi", "'", " ", "的", "大小写", "如何", "，", "上述", "测试", "都", "将", "返回", "True", " ", "，", "因为", "该", "测试", "不", "区分", "大小写", "。", "函数", "lower", "(", ")", " ", "不会", "修改", "存储", "在", "变量", "car", " ", "中", "的", "值", "，", "因此", "进行", "这样", "的", "比较", "时", "不会", "影响", "原来", "的", "变", "\n", "量", "：", "\n", "❸", " ", ">", ">", ">", " ", "car", " ", "=", " ", "'", "Audi", "'", "\n", "❷", " ", ">", ">", ">", " ", "car", ".", "lower", "(", ")", " ", "=", "=", " ", "'", "audi", "'", "\n", " ", " ", "True"], ["❷", " ", ">", ">", ">", " ", "car", ".", "lower", "(", ")", " ", "=", "=", " ", "'", "audi", "'", "\n", " ", " ", "True", "\n", "❸", " ", ">", ">", ">", " ", "car", "\n", " ", " ", "'", "Audi", "'", "\n", "在", "❶", "处", "，", "我们", "将", "首字母", "大写", "的", "字符串", "'", "Audi", "'", " ", "存储", "在", "变量", "car", " ", "中", "；", "在", "❷", "处", "，", "我们", "获取", "变量", "car", " ", "的", "值", "并", "将", "其", "转换", "为", "小写", "，", "再", "将", "结果", "与", "字符串", "'", "audi", "'", " ", "进行", "比较", "。", "这", "两个", "字符串", "相", "\n", "同", "，", "因此", "Python", "返回", "True", " ", "。", "从", "❸", "处", "的", "输出", "可知", "，", "这个", "条件", "测试", "并", "没有", "影响", "存储", "在", "变量", "car", " ", "中", "的", "值", "。", "\n", "网站", "采用", "类似", "的", "方式", "让", "用户", "输入", "的", "数据", "符合", "特定", "的", "格式", "。", "例如", "，", "网站", "可能", "使用", "类似", "的", "测试", "来", "确保", "用户名", "是", "独一无二", "的", "，", "而", "并非", "只是", "与", "另", "一个", "用户名", "的", "大小写", "不同", "。", "用户", "提交", "新", "的", "\n", "用户名", "时", "，", "将", "把", "它", "转换", "为", "小写", "，", "并", "与", "所有", "既有", "用户名", "的", "小写", "版本", "进行", "比较", "。", "执行", "这种", "检查", "时", "，", "如果", "已经", "有", "用户名", "'", "john", "'", " ", "（", "不管", "大小写", "如何", "）", "，", "则", "用户", "提交", "用户名", "'", "John", "'", " ", "时", "将", "\n", "遭到", "拒绝", "。", "\n", "5.2", ".", "3", "　", "检查", "是否", "不", "相等", "\n", "　", "检查", "是否", "不", "相等", "\n", "要", "判断", "两个", "值", "是否", "不", "等", "，", "可", "结合", "使用", "惊叹号", "和", "等", "号", "（", "!", "=", " ", "）", "，", "其中", "的", "惊叹号", "表示", "不", "\n", "不", " ", "，", "在", "很多", "编程语言", "中", "都", "如此", "。"], ["不", " ", "，", "在", "很多", "编程语言", "中", "都", "如此", "。", "\n", "下面", "再", "使用", "一条", "if", " ", "语句", "来", "演示", "如何", "使用", "不", "等", "运算符", "。", "我们", "将", "把", "要求", "的", "比萨", "配料", "存储", "在", "一个", "变量", "中", "，", "再", "打印", "一条", "消息", "，", "指出", "顾客", "要求", "的", "配料", "是否是", "意式", "小", "银鱼", "（", "anchovies", "）", "：", "\n", "toppings", ".", "py", "\n", " ", " ", "requested", "_", "topping", " ", "=", " ", "'", "mushrooms", "'", "\n", "❶", " ", "if", " ", "requested", "_", "topping", " ", "!", "=", " ", "'", "anchovies", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Hold", " ", "the", " ", "anchovies", "!", "\"", ")", "\n", "❶", "处", "的", "代码", "行将", "requested", "_", "topping", " ", "的", "值", "与", "'", "anchovies", "'", " ", "进行", "比较", "，", "如果", "它们", "不", "相等", "，", "Python", "将", "返回", "True", " ", "，", "进而", "执行", "紧跟", "在", "if", " ", "语句", "后面", "的", "代码", "；", "如果", "这", "两个", "值相", "\n", "等", "，", "Python", "将", "返回", "False", " ", "，", "因此", "不", "执行", "紧跟", "在", "if", " ", "语句", "后面", "的", "代码", "。", "\n", "由于", "requested", "_", "topping", " ", "的", "值", "不是", "'", "anchovies", "'", " ", "，", "因此", "执行", "print", " ", "语句", "：", "\n", "Hold", " ", "the", " ", "anchovies", "!", "\n", "你", "编写", "的", "大多数", "条件", "表达式", "都", "检查", "两个", "值", "是否", "相等", "，", "但", "有时候", "检查", "两个", "值", "是否", "不", "等", "的", "效率", "更高", "。", "\n", "5.2", ".", "4", "　", "比较", "数字", "\n", "　", "比较", "数字", "\n", "检查", "数值", "非常简单", "，", "例如", "，", "下面", "的", "代码", "检查", "一个", "人", "是否是", "18", "岁", "："], ["5.2", ".", "4", "　", "比较", "数字", "\n", "　", "比较", "数字", "\n", "检查", "数值", "非常简单", "，", "例如", "，", "下面", "的", "代码", "检查", "一个", "人", "是否是", "18", "岁", "：", "\n", ">", ">", ">", " ", "age", " ", "=", " ", "18", "\n", ">", ">", ">", " ", "age", " ", "=", "=", " ", "18", "\n", "True", "\n", "你", "还", "可以", "检查", "两个", "数字", "是否", "不", "等", "，", "例如", "，", "下面", "的", "代码", "在", "提供", "的", "答案", "不", "正确", "时", "打印", "一条", "消息", "：", "\n", "magic", "_", "number", ".", "py", "\n", " ", " ", "answer", " ", "=", " ", "17", "\n", "❶", " ", "if", " ", "answer", " ", "!", "=", " ", "42", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "That", " ", "is", " ", "not", " ", "the", " ", "correct", " ", "answer", ".", " ", "Please", " ", "try", " ", "again", "!", "\"", ")"], ["answer", " ", "（", "17", " ", "）", "不是", "42", " ", "，", "❶", "处", "的", "条件", "得到", "满足", "，", "因此", "缩进", "的", "代码", "块", "得以", "执行", "：", "\n", "That", " ", "is", " ", "not", " ", "the", " ", "correct", " ", "answer", ".", " ", "Please", " ", "try", " ", "again", "!", "\n", "条件", "语句", "中", "可", "包含", "各种", "数学", "比较", "，", "如", "小于", "、", "小于", "等于", "、", "大于", "、", "大于", "等于", "：", "\n", ">", ">", ">", " ", "age", " ", "=", " ", "19", "\n", ">", ">", ">", " ", "age", " ", "<", " ", "21", "\n", "True", "\n", ">", ">", ">", " ", "age", " ", "<", "=", " ", "21", "\n", "True", "\n", ">", ">", ">", " ", "age", " ", ">", " ", "21", "\n", "False", "\n", ">", ">", ">", " ", "age", " ", ">", "=", " ", "21", "\n", "False", "\n", "在", "if", " ", "语句", "中", "可", "使用", "各种", "数学", "比较", "，", "这", "让", "你", "能够", "直接", "检查", "关心", "的", "条件", "。", "\n", "5.2", ".", "5", "　", "检查", "多个", "条件", "\n", "　", "检查", "多个", "条件", "\n", "你", "可能", "想", "同时", "检查", "多个", "条件", "，", "例如", "，", "有时候", "你", "需要", "在", "两个", "条件", "都", "为", "True", " ", "时才", "执行", "相应", "的", "操作", "，", "而", "有时候", "你", "只", "要求", "一个", "条件", "为", "True", " ", "时", "就", "执行", "相应", "的", "操作", "。", "在", "这些", "情况", "下", "，", "关键", "\n", "字", "and", " ", "和", "or", " ", "可助", "你", "一臂之力", "。", "\n", "1", ".", " ", "使用", "\n", "使用", "and", " ", "检查", "多个", "条件", "\n", "检查", "多个", "条件", "\n", "要", "检查", "是否", "两个", "条件", "都", "为", "True", " ", "，", "可", "使用", "关键字", "and", " ", "将", "两个", "条件", "测试", "合而为一", "；", "如果", "每个", "测试", "都", "通过", "了", "，", "整个", "表达式", "就", "为", "True", " ", "；", "如果", "至少", "有", "一个", "测试", "没有", "通过", "，", "整个", "表达式", "就", "\n", "为", "False", " ", "。"], ["为", "False", " ", "。", "\n", "例如", "，", "要", "检查", "是否", "两个", "人", "都", "不", "小于", "21", "岁", "，", "可", "使用", "下面", "的", "测试", "：", "\n", "❶", " ", ">", ">", ">", " ", "age", "_", "0", " ", "=", " ", "22", "\n", " ", " ", ">", ">", ">", " ", "age", "_", "1", " ", "=", " ", "18", "\n", "❷", " ", ">", ">", ">", " ", "age", "_", "0", " ", ">", "=", " ", "21", " ", "and", " ", "age", "_", "1", " ", ">", "=", " ", "21", "\n", " ", " ", "False", "\n", "❸", " ", ">", ">", ">", " ", "age", "_", "1", " ", "=", " ", "22", "\n", " ", " ", ">", ">", ">", " ", "age", "_", "0", " ", ">", "=", " ", "21", " ", "and", " ", "age", "_", "1", " ", ">", "=", " ", "21", "\n", " ", " ", "True", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "两个", "用于", "存储", "年龄", "的", "变量", "：", "age", "_", "0", " ", "和", "age", "_", "1", " ", "。", "在", "❷", "处", "，", "我们", "检查", "这", "两个", "变量", "是否", "都", "大于", "或", "等于", "21", "；", "左边", "的", "测试通过", "了", "，", "但", "右边", "的", "测试", "没有", "通过", "，", "因此", "整个", "\n", "条件", "表达式", "的", "结果", "为", "False", " ", "。", "在", "❸", "处", "，", "我们", "将", "age", "_", "1", " ", "改为", "22", "，", "这样", "age", "_", "1", " ", "的", "值", "大于", "21", "，", "因此", "两个", "测试", "都", "通过", "了", "，", "导致", "整个", "条件", "表达式", "的", "结果", "为", "True", " ", "。", "\n", "为", "改善", "可读性", "，", "可", "将", "每个", "测试", "都", "分别", "放在", "一对", "括号", "内", "，", "但", "并非", "必须", "这样", "做", "。", "如果", "你", "使用", "括号", "，", "测试", "将", "类似", "于", "下面", "这样", "：", "\n", "(", "age", "_", "0", " ", ">", "=", " ", "21", ")", " ", "and", " ", "(", "age", "_", "1", " ", ">", "=", " ", "21", ")", "\n", "2", ".", " ", "使用", "\n", "使用", "or", " ", "检查", "多个", "条件", "\n", "检查", "多个", "条件"], ["2", ".", " ", "使用", "\n", "使用", "or", " ", "检查", "多个", "条件", "\n", "检查", "多个", "条件", "\n", "关键字", "or", " ", "也", "能够", "让", "你", "检查", "多个", "条件", "，", "但", "只要", "至少", "有", "一个", "条件", "满足", "，", "就", "能", "通过", "整个", "测试", "。", "仅当", "两个", "测试", "都", "没有", "通过", "时", "，", "使用", "or", " ", "的", "表达式", "才", "为", "False", " ", "。", "\n", "下面", "再次", "检查", "两个", "人", "的", "年龄", "，", "但", "检查", "的", "条件", "是", "至少", "有", "一个", "人", "的", "年龄", "不", "小于", "21", "岁", "：", "\n", "❶", " ", ">", ">", ">", " ", "age", "_", "0", " ", "=", " ", "22", "\n", " ", " ", ">", ">", ">", " ", "age", "_", "1", " ", "=", " ", "18", "\n", "❷", " ", ">", ">", ">", " ", "age", "_", "0", " ", ">", "=", " ", "21", " ", "or", " ", "age", "_", "1", " ", ">", "=", " ", "21", "\n", " ", " ", "True", "\n", "❶", " ", ">", ">", ">", " ", "age", "_", "0", " ", "=", " ", "18", "\n", " ", " ", ">", ">", ">", " ", "age", "_", "0", " ", ">", "=", " ", "21", " ", "or", " ", "age", "_", "1", " ", ">", "=", " ", "21", "\n", " ", " ", "False", "\n", "同样", "，", "我们", "首先", "定义", "了", "两个", "用于", "存储", "年龄", "的", "变量", "（", "见", "❶", "）", "。", "由于", "❷", "处", "对", "age", "_", "0", " ", "的", "测试通过", "了", "，", "因此", "整个", "表达式", "的", "结果", "为", "True", " ", "。", "接下来", "，", "我们", "将", "age", "_", "0", " ", "减小", "为", "18", "；", "在", "❸", "处", "的", "测试", "\n", "中", "，", "两个", "测试", "都", "没有", "通过", "，", "因此", "整个", "表达式", "的", "结果", "为", "False", " ", "。", "\n", "5.2", ".", "6", "　", "检查", "特定", "值", "是否", "包含", "在", "列表", "中", "\n", "　", "检查", "特定", "值", "是否", "包含", "在", "列表", "中", "\n", "有时候", "，", "执行", "操作前", "必须", "检查", "列表", "是否", "包含", "特定", "的", "值", "。", "例如", "，", "结束", "用户", "的", "注册", "过程", "前", "，", "可能", "需要", "检查", "他", "提供", "的", "用户名", "是否", "已", "包含", "在", "用户名", "列表", "中", "。", "在", "地图", "程序", "中", "，", "可能", "需要", "检查"], ["用户", "提交", "的", "位置", "是否", "包含", "在", "已知", "位置", "列表", "中", "。", "\n", "要", "判断", "特定", "的", "值", "是否", "已", "包含", "在", "列表", "中", "，", "可", "使用", "关键字", "in", " ", "。", "来看", "你", "可能", "为", "比萨", "店", "编写", "的", "一些", "代码", "；", "这些", "代码", "首先", "创建", "一个", "列表", "，", "其中", "包含", "用户", "点", "的", "比萨", "配料", "，", "然后", "检查", "特定", "的", "配料", "\n", "是否", "包含", "在", "该", "列表", "中", "。", "\n", " ", " ", ">", ">", ">", " ", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "onions", "'", ",", " ", "'", "pineapple", "'", "]", "\n", "❶", " ", ">", ">", ">", " ", "'", "mushrooms", "'", " ", "in", " ", "requested", "_", "toppings", "\n", " ", " ", "True", "\n", "❷", " ", ">", ">", ">", " ", "'", "pepperoni", "'", " ", "in", " ", "requested", "_", "toppings", "\n", " ", " ", "False", "\n", "在", "❶", "处", "和", "❷", "处", "，", "关键字", "in", " ", "让", "Python", "检查", "列表", "requested", "_", "toppings", " ", "是否", "包含", "'", "mushrooms", "'", " ", "和", "'", "pepperoni", "'", " ", "。", "这种", "技术", "很", "有用", "，", "它", "让", "你", "能够", "在", "创建", "一个", "列表", "后", "，", "轻松", "地检", "\n", "查", "其中", "是否", "包含", "特定", "的", "值", "。", "\n", "5.2", ".", "7", "　", "检查", "特定", "值", "是否", "不", "包含", "在", "列表", "中", "\n", "　", "检查", "特定", "值", "是否", "不", "包含", "在", "列表", "中", "\n", "还", "有些", "时候", "，", "确定", "特定", "的", "值", "未", "包含", "在", "列表", "中", "很", "重要", "；", "在", "这种", "情况", "下", "，", "可", "使用", "关键字", "not", " ", "in", " ", "。", "例如", "，", "如果", "有", "一个", "列表", "，", "其中", "包含", "被", "禁止", "在", "论坛", "上", "发表", "评论", "的", "用户", "，", "就", "可", "在", "允许", "用"], ["户", "提交", "评论", "前", "检查", "他", "是否", "被", "禁言", "："], ["banned", "_", "users", ".", "py", "\n", " ", " ", "banned", "_", "users", " ", "=", " ", "[", "'", "andrew", "'", ",", " ", "'", "carolina", "'", ",", " ", "'", "david", "'", "]", "\n", " ", " ", "user", " ", "=", " ", "'", "marie", "'", "\n", "❶", " ", "if", " ", "user", " ", "not", " ", "in", " ", "banned", "_", "users", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "user", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "you", " ", "can", " ", "post", " ", "a", " ", "response", " ", "if", " ", "you", " ", "wish", ".", "\"", ")", "\n", "❶", "处", "的", "代码", "行", "明白", "易懂", "：", "如果", "user", " ", "的", "值", "未", "包含", "在", "列表", "banned", "_", "users", " ", "中", "，", "Python", "将", "返回", "True", " ", "，", "进而", "执行", "缩进", "的", "代码", "行", "。", "\n", "用户", "'", "marie", "'", " ", "未", "包含", "在", "列表", "banned", "_", "users", " ", "中", "，", "因此", "她", "将", "看到", "一条", "邀请", "她", "发表", "评论", "的", "消息", "：", "\n", "Marie", ",", " ", "you", " ", "can", " ", "post", " ", "a", " ", "response", " ", "if", " ", "you", " ", "wish", ".", "\n", "5.2", ".", "8", "　", "布尔", "表达式", "\n", "　", "布尔", "表达式", "\n", "随着", "你", "对", "编程", "的", "了解", "越来越", "深入", "，", "将", "遇到", "术语", "布尔", "表达式", "\n", "布尔", "表达式", " ", "，", "它", "不过", "是", "条件", "测试", "的", "别名", "。", "与", "条件", "表达式", "一样", "，", "布尔", "表达式", "的", "结果", "要么", "为", "True", " ", "，", "要么", "为", "False", " ", "。", "\n", "布尔值", "通常", "用于", "记录", "条件", "，", "如", "游戏", "是否", "正在", "运行", "，", "或", "用户", "是否", "可以", "编辑", "网站", "的", "特定", "内容", "：", "\n", "game", "_", "active", " ", "=", " ", "True"], ["game", "_", "active", " ", "=", " ", "True", "\n", "can", "_", "edit", " ", "=", " ", "False", "\n", "在", "跟踪", "程序", "状态", "或", "程序", "中", "重要", "的", "条件", "方面", "，", "布尔值", "提供", "了", "一种", "高效", "的", "方式", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "5", "-", "1", " ", "条件", "测试", "\n", "条件", "测试", " ", "：", "编写", "一系列", "条件", "测试", "；", "将", "每个", "测试", "以及", "你", "对", "其", "结果", "的", "预测", "和", "实际", "结果", "都", "打印", "出来", "。", "你", "编写", "的", "代码", "应", "类似", "于", "下面", "这样", "：", "\n", "car", " ", "=", " ", "'", "subaru", "'", "\n", "print", "(", "\"", "Is", " ", "car", " ", "=", "=", " ", "'", "subaru", "'", "?", " ", "I", " ", "predict", " ", "True", ".", "\"", ")", "\n", "print", "(", "car", " ", "=", "=", " ", "'", "subaru", "'", ")", "\n", " ", " ", " ", "　", "\n", "print", "(", "\"", "\\", "nIs", " ", "car", " ", "=", "=", " ", "'", "audi", "'", "?", " ", "I", " ", "predict", " ", "False", ".", "\"", ")", "\n", "print", "(", "car", " ", "=", "=", " ", "'", "audi", "'", ")", "\n", "详细", "研究", "实际", "结果", "，", "直到", "你", "明白", "了", "它", "为何", "为", "True", " ", "或", "False", " ", "。", "\n", "创建", "至少", "10", "个", "测试", "，", "且", "其中", "结果", "分别", "为", "True", " ", "和", "False", " ", "的", "测试", "都", "至少", "有", "5", "个", "。", "\n", "5", "-", "2", " ", "更", "多", "的", "条件", "测试", "\n", "更", "多", "的", "条件", "测试", " ", "：", "你", "并非", "只能", "创建", "10", "个", "测试", "。", "如果", "你", "想", "尝试", "做", "更", "多", "的", "比较", "，", "可", "再", "编写", "一些", "测试", "，", "并", "将", "它们", "加入", "到", "conditional", "_", "tests", ".", "py", "中", "。", "对于", "下面", "列出", "的", "各种", "测", "\n", "试", "，", "至少", "编写", "一个", "结果", "为", "True", " ", "和", "False", " ", "的", "测试", "。"], ["试", "，", "至少", "编写", "一个", "结果", "为", "True", " ", "和", "False", " ", "的", "测试", "。", "\n", "检查", "两个", "字符串", "相等", "和", "不", "等", "。", "\n", "使用", "函数", "lower", "(", ")", " ", "的", "测试", "。", "\n", "检查", "两个", "数字", "相等", "、", "不", "等", "、", "大于", "、", "小于", "、", "大于", "等于", "和", "小于", "等于", "。", "\n", "使用", "关键字", "and", " ", "和", "or", " ", "的", "测试", "。", "\n", "测试", "特定", "的", "值", "是否", "包含", "在", "列表", "中", "。", "\n", "测试", "特定", "的", "值", "是否", "未", "包含", "在", "列表", "中", "。", "\n", "5.3", "　", "\n", "　", "if", " ", "语句", "\n", "语句", "\n", "理解", "条件", "测试", "后", "，", "就", "可以", "开始", "编写", "if", " ", "语句", "了", "。", "if", " ", "语句", "有", "很", "多种", "，", "选择", "使用", "哪", "种", "取决于", "要", "测试", "的", "条件", "数", "。", "前面", "讨论", "条件", "测试", "时", "，", "列举", "了", "多个", "if", " ", "语句", "示例", "，", "下面", "更", "深入", "地", "讨论", "这个", "\n", "主题", "。", "\n", "5.3", ".", "1", "　", "简单", "的", "\n", "　", "简单", "的", "if", " ", "语句", "\n", "语句", "\n", "最", "简单", "的", "if", " ", "语句", "只有", "一个", "测试", "和", "一个", "操作", "：", "\n", "if", " ", "conditional", "_", "test", ":", "\n", " ", " ", " ", " ", " ", "do", " ", "something", "\n", "在", "第", "1", "行中", "，", "可", "包含", "任何", "条件", "测试", "，", "而", "在", "紧跟", "在", "测试", "后面", "的", "缩进", "代码", "块", "中", "，", "可", "执行", "任何", "操作", "。", "如果", "条件", "测试", "的", "结果", "为", "True", " ", "，", "Python", "就", "会", "执行", "紧跟", "在", "if", " ", "语句", "后面", "的", "代码", "；", "否则", "\n", "Python", "将", "忽略", "这些", "代码", "。", "\n", "假设", "有", "一个", "表示", "某人", "年龄", "的", "变量", "，", "而", "你", "想", "知道", "这个", "人", "是否", "够", "投票", "的", "年龄", "，", "可", "使用", "如下", "代码", "：", "\n", "voting", ".", "py", "\n", " ", " ", "age", " ", "=", " ", "19", "\n", "❶", " ", "if", " ", "age", " ", ">", "=", " ", "18", ":"], ["voting", ".", "py", "\n", " ", " ", "age", " ", "=", " ", "19", "\n", "❶", " ", "if", " ", "age", " ", ">", "=", " ", "18", ":", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "are", " ", "old", " ", "enough", " ", "to", " ", "vote", "!", "\"", ")", "\n", "在", "❶", "处", "，", "Python", "检查", "变量", "age", " ", "的", "值", "是否", "大于", "或", "等于", "18", "；", "答案", "是", "肯定", "的", "，", "因此", "Python", "执行", "❷", "处", "缩进", "的", "print", " ", "语句", "：", "\n", "You", " ", "are", " ", "old", " ", "enough", " ", "to", " ", "vote", "!"], ["在", "if", " ", "语句", "中", "，", "缩进", "的", "作用", "与", "for", " ", "循环", "中", "相同", "。", "如果", "测试通过", "了", "，", "将", "执行", "if", " ", "语句", "后面", "所有", "缩进", "的", "代码", "行", "，", "否则", "将", "忽略", "它们", "。", "\n", "在", "紧跟", "在", "if", " ", "语句", "后面", "的", "代码", "块", "中", "，", "可", "根据", "需要", "包含", "任意", "数量", "的", "代码", "行", "。", "下面", "在", "一个", "人够", "投票", "的", "年龄", "时", "再", "打印", "一行", "输出", "，", "问", "他", "是否", "登记", "了", "：", "\n", "age", " ", "=", " ", "19", "\n", "if", " ", "age", " ", ">", "=", " ", "18", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "are", " ", "old", " ", "enough", " ", "to", " ", "vote", "!", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "Have", " ", "you", " ", "registered", " ", "to", " ", "vote", " ", "yet", "?", "\"", ")", "\n", "条件", "测试通过", "了", "，", "而", "两条", "print", " ", "语句", "都", "缩进", "了", "，", "因此", "它们", "都", "将", "执行", "：", "\n", "You", " ", "are", " ", "old", " ", "enough", " ", "to", " ", "vote", "!", "\n", "Have", " ", "you", " ", "registered", " ", "to", " ", "vote", " ", "yet", "?", "\n", "如果", "age", " ", "的", "值", "小于", "18", "，", "这个", "程序", "将", "不会", "有", "任何", "输出", "。", "\n", "5.3", ".", "2", "　", "\n", "　", "if", "-", "else", " ", "语句", "\n", "语句", "\n", "经常", "需要", "在", "条件", "测试通过", "了", "时", "执行", "一个", "操作", "，", "并", "在", "没有", "通过", "时", "执行", "另", "一个", "操作", "；", "在", "这种", "情况", "下", "，", "可", "使用", "Python", "提供", "的", "if", "-", "else", " ", "语句", "。", "if", "-", "else", " ", "语句", "块", "类似", "于", "简单", "的", "if", " ", "语句", "，", "但", "\n", "其中", "的", "else", " ", "语句", "让", "你", "能够", "指定", "条件", "测试", "未", "通过", "时要", "执行", "的", "操作", "。"], ["其中", "的", "else", " ", "语句", "让", "你", "能够", "指定", "条件", "测试", "未", "通过", "时要", "执行", "的", "操作", "。", "\n", "下面", "的", "代码", "在", "一个", "人够", "投票", "的", "年龄", "时", "显示", "与", "前面", "相同", "的", "消息", "，", "同时", "在", "这个", "人", "不够", "投票", "的", "年龄", "时", "也", "显示", "一条", "消息", "：", "\n", " ", " ", "age", " ", "=", " ", "17", "\n", "❶", " ", "if", " ", "age", " ", ">", "=", " ", "18", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "are", " ", "old", " ", "enough", " ", "to", " ", "vote", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Have", " ", "you", " ", "registered", " ", "to", " ", "vote", " ", "yet", "?", "\"", ")", "\n", "❷", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Sorry", ",", " ", "you", " ", "are", " ", "too", " ", "young", " ", "to", " ", "vote", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Please", " ", "register", " ", "to", " ", "vote", " ", "as", " ", "soon", " ", "as", " ", "you", " ", "turn", " ", "18", "!", "\"", ")", "\n", "如果", "❶", "处", "的", "条件", "测试通过", "了", "，", "就", "执行", "第一个", "缩进", "的", "print", " ", "语句", "块", "；", "如果", "测试", "结果", "为", "False", " ", "，", "就", "执行", "❷", "处", "的", "else", " ", "代码", "块", "。", "这次", "age", " ", "小于", "18", "，", "条件", "测试", "未", "通过", "，", "因此", "执行", "else", " ", "代", "\n", "码块", "中", "的", "代码", "：", "\n", "Sorry", ",", " ", "you", " ", "are", " ", "too", " ", "young", " ", "to", " ", "vote", ".", "\n", "Please", " ", "register", " ", "to", " ", "vote", " ", "as", " ", "soon", " ", "as", " ", "you", " ", "turn", " ", "18", "!"], ["Please", " ", "register", " ", "to", " ", "vote", " ", "as", " ", "soon", " ", "as", " ", "you", " ", "turn", " ", "18", "!", "\n", "上述", "代码", "之所以", "可行", "，", "是因为", "只", "存在", "两种", "情形", "：", "要么", "够", "投票", "的", "年龄", "，", "要么", "不够", "。", "if", "-", "else", " ", "结构", "非常适合", "用于", "要", "让", "Python", "执行", "两种", "操作", "之一", "的", "情形", "。", "在", "这种", "简单", "的", "if", "-", "else", " ", "结构", "\n", "中", "，", "总是", "会", "执行", "两个", "操作", "中", "的", "一个", "。", "\n", "5.3", ".", "3", "　", "\n", "　", "if", "-", "elif", "-", "else", " ", "结构", "\n", "结构", "\n", "经常", "需要", "检查", "超过", "两个", "的", "情形", "，", "为此", "可", "使用", "Python", "提供", "的", "if", "-", "elif", "-", "else", " ", "结构", "。", "Python", "只", "执行", "if", "-", "elif", "-", "else", " ", "结构", "中", "的", "一个", "代码", "块", "，", "它", "依次", "检查", "每个", "条件", "测试", "，", "直到", "遇到", "通过", "\n", "了", "的", "条件", "测试", "。", "测试通过", "后", "，", "Python", "将", "执行", "紧跟", "在", "它", "后面", "的", "代码", "，", "并", "跳", "过", "余下", "的", "测试", "。", "\n", "在", "现实", "世界", "中", "，", "很多", "情况", "下", "需要", "考虑", "的", "情形", "都", "超过", "两个", "。", "例如", "，", "来看", "一个", "根据", "年龄段", "收费", "的", "游乐场", "：", "\n", "4", "岁", "以下", "免费", "；", "\n", "4", "~", "18", "岁", "收费", "5", "美元", "；", "\n", "18", "岁", "（", "含", "）", "以上", "收费", "10", "美元", "。", "\n", "如果", "只", "使用", "一条", "if", " ", "语句", "，", "如何", "确定", "门票价格", "呢", "？", "下面", "的", "代码", "确定", "一个", "人", "所属", "的", "年龄段", "，", "并打印", "一条", "包含", "门票价格", "的", "消息", "：", "\n", "amusement", "_", "park", ".", "py", "\n", " ", "age", " ", "=", " ", "12", "\n", "❶", " ", "if", " ", "age", " ", "<", " ", "4", ":"], ["amusement", "_", "park", ".", "py", "\n", " ", "age", " ", "=", " ", "12", "\n", "❶", " ", "if", " ", "age", " ", "<", " ", "4", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "0", ".", "\"", ")", "\n", "❷", " ", "elif", " ", "age", " ", "<", " ", "18", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "5", ".", "\"", ")", "\n", "❸", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "10", ".", "\"", ")", "\n", "❶", "处", "的", "if", " ", "测试", "检查", "一个", "人", "是否", "不满", "4", "岁", "，", "如果", "是", "这样", "，", "Python", "就", "打印", "一条", "合适", "的", "消息", "，", "并", "跳", "过", "余下", "的", "测试", "。", "❷", "处", "的", "elif", " ", "代码", "行", "其实", "是", "另", "一个", "if", " ", "测试", "，", "它", "仅", "在", "前面", "的", "测试", "未", "通过", "\n", "时才", "会", "运行", "。", "在", "这里", "，", "我们", "知道", "这个", "人", "不", "小于", "4", "岁", "，", "因为", "第一个", "测试", "未", "通过", "。", "如果", "这个", "人", "未满", "18", "岁", "，", "Python", "将", "打印", "相应", "的", "消息", "，", "并", "跳", "过", "else", " ", "代码", "块", "。", "如果", "if", " ", "测试", "和", "elif", " ", "测试", "都", "\n", "未", "通过", "，", "Python", "将", "运行", "❸", "处", "else", " ", "代码", "块", "中", "的", "代码", "。", "\n", "在", "这个", "示例", "中", "，", "❶", "处", "测试", "的", "结果", "为", "False", " ", "，", "因此", "不", "执行", "其", "代码", "块", "。", "然而", "，", "第二个", "测试", "的", "结果", "为", "True", " ", "（", "12", "小于", "18", "）", "，", "因此", "将", "执行", "其", "代码", "块", "。", "输出", "为", "一个", "句子", "，", "向", "用户", "指出", "了", "门票", "\n", "价格", "："], ["价格", "：", "\n", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "5", ".", "\n", "只要", "年龄", "超过", "17", "岁", "，", "前", "两个", "测试", "就", "都", "不能", "通过", "。", "在", "这种", "情况", "下", "，", "将", "执行", "else", " ", "代码", "块", "，", "指出", "门票价格", "为", "10", "美元", "。", "\n", "为", "让", "代码", "更", "简洁", "，", "可不", "在", "if", "-", "elif", "-", "else", " ", "代码", "块", "中", "打印", "门票价格", "，", "而", "只", "在", "其中", "设置", "门票价格", "，", "并", "在", "它", "后面", "添加", "一条", "简单", "的", "print", " ", "语句", "："], ["age", " ", "=", " ", "12", "\n", " ", " ", "if", " ", "age", " ", "<", " ", "4", ":", "\n", "❶", " ", " ", " ", " ", " ", "price", " ", "=", " ", "0", "\n", " ", " ", "elif", " ", "age", " ", "<", " ", "18", ":", "\n", "❷", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5", "\n", " ", " ", "else", ":", "\n", "❸", " ", " ", " ", " ", " ", "price", " ", "=", " ", "10", "\n", "❹", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "\"", " ", "+", " ", "str", "(", "price", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❶", "处", "、", "❷", "处", "和", "❸", "处", "的", "代码", "行像", "前", "一个", "示例", "那样", "，", "根据", "人", "的", "年龄", "设置", "变量", "price", " ", "的", "值", "。", "在", "if", "-", "elif", "-", "else", " ", "结构", "中", "设置", "price", " ", "的", "值", "后", "，", "一条", "未", "缩进", "的", "print", " ", "语句", "❹", "会", "根据", "这个", "变", "\n", "量", "的", "值", "打印", "一条", "消息", "，", "指出", "门票", "的", "价格", "。", "\n", "这些", "代码", "的", "输出", "与", "前", "一个", "示例", "相同", "，", "但", "if", "-", "elif", "-", "else", " ", "结构", "的", "作用", "更", "小", "，", "它", "只", "确定", "门票价格", "，", "而", "不是", "在", "确定", "门票价格", "的", "同时", "打印", "一条", "消息", "。", "除", "效率", "更高外", "，", "这些", "修订", "后", "的", "代码", "\n", "还", "更", "容易", "修改", "：", "要", "调整", "输出", "消息", "的", "内容", "，", "只", "需", "修改", "一条", "而", "不是", "三条", "print", " ", "语句", "。", "\n", "5.3", ".", "4", "　", "使用", "多个", "\n", "　", "使用", "多个", "elif", " ", "代码", "块", "\n", "代码", "块", "\n", "可", "根据", "需要", "使用", "任意", "数量", "的", "elif", " ", "代码", "块", "，", "例如", "，", "假设", "前述", "游乐场", "要", "给", "老年人", "打折", "，", "可", "再", "添加", "一个", "条件", "测试", "，", "判断", "顾客", "是否", "符合", "打折", "条件", "。", "下面", "假设", "对于", "65", "岁", "（", "含", "）", "以上", "的", "老"], ["人", "，", "可以", "半价", "（", "即", "5", "美元", "）", "购买", "门票", "：", "\n", " ", " ", "age", " ", "=", " ", "12", "\n", " ", " ", "if", " ", "age", " ", "<", " ", "4", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "0", "\n", " ", " ", "elif", " ", "age", " ", "<", " ", "18", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5", "\n", "❶", " ", "elif", " ", "age", " ", "<", " ", "65", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "10", "\n", "❷", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5", "\n", " ", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "\"", " ", "+", " ", "str", "(", "price", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "这些", "代码", "大都", "未", "变", "。", "第二个", "elif", " ", "代码", "块", "（", "见", "❶", "）", "通过", "检查", "确定", "年龄", "不到", "65", "岁", "后", "，", "才", "将", "门票价格", "设置", "为", "全票", "价格", "—", "—", "10", "美元", "。", "请", "注意", "，", "在", "else", " ", "代码", "块", "（", "见", "❷", "）", "中", "，", "必须", "将", "所", "赋", "的", "\n", "值", "改为", "5", "，", "因为", "仅当", "年龄", "超过", "65", "（", "含", "）", "时", "，", "才", "会", "执行", "这个", "代码", "块", "。", "\n", "5.3", ".", "5", "　", "省略", "\n", "　", "省略", "else", " ", "代码", "块", "\n", "代码", "块", "\n", "Python", "并", "不", "要求", "if", "-", "elif", " ", "结构", "后面", "必须", "有", "else", " ", "代码", "块", "。", "在", "有些", "情况", "下", "，", "else", " ", "代码", "块", "很", "有用", "；", "而", "在", "其他", "一些", "情况", "下", "，", "使用", "一条", "elif", " ", "语句", "来", "处理", "特定", "的", "情形", "更", "清晰", "：", "\n", " ", " ", "age", " ", "=", " ", "12", "\n", " ", " ", "if", " ", "age", " ", "<", " ", "4", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "0", "\n", " ", " ", "elif", " ", "age", " ", "<", " ", "18", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5"], ["price", " ", "=", " ", "0", "\n", " ", " ", "elif", " ", "age", " ", "<", " ", "18", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5", "\n", " ", " ", "elif", " ", "age", " ", "<", " ", "65", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "10", "\n", "❶", " ", "elif", " ", "age", " ", ">", "=", " ", "65", ":", "\n", " ", " ", " ", " ", " ", " ", "price", " ", "=", " ", "5", "\n", " ", " ", "print", "(", "\"", "Your", " ", "admission", " ", "cost", " ", "is", " ", "$", "\"", " ", "+", " ", "str", "(", "price", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❶", "处", "的", "elif", " ", "代码", "块", "在", "顾客", "的", "年龄", "超过", "65", "（", "含", "）", "时", "，", "将", "价格", "设置", "为", "5", "美元", "，", "这比", "使用", "else", " ", "代码", "块", "更", "清晰", "些", "。", "经过", "这样", "的", "修改", "后", "，", "每个", "代码", "块", "都", "仅", "在", "通过", "了", "相应", "的", "测试", "时才", "会", "执", "\n", "行", "。", "\n", "else", " ", "是", "一条", "包罗万象", "的", "语句", "，", "只要", "不", "满足", "任何", "if", " ", "或", "elif", " ", "中", "的", "条件", "测试", "，", "其中", "的", "代码", "就", "会", "执行", "，", "这", "可能", "会", "引入", "无效", "甚至", "恶意", "的", "数据", "。", "如果", "知道", "最终", "要", "测试", "的", "条件", "，", "应", "考虑", "使用", "\n", "一个", "elif", " ", "代码", "块", "来", "代替", "else", " ", "代码", "块", "。", "这样", "，", "你", "就", "可以", "肯定", "，", "仅当", "满足", "相应", "的", "条件", "时", "，", "你", "的", "代码", "才", "会", "执行", "。", "\n", "5.3", ".", "6", "　", "测试", "多个", "条件", "\n", "　", "测试", "多个", "条件", "\n", "if", "-", "elif", "-", "else", " ", "结构", "功能强大", "，", "但仅", "适合", "用于", "只有", "一个", "条件", "满足", "的", "情况", "：", "遇到", "通过", "了", "的", "测试", "后", "，", "Python", "就", "跳", "过", "余下", "的", "测试", "。", "这种", "行为", "很", "好", "，", "效率", "很", "高", "，", "让", "你", "能够", "测试", "一个", "特定", "的", "\n", "条件", "。"], ["条件", "。", "\n", "然而", "，", "有时候", "必须", "检查", "你", "关心", "的", "所有", "条件", "。", "在", "这种", "情况", "下", "，", "应", "使用", "一系列", "不", "包含", "elif", " ", "和", "else", " ", "代码", "块", "的", "简单", "if", " ", "语句", "。", "在", "可能", "有", "多个", "条件", "为", "True", " ", "，", "且", "你", "需要", "在", "每个", "条件", "为", "True", "\n", "时", "都", "采取相应", "措施", "时", "，", "适合", "使用", "这种", "方法", "。", "\n", "下面", "再", "来看", "前面", "的", "比萨", "店", "示例", "。", "如果", "顾客", "点", "了", "两种", "配料", "，", "就", "需要", "确保", "在", "其", "比萨", "中", "包含", "这些", "配料", "：", "\n", "toppings", ".", "py", "\n", "❶", " ", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", "\n", "❷", " ", "if", " ", "'", "mushrooms", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "mushrooms", ".", "\"", ")", "\n", "❸", " ", "if", " ", "'", "pepperoni", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "pepperoni", ".", "\"", ")", "\n", "❹", " ", "if", " ", "'", "extra", " ", "cheese", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "extra", " ", "cheese", ".", "\"", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")"], ["print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")", "\n", "我们", "首先", "创建", "了", "一个", "列表", "，", "其中", "包含", "顾客", "点", "的", "配料", "（", "见", "❶", "）", "。", "❷", "处", "的", "if", " ", "语句", "检查", "顾客", "是否", "点", "了", "配料", "蘑菇", "（", "'", "mushrooms", "'", " ", "）", "，", "如果", "点", "了", "，", "就", "打印", "一条", "确认", "消息", "。", "❸", "处", "检查", "配料", "辣", "\n", "香肠", "（", "'", "pepperoni", "'", " ", "）", "的", "代码", "也", "是", "一个", "简单", "的", "if", " ", "语句", "，", "而", "不是", "elif", " ", "或", "else", " ", "语句", "；", "因此", "不管", "前", "一个", "测试", "是否", "通过", "，", "都", "将", "进行", "这个", "测试", "。", "❹", "处", "的", "代码", "检查", "顾客", "是否", "要求", "多加芝", "\n", "士", "（", "'", "extra", " ", "cheese", "'", " ", "）", "；", "不管", "前", "两个", "测试", "的", "结果", "如何", "，", "都", "会", "执行", "这些", "代码", "。", "每当", "这个", "程序运行", "时", "，", "都", "会", "进行", "这", "三个", "独立", "的", "测试", "。", "\n", "在", "这个", "示例", "中", "，", "会", "检查", "每个", "条件", "，", "因此", "将", "在", "比萨", "中", "添加", "蘑菇", "并", "多加", "芝士", "：", "\n", "Adding", " ", "mushrooms", ".", "\n", "Adding", " ", "extra", " ", "cheese", "."], ["Finished", " ", "making", " ", "your", " ", "pizza", "!", "\n", "如果", "像", "下面", "这样", "转而", "使用", "if", "-", "elif", "-", "else", " ", "结构", "，", "代码", "将", "不能", "正确", "地", "运行", "，", "因为", "有", "一个", "测试通过", "后", "，", "就", "会", "跳", "过", "余下", "的", "测试", "：", "\n", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", "\n", "if", " ", "'", "mushrooms", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "mushrooms", ".", "\"", ")", "\n", "elif", " ", "'", "pepperoni", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "pepperoni", ".", "\"", ")", "\n", "elif", " ", "'", "extra", " ", "cheese", "'", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "extra", " ", "cheese", ".", "\"", ")", "\n", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")", "\n", "第一个", "测试", "检查", "列表", "中", "是否", "包含", "'", "mushrooms", "'", " ", "，", "它", "通过", "了", "，", "因此", "将", "在", "比萨", "中", "添加", "蘑菇", "。", "然而", "，", "Python", "将", "跳", "过", "if", "-", "elif", "-", "else", " ", "结构", "中", "余下", "的", "测试", "，", "不再", "检查", "列表", "中", "是否", "包"], ["含", "'", "extra", " ", "cheese", "'", " ", "和", "'", "pepperoni", "'", " ", "。", "其", "结果", "是", "，", "将", "添加", "顾客", "点", "的", "第一种", "配料", "，", "但", "不会", "添加", "其他", "的", "配料", "：", "\n", "Adding", " ", "mushrooms", ".", "\n", "Finished", " ", "making", " ", "your", " ", "pizza", "!", "\n", "总之", "，", "如果", "你", "只", "想", "执行", "一个", "代码", "块", "，", "就", "使用", "if", "-", "elif", "-", "else", " ", "结构", "；", "如果", "要", "运行", "多个", "代码", "块", "，", "就", "使用", "一系列", "独立", "的", "if", " ", "语句", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "5", "-", "3", " ", "外星人", "颜色", "\n", "外星人", "颜色", "#", "1", " ", "：", "假设", "在", "游戏", "中刚", "射杀", "了", "一个", "外星人", "，", "请", "创建", "一个", "名为", "alien", "_", "color", " ", "的", "变量", "，", "并", "将", "其", "设置", "为", "'", "green", "'", " ", "、", "'", "yellow", "'", " ", "或", "'", "red", "'", " ", "。", "\n", "编写", "一条", "if", " ", "语句", "，", "检查", "外星人", "是否是", "绿色", "的", "；", "如果", "是", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "5", "个点", "。", "\n", "编写", "这个", "程序", "的", "两个", "版本", "，", "在", "一个", "版本", "中", "上述", "测试通过", "了", "，", "而", "在", "另", "一个", "版本", "中未", "通过", "（", "未", "通过", "测试", "时", "没有", "输出", "）", "。", "\n", "5", "-", "4", " ", "外星人", "颜色", "\n", "外星人", "颜色", "#", "2", " ", "：", "像", "练习", "5", "-", "3", "那样", "设置", "外星人", "的", "颜色", "，", "并", "编写", "一个", "if", "-", "else", " ", "结构", "。", "\n", "如果", "外星人", "是", "绿色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "因", "射杀", "该", "外星人", "获得", "了", "5", "个点", "。", "\n", "如果", "外星人", "不是", "绿色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "10", "个点", "。"], ["如果", "外星人", "不是", "绿色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "10", "个点", "。", "\n", "编写", "这个", "程序", "的", "两个", "版本", "，", "在", "一个", "版本", "中", "执行", "if", " ", "代码", "块", "，", "而", "在", "另", "一个", "版本", "中", "执行", "else", " ", "代码", "块", "。", "\n", "5", "-", "5", " ", "外星人", "颜色", "\n", "外星人", "颜色", "#", "3", " ", "：", "将", "练习", "5", "-", "4", "中", "的", "if", "-", "else", " ", "结构", "改为", "if", "-", "elif", "-", "else", " ", "结构", "。", "\n", "如果", "外星人", "是", "绿色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "5", "个点", "。", "\n", "如果", "外星人", "是", "黄色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "10", "个点", "。", "\n", "如果", "外星人", "是", "红色", "的", "，", "就", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "15", "个点", "。", "\n", "编写", "这个", "程序", "的", "三个", "版本", "，", "它们", "分别", "在", "外星人", "为", "绿色", "、", "黄色", "和", "红色", "时", "打印", "一条", "消息", "。", "\n", "5", "-", "6", " ", "人生", "的", "不同", "阶段", "\n", "人生", "的", "不同", "阶段", " ", "：", "设置", "变量", "age", " ", "的", "值", "，", "再", "编写", "一个", "if", "-", "elif", "-", "else", " ", "结构", "，", "根据", "age", " ", "的", "值", "判断", "处于", "人生", "的", "哪个", "阶段", "。", "\n", "如果", "一个", "人", "的", "年龄", "小于", "2", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "婴儿", "。", "\n", "如果", "一个", "人", "的", "年龄", "为", "2", "（", "含", "）", "～", "4", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "正", "蹒跚", "学步", "。", "\n", "如果", "一个", "人", "的", "年龄", "为", "4", "（", "含", "）", "～", "13", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "儿童", "。", "\n", "如果", "一个", "人", "的", "年龄", "为", "13", "（", "含", "）", "～", "20", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "青少年", "。", "\n", "如果", "一个", "人", "的", "年龄", "为", "20", "（", "含", "）", "～", "65", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "成年人", "。"], ["如果", "一个", "人", "的", "年龄", "为", "20", "（", "含", "）", "～", "65", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "成年人", "。", "\n", "如果", "一个", "人", "的", "年龄", "超过", "65", "（", "含", "）", "岁", "，", "就", "打印", "一条", "消息", "，", "指出", "他", "是", "老年人", "。", "\n", "5", "-", "7", " ", "喜欢", "的", "水果", "\n", "喜欢", "的", "水果", " ", "：", "创建", "一个", "列表", "，", "其中", "包含", "你", "喜欢", "的", "水果", "，", "再", "编写", "一系列", "独立", "的", "if", " ", "语句", "，", "检查", "列表", "中", "是否", "包含", "特定", "的", "水果", "。", "\n", "将", "该", "列表", "命名", "为", "favorite", "_", "fruits", " ", "，", "并", "在", "其中", "包含", "三种", "水果", "。", "\n", "编写", "5", "条", "if", " ", "语句", "，", "每条", "都", "检查", "某种", "水果", "是否", "包含", "在", "列表", "中", "，", "如果", "包含", "在", "列表", "中", "，", "就", "打印", "一条", "消息", "，", "如", "“", "You", " ", "really", " ", "like", " ", "bananas", "!", "”", "。", "\n", "5.4", "　", "使用", "\n", "　", "使用", "if", " ", "语句", "处理", "列表", "\n", "语句", "处理", "列表", "\n", "通过", "结合", "使用", "if", " ", "语句", "和", "列表", "，", "可", "完成", "一些", "有趣", "的", "任务", "：", "对", "列表", "中", "特定", "的", "值", "做", "特殊", "处理", "；", "高效", "地", "管理", "不断", "变化", "的", "情形", "，", "如", "餐馆", "是否", "还有", "特定", "的", "食材", "；", "证明", "代码", "在", "各种", "情形", "下", "都", "将", "按", "\n", "预期", "那样", "运行", "。", "\n", "5.4", ".", "1", "　", "检查", "特殊", "元素", "\n", "　", "检查", "特殊", "元素", "\n", "本章", "开头", "通过", "一个", "简单", "示例", "演示", "了", "如何", "处理", "特殊", "值", "'", "bmw", "'", " ", "—", "—", "它", "需要", "采用", "不同", "的", "格式", "进行", "打印", "。", "既然", "你", "对", "条件", "测试", "和", "if", " ", "语句", "有", "了", "大致", "的", "认识", "，", "下面", "来", "进一步", "研究", "如何", "检查", "列表", "\n", "中", "的", "特殊", "值", "，", "并", "对", "其", "做", "合适", "的", "处理", "。"], ["中", "的", "特殊", "值", "，", "并", "对", "其", "做", "合适", "的", "处理", "。", "\n", "继续", "使用", "前面", "的", "比萨", "店", "示例", "。", "这家", "比萨", "店", "在", "制作", "比萨", "时", "，", "每", "添加", "一种", "配料", "都", "打印", "一条", "消息", "。", "通过", "创建", "一个", "列表", "，", "在", "其中", "包含", "顾客", "点", "的", "配料", "，", "并", "使用", "一个", "循环", "来", "指出", "添加", "到", "比萨", "中", "\n", "的", "配料", "，", "可以", "以极", "高", "的", "效率", "编写", "这样", "的", "代码", "：", "\n", "toppings", ".", "py", "\n", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", "\n", "for", " ", "requested", "_", "topping", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "\"", " ", "+", " ", "requested", "_", "topping", " ", "+", " ", "\"", ".", "\"", ")", "\n", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")"], ["输出", "很", "简单", "，", "因为", "上述", "代码", "不过", "是", "一个", "简单", "的", "for", " ", "循环", "：", "\n", "Adding", " ", "mushrooms", ".", "\n", "Adding", " ", "green", " ", "peppers", ".", "\n", "Adding", " ", "extra", " ", "cheese", ".", "\n", "Finished", " ", "making", " ", "your", " ", "pizza", "!", "\n", "然而", "，", "如果", "比萨", "店", "的", "青椒", "用", "完", "了", "，", "该", "如何", "处理", "呢", "？", "为", "妥善", "地", "处理", "这种", "情况", "，", "可", "在", "for", " ", "循环", "中", "包含", "一条", "if", " ", "语句", "：", "\n", " ", " ", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", "\n", " ", " ", "for", " ", "requested", "_", "topping", " ", "in", " ", "requested", "_", "toppings", ":", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "requested", "_", "topping", " ", "=", "=", " ", "'", "green", " ", "peppers", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Sorry", ",", " ", "we", " ", "are", " ", "out", " ", "of", " ", "green", " ", "peppers", " ", "right", " ", "now", ".", "\"", ")", "\n", "❷", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "\"", " ", "+", " ", "requested", "_", "topping", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")"], ["print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")", "\n", "这里", "在", "比萨", "中", "添加", "每种", "配料", "前", "都", "进行", "检查", "。", "❶", "处", "的", "代码", "检查", "顾客", "点", "的", "是否是", "青椒", "，", "如果", "是", "，", "就", "显示", "一条", "消息", "，", "指出", "不能", "点", "青椒", "的", "原因", "。", "❷", "处", "的", "else", " ", "代码", "块", "确保", "其他", "配料", "都", "将", "添", "\n", "加", "到", "比萨", "中", "。", "\n", "输出", "表明", "，", "妥善", "地", "处理", "了", "顾客", "点", "的", "每种", "配料", "：", "\n", "Adding", " ", "mushrooms", ".", "\n", "Sorry", ",", " ", "we", " ", "are", " ", "out", " ", "of", " ", "green", " ", "peppers", " ", "right", " ", "now", ".", "\n", "Adding", " ", "extra", " ", "cheese", ".", "\n", "Finished", " ", "making", " ", "your", " ", "pizza", "!", "\n", "5.4", ".", "2", "　", "确定", "列表", "不是", "空", "的", "\n", "　", "确定", "列表", "不是", "空", "的", "\n", "到", "目前为止", "，", "对于", "处理", "的", "每个", "列表", "都", "做", "了", "一个", "简单", "的", "假设", "，", "即", "假设", "它们", "都", "至少", "包含", "一个", "元素", "。", "我们", "马上", "就要", "让", "用户", "来", "提供", "存储", "在", "列表", "中", "的", "信息", "，", "因此", "不能", "再", "假设", "循环", "运行", "时", "列表", "\n", "不是", "空", "的", "。", "有鉴于此", "，", "在", "运行", "for", " ", "循环", "前", "确定", "列表", "是否", "为空", "很", "重要", "。", "\n", "下面", "在", "制作", "比萨", "前", "检查", "顾客", "点", "的", "配料", "列表", "是否", "为空", "。", "如果", "列表", "是", "空", "的", "，", "就", "向", "顾客", "确认", "他", "是否", "要点", "普通", "比萨", "；", "如果", "列表", "不为", "空", "，", "就", "像", "前面", "的", "示例", "那样", "制作", "比萨", "：", "\n", "❶", " ", "requested", "_", "toppings", " ", "=", " ", "[", "]"], ["❶", " ", "requested", "_", "toppings", " ", "=", " ", "[", "]", "\n", "❷", " ", "if", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "requested", "_", "topping", " ", "in", " ", "requested", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "\"", " ", "+", " ", "requested", "_", "topping", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")", "\n", "❸", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Are", " ", "you", " ", "sure", " ", "you", " ", "want", " ", "a", " ", "plain", " ", "pizza", "?", "\"", ")", "\n", "在", "这里", "，", "我们", "首先", "创建", "了", "一个", "空", "列表", "，", "其中", "不", "包含", "任何", "配料", "（", "见", "❶", "）", "。", "在", "❷", "处", "我们", "进行", "了", "简单", "检查", "，", "而", "不是", "直接", "执行", "for", " ", "循环", "。", "在", "if", " ", "语句", "中将", "列表", "名用", "在", "条件", "表达式", "中", "\n", "时", "，", "Python", "将", "在", "列表", "至少", "包含", "一个", "元素", "时", "返回", "True", " ", "，", "并", "在", "列表", "为", "空时", "返回", "False", " ", "。", "如果", "requested", "_", "toppings", " ", "不为", "空", "，", "就", "运行", "与", "前", "一个", "示例", "相同", "的", "for", " ", "循环", "；", "否则", "，", "就", "打印", "\n", "一条", "消息", "，", "询问", "顾客", "是否", "确实", "要点", "不", "加", "任何", "配料", "的", "普通", "比萨", "（", "见", "❸", "）", "。", "\n", "在", "这里", "，", "这个", "列表", "为空", "，", "因此", "输出", "如下", "—", "—", "询问", "顾客", "是否", "确实", "要点", "普通", "比萨", "："], ["在", "这里", "，", "这个", "列表", "为空", "，", "因此", "输出", "如下", "—", "—", "询问", "顾客", "是否", "确实", "要点", "普通", "比萨", "：", "\n", "Are", " ", "you", " ", "sure", " ", "you", " ", "want", " ", "a", " ", "plain", " ", "pizza", "?", "\n", "如果", "这个", "列表", "不为", "空", "，", "将", "显示", "在", "比萨", "中", "添加", "的", "各种", "配料", "的", "输出", "。", "\n", "5.4", ".", "3", "　", "使用", "多个", "列表", "\n", "　", "使用", "多个", "列表", "\n", "顾客", "的", "要求", "往往", "五花八门", "，", "在", "比萨", "配料", "方面", "尤其", "如此", "。", "如果", "顾客", "要", "在", "比萨", "中", "添加", "炸薯条", "，", "该", "怎么办", "呢", "？", "可", "使用", "列表", "和", "if", " ", "语句", "来", "确定", "能否", "满足", "顾客", "的", "要求", "。", "\n", "来", "看看", "在", "制作", "比萨", "前", "如何", "拒绝", "怪异", "的", "配料", "要求", "。", "下面", "的", "示例", "定义", "了", "两个", "列表", "，", "其中", "第一个", "列表", "包含", "比萨", "店", "供应", "的", "配料", "，", "而", "第二个", "列表", "包含", "顾客", "点", "的", "配料", "。", "这次", "对", "\n", "于", "requested", "_", "toppings", " ", "中", "的", "每个", "元素", "，", "都", "检查", "它", "是否是", "比萨", "店", "供应", "的", "配料", "，", "再", "决定", "是否", "在", "比萨", "中", "添加", "它", "：", "\n", "❶", " ", "available", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "olives", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "pepperoni", "'", ",", " ", "'", "pineapple", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]"], ["❷", " ", "requested", "_", "toppings", " ", "=", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "french", " ", "fries", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", "\n", "❸", " ", "for", " ", "requested", "_", "topping", " ", "in", " ", "requested", "_", "toppings", ":", "\n", "❹", " ", " ", " ", " ", " ", "if", " ", "requested", "_", "topping", " ", "in", " ", "available", "_", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Adding", " ", "\"", " ", "+", " ", "requested", "_", "topping", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❺", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Sorry", ",", " ", "we", " ", "don", "'", "t", " ", "have", " ", "\"", " ", "+", " ", "requested", "_", "topping", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", "print", "(", "\"", "\\", "nFinished", " ", "making", " ", "your", " ", "pizza", "!", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "列表", "，", "其中", "包含", "比萨", "店", "供应", "的", "配料", "。", "请", "注意", "，", "如果", "比萨", "店", "供应", "的", "配料", "是", "固定", "的", "，", "也", "可", "使用", "一个", "元组", "来", "存储", "它们", "。", "在", "❷", "处", "，", "我们", "又", "创建", "了", "一个", "列表", "，", "其中", "\n", "包含", "顾客", "点", "的", "配料", "，", "请", "注意", "那个", "不同寻常", "的", "配料", "—", "—", "'", "french", " ", "fries", "'", " ", "。", "在", "❸", "处", "，", "我们", "遍历", "顾客", "点", "的", "配料", "列表", "。", "在", "这个", "循环", "中", "，", "对于", "顾客", "点", "的", "每种", "配料", "，", "我们", "都", "检查", "它", "是否", "包"], ["含", "在", "供应", "的", "配料", "列表", "中", "（", "见", "❹", "）", "；", "如果", "答案", "是", "肯定", "的", "，", "就", "将", "其", "加入", "到", "比萨", "中", "，", "否则", "将", "运行", "else", " ", "代码", "块", "（", "见", "❺", "）", "：", "打印", "一条", "消息", "，", "告诉", "顾客", "不", "供应", "这种", "配料", "。", "\n", "这些", "代码", "的", "输出", "整洁", "而", "详实", "："], ["Adding", " ", "mushrooms", ".", "\n", "Sorry", ",", " ", "we", " ", "don", "'", "t", " ", "have", " ", "french", " ", "fries", ".", "\n", "Adding", " ", "extra", " ", "cheese", ".", "\n", "Finished", " ", "making", " ", "your", " ", "pizza", "!", "\n", "通过", "为数不多", "的", "几行", "代码", "，", "我们", "高效", "地", "处理", "了", "一种", "真实", "的", "情形", "！", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "5", "-", "8", " ", "以", "特殊", "方式", "跟", "管理员", "打招呼", "\n", "以", "特殊", "方式", "跟", "管理员", "打招呼", " ", "：", "创建", "一个", "至少", "包含", "5", "个", "用户名", "的", "列表", "，", "且", "其中", "一个", "用户", "名为", "'", "admin", "'", " ", "。", "想象", "你", "要", "编写", "代码", "，", "在", "每位", "用户", "登录", "网站", "后", "都", "打印", "一条", "问", "\n", "候", "消息", "。", "遍历", "用户名", "列表", "，", "并", "向", "每位", "用户", "打印", "一条", "问候", "消息", "。", "\n", "如果", "用户", "名为", "'", "admin", "'", " ", "，", "就", "打印", "一条", "特殊", "的", "问候", "消息", "，", "如", "“", "Hello", " ", "admin", ",", " ", "would", " ", "you", " ", "like", " ", "to", " ", "see", " ", "a", " ", "status", " ", "report", "?", "”", "。", "\n", "否则", "，", "打印", "一条", "普通", "的", "问候", "消息", "，", "如", "“", "Hello", " ", "Eric", ",", " ", "thank", " ", "you", " ", "for", " ", "logging", " ", "in", " ", "again", "”", "。", "\n", "5", "-", "9", " ", "处理", "没有", "用户", "的", "情形", "\n", "处理", "没有", "用户", "的", "情形", " ", "：", "在", "为", "完成", "练习", "5", "-", "8", "编写", "的", "程序", "中", "，", "添加", "一条", "if", " ", "语句", "，", "检查", "用户名", "列表", "是否", "为空", "。"], ["处理", "没有", "用户", "的", "情形", " ", "：", "在", "为", "完成", "练习", "5", "-", "8", "编写", "的", "程序", "中", "，", "添加", "一条", "if", " ", "语句", "，", "检查", "用户名", "列表", "是否", "为空", "。", "\n", "如果", "为空", "，", "就", "打印消息", "“", "We", " ", "need", " ", "to", " ", "find", " ", "some", " ", "users", "!", "”", "。", "\n", "删除", "列表", "中", "的", "所有", "用户名", "，", "确定", "将", "打印", "正确", "的", "消息", "。", "\n", "5", "-", "10", " ", "检查", "用户名", "\n", "检查", "用户名", " ", "：", "按", "下面", "的", "说明", "编写", "一个", "程序", "，", "模拟", "网站", "确保", "每位", "用户", "的", "用户名", "都", "独一无二", "的", "方式", "。", "\n", "创建", "一个", "至少", "包含", "5", "个", "用户名", "的", "列表", "，", "并", "将", "其", "命名", "为", "current", "_", "users", " ", "。", "\n", "再", "创建", "一个", "包含", "5", "个", "用户名", "的", "列表", "，", "将", "其", "命名", "为", "new", "_", "users", " ", "，", "并", "确保", "其中", "有", "一两个", "用户名", "也", "包含", "在", "列表", "current", "_", "users", " ", "中", "。", "\n", "遍历", "列表", "new", "_", "users", " ", "，", "对于", "其中", "的", "每个", "用户名", "，", "都", "检查", "它", "是否", "已", "被", "使用", "。", "如果", "是", "这样", "，", "就", "打印", "一条", "消息", "，", "指出", "需要", "输入", "别的", "用户名", "；", "否则", "，", "打印", "一条", "消息", "，", "指", "\n", "出", "这个", "用户名", "未", "被", "使用", "。", "\n", "确保", "比较", "时", "不", "区分", "大", "消息", "；", "换句话说", "，", "如果", "用户名", "'", "John", "'", " ", "已", "被", "使用", "，", "应", "拒绝", "用户名", "'", "JOHN", "'", " ", "。", "\n", "5", "-", "11", " ", "序数", "\n", "序数", " ", "：", "序数", "表示", "位置", "，", "如", "1st", "和", "2nd", "。", "大多数", "序数", "都", "以", "th", "结尾", "，", "只有", "1", "、", "2", "和", "3", "例外", "。", "\n", "在", "一个", "列表", "中", "存储", "数字", "1", "~", "9", "。", "\n", "遍历", "这个", "列表", "。"], ["在", "一个", "列表", "中", "存储", "数字", "1", "~", "9", "。", "\n", "遍历", "这个", "列表", "。", "\n", "在", "循环", "中", "使用", "一个", "if", "-", "elif", "-", "else", " ", "结构", "，", "以", "打印", "每个", "数字", "对应", "的", "序数", "。", "输出", "内容", "应为", "1st", " ", "、", "2nd", " ", "、", "3rd", " ", "、", "4th", " ", "、", "5th", " ", "、", "6th", " ", "、", "7th", " ", "、", "8th", " ", "和", "9th", " ", "，", "但", "每个", "序", "\n", "数都", "独占", "一行", "。", "\n", "5.5", "　", "设置", "\n", "　", "设置", "if", " ", "语句", "的", "格式", "\n", "语句", "的", "格式", "\n", "本章", "的", "每个", "示例", "都", "展示", "了", "良好", "的", "格式", "设置", "习惯", "。", "在", "条件", "测试", "的", "格式", "设置", "方面", "，", "PEP", " ", "8", "提供", "的", "唯一", "建议", "是", "，", "在", "诸如", "=", "=", " ", "、", ">", "=", " ", "和", "<", "=", " ", "等", "比较", "运算符", "两边", "各", "添加", "一个", "空格", "，", "例如", "，", "if", "\n", "age", " ", "<", " ", "4", ":", " ", "要", "比", "if", " ", "age", "<", "4", ":", " ", "好", "。", "\n", "这样", "的", "空格", "不会", "影响", "Python", "对", "代码", "的", "解读", "，", "而", "只是", "让", "代码", "阅读", "起来", "更", "容易", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "5", "-", "12", " ", "设置", "\n", "设置", "if", " ", "语句", "的", "格式", "\n", "语句", "的", "格式", " ", "：", "审核", "你", "在", "本章", "编写", "的", "程序", "，", "确保", "正确", "地", "设置", "了", "条件", "测试", "的", "格式", "。", "\n", "5", "-", "13", " ", "自己", "的", "想法", "\n", "自己", "的", "想法", " ", "：", "与", "刚", "拿", "起", "本书", "时", "相比", "，", "现在", "你", "是", "一名", "能力", "更强", "的", "程序员", "了", "。", "鉴于", "你", "对", "如何", "在", "程序", "中", "模拟", "现实", "情形", "有", "了", "更", "深入", "的", "认识", "，", "你", "可以", "考虑", "使用", "程序", "来", "解决", "一"], ["些", "问题", "。", "随着", "编程", "技能", "不断", "提高", "，", "你", "可能", "想", "解决", "一些", "问题", "，", "请", "将", "这方面", "的", "想法", "记录下来", "。", "想想", "你", "可能", "想", "编写", "的", "游戏", "、", "想", "研究", "的", "数据", "集", "以及", "想", "创建", "的", "Web", "应用程序", "。", "\n", "5.6", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "如何", "编写", "结果", "要么", "为", "Ture", " ", "要么", "为", "False", " ", "的", "条件", "测试", "。", "你", "学习", "了", "如何", "编写", "简单", "的", "if", " ", "语句", "、", "if", "-", "else", " ", "语句", "和", "if", "-", "elif", "-", "else", " ", "结构", "。", "在", "程序", "中", "，", "你", "使用", "了", "这", "\n", "些", "结构", "来", "测试", "特定", "的", "条件", "，", "以", "确定", "这些", "条件", "是否", "满足", "。", "你", "学习", "了", "如何", "在", "利用", "高效", "的", "for", " ", "循环", "的", "同时", "，", "以", "不同于", "其他", "元素", "的", "方式", "对", "特定", "的", "列表", "元素", "进行", "处理", "。", "你", "还", "再次", "学习", "了", "\n", "Python", "就", "代码", "格式", "方面", "提出", "的", "建议", "，", "这", "可", "确保", "即便", "你", "编写", "的", "程序", "越来越", "复杂", "，", "其", "代码", "依然", "易于", "阅读", "和", "理解", "。", "\n", "在", "第", "6", "章", "，", "你", "将", "学习", "Python", "字典", "。", "字典", "类似", "于", "列表", "，", "但", "让", "你", "能够", "将", "不同", "的", "信息", "关联", "起来", "。", "你", "将", "学习", "如何", "创建", "和", "遍历", "字典", "，", "以及", "如何", "将", "字典", "同", "列表", "和", "if", " ", "语句", "结合", "起来", "使用", "。", "学习", "字典", "\n", "让", "你", "能够", "模拟", "更", "多", "现实", "世界", "的", "情形", "。", "\n", "第", "\n", "第", " ", "6", " ", "章", "　", "字典", "\n", "章", "　", "字典"], ["在", "本章", "中", "，", "你", "将", "学习", "能够", "将", "相关", "信息", "关联", "起来", "的", "Python", "字典", "。", "你", "将", "学习", "如何", "访问", "和", "修改", "字典", "中", "的", "信息", "。", "鉴于", "字典", "可", "存储", "的", "信息量", "几乎", "不", "受限制", "，", "因此", "我们", "会", "演示", "如何", "遍", "\n", "历", "字典", "中", "的", "数据", "。", "另外", "，", "你", "还", "将", "学习", "存储", "字典", "的", "列表", "、", "存储", "列表", "的", "字典", "和", "存储", "字典", "的", "字典", "。", "\n", "理解", "字典", "后", "，", "你", "就", "能够", "更", "准确", "地为", "各种", "真实", "物体", "建模", "。", "你", "可以", "创建", "一个", "表示", "人", "的", "字典", "，", "然后", "想", "在", "其中", "存储", "多少", "信息", "就", "存储", "多少", "信息", "：", "姓名", "、", "年龄", "、", "地址", "、", "职业", "以及", "要", "\n", "描述", "的", "任何", "方面", "。", "你", "还", "能够", "存储", "任意", "两种", "相关", "的", "信息", "，", "如", "一系列", "单词", "及其", "含义", "，", "一系列", "人", "名", "及其", "喜欢", "的", "数字", "，", "以及", "一系列", "山脉", "及其", "海拔", "等", "。", "\n", "6.1", "　", "一个", "简单", "的", "字典", "\n", "　", "一个", "简单", "的", "字典", "\n", "来看", "一个", "游戏", "，", "其中", "包含", "一些", "外星人", "，", "这些", "外星人", "的", "颜色", "和", "点数", "各不相同", "。", "下面", "是", "一个", "简单", "的", "字典", "，", "存储", "了", "有关", "特定", "外星人", "的", "信息", "：", "\n", "alien", ".", "py", "\n", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "print", "(", "alien", "_", "0", "[", "'", "color", "'", "]", ")", "\n", "print", "(", "alien", "_", "0", "[", "'", "points", "'", "]", ")", "\n", "字典", "alien", "_", "0", " ", "存储", "了", "外星人", "的", "颜色", "和", "点数", "。", "使用", "两条", "print", " ", "语句", "来", "访问", "并打印", "这些", "信息", "，", "如下", "所示", "：", "\n", "green", "\n", "5"], ["green", "\n", "5", "\n", "与", "大多数", "编程", "概念", "一样", "，", "要", "熟练", "使用", "字典", "，", "也", "需要", "一段时间", "的", "练习", "。", "使用", "字典", "一段时间", "后", "，", "你", "就", "会", "明白", "为何", "它们", "能够", "高效", "地", "模拟", "现实", "世界", "中", "的", "情形", "。", "\n", "6.2", "　", "使用", "字典", "\n", "　", "使用", "字典", "\n", "在", "Python", "中", "，", "字典", "\n", "字典", " ", "是", "一系列", "键", "\n", "键", "—", "值", "对", "\n", "值", "对", " ", "。", "每个", "键", "\n", "键", " ", "都", "与", "一个", "值", "相关联", "，", "你", "可以", "使用", "键来", "访问", "与", "之", "相关联", "的", "值", "。", "与键", "相关联", "的", "值", "可以", "是", "数字", "、", "字符串", "、", "列表", "乃至", "字典", "。", "事实上", "，", "可", "将", "\n", "任何", "Python", "对象", "用作", "字典", "中", "的", "值", "。", "\n", "在", "Python", "中", "，", "字典", "用", "放在", "花", "括号", "{", "}", " ", "中", "的", "一系列", "键", "—", "值", "对", "表示", "，", "如", "前面", "的", "示例", "所示", "：", "\n", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "键", "\n", "键", "—", "值", "\n", "值", " ", "对", "是", "两个", "相关联", "的", "值", "。", "指定", "键时", "，", "Python", "将", "返回", "与", "之", "相关联", "的", "值", "。", "键和值", "之间", "用", "冒号", "分隔", "，", "而键", "—", "值", "对", "之间", "用", "逗号", "分隔", "。", "在", "字典", "中", "，", "你", "想", "存储", "多少", "个键", "—", "值", "对", "都", "可以", "。", "\n", "最", "简单", "的", "字典", "只有", "一个", "键", "—", "值", "对", "，", "如", "下述", "修改", "后", "的", "字典", "alien", "_", "0", " ", "所示", "：", "\n", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", "}"], ["alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", "}", "\n", "这个", "字典", "只", "存储", "了", "一项", "有关", "alien", "_", "0", " ", "的", "信息", "，", "具体地说", "是", "这个", "外星人", "的", "颜色", "。", "在", "这个", "字典", "中", "，", "字符串", "'", "color", "'", " ", "是", "一个", "键", "，", "与", "之", "相关联", "的", "值", "为", "'", "green", "'", " ", "。", "\n", "6.2", ".", "1", "　", "访问", "字典", "中", "的", "值", "\n", "　", "访问", "字典", "中", "的", "值", "\n", "要", "获取", "与键", "相关联", "的", "值", "，", "可", "依次", "指定", "字典", "名", "和", "放在", "方括号", "内", "的", "键", "，", "如下", "所示", "："], ["alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", "}", "\n", "print", "(", "alien", "_", "0", "[", "'", "color", "'", "]", ")", "\n", "这", "将", "返回", "字典", "alien", "_", "0", " ", "中与键", "'", "color", "'", " ", "相关联", "的", "值", "：", "\n", "green", "\n", "字典", "中", "可", "包含", "任意", "数量", "的", "键", "—", "值", "对", "。", "例如", "，", "下面", "是", "最初", "的", "字典", "alien", "_", "0", " ", "，", "其中", "包含", "两个", "键", "—", "值", "对", "：", "\n", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "现在", "，", "你", "可以", "访问", "外星人", "alien", "_", "0", " ", "的", "颜色", "和", "点数", "。", "如果", "玩家", "射杀", "了", "这个", "外星人", "，", "你", "就", "可以", "使用", "下面", "的", "代码", "来", "确定", "玩家", "应", "获得", "多少", "个点", "：", "\n", " ", " ", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "❶", " ", "new", "_", "points", " ", "=", " ", "alien", "_", "0", "[", "'", "points", "'", "]", "\n", "❷", " ", "print", "(", "\"", "You", " ", "just", " ", "earned", " ", "\"", " ", "+", " ", "str", "(", "new", "_", "points", ")", " ", "+", " ", "\"", " ", "points", "!", "\"", ")", "\n", "上述", "代码", "首先", "定义", "了", "一个", "字典", "，", "然后", "从", "这个", "字典", "中", "获取", "与键", "'", "points", "'", " ", "相关联", "的", "值", "（", "见", "❶", "）", "，", "并", "将", "这个", "值", "存储", "在", "变量", "new", "_", "points", " ", "中", "。", "接下来", "，", "将", "这个", "整数", "转换", "为", "字符串", "，", "并", "\n", "打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "多少", "个点", "（", "见", "❷", "）", "："], ["打印", "一条", "消息", "，", "指出", "玩家", "获得", "了", "多少", "个点", "（", "见", "❷", "）", "：", "\n", "You", " ", "just", " ", "earned", " ", "5", " ", "points", "!", "\n", "如果", "你", "在", "有", "外星人", "被", "射杀", "时", "都", "运行", "这", "段", "代码", "，", "就", "会", "获取", "该", "外星人", "的", "点数", "。", "\n", "6.2", ".", "2", "　", "添加", "键", "\n", "　", "添加", "键", "—", "值", "对", "\n", "值", "对", "\n", "字典", "是", "一种", "动态", "结构", "，", "可", "随时", "在", "其中", "添加", "键", "—", "值", "对", "。", "要", "添加", "键", "—", "值", "对", "，", "可", "依次", "指定", "字典", "名", "、", "用", "方括号", "括起", "的", "键", "和", "相关联", "的", "值", "。", "\n", "下面", "在", "字典", "alien", "_", "0", " ", "中", "添加", "两项", "信息", "：", "外星人", "的", " ", "x", " ", "坐标", "和", " ", "y", " ", "坐标", "，", "让", "我们", "能够", "在", "屏幕", "的", "特定", "位置", "显示", "该", "外星人", "。", "我们", "将", "这个", "外星人", "放在", "屏幕", "左", "边缘", "，", "且", "离", "屏幕", "上", "边缘", "25", "像素", "的", "地", "\n", "方", "。", "由于", "屏幕", "坐标系", "的", "原点", "通常", "为", "左上角", "，", "因此", "要", "将", "该", "外星人", "放在", "屏幕", "左", "边缘", "，", "可", "将", " ", "x", " ", "坐标", "设置", "为", "0", "；", "要", "将", "该", "外星人", "放在", "离", "屏幕", "顶部", "25", "像素", "的", "地方", "，", "可", "将", " ", "y", " ", "坐标", "设置", "为", "25", "，", "如下", "所", "\n", "示", "：", "\n", " ", " ", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", " ", " ", "print", "(", "alien", "_", "0", ")", "\n", "❶", " ", "alien", "_", "0", "[", "'", "x", "_", "position", "'", "]", " ", "=", " ", "0", "\n", "❷", " ", "alien", "_", "0", "[", "'", "y", "_", "position", "'", "]", " ", "=", " ", "25", "\n", " ", " ", "print", "(", "alien", "_", "0", ")"], ["❷", " ", "alien", "_", "0", "[", "'", "y", "_", "position", "'", "]", " ", "=", " ", "25", "\n", " ", " ", "print", "(", "alien", "_", "0", ")", "\n", "我们", "首先", "定义", "了", "前面", "一直", "在", "使用", "的", "字典", "，", "然后", "打印", "这个", "字典", "，", "以", "显示", "其", "信息", "快照", "。", "在", "❶", "处", "，", "我们", "在", "这个", "字典", "中", "新增", "了", "一个", "键", "—", "值", "对", "，", "其中", "的", "键", "为", "'", "x", "_", "position", "'", " ", "，", "而值", "为", "0", " ", "。", "在", "\n", "❷", "处", "，", "我们", "重复", "这样", "的", "操作", "，", "但", "使用", "的", "键", "为", "'", "y", "_", "position", "'", " ", "。", "打印", "修改", "后", "的", "字典", "时", "，", "将", "看到", "这", "两个", "新增", "的", "键", "—", "值", "对", "：", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", ",", " ", "'", "y", "_", "position", "'", ":", " ", "25", ",", " ", "'", "x", "_", "position", "'", ":", " ", "0", "}", "\n", "这个", "字典", "的", "最终", "版本", "包含", "四个", "键", "—", "值", "对", "，", "其中", "原来", "的", "两个", "指定", "外星人", "的", "颜色", "和", "点数", "，", "而", "新增", "的", "两个", "指定", "位置", "。", "注意", "，", "键", "—", "值", "对", "的", "排列", "顺序", "与", "添加", "顺序", "不同", "。", "Python", "不", "关心", "键", "—", "值", "对", "\n", "的", "添加", "顺序", "，", "而", "只", "关心", "键和值", "之间", "的", "关联", "关系", "。", "\n", "6.2", ".", "3", "　", "先", "创建", "一个", "空", "字典", "\n", "　", "先", "创建", "一个", "空", "字典", "\n", "有时候", "，", "在", "空", "字典", "中", "添加", "键", "—", "值", "对", "是", "为了", "方便", "，", "而", "有时候", "必须", "这样", "做", "。", "为此", "，", "可", "先", "使用", "一对", "空", "的", "花", "括号", "定义", "一个", "字典", "，", "再", "分行", "添加", "各个", "键", "—", "值", "对", "。", "例如", "，", "下", "例", "演示", "了", "如何", "以", "这种", "\n", "方式", "创建", "字典", "alien", "_", "0", " ", "："], ["方式", "创建", "字典", "alien", "_", "0", " ", "：", "\n", "alien", "_", "0", " ", "=", " ", "{", "}", "\n", "alien", "_", "0", "[", "'", "color", "'", "]", " ", "=", " ", "'", "green", "'", "\n", "alien", "_", "0", "[", "'", "points", "'", "]", " ", "=", " ", "5", "\n", "print", "(", "alien", "_", "0", ")", "\n", "这里", "首先", "定义", "了", "空", "字典", "alien", "_", "0", " ", "，", "再", "在", "其中", "添加", "颜色", "和", "点数", "，", "得到", "前述", "示例", "一直", "在", "使用", "的", "字典", "：", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "使用", "字典", "来", "存储用户", "提供", "的", "数据", "或", "在", "编写", "能", "自动", "生成", "大量", "键", "—", "值", "对", "的", "代码", "时", "，", "通常", "都", "需要", "先", "定义", "一个", "空", "字典", "。", "\n", "6.2", ".", "4", "　", "修改", "字典", "中", "的", "值", "\n", "　", "修改", "字典", "中", "的", "值", "\n", "要", "修改", "字典", "中", "的", "值", "，", "可", "依次", "指定", "字典", "名", "、", "用", "方括号", "括起", "的", "键", "以及", "与", "该键", "相关联", "的", "新值", "。", "例如", "，", "假设", "随着", "游戏", "的", "进行", "，", "需要", "将", "一个", "外星人", "从", "绿色", "改为", "黄色", "："], ["alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", "}", "\n", "print", "(", "\"", "The", " ", "alien", " ", "is", " ", "\"", " ", "+", " ", "alien", "_", "0", "[", "'", "color", "'", "]", " ", "+", " ", "\"", ".", "\"", ")", "\n", "alien", "_", "0", "[", "'", "color", "'", "]", " ", "=", " ", "'", "yellow", "'", "\n", "print", "(", "\"", "The", " ", "alien", " ", "is", " ", "now", " ", "\"", " ", "+", " ", "alien", "_", "0", "[", "'", "color", "'", "]", " ", "+", " ", "\"", ".", "\"", ")", "\n", "我们", "首先", "定义", "了", "一个", "表示", "外星人", "alien", "_", "0", " ", "的", "字典", "，", "其中", "只", "包含", "这个", "外星人", "的", "颜色", "。", "接下来", "，", "我们", "将", "与", "键", "'", "color", "'", " ", "相关联", "的", "值", "改为", "'", "yellow", "'", " ", "。", "输出", "表明", "，", "这个", "外星人", "确实", "从", "绿", "\n", "色", "变成", "了", "黄色", "：", "\n", "The", " ", "alien", " ", "is", " ", "green", ".", "\n", "The", " ", "alien", " ", "is", " ", "now", " ", "yellow", ".", "\n", "来看", "一个", "更", "有趣", "的", "例子", "：", "对", "一个", "能够", "以", "不同", "速度", "移动", "的", "外星人", "的", "位置", "进行", "跟踪", "。", "为此", "，", "我们", "将", "存储", "该", "外星人", "的", "当前", "速度", "，", "并", "据此", "确定", "该", "外星人", "将", "向", "右", "移动", "多远", "：", "\n", " ", " ", "alien", "_", "0", " ", "=", " ", "{", "'", "x", "_", "position", "'", ":", " ", "0", ",", " ", "'", "y", "_", "position", "'", ":", " ", "25", ",", " ", "'", "speed", "'", ":", " ", "'", "medium", "'", "}", "\n", " ", " ", "print", "(", "\"", "Original", " ", "x", "-", "position", ":", " ", "\"", " ", "+", " ", "str", "(", "alien", "_", "0", "[", "'", "x", "_", "position", "'", "]", ")", ")", "\n", " ", " ", "#", " ", "向", "右", "移动", "外星人"], ["#", " ", "向", "右", "移动", "外星人", "\n", " ", " ", "#", " ", "据", "外星人", "当前", "速度", "决定", "将", "其", "移动", "多远", "\n", "❶", " ", "if", " ", "alien", "_", "0", "[", "'", "speed", "'", "]", " ", "=", "=", " ", "'", "slow", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "x", "_", "increment", " ", "=", " ", "1", "\n", " ", " ", "elif", " ", "alien", "_", "0", "[", "'", "speed", "'", "]", " ", "=", "=", " ", "'", "medium", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "x", "_", "increment", " ", "=", " ", "2", "\n", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "这个", "外星人", "的", "速度", "一定", "很快", "\n", " ", " ", " ", " ", " ", " ", "x", "_", "increment", " ", "=", " ", "3", "\n", " ", " ", "#", " ", "新", "位置", "等于", "老", "位置", "加上", "增量", "\n", "❷", " ", "alien", "_", "0", "[", "'", "x", "_", "position", "'", "]", " ", "=", " ", "alien", "_", "0", "[", "'", "x", "_", "position", "'", "]", " ", "+", " ", "x", "_", "increment", "\n", " ", " ", "print", "(", "\"", "New", " ", "x", "-", "position", ":", " ", "\"", " ", "+", " ", "str", "(", "alien", "_", "0", "[", "'", "x", "_", "position", "'", "]", ")", ")", "\n", "我们", "首先", "定义", "了", "一个", "外星人", "，", "其中", "包含", "初始", "的", "x", " ", "坐标", "和", "y", " ", "坐标", "，", "还有", "速度", "'", "medium", "'", " ", "。", "出于", "简化", "考虑", "，", "我们", "省略", "了", "颜色", "和", "点数", "，", "但", "即便", "包含", "这些", "键", "-", "值", "对", "，", "这个", "示例", "的", "工作", "原理", "也", "\n", "不会", "有", "任何", "变化", "。", "我们", "还", "打印", "了", "x", "_", "position", " ", "的", "初始值", "，", "旨在", "让", "用户", "知道", "这个", "外星人", "向", "右", "移动", "了", "多", "远", "。"], ["在", "❶", "处", "，", "使用", "了", "一个", "if", "-", "elif", "-", "else", " ", "结构", "来", "确定", "外星人", "应向", "右", "移动", "多远", "，", "并", "将", "这个", "值", "存储", "在", "变量", "x", "_", "increment", " ", "中", "。", "如果", "外星人", "的", "速度", "为", "'", "slow", "'", " ", "，", "它", "将", "向", "右", "移动", "一个", "单位", "；", "\n", "如果", "速度", "为", "'", "medium", "'", " ", "，", "将", "向", "右", "移动", "两个", "单位", "；", "如果", "为", "'", "fast", "'", " ", "，", "将", "向", "右", "移动", "三个", "单位", "。", "确定", "移动", "量", "后", "，", "将", "其", "与", "x", "_", "position", " ", "的", "当前", "值", "相加", "（", "见", "❷", "）", "，", "再", "将", "结果", "关联", "到", "字典", "中", "\n", "的", "键", "x", "_", "position", " ", "。", "\n", "由于", "这是", "一个", "速度", "中等", "的", "外星人", "，", "因此", "其", "位置", "将", "向", "右", "移动", "两个", "单位", "：", "\n", "Original", " ", "x", "-", "position", ":", " ", "0", "\n", "New", " ", "x", "-", "position", ":", " ", "2", "\n", "这种", "技术", "很棒", "：", "通过", "修改", "外星人", "字典", "中", "的", "值", "，", "可", "改变", "外星人", "的", "行为", "。", "例如", "，", "要", "将", "这个", "速度", "中等", "的", "外星人", "变成", "速度", "很快", "的", "外星人", "，", "可", "添加", "如下", "代码", "行", "：", "\n", "alien", "_", "0", "[", "'", "speed", "'", "]", " ", "=", " ", "fast", "\n", "这样", "，", "再次", "运行", "这些", "代码", "时", "，", "其中", "的", "if", "-", "elif", "-", "else", " ", "结构", "将", "把", "一个", "更大", "的", "值", "赋", "给", "变量", "x", "_", "increment", " ", "。", "\n", "6.2", ".", "5", "　", "删除", "键", "\n", "　", "删除", "键", "—", "值", "对", "\n", "值", "对", "\n", "对于", "字典", "中", "不再", "需要", "的", "信息", "，", "可", "使用", "del", " ", "语句", "将", "相应", "的", "键", "—", "值", "对", "彻底", "删除", "。", "使用", "del", " ", "语句", "时", "，", "必须", "指定", "字典", "名和要", "删除", "的", "键", "。"], ["例如", "，", "下面", "的", "代码", "从", "字典", "alien", "_", "0", " ", "中", "删除", "键", "'", "points", "'", " ", "及其", "值", "：", "\n", " ", " ", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", " ", " ", "print", "(", "alien", "_", "0", ")", "\n", "❶", " ", "del", " ", "alien", "_", "0", "[", "'", "points", "'", "]", "\n", " ", " ", "print", "(", "alien", "_", "0", ")", "\n", "❶", "处", "的", "代码", "行让", "Python", "将键", "'", "points", "'", " ", "从", "字典", "alien", "_", "0", " ", "中", "删除", "，", "同时", "删除", "与", "这个", "键", "相关联", "的", "值", "。", "输出", "表明", "，", "键", "'", "points", "'", " ", "及其", "值", "5", " ", "已", "从", "字典", "中", "删除", "，", "但", "其他", "键", "—", "值", "对", "未", "受", "影响", "：", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", "}", "\n", "注意", "\n", "注意", " ", "　", "删除", "的", "键", "—", "值", "对", "永远", "消失", "了", "。", "\n", "6.2", ".", "6", "　", "由", "类似", "对象", "组成", "的", "字典", "\n", "　", "由", "类似", "对象", "组成", "的", "字典", "\n", "在", "前面", "的", "示例", "中", "，", "字典", "存储", "的", "是", "一个", "对象", "（", "游戏", "中", "的", "一个", "外星人", "）", "的", "多种", "信息", "，", "但", "你", "也", "可以", "使用", "字典", "来", "存储", "众多", "对象", "的", "同", "一种", "信息", "。", "例如", "，", "假设", "你", "要", "调查", "很多", "人", "，", "询问", "他们", "最喜", "\n", "欢", "的", "编程语言", "，", "可", "使用", "一个", "字典", "来", "存储", "这种", "简单", "调查", "的", "结果", "，", "如下", "所示", "：", "\n", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ","], ["'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "}"], ["正如", "你", "看到", "的", "，", "我们", "将", "一个", "较大", "的", "字典", "放在", "了", "多行", "中", "。", "其中", "每个", "键", "都", "是", "一个", "被调查者", "的", "名字", "，", "而", "每个", "值", "都", "是", "被调查者", "喜欢", "的", "语言", "。", "确定", "需要", "使用", "多行", "来", "定义", "字典", "时", "，", "在", "输入", "左花", "\n", "括号", "后", "按", "回车键", "，", "再", "在", "下", "一行", "缩进", "四个", "空格", "，", "指定", "第一个", "键", "—", "值", "对", "，", "并", "在", "它", "后面", "加上", "一个", "逗号", "。", "此后", "你", "再次", "按", "回车键", "时", "，", "文本编辑", "器", "将", "自动", "缩进", "后续", "键", "—", "值", "对", "，", "且", "缩进", "量", "与", "第一", "\n", "个键", "—", "值", "对", "相同", "。", "\n", "定义", "好", "字典", "后", "，", "在", "最后", "一个", "键", "—", "值", "对", "的", "下", "一行", "添加", "一个", "右花", "括号", "，", "并", "缩进", "四个", "空格", "，", "使", "其", "与", "字典", "中", "的", "键", "对齐", "。", "另外", "一种", "不错", "的", "做法", "是", "在", "最后", "一个", "键", "—", "值", "对", "后面", "也", "加上", "逗号", "，", "为", "以", "\n", "后", "在", "下", "一行", "添加", "键", "—", "值", "对", "做好", "准备", "。", "\n", "注意", "\n", "注意", " ", "　", "对于", "较长", "的", "列表", "和", "字典", "，", "大多数", "编辑器", "都", "有", "以", "类似", "方式", "设置", "其", "格式", "的", "功能", "。", "对于", "较长", "的", "字典", "，", "还有", "其他", "一些", "可行", "的", "格式", "设置", "方式", "，", "因此", "在", "你", "的", "编辑器", "或", "其他", "源", "\n", "代码", "中", "，", "你", "可能", "会", "看到", "稍微", "不同", "的", "格式", "设置", "方式", "。", "\n", "给定", "被调查者", "的", "名字", "，", "可", "使用", "这个", "字典", "轻松", "地", "获悉", "他", "喜欢", "的", "语言", "：", "\n", "favorite", "_", "languages", ".", "py", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ","], ["'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "print", "(", "\"", "Sarah", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "\"", " ", "+", "\n", "❷", " ", " ", " ", " ", " ", "favorite", "_", "languages", "[", "'", "sarah", "'", "]", ".", "title", "(", ")", " ", "+", "\n", "❸", " ", " ", " ", " ", " ", "\"", ".", "\"", ")", "\n", "为", "获悉", "Sarah", " ", "喜欢", "的", "语言", "，", "我们", "使用", "如下", "代码", "：", "\n", "favorite", "_", "languages", "[", "'", "sarah", "'", "]", "\n", "在", "print", " ", "语句", "中", "，", "我们", "使用", "了", "这种", "语法", "（", "见", "❷", "）", "；", "输出", "指出", "了", "Sarah", "喜欢", "的", "语言", "：", "\n", "Sarah", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "C", ".", "\n", "这个", "示例", "还", "演示", "了", "如何", "将", "较", "长", "的", "print", " ", "语句", "分成", "多行", "。", "单词", "print", " ", "比", "大多数", "字典", "名", "都", "短", "，", "因此", "让", "输出", "的", "第一", "部分", "紧跟", "在", "左", "括号", "后面", "是", "合理", "的", "（", "见", "❶", "）", "。", "请", "选择", "在", "合适", "的", "地方", "拆", "\n", "分要", "打印", "的", "内容", "，", "并", "在", "第一行", "末尾", "（", "见", "❷", "）", "加上", "一个", "拼接", "运算符", "（", "+", " ", "）", "。", "按", "回车键", "进入", "print", " ", "语句", "的", "后续", "各行", "，", "并", "使用", "Tab", "键", "将", "它们", "对齐", "并", "缩进", "一级", "。", "指定", "要", "打印", "的", "所有", "内容", "\n", "后", "，", "在", "print", " ", "语句", "的", "最后", "一行", "末尾", "加上", "右", "括号", "（", "见", "❸", "）", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "6", "-", "1", " ", "人"], ["后", "，", "在", "print", " ", "语句", "的", "最后", "一行", "末尾", "加上", "右", "括号", "（", "见", "❸", "）", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "6", "-", "1", " ", "人", "\n", "人", " ", "：", "使用", "一个", "字典", "来", "存储", "一个", "熟人", "的", "信息", "，", "包括", "名", "、", "姓", "、", "年龄", "和", "居住", "的", "城市", "。", "该", "字典", "应", "包含", "键", "first", "_", "name", " ", "、", "last", "_", "name", " ", "、", "age", " ", "和", "city", " ", "。", "将", "存储", "在", "该", "字典", "中", "\n", "的", "每项", "信息", "都", "打印", "出来", "。", "\n", "6", "-", "2", " ", "喜欢", "的", "数字", "\n", "喜欢", "的", "数字", " ", "：", "使用", "一个", "字典", "来", "存储", "一些", "人", "喜欢", "的", "数字", "。", "请", "想", "出", "5", "个人", "的", "名字", "，", "并", "将", "这些", "名字", "用作", "字典", "中", "的", "键", "；", "想", "出", "每个", "人", "喜欢", "的", "一个", "数字", "，", "并", "将", "这些", "数字", "作为", "值存", "\n", "储在", "字典", "中", "。", "打印", "每个", "人", "的", "名字", "和", "喜欢", "的", "数字", "。", "为", "让", "这个", "程序", "更", "有趣", "，", "通过", "询问", "朋友", "确保", "数据", "是", "真实", "的", "。", "\n", "6", "-", "3", " ", "词汇表", "\n", "词汇表", " ", "：", "Python", "字典", "可", "用于", "模拟", "现实生活", "中", "的", "字典", "，", "但", "为", "避免", "混淆", "，", "我们", "将", "后者", "称为", "词汇表", "。", "\n", "想出", "你", "在", "前面", "学过", "的", "5", "个", "编程", "词汇", "，", "将", "它们", "用作", "词汇表", "中", "的", "键", "，", "并", "将", "它们", "的", "含义", "作为", "值", "存储", "在", "词汇表", "中", "。", "\n", "以", "整洁", "的", "方式", "打印", "每个", "词汇", "及其", "含义", "。", "为此", "，", "你", "可以", "先", "打印", "词汇", "，", "在", "它", "后面", "加上", "一个", "冒号", "，", "再", "打印", "词汇", "的", "含义", "；", "也", "可", "在", "一行", "打印", "词汇", "，", "再", "使用", "换行符", "（", "\\", "n", " ", "）", "插", "\n", "入", "一个", "空行", "，", "然后", "在", "下", "一行", "以", "缩进", "的", "方式", "打印", "词汇", "的", "含义", "。", "\n", "6.3", "　", "遍历", "字典", "\n", "　", "遍历", "字典"], ["入", "一个", "空行", "，", "然后", "在", "下", "一行", "以", "缩进", "的", "方式", "打印", "词汇", "的", "含义", "。", "\n", "6.3", "　", "遍历", "字典", "\n", "　", "遍历", "字典", "\n", "一个", "Python", "字典", "可能", "只", "包含", "几个", "键", "—", "值", "对", "，", "也", "可能", "包含", "数百万个", "键", "—", "值", "对", "。", "鉴于", "字典", "可能", "包含", "大量", "的", "数据", "，", "Python", "支持", "对", "字典", "遍历", "。", "字典", "可", "用于", "以", "各种", "方式", "存储", "信息", "，", "因此", "有", "多种", "\n", "遍历", "字典", "的", "方式", "：", "可", "遍历", "字典", "的", "所有", "键", "—", "值", "对", "、", "键", "或值", "。", "\n", "6.3", ".", "1", "　", "遍历", "所有", "的", "键", "\n", "　", "遍历", "所有", "的", "键", "—", "值", "对", "\n", "值", "对", "\n", "探索", "各种", "遍历", "方法", "前", "，", "先", "来看", "一个", "新", "字典", "，", "它", "用于", "存储", "有关", "网站", "用户", "的", "信息", "。", "下面", "的", "字典", "存储", "一名", "用户", "的", "用户名", "、", "名和姓", "：", "\n", "user", "_", "0", " ", "=", " ", "{", "\n", " ", " ", " ", " ", "'", "username", "'", ":", " ", "'", "efermi", "'", ",", "\n", " ", " ", " ", " ", "'", "first", "'", ":", " ", "'", "enrico", "'", ",", "\n", " ", " ", " ", " ", "'", "last", "'", ":", " ", "'", "fermi", "'", ",", "\n", " ", " ", " ", " ", "}", "\n", "利用", "本章", "前面", "介绍", "过", "的", "知识", "，", "可", "访问", "user", "_", "0", " ", "的", "任何", "一项", "信息", "，", "但", "如果", "要", "获悉", "该", "用户", "字典", "中", "的", "所有", "信息", "，", "该", "怎么办", "呢", "？", "可以", "使用", "一个", "for", " ", "循环", "来", "遍历", "这个", "字典", "：", "\n", "user", ".", "py", "\n", " ", " ", "user", "_", "0", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "username", "'", ":", " ", "'", "efermi", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "first", "'", ":", " ", "'", "enrico", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "last", "'", ":", " ", "'", "fermi", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}"], ["'", "last", "'", ":", " ", "'", "fermi", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "for", " ", "key", ",", " ", "value", " ", "in", " ", "user", "_", "0", ".", "items", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nKey", ":", " ", "\"", " ", "+", " ", "key", ")", "\n", "❸", " ", " ", " ", " ", " ", "print", "(", "\"", "Value", ":", " ", "\"", " ", "+", " ", "value", ")", "\n", "如", "❶", "所示", "，", "要", "编写", "用于", "遍历", "字典", "的", "for", " ", "循环", "，", "可", "声明", "两个", "变量", "，", "用于", "存储", "键", "—", "值", "对", "中", "的", "键", "和", "值", "。", "对于", "这", "两个", "变量", "，", "可", "使用", "任何", "名称", "。", "下面", "的", "代码", "使用", "了", "简单", "的", "变量名", "，", "这", "完全", "可"], ["行", "：", "\n", "for", " ", "k", ",", " ", "v", " ", "in", " ", "user", "_", "0", ".", "items", "(", ")", "\n", "for", " ", "语句", "的", "第二", "部分", "包含", "字典", "名", "和", "方法", "items", "(", ")", " ", "（", "见", "❶", "）", "，", "它", "返回", "一个", "键", "—", "值", "对", "列表", "。", "接下来", "，", "for", " ", "循环", "依次", "将", "每个", "键", "—", "值", "对", "存储", "到", "指定", "的", "两个", "变量", "中", "。", "在", "前面", "的", "示例", "中", "，", "我", "\n", "们", "使用", "这", "两个", "变量", "来", "打印", "每个", "键", "（", "见", "❷", "）", "及其", "相关联", "的", "值", "（", "见", "❸", "）", "。", "第一条", "print", " ", "语句", "中", "的", "\"", "\\", "n", "\"", " ", "确保", "在", "输出", "每个", "键", "—", "值", "对", "前", "都", "插入", "一个", "空行", "：", "\n", "Key", ":", " ", "last", "\n", "Value", ":", " ", "fermi", "\n", "Key", ":", " ", "first", "\n", "Value", ":", " ", "enrico", "\n", "Key", ":", " ", "username", "\n", "Value", ":", " ", "efermi", "\n", "注意", "，", "即便", "遍历", "字典", "时", "，", "键", "—", "值", "对", "的", "返回", "顺序", "也", "与", "存储", "顺序", "不同", "。", "Python", "不", "关心", "键", "—", "值", "对", "的", "存储", "顺序", "，", "而", "只", "跟踪", "键和值", "之间", "的", "关联", "关系", "。", "\n", "在", "6.2", ".", "6", "节", "的", "示例", "favorite", "_", "languages", ".", "py", "中", "，", "字典", "存储", "的", "是", "不同", "人", "的", "同", "一种", "信息", "；", "对于", "类似", "这样", "的", "字典", "，", "遍历", "所有", "的", "键", "—", "值", "对", "很", "合适", "。", "如果", "遍历", "字典", "favorite", "_", "languages", " ", "，", "将", "得到"], ["其中", "每个", "人", "的", "姓名", "和", "喜欢", "的", "编程语言", "。", "由于", "其中", "的", "键", "都", "是", "人名", "，", "而值", "都", "是", "语言", "，", "因此", "我们", "在", "循环", "中", "使用", "变量", "name", " ", "和", "language", " ", "，", "而", "不是", "key", " ", "和", "value", " ", "，", "这", "让", "人", "更", "容易", "明白", "循环", "\n", "的", "作用", "：", "\n", "favorite", "_", "languages", ".", "py", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "for", " ", "name", ",", " ", "language", " ", "in", " ", "favorite", "_", "languages", ".", "items", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "\"", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "language", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❶", "处", "的", "代码", "让", "Python", "遍历", "字典", "中", "的", "每个", "键", "—", "值", "对", "，", "并", "将", "键", "存储", "在", "变量", "name", " ", "中", "，", "而", "将", "值", "存储", "在", "变量", "language", " ", "中", "。", "这些", "描述性", "名称", "能够", "让", "人", "非常", "轻松", "地", "明白", "print", " ", "语句", "（", "见", "❷", "）", "\n", "是", "做", "什么", "的", "。", "\n", "仅", "使用", "几行", "代码", "，", "我们", "就", "将", "全部", "调查", "结果显示", "出来", "了", "："], ["是", "做", "什么", "的", "。", "\n", "仅", "使用", "几行", "代码", "，", "我们", "就", "将", "全部", "调查", "结果显示", "出来", "了", "：", "\n", "Jen", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Python", ".", "\n", "Sarah", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "C", ".", "\n", "Phil", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Python", ".", "\n", "Edward", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Ruby", ".", "\n", "即便", "字典", "存储", "的", "是", "上千", "乃至", "上百万", "人", "的", "调查结果", "，", "这种", "循环", "也", "管用", "。", "\n", "6.3", ".", "2", "　", "遍历", "字典", "中", "的", "所有", "键", "\n", "　", "遍历", "字典", "中", "的", "所有", "键", "\n", "在", "不", "需要", "使用", "字典", "中", "的", "值时", "，", "方法", "keys", "(", ")", " ", "很", "有用", "。", "下面", "来", "遍历", "字典", "favorite", "_", "languages", " ", "，", "并", "将", "每个", "被调查者", "的", "名字", "都", "打印", "出来", "：", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "for", " ", "name", " ", "in", " ", "favorite", "_", "languages", ".", "keys", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "name", ".", "title", "(", ")", ")"], ["print", "(", "name", ".", "title", "(", ")", ")", "\n", "❶", "处", "的", "代码", "行让", "Python", "提取", "字典", "favorite", "_", "languages", " ", "中", "的", "所有", "键", "，", "并", "依次", "将", "它们", "存储", "到", "变量", "name", " ", "中", "。", "输出", "列出", "了", "每个", "被调查者", "的", "名字", "：", "\n", "Jen", "\n", "Sarah", "\n", "Phil", "\n", "Edward", "\n", "遍历", "字典", "时", "，", "会", "默认", "遍历", "所有", "的", "键", "，", "因此", "，", "如果", "将", "上述", "代码", "中", "的", "for", " ", "name", " ", "in", " ", "favorite", "_", "languages", ".", "keys", "(", ")", ":", " ", "替换", "为", "for", " ", "name", " ", "in", " ", "favorite", "_", "languages", ":", " ", "，", "输出", "\n", "将", "不变", "。", "\n", "如果", "显式", "地", "使用", "方法", "keys", "(", ")", " ", "可", "让", "代码", "更", "容易", "理解", "，", "你", "可以", "选择", "这样", "做", "，", "但", "如果", "你", "愿意", "，", "也", "可", "省略", "它", "。", "\n", "在", "这种", "循环", "中", "，", "可", "使用", "当前", "键来", "访问", "与", "之", "相关联", "的", "值", "。", "下面", "来", "打印", "两条", "消息", "，", "指出", "两位", "朋友", "喜欢", "的", "语言", "。", "我们", "像", "前面", "一样", "遍历", "字典", "中", "的", "名字", "，", "但", "在", "名字", "为", "指定", "朋友", "的", "名字", "时", "，", "打", "\n", "印", "一条", "消息", "，", "指出", "其", "喜欢", "的", "语言", "：", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}"], ["'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "friends", " ", "=", " ", "[", "'", "phil", "'", ",", " ", "'", "sarah", "'", "]", "\n", " ", " ", "for", " ", "name", " ", "in", " ", "favorite", "_", "languages", ".", "keys", "(", ")", ":"], ["print", "(", "name", ".", "title", "(", ")", ")", "\n", "❷", " ", " ", " ", " ", " ", "if", " ", "name", " ", "in", " ", "friends", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", " ", " ", "Hi", " ", "\"", " ", "+", " ", "name", ".", "title", "(", ")", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", ",", " ", "I", " ", "see", " ", "your", " ", "favorite", " ", "language", " ", "is", " ", "\"", " ", "+", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "favorite", "_", "languages", "[", "name", "]", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "列表", "，", "其中", "包含", "我们", "要", "通过", "打印消息", "，", "指出", "其", "喜欢", "的", "语言", "的", "朋友", "。", "在", "循环", "中", "，", "我们", "打印", "每个", "人", "的", "名字", "，", "并", "检查", "当前", "的", "名字", "是否", "在", "列表", "friends", " ", "中", "（", "见", "\n", "❷", "）", "。", "如果", "在", "列表", "中", "，", "就", "打印", "一句", "特殊", "的", "问候语", "，", "其中", "包含", "这位", "朋友", "喜欢", "的", "语言", "。", "为", "访问", "喜欢", "的", "语言", "，", "我们", "使用", "了", "字典", "名", "，", "并", "将", "变量", "name", " ", "的", "当前", "值", "作为", "键", "（", "见", "❸", "）", "。", "每个", "人", "的", "\n", "名字", "都", "会", "被", "打印", "，", "但", "只", "对", "朋友", "打印", "特殊", "消息", "：", "\n", "Edward", "\n", "Phil", "\n", " ", " ", "Hi", " ", "Phil", ",", " ", "I", " ", "see", " ", "your", " ", "favorite", " ", "language", " ", "is", " ", "Python", "!", "\n", "Sarah", "\n", " ", " ", "Hi", " ", "Sarah", ",", " ", "I", " ", "see", " ", "your", " ", "favorite", " ", "language", " ", "is", " ", "C", "!", "\n", "Jen"], ["Jen", "\n", "你", "还", "可以", "使用", "keys", "(", ")", " ", "确定", "某个", "人", "是否", "接受", "了", "调查", "。", "下面", "的", "代码", "确定", "Erin", "是否", "接受", "了", "调查", "：", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "if", " ", "'", "erin", "'", " ", "not", " ", "in", " ", "favorite", "_", "languages", ".", "keys", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Erin", ",", " ", "please", " ", "take", " ", "our", " ", "poll", "!", "\"", ")", "\n", "方法", "keys", "(", ")", " ", "并非", "只能", "用于", "遍历", "；", "实际上", "，", "它", "返回", "一个", "列表", "，", "其中", "包含", "字典", "中", "的", "所有", "键", "，", "因此", "❶", "处", "的", "代码", "行", "只是", "核实", "'", "erin", "'", " ", "是否", "包含", "在", "这个", "列表", "中", "。", "由于", "她", "并", "不", "包含", "在", "这个", "列", "\n", "表中", "，", "因此", "打印", "一条", "消息", "，", "邀请", "她", "参加", "调查", "：", "\n", "Erin", ",", " ", "please", " ", "take", " ", "our", " ", "poll", "!", "\n", "6.3", ".", "3", "　", "按", "顺序", "遍历", "字典", "中", "的", "所有", "键", "\n", "　", "按", "顺序", "遍历", "字典", "中", "的", "所有", "键", "\n", "字典", "总是", "明确", "地", "记录", "键和值", "之间", "的", "关联", "关系", "，", "但", "获取", "字典", "的", "元素", "时", "，", "获取", "顺序", "是", "不可", "预测", "的", "。", "这", "不是", "问题", "，", "因为", "通常", "你", "想要", "的", "只是", "获取", "与键", "相关联", "的", "正确", "的", "值", "。"], ["要", "以", "特定", "的", "顺序", "返回", "元素", "，", "一种", "办法", "是", "在", "for", " ", "循环", "中", "对", "返回", "的", "键", "进行", "排序", "。", "为此", "，", "可", "使用", "函数", "sorted", "(", ")", " ", "来", "获得", "按", "特定", "顺序排列", "的", "键", "列表", "的", "副本", "：", "\n", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "}", "\n", "for", " ", "name", " ", "in", " ", "sorted", "(", "favorite", "_", "languages", ".", "keys", "(", ")", ")", ":", "\n", " ", " ", " ", " ", "print", "(", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", ".", "\"", ")", "\n", "这条", "for", " ", "语句", "类似", "于", "其他", "for", " ", "语句", "，", "但", "对", "方法", "dictionary", ".", "keys", "(", ")", " ", "的", "结果", "调用", "了", "函数", "sorted", "(", ")", " ", "。", "这", "让", "Python", "列出", "字典", "中", "的", "所有", "键", "，", "并", "在", "遍历", "前", "对", "这个", "列表", "进行", "排序", "。", "输出", "\n", "表明", "，", "按", "顺序", "显示", "了", "所有", "被调查者", "的", "名字", "：", "\n", "Edward", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", ".", "\n", "Jen", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", "."], ["Jen", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", ".", "\n", "Phil", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", ".", "\n", "Sarah", ",", " ", "thank", " ", "you", " ", "for", " ", "taking", " ", "the", " ", "poll", ".", "\n", "6.3", ".", "4", "　", "遍历", "字典", "中", "的", "所有", "值", "\n", "　", "遍历", "字典", "中", "的", "所有", "值", "\n", "如果", "你", "感兴趣", "的", "主要", "是", "字典", "包含", "的", "值", "，", "可", "使用", "方法", "values", "(", ")", " ", "，", "它", "返回", "一个", "值", "列表", "，", "而", "不", "包含", "任何", "键", "。", "例如", "，", "如果", "我们", "想", "获得", "一个", "这样", "的", "列表", "，", "即", "其中", "只", "包含", "被调查者", "选择", "的", "各", "\n", "种", "语言", "，", "而", "不", "包含", "被调查者", "的", "名字", "，", "可以", "这样", "做", "：", "\n", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", "}", "\n", "print", "(", "\"", "The", " ", "following", " ", "languages", " ", "have", " ", "been", " ", "mentioned", ":", "\"", ")", "\n", "for", " ", "language", " ", "in", " ", "favorite", "_", "languages", ".", "values", "(", ")", ":", "\n", " ", " ", " ", " ", "print", "(", "language", ".", "title", "(", ")", ")"], ["print", "(", "language", ".", "title", "(", ")", ")", "\n", "这条", "for", " ", "语句", "提取", "字典", "中", "的", "每个", "值", "，", "并", "将", "它们", "依次", "存储", "到", "变量", "language", " ", "中", "。", "通过", "打印", "这些", "值", "，", "就", "获得", "了", "一个", "列表", "，", "其中", "包含", "被调查者", "选择", "的", "各种", "语言", "：", "\n", "The", " ", "following", " ", "languages", " ", "have", " ", "been", " ", "mentioned", ":", "\n", "Python", "\n", "C", "\n", "Python", "\n", "Ruby"], ["这种", "做法", "提取", "字典", "中", "所有", "的", "值", "，", "而", "没有", "考虑", "是否", "重复", "。", "涉及", "的", "值", "很少", "时", "，", "这", "也许", "不是", "问题", "，", "但", "如果", "被调查者", "很多", "，", "最终", "的", "列表", "可能", "包含", "大量", "的", "重复", "项", "。", "为", "剔除", "重复", "项", "，", "可", "使用", "集", "\n", "合", "（", "set", "）", "。", "集合", "\n", "集合", " ", "类似", "于", "列表", "，", "但", "每个", "元素", "都", "必须", "是", "独一无二", "的", "：", "\n", " ", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "'", "c", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "'", "ruby", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "'", "python", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", "print", "(", "\"", "The", " ", "following", " ", "languages", " ", "have", " ", "been", " ", "mentioned", ":", "\"", ")", "\n", "❶", " ", "for", " ", "language", " ", "in", " ", "set", "(", "favorite", "_", "languages", ".", "values", "(", ")", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "language", ".", "title", "(", ")", ")", "\n", "通过", "对", "包含", "重复", "元素", "的", "列表", "调用", "set", "(", ")", " ", "，", "可", "让", "Python", "找出", "列表", "中", "独一无二", "的", "元素", "，", "并", "使用", "这些", "元素", "来", "创建", "一个", "集合", "。", "在", "❶", "处", "，", "我们", "使用", "了", "set", "(", ")", " ", "来", "提", "\n", "取", "favorite", "_", "languages", ".", "values", "(", ")", " ", "中", "不同", "的", "语言", "。"], ["取", "favorite", "_", "languages", ".", "values", "(", ")", " ", "中", "不同", "的", "语言", "。", "\n", "结果", "是", "一个", "不", "重复", "的", "列表", "，", "其中", "列出", "了", "被调查者", "提及", "的", "所有", "语言", "：", "\n", "The", " ", "following", " ", "languages", " ", "have", " ", "been", " ", "mentioned", ":", "\n", "Python", "\n", "C", "\n", "Ruby", "\n", "随着", "你", "更", "深入", "地", "学习", "Python", "，", "经常", "会", "发现", "它", "内置", "的", "功能", "可", "帮助", "你", "以", "希望", "的", "方式", "处理", "数据", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "6", "-", "4", " ", "词汇表", "\n", "词汇表", "2", " ", "：", "既然", "你", "知道", "了", "如何", "遍历", "字典", "，", "现在", "请", "整理", "你", "为", "完成", "练习", "6", "-", "3", "而", "编写", "的", "代码", "，", "将", "其中", "的", "一系列", "print", " ", "语句", "替换", "为", "一个", "遍历", "字典", "中", "的", "键", "和", "值", "的", "循环", "。", "确定", "该", "\n", "循环", "正确", "无误", "后", "，", "再", "在", "词汇表", "中", "添加", "5", "个", "Python", "术语", "。", "当", "你", "再次", "运行", "这个", "程序", "时", "，", "这些", "新", "术语", "及其", "含义", "将", "自动", "包含", "在", "输出", "中", "。", "\n", "6", "-", "5", " ", "河流", "\n", "河流", " ", "：", "创建", "一个", "字典", "，", "在", "其中", "存储", "三条", "大", "河流", "及其", "流经", "的", "国家", "。", "其中", "一个", "键", "—", "值", "对", "可能", "是", "'", "nile", "'", ":", " ", "'", "egypt", "'", " ", "。", "\n", "使用", "循环", "为", "每条", "河流", "打印", "一条", "消息", "，", "如", "“", "The", " ", "Nile", " ", "runs", " ", "through", " ", "Egypt", ".", "”", "。", "\n", "使用", "循环", "将", "该", "字典", "中", "每条", "河流", "的", "名字", "都", "打印", "出来", "。", "\n", "使用", "循环", "将", "该", "字典", "包含", "的", "每个", "国家", "的", "名字", "都", "打印", "出来", "。", "\n", "6", "-", "6", " ", "调查"], ["使用", "循环", "将", "该", "字典", "包含", "的", "每个", "国家", "的", "名字", "都", "打印", "出来", "。", "\n", "6", "-", "6", " ", "调查", "\n", "调查", " ", "：", "在", "6.3", ".", "1", "节", "编写", "的", "程序", "favorite", "_", "languages", ".", "py", "中", "执行", "以下", "操作", "。", "\n", "创建", "一个", "应该", "会", "接受", "调查", "的", "人员名单", "，", "其中", "有些", "人", "已", "包含", "在", "字典", "中", "，", "而", "其他人", "未", "包含", "在", "字典", "中", "。", "\n", "遍历", "这个", "人员名单", "，", "对于", "已", "参与", "调查", "的", "人", "，", "打印", "一条", "消息", "表示感谢", "。", "对于", "还", "未", "参与", "调查", "的", "人", "，", "打印", "一条", "消息", "邀请", "他", "参与", "调查", "。", "\n", "6.4", "　", "嵌套", "\n", "　", "嵌套", "\n", "有时候", "，", "需要", "将", "一系列", "字典", "存储", "在", "列表", "中", "，", "或", "将", "列表", "作为", "值", "存储", "在", "字典", "中", "，", "这", "称为", "嵌套", "\n", "嵌套", " ", "。", "你", "可以", "在", "列表", "中", "嵌套", "字典", "、", "在", "字典", "中", "嵌套", "列表", "甚至", "在", "字典", "中", "嵌套", "字典", "。", "正如", "下面", "的", "示例", "\n", "将", "演示", "的", "，", "嵌套", "是", "一项", "强大", "的", "功能", "。", "\n", "6.4", ".", "1", "　", "字典", "列表", "\n", "　", "字典", "列表", "\n", "字典", "alien", "_", "0", " ", "包含", "一个", "外星人", "的", "各种", "信息", "，", "但", "无法", "存储", "第二个", "外星人", "的", "信息", "，", "更", "别说", "屏幕", "上", "全部", "外星人", "的", "信息", "了", "。", "如何", "管理", "成群结队", "的", "外星人", "呢", "？", "一种", "办法", "是", "创建", "一个", "外星人", "列", "\n", "表", "，", "其中", "每个", "外星人", "都", "是", "一个", "字典", "，", "包含", "有关", "该", "外星人", "的", "各种", "信息", "。", "例如", "，", "下面", "的", "代码", "创建", "一个", "包含", "三个", "外星人", "的", "列表", "：", "\n", "aliens", ".", "py", "\n", " ", " ", "alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}"], ["alien", "_", "0", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", " ", " ", "alien", "_", "1", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "yellow", "'", ",", " ", "'", "points", "'", ":", " ", "10", "}", "\n", " ", " ", "alien", "_", "2", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "red", "'", ",", " ", "'", "points", "'", ":", " ", "15", "}", "\n", "❶", " ", "aliens", " ", "=", " ", "[", "alien", "_", "0", ",", " ", "alien", "_", "1", ",", " ", "alien", "_", "2", "]", "\n", " ", " ", "for", " ", "alien", " ", "in", " ", "aliens", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "alien", ")", "\n", "我们", "首先", "创建", "了", "三个", "字典", "，", "其中", "每个", "字典", "都", "表示", "一个", "外星人", "。", "在", "❶", "处", "，", "我们", "将", "这些", "字典", "都", "放到", "一个", "名为", "aliens", " ", "的", "列表", "中", "。", "最后", "，", "我们", "遍历", "这个", "列表", "，", "并", "将", "每个", "外星人", "都", "打印", "出", "\n", "来", "：", "\n", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "color", "'", ":", " ", "'", "yellow", "'", ",", " ", "'", "points", "'", ":", " ", "10", "}", "\n", "{", "'", "color", "'", ":", " ", "'", "red", "'", ",", " ", "'", "points", "'", ":", " ", "15", "}", "\n", "更", "符合", "现实", "的", "情形", "是", "，", "外星人", "不止", "三个", "，", "且", "每个", "外星人", "都", "是", "使用", "代码", "自动", "生成", "的", "。", "在", "下面", "的", "示例", "中", "，", "我们", "使用", "range", "(", ")", " ", "生成", "了", "30", "个", "外星人", "：", "\n", " ", " ", "#", " ", "创建", "一个", "用于", "存储", "外星人", "的", "空", "列表", "\n", " ", " ", "aliens", " ", "=", " ", "[", "]", "\n", " ", " ", "#", " ", "创建", "30", "个", "绿色", "的", "外星人"], ["#", " ", "创建", "一个", "用于", "存储", "外星人", "的", "空", "列表", "\n", " ", " ", "aliens", " ", "=", " ", "[", "]", "\n", " ", " ", "#", " ", "创建", "30", "个", "绿色", "的", "外星人", "\n", "❶", " ", "for", " ", "alien", "_", "number", " ", "in", " ", "range", "(", "30", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "new", "_", "alien", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", ",", " ", "'", "speed", "'", ":", " ", "'", "slow", "'", "}", "\n", "❸", " ", " ", " ", " ", " ", "aliens", ".", "append", "(", "new", "_", "alien", ")", "\n", " ", " ", "#", " ", "显示", "前", "五个", "外星人", "\n", "❹", " ", "for", " ", "alien", " ", "in", " ", "aliens", "[", ":", "5", "]", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "alien", ")", "\n", " ", " ", "print", "(", "\"", "...", "\"", ")"], ["#", " ", "显示", "创建", "了", "多少", "个", "外星人", "\n", "❺", " ", "print", "(", "\"", "Total", " ", "number", " ", "of", " ", "aliens", ":", " ", "\"", " ", "+", " ", "str", "(", "len", "(", "aliens", ")", ")", ")", "\n", "在", "这个", "示例", "中", "，", "首先", "创建", "了", "一个", "空", "列表", "，", "用于", "存储", "接下来", "将", "创建", "的", "所有", "外星人", "。", "在", "❶", "处", "，", "range", "(", ")", " ", "返回", "一系列", "数字", "，", "其", "唯一", "的", "用途", "是", "告诉", "Python", "我们", "要", "重复", "这个", "循环", "多少", "次", "。", "每", "\n", "次", "执行", "这个", "循环", "时", "，", "都", "创建", "一个", "外星人", "（", "见", "❷", "）", "，", "并", "将", "其", "附加", "到", "列表", "aliens", " ", "末尾", "（", "见", "❸", "）", "。", "在", "❹", "处", "，", "使用", "一个", "切片", "来", "打印", "前", "五个", "外星人", "；", "在", "❺", "处", "，", "打印", "列表", "的", "长度", "，", "以", "证明", "确", "\n", "实", "创建", "了", "30", "个", "外星人", "：", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "..."], ["...", "\n", "Total", " ", "number", " ", "of", " ", "aliens", ":", " ", "30", "\n", "这些", "外星人", "都", "具有", "相同", "的", "特征", "，", "但", "在", "Python", "看来", "，", "每个", "外星人", "都", "是", "独立", "的", "，", "这", "让", "我们", "能够", "独立", "地", "修改", "每个", "外星人", "。", "\n", "在", "什么", "情况", "下", "需要", "处理", "成群结队", "的", "外星人", "呢", "？", "想象", "一下", "，", "可能", "随着", "游戏", "的", "进行", "，", "有些", "外星人", "会", "变色", "且", "移动", "速度", "会", "加快", "。", "必要", "时", "，", "我们", "可以", "使用", "for", " ", "循环", "和", "if", " ", "语句", "来", "修改", "某些", "外星", "\n", "人", "的", "颜色", "。", "例如", "，", "要", "将", "前", "三个", "外星人", "修改", "为", "黄色", "的", "、", "速度", "为", "中等", "且值", "10", "个点", "，", "可以", "这样", "做", "：", "\n", "#", " ", "创建", "一个", "用于", "存储", "外星人", "的", "空", "列表", "\n", "aliens", " ", "=", " ", "[", "]", "\n", "#", " ", "创建", "30", "个", "绿色", "的", "外星人", "\n", "for", " ", "alien", "_", "number", " ", "in", " ", "range", " ", "(", "0", ",", "30", ")", ":", "\n", " ", " ", " ", " ", "new", "_", "alien", " ", "=", " ", "{", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", ",", " ", "'", "speed", "'", ":", " ", "'", "slow", "'", "}", "\n", " ", " ", " ", " ", "aliens", ".", "append", "(", "new", "_", "alien", ")", "\n", "for", " ", "alien", " ", "in", " ", "aliens", "[", "0", ":", "3", "]", ":", "\n", " ", " ", " ", " ", "if", " ", "alien", "[", "'", "color", "'", "]", " ", "=", "=", " ", "'", "green", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "color", "'", "]", " ", "=", " ", "'", "yellow", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "speed", "'", "]", " ", "=", " ", "'", "medium", "'"], ["alien", "[", "'", "speed", "'", "]", " ", "=", " ", "'", "medium", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "points", "'", "]", " ", "=", " ", "10", "\n", "#", " ", "显示", "前", "五个", "外星人", "\n", "for", " ", "alien", " ", "in", " ", "aliens", "[", "0", ":", "5", "]", ":", "\n", " ", " ", " ", " ", "print", "(", "alien", ")", "\n", "print", "(", "\"", "...", "\"", ")", "\n", "鉴于", "我们", "要", "修改", "前", "三个", "外星人", "，", "需要", "遍历", "一个", "只", "包含", "这些", "外星人", "的", "切片", "。", "当前", "，", "所有", "外星人", "都", "是", "绿色", "的", "，", "但", "情况", "并非", "总是", "如此", "，", "因此", "我们", "编写", "了", "一条", "if", " ", "语句", "来", "确保", "只", "修改", "绿色", "外", "\n", "星人", "。", "如果", "外星人", "是", "绿色", "的", "，", "我们", "就", "将", "其", "颜色", "改为", "'", "yellow", "'", " ", "，", "将", "其", "速度", "改为", "'", "medium", "'", " ", "，", "并", "将", "其", "点数", "改为", "10", " ", "，", "如", "下面", "的", "输出", "所示", "：", "\n", "{", "'", "speed", "'", ":", " ", "'", "medium", "'", ",", " ", "'", "color", "'", ":", " ", "'", "yellow", "'", ",", " ", "'", "points", "'", ":", " ", "10", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "medium", "'", ",", " ", "'", "color", "'", ":", " ", "'", "yellow", "'", ",", " ", "'", "points", "'", ":", " ", "10", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "medium", "'", ",", " ", "'", "color", "'", ":", " ", "'", "yellow", "'", ",", " ", "'", "points", "'", ":", " ", "10", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}"], ["{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "{", "'", "speed", "'", ":", " ", "'", "slow", "'", ",", " ", "'", "color", "'", ":", " ", "'", "green", "'", ",", " ", "'", "points", "'", ":", " ", "5", "}", "\n", "...", "\n", "你", "可以", "进一步", "扩展", "这个", "循环", "，", "在", "其中", "添加", "一个", "elif", " ", "代码", "块", "，", "将", "黄色", "外星人", "改为", "移动", "速度", "快且", "值", "15", "个点", "的", "红色", "外星人", "，", "如下", "所示", "（", "这里", "只", "列出", "了", "循环", "，", "而", "没有", "列出", "整个", "程序", "）", "：", "\n", "for", " ", "alien", " ", "in", " ", "aliens", "[", "0", ":", "3", "]", ":", "\n", " ", " ", " ", " ", "if", " ", "alien", "[", "'", "color", "'", "]", " ", "=", "=", " ", "'", "green", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "color", "'", "]", " ", "=", " ", "'", "yellow", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "speed", "'", "]", " ", "=", " ", "'", "medium", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "points", "'", "]", " ", "=", " ", "10", "\n", " ", " ", " ", " ", "elif", " ", "alien", "[", "'", "color", "'", "]", " ", "=", "=", " ", "'", "yellow", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "color", "'", "]", " ", "=", " ", "'", "red", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "speed", "'", "]", " ", "=", " ", "'", "fast", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "alien", "[", "'", "points", "'", "]", " ", "=", " ", "15"], ["alien", "[", "'", "points", "'", "]", " ", "=", " ", "15", "\n", "经常", "需要", "在", "列表", "中", "包含", "大量", "的", "字典", "，", "而", "其中", "每个", "字典", "都", "包含", "特定", "对象", "的", "众多", "信息", "。", "例如", "，", "你", "可能", "需要", "为", "网站", "的", "每个", "用户", "创建", "一个", "字典", "（", "就", "像", "6.3", ".", "1", "节", "的", "user", ".", "py", "中", "那样", "）", "，", "并", "将", "这些", "\n", "字典", "存储", "在", "一个", "名为", "users", " ", "的", "列表", "中", "。", "在", "这个", "列表", "中", "，", "所有", "字典", "的", "结构", "都", "相同", "，", "因此", "你", "可以", "遍历", "这个", "列表", "，", "并", "以", "相同", "的", "方式", "处理", "其中", "的", "每个", "字典", "。", "\n", "6.4", ".", "2", "　", "在", "字典", "中", "存储", "列表", "\n", "　", "在", "字典", "中", "存储", "列表", "\n", "有时候", "，", "需要", "将", "列表", "存储", "在", "字典", "中", "，", "而", "不是", "将", "字典", "存储", "在", "列表", "中", "。", "例如", "，", "你", "如何", "描述", "顾客", "点", "的", "比萨", "呢", "？", "如果", "使用", "列表", "，", "只能", "存储", "要", "添加", "的", "比萨", "配料", "；", "但", "如果", "使用", "字典", "，", "就", "不仅", "可", "\n", "在", "其中", "包含", "配料", "列表", "，", "还", "可", "包含", "其他", "有关", "比萨", "的", "描述", "。", "\n", "在", "下面", "的", "示例", "中", "，", "存储", "了", "比萨", "的", "两", "方面", "信息", "：", "外皮", "类型", "和", "配料", "列表", "。", "其中", "的", "配料", "列表", "是", "一个", "与键", "'", "toppings", "'", " ", "相关联", "的", "值", "。", "要", "访问", "该", "列表", "，", "我们", "使用", "字典", "名和键", "'", "toppings", "'", "\n", "，", "就", "像", "访问", "字典", "中", "的", "其他", "值", "一样", "。", "这", "将", "返回", "一个", "配料", "列表", "，", "而", "不是", "单个", "值", "：", "\n", "pizza", ".", "py", "\n", " ", " ", "#", " ", "存储", "所点", "比萨", "的", "信息", "\n", "❶", " ", "pizza", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "crust", "'", ":", " ", "'", "thick", "'", ","], ["#", " ", "存储", "所点", "比萨", "的", "信息", "\n", "❶", " ", "pizza", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "crust", "'", ":", " ", "'", "thick", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "toppings", "'", ":", " ", "[", "'", "mushrooms", "'", ",", " ", "'", "extra", " ", "cheese", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", "#", " ", "概述", "所点", "的", "比萨", "\n", "❷", " ", "print", "(", "\"", "You", " ", "ordered", " ", "a", " ", "\"", " ", "+", " ", "pizza", "[", "'", "crust", "'", "]", " ", "+", " ", "\"", "-", "crust", " ", "pizza", " ", "\"", " ", "+", "\n", " ", " ", " ", " ", " ", " ", "\"", "with", " ", "the", " ", "following", " ", "toppings", ":", "\"", ")", "\n", "❸", " ", "for", " ", "topping", " ", "in", " ", "pizza", "[", "'", "toppings", "'", "]", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "t", "\"", " ", "+", " ", "topping", ")"], ["我们", "首先", "创建", "了", "一个", "字典", "，", "其中", "存储", "了", "有关", "顾客", "所点", "比萨", "的", "信息", "（", "见", "❶", "）", "。", "在", "这个", "字典", "中", "，", "一个", "键", "是", "'", "crust", "'", " ", "，", "与", "之", "相关联", "的", "值", "是", "字符串", "'", "thick", "'", " ", "；", "下", "一个", "键", "是", "'", "toppings", "'", "\n", "，", "与", "之", "相关联", "的", "值", "是", "一个", "列表", "，", "其中", "存储", "了", "顾客", "要求", "添加", "的", "所有", "配料", "。", "制作", "前", "我们", "概述", "了", "顾客", "所点", "的", "比萨", "（", "见", "❷", "）", "。", "为", "打印", "配料", "，", "我们", "编写", "了", "一个", "for", " ", "循环", "（", "见", "❸", "）", "。", "为", "访问", "配", "\n", "料", "列表", "，", "我们", "使用", "了", "键", "'", "toppings", "'", " ", "，", "这样", "Python", "将", "从", "字典", "中", "提取", "配料", "列表", "。", "\n", "下面", "的", "输出", "概述", "了", "要", "制作", "的", "比萨", "：", "\n", "You", " ", "ordered", " ", "a", " ", "thick", "-", "crust", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", " ", " ", " ", " ", "mushrooms", "\n", " ", " ", " ", " ", "extra", " ", "cheese", "\n", "每当", "需要", "在", "字典", "中将", "一个", "键", "关联", "到", "多个", "值时", "，", "都", "可以", "在", "字典", "中", "嵌套", "一个", "列表", "。", "在", "本章", "前面", "有关", "喜欢", "的", "编程语言", "的", "示例", "中", "，", "如果", "将", "每个", "人", "的", "回答", "都", "存储", "在", "一个", "列表", "中", "，", "被调查者", "就", "\n", "可", "选择", "多种", "喜欢", "的", "语言", "。", "在", "这种", "情况", "下", "，", "当", "我们", "遍历", "字典", "时", "，", "与", "每个", "被调查者", "相关联", "的", "都", "是", "一个", "语言", "列表", "，", "而", "不是", "一种", "语言", "；", "因此", "，", "在", "遍历", "该", "字典", "的", "for", " ", "循环", "中", "，", "我们", "需要", "再", "使", "\n", "用", "一个", "for", " ", "循环", "来", "遍历", "与", "被调查者", "相关联", "的", "语言", "列表", "："], ["用", "一个", "for", " ", "循环", "来", "遍历", "与", "被调查者", "相关联", "的", "语言", "列表", "：", "\n", "favorite", "_", "languages", ".", "py", "\n", "❶", " ", "favorite", "_", "languages", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "jen", "'", ":", " ", "[", "'", "python", "'", ",", " ", "'", "ruby", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "sarah", "'", ":", " ", "[", "'", "c", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "edward", "'", ":", " ", "[", "'", "ruby", "'", ",", " ", "'", "go", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "phil", "'", ":", " ", "[", "'", "python", "'", ",", " ", "'", "haskell", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❷", " ", "for", " ", "name", ",", " ", "languages", " ", "in", " ", "favorite", "_", "languages", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "n", "\"", " ", "+", " ", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "'", "s", " ", "favorite", " ", "languages", " ", "are", ":", "\"", ")", "\n", "❸", " ", " ", " ", " ", " ", "for", " ", "language", " ", "in", " ", "languages", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "t", "\"", " ", "+", " ", "language", ".", "title", "(", ")", ")", "\n", "正如", "你", "看到", "的", "，", "现在", "与", "每个", "名字", "相关联", "的", "值", "都", "是", "一个", "列表", "（", "见", "❶", "）", "。", "请", "注意", "，", "有些", "人", "喜欢", "的", "语言", "只有", "一种", "，", "而", "有些", "人有", "多种", "。", "遍历", "字典", "时", "（", "见", "❷", "）", "，", "我们", "使用", "了", "变量", "languages"], ["来", "依次", "存储", "字典", "中", "的", "每个", "值", "，", "因为", "我们", "知道", "这些", "值", "都", "是", "列表", "。", "在", "遍历", "字典", "的", "主", "循环", "中", "，", "我们", "又", "使用", "了", "一个", "for", " ", "循环", "来", "遍历", "每个", "人", "喜欢", "的", "语言", "列表", "（", "见", "❸", "）", "。", "现在", "，", "每个", "人想", "列出", "\n", "多少", "种", "喜欢", "的", "语言", "都", "可以", "：", "\n", "Jen", "'", "s", " ", "favorite", " ", "languages", " ", "are", ":", "\n", " ", " ", " ", " ", "Python", "\n", " ", " ", " ", " ", "Ruby", "\n", "Sarah", "'", "s", " ", "favorite", " ", "languages", " ", "are", ":", "\n", " ", " ", " ", " ", "C", "\n", "Phil", "'", "s", " ", "favorite", " ", "languages", " ", "are", ":", "\n", " ", " ", " ", " ", "Python", "\n", " ", " ", " ", " ", "Haskell", "\n", "Edward", "'", "s", " ", "favorite", " ", "languages", " ", "are", ":", "\n", " ", " ", " ", " ", "Ruby", "\n", " ", " ", " ", " ", "Go", "\n", "为", "进一步", "改进", "这个", "程序", "，", "可", "在", "遍历", "字典", "的", "for", " ", "循环", "开头", "添加", "一条", "if", " ", "语句", "，", "通过", "查看", "len", "(", "languages", ")", " ", "的", "值来", "确定", "当前", "的", "被调查者", "喜欢", "的", "语言", "是否", "有", "多种", "。", "如果", "他", "喜欢", "的", "语言", "有", "\n", "多种", "，", "就", "像", "以前", "一样", "显示", "输出", "；", "如果", "只有", "一种", "，", "就", "相应", "修改", "输出", "的", "措辞", "，", "如", "显示", "Sarah", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "C", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "列表", "和", "字典", "的", "嵌套", "层级", "不应", "太多", "。", "如果", "嵌套", "层级", "比", "前面", "的", "示例", "多得多", "，", "很", "可能", "有", "更", "简单", "的", "解决问题", "的", "方案", "。", "\n", "6.4", ".", "3", "　", "在", "字典", "中", "存储", "字典"], ["6.4", ".", "3", "　", "在", "字典", "中", "存储", "字典", "\n", "　", "在", "字典", "中", "存储", "字典", "\n", "可", "在", "字典", "中", "嵌套", "字典", "，", "但", "这样", "做时", "，", "代码", "可能", "很快", "复杂", "起来", "。", "例如", "，", "如果", "有", "多个", "网站", "用户", "，", "每个", "都", "有", "独特", "的", "用户名", "，", "可", "在", "字典", "中将", "用户名", "作为", "键", "，", "然后", "将", "每位", "用户", "的", "信息", "存储", "在", "\n", "一个", "字典", "中", "，", "并", "将", "该", "字典", "作为", "与", "用户名", "相关联", "的", "值", "。", "在", "下面", "的", "程序", "中", "，", "对于", "每位", "用户", "，", "我们", "都", "存储", "了", "其", "三项", "信息", "：", "名", "、", "姓", "和", "居住地", "；", "为", "访问", "这些", "信息", "，", "我们", "遍历", "所有", "的", "用户名", "，", "\n", "并", "访问", "与", "每个", "用户名", "相关联", "的", "信息", "字典", "：", "\n", "many", "_", "users", ".", "py", "\n", " ", " ", "users", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "aeinstein", "'", ":", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "first", "'", ":", " ", "'", "albert", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "last", "'", ":", " ", "'", "einstein", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "location", "'", ":", " ", "'", "princeton", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "}", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "mcurie", "'", ":", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "first", "'", ":", " ", "'", "marie", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "last", "'", ":", " ", "'", "curie", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "location", "'", ":", " ", "'", "paris", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "}", ",", "\n", " ", " ", " ", " ", " ", " ", "}"], ["}", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", "❶", " ", "for", " ", "username", ",", " ", "user", "_", "info", " ", "in", " ", "users", ".", "items", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nUsername", ":", " ", "\"", " ", "+", " ", "username", ")", "\n", "❸", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "user", "_", "info", "[", "'", "first", "'", "]", " ", "+", " ", "\"", " ", "\"", " ", "+", " ", "user", "_", "info", "[", "'", "last", "'", "]", "\n", " ", " ", " ", " ", " ", " ", "location", " ", "=", " ", "user", "_", "info", "[", "'", "location", "'", "]", "\n", "❹", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "tFull", " ", "name", ":", " ", "\"", " ", "+", " ", "full", "_", "name", ".", "title", "(", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "tLocation", ":", " ", "\"", " ", "+", " ", "location", ".", "title", "(", ")", ")", "\n", "我们", "首先", "定义", "了", "一个", "名为", "users", " ", "的", "字典", "，", "其中", "包含", "两个", "键", "：", "用户名", "'", "aeinstein", "'", " ", "和", "'", "mcurie", "'", " ", "；", "与", "每个", "键", "相关联", "的", "值", "都", "是", "一个", "字典", "，", "其中", "包含", "用户", "的", "名", "、", "姓", "和", "居住地", "。", "在", "❶", "\n", "处", "，", "我们", "遍历", "字典", "users", " ", "，", "让", "Python", "依次", "将", "每个", "键", "存储", "在", "变量", "username", " ", "中", "，", "并", "依次", "将", "与", "当前", "键", "相关联", "的", "字典", "存储", "在", "变量", "user", "_", "info", " ", "中", "。", "在", "主", "循环", "内部", "的", "❷", "处", "，", "我们", "将", "用户名", "\n", "打印", "出来", "。"], ["打印", "出来", "。", "\n", "在", "❸", "处", "，", "我们", "开始", "访问", "内部", "的", "字典", "。", "变量", "user", "_", "info", " ", "包含", "用户", "信息", "字典", "，", "而", "该", "字典", "包含", "三个", "键", "：", "'", "first", "'", " ", "、", "'", "last", "'", " ", "和", "'", "location", "'", " ", "；", "对于", "每位", "用户", "，", "我们", "都", "使用", "这些", "键来", "\n", "生成", "整洁", "的", "姓名", "和", "居住地", "，", "然后", "打印", "有关", "用户", "的", "简要", "信息", "（", "见", "❹", "）", "：", "\n", "Username", ":", " ", "aeinstein", "\n", " ", " ", " ", " ", "Full", " ", "name", ":", " ", "Albert", " ", "Einstein", "\n", " ", " ", " ", " ", "Location", ":", " ", "Princeton"], ["Username", ":", " ", "mcurie", "\n", " ", " ", " ", " ", "Full", " ", "name", ":", " ", "Marie", " ", "Curie", "\n", " ", " ", " ", " ", "Location", ":", " ", "Paris", "\n", "请", "注意", "，", "表示", "每位", "用户", "的", "字典", "的", "结构", "都", "相同", "，", "虽然", "Python", "并", "没有", "这样", "的", "要求", "，", "但", "这", "使得", "嵌套", "的", "字典", "处理", "起来", "更", "容易", "。", "倘若", "表示", "每位", "用户", "的", "字典", "都", "包含", "不同", "的", "键", "，", "for", " ", "循环", "内部", "的", "\n", "代码", "将", "更", "复杂", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "6", "-", "7", " ", "人", "\n", "人", " ", "：", "在", "为", "完成", "练习", "6", "-", "1", "而", "编写", "的", "程序", "中", "，", "再", "创建", "两个", "表示", "人", "的", "字典", "，", "然后", "将", "这", "三个", "字典", "都", "存储", "在", "一个", "名为", "people", " ", "的", "列表", "中", "。", "遍历", "这个", "列表", "，", "将", "其中", "每个", "人", "的", "所有", "\n", "信息", "都", "打印", "出来", "。", "\n", "6", "-", "8", " ", "宠物", "\n", "宠物", " ", "：", "创建", "多个", "字典", "，", "对于", "每个", "字典", "，", "都", "使用", "一个", "宠物", "的", "名称", "来", "给", "它", "命名", "；", "在", "每个", "字典", "中", "，", "包含", "宠物", "的", "类型", "及其", "主人", "的", "名字", "。", "将", "这些", "字典", "存储", "在", "一个", "名为", "pets", "\n", "的", "列表", "中", "，", "再", "遍历", "该", "列表", "，", "并", "将", "宠物", "的", "所有", "信息", "都", "打印", "出来", "。", "\n", "6", "-", "9", " ", "喜欢", "的", "地方", "\n", "喜欢", "的", "地方", " ", "：", "创建", "一个", "名为", "favorite", "_", "places", " ", "的", "字典", "。", "在", "这个", "字典", "中", "，", "将", "三个", "人", "的", "名字", "用作", "键", "；", "对于", "其中", "的", "每个", "人", "，", "都", "存储", "他", "喜欢", "的", "1", "~", "3", "个", "地方", "。", "为", "让", "这个", "练", "\n", "习", "更", "有趣", "些", "，", "可", "让", "一些", "朋友", "指出", "他们", "喜欢", "的", "几个", "地方", "。", "遍历", "这个", "字典", "，", "并", "将", "其中", "每个", "人", "的", "名字", "及其", "喜欢", "的", "地方", "打印", "出来", "。"], ["6", "-", "10", " ", "喜欢", "的", "数字", "\n", "喜欢", "的", "数字", " ", "：", "修改", "为", "完成", "练习", "6", "-", "2", "而", "编写", "的", "程序", "，", "让", "每个", "人", "都", "可以", "有", "多个", "喜欢", "的", "数字", "，", "然后", "将", "每个", "人", "的", "名字", "及其", "喜欢", "的", "数字", "打印", "出来", "。", "\n", "6", "-", "11", " ", "城市", "\n", "城市", " ", "：", "创建", "一个", "名为", "cities", " ", "的", "字典", "，", "其中", "将", "三个", "城市", "名", "用作", "键", "；", "对于", "每座", "城市", "，", "都", "创建", "一个", "字典", "，", "并", "在", "其中", "包含", "该", "城市", "所属", "的", "国家", "、", "人口", "约数", "以及", "一个", "有关", "该", "\n", "城市", "的", "事实", "。", "在", "表示", "每座", "城市", "的", "字典", "中", "，", "应", "包含", "country", " ", "、", "population", " ", "和", "fact", " ", "等键", "。", "将", "每座", "城市", "的", "名字", "以及", "有关", "它们", "的", "信息", "都", "打印", "出来", "。", "\n", "6", "-", "12", " ", "扩展", "\n", "扩展", " ", "：", "本章", "的", "示例", "足够", "复杂", "，", "可以", "以", "很多", "方式", "进行", "扩展", "了", "。", "请", "对", "本章", "的", "一个", "示例", "进行", "扩展", "：", "添加", "键和值", "、", "调整", "程序", "要", "解决", "的", "问题", "或", "改进", "输出", "的", "格式", "。", "\n", "6.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "定义", "字典", "，", "以及", "如何", "使用", "存储", "在", "字典", "中", "的", "信息", "；", "如何", "访问", "和", "修改", "字典", "中", "的", "元素", "，", "以及", "如何", "遍历", "字典", "中", "的", "所有", "信息", "；", "如何", "遍历", "字典", "中", "所有", "的", "键", "-", "值", "对", "、", "所", "\n", "有", "的", "键", "和", "所有", "的", "值", "；", "如何", "在", "列表", "中", "嵌套", "字典", "、", "在", "字典", "中", "嵌套", "列表", "以及", "在", "字典", "中", "嵌套", "字典", "。", "\n", "在", "下", "一章", "中", "，", "你", "将", "学习", "while", " ", "循环", "以及", "如何", "从", "用户", "那里", "获取", "输入", "。", "这是", "激动人心", "的", "一章", "，", "让", "你", "知道", "如何", "将", "程序", "变成", "交互性", "的", "—", "—", "能够", "对", "用户", "输入", "作出", "响应", "。", "\n", "第"], ["第", "\n", "第", " ", "7", " ", "章", "　", "用户", "输入", "和", "\n", "章", "　", "用户", "输入", "和", "while", " ", "循环", "\n", "循环", "\n", "大多数", "程序", "都", "旨在", "解决", "最终用户", "的", "问题", "，", "为此", "通常", "需要", "从", "用户", "那里", "获取", "一些", "信息", "。", "例如", "，", "假设", "有人", "要", "判断", "自己", "是否", "到", "了", "投票", "的", "年龄", "，", "要", "编写", "回答", "这个", "问题", "的", "程序", "，", "就", "\n", "需要", "知道", "用户", "的", "年龄", "，", "这样", "才能", "给出", "答案", "。", "因此", "，", "这种", "程序", "需要", "让", "用户", "输入", "\n", "输入", " ", "其", "年龄", "，", "再", "将", "其", "与", "投票", "年龄", "进行", "比较", "，", "以", "判断", "用户", "是否", "到", "了", "投票", "的", "年龄", "，", "再", "给出", "结果", "。", "\n", "在", "本章", "中", "，", "你", "将", "学习", "如何", "接受", "用户", "输入", "，", "让", "程序", "能够", "对", "其", "进行", "处理", "。", "在", "程序", "需要", "一个", "名字", "时", "，", "你", "需要", "提示", "用户", "输入", "该", "名字", "；", "程序", "需要", "一个", "名单", "时", "，", "你", "需要", "提示", "用户", "输", "\n", "入", "一系列", "名字", "。", "为此", "，", "你", "需要", "使用", "函数", "input", "(", ")", " ", "。", "\n", "你", "还", "将", "学习", "如何", "让", "程序", "不断", "地", "运行", "，", "让", "用户", "能够", "根据", "需要", "输入", "信息", "，", "并", "在", "程序", "中", "使用", "这些", "信息", "。", "为此", "，", "你", "需要", "使用", "while", " ", "循环", "让", "程序", "不断", "地", "运行", "，", "直到", "指定", "的", "条件", "不", "\n", "满足", "为止", "。", "\n", "通过", "获取", "用户", "输入", "并", "学会", "控制程序", "的", "运行", "时间", "，", "可", "编写出", "交互式", "程序", "。", "\n", "7.1", "　", "函数", "\n", "　", "函数", "input", "(", ")", " ", "的", "工作", "原理", "\n", "的", "工作", "原理", "\n", "函数", "input", "(", ")", " ", "让", "程序", "暂停", "运行", "，", "等待", "用户", "输入", "一些", "文本", "。", "获取", "用户", "输入", "后", "，", "Python", "将", "其", "存储", "在", "一个", "变量", "中", "，", "以", "方便", "你", "使用", "。"], ["例如", "，", "下面", "的", "程序", "让", "用户", "输入", "一些", "文本", "，", "再", "将", "这些", "文本", "呈现", "给", "用户", "："], ["parrot", ".", "py", "\n", "message", " ", "=", " ", "input", "(", "\"", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", " ", "\"", ")", "\n", "print", "(", "message", ")", "\n", "函数", "input", "(", ")", " ", "接受", "一个", "参数", "：", "即要", "向", "用户", "显示", "的", "提示", "\n", "提示", " ", "或", "说明", "，", "让", "用户", "知道", "该", "如何", "做", "。", "在", "这个", "示例", "中", "，", "Python", "运行", "第", "1", "行", "代码", "时", "，", "用户", "将", "看到", "提示", "Tell", " ", "me", " ", "something", ",", " ", "and", "\n", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", " ", "。", "程序", "等待", "用户", "输入", "，", "并", "在", "用户", "按", "回车键", "后", "继续", "运行", "。", "输入", "存储", "在", "变量", "message", " ", "中", "，", "接下来", "的", "print", "(", "message", ")", " ", "将", "输入", "呈现", "给", "用", "\n", "户", "：", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", " ", "Hello", " ", "everyone", "!", "\n", "Hello", " ", "everyone", "!", "\n", "注意", "\n", "注意", " ", "　", "Sublime", " ", "Text", "不能", "运行", "提示", "用户", "输入", "的", "程序", "。", "你", "可以", "使用", "Sublime", " ", "Text", "来", "编写", "提示", "用户", "输入", "的", "程序", "，", "但", "必须", "从", "终端", "运行", "它们", "。", "详情", "请参阅", "1.4", "节", "。", "\n", "7.1", ".", "1", "　", "编写", "清晰", "的", "程序", "\n", "　", "编写", "清晰", "的", "程序"], ["7.1", ".", "1", "　", "编写", "清晰", "的", "程序", "\n", "　", "编写", "清晰", "的", "程序", "\n", "每当", "你", "使用", "函数", "input", "(", ")", " ", "时", "，", "都", "应", "指定", "清晰", "而", "易于", "明白", "的", "提示", "，", "准确", "地", "指出", "你", "希望", "用户", "提供", "什么样", "的", "信息", "—", "—", "指出", "用户", "该", "输入", "任何", "信息", "的", "提示", "都行", "，", "如下", "所示", "：", "\n", "greeter", ".", "py", "\n", "name", " ", "=", " ", "input", "(", "\"", "Please", " ", "enter", " ", "your", " ", "name", ":", " ", "\"", ")", "\n", "print", "(", "\"", "Hello", ",", " ", "\"", " ", "+", " ", "name", " ", "+", " ", "\"", "!", "\"", ")", "\n", "通过", "在", "提示", "末尾", "（", "这里", "是", "冒号", "后面", "）", "包含", "一个", "空格", "，", "可", "将", "提示", "与", "用户", "输入", "分开", "，", "让", "用户", "清楚", "地", "知道", "其", "输入", "始于", "何处", "，", "如下", "所示", "：", "\n", "Please", " ", "enter", " ", "your", " ", "name", ":", " ", "Eric", "\n", "Hello", ",", " ", "Eric", "!", "\n", "有时候", "，", "提示", "可能", "超过", "一行", "，", "例如", "，", "你", "可能", "需要", "指出", "获取", "特定", "输入", "的", "原因", "。", "在", "这种", "情况", "下", "，", "可", "将", "提示", "存储", "在", "一个", "变量", "中", "，", "再", "将", "该", "变量", "传递", "给", "函数", "input", "(", ")", " ", "。", "这样", "，", "即便", "提示", "超过", "\n", "一行", "，", "input", "(", ")", " ", "语句", "也", "非常", "清晰", "。", "\n", "greeter", ".", "py", "\n", "prompt", " ", "=", " ", "\"", "If", " ", "you", " ", "tell", " ", "us", " ", "who", " ", "you", " ", "are", ",", " ", "we", " ", "can", " ", "personalize", " ", "the", " ", "messages", " ", "you", " ", "see", ".", "\"", "\n", "prompt", " ", "+", "=", " ", "\"", "\\", "nWhat", " ", "is", " ", "your", " ", "first", " ", "name", "?", " ", "\""], ["prompt", " ", "+", "=", " ", "\"", "\\", "nWhat", " ", "is", " ", "your", " ", "first", " ", "name", "?", " ", "\"", "\n", "name", " ", "=", " ", "input", "(", "prompt", ")", "\n", "print", "(", "\"", "\\", "nHello", ",", " ", "\"", " ", "+", " ", "name", " ", "+", " ", "\"", "!", "\"", ")", "\n", "这个", "示例", "演示", "了", "一种", "创建", "多行", "字符串", "的", "方式", "。", "第", "1", "行将", "消息", "的", "前半部", "分", "存储", "在", "变量", "prompt", " ", "中", "；", "在", "第", "2", "行中", "，", "运算符", "+", "=", " ", "在", "存储", "在", "prompt", " ", "中", "的", "字符串", "末尾", "附加", "一个", "字符串", "。", "\n", "最终", "的", "提示", "横跨", "两行", "，", "并", "在", "问号", "后面", "包含", "一个", "空格", "，", "这", "也", "是", "出于", "清晰", "考虑", "：", "\n", "If", " ", "you", " ", "tell", " ", "us", " ", "who", " ", "you", " ", "are", ",", " ", "we", " ", "can", " ", "personalize", " ", "the", " ", "messages", " ", "you", " ", "see", ".", "\n", "What", " ", "is", " ", "your", " ", "first", " ", "name", "?", " ", "Eric", "\n", "Hello", ",", " ", "Eric", "!", "\n", "7.1", ".", "2", "　", "使用", "\n", "　", "使用", "int", "(", ")", " ", "来", "获取", "数值", "输入", "\n", "来", "获取", "数值", "输入", "\n", "使用", "函数", "input", "(", ")", " ", "时", "，", "Python", "将", "用户", "输入", "解读", "为", "字符串", "。", "请", "看", "下面", "让", "用户", "输入", "其", "年龄", "的", "解释器", "会话", "：", "\n", ">", ">", ">", " ", "age", " ", "=", " ", "input", "(", "\"", "How", " ", "old", " ", "are", " ", "you", "?", " ", "\"", ")", "\n", "How", " ", "old", " ", "are", " ", "you", "?", " ", "21", "\n", ">", ">", ">", " ", "age", "\n", "'", "21", "'"], ["How", " ", "old", " ", "are", " ", "you", "?", " ", "21", "\n", ">", ">", ">", " ", "age", "\n", "'", "21", "'", "\n", "用户", "输入", "的", "是", "数字", "21", "，", "但", "我们", "请求", "Python", "提供", "变量", "age", " ", "的", "值时", "，", "它", "返回", "的", "是", "'", "21", "'", " ", "—", "—", "用户", "输入", "的", "数值", "的", "字符串", "表示", "。", "我们", "怎么", "知道", "Python", "将", "输入", "解读", "成", "了", "字符串", "呢", "？", "因为", "这个", "数", "\n", "字用", "引号", "括起", "了", "。", "如果", "我们", "只想", "打印", "输入", "，", "这", "一点", "问题", "都", "没有", "；", "但", "如果", "你", "试图", "将", "输入", "作为", "数字", "使用", "，", "就", "会", "引发", "错误", "：", "\n", " ", " ", ">", ">", ">", " ", "age", " ", "=", " ", "input", "(", "\"", "How", " ", "old", " ", "are", " ", "you", "?", " ", "\"", ")", "\n", " ", " ", "How", " ", "old", " ", "are", " ", "you", "?", " ", "21", "\n", "❶", " ", ">", ">", ">", " ", "age", " ", ">", "=", " ", "18", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "File", " ", "\"", "<", "stdin", ">", "\"", ",", " ", "line", " ", "1", ",", " ", "in", " ", "<", "module", ">", "\n", "❷", " ", "TypeError", ":", " ", "unorderable", " ", "types", ":", " ", "str", "(", ")", " ", ">", "=", " ", "int", "(", ")", "\n", "你", "试图", "将", "输入", "用于", "数值", "比较", "时", "（", "见", "❶", "）", "，", "Python", "会", "引发", "错误", "，", "因为", "它", "无法", "将", "字符串", "和", "整数", "进行", "比较", "：", "不能", "将", "存储", "在", "age", " ", "中", "的", "字符串", "'", "21", "'", " ", "与", "数值", "18", " ", "进行", "比较", "（", "见", "❷", "）", "。"], ["为", "解决", "这个", "问题", "，", "可", "使用", "函数", "int", "(", ")", " ", "，", "它", "让", "Python", "将", "输入", "视为", "数值", "。", "函数", "int", "(", ")", " ", "将", "数字", "的", "字符串", "表示", "转换", "为", "数值", "表示", "，", "如下", "所示", "：", "\n", " ", " ", ">", ">", ">", " ", "age", " ", "=", " ", "input", "(", "\"", "How", " ", "old", " ", "are", " ", "you", "?", " ", "\"", ")", "\n", " ", " ", "How", " ", "old", " ", "are", " ", "you", "?", " ", "21", "\n", "❶", " ", ">", ">", ">", " ", "age", " ", "=", " ", "int", "(", "age", ")", "\n", " ", " ", ">", ">", ">", " ", "age", " ", ">", "=", " ", "18", "\n", " ", " ", "True"], ["在", "这个", "示例", "中", "，", "我们", "在", "提示", "时", "输入", "21", " ", "后", "，", "Python", "将", "这个", "数字", "解读", "为", "字符串", "，", "但", "随后", "int", "(", ")", " ", "将", "这个", "字符串", "转换成", "了", "数值", "表示", "（", "见", "❶", "）", "。", "这样", "Python", "就", "能", "运行", "条件", "测试", "了", "：", "将", "变", "\n", "量", "age", " ", "（", "它", "现在", "包含", "数值", "21", "）", "同", "18", " ", "进行", "比较", "，", "看", "它", "是否", "大于", "或", "等于", "18", "。", "测试", "结果", "为", "True", " ", "。", "\n", "如何", "在", "实际", "程序", "中", "使用", "函数", "int", "(", ")", " ", "呢", "？", "请", "看", "下面", "的", "程序", "，", "它", "判断", "一个", "人", "是否", "满足", "坐", "过山车", "的", "身高", "要求", "：", "\n", "rollercoaster", ".", "py", "\n", "height", " ", "=", " ", "input", "(", "\"", "How", " ", "tall", " ", "are", " ", "you", ",", " ", "in", " ", "inches", "?", " ", "\"", ")", "\n", "height", " ", "=", " ", "int", "(", "height", ")", "\n", "if", " ", "height", " ", ">", "=", " ", "36", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nYou", "'", "re", " ", "tall", " ", "enough", " ", "to", " ", "ride", "!", "\"", ")", "\n", "else", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nYou", "'", "ll", " ", "be", " ", "able", " ", "to", " ", "ride", " ", "when", " ", "you", "'", "re", " ", "a", " ", "little", " ", "older", ".", "\"", ")", "\n", "在", "这个", "程序", "中", "，", "为何", "可以", "将", "height", " ", "同", "36", " ", "进行", "比较", "呢", "？", "因为", "在", "比较", "前", "，", "height", " ", "=", " ", "int", "(", "height", ")", " ", "将", "输入", "转换成", "了", "数值", "表示", "。", "如果", "输入", "的", "数字", "大于", "或", "等于", "36", "，", "我们", "就", "告诉", "用户", "\n", "他", "满足", "身高", "条件", "："], ["他", "满足", "身高", "条件", "：", "\n", "How", " ", "tall", " ", "are", " ", "you", ",", " ", "in", " ", "inches", "?", " ", "71", "\n", "You", "'", "re", " ", "tall", " ", "enough", " ", "to", " ", "ride", "!", "\n", "将", "数值", "输入", "用于", "计算", "和", "比较", "前", "，", "务必", "将", "其", "转换", "为", "数值", "表示", "。", "\n", "7.1", ".", "3", "　", "求模", "运算符", "\n", "　", "求模", "运算符", "\n", "处理", "数值", "信息", "时", "，", "求模", "运算符", "\n", "求模", "运算符", " ", "（", "%", "）", "是", "一个", "很", "有用", "的", "工具", "，", "它", "将", "两个", "数", "相除", "并", "返回", "余数", "：", "\n", ">", ">", ">", " ", "4", " ", "%", " ", "3", "\n", "1", "\n", ">", ">", ">", " ", "5", " ", "%", " ", "3", "\n", "2", "\n", ">", ">", ">", " ", "6", " ", "%", " ", "3", "\n", "0", "\n", ">", ">", ">", " ", "7", " ", "%", " ", "3", "\n", "1", "\n", "求模", "运算符", "不会", "指出", "一个", "数是", "另", "一个", "数", "的", "多少倍", "，", "而", "只", "指出", "余数", "是", "多少", "。", "\n", "如果", "一个", "数可", "被", "另", "一个", "数", "整除", "，", "余数", "就", "为", "0", "，", "因此", "求模", "运算符", "将", "返回", "0", "。", "你", "可", "利用", "这", "一点", "来", "判断", "一个", "数是", "奇数", "还是", "偶数", "：", "\n", "even", "_", "or", "_", "odd", ".", "py", "\n", "number", " ", "=", " ", "input", "(", "\"", "Enter", " ", "a", " ", "number", ",", " ", "and", " ", "I", "'", "ll", " ", "tell", " ", "you", " ", "if", " ", "it", "'", "s", " ", "even", " ", "or", " ", "odd", ":", " ", "\"", ")", "\n", "number", " ", "=", " ", "int", "(", "number", ")", "\n", "if", " ", "number", " ", "%", " ", "2", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nThe", " ", "number", " ", "\"", " ", "+", " ", "str", "(", "number", ")", " ", "+", " ", "\"", " ", "is", " ", "even", ".", "\"", ")", "\n", "else", ":"], ["else", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nThe", " ", "number", " ", "\"", " ", "+", " ", "str", "(", "number", ")", " ", "+", " ", "\"", " ", "is", " ", "odd", ".", "\"", ")", "\n", "偶数", "都", "能", "被", "2", "整除", "，", "因此", "对", "一个", "数", "（", "number", " ", "）", "和", "2", "执行", "求模", "运算", "的", "结果", "为", "零", "，", "即", "number", " ", "%", " ", "2", " ", "=", "=", " ", "0", " ", "，", "那么", "这个", "数", "就是", "偶数", "；", "否则", "就是", "奇数", "。", "\n", "Enter", " ", "a", " ", "number", ",", " ", "and", " ", "I", "'", "ll", " ", "tell", " ", "you", " ", "if", " ", "it", "'", "s", " ", "even", " ", "or", " ", "odd", ":", " ", "42", "\n", "The", " ", "number", " ", "42", " ", "is", " ", "even", ".", "\n", "7.1", ".", "4", "　", "在", "\n", "　", "在", "Python", " ", "2.7", "中", "获取", "输入", "\n", "中", "获取", "输入", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "应", "使用", "函数", "raw", "_", "input", "(", ")", " ", "来", "提示", "用户", "输入", "。", "这个", "函数", "与", "Python", " ", "3", "中", "的", "input", "(", ")", " ", "一样", "，", "也", "将", "输入", "解读", "为", "字符串", "。", "\n", "Python", " ", "2.7", "也", "包含", "函数", "input", "(", ")", " ", "，", "但", "它", "将", "用户", "输入", "解读", "为", "Python", "代码", "，", "并", "尝试", "运行", "它们", "。", "因此", "，", "最好", "的", "结果", "是", "出现", "错误", "，", "指出", "Python", "不", "明白", "输入", "的", "代码", "；", "而", "最糟", "的", "结果", "是", "，", "将", "运行", "\n", "你", "原本", "无意", "运行", "的", "代码", "。", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "请", "使用", "raw", "_", "input", "(", ")", " ", "而", "不是", "input", "(", ")", " ", "来", "获取", "输入", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "7", "-", "1", " ", "汽车", "租赁"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "7", "-", "1", " ", "汽车", "租赁", "\n", "汽车", "租赁", " ", "：", "编写", "一个", "程序", "，", "询问", "用户", "要", "租赁", "什么样", "的", "汽车", "，", "并打印", "一条", "消息", "，", "如", "“", "Let", " ", "me", " ", "see", " ", "if", " ", "I", " ", "can", " ", "find", " ", "you", " ", "a", " ", "Subaru", "”", "。", "\n", "7", "-", "2", " ", "餐馆", "订位", "\n", "餐馆", "订位", " ", "：", "编写", "一个", "程序", "，", "询问", "用户", "有", "多少", "人", "用餐", "。", "如果", "超过", "8", "人", "，", "就", "打印", "一条", "消息", "，", "指出", "没有", "空桌", "；", "否则", "指出", "有空", "桌", "。", "\n", "7", "-", "3", " ", "10", "的", "整数倍", "\n", "的", "整数倍", " ", "：", "让", "用户", "输入", "一个", "数字", "，", "并", "指出", "这个", "数字", "是否是", "10", "的", "整数倍", "。", "\n", "7.2", "　", "\n", "　", "while", " ", "循环", "简介", "\n", "循环", "简介", "\n", "for", " ", "循环", "用于", "针对", "集合", "中", "的", "每个", "元素", "都", "一个", "代码", "块", "，", "而", "while", " ", "循环不断", "地", "运行", "，", "直到", "指定", "的", "条件", "不", "满足", "为止", "。", "\n", "7.2", ".", "1", "　", "使用", "\n", "　", "使用", "while", " ", "循环", "\n", "循环", "\n", "你", "可以", "使用", "while", " ", "循环", "来", "数数", "，", "例如", "，", "下面", "的", "while", " ", "循环", "从", "1", "数到", "5", "：", "\n", "counting", ".", "py"], ["current", "_", "number", " ", "=", " ", "1", "\n", "while", " ", "current", "_", "number", " ", "<", "=", " ", "5", ":", "\n", " ", " ", " ", " ", "print", "(", "current", "_", "number", ")", "\n", " ", " ", " ", " ", "current", "_", "number", " ", "+", "=", " ", "1", "\n", "在", "第", "1", "行", "，", "我们", "将", "current", "_", "number", " ", "设置", "为", "1", "，", "从而", "指定", "从", "1", "开始", "数", "。", "接下来", "的", "while", " ", "循环", "被", "设置", "成", "这样", "：", "只要", "current", "_", "number", " ", "小于", "或", "等于", "5", "，", "就", "接着", "运行", "这个", "循环", "。", "循环", "中", "\n", "的", "代码", "打印", "current", "_", "number", " ", "的", "值", "，", "再", "使用", "代码", "current", "_", "number", " ", "+", "=", " ", "1", " ", "（", "代码", "current", "_", "number", " ", "=", " ", "current", "_", "number", " ", "+", " ", "1", " ", "的", "简写", "）", "将", "其值加", "1", "。", "\n", "只要", "满足条件", "current", "_", "number", " ", "<", "=", " ", "5", " ", "，", "Python", "就", "接着", "运行", "这个", "循环", "。", "由于", "1", "小于", "5", "，", "因此", "Python", "打印", "1", " ", "，", "并", "将", "current", "_", "number", " ", "加", "1", "，", "使", "其", "为", "2", " ", "；", "由于", "2", "小于", "5", "，", "因此", "Python", "打", "\n", "印", "2", " ", "，", "并", "将", "current", "_", "number", " ", "加", "1", " ", "，", "使", "其", "为", "3", " ", "，", "以此类推", "。", "一旦", "current", "_", "number", " ", "大于", "5", "，", "循环", "将", "停止", "，", "整个", "程序", "也", "将", "到此结束", "：", "\n", "1", "\n", "2", "\n", "3", "\n", "4", "\n", "5"], ["1", "\n", "2", "\n", "3", "\n", "4", "\n", "5", "\n", "你", "每天", "使用", "的", "程序", "很", "可能", "就", "包含", "while", " ", "循环", "。", "例如", "，", "游戏", "使用", "while", " ", "循环", "，", "确保", "在", "玩家", "想玩时", "不断", "运行", "，", "并", "在", "玩家", "想", "退出", "时", "停止", "运行", "。", "如果", "程序", "在", "用户", "没有", "让", "它", "停止", "时", "停止", "运", "\n", "行", "，", "或者", "在", "用户", "要", "退出", "时", "还", "继续", "运行", "，", "那", "就", "太", "没有", "意思", "了", "；", "有鉴于此", "，", "while", " ", "循环", "很", "有用", "。", "\n", "7.2", ".", "2", "　", "让", "用户", "选择", "何时", "退出", "\n", "　", "让", "用户", "选择", "何时", "退出", "\n", "可", "使用", "while", " ", "循环", "让", "程序", "在", "用户", "愿意", "时", "不断", "地", "运行", "，", "如", "下面", "的", "程序", "parrot", ".", "py", "所示", "。", "我们", "在", "其中", "定义", "了", "一个", "退出", "值", "，", "只要", "用户", "输入", "的", "不是", "这个", "值", "，", "程序", "就", "接着", "运行", "：", "\n", "parrot", ".", "py", "\n", "❶", " ", "prompt", " ", "=", " ", "\"", "\\", "nTell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\"", "\n", " ", " ", "prompt", " ", "+", "=", " ", "\"", "\\", "nEnter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "\"", "\n", "❷", " ", "message", " ", "=", " ", "\"", "\"", "\n", "❸", " ", "while", " ", "message", " ", "!", "=", " ", "'", "quit", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "message", " ", "=", " ", "input", "(", "prompt", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "message", ")"], ["print", "(", "message", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "一条", "提示", "消息", "，", "告诉", "用户", "他", "有", "两个", "选择", "：", "要么", "输入", "一条", "消息", "，", "要么", "输入", "退出", "值", "（", "这里", "为", "'", "quit", "'", " ", "）", "。", "接下来", "，", "我们", "创建", "了", "一个", "变量", "—", "—", "message", " ", "（", "见", "❷", "）", "，", "\n", "用于", "存储用户", "输入", "的", "值", "。", "我们", "将", "变量", "message", " ", "的", "初始值", "设置", "为空", "字符串", "\"", "\"", " ", "，", "让", "Python", "首次", "执行", "while", " ", "代码", "行时", "有", "可供", "检查", "的", "东西", "。", "Python", "首次", "执行", "while", " ", "语句", "时", "，", "需要", "\n", "将", "message", " ", "的", "值", "与", "'", "quit", "'", " ", "进行", "比较", "，", "但", "此时", "用户", "还", "没有", "输入", "。", "如果", "没有", "可", "供", "比较", "的", "东西", "，", "Python", "将", "无法", "继续", "运行", "程序", "。", "为", "解决", "这个", "问题", "，", "我们", "必须", "给", "变量", "message", " ", "指定", "一个", "\n", "初始值", "。", "虽然", "这个", "初始值", "只是", "一个", "空", "字符串", "，", "但", "符合要求", "，", "让", "Python", "能够", "执行", "while", " ", "循环", "所", "需", "的", "比较", "。", "只要", "message", " ", "的", "值", "不是", "'", "quit", "'", " ", "，", "这个", "循环", "（", "见", "❸", "）", "就", "会", "不断", "运行", "。", "\n", "首次", "遇到", "这个", "循环", "时", "，", "message", " ", "是", "一个", "空", "字符串", "，", "因此", "Python", "进入", "这个", "循环", "。", "执行", "到", "代码", "行", "message", " ", "=", " ", "input", "(", "prompt", ")", " ", "时", "，", "Python", "显示", "提示", "消息", "，", "并", "等待", "用户", "输入", "。", "不管", "用"], ["户", "输入", "是", "什么", "，", "都", "将", "存储", "到", "变量", "message", " ", "中", "并打印", "出来", "；", "接下来", "，", "Python", "重新", "检查", "while", " ", "语句", "中", "的", "条件", "。", "只要", "用户", "输入", "的", "不是", "单词", "'", "quit", "'", " ", "，", "Python", "就", "会", "再次", "显示", "提示", "消息", "并", "等", "\n", "待", "用户", "输入", "。", "等到", "用户", "终于", "输入", "'", "quit", "'", " ", "后", "，", "Python", "停止", "执行", "while", " ", "循环", "，", "而", "整个", "程序", "也", "到此结束", "：", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "Hello", " ", "everyone", "!", "\n", "Hello", " ", "everyone", "!", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "Hello", " ", "again", ".", "\n", "Hello", " ", "again", ".", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "quit", "\n", "quit"], ["Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "quit", "\n", "quit", "\n", "这个", "程序", "很", "好", "，", "唯一", "美中不足", "的", "是", "，", "它", "将", "单词", "'", "quit", "'", " ", "也", "作为", "一条", "消息", "打印", "了", "出来", "。", "为", "修复", "这种", "问题", "，", "只", "需", "使用", "一个", "简单", "的", "if", " ", "测试", "：", "\n", "prompt", " ", "=", " ", "\"", "\\", "nTell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\"", "\n", "prompt", " ", "+", "=", " ", "\"", "\\", "nEnter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "\"", "\n", "message", " ", "=", " ", "\"", "\"", "\n", "while", " ", "message", " ", "!", "=", " ", "'", "quit", "'", ":", "\n", " ", " ", " ", " ", "message", " ", "=", " ", "input", "(", "prompt", ")", "\n", " ", " ", " ", " ", "if", " ", "message", " ", "!", "=", " ", "'", "quit", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "message", ")", "\n", "现在", "，", "程序", "在", "显示", "消息", "前", "将", "做", "简单", "的", "检查", "，", "仅", "在", "消息", "不是", "退出", "值时", "才", "打印", "它", "：", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "Hello", " ", "everyone", "!", "\n", "Hello", " ", "everyone", "!"], ["Hello", " ", "everyone", "!", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "Hello", " ", "again", ".", "\n", "Hello", " ", "again", ".", "\n", "Tell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\n", "Enter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "quit", "\n", "7.2", ".", "3", "　", "使用", "标志", "\n", "　", "使用", "标志", "\n", "在", "前", "一个", "示例", "中", "，", "我们", "让", "程序", "在", "满足", "指定", "条件", "时", "就", "执行", "特定", "的", "任务", "。", "但", "在", "更", "复杂", "的", "程序", "中", "，", "很多", "不同", "的", "事件", "都", "会", "导致", "程序", "停止", "运行", "；", "在", "这种", "情况", "下", "，", "该", "怎么办", "呢", "？", "\n", "例如", "，", "在", "游戏", "中", "，", "多种", "事件", "都", "可能", "导致", "游戏", "结束", "，", "如", "玩家", "一艘", "飞船", "都", "没有", "了", "或", "要", "保护", "的", "城市", "都", "被", "摧毁", "了", "。", "导致", "程序", "结束", "的", "事件", "有", "很多", "时", "，", "如果", "在", "一条", "while", " ", "语句", "中", "检查", "所有", "这些", "\n", "条件", "，", "将", "既", "复杂", "又", "困难", "。"], ["在", "要求", "很多", "条件", "都", "满足", "才", "继续", "运行", "的", "程序", "中", "，", "可定义", "一个", "变量", "，", "用于", "判断", "整个", "程序", "是否", "处于", "活动状态", "。", "这个", "变量", "被", "称为", "标志", "\n", "标志", " ", "，", "充当", "了", "程序", "的", "交通", "信号灯", "。", "你", "可", "让", "程序", "在", "标志", "\n", "为", "True", " ", "时", "继续", "运行", "，", "并", "在", "任何", "事件", "导致", "标志", "的", "值", "为", "False", " ", "时", "让", "程序", "停止", "运行", "。", "这样", "，", "在", "while", " ", "语句", "中", "就", "只", "需", "检查", "一个", "条件", "—", "—", "标志", "的", "当前", "值", "是否", "为", "True", " ", "，", "并", "将", "所有", "测试", "（", "是", "\n", "否", "发生", "了", "应", "将", "标志", "设置", "为", "False", " ", "的", "事件", "）", "都", "放在", "其他", "地方", "，", "从而", "让", "程序", "变得", "更为", "整洁", "。", "\n", "下面", "来", "在", "前", "一节", "的", "程序", "parrot", ".", "py", "中", "添加", "一个", "标志", "。", "我们", "把", "这个", "标志", "命名", "为", "active", " ", "（", "可", "给", "它", "指定", "任何", "名称", "）", "，", "它", "将", "用于", "判断", "程序", "是否", "应", "继续", "运行", "：", "\n", " ", " ", "prompt", " ", "=", " ", "\"", "\\", "nTell", " ", "me", " ", "something", ",", " ", "and", " ", "I", " ", "will", " ", "repeat", " ", "it", " ", "back", " ", "to", " ", "you", ":", "\"", "\n", " ", " ", "prompt", " ", "+", "=", " ", "\"", "\\", "nEnter", " ", "'", "quit", "'", " ", "to", " ", "end", " ", "the", " ", "program", ".", " ", "\"", "\n", "❶", " ", "active", " ", "=", " ", "True", "\n", "❷", " ", "while", " ", "active", ":", "\n", " ", " ", " ", " ", " ", " ", "message", " ", "=", " ", "input", "(", "prompt", ")", "\n", "❸", " ", " ", " ", " ", " ", "if", " ", "message", " ", "=", "=", " ", "'", "quit", "'", ":"], ["❸", " ", " ", " ", " ", " ", "if", " ", "message", " ", "=", "=", " ", "'", "quit", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "active", " ", "=", " ", "False", "\n", "❹", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "message", ")", "\n", "我们", "将", "变量", "active", " ", "设置", "成", "了", "True", " ", "（", "见", "❶", "）", "，", "让", "程序", "最初", "处于", "活动状态", "。", "这样", "做", "简化", "了", "while", " ", "语句", "，", "因为", "不", "需要", "在", "其中", "做", "任何", "比较", "—", "—", "相关", "的", "逻辑", "由", "程序", "的", "其他", "部分", "处理", "。", "只", "\n", "要", "变量", "active", " ", "为", "True", " ", "，", "循环", "就", "将", "继续", "运行", "（", "见", "❷", "）", "。", "\n", "在", "while", " ", "循环", "中", "，", "我们", "在", "用户", "输入", "后", "使用", "一条", "if", " ", "语句", "来", "检查", "变量", "message", " ", "的", "值", "。", "如果", "用户", "输入", "的", "是", "'", "quit", "'", " ", "（", "见", "❸", "）", "，", "我们", "就", "将", "变量", "active", " ", "设置", "为", "False", " ", "，", "这将导", "\n", "致", "while", " ", "循环", "不再", "继续执行", "。", "如果", "用户", "输入", "的", "不是", "'", "quit", "'", " ", "（", "见", "❹", "）", "，", "我们", "就", "将", "输入", "作为", "一条", "消息", "打印", "出来", "。", "\n", "这个", "程序", "的", "输出", "与", "前", "一个", "示例", "相同", "。", "在", "前", "一个", "示例", "中", "，", "我们", "将", "条件", "测试", "直接", "放在", "了", "while", " ", "语句", "中", "，", "而", "在", "这个", "程序", "中", "，", "我们", "使用", "了", "一个", "标志", "来", "指出", "程序", "是否", "处于", "活动状态", "，", "这样", "如"], ["果要", "添加", "测试", "（", "如", "elif", " ", "语句", "）", "以", "检查", "是否", "发生", "了", "其他", "导致", "active", " ", "变为", "False", " ", "的", "事件", "，", "将", "很", "容易", "。", "在", "复杂", "的", "程序", "中", "，", "如", "很多", "事件", "都", "会", "导致", "程序", "停止", "运行", "的", "游戏", "中", "，", "标志", "很", "有", "\n", "用", "：", "在", "其中", "的", "任何", "一个", "事件", "导致", "活动", "标志", "变成", "False", " ", "时", "，", "主", "游戏", "循环", "将", "退出", "，", "此时", "可", "显示", "一条", "游戏", "结束", "消息", "，", "并", "让", "用户", "选择", "是否", "要", "重新", "玩", "。", "\n", "7.2", ".", "4", "　", "使用", "\n", "　", "使用", "break", " ", "退出", "循环", "\n", "退出", "循环", "\n", "要", "立即", "退出", "while", " ", "循环", "，", "不再", "运行", "循环", "中", "余下", "的", "代码", "，", "也", "不管", "条件", "测试", "的", "结果", "如何", "，", "可", "使用", "break", " ", "语句", "。", "break", " ", "语句", "用于", "控制", "程序流程", "，", "可", "使用", "它", "来", "控制", "哪些", "代码", "行将", "执行", "，", "\n", "哪些", "代码", "行", "不", "执行", "，", "从而", "让", "程序", "按", "你", "的", "要求", "执行", "你", "要", "执行", "的", "代码", "。", "\n", "例如", "，", "来看", "一个", "让", "用户", "指出", "他", "到", "过", "哪些地方", "的", "程序", "。", "在", "这个", "程序", "中", "，", "我们", "可以", "在", "用户", "输入", "'", "quit", "'", " ", "后", "使用", "break", " ", "语句", "立即", "退出", "while", " ", "循环", "：", "\n", "cities", ".", "py", "\n", " ", " ", "prompt", " ", "=", " ", "\"", "\\", "nPlease", " ", "enter", " ", "the", " ", "name", " ", "of", " ", "a", " ", "city", " ", "you", " ", "have", " ", "visited", ":", "\"", "\n", " ", " ", "prompt", " ", "+", "=", " ", "\"", "\\", "n", "(", "Enter", " ", "'", "quit", "'", " ", "when", " ", "you", " ", "are", " ", "finished", ".", ")", " ", "\"", "\n", "❶", " ", "while", " ", "True", ":"], ["❶", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", "city", " ", "=", " ", "input", "(", "prompt", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "city", " ", "=", "=", " ", "'", "quit", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "I", "'", "d", " ", "love", " ", "to", " ", "go", " ", "to", " ", "\"", " ", "+", " ", "city", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", ")", "\n", "以", "while", " ", "True", " ", "打头", "的", "循环", "（", "见", "❶", "）", "将", "不断", "运行", "，", "直到", "遇到", "break", " ", "语句", "。", "这个", "程序", "中", "的", "循环不断", "输入", "用户", "到", "过", "的", "城市", "的", "名字", "，", "直到", "他", "输入", "'", "quit", "'", " ", "为止", "。", "用户", "输入", "'", "quit", "'", "\n", "后", "，", "将", "执行", "break", " ", "语句", "，", "导致", "Python", "退出", "循环", "：", "\n", "Please", " ", "enter", " ", "the", " ", "name", " ", "of", " ", "a", " ", "city", " ", "you", " ", "have", " ", "visited", ":", "\n", "(", "Enter", " ", "'", "quit", "'", " ", "when", " ", "you", " ", "are", " ", "finished", ".", ")", " ", "New", " ", "York", "\n", "I", "'", "d", " ", "love", " ", "to", " ", "go", " ", "to", " ", "New", " ", "York", "!", "\n", "Please", " ", "enter", " ", "the", " ", "name", " ", "of", " ", "a", " ", "city", " ", "you", " ", "have", " ", "visited", ":", "\n", "(", "Enter", " ", "'", "quit", "'", " ", "when", " ", "you", " ", "are", " ", "finished", ".", ")", " ", "San", " ", "Francisco"], ["I", "'", "d", " ", "love", " ", "to", " ", "go", " ", "to", " ", "San", " ", "Francisco", "!", "\n", "Please", " ", "enter", " ", "the", " ", "name", " ", "of", " ", "a", " ", "city", " ", "you", " ", "have", " ", "visited", ":", "\n", "(", "Enter", " ", "'", "quit", "'", " ", "when", " ", "you", " ", "are", " ", "finished", ".", ")", " ", "quit", "\n", "注意", "\n", "注意", " ", "　", "在", "任何", "Python", "循环", "中", "都", "可", "使用", "break", " ", "语句", "。", "例如", "，", "可", "使用", "break", " ", "语句", "来", "退出", "遍历", "列表", "或", "字典", "的", "for", " ", "循环", "。", "\n", "7.2", ".", "5", "　", "在", "循环", "中", "使用", "\n", "　", "在", "循环", "中", "使用", "continue", "\n", "要", "返回", "到", "循环", "开头", "，", "并", "根据", "条件", "测试", "结果", "决定", "是否", "继续执行", "循环", "，", "可", "使用", "continue", " ", "语句", "，", "它", "不", "像", "break", " ", "语句", "那样", "不再", "执行", "余下", "的", "代码", "并", "退出", "整个", "循环", "。", "例如", "，", "来看", "一个", "从", "1", "数", "\n", "到", "10", "，", "但", "只", "打印", "其中", "偶数", "的", "循环", "：", "\n", "counting", ".", "py", "\n", " ", " ", "current", "_", "number", " ", "=", " ", "0", "\n", " ", " ", "while", " ", "current", "_", "number", " ", "<", " ", "10", ":", "\n", "❶", " ", " ", " ", " ", " ", "current", "_", "number", " ", "+", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "current", "_", "number", " ", "%", " ", "2", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "continue", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "current", "_", "number", ")"], ["continue", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "current", "_", "number", ")", "\n", "我们", "首先", "将", "current", "_", "number", " ", "设置", "成", "了", "0", "，", "由于", "它", "小于", "10", "，", "Python", "进入", "while", " ", "循环", "。", "进入", "循环", "后", "，", "我们", "以", "步长", "1", "的", "方式", "往", "上数", "（", "见", "❶", "）", "，", "因此", "current", "_", "number", " ", "为", "1", "。", "接下", "\n", "来", "，", "if", " ", "语句", "检查", "current", "_", "number", " ", "与", "2", "的", "求模", "运算", "结果", "。", "如果", "结果", "为", "0", "（", "意味着", "current", "_", "number", " ", "可", "被", "2", "整除", "）", "，", "就", "执行", "continue", " ", "语句", "，", "让", "Python", "忽略", "余下", "的", "代码", "，", "并", "返回", "\n", "到", "循环", "的", "开头", "。", "如果", "当前", "的", "数字", "不能", "被", "2", "整除", "，", "就", "执行", "循环", "中", "余下", "的", "代码", "，", "Python", "将", "这个", "数字", "打印", "出来", "：", "\n", "1", "\n", "3", "\n", "5", "\n", "7", "\n", "9"], ["7.2", ".", "6", "　", "避免", "无限", "循环", "\n", "　", "避免", "无限", "循环", "\n", "每个", "while", " ", "循环", "都", "必须", "有", "停止", "运行", "的", "途径", "，", "这样", "才", "不会", "没完没了", "地", "执行", "下去", "。", "例如", "，", "下面", "的", "循环", "从", "1", "数到", "5", "：", "\n", "counting", ".", "py", "\n", "x", " ", "=", " ", "1", "\n", "while", " ", "x", " ", "<", "=", " ", "5", ":", "\n", " ", " ", " ", " ", "print", "(", "x", ")", "\n", " ", " ", " ", " ", "x", " ", "+", "=", " ", "1", "\n", "但", "如果", "你", "像", "下面", "这样", "不", "小心", "遗漏", "了", "代码", "行", "x", " ", "+", "=", " ", "1", " ", "，", "这个", "循环", "将", "没完没了", "地", "运行", "：", "\n", "#", " ", "这个", "循环", "将", "没完没了", "地", "运行", "！", "\n", "x", " ", "=", " ", "1", "\n", "while", " ", "x", " ", "<", "=", " ", "5", ":", "\n", " ", " ", " ", " ", "print", "(", "x", ")", "\n", "在", "这里", "，", "x", " ", "的", "初始值", "为", "1", " ", "，", "但", "根本", "不会", "变", "，", "因此", "条件", "测试", "x", " ", "<", "=", " ", "5", " ", "始终", "为", "True", " ", "，", "导致", "while", " ", "循环", "没完没了", "地", "打印", "1", " ", "，", "如下", "所示", "：", "\n", "1", "\n", "1", "\n", "1", "\n", "1", "\n", "--", "snip", "--", "\n", "每个", "程序员", "都", "会", "偶尔", "因", "不", "小心", "而", "编写出", "无限", "循环", "，", "在", "循环", "的", "退出", "条件", "比较", "微妙", "时", "尤其", "如此", "。", "如果", "程序", "陷入", "无限", "循环", "，", "可", "按", "Ctrl", " ", "+", " ", "C", "，", "也", "可", "关闭", "显示", "程序", "输出", "的", "终端", "窗口", "。", "\n", "要", "避免", "编写", "无限", "循环", "，", "务必", "对", "每个", "while", " ", "循环", "进行", "测试", "，", "确保", "它", "按", "预期", "那样", "结束", "。", "如果", "你", "希望", "程序", "在", "用户", "输入", "特定", "值时", "结束", "，", "可", "运行", "程序", "并", "输入", "这样", "的", "值", "；", "如果", "在", "这种", "情况", "下程"], ["序", "没有", "结束", "，", "请", "检查程序", "处理", "这个", "值", "的", "方式", "，", "确认", "程序", "至少", "有", "一个", "这样", "的", "地方", "能", "让", "循环", "条件", "为", "False", " ", "或", "让", "break", " ", "语句", "得以", "执行", "。", "\n", "注意", "\n", "注意", " ", "　", "有些", "编辑器", "（", "如", "Sublime", " ", "Text", "）", "内嵌", "了", "输出", "窗口", "，", "这", "可能", "导致", "难以", "结束", "无限", "循环", "，", "因此", "不得不", "关闭", "编辑器", "来", "结束", "无限", "循环", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "7", "-", "4", " ", "比萨", "配料", "\n", "比萨", "配料", " ", "：", "编写", "一个", "循环", "，", "提示", "用户", "输入", "一系列", "的", "比萨", "配料", "，", "并", "在", "用户", "输入", "'", "quit", "'", " ", "时", "结束", "循环", "。", "每当", "用户", "输入", "一种", "配料", "后", "，", "都", "打印", "一条", "消息", "，", "说", "我们", "会", "在", "比萨", "\n", "中", "添加", "这种", "配料", "。", "\n", "7", "-", "5", " ", "电影票", "\n", "电影票", " ", "：", "有家", "电影院", "根据", "观众", "的", "年龄", "收取", "不同", "的", "票价", "：", "不到", "3", "岁", "的", "观众", "免费", "；", "3", "~", "12", "岁", "的", "观众", "为", "10", "美元", "；", "超过", "12", "岁", "的", "观众", "为", "15", "美元", "。", "请", "编写", "一个", "循环", "，", "在", "其中", "询问", "用", "\n", "户", "的", "年龄", "，", "并", "指出", "其", "票价", "。", "\n", "7", "-", "6", " ", "三个", "出口", "\n", "三个", "出口", " ", "：", "以", "另", "一种", "方式", "完成", "练习", "7", "-", "4", "或", "练习", "7", "-", "5", "，", "在", "程序", "中", "采取", "如下", "所有", "做法", "。", "\n", "在", "while", " ", "循环", "中", "使用", "条件", "测试", "来", "结束", "循环", "。", "\n", "使用", "变量", "active", " ", "来", "控制", "循环", "结束", "的", "时机", "。", "\n", "使用", "break", " ", "语句", "在", "用户", "输入", "'", "quit", "'", " ", "时", "退出", "循环", "。", "\n", "7", "-", "7", " ", "无限", "循环"], ["使用", "break", " ", "语句", "在", "用户", "输入", "'", "quit", "'", " ", "时", "退出", "循环", "。", "\n", "7", "-", "7", " ", "无限", "循环", "\n", "无限", "循环", " ", "：", "编写", "一个", "没完没了", "的", "循环", "，", "并", "运行", "它", "（", "要", "结束", "该", "循环", "，", "可", "按", "Ctrl", " ", "+", "C", "，", "也", "可", "关闭", "显示", "输出", "的", "窗口", "）", "。", "\n", "7.3", "　", "使用", "\n", "　", "使用", "while", " ", "循环", "来", "处理", "列表", "和", "字典", "\n", "循环", "来", "处理", "列表", "和", "字典", "\n", "到", "目前为止", "，", "我们", "每次", "都", "只", "处理", "了", "一项", "用户", "信息", "：", "获取", "用户", "的", "输入", "，", "再", "将", "输入", "打印", "出来", "或", "作出", "应答", "；", "循环", "再次", "运行", "时", "，", "我们", "获悉", "另", "一个", "输入", "值", "并", "作出", "响应", "。", "然而", "，", "要", "记录", "大量", "的", "\n", "用户", "和", "信息", "，", "需要", "在", "while", " ", "循环", "中", "使用", "列表", "和", "字典", "。", "\n", "for", " ", "循环", "是", "一种", "遍历", "列表", "的", "有效", "方式", "，", "但", "在", "for", " ", "循环", "中不应", "修改", "列表", "，", "否则", "将", "导致", "Python", "难以", "跟踪", "其中", "的", "元素", "。", "要", "在", "遍历", "列表", "的", "同时", "对", "其", "进行", "修改", "，", "可", "使用", "while", " ", "循环", "。", "通过", "\n", "将", "while", " ", "循环", "同", "列表", "和", "字典", "结合", "起来", "使用", "，", "可", "收集", "、", "存储", "并", "组织", "大量", "输入", "，", "供", "以后", "查看", "和", "显示", "。", "\n", "7.3", ".", "1", "　", "在", "列表", "之间", "移动", "元素", "\n", "　", "在", "列表", "之间", "移动", "元素", "\n", "假设", "有", "一个", "列表", "，", "其中", "包含", "新", "注册", "但", "还", "未", "验证", "的", "网站", "用户", "；", "验证", "这些", "用户", "后", "，", "如何", "将", "他们", "移到", "另", "一个", "已", "验证", "用户", "列表", "中", "呢", "？", "一种", "办法", "是", "使用", "一个", "while", " ", "循环", "，", "在", "验证", "用户", "的", "同时"], ["将", "其", "从未", "验证", "用户", "列表", "中", "提取", "出来", "，", "再", "将", "其", "加入", "到", "另", "一个", "已", "验证", "用户", "列表", "中", "。", "代码", "可能", "类似", "于", "下面", "这样", "：", "\n", "confirmed", "_", "users", ".", "py", "\n", " ", " ", "#", " ", "首先", "，", "创建", "一个", "待", "验证", "用户", "列表", "\n", " ", " ", "#", " ", " ", "和", "一个", "用于", "存储", "已", "验证", "用户", "的", "空", "列表", "\n", "❶", " ", "unconfirmed", "_", "users", " ", "=", " ", "[", "'", "alice", "'", ",", " ", "'", "brian", "'", ",", " ", "'", "candace", "'", "]", "\n", " ", " ", "confirmed", "_", "users", " ", "=", " ", "[", "]", "\n", " ", " ", "#", " ", "验证", "每个", "用户", "，", "直到", "没有", "未", "验证", "用户", "为止", "\n", " ", " ", "#", " ", " ", "将", "每个", "经过", "验证", "的", "列表", "都", "移到", "已", "验证", "用户", "列表", "中", "\n", "❷", " ", "while", " ", "unconfirmed", "_", "users", ":", "\n", "❸", " ", " ", " ", " ", " ", "current", "_", "user", " ", "=", " ", "unconfirmed", "_", "users", ".", "pop", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Verifying", " ", "user", ":", " ", "\"", " ", "+", " ", "current", "_", "user", ".", "title", "(", ")", ")", "\n", "❹", " ", " ", " ", " ", " ", "confirmed", "_", "users", ".", "append", "(", "current", "_", "user", ")", "\n", " ", " ", "#", " ", "显示", "所有", "已", "验证", "的", "用户", "\n", " ", " ", "print", "(", "\"", "\\", "nThe", " ", "following", " ", "users", " ", "have", " ", "been", " ", "confirmed", ":", "\"", ")", "\n", " ", " ", "for", " ", "confirmed", "_", "user", " ", "in", " ", "confirmed", "_", "users", ":"], ["for", " ", "confirmed", "_", "user", " ", "in", " ", "confirmed", "_", "users", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "confirmed", "_", "user", ".", "title", "(", ")", ")", "\n", "我们", "首先", "创建", "了", "一个", "未", "验证", "用户", "列表", "（", "见", "❶", "）", "，", "其中", "包含", "用户", "Alice", "、", "Brian", "和", "Candace", "，", "还", "创建", "了", "一个", "空", "列表", "，", "用于", "存储", "已", "验证", "的", "用户", "。", "❷", "处", "的", "while", " ", "循环", "将", "不断", "地", "运行", "，", "直到", "列", "\n", "表", "unconfirmed", "_", "users", " ", "变成", "空", "的", "。", "在", "这个", "循环", "中", "，", "❸", "处", "的", "函数", "pop", "(", ")", " ", "以", "每次", "一个", "的", "方式", "从", "列表", "unconfirmed", "_", "users", " ", "末尾", "删除", "未", "验证", "的", "用户", "。", "由于", "Candace", "位于", "列", "\n", "表", "unconfirmed", "_", "users", " ", "末尾", "，", "因此", "其", "名字", "将", "首先", "被", "删除", "、", "存储", "到", "变量", "current", "_", "user", " ", "中", "并", "加入", "到", "列表", "confirmed", "_", "users", " ", "中", "（", "见", "❹", "）", "。", "接下来", "是", "Brian", "，", "然后", "是", "Alice", "。"], ["为", "模拟", "用户", "验证", "过程", "，", "我们", "打印", "一条", "验证", "消息", "并", "将", "用户", "加入", "到", "已", "验证", "用户", "列表", "中", "。", "未", "验证", "用户", "列表", "越来越", "短", "，", "而已", "验证", "用户", "列表", "越来越", "长", "。", "未", "验证", "用户", "列表", "为", "空后", "结束", "循环", "，", "再", "\n", "打印", "已", "验证", "用户", "列表", "：", "\n", "Verifying", " ", "user", ":", " ", "Candace", "\n", "Verifying", " ", "user", ":", " ", "Brian", "\n", "Verifying", " ", "user", ":", " ", "Alice", "\n", "The", " ", "following", " ", "users", " ", "have", " ", "been", " ", "confirmed", ":", "\n", "Candace", "\n", "Brian", "\n", "Alice", "\n", "7.3", ".", "2", "　", "删除", "包含", "特定", "值", "的", "所有", "列表", "元素", "\n", "　", "删除", "包含", "特定", "值", "的", "所有", "列表", "元素", "\n", "在", "第", "3", "章中", "，", "我们", "使用", "函数", "remove", "(", ")", " ", "来", "删除", "列表", "中", "的", "特定", "值", "，", "这", "之所以", "可行", "，", "是因为", "要", "删除", "的", "值", "在", "列表", "中", "只", "出现", "了", "一次", "。", "如果", "要", "删除", "列表", "中", "所有", "包含", "特定", "值", "的", "元素", "，", "该", "怎么办", "\n", "呢", "？", "\n", "假设", "你", "有", "一个", "宠物", "列表", "，", "其中", "包含", "多个", "值为", "'", "cat", "'", " ", "的", "元素", "。", "要", "删除", "所有", "这些", "元素", "，", "可", "不断", "运行", "一个", "while", " ", "循环", "，", "直到", "列表", "中", "不再", "包含", "值", "'", "cat", "'", " ", "，", "如下", "所示", "：", "\n", "pets", ".", "py", "\n", "pets", " ", "=", " ", "[", "'", "dog", "'", ",", " ", "'", "cat", "'", ",", " ", "'", "dog", "'", ",", " ", "'", "goldfish", "'", ",", " ", "'", "cat", "'", ",", " ", "'", "rabbit", "'", ",", " ", "'", "cat", "'", "]", "\n", "print", "(", "pets", ")"], ["print", "(", "pets", ")", "\n", "while", " ", "'", "cat", "'", " ", "in", " ", "pets", ":", "\n", " ", " ", " ", " ", "pets", ".", "remove", "(", "'", "cat", "'", ")", "\n", "print", "(", "pets", ")", "\n", "我们", "首先", "创建", "了", "一个", "列表", "，", "其中", "包含", "多个", "值为", "'", "cat", "'", " ", "的", "元素", "。", "打印", "这个", "列表", "后", "，", "Python", "进入", "while", " ", "循环", "，", "因为", "它", "发现", "'", "cat", "'", " ", "在", "列表", "中", "至少", "出现", "了", "一次", "。", "进入", "这个", "循环", "后", "，", "Python", "\n", "删除", "第一个", "'", "cat", "'", " ", "并", "返回", "到", "while", " ", "代码", "行", "，", "然后", "发现", "'", "cat", "'", " ", "还", "包含", "在", "列表", "中", "，", "因此", "再次", "进入", "循环", "。", "它", "不断", "删除", "'", "cat", "'", " ", "，", "直到", "这个", "值", "不再", "包含", "在", "列表", "中", "，", "然后", "退出", "循环", "并", "再次", "打", "\n", "印", "列表", "：", "\n", "[", "'", "dog", "'", ",", " ", "'", "cat", "'", ",", " ", "'", "dog", "'", ",", " ", "'", "goldfish", "'", ",", " ", "'", "cat", "'", ",", " ", "'", "rabbit", "'", ",", " ", "'", "cat", "'", "]", "\n", "[", "'", "dog", "'", ",", " ", "'", "dog", "'", ",", " ", "'", "goldfish", "'", ",", " ", "'", "rabbit", "'", "]", "\n", "7.3", ".", "3", "　", "使用", "用户", "输入", "来", "填充", "字典", "\n", "　", "使用", "用户", "输入", "来", "填充", "字典", "\n", "可", "使用", "while", "循环", "提示", "用户", "输入", "任意", "数量", "的", "信息", "。", "下面", "来", "创建", "一个", "调查", "程序", "，", "其中", "的", "循环", "每次", "执行", "时", "都", "提示", "输入", "被调查者", "的", "名字", "和", "回答", "。", "我们", "将", "收集", "的", "数据", "存储", "在", "一个", "字典", "中", "，", "以", "\n", "便", "将", "回答", "同", "被调查者", "关联", "起来", "：", "\n", "mountain", "_", "poll", ".", "py", "\n", " ", " ", "responses", " ", "=", " ", "{", "}"], ["便", "将", "回答", "同", "被调查者", "关联", "起来", "：", "\n", "mountain", "_", "poll", ".", "py", "\n", " ", " ", "responses", " ", "=", " ", "{", "}", "\n", " ", " ", "#", " ", "设置", "一个", "标志", "，", "指出", "调查", "是否", "继续", "\n", " ", " ", "polling", "_", "active", " ", "=", " ", "True", "\n", " ", " ", "while", " ", "polling", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "提示", "输入", "被调查者", "的", "名字", "和", "回答", "\n", "❶", " ", " ", " ", " ", " ", "name", " ", "=", " ", "input", "(", "\"", "\\", "nWhat", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "response", " ", "=", " ", "input", "(", "\"", "Which", " ", "mountain", " ", "would", " ", "you", " ", "like", " ", "to", " ", "climb", " ", "someday", "?", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "将", "答卷", "存储", "在", "字典", "中", "\n", "❷", " ", " ", " ", " ", " ", "responses", "[", "name", "]", " ", "=", " ", "response", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "看看", "是否", "还有", "人要", "参与", "调查", "\n", "❸", " ", " ", " ", " ", " ", "repeat", " ", "=", " ", "input", "(", "\"", "Would", " ", "you", " ", "like", " ", "to", " ", "let", " ", "another", " ", "person", " ", "respond", "?", " ", "(", "yes", "/", " ", "no", ")", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "repeat", " ", "=", "=", " ", "'", "no", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "polling", "_", "active", " ", "=", " ", "False", "\n", " ", " ", "#", " ", "调查", "结束", "，", "显示", "结果"], ["polling", "_", "active", " ", "=", " ", "False", "\n", " ", " ", "#", " ", "调查", "结束", "，", "显示", "结果", "\n", " ", " ", "print", "(", "\"", "\\", "n", "---", " ", "Poll", " ", "Results", " ", "---", "\"", ")", "\n", "❹", " ", "for", " ", "name", ",", " ", "response", " ", "in", " ", "responses", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "name", " ", "+", " ", "\"", " ", "would", " ", "like", " ", "to", " ", "climb", " ", "\"", " ", "+", " ", "response", " ", "+", " ", "\"", ".", "\"", ")", "\n", "这个", "程序", "首先", "定义", "了", "一个", "空", "字典", "（", "responses", " ", "）", "，", "并", "设置", "了", "一个", "标志", "（", "polling", "_", "active", " ", "）", "，", "用于", "指出", "调查", "是否", "继续", "。", "只要", "polling", "_", "active", " ", "为", "True", " ", "，", "Python", "就", "运", "\n", "行", "while", " ", "循环", "中", "的", "代码", "。", "\n", "在", "这个", "循环", "中", "，", "提示", "用户", "输入", "其", "用户名", "及其", "喜欢", "爬", "哪座", "山", "（", "见", "❶", "）", "。", "将", "这些", "信息", "存储", "在", "字典", "responses", " ", "中", "（", "见", "❷", "）", "，", "然后", "询问", "用户", "调查", "是否", "继续", "（", "见", "❸", "）", "。", "如果", "用户", "输入", "yes", "\n", "，", "程序", "将", "再次", "进入", "while", " ", "循环", "；", "如果", "用户", "输入", "no", " ", "，", "标志", "polling", "_", "active", " ", "将", "被", "设置", "为", "False", " ", "，", "而", "while", " ", "循环", "将", "就此结束", "。", "最后", "一个", "代码", "块", "（", "见", "❹", "）", "显示", "调查结果", "。", "\n", "如果", "你", "运行", "这个", "程序", "，", "并", "输入", "一些", "名字", "和", "回答", "，", "输出", "将", "类似", "于", "下面", "这样", "："], ["如果", "你", "运行", "这个", "程序", "，", "并", "输入", "一些", "名字", "和", "回答", "，", "输出", "将", "类似", "于", "下面", "这样", "：", "\n", "What", " ", "is", " ", "your", " ", "name", "?", " ", "Eric", "\n", "Which", " ", "mountain", " ", "would", " ", "you", " ", "like", " ", "to", " ", "climb", " ", "someday", "?", " ", "Denali", "\n", "Would", " ", "you", " ", "like", " ", "to", " ", "let", " ", "another", " ", "person", " ", "respond", "?", " ", "(", "yes", "/", " ", "no", ")", " ", "yes", "\n", "What", " ", "is", " ", "your", " ", "name", "?", " ", "Lynn", "\n", "Which", " ", "mountain", " ", "would", " ", "you", " ", "like", " ", "to", " ", "climb", " ", "someday", "?", " ", "Devil", "'", "s", " ", "Thumb", "\n", "Would", " ", "you", " ", "like", " ", "to", " ", "let", " ", "another", " ", "person", " ", "respond", "?", " ", "(", "yes", "/", " ", "no", ")", " ", "no", "\n", "---", " ", "Poll", " ", "Results", " ", "---", "\n", "Lynn", " ", "would", " ", "like", " ", "to", " ", "climb", " ", "Devil", "'", "s", " ", "Thumb", ".", "\n", "Eric", " ", "would", " ", "like", " ", "to", " ", "climb", " ", "Denali", ".", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "7", "-", "8", " ", "熟食店", "\n", "熟食店", " ", "：", "创建", "一个", "名为", "sandwich", "_", "orders", " ", "的", "列表", "，", "在", "其中", "包含", "各种", "三明治", "的", "名字", "；", "再", "创建", "一个", "名为", "finished", "_", "sandwiches", " ", "的", "空", "列表", "。", "遍历", "列"], ["表", "sandwich", "_", "orders", " ", "，", "对于", "其中", "的", "每种", "三明治", "，", "都", "打印", "一条", "消息", "，", "如", "I", " ", "made", " ", "your", " ", "tuna", " ", "sandwich", " ", "，", "并", "将", "其移", "到", "列表", "finished", "_", "sandwiches", " ", "。", "所有", "三明"], ["治", "都", "制作", "好后", "，", "打印", "一条", "消息", "，", "将", "这些", "三明治", "列出来", "。", "\n", "7", "-", "9", " ", "五香", "烟熏", "牛肉", "（", "\n", "五香", "烟熏", "牛肉", "（", "pastrami", "）", "卖完", "了", "\n", "）", "卖完", "了", " ", "：", "使用", "为", "完成", "练习", "7", "-", "8", "而", "创建", "的", "列表", "sandwich", "_", "orders", " ", "，", "并", "确保", "'", "pastrami", "'", " ", "在", "其中", "至少", "出现", "了", "三次", "。", "在", "程序", "开头", "附近", "添加", "\n", "这样", "的", "代码", "：", "打印", "一条", "消息", "，", "指出", "熟食店", "的", "五香", "烟熏", "牛肉", "卖完", "了", "；", "再", "使用", "一个", "while", " ", "循环", "将", "列表", "sandwich", "_", "orders", " ", "中", "的", "'", "pastrami", "'", " ", "都", "删除", "。", "确认", "最终", "的", "列", "\n", "表", "finished", "_", "sandwiches", " ", "中", "不", "包含", "'", "pastrami", "'", " ", "。", "\n", "7", "-", "10", " ", "梦想", "的", "度假胜地", "\n", "梦想", "的", "度假胜地", " ", "：", "编写", "一个", "程序", "，", "调查", "用户", "梦想", "的", "度假胜地", "。", "使用", "类似", "于", "“", "If", " ", "you", " ", "could", " ", "visit", " ", "one", " ", "place", " ", "in", " ", "the", " ", "world", ",", " ", "where", " ", "would", " ", "you", " ", "go", "?", "”", "的", "提示", "，", "并", "编写", "一个", "打印", "调查", "\n", "结果", "的", "代码", "块", "。", "\n", "7.4", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "在", "程序", "中", "使用", "input", "(", ")", " ", "来", "让", "用户", "提供", "信息", "；", "如何", "处理", "文本", "和", "数字", "输入", "，", "以及", "如何", "使用", "while", " ", "循环", "让", "程序", "按", "用户", "的", "要求", "不断", "地", "运行", "；", "多种", "控制", "while"], ["循环", "流程", "的", "方式", "：", "设置", "活动", "标志", "、", "使用", "break", " ", "语句", "以及", "使用", "continue", " ", "语句", "；", "如何", "使用", "while", " ", "循环", "在", "列表", "之间", "移动", "元素", "，", "以及", "如何", "从", "列表", "中", "删除", "所有", "包含", "特定", "值", "的", "元素", "；", "如何", "\n", "结合", "使用", "while", " ", "循环", "和", "字典", "。", "\n", "在", "第", "8", "章中", "，", "你", "将", "学习", "函数", "。", "函数", "让", "你", "能够", "将", "程序", "分成", "多个", "很小", "的", "部分", "，", "其中", "每", "部分", "都", "负责", "完成", "一项", "具体任务", "。", "你", "可以", "根据", "需要", "调用", "同一个", "函数", "任意", "次", "，", "还", "可", "将", "函数", "存储", "在", "独立", "的", "\n", "文件", "中", "。", "使用", "函数", "可", "让", "你", "编写", "的", "代码", "效率", "更高", "，", "更", "容易", "维护", "和", "排除故障", "，", "还", "可", "在", "众多", "不同", "的", "程序", "中", "重用", "。", "\n", "第", "\n", "第", " ", "8", " ", "章", "　", "函数", "\n", "章", "　", "函数", "\n", "在", "本章", "中", "，", "你", "将", "学习", "编写", "函数", "\n", "函数", " ", "。", "函数", "是", "带", "名字", "的", "代码", "块", "，", "用于", "完成", "具体", "的", "工作", "。", "\n", "要", "执行", "函数", "定义", "的", "特定", "任务", "，", "可", "调用", "该", "函数", "。", "需要", "在", "程序", "中", "多次", "执行", "同", "一项", "任务", "时", "，", "你", "无需", "反复", "编写", "完成", "该", "任务", "的", "代码", "，", "而", "只", "需", "调用", "执行", "该", "任务", "的", "函数", "，", "让", "Python", "运行", "\n", "其中", "的", "代码", "。", "你", "将", "发现", "，", "通过", "使用", "函数", "，", "程序", "的", "编写", "、", "阅读", "、", "测试", "和", "修复", "都", "将", "更", "容易", "。", "\n", "在", "本章", "中", "，", "你", "还", "会", "学习", "向", "函数", "传递信息", "的", "方式", "。", "你", "将", "学习", "如何", "编写", "主要", "任务", "是", "显示信息", "的", "函数", "，", "还有", "用于", "处理", "数据", "并", "返回", "一个", "或", "一组", "值", "的", "函数", "。", "最后", "，", "你", "将", "学习", "如何", "\n", "将", "函数", "存储", "在", "被", "称为", "模块", "\n", "模块", " ", "的", "独立", "文件", "中", "，", "让", "主程序", "文件", "的", "组织", "更为", "有序", "。"], ["将", "函数", "存储", "在", "被", "称为", "模块", "\n", "模块", " ", "的", "独立", "文件", "中", "，", "让", "主程序", "文件", "的", "组织", "更为", "有序", "。", "\n", "8.1", "　", "定义", "函数", "\n", "　", "定义", "函数", "\n", "下面", "是", "一个", "打印", "问候语", "的", "简单", "函数", "，", "名为", "greet", "_", "user", "(", ")", " ", "：", "\n", "greeter", ".", "py", "\n", "❶", " ", "def", " ", "greet", "_", "user", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "简单", "的", "问候语", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", "print", "(", "\"", "Hello", "!", "\"", ")", "\n", "❹", " ", "greet", "_", "user", "(", ")", "\n", "这个", "示例", "演示", "了", "最", "简单", "的", "函数", "结构", "。", "❶", "处", "的", "代码", "行", "使用", "关键字", "def", " ", "来", "告诉", "Python", "你", "要", "定义", "一个", "函数", "。", "这是", "函数", "定义", "\n", "函数", "定义", " ", "，", "向", "Python", "指出", "了", "函数", "名", "，", "还", "可能", "在", "括号", "内", "指出", "函数", "为", "完成", "其", "\n", "任务", "需要", "什么样", "的", "信息", "。", "在", "这里", "，", "函数", "名为", "greet", "_", "user", "(", ")", " ", "，", "它", "不", "需要", "任何", "信息", "就", "能", "完成", "其", "工作", "，", "因此", "括号", "是", "空", "的", "（", "即便如此", "，", "括号", "也", "必不可少", "）", "。", "最后", "，", "定义", "以", "冒号", "结尾", "。", "\n", "紧跟", "在", "def", " ", "greet", "_", "user", "(", ")", ":", " ", "后面", "的", "所有", "缩", "进行", "构成", "了", "函数", "体", "。", "❷", "处", "的", "文本", "是", "被", "称为", "文档", "字符串", "\n", "文档", "字符串", " ", "（", "docstring", "）", "的", "注释", "，", "描述", "了", "函数", "是", "做", "什么", "的", "。", "文档", "字符串", "用", "三", "引号", "括", "\n", "起", "，", "Python", "使用", "它们", "来", "生成", "有关", "程序", "中", "函数", "的", "文档", "。"], ["起", "，", "Python", "使用", "它们", "来", "生成", "有关", "程序", "中", "函数", "的", "文档", "。", "\n", "代码", "行", "print", "(", "\"", "Hello", "!", "\"", ")", " ", "（", "见", "❸", "）", "是", "函数", "体内", "的", "唯一", "一行", "代码", "，", "greet", "_", "user", "(", ")", " ", "只", "做", "一项", "工作", "：", "打印", "Hello", "!", " ", "。", "\n", "要", "使用", "这个", "函数", "，", "可", "调用", "它", "。", "函数调用", "\n", "函数调用", " ", "让", "Python", "执行", "函数", "的", "代码", "。", "要", "调用", "\n", "调用", " ", "函数", "，", "可", "依次", "指定", "函数", "名", "以及", "用", "括号", "括起", "的", "必要", "信息", "，", "如", "❹", "处所", "示", "。", "由于", "这个", "函数", "不", "需要", "任何", "信息", "，", "因", "\n", "此", "调用", "它", "时", "只", "需", "输入", "greet", "_", "user", "(", ")", " ", "即可", "。", "和", "预期", "的", "一样", "，", "它", "打印", "Hello", "!", " ", "："], ["Hello", "!", "\n", "8.1", ".", "1", "　", "向", "函数", "传递信息", "\n", "　", "向", "函数", "传递信息", "\n", "只", "需", "稍作", "修改", "，", "就", "可以", "让", "函数", "greet", "_", "user", "(", ")", " ", "不仅", "向", "用户", "显示", "Hello", "!", " ", "，", "还", "将", "用户", "的", "名字", "用作", "抬头", "。", "为此", "，", "可", "在", "函数", "定义", "def", " ", "greet", "_", "user", "(", ")", " ", "的", "括号", "内", "添加", "username", " ", "。", "通", "\n", "过", "在", "这里", "添加", "username", " ", "，", "就", "可", "让", "函数", "接受", "你", "给", "username", " ", "指定", "的", "任何", "值", "。", "现在", "，", "这个", "函数", "要求", "你", "调用", "它", "时", "给", "username", " ", "指定", "一个", "值", "。", "调用", "greet", "_", "user", "(", ")", " ", "时", "，", "可", "将", "一个", "名字", "\n", "传递", "给", "它", "，", "如下", "所示", "：", "\n", "def", " ", "greet", "_", "user", "(", "username", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "简单", "的", "问候语", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "Hello", ",", " ", "\"", " ", "+", " ", "username", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", ")", "\n", "greet", "_", "user", "(", "'", "jesse", "'", ")", "\n", "代码", "greet", "_", "user", "(", "'", "jesse", "'", ")", " ", "调用函数", "greet", "_", "user", "(", ")", " ", "，", "并", "向", "它", "提供", "执行", "print", " ", "语句", "所", "需", "的", "信息", "。", "这个", "函数", "接受", "你", "传递", "给", "它", "的", "名字", "，", "并", "向", "这个", "人", "发出", "问候", "：", "\n", "Hello", ",", " ", "Jesse", "!"], ["Hello", ",", " ", "Jesse", "!", "\n", "同样", "，", "greet", "_", "user", "(", "'", "sarah", "'", ")", " ", "调用函数", "greet", "_", "user", "(", ")", " ", "并", "向", "它", "传递", "'", "sarah", "'", " ", "，", "打印", "Hello", ",", " ", "Sarah", "!", " ", "。", "你", "可以", "根据", "需要", "调用函数", "greet", "_", "user", "(", ")", " ", "任意", "次", "，", "调用", "时", "无论", "传", "\n", "入", "什么样", "的", "名字", "，", "都", "会", "生成", "相应", "的", "输出", "。", "\n", "8.1", ".", "2", "　", "实参", "和", "形参", "\n", "　", "实参", "和", "形参", "\n", "前面", "定义", "函数", "greet", "_", "user", "(", ")", " ", "时", "，", "要求", "给", "变量", "username", " ", "指定", "一个", "值", "。", "调用", "这个", "函数", "并", "提供", "这种", "信息", "（", "人", "名", "）", "时", "，", "它", "将", "打印", "相应", "的", "问候语", "。", "\n", "在", "函数", "greet", "_", "user", "(", ")", " ", "的", "定义", "中", "，", "变量", "username", " ", "是", "一个", "形参", "\n", "形参", " ", "—", "—", "函数", "完成", "其", "工作", "所", "需", "的", "一项", "信息", "。", "在", "代码", "greet", "_", "user", "(", "'", "jesse", "'", ")", " ", "中", "，", "值", "'", "jesse", "'", " ", "是", "一个", "实参", "\n", "实参", " ", "。", "实参", "是", "\n", "调用函数", "时", "传递", "给", "函数", "的", "信息", "。", "我们", "调用函数", "时", "，", "将要", "让", "函数", "使用", "的", "信息", "放在", "括号", "内", "。", "在", "greet", "_", "user", "(", "'", "jesse", "'", ")", " ", "中", "，", "将", "实参", "'", "jesse", "'", " ", "传递", "给", "了", "函数", "greet", "_", "user", "(", ")", " ", "，", "这个", "\n", "值", "被", "存储", "在", "形参", "username", " ", "中", "。", "\n", "注意"], ["值", "被", "存储", "在", "形参", "username", " ", "中", "。", "\n", "注意", "\n", "注意", " ", "　", "大家", "有时候", "会", "形参", "、", "实参", "不", "分", "，", "因此", "如果", "你", "看到", "有人", "将", "函数", "定义", "中", "的", "变量", "称为", "实参", "或", "将", "函数调用", "中", "的", "变量", "称为", "形参", "，", "不要", "大惊小怪", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "1", " ", "消息", "\n", "消息", " ", "：", "编写", "一个", "名为", "display", "_", "message", "(", ")", " ", "的", "函数", "，", "它", "打印", "一个", "句子", "，", "指出", "你", "在", "本章", "学", "的", "是", "什么", "。", "调用", "这个", "函数", "，", "确认", "显示", "的", "消息", "正确", "无误", "。", "\n", "8", "-", "2", " ", "喜欢", "的", "图书", "\n", "喜欢", "的", "图书", " ", "：", "编写", "一个", "名为", "favorite", "_", "book", "(", ")", " ", "的", "函数", "，", "其中", "包含", "一个", "名为", "title", " ", "的", "形参", "。", "这个", "函数", "打印", "一条", "消息", "，", "如", "One", " ", "of", " ", "my", " ", "favorite", " ", "books", " ", "is", "\n", "Alice", " ", "in", " ", "Wonderland", " ", "。", "调用", "这个", "函数", "，", "并", "将", "一本", "图书", "的", "名称", "作为", "实参", "传递", "给", "它", "。", "\n", "8.2", "　", "传递", "实参", "\n", "　", "传递", "实参", "\n", "鉴于", "函数", "定义", "中", "可能", "包含", "多个", "形参", "，", "因此", "函数调用", "中", "也", "可能", "包含", "多个", "实参", "。", "向", "函数", "传递", "实参", "的", "方式", "很多", "，", "可", "使用", "位置", "实参", "\n", "位置", "实参", " ", "，", "这", "要求", "实参", "的", "顺序", "与", "形参", "的", "顺序", "相同", "；", "也", "可", "使用", "关键", "\n", "关键", "\n", "字", "实参", "\n", "字", "实参", " ", "，", "其中", "每个", "实参", "都", "由", "变量名", "和", "值", "组成", "；", "还", "可", "使用", "列表", "和", "字典", "。", "下面", "来", "依次", "介绍", "这些", "方式", "。", "\n", "8.2", ".", "1", "　", "位置", "实参", "\n", "　", "位置", "实参"], ["8.2", ".", "1", "　", "位置", "实参", "\n", "　", "位置", "实参", "\n", "你", "调用函数", "时", "，", "Python", "必须", "将", "函数调用", "中", "的", "每个", "实参", "都", "关联", "到", "函数", "定义", "中", "的", "一个", "形参", "。", "为此", "，", "最", "简单", "的", "关联", "方式", "是", "基于", "实参", "的", "顺序", "。", "这种", "关联", "方式", "被", "称为", "位置", "实参", "\n", "位置", "实参", " ", "。", "\n", "为", "明白", "其中", "的", "工作", "原理", "，", "来看", "一个", "显示", "宠物", "信息", "的", "函数", "。", "这个", "函数", "指出", "一个", "宠物", "属于", "哪", "种", "动物", "以及", "它", "叫", "什么", "名字", "，", "如下", "所示", "：", "\n", "pets", ".", "py", "\n", "❶", " ", "def", " ", "describe", "_", "pet", "(", "animal", "_", "type", ",", " ", "pet", "_", "name", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❷", " ", "describe", "_", "pet", "(", "'", "hamster", "'", ",", " ", "'", "harry", "'", ")", "\n", "这个", "函数", "的", "定义", "表明", "，", "它", "需要", "一种", "动物", "类型", "和", "一个", "名字", "（", "见", "❶", "）", "。", "调用", "describe", "_", "pet", "(", ")", " ", "时", "，", "需要", "按", "顺序", "提供", "一种", "动物", "类型", "和", "一个", "名字", "。", "例如", "，", "在", "前面", "的", "函数调用", "中", "，", "实"], ["参", "'", "hamster", "'", " ", "存储", "在", "形参", "animal", "_", "type", " ", "中", "，", "而", "实参", "'", "harry", "'", " ", "存储", "在", "形参", "pet", "_", "name", " ", "中", "（", "见", "❷", "）", "。", "在", "函数", "体内", "，", "使用", "了", "这", "两个", "形参来", "显示", "宠物", "的", "信息", "。", "\n", "输出", "描述", "了", "一只", "名为", "Harry", "的", "仓鼠", "：", "\n", "I", " ", "have", " ", "a", " ", "hamster", ".", "\n", "My", " ", "hamster", "'", "s", " ", "name", " ", "is", " ", "Harry", ".", "\n", "1", ".", " ", "调用函数", "多次", "\n", "调用函数", "多次", "\n", "你", "可以", "根据", "需要", "调用函数", "任意", "次", "。", "要", "再", "描述", "一个", "宠物", "，", "只", "需", "再次", "调用", "describe", "_", "pet", "(", ")", " ", "即可", "：", "\n", "def", " ", "describe", "_", "pet", "(", "animal", "_", "type", ",", " ", "pet", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "describe", "_", "pet", "(", "'", "hamster", "'", ",", " ", "'", "harry", "'", ")", "\n", "describe", "_", "pet", "(", "'", "dog", "'", ",", " ", "'", "willie", "'", ")"], ["describe", "_", "pet", "(", "'", "dog", "'", ",", " ", "'", "willie", "'", ")", "\n", "第二次", "调用", "describe", "_", "pet", "(", ")", " ", "函数", "时", "，", "我们", "向", "它", "传递", "了", "实参", "'", "dog", "'", " ", "和", "'", "willie", "'", " ", "。", "与", "第一次", "调用", "时", "一样", "，", "Python", "将", "实参", "'", "dog", "'", " ", "关联", "到", "形参", "animal", "_", "type", " ", "，", "并", "将", "实"], ["参", "'", "willie", "'", " ", "关联", "到", "形参", "pet", "_", "name", " ", "。", "与", "前面", "一样", "，", "这个", "函数", "完成", "其", "任务", "，", "但", "打印", "的", "是", "一条", "名为", "Willie", "的", "小狗", "的", "信息", "。", "至此", "，", "我们", "有", "一只", "名为", "Harry", "的", "仓鼠", "，", "还有", "一条", "名为", "Willie", "的", "\n", "小狗", "：", "\n", "I", " ", "have", " ", "a", " ", "hamster", ".", "\n", "My", " ", "hamster", "'", "s", " ", "name", " ", "is", " ", "Harry", ".", "\n", "I", " ", "have", " ", "a", " ", "dog", ".", "\n", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Willie", ".", "\n", "调用函数", "多次", "是", "一种", "效率", "极高", "的", "工作", "方式", "。", "我们", "只", "需", "在", "函数", "中", "编写", "描述", "宠物", "的", "代码", "一次", "，", "然后", "每当", "需要", "描述", "新", "宠物", "时", "，", "都", "可", "调用", "这个", "函数", "，", "并", "向", "它", "提供", "新", "宠物", "的", "信息", "。", "即便", "描述", "\n", "宠物", "的", "代码", "增加", "到", "了", "10", "行", "，", "你", "依然", "只", "需", "使用", "一行", "调用函数", "的", "代码", "，", "就", "可", "描述", "一个", "新", "宠物", "。", "\n", "在", "函数", "中", "，", "可", "根据", "需要", "使用", "任意", "数量", "的", "位置", "实参", "，", "Python", "将", "按", "顺序", "将", "函数调用", "中", "的", "实参", "关联", "到", "函数", "定义", "中", "相应", "的", "形参", "。", "\n", "2", ".", " ", "位置", "实参", "的", "顺序", "很", "重要", "\n", "位置", "实参", "的", "顺序", "很", "重要", "\n", "使用", "位置", "实参", "来", "调用函数", "时", "，", "如果", "实参", "的", "顺序", "不", "正确", "，", "结果", "可能", "出乎意料", "：", "\n", "def", " ", "describe", "_", "pet", "(", "animal", "_", "type", ",", " ", "pet", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\""], ["\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "describe", "_", "pet", "(", "'", "harry", "'", ",", " ", "'", "hamster", "'", ")", "\n", "在", "这个", "函数调用", "中", "，", "我们", "先", "指定", "名字", "，", "再", "指定", "动物", "类型", "。", "由于", "实参", "'", "harry", "'", " ", "在", "前", "，", "这个", "值", "将", "存储", "到", "形参", "animal", "_", "type", " ", "中", "；", "同理", "，", "'", "hamster", "'", " ", "将", "存储", "到", "形参", "pet", "_", "name", " ", "中", "。", "\n", "结果", "是", "我们", "得到", "了", "一个", "名为", "Hamster", " ", "的", "harry", " ", "：", "\n", "I", " ", "have", " ", "a", " ", "harry", ".", "\n", "My", " ", "harry", "'", "s", " ", "name", " ", "is", " ", "Hamster", ".", "\n", "如果", "结果", "像", "上面", "一样", "搞笑", "，", "请", "确认", "函数调用", "中", "实参", "的", "顺序", "与", "函数", "定义", "中形", "参", "的", "顺序", "一致", "。", "\n", "8.2", ".", "2", "　", "关键字", "实参", "\n", "　", "关键字", "实参", "\n", "关键字", "实参", "\n", "关键字", "实参", " ", "是", "传递", "给", "函数", "的", "名称", "—", "值", "对", "。", "你", "直接", "在", "实参", "中将", "名称", "和", "值", "关联", "起来", "了", "，", "因此", "向", "函数", "传递", "实参", "时", "不会", "混淆", "（", "不会", "得到", "名为", "Hamster", "的", "harry", "这样", "的", "结果", "）", "。", "关键字", "实参", "让"], ["你", "无需", "考虑", "函数调用", "中", "的", "实参", "顺序", "，", "还", "清楚", "地", "指出", "了", "函数调用", "中", "各个", "值", "的", "用途", "。", "\n", "下面", "来", "重新", "编写", "pets", ".", "py", "，", "在", "其中", "使用", "关键字", "实参", "来", "调用", "describe", "_", "pet", "(", ")", " ", "：", "\n", "def", " ", "describe", "_", "pet", "(", "animal", "_", "type", ",", " ", "pet", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "describe", "_", "pet", "(", "animal", "_", "type", "=", "'", "hamster", "'", ",", " ", "pet", "_", "name", "=", "'", "harry", "'", ")", "\n", "函数", "describe", "_", "pet", "(", ")", " ", "还是", "原来", "那样", "，", "但", "调用", "这个", "函数", "时", "，", "我们", "向", "Python", "明确", "地", "指出", "了", "各个", "实参", "对应", "的", "形参", "。", "看到", "这个", "函数调用", "时", "，", "Python", "知道", "应该", "将", "实参", "'", "hamster", "'", "\n", "和", "'", "harry", "'", " ", "分别", "存储", "在", "形参", "animal", "_", "type", " ", "和", "pet", "_", "name", " ", "中", "。", "输出", "正确", "无误", "，", "它", "指出", "我们", "有", "一只", "名为", "Harry", "的", "仓鼠", "。"], ["关键字", "实参", "的", "顺序", "无关紧要", "，", "因为", "Python", "知道", "各个", "值该", "存储", "到", "哪个", "形参中", "。", "下面", "两个", "函数调用", "是", "等效", "的", "：", "\n", "describe", "_", "pet", "(", "animal", "_", "type", "=", "'", "hamster", "'", ",", " ", "pet", "_", "name", "=", "'", "harry", "'", ")", "\n", "describe", "_", "pet", "(", "pet", "_", "name", "=", "'", "harry", "'", ",", " ", "animal", "_", "type", "=", "'", "hamster", "'", ")", "\n", "注意", "\n", "注意", " ", "　", "使用", "关键字", "实参", "时", "，", "务必", "准确", "地", "指定", "函数", "定义", "中", "的", "形", "参名", "。", "\n", "8.2", ".", "3", "　", "默认值", "\n", "　", "默认值", "\n", "编写", "函数", "时", "，", "可", "给", "每个", "形参", "指定", "默认值", "\n", "默认值", " ", "。", "在", "调用函数", "中", "给", "形参", "提供", "了", "实参", "时", "，", "Python", "将", "使用", "指定", "的", "实参", "值", "；", "否则", "，", "将", "使用", "形参", "的", "默认值", "。", "因此", "，", "给", "形参", "指定", "默认值", "后", "，", "可", "在", "函数", "\n", "调用", "中", "省略", "相应", "的", "实参", "。", "使用", "默认值", "可简化", "函数调用", "，", "还", "可", "清楚", "地", "指出", "函数", "的", "典型", "用法", "。", "\n", "例如", "，", "如果", "你", "发现", "调用", "describe", "_", "pet", "(", ")", " ", "时", "，", "描述", "的", "大都", "是", "小狗", "，", "就", "可", "将", "形参", "animal", "_", "type", " ", "的", "默认值", "设置", "为", "'", "dog", "'", " ", "。", "这样", "，", "调用", "describe", "_", "pet", "(", ")", " ", "来", "描述", "小狗", "时", "，", "就", "可不", "\n", "提供", "这种", "信息", "：", "\n", "def", " ", "describe", "_", "pet", "(", "pet", "_", "name", ",", " ", "animal", "_", "type", "=", "'", "dog", "'", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\""], ["\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "describe", "_", "pet", "(", "pet", "_", "name", "=", "'", "willie", "'", ")", "\n", "这里", "修改", "了", "函数", "describe", "_", "pet", "(", ")", " ", "的", "定义", "，", "在", "其中", "给", "形参", "animal", "_", "type", " ", "指定", "了", "默认值", "'", "dog", "'", " ", "。", "这样", "，", "调用", "这个", "函数", "时", "，", "如果", "没有", "给", "animal", "_", "type", " ", "指定", "值", "，", "Python", "将", "把", "这个", "\n", "形参", "设置", "为", "'", "dog", "'", " ", "：", "\n", "I", " ", "have", " ", "a", " ", "dog", ".", "\n", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Willie", ".", "\n", "请", "注意", "，", "在", "这个", "函数", "的", "定义", "中", "，", "修改", "了", "形参", "的", "排列", "顺序", "。", "由于", "给", "animal", "_", "type", " ", "指定", "了", "默认值", "，", "无需", "通过", "实参", "来", "指定", "动物", "类型", "，", "因此", "在", "函数调用", "中", "只", "包含", "一个", "实参", "—", "—", "宠物", "的", "名"], ["字", "。", "然而", "，", "Python", "依然", "将", "这个", "实参", "视为", "位置", "实参", "，", "因此", "如果", "函数调用", "中", "只", "包含", "宠物", "的", "名字", "，", "这个", "实参", "将", "关联", "到", "函数", "定义", "中", "的", "第一个", "形参", "。", "这", "就是", "需要", "将", "pet", "_", "name", " ", "放在", "形参", "列表", "\n", "开头", "的", "原因", "所在", "。", "\n", "现在", "，", "使用", "这个", "函数", "的", "最", "简单", "的", "方式", "是", "，", "在", "函数调用", "中", "只", "提供", "小狗", "的", "名字", "：", "\n", "describe", "_", "pet", "(", "'", "willie", "'", ")", "\n", "这个", "函数调用", "的", "输出", "与", "前", "一个", "示例", "相同", "。", "只", "提供", "了", "一个", "实参", "—", "—", "'", "willie", "'", " ", "，", "这个", "实参", "将", "关联", "到", "函数", "定义", "中", "的", "第一个", "形参", "—", "—", "pet", "_", "name", " ", "。", "由于", "没有", "给", "animal", "_", "type", " ", "提供", "实", "\n", "参", "，", "因此", "Python", "使用", "其", "默认值", "'", "dog", "'", " ", "。", "\n", "如果", "要", "描述", "的", "动物", "不是", "小狗", "，", "可", "使用", "类似", "于", "下面", "的", "函数调用", "：", "\n", "describe", "_", "pet", "(", "pet", "_", "name", "=", "'", "harry", "'", ",", " ", "animal", "_", "type", "=", "'", "hamster", "'", ")", "\n", "由于", "显式", "地", "给", "animal", "_", "type", " ", "提供", "了", "实参", "，", "因此", "Python", "将", "忽略", "这个", "形参", "的", "默认值", "。", "\n", "注意", "\n", "注意", " ", "　", "使用", "默认值", "时", "，", "在", "形参", "列表", "中", "必须", "先", "列出", "没有", "默认值", "的", "形参", "，", "再", "列出", "有", "默认值", "的", "实参", "。", "这", "让", "Python", "依然", "能够", "正确", "地", "解读", "位置", "实参", "。", "\n", "8.2", ".", "4", "　", "等效", "的", "函数调用", "\n", "　", "等效", "的", "函数调用"], ["8.2", ".", "4", "　", "等效", "的", "函数调用", "\n", "　", "等效", "的", "函数调用", "\n", "鉴于", "可", "混合", "使用", "位置", "实参", "、", "关键字", "实参", "和", "默认值", "，", "通常", "有", "多种", "等效", "的", "函数调用", "方式", "。", "请", "看", "下面", "的", "函数", "describe", "_", "pets", "(", ")", " ", "的", "定义", "，", "其中", "给", "一个", "形参", "提供", "了", "默认值", "：", "\n", "def", " ", "describe", "_", "pet", "(", "pet", "_", "name", ",", " ", "animal", "_", "type", "=", "'", "dog", "'", ")", ":", "\n", "基于", "这种", "定义", "，", "在", "任何", "情况", "下", "都", "必须", "给", "pet", "_", "name", " ", "提供", "实参", "；", "指定", "该", "实参", "时", "可以", "使用", "位置", "方式", "，", "也", "可以", "使用", "关键字", "方式", "。", "如果", "要", "描述", "的", "动物", "不是", "小狗", "，", "还", "必须", "在", "函数调用", "中", "\n", "给", "animal", "_", "type", " ", "提供", "实参", "；", "同样", "，", "指定", "该", "实参", "时", "可以", "使用", "位置", "方式", "，", "也", "可以", "使用", "关键字", "方式", "。", "\n", "下面", "对", "这个", "函数", "的", "所有", "调用", "都", "可行", "：", "\n", "#", " ", "一条", "名为", "Willie", "的", "小狗", "\n", "describe", "_", "pet", "(", "'", "willie", "'", ")", "\n", "describe", "_", "pet", "(", "pet", "_", "name", "=", "'", "willie", "'", ")", "\n", "#", " ", "一只", "名为", "Harry", "的", "仓鼠", "\n", "describe", "_", "pet", "(", "'", "harry", "'", ",", " ", "'", "hamster", "'", ")", "\n", "describe", "_", "pet", "(", "pet", "_", "name", "=", "'", "harry", "'", ",", " ", "animal", "_", "type", "=", "'", "hamster", "'", ")"], ["describe", "_", "pet", "(", "animal", "_", "type", "=", "'", "hamster", "'", ",", " ", "pet", "_", "name", "=", "'", "harry", "'", ")", "\n", "这些", "函数调用", "的", "输出", "与", "前面", "的", "示例", "相同", "。", "\n", "注意", "\n", "注意", " ", "　", "使用", "哪", "种", "调用", "方式", "无关紧要", "，", "只要", "函数调用", "能", "生成", "你", "希望", "的", "输出", "就行", "。", "使用", "对", "你", "来说", "最", "容易", "理解", "的", "调用", "方式", "即可", "。", "\n", "8.2", ".", "5", "　", "避免", "实参", "错误", "\n", "　", "避免", "实参", "错误", "\n", "等", "你", "开始", "使用", "函数", "后", "，", "如果", "遇到", "实参", "不", "匹配", "错误", "，", "不要", "大惊小怪", "。", "你", "提供", "的", "实参", "多于", "或", "少于", "函数", "完成", "其", "工作", "所", "需", "的", "信息", "时", "，", "将", "出现", "实参", "不", "匹配", "错误", "。", "例如", "，", "如果", "调用", "函", "\n", "数", "describe", "_", "pet", "(", ")", " ", "时", "没有", "指定", "任何", "实参", "，", "结果", "将", "如何", "呢", "？", "\n", "def", " ", "describe", "_", "pet", "(", "animal", "_", "type", ",", " ", "pet", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "宠物", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nI", " ", "have", " ", "a", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", ".", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "My", " ", "\"", " ", "+", " ", "animal", "_", "type", " ", "+", " ", "\"", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "pet", "_", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "describe", "_", "pet", "(", ")", "\n", "Python", "发现", "该", "函数调用", "缺少", "必要", "的", "信息", "，", "而", "traceback", "指出", "了", "这", "一点", "："], ["Python", "发现", "该", "函数调用", "缺少", "必要", "的", "信息", "，", "而", "traceback", "指出", "了", "这", "一点", "：", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", "❶", " ", " ", " ", "File", " ", "\"", "pets", ".", "py", "\"", ",", " ", "line", " ", "6", ",", " ", "in", " ", "<", "module", ">", "\n", "❷", " ", " ", " ", " ", " ", "describe", "_", "pet", "(", ")", "\n", "❸", " ", "TypeError", ":", " ", "describe", "_", "pet", "(", ")", " ", "missing", " ", "2", " ", "required", " ", "positional", " ", "arguments", ":", " ", "'", "animal", "_", "\n", " ", " ", "type", "'", " ", "and", " ", "'", "pet", "_", "name", "'", "\n", "在", "❶", "处", "，", "traceback", "指出", "了", "问题", "出", "在", "什么", "地方", "，", "让", "我们", "能够", "回过", "头去", "找出", "函数调用", "中", "的", "错误", "。", "在", "❷", "处", "，", "指出", "了", "导致", "问题", "的", "函数调用", "。", "在", "❸", "处", "，", "traceback", "指出", "该", "函数调用", "少", "两个", "实参", "，", "\n", "并", "指出", "了", "相应", "形参", "的", "名称", "。", "如果", "这个", "函数", "存储", "在", "一个", "独立", "的", "文件", "中", "，", "我们", "也许", "无需", "打开", "这个", "文件", "并", "查看", "函数", "的", "代码", "，", "就", "能", "重新", "正确", "地", "编写", "函数调用", "。", "\n", "Python", "读取", "函数", "的", "代码", "，", "并", "指出", "我们", "需要", "为", "哪些", "形参", "提供", "实参", "，", "这", "提供", "了", "极大", "的", "帮助", "。", "这", "也", "是", "应该", "给", "变量", "和", "函数", "指定", "描述性", "名称", "的", "另", "一个", "原因", "；", "如果", "你", "这样", "做", "了", "，", "那么", "无论", "对于"], ["你", "，", "还是", "可能", "使用", "你", "编写", "的", "代码", "的", "其他", "任何人", "来说", "，", "Python", "提供", "的", "错误", "消息", "都", "将", "更", "有", "帮助", "。", "\n", "如果", "提供", "的", "实参", "太", "多", "，", "将", "出现", "类似", "的", "traceback", "，", "帮助", "你", "确保", "函数调用", "和", "函数", "定义", "匹配", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "3", " ", "T恤", "\n", "恤", " ", "：", "编写", "一个", "名为", "make", "_", "shirt", "(", ")", " ", "的", "函数", "，", "它", "接受", "一个", "尺码", "以及", "要", "印到", "T恤", "上", "的", "字样", "。", "这个", "函数", "应", "打印", "一个", "句子", "，", "概要", "地", "说明", "T恤", "的", "尺码", "和", "字样", "。", "\n", "使用", "位置", "实参", "调用", "这个", "函数", "来", "制作", "一件", "T恤", "；", "再", "使用", "关键字", "实参", "来", "调用", "这个", "函数", "。", "\n", "8", "-", "4", " ", "大", "号", "\n", "大", "号", "T恤", "\n", "恤", " ", "：", "修改", "函数", "make", "_", "shirt", "(", ")", " ", "，", "使", "其", "在", "默认", "情况", "下", "制作", "一件", "印有", "字样", "“", "I", " ", "love", " ", "Python", "”", "的", "大", "号", "T恤", "。", "调用", "这个", "函数", "来", "制作", "如下", "T恤", "：", "一件", "印有", "默认", "字样", "的", "大", "号", "T", "\n", "恤", "、", "一件", "印有", "默认", "字样", "的", "中", "号", "T恤", "和", "一件", "印有", "其他", "字样", "的", "T恤", "（", "尺码", "无关紧要", "）", "。", "\n", "8", "-", "5", " ", "城市", "\n", "城市", " ", "：", "编写", "一个", "名为", "describe", "_", "city", "(", ")", " ", "的", "函数", "，", "它", "接受", "一座", "城市", "的", "名字", "以及", "该", "城市", "所属", "的", "国家", "。", "这个", "函数", "应", "打印", "一个", "简单", "的", "句子", "，", "如", "Reykjavik", " ", "is", " ", "in", "\n", "Iceland", " ", "。", "给", "用于", "存储", "国家", "的", "形参", "指定", "默认值", "。", "为", "三座", "不同", "的", "城市", "调用", "这个", "函数", "，", "且", "其中", "至少", "有", "一座", "城市", "不", "属于", "默认", "国家", "。"], ["8.3", "　", "返回值", "\n", "　", "返回值", "\n", "函数", "并非", "总是", "直接", "显示", "输出", "，", "相反", "，", "它", "可以", "处理", "一些", "数据", "，", "并", "返回", "一个", "或", "一组", "值", "。", "函数", "返回", "的", "值", "被", "称为", "返回值", "\n", "返回值", " ", "。", "在", "函数", "中", "，", "可", "使用", "return", " ", "语句", "将值", "返回", "到", "调用函数", "的", "代码", "行", "。", "\n", "返回值", "让", "你", "能够", "将", "程序", "的", "大部分", "繁重", "工作", "移", "到", "函数", "中", "去", "完成", "，", "从而", "简化", "主程序", "。", "\n", "8.3", ".", "1", "　", "返回", "简单", "值", "\n", "　", "返回", "简单", "值", "\n", "下面", "来看", "一个", "函数", "，", "它", "接受", "名和姓", "并", "返回", "整洁", "的", "姓名", "：", "\n", "formatted", "_", "name", ".", "py", "\n", "❶", " ", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", "_", "name", ",", " ", "last", "_", "name", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", "❸", " ", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "❹", " ", "musician", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "jimi", "'", ",", " ", "'", "hendrix", "'", ")", "\n", " ", " ", "print", "(", "musician", ")", "\n", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "定义", "通过", "形参", "接受", "名和姓", "（", "见", "❶", "）", "。", "它", "将", "姓", "和", "名", "合而为一", "，", "在", "它们", "之间", "加上", "一个", "空格", "，", "并", "将", "结果", "存储", "在", "变量", "full", "_", "name", " ", "中", "（", "见", "❷", "）", "。", "然后", "，"], ["将", "full", "_", "name", " ", "的", "值", "转换", "为首", "字母", "大写", "格式", "，", "并", "将", "结果", "返回", "到", "函数调用", "行", "（", "见", "❸", "）", "。", "\n", "调用", "返回值", "的", "函数", "时", "，", "需要", "提供", "一个", "变量", "，", "用于", "存储", "返回", "的", "值", "。", "在", "这里", "，", "将", "返回值", "存储", "在", "了", "变量", "musician", " ", "中", "（", "见", "❹", "）", "。", "输出", "为", "整洁", "的", "姓名", "：", "\n", "Jimi", " ", "Hendrix", "\n", "我们", "原本", "只", "需", "编写", "下面", "的", "代码", "就", "可", "输出", "整洁", "的", "姓名", "，", "相比", "于", "此", "，", "前面", "做", "的", "工作", "好像", "太多", "了", "：", "\n", "print", "(", "\"", "Jimi", " ", "Hendrix", "\"", ")", "\n", "但", "在", "需要", "分别", "存储", "大量", "名和姓", "的", "大型", "程序", "中", "，", "像", "get", "_", "formatted", "_", "name", "(", ")", " ", "这样", "的", "函数", "非常", "有用", "。", "你", "分别", "存储", "名和姓", "，", "每当", "需要", "显示", "姓名", "时", "都", "调用", "这个", "函数", "。", "\n", "8.3", ".", "2", "　", "让", "实参", "变成", "可选", "的", "\n", "　", "让", "实参", "变成", "可选", "的", "\n", "有时候", "，", "需要", "让", "实参", "变成", "可选", "的", "，", "这样", "使用", "函数", "的", "人", "就", "只", "需", "在", "必要", "时才", "提供", "额外", "的", "信息", "。", "可", "使用", "默认值", "来", "让", "实参", "变成", "可选", "的", "。", "\n", "例如", "，", "假设", "我们", "要", "扩展", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "使", "其", "还", "处理", "中间", "名", "。", "为此", "，", "可", "将", "其", "修改", "成", "类似", "于", "下面", "这样", "：", "\n", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", "_", "name", ",", " ", "middle", "_", "name", ",", " ", "last", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\""], ["\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "middle", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "musician", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "john", "'", ",", " ", "'", "lee", "'", ",", " ", "'", "hooker", "'", ")", "\n", "print", "(", "musician", ")", "\n", "只要", "同时", "提供", "名", "、", "中间", "名和姓", "，", "这个", "函数", "就", "能", "正确", "地", "运行", "。", "它", "根据", "这三", "部分", "创建", "一个", "字符串", "，", "在", "适当", "的", "地方", "加上", "空格", "，", "并", "将", "结果", "转换", "为首", "字母", "大写", "格式", "：", "\n", "John", " ", "Lee", " ", "Hooker", "\n", "然而", "，", "并非", "所有", "的", "人", "都", "有", "中间", "名", "，", "但", "如果", "你", "调用", "这个", "函数", "时", "只", "提供", "了", "名", "和", "姓", "，", "它", "将", "不能", "正确", "地", "运行", "。", "为", "让", "中间", "名", "变成", "可选", "的", "，", "可", "给", "实参", "middle", "_", "name", " ", "指定", "一个", "默认值", "—", "—", "空字", "\n", "符串", "，", "并", "在", "用户", "没有", "提供", "中间", "名时", "不", "使用", "这个", "实参", "。", "为", "让", "get", "_", "formatted", "_", "name", "(", ")", " ", "在", "没有", "提供", "中间", "名时", "依然", "可行", "，", "可", "给", "实参", "middle", "_", "name", " ", "指定", "一个", "默认值", "—", "—", "空", "字符串", "，", "\n", "并", "将", "其移", "到", "形参", "列表", "的", "末尾", "："], ["并", "将", "其移", "到", "形参", "列表", "的", "末尾", "：", "\n", "❶", " ", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", "_", "name", ",", " ", "last", "_", "name", ",", " ", "middle", "_", "name", "=", "'", "'", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "if", " ", "middle", "_", "name", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "middle", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", "❸", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", " ", " ", "musician", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "jimi", "'", ",", " ", "'", "hendrix", "'", ")", "\n", " ", " ", "print", "(", "musician", ")", "\n", "❹", " ", "musician", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "john", "'", ",", " ", "'", "hooker", "'", ",", " ", "'", "lee", "'", ")", "\n", " ", " ", "print", "(", "musician", ")", "\n", "在", "这个", "示例", "中", "，", "姓名", "是", "根据", "三个", "可能", "提供", "的", "部分", "创建", "的", "。", "由于", "人", "都", "有名", "和", "姓", "，", "因此", "在", "函数", "定义", "中", "首先", "列出", "了", "这", "两个", "形参", "。", "中间", "名是", "可选", "的", "，", "因此", "在", "函数", "定义", "中", "最后", "列出", "该", "形参", "，"], ["并", "将", "其", "默认值", "设置", "为空", "字符串", "（", "见", "❶", "）", "。", "\n", "在", "函数", "体中", "，", "我们", "检查", "是否", "提供", "了", "中间", "名", "。", "Python", "将", "非空", "字符串", "解读", "为", "True", " ", "，", "因此", "如果", "函数调用", "中", "提供", "了", "中间", "名", "，", "if", " ", "middle", "_", "name", " ", "将", "为", "True", " ", "（", "见", "❷", "）", "。", "如果", "提供", "了", "中间", "\n", "名", "，", "就", "将", "名", "、", "中间", "名和姓", "合并", "为", "姓名", "，", "然后", "将", "其", "修改", "为首", "字母", "大写", "格式", "，", "并", "返回", "到", "函数调用", "行", "。", "在", "函数调用", "行", "，", "将", "返回", "的", "值", "存储", "在", "变量", "musician", " ", "中", "；", "然后", "将", "这个", "变量", "的", "值", "打印", "\n", "出来", "。", "如果", "没有", "提供", "中间", "名", "，", "middle", "_", "name", " ", "将", "为", "空", "字符串", "，", "导致", "if", " ", "测试", "未", "通过", "，", "进而", "执行", "else", " ", "代码", "块", "（", "见", "❸", "）", "：", "只", "使用", "名和姓", "来", "生成", "姓名", "，", "并", "将", "设置", "好", "格式", "的", "姓名", "返回", "给", "函", "\n", "数", "调用", "行", "。", "在", "函数调用", "行", "，", "将", "返回", "的", "值", "存储", "在", "变量", "musician", " ", "中", "；", "然后", "将", "这个", "变量", "的", "值", "打印", "出来", "。", "\n", "调用", "这个", "函数", "时", "，", "如果", "只想", "指定", "名和姓", "，", "调用", "起来", "将", "非常简单", "。", "如果", "还要", "指定", "中间", "名", "，", "就", "必须", "确保", "它", "是", "最后", "一个", "实参", "，", "这样", "Python", "才能", "正确", "地", "将", "位置", "实参", "关联", "到", "形参", "（", "见", "❹", "）", "。", "\n", "这个", "修改", "后", "的", "版本", "适用", "于", "只有", "名和姓", "的", "人", "，", "也", "适用", "于", "还有", "中间", "名", "的", "人", "：", "\n", "Jimi", " ", "Hendrix", "\n", "John", " ", "Lee", " ", "Hooker"], ["可选值", "让", "函数", "能够", "处理", "各种", "不同", "情形", "的", "同时", "，", "确保", "函数调用", "尽可能", "简单", "。", "\n", "8.3", ".", "3", "　", "返回", "字典", "\n", "　", "返回", "字典", "\n", "函数", "可", "返回", "任何", "类型", "的", "值", "，", "包括", "列表", "和", "字典", "等", "较", "复杂", "的", "数据结构", "。", "例如", "，", "下面", "的", "函数", "接受", "姓名", "的", "组成部分", "，", "并", "返回", "一个", "表示", "人", "的", "字典", "：", "\n", "person", ".", "py", "\n", " ", " ", "def", " ", "build", "_", "person", "(", "first", "_", "name", ",", " ", "last", "_", "name", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "一个", "字典", "，", "其中", "包含", "有关", "一个", "人", "的", "信息", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "person", " ", "=", " ", "{", "'", "first", "'", ":", " ", "first", "_", "name", ",", " ", "'", "last", "'", ":", " ", "last", "_", "name", "}", "\n", "❷", " ", " ", " ", " ", " ", "return", " ", "person", "\n", " ", " ", "musician", " ", "=", " ", "build", "_", "person", "(", "'", "jimi", "'", ",", " ", "'", "hendrix", "'", ")", "\n", "❸", " ", "print", "(", "musician", ")", "\n", "函数", "build", "_", "person", "(", ")", " ", "接受", "名和姓", "，", "并", "将", "这些", "值", "封装", "到", "字典", "中", "（", "见", "❶", "）", "。", "存储", "first", "_", "name", " ", "的", "值时", "，", "使用", "的", "键", "为", "'", "first", "'", " ", "，", "而", "存储", "last", "_", "name", " ", "的", "值时", "，", "使用", "的", "键", "\n", "为", "'", "last", "'", " ", "。", "最后", "，", "返回", "表示", "人", "的", "整个", "字典", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "打印", "这个", "返回", "的", "值", "，", "此时", "原来", "的", "两项", "文本", "信息", "存储", "在", "一个", "字典", "中", "："], ["{", "'", "first", "'", ":", " ", "'", "jimi", "'", ",", " ", "'", "last", "'", ":", " ", "'", "hendrix", "'", "}", "\n", "这个", "函数", "接受", "简单", "的", "文本", "信息", "，", "将", "其", "放在", "一个", "更", "合适", "的", "数据结构", "中", "，", "让", "你", "不仅", "能", "打印", "这些", "信息", "，", "还", "能", "以", "其他", "方式", "处理", "它们", "。", "当前", "，", "字符串", "'", "jimi", "'", " ", "和", "'", "hendrix", "'", " ", "被", "标记", "为名", "和", "\n", "姓", "。", "你", "可以", "轻松", "地", "扩展", "这个", "函数", "，", "使", "其", "接受", "可选值", "，", "如", "中间", "名", "、", "年龄", "、", "职业", "或", "你", "要", "存储", "的", "其他", "任何", "信息", "。", "例如", "，", "下面", "的", "修改", "让", "你", "还", "能", "存储", "年龄", "：", "\n", "def", " ", "build", "_", "person", "(", "first", "_", "name", ",", " ", "last", "_", "name", ",", " ", "age", "=", "'", "'", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "一个", "字典", "，", "其中", "包含", "有关", "一个", "人", "的", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "person", " ", "=", " ", "{", "'", "first", "'", ":", " ", "first", "_", "name", ",", " ", "'", "last", "'", ":", " ", "last", "_", "name", "}", "\n", " ", " ", " ", " ", "if", " ", "age", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "person", "[", "'", "age", "'", "]", " ", "=", " ", "age", "\n", " ", " ", " ", " ", "return", " ", "person", "\n", "musician", " ", "=", " ", "build", "_", "person", "(", "'", "jimi", "'", ",", " ", "'", "hendrix", "'", ",", " ", "age", "=", "27", ")", "\n", "print", "(", "musician", ")"], ["print", "(", "musician", ")", "\n", "在", "函数", "定义", "中", "，", "我们", "新增", "了", "一个", "可选", "形参", "age", " ", "，", "并", "将", "其", "默认值", "设置", "为空", "字符串", "。", "如果", "函数调用", "中", "包含", "这个", "形参", "的", "值", "，", "这个", "值", "将", "存储", "到", "字典", "中", "。", "在", "任何", "情况", "下", "，", "这个", "函数", "都", "会", "存储", "\n", "人", "的", "姓名", "，", "但", "可", "对", "其", "进行", "修改", "，", "使", "其", "也", "存储", "有关", "人", "的", "其他", "信息", "。", "\n", "8.3", ".", "4", "　", "结合", "使用", "函数", "和", "\n", "　", "结合", "使用", "函数", "和", "while", " ", "循环", "\n", "循环", "\n", "可", "将", "函数", "同", "本书", "前面", "介绍", "的", "任何", "Python", "结构", "结合", "起来", "使用", "。", "例如", "，", "下面", "将", "结合", "使用", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "和", "while", " ", "循环", "，", "以", "更", "正规", "的", "方式", "问候", "用户", "。", "下面", "尝试", "使用", "名", "\n", "和", "姓", "跟", "用户", "打招呼", "：", "\n", "greeter", ".", "py", "\n", " ", " ", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", "_", "name", ",", " ", "last", "_", "name", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", " ", " ", "#", " ", "这是", "一个", "无限", "循环", "!", "\n", " ", " ", "while", " ", "True", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nPlease", " ", "tell", " ", "me", " ", "your", " ", "name", ":", "\"", ")"], ["❶", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nPlease", " ", "tell", " ", "me", " ", "your", " ", "name", ":", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "f", "_", "name", " ", "=", " ", "input", "(", "\"", "First", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "l", "_", "name", " ", "=", " ", "input", "(", "\"", "Last", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "f", "_", "name", ",", " ", "l", "_", "name", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nHello", ",", " ", "\"", " ", "+", " ", "formatted", "_", "name", " ", "+", " ", "\"", "!", "\"", ")", "\n", "在", "这个", "示例", "中", "，", "我们", "使用", "的", "是", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "简单", "版本", "，", "不", "涉及", "中间", "名", "。", "其中", "的", "while", " ", "循环", "让", "用户", "输入", "姓名", "：", "依次", "提示", "用户", "输入", "名和姓", "（", "见", "❶", "）", "。", "\n", "但", "这个", "while", " ", "循环", "存在", "一个", "问题", "：", "没有", "定义", "退出", "条件", "。", "请", "用户", "提供", "一系列", "输入", "时", "，", "该", "在", "什么", "地方", "提供", "退出", "条件", "呢", "？", "我们", "要", "让", "用户", "能够", "尽可能", "容易", "地", "退出", "，", "因此", "每次", "提示", "用户", "输入", "\n", "时", "，", "都", "应", "提供", "退出", "途径", "。", "每次", "提示", "用户", "输入", "时", "，", "都", "使用", "break", " ", "语句", "提供", "了", "退出", "循环", "的", "简单", "途径", "：", "\n", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", "_", "name", ",", " ", "last", "_", "name", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\""], ["\"", "\"", "\"", "返回", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", "_", "name", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "_", "name", "\n", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nPlease", " ", "tell", " ", "me", " ", "your", " ", "name", ":", "\"", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "(", "enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ")", "\"", ")", "\n", " ", " ", " ", " ", "f", "_", "name", " ", "=", " ", "input", "(", "\"", "First", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", "if", " ", "f", "_", "name", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", "l", "_", "name", " ", "=", " ", "input", "(", "\"", "Last", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", "if", " ", "l", "_", "name", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "f", "_", "name", ",", " ", "l", "_", "name", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nHello", ",", " ", "\"", " ", "+", " ", "formatted", "_", "name", " ", "+", " ", "\"", "!", "\"", ")", "\n", "我们", "添加", "了", "一条", "消息", "来", "告诉", "用户", "如何", "退出", "，", "然后", "在", "每次", "提示", "用户", "输入", "时", "，", "都", "检查", "他", "输入", "的", "是否是", "退出", "值", "，", "如果", "是", "，", "就", "退出", "循环", "。", "现在", "，", "这个", "程序", "将", "不断", "地", "问候", "，", "直到", "用户", "输入", "的"], ["姓", "或", "名为", "'", "q", "'", " ", "为止", "："], ["Please", " ", "tell", " ", "me", " ", "your", " ", "name", ":", "\n", "(", "enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ")", "\n", "First", " ", "name", ":", " ", "eric", "\n", "Last", " ", "name", ":", " ", "matthes", "\n", "Hello", ",", " ", "Eric", " ", "Matthes", "!", "\n", "Please", " ", "tell", " ", "me", " ", "your", " ", "name", ":", "\n", "(", "enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ")", "\n", "First", " ", "name", ":", " ", "q", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "6", " ", "城市", "名", "\n", "城市", "名", " ", "：", "编写", "一个", "名为", "city", "_", "country", "(", ")", " ", "的", "函数", "，", "它", "接受", "城市", "的", "名称", "及其", "所属", "的", "国家", "。", "这个", "函数", "应", "返回", "一个", "格式", "类似", "于", "下面", "这样", "的", "字符串", "：", "\n", " ", " ", " ", "\"", "Santiago", ",", " ", "Chile", "\"", "\n", "至少", "使用", "三个", "城市", "-", "国家", "对", "调用", "这个", "函数", "，", "并打印", "它", "返回", "的", "值", "。", "\n", "8", "-", "7", " ", "专辑", "\n", "专辑", " ", "：", "编写", "一个", "名为", "make", "_", "album", "(", ")", " ", "的", "函数", "，", "它", "创建", "一个", "描述", "音乐", "专辑", "的", "字典", "。", "这个", "函数", "应", "接受", "歌手", "的", "名字", "和", "专辑", "名", "，", "并", "返回", "一个", "包含", "这两项", "信息", "的", "字典", "。", "使", "\n", "用", "这个", "函数", "创建", "三个", "表示", "不同", "专辑", "的", "字典", "，", "并打印", "每个", "返回", "的", "值", "，", "以", "核实", "字典", "正确", "地", "存储", "了", "专辑", "的", "信息", "。"], ["用", "这个", "函数", "创建", "三个", "表示", "不同", "专辑", "的", "字典", "，", "并打印", "每个", "返回", "的", "值", "，", "以", "核实", "字典", "正确", "地", "存储", "了", "专辑", "的", "信息", "。", "\n", "给", "函数", "make", "_", "album", "(", ")", " ", "添加", "一个", "可选", "形参", "，", "以便", "能够", "存储", "专辑", "包含", "的", "歌曲", "数", "。", "如果", "调用", "这个", "函数", "时", "指定", "了", "歌曲", "数", "，", "就", "将", "这个", "值", "添加", "到", "表示", "专辑", "的", "字典", "中", "。", "调用", "这个", "\n", "函数", "，", "并", "至少", "在", "一次", "调用", "中", "指定", "专辑", "包含", "的", "歌曲", "数", "。", "\n", "8", "-", "8", " ", "用户", "的", "专辑", "\n", "用户", "的", "专辑", " ", "：", "在", "为", "完成", "练习", "8", "-", "7", "编写", "的", "程序", "中", "，", "编写", "一个", "while", " ", "循环", "，", "让", "用户", "输入", "一个", "专辑", "的", "歌手", "和", "名称", "。", "获取", "这些", "信息", "后", "，", "使用", "它们", "来", "调用", "函", "\n", "数", "make", "_", "album", "(", ")", " ", "，", "并", "将", "创建", "的", "字典", "打印", "出来", "。", "在", "这个", "while", " ", "循环", "中", "，", "务必", "要", "提供", "退出", "途径", "。", "\n", "8.4", "　", "传递", "列表", "\n", "　", "传递", "列表", "\n", "你", "经常", "会", "发现", "，", "向", "函数", "传递", "列表", "很", "有用", "，", "这种", "列表", "包含", "的", "可能", "是", "名字", "、", "数字", "或", "更", "复杂", "的", "对象", "（", "如", "字典", "）", "。", "将", "列表", "传递", "给", "函数", "后", "，", "函数", "就", "能", "直接", "访问", "其", "内容", "。", "下面", "使用", "函数", "来", "提高", "\n", "处理", "列表", "的", "效率", "。", "\n", "假设", "有", "一个", "用户", "列表", "，", "我们", "要", "问候", "其中", "的", "每位", "用户", "。", "下面", "的", "示例", "将", "一个", "名字", "列表", "传递", "给", "一个", "名为", "greet", "_", "users", "(", ")", " ", "的", "函数", "，", "这个", "函数", "问候", "列表", "中", "的", "每个", "人", "：", "\n", "greet", "_", "users", ".", "py", "\n", " ", " ", "def", " ", "greet", "_", "users", "(", "names", ")", ":"], ["greet", "_", "users", ".", "py", "\n", " ", " ", "def", " ", "greet", "_", "users", "(", "names", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "向", "列表", "中", "的", "每位", "用户", "都", "发出", "简单", "的", "问候", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "name", " ", "in", " ", "names", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "msg", " ", "=", " ", "\"", "Hello", ",", " ", "\"", " ", "+", " ", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "!", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "msg", ")", "\n", "❶", " ", "usernames", " ", "=", " ", "[", "'", "hannah", "'", ",", " ", "'", "ty", "'", ",", " ", "'", "margot", "'", "]", "\n", " ", " ", "greet", "_", "users", "(", "usernames", ")", "\n", "我们", "将", "greet", "_", "users", "(", ")", " ", "定义", "成", "接受", "一个", "名字", "列表", "，", "并", "将", "其", "存储", "在", "形参", "names", " ", "中", "。", "这个", "函数", "遍历", "收到", "的", "列表", "，", "并", "对", "其中", "的", "每位", "用户", "都", "打印", "一条", "问候语", "。", "在", "❶", "处", "，", "我们", "定义", "了", "一", "\n", "个", "用户", "列表", "—", "—", "usernames", " ", "，", "然后", "调用", "greet", "_", "users", "(", ")", " ", "，", "并", "将", "这个", "列表", "传递", "给", "它", "：", "\n", "Hello", ",", " ", "Hannah", "!", "\n", "Hello", ",", " ", "Ty", "!", "\n", "Hello", ",", " ", "Margot", "!", "\n", "输出", "完全符合", "预期", "，", "每位", "用户", "都", "看到", "了", "一条", "个性化", "的", "问候语", "。", "每当", "你", "要", "问候", "一组", "用户", "时", "，", "都", "可", "调用", "这个", "函数", "。", "\n", "8.4", ".", "1", "　", "在", "函数", "中", "修改", "列表", "\n", "　", "在", "函数", "中", "修改", "列表"], ["8.4", ".", "1", "　", "在", "函数", "中", "修改", "列表", "\n", "　", "在", "函数", "中", "修改", "列表", "\n", "将", "列表", "传递", "给", "函数", "后", "，", "函数", "就", "可", "对", "其", "进行", "修改", "。", "在", "函数", "中", "对", "这个", "列表", "所", "做", "的", "任何", "修改", "都", "是", "永久性", "的", "，", "这", "让", "你", "能够", "高效", "地", "处理", "大量", "的", "数据", "。", "\n", "来看", "一家", "为", "用户", "提交", "的", "设计", "制作", "3D", "打印", "模型", "的", "公司", "。", "需要", "打印", "的", "设计", "存储", "在", "一个", "列表", "中", "，", "打印", "后移", "到", "另", "一个", "列表", "中", "。", "下面", "是", "在", "不", "使用", "函数", "的", "情况", "下", "模拟", "这个", "过程", "的", "代码", "：", "\n", "printing", "_", "models", ".", "py", "\n", "#", " ", "首先", "创建", "一个", "列表", "，", "其中", "包含", "一些", "要", "打印", "的", "设计", "\n", "unprinted", "_", "designs", " ", "=", " ", "[", "'", "iphone", " ", "case", "'", ",", " ", "'", "robot", " ", "pendant", "'", ",", " ", "'", "dodecahedron", "'", "]", "\n", "completed", "_", "models", " ", "=", " ", "[", "]", "\n", "#", " ", "模拟", "打印", "每个", "设计", "，", "直到", "没有", "未", "打印", "的", "设计", "为止", "\n", "#", " ", " ", "打印", "每个", "设计", "后", "，", "都", "将", "其移", "到", "列表", "completed", "_", "models", "中", "\n", "while", " ", "unprinted", "_", "designs", ":", "\n", " ", " ", " ", " ", "current", "_", "design", " ", "=", " ", "unprinted", "_", "designs", ".", "pop", "(", ")", "\n", " ", " ", " ", " ", "#", "模拟", "根据", "设计", "制作", "3D", "打印", "模型", "的", "过程", "\n", " ", " ", " ", " ", "print", "(", "\"", "Printing", " ", "model", ":", " ", "\"", " ", "+", " ", "current", "_", "design", ")"], ["print", "(", "\"", "Printing", " ", "model", ":", " ", "\"", " ", "+", " ", "current", "_", "design", ")", "\n", " ", " ", " ", " ", "completed", "_", "models", ".", "append", "(", "current", "_", "design", ")", "\n", "#", " ", "显示", "打印", "好", "的", "所有", "模型", "\n", "print", "(", "\"", "\\", "nThe", " ", "following", " ", "models", " ", "have", " ", "been", " ", "printed", ":", "\"", ")", "\n", "for", " ", "completed", "_", "model", " ", "in", " ", "completed", "_", "models", ":", "\n", " ", " ", " ", " ", "print", "(", "completed", "_", "model", ")", "\n", "这个", "程序", "首先", "创建", "一个", "需要", "打印", "的", "设计", "列表", "，", "还", "创建", "一个", "名为", "completed", "_", "models", " ", "的", "空", "列表", "，", "每个", "设计", "打印", "都", "将", "移到", "这个", "列表", "中", "。", "只要", "列表", "unprinted", "_", "designs", " ", "中", "还有", "设", "\n", "计", "，", "while", " ", "循环", "就", "模拟", "打印", "设计", "的", "过程", "：", "从", "该", "列表", "末尾", "删除", "一个", "设计", "，", "将", "其", "存储", "到", "变量", "current", "_", "design", " ", "中", "，", "并", "显示", "一条", "消息", "，", "指出", "正在", "打印", "当前", "的", "设计", "，", "再", "将", "该", "设计", "加入", "到", "\n", "列表", "completed", "_", "models", " ", "中", "。", "循环", "结束", "后", "，", "显示", "已", "打印", "的", "所有", "设计", "：", "\n", "Printing", " ", "model", ":", " ", "dodecahedron", "\n", "Printing", " ", "model", ":", " ", "robot", " ", "pendant"], ["Printing", " ", "model", ":", " ", "robot", " ", "pendant", "\n", "Printing", " ", "model", ":", " ", "iphone", " ", "case"], ["The", " ", "following", " ", "models", " ", "have", " ", "been", " ", "printed", ":", "\n", "dodecahedron", "\n", "robot", " ", "pendant", "\n", "iphone", " ", "case", "\n", "为", "重新", "组织", "这些", "代码", "，", "我们", "可", "编写", "两个", "函数", "，", "每个", "都", "做", "一件", "具体", "的", "工作", "。", "大部分", "代码", "都", "与", "原来", "相同", "，", "只是", "效率", "更高", "。", "第一个", "函数", "将", "负责", "处理", "打印", "设计", "的", "工作", "，", "而", "第二个", "将", "概述", "打", "\n", "印", "了", "哪些", "设计", "：", "\n", "❶", " ", "def", " ", "print", "_", "models", "(", "unprinted", "_", "designs", ",", " ", "completed", "_", "models", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "模拟", "打印", "每个", "设计", "，", "直到", "没有", "未", "打印", "的", "设计", "为止", "\n", " ", " ", " ", " ", " ", " ", "打印", "每个", "设计", "后", "，", "都", "将", "其移", "到", "列表", "completed", "_", "models", "中", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "unprinted", "_", "designs", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "current", "_", "design", " ", "=", " ", "unprinted", "_", "designs", ".", "pop", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "模拟", "根据", "设计", "制作", "3D", "打印", "模型", "的", "过程", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Printing", " ", "model", ":", " ", "\"", " ", "+", " ", "current", "_", "design", ")"], ["completed", "_", "models", ".", "append", "(", "current", "_", "design", ")", "\n", "❷", " ", "def", " ", "show", "_", "completed", "_", "models", "(", "completed", "_", "models", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "打印", "好", "的", "所有", "模型", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nThe", " ", "following", " ", "models", " ", "have", " ", "been", " ", "printed", ":", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "completed", "_", "model", " ", "in", " ", "completed", "_", "models", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "completed", "_", "model", ")", "\n", " ", " ", "unprinted", "_", "designs", " ", "=", " ", "[", "'", "iphone", " ", "case", "'", ",", " ", "'", "robot", " ", "pendant", "'", ",", " ", "'", "dodecahedron", "'", "]", "\n", " ", " ", "completed", "_", "models", " ", "=", " ", "[", "]", "\n", " ", " ", "print", "_", "models", "(", "unprinted", "_", "designs", ",", " ", "completed", "_", "models", ")", "\n", " ", " ", "show", "_", "completed", "_", "models", "(", "completed", "_", "models", ")"], ["show", "_", "completed", "_", "models", "(", "completed", "_", "models", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "函数", "print", "_", "models", "(", ")", " ", "，", "它", "包含", "两个", "形参", "：", "一个", "需要", "打印", "的", "设计", "列表", "和", "一个", "打印", "好", "的", "模型", "列表", "。", "给定", "这", "两个", "列表", "，", "这个", "函数", "模拟", "打印", "每个", "设计", "的", "过程", "：", "将", "\n", "设计", "逐个", "地", "从未", "打印", "的", "设计", "列表", "中", "取出", "，", "并", "加入", "到", "打印", "好", "的", "模型", "列表", "中", "。", "在", "❷", "处", "，", "我们", "定义", "了", "函数", "show", "_", "completed", "_", "models", "(", ")", " ", "，", "它", "包含", "一个", "形参", "：", "打印", "好", "的", "模型", "列表", "。", "给定", "\n", "这个", "列表", "，", "函数", "show", "_", "completed", "_", "models", "(", ")", " ", "显示", "打印", "出来", "的", "每个", "模型", "的", "名称", "。", "\n", "这个", "程序", "的", "输出", "与", "未", "使用", "函数", "的", "版本", "相同", "，", "但", "组织", "更为", "有序", "。", "完成", "大部分", "工作", "的", "代码", "都", "移到", "了", "两个", "函数", "中", "，", "让", "主程序", "更", "容易", "理解", "。", "只要", "看看", "主程序", "，", "你", "就", "知道", "这个", "程序", "的", "功能", "容", "\n", "易", "看清", "得", "多", "：", "\n", "unprinted", "_", "designs", " ", "=", " ", "[", "'", "iphone", " ", "case", "'", ",", " ", "'", "robot", " ", "pendant", "'", ",", " ", "'", "dodecahedron", "'", "]", "\n", "completed", "_", "models", " ", "=", " ", "[", "]", "\n", "print", "_", "models", "(", "unprinted", "_", "designs", ",", " ", "completed", "_", "models", ")"], ["print", "_", "models", "(", "unprinted", "_", "designs", ",", " ", "completed", "_", "models", ")", "\n", "show", "_", "completed", "_", "models", "(", "completed", "_", "models", ")", "\n", "我们", "创建", "了", "一个", "未", "打印", "的", "设计", "列表", "，", "还", "创建", "了", "一个", "空", "列表", "，", "用于", "存储", "打印", "好", "的", "模型", "。", "接下来", "，", "由于", "我们", "已经", "定义", "了", "两个", "函数", "，", "因此", "只", "需", "调用", "它们", "并", "传入", "正确", "的", "实参", "即可", "。", "我们", "调", "\n", "用", "print", "_", "models", "(", ")", " ", "并", "向", "它", "传递", "两个", "列表", "；", "像", "预期", "的", "一样", "，", "print", "_", "models", "(", ")", " ", "模拟", "打印", "设计", "的", "过程", "。", "接下来", "，", "我们", "调用", "show", "_", "completed", "_", "models", "(", ")", " ", "，", "并", "将", "打印", "好", "的", "模型", "\n", "列表", "传递", "给", "它", "，", "让", "其", "能够", "指出", "打印", "了", "哪些", "模型", "。", "描述性", "的", "函数", "名", "让", "别人", "阅读", "这些", "代码", "时", "也", "能", "明白", "，", "虽然", "其中", "没有", "任何", "注释", "。", "\n", "相比", "于", "没有", "使用", "函数", "的", "版本", "，", "这个", "程序", "更", "容易", "扩展", "和", "维护", "。", "如果", "以后", "需要", "打印", "其他", "设计", "，", "只", "需", "再次", "调用", "print", "_", "models", "(", ")", " ", "即可", "。", "如果", "我们", "发现", "需要", "对", "打印", "代码", "进行", "修改", "，", "只", "需", "\n", "修改", "这些", "代码", "一次", "，", "就", "能", "影响", "所有", "调用", "该", "函数", "的", "地方", "；", "与", "必须", "分别", "修改", "程序", "的", "多个", "地方", "相比", "，", "这种", "修改", "的", "效率", "更高", "。"], ["这个", "程序", "还", "演示", "了", "这样", "一种", "理念", "，", "即", "每个", "函数", "都", "应", "只", "负责", "一项", "具体", "的", "工作", "。", "第一个", "函数", "打印", "每个", "设计", "，", "而", "第二个", "显示", "打印", "好", "的", "模型", "；", "这", "优于", "使用", "一个", "函数", "来", "完成", "两项", "工作", "。", "编写", "\n", "函数", "时", "，", "如果", "你", "发现", "它", "执行", "的", "任务", "太", "多", "，", "请", "尝试", "将", "这些", "代码", "划分", "到", "两个", "函数", "中", "。", "别忘了", "，", "总是", "可以", "在", "一个", "函数", "中", "调用", "另", "一个", "函数", "，", "这", "有助于", "将", "复杂", "的", "任务", "划分", "成", "一系列", "的", "步骤", "。", "\n", "8.4", ".", "2", "　", "禁止", "函数", "修改", "列表", "\n", "　", "禁止", "函数", "修改", "列表", "\n", "有时候", "，", "需要", "禁止", "函数", "修改", "列表", "。", "例如", "，", "假设", "像", "前", "一个", "示例", "那样", "，", "你", "有", "一个", "未", "打印", "的", "设计", "列表", "，", "并", "编写", "了", "一个", "将", "这些", "设计", "移", "到", "打印", "好", "的", "模型", "列表", "中", "的", "函数", "。", "你", "可能", "会", "做出", "这样", "的", "\n", "决定", "：", "即便", "打印", "所有", "设计", "后", "，", "也", "要", "保留", "原来", "的", "未", "打印", "的", "设计", "列表", "，", "以供", "备案", "。", "但", "由于", "你", "将", "所有", "的", "设计", "都", "移出", "了", "unprinted", "_", "designs", " ", "，", "这个", "列表", "变成", "了", "空", "的", "，", "原来", "的", "列表", "没有", "\n", "了", "。", "为", "解决", "这个", "问题", "，", "可", "向", "函数", "传递", "列表", "的", "副本", "而", "不是", "原件", "；", "这样", "函数", "所", "做", "的", "任何", "修改", "都", "只", "影响", "副本", "，", "而", "丝毫", "不", "影响", "原件", "。", "\n", "要", "将", "列表", "的", "副本", "传递", "给", "函数", "，", "可以", "像", "下面", "这样", "做", "：", "\n", "function", "_", "name", "(", "list", "_", "name", "[", ":", "]", ")"], ["function", "_", "name", "(", "list", "_", "name", "[", ":", "]", ")", "\n", "切片", "表示法", "[", ":", "]", " ", "创建", "列表", "的", "副本", "。", "在", "print", "_", "models", ".", "py", "中", "，", "如果", "不想", "清空", "未", "打印", "的", "设计", "列表", "，", "可像", "下面", "这样", "调用", "print", "_", "models", "(", ")", " ", "：", "\n", "print", "_", "models", "(", "unprinted", "_", "designs", "[", ":", "]", ",", " ", "completed", "_", "models", ")", "\n", "这样", "函数", "print", "_", "models", "(", ")", " ", "依然", "能够", "完成", "其", "工作", "，", "因为", "它", "获得", "了", "所有", "未", "打印", "的", "设计", "的", "名称", "，", "但", "它", "使用", "的", "是", "列表", "unprinted", "_", "designs", " ", "的", "副本", "，", "而", "不是", "列", "\n", "表", "unprinted", "_", "designs", " ", "本身", "。", "像", "以前", "一样", "，", "列表", "completed", "_", "models", " ", "也", "将", "包含", "打印", "好", "的", "模型", "的", "名称", "，", "但", "函数", "所", "做", "的", "修改", "不会", "影响", "到", "列表", "unprinted", "_", "designs", " ", "。", "\n", "虽然", "向", "函数", "传递", "列表", "的", "副本", "可", "保留", "原始", "列表", "的", "内容", "，", "但", "除非", "有", "充分", "的", "理由", "需要", "传递", "副本", "，", "否则", "还是", "应该", "将", "原始", "列表", "传递", "给", "函数", "，", "因为", "让", "函数", "使用", "现成", "列表", "可", "避免", "花", "时间", "和", "内存", "创", "\n", "建", "副本", "，", "从而", "提高效率", "，", "在", "处理", "大型", "列表", "时", "尤其", "如此", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "9", " ", "魔术师"], ["建", "副本", "，", "从而", "提高效率", "，", "在", "处理", "大型", "列表", "时", "尤其", "如此", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "9", " ", "魔术师", "\n", "魔术师", " ", "：", "创建", "一个", "包含", "魔术师", "名字", "的", "列表", "，", "并", "将", "其", "传递", "给", "一个", "名为", "show", "_", "magicians", "(", ")", " ", "的", "函数", "，", "这个", "函数", "打印", "列表", "中", "每个", "魔术师", "的", "名字", "。", "\n", "8", "-", "10", " ", "了不起", "的", "魔术师", "\n", "了不起", "的", "魔术师", " ", "：", "在", "你", "为", "完成", "练习", "8", "-", "9", "而", "编写", "的", "程序", "中", "，", "编写", "一个", "名为", "make", "_", "great", "(", ")", " ", "的", "函数", "，", "对", "魔术师", "列表", "进行", "修改", "，", "在", "每个", "魔术师", "的", "名字", "中", "都", "加入", "字样", "“", "the", "\n", "Great", "”", "。", "调用函数", "show", "_", "magicians", "(", ")", " ", "，", "确认", "魔术师", "列表", "确实", "变", "了", "。", "\n", "8", "-", "11", " ", "不变", "的", "魔术师", "\n", "不变", "的", "魔术师", " ", "：", "修改", "你", "为", "完成", "练习", "8", "-", "10", "而", "编写", "的", "程序", "，", "在", "调用函数", "make", "_", "great", "(", ")", " ", "时", "，", "向", "它", "传递", "魔术师", "列表", "的", "副本", "。", "由于", "不想", "修改", "原始", "列表", "，", "请", "返回", "修改", "后", "的", "\n", "列表", "，", "并", "将", "其", "存储", "到", "另", "一个", "列表", "中", "。", "分别", "使用", "这", "两个", "列表", "来", "调用", "show", "_", "magicians", "(", ")", " ", "，", "确认", "一个", "列表", "包含", "的", "是", "原来", "的", "魔术师", "名字", "，", "而", "另", "一个", "列表", "包含", "的", "是", "添加", "了", "字", "\n", "样", "“", "the", " ", "Great", "”", "的", "魔术师", "名字", "。"], ["8.5", "　", "传递", "任意", "数量", "的", "实参", "\n", "　", "传递", "任意", "数量", "的", "实参", "\n", "有时候", "，", "你", "预先", "不", "知道", "函数", "需要", "接受", "多少", "个", "实参", "，", "好", "在", "Python", "允许", "函数", "从", "调用", "语句", "中", "收集", "任意", "数量", "的", "实参", "。", "\n", "例如", "，", "来看", "一个", "制作", "比萨", "的", "函数", "，", "它", "需要", "接受", "很多", "配料", "，", "但", "你", "无法", "预先确定", "顾客", "要", "多少", "种", "配料", "。", "下面", "的", "函数", "只有", "一个", "形参", "*", "toppings", " ", "，", "但", "不管", "调用", "语句", "提供", "了", "多少", "实参", "，", "这个", "\n", "形参", "都", "将", "它们", "统统", "收入", "囊中", "：", "\n", "pizza", ".", "py", "\n", "def", " ", "make", "_", "pizza", "(", "*", "toppings", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "顾客", "点", "的", "所有", "配料", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "toppings", ")", "\n", "make", "_", "pizza", "(", "'", "pepperoni", "'", ")", "\n", "make", "_", "pizza", "(", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "形参名", "*", "toppings", " ", "中", "的", "星号", "让", "Python", "创建", "一个", "名为", "toppings", " ", "的", "空", "元组", "，", "并", "将", "收到", "的", "所有", "值", "都", "封装", "到", "这个", "元组", "中", "。", "函数", "体内", "的", "print", " ", "语句", "通过", "生成", "输出", "来", "证明", "Python", "能够", "处理", "\n", "使用", "一个", "值", "调用函数", "的", "情形", "，", "也", "能", "处理", "使用", "三个", "值来", "调用函数", "的", "情形", "。", "它", "以", "类似", "的", "方式", "处理", "不同", "的", "调用", "，", "注意", "，", "Python", "将", "实参", "封装", "到", "一个", "元组", "中", "，", "即便", "函数", "只", "收到", "一个", "值", "也", "如此", "："], ["(", "'", "pepperoni", "'", ",", ")", "\n", "(", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "现在", "，", "我们", "可以", "将", "这条", "print", " ", "语句", "替换", "为", "一个", "循环", "，", "对", "配料", "列表", "进行", "遍历", "，", "并", "对", "顾客", "点", "的", "比萨", "进行", "描述", "：", "\n", "def", " ", "make", "_", "pizza", "(", "*", "toppings", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "概述", "要", "制作", "的", "比萨", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nMaking", " ", "a", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\"", ")", "\n", " ", " ", " ", " ", "for", " ", "topping", " ", "in", " ", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "-", " ", "\"", " ", "+", " ", "topping", ")", "\n", "make", "_", "pizza", "(", "'", "pepperoni", "'", ")", "\n", "make", "_", "pizza", "(", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "不管", "收到", "的", "是", "一个", "值", "还是", "三个", "值", "，", "这个", "函数", "都", "能", "妥善", "地", "处理", "：", "\n", "Making", " ", "a", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "pepperoni", "\n", "Making", " ", "a", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "mushrooms"], ["-", " ", "mushrooms", "\n", "-", " ", "green", " ", "peppers", "\n", "-", " ", "extra", " ", "cheese", "\n", "不管", "函数", "收到", "的", "实参", "是", "多少", "个", "，", "这种", "语法", "都", "管用", "。", "\n", "8.5", ".", "1", "　", "结合", "使用", "位置", "实参", "和", "任意", "数量", "实参", "\n", "　", "结合", "使用", "位置", "实参", "和", "任意", "数量", "实参", "\n", "如果", "要", "让", "函数", "接受", "不同", "类型", "的", "实参", "，", "必须", "在", "函数", "定义", "中将", "接纳", "任意", "数量", "实参", "的", "形参", "放在", "最后", "。", "Python", "先", "匹配", "位置", "实参", "和", "关键字", "实参", "，", "再", "将", "余下", "的", "实参", "都", "收集", "到", "最后", "一个", "形参中", "。", "\n", "例如", "，", "如果", "前面", "的", "函数", "还", "需要", "一个", "表示", "比萨", "尺寸", "的", "实参", "，", "必须", "将", "该", "形参", "放在", "形参", "*", "toppings", " ", "的", "前面", "：", "\n", "def", " ", "make", "_", "pizza", "(", "size", ",", " ", "*", "toppings", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "概述", "要", "制作", "的", "比萨", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nMaking", " ", "a", " ", "\"", " ", "+", " ", "str", "(", "size", ")", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\"", ")", "\n", " ", " ", " ", " ", "for", " ", "topping", " ", "in", " ", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "-", " ", "\"", " ", "+", " ", "topping", ")", "\n", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")"], ["make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", "make", "_", "pizza", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "基于", "上述", "函数", "定义", "，", "Python", "将", "收到", "的", "第一个", "值", "存储", "在", "形参", "size", " ", "中", "，", "并", "将", "其他", "的", "所有", "值", "都", "存储", "在", "元组", "toppings", " ", "中", "。", "在", "函数调用", "中", "，", "首先", "指定", "表示", "比萨", "尺寸", "的", "实参", "，", "然后", "根据", "需要", "\n", "指定", "任意", "数量", "的", "配料", "。", "\n", "现在", "，", "每个", "比萨", "都", "有", "了", "尺寸", "和", "一系列", "配料", "，", "这些", "信息", "按", "正确", "的", "顺序", "打印", "出来", "了", "—", "—", "首先", "是", "尺寸", "，", "然后", "是", "配料", "：", "\n", "Making", " ", "a", " ", "16", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "pepperoni", "\n", "Making", " ", "a", " ", "12", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "mushrooms", "\n", "-", " ", "green", " ", "peppers", "\n", "-", " ", "extra", " ", "cheese", "\n", "8.5", ".", "2", "　", "使用", "任意", "数量", "的", "关键字", "实参", "\n", "　", "使用", "任意", "数量", "的", "关键字", "实参", "\n", "有时候", "，", "需要", "接受", "任意", "数量", "的", "实参", "，", "但", "预先", "不", "知道", "传递", "给", "函数", "的", "会", "是", "什么样", "的", "信息", "。", "在", "这种", "情况", "下", "，", "可", "将", "函数", "编写成", "能够", "接受", "任意", "数量", "的", "键", "—", "值", "对", "—", "—", "调用", "语句", "提供", "了", "多少", "就", "接"], ["受", "多少", "。", "一个", "这样", "的", "示例", "是", "创建", "用户", "简介", "：", "你", "知道", "你", "将", "收到", "有关", "用户", "的", "信息", "，", "但", "不", "确定", "会", "是", "什么样", "的", "信息", "。", "在", "下面", "的", "示例", "中", "，", "函数", "build", "_", "profile", "(", ")", " ", "接受", "名和姓", "，", "同时", "还", "接受", "\n", "任意", "数量", "的", "关键字", "实参", "：", "\n", "user", "_", "profile", ".", "py", "\n", " ", " ", "def", " ", "build", "_", "profile", "(", "first", ",", " ", "last", ",", " ", "*", "*", "user", "_", "info", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "创建", "一个", "字典", "，", "其中", "包含", "我们", "知道", "的", "有关", "用户", "的", "一切", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "profile", " ", "=", " ", "{", "}"], ["❶", " ", " ", " ", " ", " ", "profile", "[", "'", "first", "_", "name", "'", "]", " ", "=", " ", "first", "\n", " ", " ", " ", " ", " ", " ", "profile", "[", "'", "last", "_", "name", "'", "]", " ", "=", " ", "last", "\n", "❷", " ", " ", " ", " ", " ", "for", " ", "key", ",", " ", "value", " ", "in", " ", "user", "_", "info", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "profile", "[", "key", "]", " ", "=", " ", "value", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "profile", "\n", " ", " ", "user", "_", "profile", " ", "=", " ", "build", "_", "profile", "(", "'", "albert", "'", ",", " ", "'", "einstein", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "location", "=", "'", "princeton", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "field", "=", "'", "physics", "'", ")", "\n", " ", " ", "print", "(", "user", "_", "profile", ")", "\n", "函数", "build", "_", "profile", "(", ")", " ", "的", "定义", "要求", "提供", "名和姓", "，", "同时", "允许", "用户", "根据", "需要", "提供", "任意", "数量", "的", "名称", "—", "值", "对", "。", "形参", "*", "*", "user", "_", "info", " ", "中", "的", "两个", "星号", "让", "Python", "创建", "一个", "名为", "user", "_", "info", " ", "的", "\n", "空", "字典", "，", "并", "将", "收到", "的", "所有", "名称", "—", "值", "对", "都", "封装", "到", "这个", "字典", "中", "。", "在", "这个", "函数", "中", "，", "可以", "像", "访问", "其他", "字典", "那样", "访问", "user", "_", "info", " ", "中", "的", "名称", "—", "值", "对", "。"], ["在", "build", "_", "profile", "(", ")", " ", "的", "函数", "体内", "，", "我们", "创建", "了", "一个", "名为", "profile", " ", "的", "空", "字典", "，", "用于", "存储用户", "简介", "。", "在", "❶", "处", "，", "我们", "将名", "和", "姓", "加入", "到", "这个", "字典", "中", "，", "因为", "我们", "总是", "会", "从", "用户", "那里", "收到", "\n", "这两项", "信息", "。", "在", "❷", "处", "，", "我们", "遍历", "字典", "user", "_", "info", " ", "中", "的", "键", "—", "值", "对", "，", "并", "将", "每个", "键", "—", "值", "对", "都", "加入", "到", "字典", "profile", " ", "中", "。", "最后", "，", "我们", "将", "字典", "profile", " ", "返回", "给", "函数调用", "行", "。", "\n", "我们", "调用", "build", "_", "profile", "(", ")", " ", "，", "向", "它", "传递", "名", "（", "'", "albert", "'", " ", "）", "、", "姓", "（", "'", "einstein", "'", " ", "）", "和", "两个", "键", "—", "值", "对", "（", "location", "=", "'", "princeton", "'", " ", "和", "field", "=", "'", "physics", "'", " ", "）", "，", "并", "将", "返回", "\n", "的", "profile", " ", "存储", "在", "变量", "user", "_", "profile", " ", "中", "，", "再", "打印", "这个", "变量", "：", "\n", "{", "'", "first", "_", "name", "'", ":", " ", "'", "albert", "'", ",", " ", "'", "last", "_", "name", "'", ":", " ", "'", "einstein", "'", ",", "\n", "'", "location", "'", ":", " ", "'", "princeton", "'", ",", " ", "'", "field", "'", ":", " ", "'", "physics", "'", "}", "\n", "在", "这里", "，", "返回", "的", "字典", "包含", "用户", "的", "名", "和", "姓", "，", "还有", "求学", "的", "地方", "和", "所学", "专业", "。", "调用", "这个", "函数", "时", "，", "不管", "额外", "提供", "了", "多少", "个键", "—", "值", "对", "，", "它", "都", "能", "正确", "地", "处理", "。"], ["编写", "函数", "时", "，", "你", "可以", "以", "各种", "方式", "混合", "使用", "位置", "实参", "、", "关键字", "实参", "和", "任意", "数量", "的", "实参", "。", "知道", "这些", "实参", "类型", "大有裨益", "，", "因为", "阅读", "别人", "编写", "的", "代码", "时", "经常", "会", "见到", "它们", "。", "要", "正确", "地", "使用", "这", "\n", "些", "类型", "的", "实参", "并", "知道", "它们", "的", "使用", "时机", "，", "需要", "经过", "一定", "的", "练习", "。", "就", "目前", "而言", "，", "牢记", "使用", "最", "简单", "的", "方法", "来", "完成", "任务", "就", "好", "了", "。", "你", "继续", "往", "下", "阅读", "，", "就", "会", "知道", "在", "各种", "情况", "下", "哪种", "方法", "的", "效率", "\n", "是", "最高", "的", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "12", " ", "三明治", "\n", "三明治", " ", "：", "编写", "一个", "函数", "，", "它", "接受", "顾客", "要", "在", "三明治", "中", "添加", "的", "一系列", "食材", "。", "这个", "函数", "只有", "一个", "形参", "（", "它", "收集", "函数调用", "中", "提供", "的", "所有", "食材", "）", "，", "并打印", "一条", "消息", "，", "对", "顾客", "\n", "点", "的", "三明治", "进行", "概述", "。", "调用", "这个", "函数", "三次", "，", "每次", "都", "提供", "不同", "数量", "的", "实参", "。", "\n", "8", "-", "13", " ", "用户", "简介", "\n", "用户", "简介", " ", "：", "复制", "前面", "的", "程序", "user", "_", "profile", ".", "py", "，", "在", "其中", "调用", "build", "_", "profile", "(", ")", " ", "来", "创建", "有关", "你", "的", "简介", "；", "调用", "这个", "函数", "时", "，", "指定", "你", "的", "名", "和", "姓", "，", "以及", "三个", "描述", "你", "的", "键", "-", "值", "\n", "对", "。", "\n", "8", "-", "14", " ", "汽车", "\n", "汽车", " ", "：", "编写", "一个", "函数", "，", "将", "一辆", "汽车", "的", "信息", "存储", "在", "一个", "字典", "中", "。", "这个", "函数", "总是", "接受", "制造商", "和", "型号", "，", "还", "接受", "任意", "数量", "的", "关键字", "实参", "。", "这样", "调用", "这个", "函数", "：", "提供", "必", "不可", "\n", "少", "的", "信息", "，", "以及", "两个", "名称", "—", "值", "对", "，", "如", "颜色", "和", "选装", "配件", "。", "这个", "函数", "必须", "能够", "像", "下面", "这样", "进行", "调用", "："], ["少", "的", "信息", "，", "以及", "两个", "名称", "—", "值", "对", "，", "如", "颜色", "和", "选装", "配件", "。", "这个", "函数", "必须", "能够", "像", "下面", "这样", "进行", "调用", "：", "\n", "car", " ", "=", " ", "make", "_", "car", "(", "'", "subaru", "'", ",", " ", "'", "outback", "'", ",", " ", "color", "=", "'", "blue", "'", ",", " ", "tow", "_", "package", "=", "True", ")", "\n", "打印", "返回", "的", "字典", "，", "确认", "正确", "地", "处理", "了", "所有", "的", "信息", "。", "\n", "8.6", "　", "将", "函数", "存储", "在", "模块", "中", "\n", "　", "将", "函数", "存储", "在", "模块", "中", "\n", "函数", "的", "优点", "之一", "是", "，", "使用", "它们", "可", "将", "代码", "块", "与", "主程序", "分离", "。", "通过", "给", "函数", "指定", "描述性", "名称", "，", "可", "让", "主程序", "容易", "理解", "得", "多", "。", "你", "还", "可以", "更进一步", "，", "将", "函数", "存储", "在", "被", "称为", "模块", "\n", "模块", " ", "的", "独立", "文件", "中", "，", "\n", "再", "将", "模块", "导入", "\n", "导入", " ", "到", "主程序", "中", "。", "import", " ", "语句", "允许", "在", "当前", "运行", "的", "程序", "文件", "中", "使用", "模块", "中", "的", "代码", "。", "\n", "通过", "将", "函数", "存储", "在", "独立", "的", "文件", "中", "，", "可", "隐藏", "程序代码", "的", "细节", "，", "将", "重点", "放在", "程序", "的", "高层", "逻辑", "上", "。", "这", "还", "能", "让你在", "众多", "不同", "的", "程序", "中", "重用", "函数", "。", "将", "函数", "存储", "在", "独立", "文件", "中后", "，", "可", "与", "其他", "程", "\n", "序员", "共享", "这些", "文件", "而", "不是", "整个", "程序", "。", "知道", "如何", "导入", "函数", "还", "能", "让", "你", "使用", "其他", "程序员", "编写", "的", "函数库", "。", "\n", "导入", "模块", "的", "方法", "有", "多种", "，", "下面", "对", "每种", "都", "作", "简要", "的", "介绍", "。", "\n", "8.6", ".", "1", "　", "导入", "整个", "模块", "\n", "　", "导入", "整个", "模块", "\n", "要", "让", "函数", "是", "可", "导入", "的", "，", "得", "先", "创建", "模块", "。", "模块"], ["8.6", ".", "1", "　", "导入", "整个", "模块", "\n", "　", "导入", "整个", "模块", "\n", "要", "让", "函数", "是", "可", "导入", "的", "，", "得", "先", "创建", "模块", "。", "模块", "\n", "模块", " ", "是", "扩展", "名为", ".", "py", "的", "文件", "，", "包含", "要", "导入到", "程序", "中", "的", "代码", "。", "下面", "来", "创建", "一个", "包含", "函数", "make", "_", "pizza", "(", ")", " ", "的", "模块", "。", "为此", "，", "我们", "将", "文件", "pizza", ".", "py", "中", "\n", "除", "函数", "make", "_", "pizza", "(", ")", " ", "之外", "的", "其他", "代码", "都", "删除", "：", "\n", "pizza", ".", "py", "\n", "def", " ", "make", "_", "pizza", "(", "size", ",", " ", "*", "toppings", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "概述", "要", "制作", "的", "比萨", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "nMaking", " ", "a", " ", "\"", " ", "+", " ", "str", "(", "size", ")", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\"", ")", "\n", " ", " ", " ", " ", "for", " ", "topping", " ", "in", " ", "toppings", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "-", " ", "\"", " ", "+", " ", "topping", ")", "\n", "接下来", "，", "我们", "在", "pizza", ".", "py", "所在", "的", "目录", "中", "创建", "另", "一个", "名为", "making", "_", "pizzas", ".", "py", "的", "文件", "，", "这个", "文件", "导入", "刚", "创建", "的", "模块", "，", "再", "调用", "make", "_", "pizza", "(", ")", " ", "两次", "：", "\n", "making", "_", "pizzas", ".", "py", "\n", " ", " ", "import", " ", "pizza", "\n", "❶", " ", "pizza", ".", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")"], ["❶", " ", "pizza", ".", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", " ", " ", "pizza", ".", "make", "_", "pizza", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "Python", "读取", "这个", "文件", "时", "，", "代码", "行", "import", " ", "pizza", " ", "让", "Python", "打开", "文件", "pizza", ".", "py", "，", "并", "将", "其中", "的", "所有", "函数", "都", "复制到", "这个", "程序", "中", "。", "你", "看不到", "复制", "的", "代码", "，", "因为", "这个", "程序运行", "时", "，", "Python", "在", "幕", "\n", "后", "复制", "这些", "代码", "。", "你", "只", "需", "知道", "，", "在", "making", "_", "pizzas", ".", "py", "中", "，", "可以", "使用", "pizza", ".", "py", "中", "定义", "的", "所有", "函数", "。", "\n", "要", "调用", "被", "导入", "的", "模块", "中", "的", "函数", "，", "可", "指定", "导入", "的", "模块", "的", "名称", "pizza", " ", "和", "函数", "名", "make", "_", "pizza", "(", ")", " ", "，", "并用", "句点", "分隔", "它们", "（", "见", "❶", "）", "。", "这些", "代码", "的", "输出", "与", "没有", "导入", "模块", "的", "原始", "程序", "相同", "：", "\n", "Making", " ", "a", " ", "16", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "pepperoni"], ["Making", " ", "a", " ", "12", "-", "inch", " ", "pizza", " ", "with", " ", "the", " ", "following", " ", "toppings", ":", "\n", "-", " ", "mushrooms", "\n", "-", " ", "green", " ", "peppers", "\n", "-", " ", "extra", " ", "cheese", "\n", "这", "就是", "一种", "导入", "方法", "：", "只", "需", "编写", "一条", "import", " ", "语句", "并", "在", "其中", "指定", "模块", "名", "，", "就", "可", "在", "程序", "中", "使用", "该", "模块", "中", "的", "所有", "函数", "。", "如果", "你", "使用", "这种", "import", " ", "语句", "导入", "了", "名为", "module", "_", "name", ".", "py", "\n", "的", "整个", "模块", "，", "就", "可", "使用", "下面", "的", "语法", "来", "使用", "其中", "任何", "一个", "函数", "：", "\n", "module", "_", "name", ".", "function", "_", "name", "(", ")", "\n", "8.6", ".", "2", "　", "导入", "特定", "的", "函数", "\n", "　", "导入", "特定", "的", "函数", "\n", "你", "还", "可以", "导入", "模块", "中", "的", "特定", "函数", "，", "这种", "导入", "方法", "的", "语法", "如下", "：", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "function", "_", "name", "\n", "通过", "用", "逗号", "分隔", "函数", "名", "，", "可", "根据", "需要", "从", "模块", "中", "导入", "任意", "数量", "的", "函数", "：", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "function", "_", "0", ",", " ", "function", "_", "1", ",", " ", "function", "_", "2", "\n", "对于", "前面", "的", "making", "_", "pizzas", ".", "py", "示例", "，", "如果", "只想", "导入", "要", "使用", "的", "函数", "，", "代码", "将", "类似", "于", "下面", "这样", "：", "\n", "from", " ", "pizza", " ", "import", " ", "make", "_", "pizza"], ["from", " ", "pizza", " ", "import", " ", "make", "_", "pizza", "\n", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", "make", "_", "pizza", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "若", "使用", "这种", "语法", "，", "调用函数", "时", "就", "无需", "使用", "句点", "。", "由于", "我们", "在", "import", " ", "语句", "中显式", "地", "导入", "了", "函数", "make", "_", "pizza", "(", ")", " ", "，", "因此", "调用", "它", "时", "只", "需", "指定", "其", "名称", "。", "\n", "8.6", ".", "3", "　", "使用", "\n", "　", "使用", "as", " ", "给", "函数", "指定", "别名", "\n", "给", "函数", "指定", "别名", "\n", "如果", "要", "导入", "的", "函数", "的", "名称", "可能", "与", "程序", "中", "现有", "的", "名称", "冲突", "，", "或者", "函数", "的", "名称", "太", "长", "，", "可", "指定", "简短", "而", "独一无二", "的", "别名", "\n", "别名", " ", "—", "—", "函数", "的", "另", "一个", "名称", "，", "类似", "于", "外号", "。", "要", "给", "函数", "指定", "这种", "特殊", "外", "\n", "号", "，", "需要", "在", "导入", "它", "时", "这样", "做", "。", "\n", "下面", "给", "函数", "make", "_", "pizza", "(", ")", " ", "指定", "了", "别名", "mp", "(", ")", " ", "。", "这", "是", "在", "import", " ", "语句", "中", "使用", "make", "_", "pizza", " ", "as", " ", "mp", " ", "实现", "的", "，", "关键字", "as", " ", "将", "函数", "重命名", "为", "你", "提供", "的", "别名", "：", "\n", "from", " ", "pizza", " ", "import", " ", "make", "_", "pizza", " ", "as", " ", "mp", "\n", "mp", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", "mp", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")"], ["上面", "的", "import", " ", "语句", "将", "函数", "make", "_", "pizza", "(", ")", " ", "重命名", "为", "mp", "(", ")", " ", "；", "在", "这个", "程序", "中", "，", "每当", "需要", "调用", "make", "_", "pizza", "(", ")", " ", "时", "，", "都", "可", "简写", "成", "mp", "(", ")", " ", "，", "而", "Python", "将", "运行", "make", "_", "pizza", "(", ")", " ", "中", "的", "代", "\n", "码", "，", "这", "可", "避免", "与", "这个", "程序", "可能", "包含", "的", "函数", "make", "_", "pizza", "(", ")", " ", "混淆", "。", "\n", "指定", "别名", "的", "通用", "语法", "如下", "：", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "function", "_", "name", " ", "as", " ", "fn", "\n", "8.6", ".", "4", "　", "使用", "\n", "　", "使用", "as", " ", "给", "模块", "指定", "别名", "\n", "给", "模块", "指定", "别名", "\n", "你", "还", "可以", "给", "模块", "指定", "别名", "。", "通过", "给", "模块", "指定", "简短", "的", "别名", "（", "如给", "模块", "pizza", " ", "指定", "别名", "p", " ", "）", "，", "让", "你", "能够", "更", "轻松", "地", "调用", "模块", "中", "的", "函数", "。", "相比", "于", "pizza", ".", "make", "_", "pizza", "(", ")", "\n", "，", "p", ".", "make", "_", "pizza", "(", ")", " ", "更为", "简洁", "：", "\n", "import", " ", "pizza", " ", "as", " ", "p", "\n", "p", ".", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", "p", ".", "make", "_", "pizza", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")"], ["上述", "import", " ", "语句", "给", "模块", "pizza", " ", "指定", "了", "别名", "p", " ", "，", "但", "该", "模块", "中", "所有", "函数", "的", "名称", "都", "没变", "。", "调用函数", "make", "_", "pizza", "(", ")", " ", "时", "，", "可", "编写", "代码", "p", ".", "make", "_", "pizza", "(", ")", " ", "而", "不", "\n", "是", "pizza", ".", "make", "_", "pizza", "(", ")", " ", "，", "这样", "不仅", "能", "使", "代码", "更", "简洁", "，", "还", "可以", "让", "你", "不再", "关注", "模块", "名", "，", "而", "专注", "于", "描述性", "的", "函数", "名", "。", "这些", "函数", "名", "明确", "地", "指出", "了", "函数", "的", "功能", "，", "对", "理解", "代码", "而言", "，", "它们", "\n", "比", "模块", "名", "更", "重要", "。", "\n", "给", "模块", "指定", "别名", "的", "通用", "语法", "如下", "：", "\n", "import", " ", "module", "_", "name", " ", "as", " ", "mn", "\n", "8.6", ".", "5", "　", "导入", "模块", "中", "的", "所有", "函数", "\n", "　", "导入", "模块", "中", "的", "所有", "函数", "\n", "使用", "星号", "（", "*", " ", "）", "运算符", "可", "让", "Python", "导入", "模块", "中", "的", "所有", "函数", "："], ["from", " ", "pizza", " ", "import", " ", "*", "\n", "make", "_", "pizza", "(", "16", ",", " ", "'", "pepperoni", "'", ")", "\n", "make", "_", "pizza", "(", "12", ",", " ", "'", "mushrooms", "'", ",", " ", "'", "green", " ", "peppers", "'", ",", " ", "'", "extra", " ", "cheese", "'", ")", "\n", "import", " ", "语句", "中", "的", "星号", "让", "Python", "将", "模块", "pizza", " ", "中", "的", "每个", "函数", "都", "复制到", "这个", "程序", "文件", "中", "。", "由于", "导入", "了", "每个", "函数", "，", "可", "通过", "名称", "来", "调用", "每个", "函数", "，", "而", "无需", "使用", "句点", "表示法", "。", "然而", "，", "使用", "\n", "并非", "自己", "编写", "的", "大型", "模块", "时", "，", "最好", "不要", "采用", "这种", "导入", "方法", "：", "如果", "模块", "中有", "函数", "的", "名称", "与", "你", "的", "项目", "中", "使用", "的", "名称", "相同", "，", "可能", "导致", "意想不到", "的", "结果", "：", "Python", "可能", "遇到", "多个", "名称", "相同", "的", "函", "\n", "数", "或", "变量", "，", "进而", "覆盖", "函数", "，", "而", "不是", "分别", "导入", "所有", "的", "函数", "。", "\n", "最佳", "的", "做法", "是", "，", "要么", "只", "导入", "你", "需要", "使用", "的", "函数", "，", "要么", "导入", "整个", "模块", "并", "使用", "句点", "表示法", "。", "这能", "让", "代码", "更", "清晰", "，", "更", "容易", "阅读", "和", "理解", "。", "这里", "之所以", "介绍", "这种", "导入", "方法", "，", "只是", "想", "让你在", "阅", "\n", "读", "别人", "编写", "的", "代码", "时", "，", "如果", "遇到", "类似", "于", "下面", "的", "import", " ", "语句", "，", "能够", "理解", "它们", "：", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "*", "\n", "8.7", "　", "函数", "编写", "指南", "\n", "　", "函数", "编写", "指南"], ["from", " ", "module", "_", "name", " ", "import", " ", "*", "\n", "8.7", "　", "函数", "编写", "指南", "\n", "　", "函数", "编写", "指南", "\n", "编写", "函数", "时", "，", "需要", "牢记", "几个", "细节", "。", "应", "给", "函数", "指定", "描述性", "名称", "，", "且", "只", "在", "其中", "使用", "小写字母", "和", "下划线", "。", "描述性", "名称", "可", "帮助", "你", "和", "别人", "明白", "代码", "想要", "做", "什么", "。", "给", "模块", "命名", "时", "也", "应", "遵循", "上述", "\n", "约定", "。", "\n", "每个", "函数", "都", "应", "包含", "简要地", "阐述", "其", "功能", "的", "注释", "，", "该", "注释", "应", "紧跟", "在", "函数", "定义", "后面", "，", "并", "采用", "文档", "字符串", "格式", "。", "文档", "良好", "的", "函数", "让", "其他", "程序员", "只", "需", "阅读", "文档", "字符串", "中", "的", "描述", "就", "能够", "使用", "\n", "它", "：", "他们", "完全", "可以", "相信", "代码", "如", "描述", "的", "那样", "运行", "；", "只要", "知道", "函数", "的", "名称", "、", "需要", "的", "实参", "以及", "返回值", "的", "类型", "，", "就", "能", "在", "自己", "的", "程序", "中", "使用", "它", "。", "\n", "给", "形参", "指定", "默认值", "时", "，", "等", "号", "两边", "不要", "有", "空格", "：", "\n", "def", " ", "function", "_", "name", "(", "parameter", "_", "0", ",", " ", "parameter", "_", "1", "=", "'", "default", " ", "value", "'", ")", "\n", "对于", "函数调用", "中", "的", "关键字", "实参", "，", "也", "应", "遵循", "这种", "约定", "：", "\n", "function", "_", "name", "(", "value", "_", "0", ",", " ", "parameter", "_", "1", "=", "'", "value", "'", ")"], ["function", "_", "name", "(", "value", "_", "0", ",", " ", "parameter", "_", "1", "=", "'", "value", "'", ")", "\n", "PEP", " ", "8", "（", "https", ":", "/", "/", "www", ".", "python", ".", "org", "/", "dev", "/", "peps", "/", "pep", "-", "0008", "/", " ", "）", "建议", "代码", "行", "的", "长度", "不要", "超过", "79", "字符", "，", "这样", "只要", "编辑器", "窗口", "适中", "，", "就", "能", "看到", "整行", "代码", "。", "如果", "形参", "很多", "，", "导致", "函数", "定义", "的", "长度", "超过", "了", "\n", "79", "字符", "，", "可", "在", "函数", "定义", "中", "输入", "左", "括号", "后", "按", "回车键", "，", "并", "在", "下", "一行", "按", "两次", "Tab", "键", "，", "从而", "将", "形参", "列表", "和", "只", "缩进", "一层", "的", "函数", "体", "区分", "开来", "。", "\n", "大多数", "编辑器", "都", "会", "自动", "对齐", "后续", "参数", "列表", "行", "，", "使", "其", "缩进", "程度", "与", "你", "给", "第一个", "参数", "列表", "行", "指定", "的", "缩进", "程度", "相同", "：", "\n", "def", " ", "function", "_", "name", "(", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "parameter", "_", "0", ",", " ", "parameter", "_", "1", ",", " ", "parameter", "_", "2", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "parameter", "_", "3", ",", " ", "parameter", "_", "4", ",", " ", "parameter", "_", "5", ")", ":", "\n", " ", " ", " ", " ", "function", " ", "body", "...", "\n", "如果", "程序", "或", "模块", "包含", "多个", "函数", "，", "可", "使用", "两个", "空行", "将", "相邻", "的", "函数", "分开", "，", "这样", "将", "更", "容易", "知道", "前", "一个", "函数", "在", "什么", "地方", "结束", "，", "下", "一个", "函数", "从", "什么", "地方", "开始", "。", "\n", "所有", "的", "import", " ", "语句", "都", "应", "放在", "文件", "开头", "，", "唯一", "例外", "的", "情形", "是", "，", "在", "文件", "开头", "使用", "了", "注释", "来", "描述", "整个", "程序", "。"], ["所有", "的", "import", " ", "语句", "都", "应", "放在", "文件", "开头", "，", "唯一", "例外", "的", "情形", "是", "，", "在", "文件", "开头", "使用", "了", "注释", "来", "描述", "整个", "程序", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "8", "-", "15", " ", "打印", "模型", "\n", "打印", "模型", " ", "：", "将", "示例", "print", "_", "models", ".", "py", "中", "的", "函数", "放在", "另", "一个", "名为", "printing", "_", "functions", ".", "py", "的", "文件", "中", "；", "在", "print", "_", "models", ".", "py", "的", "开头", "编写", "一条", "import", " ", "语句", "，", "并", "修改", "这个", "文件", "以", "使用", "导", "\n", "入", "的", "函数", "。", "\n", "8", "-", "16", " ", "导入", "\n", "导入", " ", "：", "选择", "一个", "你", "编写", "的", "且", "只", "包含", "一个", "函数", "的", "程序", "，", "并", "将", "这个", "函数", "放在", "另", "一个", "文件", "中", "。", "在", "主程序", "文件", "中", "，", "使用", "下述", "各种", "方法", "导入", "这个", "函数", "，", "再", "调用", "它", "：", "\n", "import", " ", "module", "_", "name", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "function", "_", "name", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "function", "_", "name", " ", "as", " ", "fn", "\n", "import", " ", "module", "_", "name", " ", "as", " ", "mn", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "*", "\n", "8", "-", "17", " ", "函数", "编写", "指南", "\n", "函数", "编写", "指南", " ", "：", "选择", "你", "在", "本章", "中", "编写", "的", "三个", "程序", "，", "确保", "它们", "遵循", "了", "本节", "介绍", "的", "函数", "编写", "指南", "。", "\n", "8.8", "　", "小结", "\n", "　", "小结"], ["8.8", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "编写", "函数", "，", "以及", "如何", "传递", "实参", "，", "让", "函数", "能够", "访问", "完成", "其", "工作", "所", "需", "的", "信息", "；", "如何", "使用", "位置", "实参", "和", "关键字", "实参", "，", "以及", "如何", "接受", "任意", "数量", "的", "实参", "；", "显示", "输出", "\n", "的", "函数", "和", "返回值", "的", "函数", "；", "如何", "将", "函数", "同", "列表", "、", "字典", "、", "if", " ", "语句", "和", "while", " ", "循环", "结合", "起来", "使用", "。", "你", "还", "知道", "了", "如何", "将", "函数", "存储", "在", "被", "称为", "模块", "\n", "模块", " ", "的", "独立", "文件", "中", "，", "让", "程序", "文件", "更", "简单", "、", "更", "易于", "\n", "理解", "。", "最后", "，", "你", "学习", "了", "函数", "编写", "指南", "，", "遵循", "这些", "指南", "可", "让", "程序", "始终", "结构", "良好", "，", "并", "对", "你", "和", "其他人", "来说", "易于", "阅读", "。", "\n", "程序员", "的", "目标", "之一", "是", "，", "编写", "简单", "的", "代码", "来", "完成", "任务", "，", "而", "函数", "有助于", "你", "实现", "这样", "的", "目标", "。", "它们", "让", "你", "编写", "好", "代码", "块", "并", "确定", "其", "能够", "正确", "运行", "后", "，", "就", "可", "置之不理", "。", "确定", "函数", "能够", "正确", "地", "完", "\n", "成其", "工作", "后", "，", "你", "就", "可以", "接着", "投身于", "下", "一个", "编码", "任务", "。", "\n", "函数", "让", "你", "编写", "代码", "一次", "后", "，", "想", "重用", "它们", "多少", "次", "就", "重用", "多少", "次", "。", "需要", "运行", "函数", "中", "的", "代码", "时", "，", "只", "需", "编写", "一行", "函数调用", "代码", "，", "就", "可", "让", "函数", "完成", "其", "工作", "。", "需要", "修改", "函数", "的", "行为", "时", "，", "只", "需修", "\n", "改", "一个", "代码", "块", "，", "而", "所", "做", "的", "修改", "将", "影响", "调用", "这个", "函数", "的", "每个", "地方", "。", "\n", "使用", "函数", "让", "程序", "更", "容易", "阅读", "，", "而", "良好", "的", "函数", "名", "概述", "了", "程序", "各个", "部分", "的", "作用", "。", "相对", "于", "阅读", "一系列", "的", "代码", "块", "，", "阅读", "一系列", "函数调用", "让", "你", "能够", "更快", "地", "明白", "程序", "的", "作用", "。"], ["函数", "还", "让", "代码", "更", "容易", "测试", "和", "调试", "。", "如果", "程序", "使用", "一系列", "的", "函数", "来", "完成", "其", "任务", "，", "而", "其中", "的", "每个", "函数", "都", "完成", "一项", "具体", "的", "工作", "，", "测试", "和", "维护", "起来", "将", "容易", "得", "多", "：", "你", "可", "编写", "分别", "调用", "每个", "函", "\n", "数", "的", "程序", "，", "并", "测试", "每个", "函数", "是否", "在", "它", "可能", "遇到", "的", "各种", "情形", "下", "都", "能", "正确", "地", "运行", "。", "经过", "这样", "的", "测试", "后", "你", "就", "能", "信心", "满满", "，", "深信", "你", "每次", "调用", "这些", "函数", "时", "，", "它们", "都", "将", "正确", "地", "运行", "。", "\n", "在", "第", "9", "章", "，", "你", "将", "学习", "编写", "类", "。", "类", "将", "函数", "和", "数据", "整洁地", "封装", "起来", "，", "让", "你", "能够", "灵活", "而", "高效", "地", "使用", "它们", "。"], ["第", "\n", "第", " ", "9", " ", "章", "　", "类", "\n", "章", "　", "类", "\n", "面向对象编程", "\n", "面向对象编程", " ", "是", "最", "有效", "的", "软件", "编写", "方法", "之一", "。", "在", "面向对象编程", "中", "，", "你", "编写", "表示", "现实", "世界", "中", "的", "事物", "和", "情景", "的", "类", "，", "并", "基于", "这些", "类来", "创建对象", "。", "编写", "类时", "，", "你", "定义", "一大", "类", "对", "\n", "象", "都", "有", "的", "通用", "行为", "。", "基于", "类", "创建对象", "\n", "对象", " ", "时", "，", "每个", "对象", "都", "自动", "具备", "这种", "通用", "行为", "，", "然后", "可", "根据", "需要", "赋予", "每个", "对象", "独特", "的", "个性", "。", "使用", "面向对象编程", "可", "模拟", "现实", "情景", "，", "其", "逼真", "\n", "程度", "达到", "了", "令", "你", "惊讶", "的", "地步", "。", "\n", "根据", "类来", "创建对象", "被", "称为", "实例", "化", "\n", "实例", "化", " ", "，", "这", "让", "你", "能够", "使用", "类", "的", "实例", "。", "在", "本章", "中", "，", "你", "将", "编写", "一些", "类", "并", "创建", "其实", "例", "。", "你", "将", "指定", "可", "在", "实例", "中", "存储", "什么", "信息", "，", "定义", "可", "对", "这些", "实例", "执行", "\n", "哪些", "操作", "。", "你", "还", "将", "编写", "一些", "类来", "扩展", "既有", "类", "的", "功能", "，", "让", "相似", "的", "类", "能够", "高效", "地", "共享", "代码", "。", "你", "将", "把", "自己", "编写", "的", "类", "存储", "在", "模块", "中", "，", "并", "在", "自己", "的", "程序", "文件", "中", "导入", "其他", "程序员", "编", "\n", "写", "的", "类", "。", "\n", "理解", "面向对象编程", "有助于", "你", "像", "程序员", "那样", "看", "世界", "，", "还", "可以", "帮助", "你", "真正", "明白", "自己", "编写", "的", "代码", "：", "不仅", "是", "各行", "代码", "的", "作用", "，", "还有", "代码", "背后", "更", "宏大", "的", "概念", "。", "了解", "类", "背后", "的", "概念", "\n", "可", "培养", "逻辑思维", "，", "让", "你", "能够", "通过", "编写程序", "来", "解决", "遇到", "的", "几乎", "任何", "问题", "。"], ["可", "培养", "逻辑思维", "，", "让", "你", "能够", "通过", "编写程序", "来", "解决", "遇到", "的", "几乎", "任何", "问题", "。", "\n", "随着", "面临", "的", "挑战", "日益", "严峻", "，", "类", "还", "能", "让", "你", "以及", "与", "你", "合作", "的", "其他", "程序员", "的", "生活", "更", "轻松", "。", "如果", "你", "与", "其他", "程序员", "基于", "同样", "的", "逻辑", "来", "编写", "代码", "，", "你们", "就", "能", "明白", "对方", "所", "做", "的", "工作", "；", "\n", "你", "编写", "的", "程序", "将", "能", "被", "众多", "合作者", "所", "理解", "，", "每个", "人", "都", "能", "事半功倍", "。", "\n", "9.1", "　", "创建", "和", "使用", "类", "\n", "　", "创建", "和", "使用", "类", "\n", "使用", "类", "几乎", "可以", "模拟", "任何", "东西", "。", "下面", "来", "编写", "一个", "表示", "小狗", "的", "简单", "类", "Dog", " ", "—", "—", "它", "表示", "的", "不是", "特定", "的", "小狗", "，", "而是", "任何", "小狗", "。", "对于", "大多数", "宠物狗", "，", "我们", "都", "知道", "些", "什么", "呢", "？", "它们", "都", "有", "名字", "\n", "和", "年龄", "；", "我们", "还", "知道", "，", "大多数", "小狗", "还会", "蹲下", "和", "打滚", "。", "由于", "大多数", "小狗", "都", "具备", "上述", "两项", "信息", "（", "名字", "和", "年龄", "）", "和", "两种", "行为", "（", "蹲下", "和", "打滚", "）", "，", "我们", "的", "Dog", " ", "类", "将", "包含", "它们", "。", "这个", "类", "让", "\n", "Python", "知道", "如何", "创建", "表示", "小狗", "的", "对象", "。", "编写", "这个", "类后", "，", "我们", "将", "使用", "它", "来", "创建", "表示", "特定", "小狗", "的", "实例", "。", "\n", "9.1", ".", "1", "　", "创建", "\n", "　", "创建", "Dog", " ", "类", "\n", "类", "\n", "根据", "Dog", " ", "类", "创建", "的", "每个", "实例", "都", "将", "存储", "名字", "和", "年龄", "。", "我们", "赋予", "了", "每条", "小狗", "蹲下", "（", "sit", "(", ")", " ", "）", "和", "打滚", "（", "roll", "_", "over", "(", ")", " ", "）", "的", "能力", "：", "\n", "dog", ".", "py", "\n", "❶", " ", "class", " ", "Dog", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "小狗", "的", "简单", "尝试", "\"", "\"", "\""], ["dog", ".", "py", "\n", "❶", " ", "class", " ", "Dog", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "小狗", "的", "简单", "尝试", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "name", ",", " ", "age", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "属性", "name", "和", "age", "\"", "\"", "\"", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "name", " ", "=", " ", "name", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "age", " ", "=", " ", "age", "\n", "❺", " ", " ", " ", " ", " ", "def", " ", "sit", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "模拟", "小狗", "被", "命令", "时", "蹲下", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "self", ".", "name", ".", "title", "(", ")", " ", "+", " ", "\"", " ", "is", " ", "now", " ", "sitting", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "roll", "_", "over", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "模拟", "小狗", "被", "命令", "时", "打滚", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "self", ".", "name", ".", "title", "(", ")", " ", "+", " ", "\"", " ", "rolled", " ", "over", "!", "\"", ")", "\n", "这里", "需要", "注意", "的", "地方", "很多", "，", "但", "你", "也", "不用", "担心", "，", "本章", "充斥", "着", "这样", "的", "结构", "，", "你", "有", "大", "把", "的", "机会", "熟悉", "它", "。", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "名为", "Dog", " ", "的", "类", "。", "根据", "约定", "，", "在", "Python", "中", "，", "首字母", "大写", "的"], ["名称", "指", "的", "是", "类", "。", "这个", "类", "定义", "中", "的", "括号", "是", "空", "的", "，", "因为", "我们", "要", "从", "空白", "创建", "这个", "类", "。", "在", "❷", "处", "，", "我们", "编写", "了", "一个", "文档", "字符串", "，", "对", "这个", "类", "的", "功能", "作", "了", "描述", "。", "\n", "1", ".", " ", "方法", "\n", "方法", "__", "init", "__", "(", ")", "\n", "类中", "的", "函数", "称为", "方法", "\n", "方法", " ", "；", "你", "前面", "学到", "的", "有关", "函数", "的", "一切", "都", "适用", "于", "方法", "，", "就", "目前", "而言", "，", "唯一", "重要", "的", "差别", "是", "调用", "方法", "的", "方式", "。", "❸", "处", "的", "方法", "__", "init", "__", "(", ")", " ", "是", "一个", "特殊", "的", "方法", "，", "每当", "你", "根", "\n", "据", "Dog", " ", "类", "创建", "新", "实例", "时", "，", "Python", "都", "会", "自动", "运行", "它", "。", "在", "这个", "方法", "的", "名称", "中", "，", "开头", "和", "末尾", "各有", "两个", "下划线", "，", "这是", "一种", "约定", "，", "旨在", "避免", "Python", "默认", "方法", "与", "普通", "方法", "发生", "名称", "冲突", "。", "\n", "我们", "将", "方法", "__", "init", "__", "(", ")", " ", "定义", "成", "了", "包含", "三个", "形参", "：", "self", " ", "、", "name", " ", "和", "age", " ", "。", "在", "这个", "方法", "的", "定义", "中", "，", "形参", "self", " ", "必不可少", "，", "还", "必须", "位于", "其他", "形参", "的", "前面", "。", "为何", "必须", "在", "方法", "定义", "中包", "\n", "含形", "参", "self", " ", "呢", "？", "因为", "Python", "调用", "这个", "__", "init", "__", "(", ")", " ", "方法", "来", "创建", "Dog", " ", "实例", "时", "，", "将", "自动", "传入", "实参", "self", " ", "。", "每个", "与", "类", "相关联", "的", "方法", "调用", "都", "自动", "传递", "实参", "self", " ", "，", "它", "是", "一个", "指向", "实例", "本身"], ["的", "引用", "，", "让", "实例", "能够", "访问", "类中", "的", "属性", "和", "方法", "。", "我们", "创建", "Dog", " ", "实例", "时", "，", "Python", "将", "调用", "Dog", " ", "类", "的", "方法", "__", "init", "__", "(", ")", " ", "。", "我们", "将", "通过", "实参", "向", "Dog", "(", ")", " ", "传递", "名字", "和", "年龄", "；", "self", " ", "会", "自动", "传递", "，"], ["因此", "我们", "不", "需要", "传递", "它", "。", "每当", "我们", "根据", "Dog", " ", "类", "创建", "实例", "时", "，", "都", "只", "需", "给", "最后", "两个", "形参", "（", "name", " ", "和", "age", " ", "）", "提供", "值", "。", "\n", "❹", "处", "定义", "的", "两个", "变量", "都", "有", "前缀", "self", " ", "。", "以", "self", " ", "为", "前缀", "的", "变量", "都", "可", "供类", "中", "的", "所有", "方法", "使用", "，", "我们", "还", "可以", "通过", "类", "的", "任何", "实例", "来", "访问", "这些", "变量", "。", "self", ".", "name", " ", "=", " ", "name", " ", "获取", "存储", "在", "形", "\n", "参", "name", " ", "中", "的", "值", "，", "并", "将", "其", "存储", "到", "变量", "name", " ", "中", "，", "然后", "该", "变量", "被", "关联", "到", "当前", "创建", "的", "实例", "。", "self", ".", "age", " ", "=", " ", "age", " ", "的", "作用", "与", "此", "类似", "。", "像", "这样", "可", "通过", "实例", "访问", "的", "变量", "称为", "属性", "\n", "属性", " ", "。", "\n", "Dog", " ", "类", "还", "定义", "了", "另外", "两个", "方法", "：", "sit", "(", ")", " ", "和", "roll", "_", "over", "(", ")", " ", "（", "见", "❺", "）", "。", "由于", "这些", "方法", "不", "需要", "额外", "的", "信息", "，", "如", "名字", "或", "年龄", "，", "因此", "它们", "只有", "一个", "形参", "self", " ", "。", "我们", "后面", "将", "创建", "的", "实例", "能", "\n", "够", "访问", "这些", "方法", "，", "换句话说", "，", "它们", "都", "会", "蹲下", "和", "打滚", "。", "当前", "，", "sit", "(", ")", " ", "和", "roll", "_", "over", "(", ")", " ", "所", "做", "的", "有限", "，", "它们", "只是", "打印", "一条", "消息", "，", "指出", "小狗", "正", "蹲下", "或", "打滚", "。", "但", "可以", "扩展", "这些", "方法", "以", "模拟", "\n", "实际", "情况", "：", "如果", "这个", "类", "包含", "在", "一个", "计算机", "游戏", "中", "，", "这些", "方法", "将", "包含", "创建", "小狗", "蹲下", "和", "打滚", "动画", "效果", "的", "代码", "。", "如果", "这个", "类", "是", "用于", "控制", "机器", "狗", "的", "，", "这些", "方法", "将", "引导", "机器", "狗", "做出", "蹲下", "和", "打", "\n", "滚", "的", "动作", "。", "\n", "2", ".", " ", "在"], ["滚", "的", "动作", "。", "\n", "2", ".", " ", "在", "\n", "在", "Python", " ", "2.7", "中", "创建", "类", "\n", "中", "创建", "类", "\n", "在", "Python", " ", "2.7", "中", "创建", "类时", "，", "需要", "做", "细微", "的", "修改", "—", "—", "在", "括号", "内", "包含", "单词", "object", " ", "：", "\n", "class", " ", "ClassName", "(", "object", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "这", "让", "Python", " ", "2.7", "类", "的", "行为", "更", "像", "Python", " ", "3", "类", "，", "从而", "简化", "了", "你", "的", "工作", "。", "\n", "在", "Python", " ", "2.7", "中", "定义", "Dog", " ", "类时", "，", "代码", "类似", "于", "下面", "这样", "：", "\n", "class", " ", "Dog", "(", "object", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "9.1", ".", "2", "　", "根据", "类", "创建", "实例", "\n", "　", "根据", "类", "创建", "实例", "\n", "可", "将", "类", "视为", "有关", "如何", "创建", "实例", "的", "说明", "。", "Dog", " ", "类", "是", "一系列", "说明", "，", "让", "Python", "知道", "如何", "创建", "表示", "特定", "小狗", "的", "实例", "。", "\n", "下面", "来", "创建", "一个", "表示", "特定", "小狗", "的", "实例", "：", "\n", " ", " ", "class", " ", "Dog", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", "my", "_", "dog", " ", "=", " ", "Dog", "(", "'", "willie", "'", ",", " ", "6", ")", "\n", "❷", " ", "print", "(", "\"", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "my", "_", "dog", ".", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "❸", " ", "print", "(", "\"", "My", " ", "dog", " ", "is", " ", "\"", " ", "+", " ", "str", "(", "my", "_", "dog", ".", "age", ")", " ", "+", " ", "\"", " ", "years", " ", "old", ".", "\"", ")"], ["这里", "使用", "的", "是", "前", "一个", "示例", "中", "编写", "的", "Dog", " ", "类", "。", "在", "❶", "处", "，", "我们", "让", "Python", "创建", "一条", "名字", "为", "'", "willie", "'", " ", "、", "年龄", "为", "6", " ", "的", "小狗", "。", "遇到", "这", "行", "代码", "时", "，", "Python", "使用", "实参", "'", "willie", "'", " ", "和", "6", " ", "调用", "Dog", " ", "类", "\n", "中", "的", "方法", "__", "init", "__", "(", ")", " ", "。", "方法", "__", "init", "__", "(", ")", " ", "创建", "一个", "表示", "特定", "小狗", "的", "示例", "，", "并", "使用", "我们", "提供", "的", "值来", "设置", "属性", "name", " ", "和", "age", " ", "。", "方法", "__", "init", "__", "(", ")", " ", "并未", "显式", "地", "包含", "return", " ", "语句", "，", "\n", "但", "Python", "自动", "返回", "一个", "表示", "这", "条", "小狗", "的", "实例", "。", "我们", "将", "这个", "实例", "存储", "在", "变量", "my", "_", "dog", " ", "中", "。", "在", "这里", "，", "命名", "约定", "很", "有用", "：", "我们", "通常", "可以", "认为", "首字母", "大写", "的", "名称", "（", "如", "Dog", " ", "）", "指", "的", "是", "类", "，", "而", "\n", "小写", "的", "名称", "（", "如", "my", "_", "dog", " ", "）", "指", "的", "是", "根据", "类", "创建", "的", "实例", "。", "\n", "1", ".", " ", "访问", "属性", "\n", "访问", "属性", "\n", "要", "访问", "实例", "的", "属性", "，", "可", "使用", "句点", "表示法", "。", "在", "❷", "处", "，", "我们", "编写", "了", "如下", "代码", "来", "访问", "my", "_", "dog", " ", "的", "属性", "name", " ", "的", "值", "：", "\n", "my", "_", "dog", ".", "name", "\n", "句点", "表示法", "在", "Python", "中", "很", "常用", "，", "这种", "语法", "演示", "了", "Python", "如何", "获悉", "属性", "的", "值", "。", "在", "这里", "，", "Python", "先", "找到", "实例", "my", "_", "dog", " ", "，", "再", "查找", "与", "这个", "实例", "相关联", "的", "属性", "name", " ", "。", "在", "Dog", " ", "类中", "引用", "这个", "属"], ["性时", "，", "使用", "的", "是", "self", ".", "name", " ", "。", "在", "❸", "处", "，", "我们", "使用", "同样", "的", "方法", "来", "获取", "属性", "age", " ", "的", "值", "。", "在", "前面", "的", "第", "1", "条", "print", " ", "语句", "中", "，", "my", "_", "dog", ".", "name", ".", "title", "(", ")", " ", "将", "my", "_", "dog", " ", "的", "属性", "name", " ", "的", "\n", "值", "'", "willie", "'", " ", "改为", "首字母", "大写", "的", "；", "在", "第", "2", "条", "print", " ", "语句", "中", "，", "str", "(", "my", "_", "dog", ".", "age", ")", " ", "将", "my", "_", "dog", " ", "的", "属性", "age", " ", "的", "值", "6", " ", "转换", "为", "字符串", "。", "\n", "输出", "是", "有关", "my", "_", "dog", " ", "的", "摘要", "：", "\n", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Willie", ".", "\n", "My", " ", "dog", " ", "is", " ", "6", " ", "years", " ", "old", ".", "\n", "2", ".", " ", "调用", "方法", "\n", "调用", "方法", "\n", "根据", "Dog", " ", "类", "创建", "实例", "后", "，", "就", "可以", "使用", "句点", "表示法", "来", "调用", "Dog", " ", "类中", "定义", "的", "任何", "方法", "。", "下面", "来", "让", "小狗", "蹲下", "和", "打滚", "：", "\n", "class", " ", "Dog", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "my", "_", "dog", " ", "=", " ", "Dog", "(", "'", "willie", "'", ",", " ", "6", ")", "\n", "my", "_", "dog", ".", "sit", "(", ")", "\n", "my", "_", "dog", ".", "roll", "_", "over", "(", ")", "\n", "要", "调用", "方法", "，", "可", "指定", "实例", "的", "名称", "（", "这里", "是", "my", "_", "dog", " ", "）", "和", "要", "调用", "的", "方法", "，", "并用", "句点", "分隔", "它们", "。", "遇到", "代码", "my", "_", "dog", ".", "sit", "(", ")", " ", "时", "，", "Python", "在", "类", "Dog", " ", "中", "查找", "方法", "sit", "(", ")", " ", "并", "运行", "其", "代码", "。"], ["Python", "以", "同样", "的", "方式", "解读", "代码", "my", "_", "dog", ".", "roll", "_", "over", "(", ")", " ", "。", "\n", "Willie", "按", "我们", "的", "命令", "做", "了", "：", "\n", "Willie", " ", "is", " ", "now", " ", "sitting", ".", "\n", "Willie", " ", "rolled", " ", "over", "!", "\n", "这种", "语法", "很", "有用", "。", "如果", "给", "属性", "和", "方法", "指定", "了", "合适", "的", "描述性", "名称", "，", "如", "name", " ", "、", "age", " ", "、", "sit", "(", ")", " ", "和", "roll", "_", "over", "(", ")", " ", "，", "即便", "是", "从未见过", "的", "代码", "块", "，", "我们", "也", "能够", "轻松", "地", "推断出", "它", "是", "做", "什么"], ["的", "。", "\n", "3", ".", " ", "创建", "多个", "实例", "\n", "创建", "多个", "实例", "\n", "可", "按", "需求", "根据", "类", "创建", "任意", "数量", "的", "实例", "。", "下面", "再", "创建", "一个", "名为", "your", "_", "dog", " ", "的", "实例", "：", "\n", "class", " ", "Dog", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "my", "_", "dog", " ", "=", " ", "Dog", "(", "'", "willie", "'", ",", " ", "6", ")", "\n", "your", "_", "dog", " ", "=", " ", "Dog", "(", "'", "lucy", "'", ",", " ", "3", ")", "\n", "print", "(", "\"", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "my", "_", "dog", ".", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "print", "(", "\"", "My", " ", "dog", " ", "is", " ", "\"", " ", "+", " ", "str", "(", "my", "_", "dog", ".", "age", ")", " ", "+", " ", "\"", " ", "years", " ", "old", ".", "\"", ")", "\n", "my", "_", "dog", ".", "sit", "(", ")", "\n", "print", "(", "\"", "\\", "nYour", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "\"", " ", "+", " ", "your", "_", "dog", ".", "name", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "print", "(", "\"", "Your", " ", "dog", " ", "is", " ", "\"", " ", "+", " ", "str", "(", "your", "_", "dog", ".", "age", ")", " ", "+", " ", "\"", " ", "years", " ", "old", ".", "\"", ")", "\n", "your", "_", "dog", ".", "sit", "(", ")", "\n", "在", "这个", "实例", "中", "，", "我们", "创建", "了", "两条", "小狗", "，", "它们", "分别", "名为", "Willie", "和", "Lucy", "。", "每条", "小狗", "都", "是", "一个", "独立", "的", "实例", "，", "有", "自己", "的", "一组", "属性", "，", "能够", "执行", "相同", "的", "操作", "：", "\n", "My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Willie", ".", "\n", "My", " ", "dog", " ", "is", " ", "6", " ", "years", " ", "old", "."], ["My", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Willie", ".", "\n", "My", " ", "dog", " ", "is", " ", "6", " ", "years", " ", "old", ".", "\n", "Willie", " ", "is", " ", "now", " ", "sitting", ".", "\n", "Your", " ", "dog", "'", "s", " ", "name", " ", "is", " ", "Lucy", ".", "\n", "Your", " ", "dog", " ", "is", " ", "3", " ", "years", " ", "old", ".", "\n", "Lucy", " ", "is", " ", "now", " ", "sitting", ".", "\n", "就算", "我们", "给", "第二条", "小狗", "指定", "同样", "的", "名字", "和", "年龄", "，", "Python", "依然", "会", "根据", "Dog", " ", "类", "创建", "另", "一个", "实例", "。", "你", "可", "按", "需求", "根据", "一个", "类", "创建", "任意", "数量", "的", "实例", "，", "条件", "是", "将", "每个", "实例", "都", "存储", "在", "不同", "的", "变量", "\n", "中", "，", "或", "占用", "列表", "或", "字典", "的", "不同", "位置", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "9", "-", "1", " ", "餐馆", "\n", "餐馆", " ", "：", "创建", "一个", "名为", "Restaurant", " ", "的", "类", "，", "其", "方法", "__", "init", "__", "(", ")", " ", "设置", "两个", "属性", "：", "restaurant", "_", "name", " ", "和", "cuisine", "_", "type", " ", "。", "创建", "一个名", "\n", "为", "describe", "_", "restaurant", "(", ")", " ", "的", "方法", "和", "一个", "名为", "open", "_", "restaurant", "(", ")", " ", "的", "方法", "，", "其中", "前者", "打印", "前述", "两项", "信息", "，", "而", "后者", "打印", "一条", "消息", "，", "指出", "餐馆", "正在", "营业", "。", "\n", "根据", "这个", "类", "创建", "一个", "名为", "restaurant", " ", "的", "实例", "，", "分别", "打印", "其", "两个", "属性", "，", "再", "调用", "前述", "两个", "方法", "。", "\n", "9", "-", "2", " ", "三家", "餐馆"], ["9", "-", "2", " ", "三家", "餐馆", "\n", "三家", "餐馆", " ", "：", "根据", "你", "为", "完成", "练习", "9", "-", "1", "而", "编写", "的", "类", "创建", "三个", "实例", "，", "并", "对", "每个", "实例", "调用", "方法", "describe", "_", "restaurant", "(", ")", " ", "。", "\n", "9", "-", "3", " ", "用户", "\n", "用户", " ", "：", "创建", "一个", "名为", "User", " ", "的", "类", "，", "其中", "包含", "属性", "first", "_", "name", " ", "和", "last", "_", "name", " ", "，", "还有", "用户", "简介", "通常", "会", "存储", "的", "其他", "几个", "属性", "。", "在", "类", "User", " ", "中", "定义", "一个名", "\n", "为", "describe", "_", "user", "(", ")", " ", "的", "方法", "，", "它", "打印", "用户", "信息", "摘要", "；", "再", "定义", "一个", "名为", "greet", "_", "user", "(", ")", " ", "的", "方法", "，", "它", "向", "用户", "发出", "个性化", "的", "问候", "。", "\n", "创建", "多个", "表示", "不同", "用户", "的", "实例", "，", "并", "对", "每个", "实例", "都", "调用", "上述", "两个", "方法", "。", "\n", "9.2", "　", "使用", "类", "和", "实例", "\n", "　", "使用", "类", "和", "实例", "\n", "你", "可以", "使用", "类来", "模拟", "现实", "世界", "中", "的", "很多", "情景", "。", "类", "编写", "好后", "，", "你", "的", "大部分", "时间", "都", "将", "花", "在", "使用", "根据", "类", "创建", "的", "实例", "上", "。", "你", "需要", "执行", "的", "一个", "重要", "任务", "是", "修改", "实例", "的", "属性", "。", "你", "可以", "直接", "修改", "\n", "实例", "的", "属性", "，", "也", "可以", "编写", "方法", "以", "特定", "的", "方式", "进行", "修改", "。", "\n", "9.2", ".", "1", "　", "\n", "　", "Car", " ", "类", "\n", "类", "\n", "下面", "来", "编写", "一个", "表示", "汽车", "的", "类", "，", "它", "存储", "了", "有关", "汽车", "的", "信息", "，", "还有", "一个", "汇总", "这些", "信息", "的", "方法", "：", "\n", "car", ".", "py", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "汽车", "的", "简单", "尝试", "\"", "\"", "\""], ["car", ".", "py", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "汽车", "的", "简单", "尝试", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "描述", "汽车", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "make", " ", "=", " ", "make", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "model", " ", "=", " ", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "year", " ", "=", " ", "year", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "get", "_", "descriptive", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "描述性", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "long", "_", "name", " ", "=", " ", "str", "(", "self", ".", "year", ")", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "make", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "long", "_", "name", ".", "title", "(", ")", "\n", "❸", " ", "my", "_", "new", "_", "car", " ", "=", " ", "Car", "(", "'", "audi", "'", ",", " ", "'", "a4", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")"], ["print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "方法", "__", "init", "__", "(", ")", " ", "。", "与", "前面", "的", "Dog", " ", "类中", "一样", "，", "这个", "方法", "的", "第一个", "形参为", "self", " ", "；", "我们", "还", "在", "这个", "方法", "中", "包含", "了", "另外", "三个", "形参", "：", "make", " ", "、", "model", " ", "和", "year", " ", "。", "方", "\n", "法", "__", "init", "__", "(", ")", " ", "接受", "这些", "形参", "的", "值", "，", "并", "将", "它们", "存储", "在", "根据", "这个", "类", "创建", "的", "实例", "的", "属性", "中", "。", "创建", "新", "的", "Car", " ", "实例", "时", "，", "我们", "需要", "指定", "其", "制造商", "、", "型号", "和", "生产", "年份", "。", "\n", "在", "❷", "处", "，", "我们", "定义", "了", "一个", "名为", "get", "_", "descriptive", "_", "name", "(", ")", " ", "的", "方法", "，", "它", "使用", "属性", "year", " ", "、", "make", " ", "和", "model", " ", "创建", "一个", "对", "汽车", "进行", "描述", "的", "字符串", "，", "让", "我们", "无需", "分别", "打印", "每个", "属性", "的", "\n", "值", "。", "为", "在", "这个", "方法", "中", "访问", "属性", "的", "值", "，", "我们", "使用", "了", "self", ".", "make", " ", "、", "self", ".", "model", " ", "和", "self", ".", "year", " ", "。", "在", "❸", "处", "，", "我们", "根据", "Car", " ", "类", "创建", "了", "一个", "实例", "，", "并", "将", "其", "存储", "到", "变量", "my", "_", "new", "_", "car", "\n", "中", "。", "接下来", "，", "我们", "调用", "方法", "get", "_", "descriptive", "_", "name", "(", ")", " ", "，", "指出", "我们", "拥有", "的", "是", "一辆", "什么样", "的", "汽车", "：", "\n", "2016", " ", "Audi", " ", "A4", "\n", "为", "让", "这个", "类", "更", "有趣", "，", "下面", "给", "它", "添加", "一个", "随", "时间", "变化", "的", "属性", "，", "它", "存储", "汽车", "的", "总", "里程", "。"], ["2016", " ", "Audi", " ", "A4", "\n", "为", "让", "这个", "类", "更", "有趣", "，", "下面", "给", "它", "添加", "一个", "随", "时间", "变化", "的", "属性", "，", "它", "存储", "汽车", "的", "总", "里程", "。", "\n", "9.2", ".", "2", "　", "给", "属性", "指定", "默认值", "\n", "　", "给", "属性", "指定", "默认值", "\n", "类中", "的", "每个", "属性", "都", "必须", "有", "初始值", "，", "哪怕", "这个", "值", "是", "0", "或空", "字符串", "。", "在", "有些", "情况", "下", "，", "如", "设置", "默认值", "时", "，", "在", "方法", "__", "init", "__", "(", ")", " ", "内", "指定", "这种", "初始值", "是", "可行", "的", "；", "如果", "你", "对", "某个", "属性", "这样", "做", "\n", "了", "，", "就", "无需", "包含", "为", "它", "提供", "初始值", "的", "形参", "。"], ["下面", "来", "添加", "一个", "名为", "odometer", "_", "reading", " ", "的", "属性", "，", "其", "初始值", "总是", "为", "0", "。", "我们", "还", "添加", "了", "一个", "名为", "read", "_", "odometer", "(", ")", " ", "的", "方法", "，", "用于", "读取", "汽车", "的", "里程表", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "描述", "汽车", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "make", " ", "=", " ", "make", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "model", " ", "=", " ", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "year", " ", "=", " ", "year", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "0", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "get", "_", "descriptive", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "read", "_", "odometer", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "指出", "汽车", "里程", "的", "消息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "odometer", "_", "reading", ")", " ", "+", " ", "\"", " ", "miles", " ", "on", " ", "it", ".", "\"", ")"], ["my", "_", "new", "_", "car", " ", "=", " ", "Car", "(", "'", "audi", "'", ",", " ", "'", "a4", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "new", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "现在", "，", "当", "Python", "调用", "方法", "__", "init", "__", "(", ")", " ", "来", "创建", "新", "实例", "时", "，", "将", "像", "前", "一个", "示例", "一样", "以", "属性", "的", "方式", "存储", "制造商", "、", "型号", "和", "生产", "年份", "。", "接下来", "，", "Python", "将", "创建", "一个名", "\n", "为", "odometer", "_", "reading", " ", "的", "属性", "，", "并", "将", "其", "初始值", "设置", "为", "0", "（", "见", "❶", "）", "。", "在", "❷", "处", "，", "我们", "还", "定义", "了", "一个", "名为", "read", "_", "odometer", "(", ")", " ", "的", "方法", "，", "它", "让", "你", "能够", "轻松", "地", "获悉", "汽车", "的", "里程", "。", "\n", "一", "开始", "汽车", "的", "里程", "为", "0", "：", "\n", "2016", " ", "Audi", " ", "A4", "\n", "This", " ", "car", " ", "has", " ", "0", " ", "miles", " ", "on", " ", "it", ".", "\n", "出售", "时", "里程表", "读数", "为", "0", "的", "汽车", "并不多", "，", "因此", "我们", "需要", "一个", "修改", "该", "属性", "的", "值", "的", "途径", "。", "\n", "9.2", ".", "3", "　", "修改", "属性", "的", "值", "\n", "　", "修改", "属性", "的", "值", "\n", "可以", "以", "三种", "不同", "的", "方式", "修改", "属性", "的", "值", "：", "直接", "通过", "实例", "进行", "修改", "；", "通过", "方法", "进行", "设置", "；", "通过", "方法", "进行", "递增", "（", "增加", "特定", "的", "值", "）", "。", "下面", "依次", "介绍", "这些", "方法", "。", "\n", "1", ".", " ", "直接", "修改", "属性", "的", "值", "\n", "直接", "修改", "属性", "的", "值"], ["1", ".", " ", "直接", "修改", "属性", "的", "值", "\n", "直接", "修改", "属性", "的", "值", "\n", "要", "修改", "属性", "的", "值", "，", "最", "简单", "的", "方式", "是", "通过", "实例", "直接", "访问", "它", "。", "下面", "的", "代码", "直接", "将", "里程表", "读数", "设置", "为", "23", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "my", "_", "new", "_", "car", " ", "=", " ", "Car", "(", "'", "audi", "'", ",", " ", "'", "a4", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "❶", " ", "my", "_", "new", "_", "car", ".", "odometer", "_", "reading", " ", "=", " ", "23", "\n", " ", " ", "my", "_", "new", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "在", "❶", "处", "，", "我们", "使用", "句点", "表示法", "来", "直接", "访问", "并", "设置", "汽车", "的", "属性", "odometer", "_", "reading", " ", "。", "这", "行", "代码", "让", "Python", "在", "实例", "my", "_", "new", "_", "car", " ", "中", "找到", "属性", "odometer", "_", "reading", " ", "，", "并", "将", "该", "属性", "的", "值", "\n", "设置", "为", "23", "：", "\n", "2016", " ", "Audi", " ", "A4", "\n", "This", " ", "car", " ", "has", " ", "23", " ", "miles", " ", "on", " ", "it", ".", "\n", "有时候", "需要", "像", "这样", "直接", "访问", "属性", "，", "但", "其他", "时候", "需要", "编写", "对", "属性", "进行", "更新", "的", "方法", "。", "\n", "2", ".", " ", "通过", "方法", "修改", "属性", "的", "值", "\n", "通过", "方法", "修改", "属性", "的", "值", "\n", "如果", "有", "替", "你", "更新", "属性", "的", "方法", "，", "将", "大有裨益", "。", "这样", "，", "你", "就", "无需", "直接", "访问", "属性", "，", "而", "可", "将", "值", "传递", "给", "一个", "方法", "，", "由", "它", "在", "内部", "进行", "更新", "。"], ["下面", "的", "示例", "演示", "了", "一个", "名为", "update", "_", "odometer", "(", ")", " ", "的", "方法", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "update", "_", "odometer", "(", "self", ",", " ", "mileage", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "里程表", "读数", "设置", "为", "指定", "的", "值", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "mileage", "\n", " ", " ", "my", "_", "new", "_", "car", " ", "=", " ", "Car", "(", "'", "audi", "'", ",", " ", "'", "a4", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "❷", " ", "my", "_", "new", "_", "car", ".", "update", "_", "odometer", "(", "23", ")", "\n", " ", " ", "my", "_", "new", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "对", "Car", " ", "类", "所", "做", "的", "唯一", "修改", "是", "在", "❶", "处", "添加", "了", "方法", "update", "_", "odometer", "(", ")", " ", "。", "这个", "方法", "接受", "一个", "里程", "值", "，", "并", "将", "其", "存储", "到", "self", ".", "odometer", "_", "reading", " ", "中", "。", "在", "❷", "处", "，", "我们", "调用", "\n", "了", "update", "_", "odometer", "(", ")", " ", "，", "并", "向", "它", "提供", "了", "实参", "23", "（", "该", "实参", "对应", "于", "方法", "定义", "中", "的", "形参", "mileage", " ", "）", "。", "它", "将", "里程表", "读数", "设置", "为", "23", "；", "而", "方法", "read", "_", "odometer", "(", ")", " ", "打印", "该", "读数", "："], ["2016", " ", "Audi", " ", "A4", "\n", "This", " ", "car", " ", "has", " ", "23", " ", "miles", " ", "on", " ", "it", ".", "\n", "可", "对", "方法", "update", "_", "odometer", "(", ")", " ", "进行", "扩展", "，", "使", "其", "在", "修改", "里程表", "读数", "时", "做些", "额外", "的", "工作", "。", "下面", "来", "添加", "一些", "逻辑", "，", "禁止", "任何人", "将", "里程表", "读数", "往回", "调", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["def", " ", "update", "_", "odometer", "(", "self", ",", " ", "mileage", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "将", "里程表", "读数", "设置", "为", "指定", "的", "值", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "禁止", "将", "里程表", "读数", "往回", "调", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "mileage", " ", ">", "=", " ", "self", ".", "odometer", "_", "reading", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "mileage", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "else", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "can", "'", "t", " ", "roll", " ", "back", " ", "an", " ", "odometer", "!", "\"", ")", "\n", "现在", "，", "update", "_", "odometer", "(", ")", " ", "在", "修改", "属性", "前", "检查", "指定", "的", "读数", "是否", "合理", "。", "如果", "新", "指定", "的", "里程", "（", "mileage", " ", "）", "大于", "或", "等于", "原来", "的", "里程", "（", "self", ".", "odometer", "_", "reading", " ", "）", "，", "就", "将", "里程", "\n", "表", "读数", "改为", "新", "指定", "的", "里程", "（", "见", "❶", "）", "；", "否则", "就", "发出", "警告", "，", "指出", "不能", "将", "里程表", "往回", "拨", "（", "见", "❷", "）", "。", "\n", "3", ".", " ", "通过", "方法", "对", "属性", "的", "值", "进行", "递增", "\n", "通过", "方法", "对", "属性", "的", "值", "进行", "递增"], ["3", ".", " ", "通过", "方法", "对", "属性", "的", "值", "进行", "递增", "\n", "通过", "方法", "对", "属性", "的", "值", "进行", "递增", "\n", "有时候", "需要", "将", "属性", "值", "递增", "特定", "的", "量", "，", "而", "不是", "将", "其", "设置", "为", "全新", "的", "值", "。", "假设", "我们", "购买", "了", "一辆", "二手车", "，", "且", "从", "购买", "到", "登记", "期间", "增加", "了", "100", "英里", "的", "里程", "，", "下面", "的", "方法", "让", "我们", "能够", "传递", "这个", "增", "\n", "量", "，", "并", "相应", "地", "增加", "里程表", "读数", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "_", "odometer", "(", "self", ",", " ", "mileage", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "increment", "_", "odometer", "(", "self", ",", " ", "miles", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "里程表", "读数", "增加", "指定", "的", "量", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "+", "=", " ", "miles", "\n", "❷", " ", "my", "_", "used", "_", "car", " ", "=", " ", "Car", "(", "'", "subaru", "'", ",", " ", "'", "outback", "'", ",", " ", "2013", ")", "\n", " ", " ", "print", "(", "my", "_", "used", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "❸", " ", "my", "_", "used", "_", "car", ".", "update", "_", "odometer", "(", "23500", ")", "\n", " ", " ", "my", "_", "used", "_", "car", ".", "read", "_", "odometer", "(", ")"], ["my", "_", "used", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "❹", " ", "my", "_", "used", "_", "car", ".", "increment", "_", "odometer", "(", "100", ")", "\n", " ", " ", "my", "_", "used", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "在", "❶", "处", "，", "新增", "的", "方法", "increment", "_", "odometer", "(", ")", " ", "接受", "一个", "单位", "为", "英里", "的", "数字", "，", "并", "将", "其", "加入", "到", "self", ".", "odometer", "_", "reading", " ", "中", "。", "在", "❷", "处", "，", "我们", "创建", "了", "一辆", "二手车", "\n", "—", "—", "my", "_", "used", "_", "car", " ", "。", "在", "❸", "处", "，", "我们", "调用", "方法", "update", "_", "odometer", "(", ")", " ", "并", "传入", "23500", " ", "，", "将", "这辆", "二手车", "的", "里程表", "读数", "设置", "为", "23", " ", "500", "。", "在", "❹", "处", "，", "我们", "调用", "increment", "_", "odometer", "(", ")", "\n", "并", "传入", "100", " ", "，", "以", "增加", "从", "购买", "到", "登记", "期间", "行驶", "的", "100", "英里", "：", "\n", "2013", " ", "Subaru", " ", "Outback", "\n", "This", " ", "car", " ", "has", " ", "23500", " ", "miles", " ", "on", " ", "it", ".", "\n", "This", " ", "car", " ", "has", " ", "23600", " ", "miles", " ", "on", " ", "it", ".", "\n", "你", "可以", "轻松", "地", "修改", "这个", "方法", "，", "以", "禁止", "增量", "为", "负值", "，", "从而", "防止", "有人", "利用", "它", "来回", "拨", "里程表", "。", "\n", "注意"], ["你", "可以", "轻松", "地", "修改", "这个", "方法", "，", "以", "禁止", "增量", "为", "负值", "，", "从而", "防止", "有人", "利用", "它", "来回", "拨", "里程表", "。", "\n", "注意", "\n", "注意", " ", "　", "你", "可以", "使用", "类似", "于", "上面", "的", "方法", "来", "控制", "用户", "修改", "属性", "值", "（", "如", "里程表", "读数", "）", "的", "方式", "，", "但", "能够", "访问", "程序", "的", "人", "都", "可以", "通过", "直接", "访问", "属性", "来", "将", "里程表", "修改", "为", "任何", "值", "。", "要确", "\n", "保", "安全", "，", "除了", "进行", "类似", "于", "前面", "的", "基本", "检查", "外", "，", "还", "需", "特别", "注意", "细节", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "9", "-", "4", " ", "就餐", "人数", "\n", "就餐", "人数", " ", "：", "在", "为", "完成", "练习", "9", "-", "1", "而", "编写", "的", "程序", "中", "，", "添加", "一个", "名为", "number", "_", "served", " ", "的", "属性", "，", "并", "将", "其", "默认值", "设置", "为", "0", "。", "根据", "这个", "类", "创建", "一个", "名为", "restaurant", " ", "的", "实", "\n", "例", "；", "打印", "有", "多少", "人", "在", "这家", "餐馆", "就餐", "过", "，", "然后", "修改", "这个", "值", "并", "再次", "打印", "它", "。", "\n", "添加", "一个", "名为", "set", "_", "number", "_", "served", "(", ")", " ", "的", "方法", "，", "它", "让", "你", "能够", "设置", "就餐", "人数", "。", "调用", "这个", "方法", "并", "向", "它", "传递", "一个", "值", "，", "然后", "再次", "打印", "这个", "值", "。", "\n", "添加", "一个", "名为", "increment", "_", "number", "_", "served", "(", ")", " ", "的", "方法", "，", "它", "让", "你", "能够", "将", "就餐", "人数", "递增", "。", "调用", "这个", "方法", "并", "向", "它", "传递", "一个", "这样", "的", "值", "：", "你", "认为", "这家", "餐馆", "每天", "可能", "接待", "的", "就", "\n", "餐", "人数", "。", "\n", "9", "-", "5", " ", "尝试", "登录", "次数"], ["餐", "人数", "。", "\n", "9", "-", "5", " ", "尝试", "登录", "次数", "\n", "尝试", "登录", "次数", " ", "：", "在", "为", "完成", "练习", "9", "-", "3", "而", "编写", "的", "User", " ", "类中", "，", "添加", "一个", "名为", "login", "_", "attempts", " ", "的", "属性", "。", "编写", "一个", "名为", "increment", "_", "login", "_", "attempts", "(", ")", " ", "的", "方法", "，", "\n", "它", "将", "属性", "login", "_", "attempts", " ", "的", "值加", "1", "。", "再", "编写", "一个", "名为", "reset", "_", "login", "_", "attempts", "(", ")", " ", "的", "方法", "，", "它", "将", "属性", "login", "_", "attempts", " ", "的", "值", "重置", "为", "0", "。", "\n", "根据", "User", " ", "类", "创建", "一个", "实例", "，", "再", "调用", "方法", "increment", "_", "login", "_", "attempts", "(", ")", " ", "多次", "。", "打印", "属性", "login", "_", "attempts", " ", "的", "值", "，", "确认", "它", "被", "正确", "地", "递增", "；", "然后", "，", "调用", "方", "\n", "法", "reset", "_", "login", "_", "attempts", "(", ")", " ", "，", "并", "再次", "打印", "属性", "login", "_", "attempts", " ", "的", "值", "，", "确认", "它", "被", "重置", "为", "0", "。", "\n", "9.3", "　", "继承", "\n", "　", "继承", "\n", "编写", "类时", "，", "并非", "总是", "要", "从", "空白", "开始", "。", "如果", "你", "要", "编写", "的", "类", "是", "另", "一个", "现成", "类", "的", "特殊", "版本", "，", "可", "使用", "继承", "\n", "继承", " ", "。", "一个", "类", "继承", "\n", "继承", " ", "另", "一个", "类时", "，", "它", "将", "自动", "获得", "另", "一个", "类", "的", "所有", "属性", "和", "方法", "；", "原有", "的", "\n", "类", "称为", "父类", "\n", "父类", " ", "，", "而", "新类", "称为", "子类", "\n", "子类", " ", "。", "子类", "继承", "了", "其父", "类", "的", "所有", "属性", "和", "方法", "，", "同时", "还", "可以", "定义", "自己", "的", "属性", "和", "方法", "。", "\n", "9.3", ".", "1", "　", "子类", "的", "方法"], ["子类", " ", "。", "子类", "继承", "了", "其父", "类", "的", "所有", "属性", "和", "方法", "，", "同时", "还", "可以", "定义", "自己", "的", "属性", "和", "方法", "。", "\n", "9.3", ".", "1", "　", "子类", "的", "方法", "\n", "　", "子类", "的", "方法", "__", "init", "__", "(", ")", "\n", "创建", "子类", "的", "实例", "时", "，", "Python", "首先", "需要", "完成", "的", "任务", "是", "给", "父类", "的", "所有", "属性", "赋值", "。", "为此", "，", "子类", "的", "方法", "__", "init", "__", "(", ")", " ", "需要", "父类", "施以援", "手", "。", "\n", "例如", "，", "下面", "来", "模拟", "电动汽车", "。", "电动汽车", "是", "一种", "特殊", "的", "汽车", "，", "因此", "我们", "可以", "在", "前面", "创建", "的", "Car", " ", "类", "的", "基础", "上", "创建", "新类", "ElectricCar", " ", "，", "这样", "我们", "就", "只", "需为", "电动汽车", "特有", "的", "属性", "和", "行为", "\n", "编写", "代码", "。", "\n", "下面", "来", "创建", "一个", "简单", "的", "ElectricCar", " ", "类", "版本", "，", "它", "具备", "Car", " ", "类", "的", "所有", "功能", "：", "\n", "electric", "_", "car", ".", "py", "\n", "❶", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "汽车", "的", "简单", "尝试", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "make", " ", "=", " ", "make", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "model", " ", "=", " ", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "year", " ", "=", " ", "year", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "0"], ["self", ".", "odometer", "_", "reading", " ", "=", " ", "0", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "get", "_", "descriptive", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "long", "_", "name", " ", "=", " ", "str", "(", "self", ".", "year", ")", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "make", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "model"], ["return", " ", "long", "_", "name", ".", "title", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "read", "_", "odometer", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "odometer", "_", "reading", ")", " ", "+", " ", "\"", " ", "miles", " ", "on", " ", "it", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "_", "odometer", "(", "self", ",", " ", "mileage", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "mileage", " ", ">", "=", " ", "self", ".", "odometer", "_", "reading", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "mileage", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "can", "'", "t", " ", "roll", " ", "back", " ", "an", " ", "odometer", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "increment", "_", "odometer", "(", "self", ",", " ", "miles", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "+", "=", " ", "miles", "\n", "❷", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "电动汽车", "的", "独特", "之", "处", "\"", "\"", "\""], ["❷", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "电动汽车", "的", "独特", "之", "处", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "父类", "的", "属性", "\"", "\"", "\"", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", ")", ".__", "init", "__", "(", "make", ",", " ", "model", ",", " ", "year", ")", "\n", "❺", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "model", " ", "s", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "首先", "是", "Car", " ", "类", "的", "代码", "（", "见", "❶", "）", "。", "创建", "子类", "时", "，", "父类", "必须", "包含", "在", "当前", "文件", "中", "，", "且", "位于", "子类", "前面", "。", "在", "❷", "处", "，", "我们", "定义", "了", "子类", "ElectricCar", " ", "。", "定义", "子类", "时", "，", "必须", "在", "括号", "内", "指定", "父类", "的", "\n", "名称", "。", "方法", "__", "init", "__", "(", ")", " ", "接受", "创建", "Car", " ", "实例", "所", "需", "的", "信息", "（", "见", "❸", "）", "。", "\n", "❹", "处", "的", "super", "(", ")", " ", "是", "一个", "特殊", "函数", "，", "帮助", "Python", "将", "父类", "和", "子类", "关联", "起来", "。", "这", "行", "代码", "让", "Python", "调用", "ElectricCar", " ", "的", "父类", "的", "方法", "__", "init", "__", "(", ")", " ", "，", "让", "ElectricCar", " ", "实例", "包含", "父类", "的", "所", "\n", "有", "属性", "。", "父类", "也", "称为", "超类"], ["有", "属性", "。", "父类", "也", "称为", "超类", "\n", "超类", " ", "（", "superclass", "）", "，", "名称", "super", "因此", "而", "得名", "。", "\n", "为", "测试", "继承", "是否", "能够", "正确", "地", "发挥作用", "，", "我们", "尝试", "创建", "一辆", "电动汽车", "，", "但", "提供", "的", "信息", "与", "创建", "普通", "汽车", "时", "相同", "。", "在", "❺", "处", "，", "我们", "创建", "ElectricCar", " ", "类", "的", "一个", "实例", "，", "并", "将", "其", "存储", "在", "变", "\n", "量", "my", "_", "tesla", " ", "中", "。", "这", "行", "代码", "调用", "ElectricCar", " ", "类中", "定义", "的", "方法", "__", "init", "__", "(", ")", " ", "，", "后者", "让", "Python", "调用", "父类", "Car", " ", "中", "定义", "的", "方法", "__", "init", "__", "(", ")", " ", "。", "我们", "提供", "了", "实参", "'", "tesla", "'", " ", "、", "'", "model", "\n", "s", "'", " ", "和", "2016", " ", "。", "\n", "除", "方法", "__", "init", "__", "(", ")", " ", "外", "，", "电动汽车", "没有", "其他", "特有", "的", "属性", "和", "方法", "。", "当前", "，", "我们", "只想", "确认", "电动汽车", "具备", "普通", "汽车", "的", "行为", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "ElectricCar", " ", "实例", "的", "行为", "与", "Car", " ", "实例", "一样", "，", "现在", "可以", "开始", "定义", "电动汽车", "特有", "的", "属性", "和", "方法", "了", "。", "\n", "9.3", ".", "2", "　", "\n", "　", "Python", " ", "2.7", "中", "的", "继承", "\n", "中", "的", "继承", "\n", "在", "Python", " ", "2.7", "中", "，", "继承", "语法", "稍", "有", "不同", "，", "ElectricCar", " ", "类", "的", "定义", "类似", "于", "下面", "这样", "：", "\n", "class", " ", "Car", "(", "object", ")", ":", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":"], ["def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", "ElectricCar", ",", " ", "self", ")", ".__", "init", "__", "(", "make", ",", " ", "model", ",", " ", "year", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "函数", "super", "(", ")", " ", "需要", "两个", "实参", "：", "子类", "名", "和", "对象", "self", " ", "。", "为", "帮助", "Python", "将", "父类", "和", "子类", "关联", "起来", "，", "这些", "实参", "必不可少", "。", "另外", "，", "在", "Python", " ", "2.7", "中", "使用", "继承", "时", "，", "务必", "在", "定", "义父", "类时", "在", "括号", "内指", "\n", "定", "object", " ", "。", "\n", "9.3", ".", "3", "　", "给", "子类", "定义", "属性", "和", "方法", "\n", "　", "给", "子类", "定义", "属性", "和", "方法", "\n", "让", "一个", "类", "继承", "另", "一个", "类后", "，", "可", "添加", "区", "分子", "类", "和", "父类", "所", "需", "的", "新", "属性", "和", "方法", "。", "\n", "下面", "来", "添加", "一个", "电动汽车", "特有", "的", "属性", "（", "电瓶", "）", "，", "以及", "一个", "描述", "该", "属性", "的", "方法", "。", "我们", "将", "存储", "电瓶", "容量", "，", "并", "编写", "一个", "打印", "电瓶", "描述", "的", "方法", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":"], ["--", "snip", "--", "\n", " ", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "Represent", " ", "aspects", " ", "of", " ", "a", " ", "car", ",", " ", "specific", " ", "to", " ", "electric", " ", "vehicles", ".", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "电动汽车", "的", "独特", "之", "处", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "初始化", "父类", "的", "属性", "，", "再", "初始化", "电动汽车", "特有", "的", "属性", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", ")", ".__", "init", "__", "(", "make", ",", " ", "model", ",", " ", "year", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", "_", "size", " ", "=", " ", "70", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "describe", "_", "battery", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "描述", "电瓶", "容量", "的", "消息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "a", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "battery", "_", "size", ")", " ", "+", " ", "\"", "-", "kWh", " ", "battery", ".", "\"", ")", "\n", " ", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "model", " ", "s", "'", ",", " ", "2016", ")"], ["print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "tesla", ".", "describe", "_", "battery", "(", ")", "\n", "在", "❶", "处", "，", "我们", "添加", "了", "新", "属性", "self", ".", "battery", "_", "size", " ", "，", "并", "设置", "其", "初始值", "（", "如", "70", " ", "）", "。", "根据", "ElectricCar", " ", "类", "创建", "的", "所有", "实例", "都", "将", "包含", "这个", "属性", "，", "但", "所有", "Car", " ", "实例", "都", "不", "包含", "它", "。", "在", "❷", "\n", "处", "，", "我们", "还", "添加", "了", "一个", "名为", "describe", "_", "battery", "(", ")", " ", "的", "方法", "，", "它", "打印", "有关", "电瓶", "的", "信息", "。", "我们", "调用", "这个", "方法", "时", "，", "将", "看到", "一条", "电动汽车", "特有", "的", "描述", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "This", " ", "car", " ", "has", " ", "a", " ", "70", "-", "kWh", " ", "battery", "."], ["对于", "ElectricCar", " ", "类", "的", "特殊化", "程度", "没有", "任何", "限制", "。", "模拟", "电动汽车", "时", "，", "你", "可以", "根据", "所", "需", "的", "准确", "程度", "添加", "任意", "数量", "的", "属性", "和", "方法", "。", "如果", "一个", "属性", "或", "方法", "是", "任何", "汽车", "都", "有", "的", "，", "而", "不是", "\n", "电动汽车", "特有", "的", "，", "就", "应", "将", "其", "加入", "到", "Car", " ", "类", "而", "不是", "ElectricCar", " ", "类中", "。", "这样", "，", "使用", "Car", " ", "类", "的", "人", "将", "获得", "相应", "的", "功能", "，", "而", "ElectricCar", " ", "类", "只", "包含", "处理", "电动汽车", "特有", "属性", "和", "行为", "的", "代", "\n", "码", "。", "\n", "9.3", ".", "4", "　", "重写", "父类", "的", "方法", "\n", "　", "重写", "父类", "的", "方法", "\n", "对于", "父类", "的", "方法", "，", "只要", "它", "不", "符合", "子类", "模拟", "的", "实物", "的", "行为", "，", "都", "可", "对", "其", "进行", "重写", "。", "为此", "，", "可", "在", "子类", "中", "定义", "一个", "这样", "的", "方法", "，", "即", "它", "与", "要", "重写", "的", "父类", "方法", "同名", "。", "这样", "，", "Python", "将", "不会", "考虑", "这", "\n", "个", "父类", "方法", "，", "而", "只", "关注", "你", "在", "子类", "中", "定义", "的", "相应", "方法", "。", "\n", "假设", "Car", " ", "类有", "一个", "名为", "fill", "_", "gas", "_", "tank", "(", ")", " ", "的", "方法", "，", "它", "对", "全", "电动汽车", "来说", "毫无意义", "，", "因此", "你", "可能", "想", "重写", "它", "。", "下面", "演示", "了", "一种", "重写", "方式", "：", "\n", "def", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "def", " ", "fill", "_", "gas", "_", "tank", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "电动汽车", "没有", "油箱", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "doesn", "'", "t", " ", "need", " ", "a", " ", "gas", " ", "tank", "!", "\"", ")"], ["现在", "，", "如果", "有人", "对", "电动汽车", "调用", "方法", "fill", "_", "gas", "_", "tank", "(", ")", " ", "，", "Python", "将", "忽略", "Car", " ", "类中", "的", "方法", "fill", "_", "gas", "_", "tank", "(", ")", " ", "，", "转而", "运行", "上述", "代码", "。", "使用", "继承", "时", "，", "可", "让", "子类", "保留", "从", "父类", "那里", "继", "\n", "承而来", "的", "精华", "，", "并", "剔除", "不", "需要", "的", "糟粕", "。", "\n", "9.3", ".", "5", "　", "将", "实例", "用作", "属性", "\n", "　", "将", "实例", "用作", "属性", "\n", "使用", "代码", "模拟", "实物", "时", "，", "你", "可能", "会", "发现自己", "给", "类", "添加", "的", "细节", "越来越", "多", "：", "属性", "和", "方法", "清单", "以及", "文件", "都", "越来越", "长", "。", "在", "这种", "情况", "下", "，", "可能", "需要", "将类", "的", "一部分", "作为", "一个", "独立", "的", "类", "提取", "出来", "。", "\n", "你", "可以", "将", "大型", "类", "拆", "分成", "多个", "协同工作", "的", "小类", "。", "\n", "例如", "，", "不断", "给", "ElectricCar", " ", "类", "添加", "细节", "时", "，", "我们", "可能", "会", "发现", "其中", "包含", "很多", "专门", "针对", "汽车", "电瓶", "的", "属性", "和", "方法", "。", "在", "这种", "情况", "下", "，", "我们", "可", "将", "这些", "属性", "和", "方法", "提取", "出来", "，", "放到", "另", "一个名", "\n", "为", "Battery", " ", "的", "类", "中", "，", "并", "将", "一个", "Battery", " ", "实例", "用作", "ElectricCar", " ", "类", "的", "一个", "属性", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", "class", " ", "Battery", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "电动汽车", "电瓶", "的", "简单", "尝试", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "battery", "_", "size", "=", "70", ")", ":"], ["❷", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "battery", "_", "size", "=", "70", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "电瓶", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", "_", "size", " ", "=", " ", "battery", "_", "size", "\n", "❸", " ", " ", " ", " ", " ", "def", " ", "describe", "_", "battery", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "描述", "电瓶", "容量", "的", "消息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "a", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "battery", "_", "size", ")", " ", "+", " ", "\"", "-", "kWh", " ", "battery", ".", "\"", ")", "\n", " ", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "电动汽车", "的", "独特", "之", "处", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "初始化", "父类", "的", "属性", "，", "再", "初始化", "电动汽车", "特有", "的", "属性", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", ")", ".__", "init", "__", "(", "make", ",", " ", "model", ",", " ", "year", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", " ", "=", " ", "Battery", "(", ")"], ["❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", " ", "=", " ", "Battery", "(", ")", "\n", " ", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "model", " ", "s", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "tesla", ".", "battery", ".", "describe", "_", "battery", "(", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "名为", "Battery", " ", "的", "新类", "，", "它", "没有", "继承", "任何", "类", "。", "❷", "处", "的", "方法", "__", "init", "__", "(", ")", " ", "除", "self", " ", "外", "，", "还有", "另", "一个", "形参", "battery", "_", "size", " ", "。", "这个", "形参是", "可选", "的", "：", "如果", "没有", "给", "\n", "它", "提供", "值", "，", "电瓶", "容量", "将", "被", "设置", "为", "70", "。", "方法", "describe", "_", "battery", "(", ")", " ", "也", "移到", "了", "这个", "类中", "（", "见", "❸", "）", "。", "\n", "在", "ElectricCar", " ", "类中", "，", "我们", "添加", "了", "一个", "名为", "self", ".", "battery", " ", "的", "属性", "（", "见", "❹", "）", "。", "这", "行", "代码", "让", "Python", "创建", "一个", "新", "的", "Battery", " ", "实例", "（", "由于", "没有", "指定", "尺寸", "，", "因此", "为", "默认值", "70", " ", "）", "，", "并", "将", "\n", "该", "实例", "存储", "在", "属性", "self", ".", "battery", " ", "中", "。", "每当", "方法", "__", "init", "__", "(", ")", " ", "被", "调用", "时", "，", "都", "将", "执行", "该", "操作", "；", "因此", "现在", "每个", "ElectricCar", " ", "实例", "都", "包含", "一个", "自动", "创建", "的", "Battery", " ", "实例", "。"], ["我们", "创建", "一辆", "电动汽车", "，", "并", "将", "其", "存储", "在", "变量", "my", "_", "tesla", " ", "中", "。", "要", "描述", "电瓶", "时", "，", "需要", "使用", "电动汽车", "的", "属性", "battery", " ", "：", "\n", "my", "_", "tesla", ".", "battery", ".", "describe", "_", "battery", "(", ")", "\n", "这", "行", "代码", "让", "Python", "在", "实例", "my", "_", "tesla", " ", "中", "查找", "属性", "battery", " ", "，", "并", "对", "存储", "在", "该", "属性", "中", "的", "Battery", " ", "实例", "调用", "方法", "describe", "_", "battery", "(", ")", " ", "。", "\n", "输出", "与", "我们", "前面", "看到", "的", "相同", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "This", " ", "car", " ", "has", " ", "a", " ", "70", "-", "kWh", " ", "battery", ".", "\n", "这", "看似", "做", "了", "很多", "额外", "的", "工作", "，", "但", "现在", "我们", "想", "多", "详细", "地", "描述", "电瓶", "都", "可以", "，", "且", "不会", "导致", "ElectricCar", " ", "类", "混乱", "不堪", "。", "下面", "再", "给", "Battery", " ", "类", "添加", "一个", "方法", "，", "它", "根据", "电瓶", "容量", "报告", "汽车", "\n", "的", "续航", "里程", "：", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "class", " ", "Battery", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "get", "_", "range", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "消息", "，", "指出", "电瓶", "的", "续航", "里程", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "battery", "_", "size", " ", "=", "=", " ", "70", ":"], ["if", " ", "self", ".", "battery", "_", "size", " ", "=", "=", " ", "70", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "range", " ", "=", " ", "240", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "self", ".", "battery", "_", "size", " ", "=", "=", " ", "85", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "range", " ", "=", " ", "270", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "message", " ", "=", " ", "\"", "This", " ", "car", " ", "can", " ", "go", " ", "approximately", " ", "\"", " ", "+", " ", "str", "(", "range", ")"], ["message", " ", "+", "=", " ", "\"", " ", "miles", " ", "on", " ", "a", " ", "full", " ", "charge", ".", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "message", ")", "\n", " ", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "model", " ", "s", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "tesla", ".", "battery", ".", "describe", "_", "battery", "(", ")", "\n", "❷", " ", "my", "_", "tesla", ".", "battery", ".", "get", "_", "range", "(", ")", "\n", "❶", "处", "新增", "的", "方法", "get", "_", "range", "(", ")", " ", "做", "了", "一些", "简单", "的", "分析", "：", "如果", "电瓶", "的", "容量", "为", "70kWh", "，", "它", "就", "将", "续航", "里程", "设置", "为", "240", "英里", "；", "如果", "容量", "为", "85kWh", "，", "就", "将", "续航", "里程", "设置", "为", "270", "英里", "，", "然后", "报告", "\n", "这个", "值", "。", "为", "使用", "这个", "方法", "，", "我们", "也", "通过", "汽车", "的", "属性", "battery", " ", "来", "调用", "它", "（", "见", "❷", "）", "。", "\n", "输出", "指出", "了", "汽车", "的", "续航", "里程", "（", "这", "取决于", "电瓶", "的", "容量", "）", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "This", " ", "car", " ", "has", " ", "a", " ", "70", "-", "kWh", " ", "battery", "."], ["2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "This", " ", "car", " ", "has", " ", "a", " ", "70", "-", "kWh", " ", "battery", ".", "\n", "This", " ", "car", " ", "can", " ", "go", " ", "approximately", " ", "240", " ", "miles", " ", "on", " ", "a", " ", "full", " ", "charge", ".", "\n", "9.3", ".", "6", "　", "模拟", "实物", "\n", "　", "模拟", "实物", "\n", "模拟", "较", "复杂", "的", "物件", "（", "如", "电动汽车", "）", "时", "，", "需要", "解决", "一些", "有趣", "的", "问题", "。", "续航", "里程", "是", "电瓶", "的", "属性", "还是", "汽车", "的", "属性", "呢", "？", "如果", "我们", "只", "需", "描述", "一辆", "汽车", "，", "那么", "将", "方法", "get", "_", "range", "(", ")", " ", "放", "\n", "在", "Battery", " ", "类中", "也许", "是", "合适", "的", "；", "但", "如果", "要", "描述", "一家", "汽车", "制造商", "的", "整个", "产品线", "，", "也许", "应该", "将", "方法", "get", "_", "range", "(", ")", " ", "移到", "ElectricCar", " ", "类中", "。", "在", "这种", "情况", "下", "，", "get", "_", "range", "(", ")", " ", "依然", "\n", "根据", "电瓶", "容量", "来", "确定", "续航", "里程", "，", "但", "报告", "的", "是", "一款", "汽车", "的", "续航", "里程", "。", "我们", "也", "可以", "这样", "做", "：", "将", "方法", "get", "_", "range", "(", ")", " ", "还", "留在", "Battery", " ", "类中", "，", "但", "向", "它", "传递", "一个", "参数", "，", "如", "car", "_", "model", " ", "；", "在", "\n", "这种", "情况", "下", "，", "方法", "get", "_", "range", "(", ")", " ", "将", "根据", "电瓶", "容量", "和", "汽车", "型号", "报告", "续航", "里程", "。"], ["这种", "情况", "下", "，", "方法", "get", "_", "range", "(", ")", " ", "将", "根据", "电瓶", "容量", "和", "汽车", "型号", "报告", "续航", "里程", "。", "\n", "这", "让", "你", "进入", "了", "程序员", "的", "另", "一个", "境界", "：", "解决", "上述", "问题", "时", "，", "你", "从", "较", "高", "的", "逻辑", "层面", "（", "而", "不是", "语法", "层面", "）", "考虑", "；", "你", "考虑", "的", "不是", "Python", "，", "而是", "如何", "使用", "代码", "来", "表示", "实物", "。", "到达", "这种", "境界", "后", "，", "你", "\n", "经常", "会", "发现", "，", "现实", "世界", "的", "建模", "方法", "并", "没有", "对错", "之分", "。", "有些", "方法", "的", "效率", "更高", "，", "但", "要", "找出", "效率", "最高", "的", "表示法", "，", "需要", "经过", "一定", "的", "实践", "。", "只要", "代码", "像", "你", "希望", "的", "那样", "运行", "，", "就", "说明", "你", "做", "得", "很", "\n", "好", "！", "即便", "你", "发现自己", "不得不", "多次", "尝试", "使用", "不同", "的", "方法", "来", "重写", "类", "，", "也", "不必", "气馁", "；", "要", "编写出", "高效", "、", "准确", "的", "代码", "，", "都", "得", "经过", "这样", "的", "过程", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "9", "-", "6", " ", "冰淇淋", "小店", "\n", "冰淇淋", "小店", " ", "：", "冰淇淋", "小店", "是", "一种", "特殊", "的", "餐馆", "。", "编写", "一个", "名为", "IceCreamStand", " ", "的", "类", "，", "让", "它", "继承", "你", "为", "完成", "练习", "9", "-", "1", "或", "练习", "9", "-", "4", "而", "编写", "的", "Restaurant", " ", "类", "。", "这", "两个", "版", "\n", "本", "的", "Restaurant", " ", "类", "都", "可以", "，", "挑选", "你", "更", "喜欢", "的", "那个", "即可", "。", "添加", "一个", "名为", "flavors", " ", "的", "属性", "，", "用于", "存储", "一个", "由", "各种", "口味", "的", "冰淇淋", "组成", "的", "列表", "。", "编写", "一个", "显示", "这些", "冰淇淋", "\n", "的", "方法", "。", "创建", "一个", "IceCreamStand", " ", "实例", "，", "并", "调用", "这个", "方法", "。", "\n", "9", "-", "7", " ", "管理员"], ["的", "方法", "。", "创建", "一个", "IceCreamStand", " ", "实例", "，", "并", "调用", "这个", "方法", "。", "\n", "9", "-", "7", " ", "管理员", "\n", "管理员", " ", "：", "管理员", "是", "一种", "特殊", "的", "用户", "。", "编写", "一个", "名为", "Admin", " ", "的", "类", "，", "让", "它", "继承", "你", "为", "完成", "练习", "9", "-", "3", "或", "练习", "9", "-", "5", "而", "编写", "的", "User", " ", "类", "。", "添加", "一个", "名为", "privileges", " ", "的", "属性", "，", "用", "\n", "于", "存储", "一个", "由", "字符串", "（", "如", "\"", "can", " ", "add", " ", "post", "\"", " ", "、", "\"", "can", " ", "delete", " ", "post", "\"", " ", "、", "\"", "can", " ", "ban", " ", "user", "\"", " ", "等", "）", "组成", "的", "列表", "。", "编写", "一个", "名为", "show", "_", "privileges", "(", ")", " ", "的", "方法", "，", "它", "\n", "显示", "管理员", "的", "权限", "。", "创建", "一个", "Admin", " ", "实例", "，", "并", "调用", "这个", "方法", "。", "\n", "9", "-", "8", " ", "权限", "\n", "权限", " ", "：", "编写", "一个", "名为", "Privileges", " ", "的", "类", "，", "它", "只有", "一个", "属性", "—", "—", "privileges", " ", "，", "其中", "存储", "了", "练习", "9", "-", "7", " ", "所说", "的", "字符串", "列表", "。", "将", "方法", "show", "_", "privileges", "(", ")", " ", "移到", "这", "\n", "个类", "中", "。", "在", "Admin", " ", "类中", "，", "将", "一个", "Privileges", " ", "实例", "用作", "其", "属性", "。", "创建", "一个", "Admin", " ", "实例", "，", "并", "使用", "方法", "show", "_", "privileges", "(", ")", " ", "来", "显示", "其", "权限", "。", "\n", "9", "-", "9", " ", "电瓶", "升级"], ["9", "-", "9", " ", "电瓶", "升级", "\n", "电瓶", "升级", " ", "：", "在", "本节", "最后", "一个", "electric", "_", "car", ".", "py", "版本", "中", "，", "给", "Battery", " ", "类", "添加", "一个", "名为", "upgrade", "_", "battery", "(", ")", " ", "的", "方法", "。", "这个", "方法", "检查", "电瓶", "容量", "，", "如果", "它", "不是", "85", "，", "就", "将", "它", "\n", "设置", "为", "85", "。", "创建", "一辆", "电瓶", "容量", "为", "默认值", "的", "电动汽车", "，", "调用", "方法", "get", "_", "range", "(", ")", " ", "，", "然后", "对", "电瓶", "进行", "升级", "，", "并", "再次", "调用", "get", "_", "range", "(", ")", " ", "。", "你", "会", "看到", "这辆", "汽车", "的", "续航", "里程", "增", "\n", "加", "了", "。", "\n", "9.4", "　", "导入", "类", "\n", "　", "导入", "类", "\n", "随着", "你", "不断", "地", "给", "类", "添加", "功能", "，", "文件", "可能", "变得", "很长", "，", "即便", "你", "妥善", "地", "使用", "了", "继承", "亦", "如此", "。", "为", "遵循", "Python", "的", "总体", "理念", "，", "应", "让", "文件", "尽可能", "整洁", "。", "为", "在", "这方面", "提供", "帮助", "，", "Python", "允许", "你", "将", "类存", "\n", "储在", "模块", "中", "，", "然后", "在", "主程序", "中", "导入", "所", "需", "的", "模块", "。", "\n", "9.4", ".", "1", "　", "导入", "单个", "类", "\n", "　", "导入", "单个", "类", "\n", "下面", "来", "创建", "一个", "只", "包含", "Car", " ", "类", "的", "模块", "。", "这", "让", "我们", "面临", "一个", "微妙", "的", "命名", "问题", "：", "在", "本章", "中", "，", "已经", "有", "一个", "名为", "car", ".", "py", "的", "文件", "，", "但", "这个", "模块", "也", "应", "命名", "为", "car", ".", "py", "，", "因为", "它", "包含", "表示", "汽车", "的", "代", "\n", "码", "。", "我们", "将", "这样", "解决", "这个", "命名", "问题", "：", "将", "Car", " ", "类", "存储", "在", "一个", "名为", "car", ".", "py", "的", "模块", "中", "，", "该", "模块", "将", "覆盖", "前面", "使用", "的", "文件", "car", ".", "py", "。", "从", "现在", "开始", "，", "使用", "该", "模块", "的", "程序", "都", "必须", "使用", "更", "具体", "的", "文件"], ["名", "，", "如", "my", "_", "car", ".", "py", "。", "下面", "是", "模块", "car", ".", "py", "，", "其中", "只", "包含", "Car", " ", "类", "的", "代码", "：", "\n", "car", ".", "py", "\n", "❶", " ", "\"", "\"", "\"", "一个", "可", "用于", "表示", "汽车", "的", "类", "\"", "\"", "\"", "\n", " ", " ", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "汽车", "的", "简单", "尝试", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "描述", "汽车", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "make", " ", "=", " ", "make", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "model", " ", "=", " ", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "year", " ", "=", " ", "year", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "0", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "get", "_", "descriptive", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "整洁", "的", "描述性", "名称", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "long", "_", "name", " ", "=", " ", "str", "(", "self", ".", "year", ")", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "make", " ", "+", " ", "'", " ", "'", " ", "+", " ", "self", ".", "model", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "long", "_", "name", ".", "title", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "read", "_", "odometer", "(", "self", ")", ":"], ["def", " ", "read", "_", "odometer", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "消息", "，", "指出", "汽车", "的", "里程", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "odometer", "_", "reading", ")", " ", "+", " ", "\"", " ", "miles", " ", "on", " ", "it", ".", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "_", "odometer", "(", "self", ",", " ", "mileage", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "将", "里程表", "读数", "设置", "为", "指定", "的", "值", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "拒绝", "将", "里程表", "往回", "拨", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "mileage", " ", ">", "=", " ", "self", ".", "odometer", "_", "reading", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "=", " ", "mileage", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "can", "'", "t", " ", "roll", " ", "back", " ", "an", " ", "odometer", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "increment", "_", "odometer", "(", "self", ",", " ", "miles", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "里程表", "读数", "增加", "指定", "的", "量", "\"", "\"", "\""], ["\"", "\"", "\"", "将", "里程表", "读数", "增加", "指定", "的", "量", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "odometer", "_", "reading", " ", "+", "=", " ", "miles"], ["在", "❶", "处", "，", "我们", "包含", "了", "一个", "模块", "级", "文档", "字符串", "，", "对", "该", "模块", "的", "内容", "做", "了", "简要", "的", "描述", "。", "你", "应为", "自己", "创建", "的", "每个", "模块", "都", "编写", "文档", "字符串", "。", "\n", "下面", "来", "创建", "另", "一个", "文件", "—", "—", "my", "_", "car", ".", "py", "，", "在", "其中", "导入", "Car", " ", "类", "并", "创建", "其实", "例", "：", "\n", "my", "_", "car", ".", "py", "\n", "❶", " ", "from", " ", "car", " ", "import", " ", "Car", "\n", " ", " ", "my", "_", "new", "_", "car", " ", "=", " ", "Car", "(", "'", "audi", "'", ",", " ", "'", "a4", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "new", "_", "car", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "new", "_", "car", ".", "odometer", "_", "reading", " ", "=", " ", "23", "\n", " ", " ", "my", "_", "new", "_", "car", ".", "read", "_", "odometer", "(", ")", "\n", "❶", "处", "的", "import", " ", "语句", "让", "Python", "打开", "模块", "car", " ", "，", "并", "导入", "其中", "的", "Car", " ", "类", "。", "这样", "我们", "就", "可以", "使用", "Car", " ", "类", "了", "，", "就", "像", "它", "是", "在", "这个", "文件", "中", "定义", "的", "一样", "。", "输出", "与", "我们", "在", "前面", "看到", "的", "一样", "：", "\n", "2016", " ", "Audi", " ", "A4", "\n", "This", " ", "car", " ", "has", " ", "23", " ", "miles", " ", "on", " ", "it", ".", "\n", "导入", "类", "是", "一种", "有效", "的", "编程", "方式", "。", "如果", "在", "这个", "程序", "中", "包含", "了", "整个", "Car", " ", "类", "，", "它", "该", "有", "多长", "呀", "！", "通过", "将", "这个", "类移", "到", "一个", "模块", "中", "，", "并", "导入", "该", "模块", "，", "你", "依然", "可以", "使用", "其", "所有", "功能", "，", "但", "主程序", "文"], ["件", "变得", "整洁", "而", "易于", "阅读", "了", "。", "这", "还", "能", "让", "你", "将", "大部分", "逻辑", "存储", "在", "独立", "的", "文件", "中", "；", "确定", "类像", "你", "希望", "的", "那样", "工作", "后", "，", "你", "就", "可以", "不管", "这些", "文件", "，", "而", "专注", "于", "主程序", "的", "高级", "逻辑", "了", "。", "\n", "9.4", ".", "2", "　", "在", "一个", "模块", "中", "存储", "多个", "类", "\n", "　", "在", "一个", "模块", "中", "存储", "多个", "类", "\n", "虽然", "同一个", "模块", "中", "的", "类", "之间", "应", "存在", "某种", "相关性", "，", "但", "可", "根据", "需要", "在", "一个", "模块", "中", "存储", "任意", "数量", "的", "类", "。", "类", "Battery", " ", "和", "ElectricCar", " ", "都", "可", "帮助", "模拟", "汽车", "，", "因此", "下面", "将", "它们", "都", "加入", "模块", "\n", "car", ".", "py", "中", "：", "\n", "car", ".", "py", "\n", "\"", "\"", "\"", "一组", "用于", "表示", "燃油", "汽车", "和", "电动汽车", "的", "类", "\"", "\"", "\"", "\n", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "class", " ", "Battery", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "一次", "模拟", "电动汽车", "电瓶", "的", "简单", "尝试", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "battery", "_", "size", "=", "60", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "电瓶", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", "_", "size", " ", "=", " ", "battery", "_", "size", "\n", " ", " ", " ", " ", "def", " ", "describe", "_", "battery", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "描述", "电瓶", "容量", "的", "消息", "\"", "\"", "\""], ["\"", "\"", "\"", "打印", "一条", "描述", "电瓶", "容量", "的", "消息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "This", " ", "car", " ", "has", " ", "a", " ", "\"", " ", "+", " ", "str", "(", "self", ".", "battery", "_", "size", ")", " ", "+", " ", "\"", "-", "kWh", " ", "battery", ".", "\"", ")", "\n", " ", " ", " ", " ", "def", " ", "get", "_", "range", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "打印", "一条", "描述", "电瓶", "续航", "里程", "的", "消息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "battery", "_", "size", " ", "=", "=", " ", "70", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "range", " ", "=", " ", "240", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "self", ".", "battery", "_", "size", " ", "=", "=", " ", "85", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "range", " ", "=", " ", "270", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "message", " ", "=", " ", "\"", "This", " ", "car", " ", "can", " ", "go", " ", "approximately", " ", "\"", " ", "+", " ", "str", "(", "range", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "message", " ", "+", "=", " ", "\"", " ", "miles", " ", "on", " ", "a", " ", "full", " ", "charge", ".", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "message", ")", "\n", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "模拟", "电动汽车", "的", "独特", "之", "处", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":"], ["def", " ", "__", "init", "__", "(", "self", ",", " ", "make", ",", " ", "model", ",", " ", "year", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "初始化", "父类", "的", "属性", "，", "再", "初始化", "电动汽车", "特有", "的", "属性", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", ")", ".__", "init", "__", "(", "make", ",", " ", "model", ",", " ", "year", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "battery", " ", "=", " ", "Battery", "(", ")", "\n", "现在", "，", "可以", "新建", "一个", "名为", "my", "_", "electric", "_", "car", ".", "py", "的", "文件", "，", "导入", "ElectricCar", " ", "类", "，", "并", "创建", "一辆", "电动汽车", "了", "：", "\n", "my", "_", "electric", "_", "car", ".", "py", "\n", "from", " ", "car", " ", "import", " ", "ElectricCar", "\n", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "model", " ", "s", "'", ",", " ", "2016", ")", "\n", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "my", "_", "tesla", ".", "battery", ".", "describe", "_", "battery", "(", ")", "\n", "my", "_", "tesla", ".", "battery", ".", "get", "_", "range", "(", ")", "\n", "输出", "与", "我们", "前面", "看到", "的", "相同", "，", "但", "大部分", "逻辑", "都", "隐藏", "在", "一个", "模块", "中", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S"], ["输出", "与", "我们", "前面", "看到", "的", "相同", "，", "但", "大部分", "逻辑", "都", "隐藏", "在", "一个", "模块", "中", "：", "\n", "2016", " ", "Tesla", " ", "Model", " ", "S", "\n", "This", " ", "car", " ", "has", " ", "a", " ", "70", "-", "kWh", " ", "battery", ".", "\n", "This", " ", "car", " ", "can", " ", "go", " ", "approximately", " ", "240", " ", "miles", " ", "on", " ", "a", " ", "full", " ", "charge", ".", "\n", "9.4", ".", "3", "　", "从", "一个", "模块", "中", "导入", "多个", "类", "\n", "　", "从", "一个", "模块", "中", "导入", "多个", "类", "\n", "可", "根据", "需要", "在", "程序", "文件", "中", "导入", "任意", "数量", "的", "类", "。", "如果", "我们", "要", "在", "同一个", "程序", "中", "创建", "普通", "汽车", "和", "电动汽车", "，", "就", "需要", "将", "Car", " ", "和", "ElectricCar", " ", "类", "都", "导入", "：", "\n", "my", "_", "cars", ".", "py", "\n", "❶", " ", "from", " ", "car", " ", "import", " ", "Car", ",", " ", "ElectricCar"], ["❷", " ", "my", "_", "beetle", " ", "=", " ", "Car", "(", "'", "volkswagen", "'", ",", " ", "'", "beetle", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "beetle", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "❸", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "roadster", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "在", "❶", "处", "从", "一个", "模块", "中", "导入", "多个", "类时", "，", "用", "逗号", "分隔", "了", "各个", "类", "。", "导入", "必要", "的", "类", "后", "，", "就", "可", "根据", "需要", "创建", "每个", "类", "的", "任意", "数量", "的", "实例", "。", "\n", "在", "这个", "示例", "中", "，", "我们", "在", "❷", "处", "创建", "了", "一辆", "大众", "甲壳虫", "普通", "汽车", "，", "并", "在", "❸", "处", "创建", "了", "一辆", "特斯拉", "Roadster", "电动汽车", "：", "\n", "2016", " ", "Volkswagen", " ", "Beetle", "\n", "2016", " ", "Tesla", " ", "Roadster", "\n", "9.4", ".", "4", "　", "导入", "整个", "模块", "\n", "　", "导入", "整个", "模块", "\n", "你", "还", "可以", "导入", "整个", "模块", "，", "再", "使用", "句点", "表示法", "访问", "需要", "的", "类", "。", "这种", "导入", "方法", "很", "简单", "，", "代码", "也", "易于", "阅读", "。", "由于", "创建", "类", "实例", "的", "代码", "都", "包含", "模块", "名", "，", "因此", "不会", "与", "当前", "文件", "使用", "的", "任何", "名称", "\n", "发生冲突", "。", "\n", "下面", "的", "代码", "导入", "整个", "car", " ", "模块", "，", "并", "创建", "一辆", "普通", "汽车", "和", "一辆", "电动汽车", "：", "\n", "my", "_", "cars", ".", "py", "\n", "❶", " ", "import", " ", "car"], ["my", "_", "cars", ".", "py", "\n", "❶", " ", "import", " ", "car", "\n", "❷", " ", "my", "_", "beetle", " ", "=", " ", "car", ".", "Car", "(", "'", "volkswagen", "'", ",", " ", "'", "beetle", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "beetle", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "❸", " ", "my", "_", "tesla", " ", "=", " ", "car", ".", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "roadster", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "在", "❶", "处", "，", "我们", "导入", "了", "整个", "car", " ", "模块", "。", "接下来", "，", "我们", "使用", "语法", " ", "module", "_", "name", ".", "class", "_", "name", " ", "访问", "需要", "的", "类", "。", "像", "前面", "一样", "，", "我们", "在", "❷", "处", "创建", "了", "一辆", "大众", "甲壳虫", "汽车", "，", "并", "在", "❸", "处", "创建", "\n", "了", "一辆", "特斯拉", "Roadster", "汽车", "。", "\n", "9.4", ".", "5", "　", "导入", "模块", "中", "的", "所有", "类", "\n", "　", "导入", "模块", "中", "的", "所有", "类", "\n", "要", "导入", "模块", "中", "的", "每个", "类", "，", "可", "使用", "下面", "的", "语法", "：", "\n", "from", " ", "module", "_", "name", " ", "import", " ", "*", "\n", "不", "推荐", "使用", "这种", "导入", "方式", "，", "其", "原因", "有", "二", "。", "首先", "，", "如果", "只要", "看", "一下", "文件", "开头", "的", "import", " ", "语句", "，", "就", "能", "清楚", "地", "知道", "程序", "使用", "了", "哪些", "类", "，", "将", "大有裨益", "；", "但", "这种", "导入", "方式", "没有", "明确", "地", "指出", "你"], ["使用", "了", "模块", "中", "的", "哪些", "类", "。", "这种", "导入", "方式", "还", "可能", "引发", "名称", "方面", "的", "困惑", "。", "如果", "你", "不", "小心", "导入", "了", "一个", "与", "程序", "文件", "中", "其他", "东西", "同名", "的", "类", "，", "将", "引发", "难以", "诊断", "的", "错误", "。", "这里", "之所以", "介绍", "这种", "导", "\n", "入", "方式", "，", "是因为", "虽然", "不", "推荐", "使用", "这种", "方式", "，", "但", "你", "可能", "会", "在", "别人", "编写", "的", "代码", "中", "见到", "它", "。", "\n", "需要", "从", "一个", "模块", "中", "导入", "很多类", "时", "，", "最好", "导入", "整个", "模块", "，", "并", "使用", " ", "module", "_", "name", ".", "class", "_", "name", " ", "语法", "来", "访问", "类", "。", "这样", "做时", "，", "虽然", "文件", "开头", "并", "没有", "列出", "用到", "的", "所有", "类", "，", "但", "你", "清楚", "地知", "\n", "道", "在", "程序", "的", "哪些地方", "使用", "了", "导入", "的", "模块", "；", "你", "还", "避免", "了", "导入", "模块", "中", "的", "每个", "类", "可能", "引发", "的", "名称", "冲突", "。", "\n", "9.4", ".", "6", "　", "在", "一个", "模块", "中", "导入", "另", "一个", "模块", "\n", "　", "在", "一个", "模块", "中", "导入", "另", "一个", "模块", "\n", "有时候", "，", "需要", "将类", "分散", "到", "多个", "模块", "中", "，", "以免", "模块", "太", "大", "，", "或", "在", "同一个", "模块", "中", "存储", "不", "相关", "的", "类", "。", "将类", "存储", "在", "多个", "模块", "中", "时", "，", "你", "可能", "会", "发现", "一个", "模块", "中", "的", "类", "依赖于", "另", "一个", "模块", "中", "的", "类", "。", "\n", "在", "这种", "情况", "下", "，", "可", "在", "前", "一个", "模块", "中", "导入", "必要", "的", "类", "。", "\n", "例如", "，", "下面", "将", "Car", " ", "类", "存储", "在", "一个", "模块", "中", "，", "并", "将", "ElectricCar", " ", "和", "Battery", " ", "类", "存储", "在", "另", "一个", "模块", "中", "。", "我们", "将", "第二个", "模块", "命名", "为", "electric", "_", "car", ".", "py", " ", "（", "这", "将", "覆盖", "前面", "创建", "的", "文件"], ["electric", "_", "car", ".", "py", "）", "，", "并", "将", "Battery", " ", "和", "ElectricCar", " ", "类", "复制到", "这个", "模块", "中", "：", "\n", "electric", "_", "car", ".", "py", "\n", " ", " ", "\"", "\"", "\"", "一组", "可", "用于", "表示", "电动汽车", "的", "类", "\"", "\"", "\"", "\n", "❶", " ", "from", " ", "car", " ", "import", " ", "Car", "\n", " ", " ", "class", " ", "Battery", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "class", " ", "ElectricCar", "(", "Car", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "ElectricCar", " ", "类", "需要", "访问", "其父", "类", "Car", " ", "，", "因此", "在", "❶", "处", "，", "我们", "直接", "将", "Car", " ", "类", "导入", "该", "模块", "中", "。", "如果", "我们", "忘记", "了", "这行", "代码", "，", "Python", "将", "在", "我们", "试图", "创建", "ElectricCar", " ", "实例", "时", "引发", "错误", "。", "\n", "我们", "还", "需要", "更新", "模块", "car", " ", "，", "使", "其", "包含", "Car", " ", "类", "：", "\n", "car", ".", "py", "\n", "\"", "\"", "\"", "一个", "可", "用于", "表示", "汽车", "的", "类", "\"", "\"", "\"", "\n", "class", " ", "Car", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "可以", "分别", "从", "每个", "模块", "中", "导入", "类", "，", "以", "根据", "需要", "创建", "任何", "类型", "的", "汽车", "了", "：", "\n", "my", "_", "cars", ".", "py", "\n", "❶", " ", "from", " ", "car", " ", "import", " ", "Car", "\n", " ", " ", "from", " ", "electric", "_", "car", " ", "import", " ", "ElectricCar"], ["my", "_", "beetle", " ", "=", " ", "Car", "(", "'", "volkswagen", "'", ",", " ", "'", "beetle", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "beetle", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", " ", " ", "my", "_", "tesla", " ", "=", " ", "ElectricCar", "(", "'", "tesla", "'", ",", " ", "'", "roadster", "'", ",", " ", "2016", ")", "\n", " ", " ", "print", "(", "my", "_", "tesla", ".", "get", "_", "descriptive", "_", "name", "(", ")", ")", "\n", "在", "❶", "处", "，", "我们", "从", "模块", "car", " ", "中", "导入", "了", "Car", " ", "类", "，", "并", "从", "模块", "electric", "_", "car", " ", "中", "导入", "ElectricCar", " ", "类", "。", "接下来", "，", "我们", "创建", "了", "一辆", "普通", "汽车", "和", "一辆", "电动汽车", "。", "这", "两种", "汽车", "都", "得以", "正确", "地", "\n", "创建", "：", "\n", "2016", " ", "Volkswagen", " ", "Beetle", "\n", "2016", " ", "Tesla", " ", "Roadster", "\n", "9.4", ".", "7", "　", "自定义", "工作", "流程", "\n", "　", "自定义", "工作", "流程", "\n", "正如", "你", "看到", "的", "，", "在", "组织", "大型项目", "的", "代码", "方面", "，", "Python", "提供", "了", "很多", "选项", "。", "熟悉", "所有", "这些", "选项", "很", "重要", "，", "这样", "你", "才能", "确定", "哪", "种", "项目", "组织", "方式", "是", "最佳", "的", "，", "并", "能", "理解", "别人", "开发", "的", "项目", "。", "\n", "一", "开始", "应", "让", "代码", "结构", "尽可能", "简单", "。", "先", "尽可能", "在", "一个", "文件", "中", "完成", "所有", "的", "工作", "，", "确定", "一切", "都", "能", "正确", "运行", "后", "，", "再", "将", "类", "移到", "独立", "的", "模块", "中", "。", "如果", "你", "喜欢", "模块", "和", "文件", "的", "交互方式", "，", "可", "在", "项目"], ["开始", "时", "就", "尝试", "将类", "存储", "到", "模块", "中", "。", "先", "找出", "让", "你", "能够", "编写出", "可行", "代码", "的", "方式", "，", "再", "尝试", "让", "代码", "更为", "组织", "有序", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "9", "-", "10", " ", "导入", "\n", "导入", "Restaurant", " ", "类", "\n", "类", " ", "：", "将", "最新", "的", "Restaurant", " ", "类", "存储", "在", "一个", "模块", "中", "。", "在", "另", "一个", "文件", "中", "，", "导入", "Restaurant", " ", "类", "，", "创建", "一个", "Restaurant", " ", "实例", "，", "并调", "\n", "用", "Restaurant", " ", "的", "一个", "方法", "，", "以", "确认", "import", " ", "语句", "正确", "无误", "。", "\n", "9", "-", "11", " ", "导入", "\n", "导入", "Admin", " ", "类", "\n", "类", " ", "：", "以为", "完成", "练习", "9", "-", "8", "而", "做", "的", "工作", "为", "基础", "，", "将", "User", " ", "、", "Privileges", " ", "和", "Admin", " ", "类", "存储", "在", "一个", "模块", "中", "，", "再", "创建", "一个", "文件", "，", "在", "其中", "创建", "一个", "Admin", " ", "实例", "\n", "并", "对", "其", "调用", "方法", "show", "_", "privileges", "(", ")", " ", "，", "以", "确认", "一切", "都", "能", "正确", "地", "运行", "。", "\n", "9", "-", "12", " ", "多个", "模块", "\n", "多个", "模块", " ", "：", "将", "User", " ", "类", "存储", "在", "一个", "模块", "中", "，", "并", "将", "Privileges", " ", "和", "Admin", " ", "类", "存储", "在", "另", "一个", "模块", "中", "。", "再", "创建", "一个", "文件", "，", "在", "其中", "创建", "一个", "Admin", " ", "实例", "，", "并", "对", "其", "调用", "方", "\n", "法", "show", "_", "privileges", "(", ")", " ", "，", "以", "确认", "一切", "都", "依然", "能够", "正确", "地", "运行", "。", "\n", "9.5", "　", "\n", "　", "Python", "标准", "库", "\n", "标准", "库", "\n", "Python", "标准", "库"], ["9.5", "　", "\n", "　", "Python", "标准", "库", "\n", "标准", "库", "\n", "Python", "标准", "库", "\n", "标准", "库", " ", "是", "一组", "模块", "，", "安装", "的", "Python", "都", "包含", "它", "。", "你", "现在", "对类", "的", "工作", "原理", "已有", "大致", "的", "了解", "，", "可以", "开始", "使用", "其他", "程序员", "编写", "好", "的", "模块", "了", "。", "可", "使用", "标准", "库中", "的", "任何", "函数", "和", "类", "，", "为此", "\n", "只", "需", "在", "程序", "开头", "包含", "一条", "简单", "的", "import", " ", "语句", "。", "下面", "来看", "模块", "collections", " ", "中", "的", "一个", "类", "—", "—", "OrderedDict", " ", "。", "\n", "字典", "让", "你", "能够", "将", "信息", "关联", "起来", "，", "但", "它们", "不", "记录", "你", "添加", "键", "—", "值", "对", "的", "顺序", "。", "要", "创建", "字典", "并", "记录", "其中", "的", "键", "—", "值", "对", "的", "添加", "顺序", "，", "可", "使用", "模块", "collections", " ", "中", "的", "OrderedDict", "\n", "类", "。", "OrderedDict", " ", "实例", "的", "行为", "几乎", "与", "字典", "相同", "，", "区别", "只", "在于", "记录", "了", "键", "—", "值", "对", "的", "添加", "顺序", "。", "\n", "我们", "再", "来看", "一看", "第", "6", "章", "的", "favorite", "_", "languages", ".", "py", "示例", "，", "但", "这次", "将", "记录", "被调查者", "参与", "调查", "的", "顺序", "：", "\n", "favorite", "_", "languages", ".", "py", "\n", "❶", " ", "from", " ", "collections", " ", "import", " ", "OrderedDict", "\n", "❷", " ", "favorite", "_", "languages", " ", "=", " ", "OrderedDict", "(", ")", "\n", "❸", " ", "favorite", "_", "languages", "[", "'", "jen", "'", "]", " ", "=", " ", "'", "python", "'"], ["❸", " ", "favorite", "_", "languages", "[", "'", "jen", "'", "]", " ", "=", " ", "'", "python", "'", "\n", " ", " ", "favorite", "_", "languages", "[", "'", "sarah", "'", "]", " ", "=", " ", "'", "c", "'", "\n", " ", " ", "favorite", "_", "languages", "[", "'", "edward", "'", "]", " ", "=", " ", "'", "ruby", "'", "\n", " ", " ", "favorite", "_", "languages", "[", "'", "phil", "'", "]", " ", "=", " ", "'", "python", "'", "\n", "❹", " ", "for", " ", "name", ",", " ", "language", " ", "in", " ", "favorite", "_", "languages", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "name", ".", "title", "(", ")", " ", "+", " ", "\"", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "\"", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "language", ".", "title", "(", ")", " ", "+", " ", "\"", ".", "\"", ")", "\n", "我们", "首先", "从", "模块", "collections", " ", "中", "导入", "了", "OrderedDict", " ", "类", "（", "见", "❶", "）", "。", "在", "❷", "处", "，", "我们", "创建", "了", "OrderedDict", " ", "类", "的", "一个", "实例", "，", "并", "将", "其", "存储", "到", "favorite", "_", "languages", " ", "中", "。", "请注", "\n", "意", "，", "这里", "没有", "使用", "花", "括号", "，", "而是", "调用", "OrderedDict", "(", ")", " ", "来", "创建", "一个", "空", "的", "有序", "字典", "，", "并", "将", "其", "存储", "在", "favorite", "_", "languages", " ", "中", "。", "接下来", "，", "我们", "以", "每次", "一对", "的", "方式", "添加", "名字", "—", "语言"], ["对", "（", "见", "❸", "）", "。", "在", "❹", "处", "，", "我们", "遍历", "favorite", "_", "languages", " ", "，", "但", "知道", "将", "以", "添加", "的", "顺序", "获取", "调查结果", "：", "\n", "Jen", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Python", ".", "\n", "Sarah", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "C", ".", "\n", "Edward", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Ruby", ".", "\n", "Phil", "'", "s", " ", "favorite", " ", "language", " ", "is", " ", "Python", ".", "\n", "这是", "一个", "很", "不错", "的", "类", "，", "它", "兼具", "列表", "和", "字典", "的", "主要", "优点", "（", "在", "将", "信息", "关联", "起来", "的", "同时", "保留", "原来", "的", "顺序", "）", "。", "等", "你", "开始", "对", "关心", "的", "现实", "情形", "建模", "时", "，", "可能", "会", "发现", "有序", "字典", "正好", "能够", "满足", "需", "\n", "求", "。", "随着", "你", "对", "标准", "库", "的", "了解", "越来越", "深入", "，", "将", "熟悉", "大量", "可", "帮助", "你", "处理", "常见", "情形", "的", "模块", "。", "\n", "注意", "\n", "注意", " ", "　", "你", "还", "可以", "从", "其他", "地方", "下载", "外部", "模块", "。", "本书", "第二", "部分", "的", "每个", "项目", "都", "需要", "使用", "外部", "模块", "，", "届时", "你", "将", "看到", "很多", "这样", "的", "示例", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "9", "-", "13", " ", "使用", "\n", "使用", "OrderedDict", " ", "：", "在", "练习", "6", "-", "4", "中", "，", "你", "使用", "了", "一个", "标准", "字典", "来", "表示", "词汇表", "。", "请", "使用", "OrderedDict", " ", "类来", "重写", "这个", "程序", "，", "并", "确认", "输出", "的", "顺序", "与", "你", "在", "字典", "中", "添加", "键", "\n", "—", "值", "对", "的", "顺序", "一致", "。", "\n", "9", "-", "14", " ", "骰子"], ["—", "值", "对", "的", "顺序", "一致", "。", "\n", "9", "-", "14", " ", "骰子", "\n", "骰子", " ", "：", "模块", "random", " ", "包含", "以", "各种", "方式", "生成", "随机数", "的", "函数", "，", "其中", "的", "randint", "(", ")", " ", "返回", "一个", "位于", "指定", "范围", "内", "的", "整数", "，", "例如", "，", "下面", "的", "代码", "返回", "一个", "1", "~", "6", "内", "的", "整数", "：", "\n", "from", " ", "random", " ", "import", " ", "randint", "\n", "x", " ", "=", " ", "randint", "(", "1", ",", " ", "6", ")", "\n", "请", "创建", "一个", "Die", " ", "类", "，", "它", "包含", "一个", "名为", "sides", " ", "的", "属性", "，", "该", "属性", "的", "默认值", "为", "6", "。", "编写", "一个", "名为", "roll", "_", "die", "(", ")", " ", "的", "方法", "，", "它", "打印", "位于", "1", "和", "骰子", "面数", "之间", "的", "随机数", "。", "创建", "一个", "6", "面", "\n", "的", "骰子", "，", "再", "掷", "10", "次", "。", " ", "创建", "一个", "10", "面", "的", "骰子", "和", "一个", "20", "面", "的", "骰子", "，", "并", "将", "它们", "都", "掷", "10", "次", "。", "\n", "9", "-", "15", " ", "Python", " ", "Module", " ", "of", " ", "the", " ", "Week", " ", "：", "要", "了解", "Python", "标准", "库", "，", "一个", "很", "不错", "的", "资源", "是", "网站", "Python", " ", "Module", " ", "of", " ", "the", " ", "Week", "。", "请", "访问", "http", ":", "/", "/", "pymotw", ".", "com", "/", " ", "并", "查看", "其中", "的", "目录", "，", "在", "其中", "找", "一"], ["个", "你", "感兴趣", "的", "模块", "进行", "探索", "，", "或", "阅读", "模块", "collections", " ", "和", "random", " ", "的", "文档", "。", "\n", "9.6", "　", "类", "编码", "风格", "\n", "　", "类", "编码", "风格", "\n", "你", "必须", "熟悉", "有些", "与", "类", "相关", "的", "编码", "风格", "问题", "，", "在", "你", "编写", "的", "程序", "较", "复杂", "时", "尤其", "如此", "。", "\n", "类名", "应", "采用", "驼峰", "命名", "法", "\n", "驼峰", "命名", "法", " ", "，", "即将", "类名", "中", "的", "每个", "单词", "的", "首字母", "都", "大写", "，", "而", "不", "使用", "下划线", "。", "实例", "名", "和", "模块", "名", "都", "采用", "小写", "格式", "，", "并", "在", "单词", "之间", "加上", "下划线", "。", "\n", "对于", "每个", "类", "，", "都", "应", "紧跟", "在", "类", "定义", "后面", "包含", "一个", "文档", "字符串", "。", "这种", "文档", "字符串", "简要地", "描述", "类", "的", "功能", "，", "并", "遵循", "编写", "函数", "的", "文档", "字符串", "时", "采用", "的", "格式", "约定", "。", "每个", "模块", "也", "都", "应", "包含", "一个", "文", "\n", "档", "字符串", "，", "对", "其中", "的", "类", "可", "用于", "做", "什么", "进行", "描述", "。", "\n", "可", "使用", "空行", "来", "组织", "代码", "，", "但", "不要", "滥用", "。", "在", "类", "中", "，", "可", "使用", "一个", "空行", "来", "分隔", "方法", "；", "而", "在", "模块", "中", "，", "可", "使用", "两个", "空行", "来", "分隔", "类", "。", "\n", "需要", "同时", "导入", "标准", "库中", "的", "模块", "和", "你", "编写", "的", "模块", "时", "，", "先", "编写", "导入", "标准", "库", "模块", "的", "import", " ", "语句", "，", "再", "添加", "一个", "空行", "，", "然后", "编写", "导入", "你", "自己", "编写", "的", "模块", "的", "import", " ", "语句", "。", "在", "包含", "多", "\n", "条", "import", " ", "语句", "的", "程序", "中", "，", "这种", "做法", "让", "人", "更", "容易", "明白", "程序", "使用", "的", "各个", "模块", "都", "来自", "何方", "。", "\n", "9.7", "　", "小结", "\n", "　", "小结"], ["9.7", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "编写", "类", "；", "如何", "使用", "属性", "在", "类", "中", "存储", "信息", "，", "以及", "如何", "编写", "方法", "，", "以", "让", "类", "具备", "所", "需", "的", "行为", "；", "如何", "编写", "方法", "__", "init", "__", "(", ")", " ", "，", "以便", "根据", "类", "创建", "包含", "所", "需", "属性", "的", "\n", "实例", "。", "你", "见识", "了", "如何", "修改", "实例", "的", "属性", "—", "—", "包括", "直接", "修改", "以及", "通过", "方法", "进行", "修改", "。", "你", "还", "了解", "了", "：", "使用", "继承", "可简化", "相关", "类", "的", "创建", "工作", "；", "将", "一个", "类", "的", "实例", "用作", "另", "一个", "类", "的", "属性", "可", "让", "类", "更", "\n", "简洁", "。", "\n", "你", "了解", "到", "，", "通过", "将类", "存储", "在", "模块", "中", "，", "并", "在", "需要", "使用", "这些", "类", "的", "文件", "中", "导入", "它们", "，", "可", "让", "项目", "组织", "有序", "。", "你", "学习", "了", "Python", "标准", "库", "，", "并", "见识", "了", "一个", "使用", "模块", "collections", " ", "中", "\n", "的", "OrderedDict", " ", "类", "的", "示例", "。", "最后", "，", "你", "学习", "了", "编写", "类时", "应", "遵循", "的", "Python", "约定", "。", "\n", "在", "第", "10", "章中", "，", "你", "将", "学习", "如何", "使用", "文件", "，", "这", "让", "你", "能够", "保存", "你", "在", "程序", "中所", "做", "的", "工作", "，", "以及", "你", "让", "用户", "做", "的", "工作", "。", "你", "还", "将", "学习", "异常", "\n", "异常", " ", "，", "这是", "一种", "特殊", "的", "Python", "类", "，", "用于", "帮助", "你", "在", "发生", "错误", "时", "\n", "采取相应", "的", "措施", "。", "\n", "第", "\n", "第", " ", "10", " ", "章", "　", "文件", "和", "异常", "\n", "章", "　", "文件", "和", "异常", "\n", "至此", "，", "你", "掌握", "了", "编写", "组织", "有序", "而", "易于", "使用", "的", "程序", "所", "需", "的", "基本技能", "，", "该", "考虑", "让", "程序", "目标", "更", "明确", "、", "用途", "更大", "了", "。", "在", "本章", "中", "，", "你", "将", "学习", "处理", "文件", "，", "让", "程序", "能够", "快速", "地", "分析", "大"], ["量", "的", "数据", "；", "你", "将", "学习", "错误处理", "，", "避免", "程序", "在", "面对", "意外", "情形", "时", "崩溃", "；", "你", "将", "学习", "异常", "\n", "异常", " ", "，", "它们", "是", "Python", "创建", "的", "特殊", "对象", "，", "用于", "管理", "程序运行", "时", "出现", "的", "错误", "；", "你", "还", "将", "学习", "模", "\n", "块", "json", " ", "，", "它", "让", "你", "能够", "保存", "用户", "数据", "，", "以免", "在", "程序", "停止", "运行", "后", "丢失", "。", "\n", "学习", "处理", "文件", "和", "保存", "数据", "可", "让", "你", "的", "程序", "使用", "起来", "更", "容易", "：", "用户", "将", "能够", "选择", "输入", "什么样", "的", "数据", "，", "以及", "在", "什么", "时候", "输入", "；", "用户", "使用", "你", "的", "程序", "做", "一些", "工作", "后", "，", "可", "将", "程序", "关", "\n", "闭", "，", "以后", "再", "接着", "往下", "做", "。", "学习", "处理", "异常", "可", "帮助", "你", "应对", "文件", "不", "存在", "的", "情形", "，", "以及", "处理", "其他", "可能", "导致", "程序", "崩溃", "的", "问题", "。", "这", "让", "你", "的", "程序", "在", "面对", "错误", "的", "数据", "时", "更", "健壮", "—", "—", "不管", "\n", "这些", "错误", "数据", "源自", "无意", "的", "错误", "，", "还是", "源自", "破坏", "程序", "的", "恶意", "企图", "。", "你", "在", "本章", "学习", "的", "技能", "可", "提高", "程序", "的", "适用性", "、", "可用性", "和", "稳定性", "。", "\n", "10.1", "　", "从文件", "中", "读取数据", "\n", "　", "从文件", "中", "读取数据", "\n", "文本文件", "可", "存储", "的", "数据量", "多得", "难以置信", "：", "天气", "数据", "、", "交通", "数据", "、", "社会", "经济", "数据", "、", "文学作品", "等", "。", "每当", "需要", "分析", "或", "修改", "存储", "在", "文件", "中", "的", "信息", "时", "，", "读取", "文件", "都", "很", "有用", "，", "对", "数据分析", "应用", "\n", "程序", "来说", "尤其", "如此", "。", "例如", "，", "你", "可以", "编写", "一个", "这样", "的", "程序", "：", "读取", "一个", "文本文件", "的", "内容", "，", "重新", "设置", "这些", "数据", "的", "格式", "并", "将", "其", "写入", "文件", "，", "让", "浏览器", "能够", "显示", "这些", "内容", "。"], ["要", "使用", "文本文件", "中", "的", "信息", "，", "首先", "需要", "将", "信息", "读取", "到", "内存", "中", "。", "为此", "，", "你", "可以", "一次性", "读取", "文件", "的", "全部内容", "，", "也", "可以", "以", "每次", "一行", "的", "方式", "逐步", "读取", "。", "\n", "10.1", ".", "1", "　", "读取", "整个", "文件", "\n", "　", "读取", "整个", "文件", "\n", "要", "读取", "文件", "，", "需要", "一个", "包含", "几行", "文本", "的", "文件", "。", "下面", "首先", "来", "创建", "一个", "文件", "，", "它", "包含", "精确", "到", "小数点", "后", "30", "位", "的", "圆周率", "值", "，", "且", "在", "小数点", "后", "每", "10", "位处", "都", "换行", "：", "\n", "pi", "_", "digits", ".", "txt", "\n", "3.1415926535"], ["8979323846", "\n", " ", " ", "2643383279", "\n", "要", "动手", "尝试", "后续", "示例", "，", "可", "在", "编辑器", "中", "输入", "这些", "数据", "行", "，", "再", "将", "文件", "保存", "为", "pi", "_", "digits", ".", "txt", "，", "也", "可", "从", "本书", "的", "配套", "网站", "（", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", " ", "）", "下载", "该", "文件", "。", "然后", "，", "将", "该", "\n", "文件", "保存", "到", "本章", "程序", "所在", "的", "目录", "中", "。", "\n", "下面", "的", "程序", "打开", "并", "读取", "这个", "文件", "，", "再", "将", "其", "内容", "显示", "到", "屏幕", "上", "：", "\n", "file", "_", "reader", ".", "py", "\n", "with", " ", "open", "(", "'", "pi", "_", "digits", ".", "txt", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "contents", " ", "=", " ", "file", "_", "object", ".", "read", "(", ")", "\n", " ", " ", " ", " ", "print", "(", "contents", ")", "\n", "在", "这个", "程序", "中", "，", "第", "1", "行", "代码", "做", "了", "大量", "的", "工作", "。", "我们", "先", "来", "看看", "函数", "open", "(", ")", " ", "。", "要", "以", "任何", "方式", "使用", "文件", "—", "—", "哪怕", "仅仅", "是", "打印", "其", "内容", "，", "都", "得", "先", "打开", "\n", "打开", " ", "文件", "，", "这样", "才能", "访问", "它", "。", "函数", "open", "(", ")", "\n", "接受", "一个", "参数", "：", "要", "打开", "的", "文件", "的", "名称", "。", "Python", "在", "当前", "执行", "的", "文件", "所在", "的", "目录", "中", "查找", "指定", "的", "文件", "。", "在", "这个", "示例", "中", "，", "当前", "运行", "的", "是", "file", "_", "reader", ".", "py", "，", "因此", "Python", "在", "file", "_", "reader", ".", "py", "所在", "的", "目录", "中"], ["查找", "pi", "_", "digits", ".", "txt", "。", "函数", "open", "(", ")", " ", "返回", "一个", "表示", "文件", "的", "对象", "。", "在", "这里", "，", "open", "(", "'", "pi", "_", "digits", ".", "txt", "'", ")", " ", "返回", "一个", "表示", "文件", "pi", "_", "digits", ".", "txt", " ", "的", "对象", "；", "Python", "将", "这个", "对象", "存储", "在", "我们", "将", "\n", "在", "后面", "使用", "的", "变量", "中", "。", "\n", "关键字", "with", " ", "在", "不再", "需要", "访问", "文件", "后", "将", "其", "关闭", "。", "在", "这个", "程序", "中", "，", "注意", "到", "我们", "调用", "了", "open", "(", ")", " ", "，", "但", "没有", "调用", "close", "(", ")", " ", "；", "你", "也", "可以", "调用", "open", "(", ")", " ", "和", "close", "(", ")", " ", "来", "打开", "和", "关闭", "文件", "，", "但", "\n", "这样", "做时", "，", "如果", "程序", "存在", "bug", "，", "导致", "close", "(", ")", " ", "语句", "未", "执行", "，", "文件", "将", "不会", "关闭", "。", "这", "看似", "微不足道", "，", "但", "未", "妥善", "地", "关闭", "文件", "可能", "会", "导致", "数据", "丢失", "或", "受损", "。", "如果", "在", "程序", "中", "过早地", "调", "\n", "用", "close", "(", ")", " ", "，", "你", "会", "发现", "需要", "使用", "文件", "时", "它", "已", "关闭", "\n", "关闭", " ", "（", "无法访问", "）", "，", "这会", "导致", "更", "多", "的", "错误", "。", "并非", "在", "任何", "情况", "下", "都", "能", "轻松", "确定", "关闭", "文件", "的", "恰当", "时机", "，", "但", "通过", "使用", "前面", "所示", "的", "结构", "，", "可", "\n", "让", "Python", "去", "确定", "：", "你", "只管", "打开", "文件", "，", "并", "在", "需要", "时", "使用", "它", "，", "Python", "自会在", "合适", "的", "时候", "自动", "将", "其", "关闭", "。"], ["让", "Python", "去", "确定", "：", "你", "只管", "打开", "文件", "，", "并", "在", "需要", "时", "使用", "它", "，", "Python", "自会在", "合适", "的", "时候", "自动", "将", "其", "关闭", "。", "\n", "有", "了", "表示", "pi", "_", "digits", ".", "txt", "的", "文件", "对象", "后", "，", "我们", "使用", "方法", "read", "(", ")", " ", "（", "前述", "程序", "的", "第", "2", "行", "）", "读取", "这个", "文件", "的", "全部内容", "，", "并", "将", "其", "作为", "一个", "长长的", "字符串", "存储", "在", "变量", "contents", " ", "中", "。", "这样", "，", "通过", "\n", "打印", "contents", " ", "的", "值", "，", "就", "可", "将", "这个", "文本文件", "的", "全部内容", "显示", "出来", "：", "\n", "3.1415926535", "\n", " ", " ", "8979323846", "\n", " ", " ", "2643383279", "\n", "相比", "于", "原始", "文件", "，", "该", "输出", "唯一", "不同", "的", "地方", "是", "末尾", "多", "了", "一个", "空行", "。", "为何", "会", "多出", "这个", "空行", "呢", "？", "因为", "read", "(", ")", " ", "到达", "文件", "末尾", "时", "返回", "一个", "空", "字符串", "，", "而", "将", "这个", "空", "字符串", "显示", "出来", "时", "就是", "一", "\n", "个", "空行", "。", "要", "删除", "多", "出来", "的", "空行", "，", "可", "在", "print", " ", "语句", "中", "使用", "rstrip", "(", ")", " ", "：", "\n", "with", " ", "open", "(", "'", "pi", "_", "digits", ".", "txt", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "contents", " ", "=", " ", "file", "_", "object", ".", "read", "(", ")", "\n", " ", " ", " ", " ", "print", "(", "contents", ".", "rstrip", "(", ")", ")", "\n", "本书", "前面", "说", "过", "，", "Python", "方法", "rstrip", "(", ")", " ", "删除", "（", "剥除", "）", "字符串", "末尾", "的", "空白", "。", "现在", "，", "输出", "与", "原始", "文件", "的", "内容", "完全相同", "："], ["3.1415926535", "\n", " ", " ", "8979323846", "\n", " ", " ", "2643383279", "\n", "10.1", ".", "2", "　", "文件", "路径", "\n", "　", "文件", "路径", "\n", "当", "你", "将", "类似", "pi", "_", "digits", ".", "txt", "这样", "的", "简单", "文件名", "传递", "给", "函数", "open", "(", ")", " ", "时", "，", "Python", "将", "在", "当前", "执行", "的", "文件", "（", "即", ".", "py", "程序", "文件", "）", "所在", "的", "目录", "中", "查找文件", "。", "\n", "根据", "你", "组织", "文件", "的", "方式", "，", "有时", "可能", "要", "打开", "不", "在", "程序", "文件", "所属", "目录", "中", "的", "文件", "。", "例如", "，", "你", "可能", "将", "程序", "文件", "存储", "在", "了", "文件夹", "python", "_", "work", "中", "，", "而", "在", "文件夹", "python", "_", "work", "中", "，", "有", "一个", "名为", "\n", "text", "_", "files", "的", "文件夹", "，", "用于", "存储", "程序", "文件", "操作", "的", "文本文件", "。", "虽然", "文件夹", "text", "_", "files", "包含", "在", "文件夹", "python", "_", "work", "中", "，", "但", "仅", "向", "open", "(", ")", " ", "传递", "位于", "该", "文件夹", "中", "的", "文件", "的", "名称", "也", "不", "可行", "，", "因为", "Python", "\n", "只", "在", "文件夹", "python", "_", "work", "中", "查找", "，", "而", "不会", "在", "其子", "文件夹", "text", "_", "files", "中", "查找", "。", "要", "让", "Python", "打开", "不", "与", "程序", "文件", "位于", "同一个", "目录", "中", "的", "文件", "，", "需要", "提供", "文件", "路径", "\n", "文件", "路径", " ", "，", "它", "让", "Python", "到", "系统", "的", "特定", "位置", "\n", "去", "查找", "。", "\n", "由于", "文件夹", "text", "_", "files", "位于", "文件夹", "python", "_", "work", "中", "，", "因此", "可", "使用", "相对", "文件", "路"], ["去", "查找", "。", "\n", "由于", "文件夹", "text", "_", "files", "位于", "文件夹", "python", "_", "work", "中", "，", "因此", "可", "使用", "相对", "文件", "路", "\n", "相对", "文件", "路", " ", "径来", "打开", "该", "文件夹", "中", "的", "文件", "。", "相对", "文件", "路径", "让", "Python", "到", "指定", "的", "位置", "去", "查找", "，", "而", "该", "位置", "是", "相对", "于", "当前", "运行", "的", "程", "\n", "序", "所在", "目录", "的", "。", "在", "Linux", "和", "OS", " ", "X", "中", "，", "你", "可以", "这样", "编写", "代码", "：", "\n", "with", " ", "open", "(", "'", "text", "_", "files", "/", "filename", ".", "txt", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "这", "行", "代码", "让", "Python", "到", "文件夹", "python", "_", "work", "下", "的", "文件夹", "text", "_", "files", "中去", "查找", "指定", "的", ".", "txt", "文件", "。", "在", "Windows", "系统", "中", "，", "在", "文件", "路径", "中", "使用", "反", "斜杠", "（", "\\", " ", "）", "而", "不是", "斜杠", "（", "/", " ", "）", "：", "\n", "with", " ", "open", "(", "'", "text", "_", "files", "\\", "filename", ".", "txt", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "你", "还", "可以", "将", "文件", "在", "计算机", "中", "的", "准确", "位置", "告诉", "Python", "，", "这样", "就", "不用", "关心", "当前", "运行", "的", "程序", "存储", "在", "什么", "地方", "了", "。", "这", "称为", "绝对", "文件", "路径", "\n", "绝对", "文件", "路径", " ", "。", "在", "相对路径", "行不通", "时", "，", "可", "使用", "绝对路径", "。", "例如", "，"], ["绝对", "文件", "路径", " ", "。", "在", "相对路径", "行不通", "时", "，", "可", "使用", "绝对路径", "。", "例如", "，", "\n", "如果", "text", "_", "files", "并", "不", "在", "文件夹", "python", "_", "work", "中", "，", "而", "在", "文件夹", "other", "_", "files", "中", "，", "则", "向", "open", "(", ")", " ", "传递", "路径", "'", "text", "_", "files", "/", " ", "filename", ".", "txt", "'", " ", "行不通", "，", "因为", "Python", "只", "在", "文件夹", "python", "_", "work", "中", "查找", "\n", "该", "位置", "。", "为", "明确", "地", "指出", "你", "希望", "Python", "到", "哪里", "去", "查找", "，", "你", "需要", "提供", "完整", "的", "路径", "。", "\n", "绝对路径", "通常", "比", "相对路径", "更长", "，", "因此", "将", "其", "存储", "在", "一个", "变量", "中", "，", "再", "将", "该", "变量", "传递", "给", "open", "(", ")", " ", "会", "有所", "帮助", "。", "在", "Linux", "和", "OS", " ", "X", "中", "，", "绝对路径", "类似", "于", "下面", "这样", "：", "\n", "file", "_", "path", " ", "=", " ", "'", "/", "home", "/", "ehmatthes", "/", "other", "_", "files", "/", "text", "_", "files", "/", "filename", ".", "txt", "'", "\n", "with", " ", "open", "(", "file", "_", "path", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "而", "在", "Windows", "系统", "中", "，", "它们", "类似", "于", "下面", "这样", "："], ["file", "_", "path", " ", "=", " ", "'", "C", ":", "\\", "Users", "\\", "ehmatthes", "\\", "other", "_", "files", "\\", "text", "_", "files", "\\", "filename", ".", "txt", "'", "\n", "with", " ", "open", "(", "file", "_", "path", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "通过", "使用", "绝对路径", "，", "可", "读取", "系统", "任何", "地方", "的", "文件", "。", "就", "目前", "而言", "，", "最", "简单", "的", "做法", "是", "，", "要么", "将", "数据文件", "存储", "在", "程序", "文件", "所在", "的", "目录", "，", "要么", "将", "其", "存储", "在", "程序", "文件", "所在", "目录", "下", "的", "一个", "文件", "\n", "夹", "（", "如", "text", "_", "files", "）", "中", "。", "\n", "注意", "\n", "注意", " ", "　", "Windows", "系统", "有时", "能够", "正确", "地", "解读", "文件", "路径", "中", "的", "斜杠", "。", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "且", "结果", "不", "符合", "预期", "，", "请", "确保", "在", "文件", "路径", "中", "使用", "的", "是", "反", "斜杠", "。", "\n", "10.1", ".", "3", "　", "逐行", "读取", "\n", "　", "逐行", "读取", "\n", "读取", "文件", "时", "，", "常常", "需要", "检查", "其中", "的", "每", "一行", "：", "你", "可能", "要", "在", "文件", "中", "查找", "特定", "的", "信息", "，", "或者", "要", "以", "某种", "方式", "修改", "文件", "中", "的", "文本", "。", "例如", "，", "你", "可能", "要", "遍历", "一个", "包含", "天气", "数据", "的", "文件", "，", "并", "使用", "天", "\n", "气", "描述", "中", "包含", "字样", "sunny", "的", "行", "。", "在", "新闻报道", "中", "，", "你", "可能", "会", "查找", "包含", "标签", "<", "headline", ">", " ", "的", "行", "，", "并", "按", "特定", "的", "格式", "设置", "它", "。", "\n", "要", "以", "每次", "一行", "的", "方式", "检查", "文件", "，", "可", "对", "文件", "对象", "使用", "for", " ", "循环", "：", "\n", "file", "_", "reader", ".", "py", "\n", "❶", " ", "filename", " ", "=", " ", "'", "pi", "_", "digits", ".", "txt", "'"], ["file", "_", "reader", ".", "py", "\n", "❶", " ", "filename", " ", "=", " ", "'", "pi", "_", "digits", ".", "txt", "'", "\n", "❷", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "❸", " ", " ", " ", " ", " ", "for", " ", "line", " ", "in", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "line", ")", "\n", "在", "❶", "处", "，", "我们", "将要", "读取", "的", "文件", "的", "名称", "存储", "在", "变量", "filename", " ", "中", "，", "这是", "使用", "文件", "时", "一种", "常见", "的", "做法", "。", "由于", "变量", "filename", " ", "表示", "的", "并非", "实际", "文件", "—", "—", "它", "只是", "一个", "让", "Python", "知道", "到", "哪里", "\n", "去", "查找文件", "的", "字符串", "，", "因此", "可", "轻松", "地", "将", "'", "pi", "_", "digits", ".", "txt", "'", " ", "替换", "为", "你", "要", "使用", "的", "另", "一个", "文件", "的", "名称", "。", "调用", "open", "(", ")", " ", "后", "，", "将", "一个", "表示", "文件", "及其", "内容", "的", "对象", "存储", "到", "了", "变", "\n", "量", "file", "_", "object", " ", "中", "（", "见", "❷", "）", "。", "这里", "也", "使用", "了", "关键字", "with", " ", "，", "让", "Python", "负责", "妥善", "地", "打开", "和", "关闭", "文件", "。", "为", "查看", "文件", "的", "内容", "，", "我们", "通过", "对", "文件", "对象", "执行", "循环", "来", "遍历", "文件", "中", "的", "每", "一行", "（", "见", "\n", "❸", "）", "。", "\n", "我们", "打印", "每", "一行", "时", "，", "发现", "空白行", "更", "多", "了", "：", "\n", "3.1415926535", "\n", " ", " ", "8979323846", "\n", " ", " ", "2643383279"], ["3.1415926535", "\n", " ", " ", "8979323846", "\n", " ", " ", "2643383279", "\n", "为何", "会", "出现", "这些", "空白行", "呢", "？", "因为", "在", "这个", "文件", "中", "，", "每行", "的", "末尾", "都", "有", "一个", "看不见", "的", "换行符", "，", "而", "print", " ", "语句", "也", "会", "加上", "一个", "换行符", "，", "因此", "每行", "末尾", "都", "有", "两个", "换行符", "：", "一个", "来自", "文件", "，", "另", "一", "\n", "个", "来自", "print", " ", "语句", "。", "要", "消除", "这些", "多余", "的", "空白行", "，", "可", "在", "print", " ", "语句", "中", "使用", "rstrip", "(", ")", " ", "：", "\n", "filename", " ", "=", " ", "'", "pi", "_", "digits", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "for", " ", "line", " ", "in", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "line", ".", "rstrip", "(", ")", ")", "\n", "现在", "，", "输出", "又", "与", "文件", "内容", "完全相同", "了", "：", "\n", "3.1415926535", "\n", " ", " ", "8979323846", "\n", " ", " ", "2643383279", "\n", "10.1", ".", "4", "　", "创建", "一个", "包含", "文件", "各行", "内容", "的", "列表", "\n", "　", "创建", "一个", "包含", "文件", "各行", "内容", "的", "列表", "\n", "使用", "关键字", "with", " ", "时", "，", "open", "(", ")", " ", "返回", "的", "文件", "对象", "只", "在", "with", " ", "代码", "块", "内", "可用", "。", "如果", "要", "在", "with", " ", "代码", "块", "外", "访问", "文件", "的", "内容", "，", "可", "在", "with", " ", "代码", "块", "内", "将", "文件", "的", "各行", "存储", "在", "一个", "列表", "中", "，", "并"], ["在", "with", " ", "代码", "块", "外", "使用", "该", "列表", "：", "你", "可以", "立即", "处理", "文件", "的", "各个", "部分", "，", "也", "可", "推迟", "到", "程序", "后面", "再", "处理", "。", "\n", "下面", "的", "示例", "在", "with", " ", "代码", "块", "中将", "文件", "pi", "_", "digits", ".", "txt", "的", "各行", "存储", "在", "一个", "列表", "中", "，", "再", "在", "with", " ", "代码", "块", "外", "打印", "它们", "：", "\n", " ", " ", "filename", " ", "=", " ", "'", "pi", "_", "digits", ".", "txt", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "❶", " ", " ", " ", " ", " ", "lines", " ", "=", " ", "file", "_", "object", ".", "readlines", "(", ")", "\n", "❷", " ", "for", " ", "line", " ", "in", " ", "lines", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "line", ".", "rstrip", "(", ")", ")", "\n", "❶", "处", "的", "方法", "readlines", "(", ")", " ", "从文件", "中", "读取", "每", "一行", "，", "并", "将", "其", "存储", "在", "一个", "列表", "中", "；", "接下来", "，", "该", "列表", "被", "存储", "到", "变量", "lines", " ", "中", "；", "在", "with", " ", "代码", "块", "外", "，", "我们", "依然", "可以", "使用", "这个", "变量", "。", "在", "❷", "\n", "处", "，", "我们", "使用", "一个", "简单", "的", "for", " ", "循环", "来", "打印", "lines", " ", "中", "的", "各行", "。", "由于", "列表", "lines", " ", "的", "每个", "元素", "都", "对应", "于", "文件", "中", "的", "一行", "，", "因此", "输出", "与", "文件", "内容", "完全一致", "。", "\n", "10.1", ".", "5", "　", "使用", "文件", "的", "内容", "\n", "　", "使用", "文件", "的", "内容"], ["10.1", ".", "5", "　", "使用", "文件", "的", "内容", "\n", "　", "使用", "文件", "的", "内容", "\n", "将", "文件", "读取", "到", "内存", "中后", "，", "就", "可以", "以", "任何", "方式", "使用", "这些", "数据", "了", "。", "下面", "以", "简单", "的", "方式", "使用", "圆周率", "的", "值", "。", "首先", "，", "我们", "将", "创建", "一个", "字符串", "，", "它", "包含", "文件", "中", "存储", "的", "所有", "数字", "，", "且", "没有", "任何", "空", "\n", "格", "：", "\n", "pi", "_", "string", ".", "py", "\n", " ", " ", "filename", " ", "=", " ", "'", "pi", "_", "digits", ".", "txt", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", " ", " ", "lines", " ", "=", " ", "file", "_", "object", ".", "readlines", "(", ")", "\n", "❶", " ", "pi", "_", "string", " ", "=", " ", "'", "'", "\n", "❷", " ", "for", " ", "line", " ", "in", " ", "lines", ":"], ["pi", "_", "string", " ", "+", "=", " ", "line", ".", "rstrip", "(", ")", "\n", "❸", " ", "print", "(", "pi", "_", "string", ")", "\n", " ", " ", "print", "(", "len", "(", "pi", "_", "string", ")", ")", "\n", "就", "像", "前", "一个", "示例", "一样", "，", "我们", "首先", "打开", "文件", "，", "并", "将", "其中", "的", "所有", "行都", "存储", "在", "一个", "列表", "中", "。", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "变量", "—", "—", "pi", "_", "string", " ", "，", "用于", "存储", "圆周率", "的", "值", "。", "接下来", "，", "我们", "使用", "\n", "一个", "循环", "将", "各行", "都", "加入", "pi", "_", "string", " ", "，", "并", "删除", "每行", "末尾", "的", "换行符", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "打印", "这个", "字符串", "及其", "长度", "：", "\n", "3.1415926535", " ", " ", "8979323846", " ", " ", "2643383279", "\n", "36", "\n", "在", "变量", "pi", "_", "string", " ", "存储", "的", "字符串", "中", "，", "包含", "原来", "位于", "每行", "左边", "的", "空格", "，", "为", "删除", "这些", "空格", "，", "可", "使用", "strip", "(", ")", " ", "而", "不是", "rstrip", "(", ")", " ", "：", "\n", "filename", " ", "=", " ", "'", "pi", "_", "30", "_", "digits", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "lines", " ", "=", " ", "file", "_", "object", ".", "readlines", "(", ")", "\n", "pi", "_", "string", " ", "=", " ", "'", "'", "\n", "for", " ", "line", " ", "in", " ", "lines", ":", "\n", " ", " ", " ", " ", "pi", "_", "string", " ", "+", "=", " ", "line", ".", "strip", "(", ")", "\n", "print", "(", "pi", "_", "string", ")"], ["pi", "_", "string", " ", "+", "=", " ", "line", ".", "strip", "(", ")", "\n", "print", "(", "pi", "_", "string", ")", "\n", "print", "(", "len", "(", "pi", "_", "string", ")", ")", "\n", "这样", "，", "我们", "就", "获得", "了", "一个", "这样", "的", "字符串", "：", "它", "包含", "精确", "到", "30", "位", "小数", "的", "圆周率", "值", "。", "这个", "字符串", "长", "32", "字符", "，", "因为", "它", "还", "包含", "整数", "部分", "的", "3", "和", "小数点", "：", "\n", "3.141592653589793238462643383279", "\n", "32", "\n", "注意", "\n", "注意", " ", "　", "读取", "文本文件", "时", "，", "Python", "将", "其中", "的", "所有", "文本", "都", "解读", "为", "字符串", "。", "如果", "你", "读取", "的", "是", "数字", "，", "并", "要", "将", "其", "作为", "数值", "使用", "，", "就", "必须", "使用", "函数", "int", "(", ")", " ", "将", "其", "转换", "为", "整数", "，", "或", "使用", "\n", "函数", "float", "(", ")", " ", "将", "其", "转换", "为", "浮点数", "。", "\n", "10.1", ".", "6", "　", "包含", "一百万", "位", "的", "大型", "文件", "\n", "　", "包含", "一百万", "位", "的", "大型", "文件", "\n", "前面", "我们", "分析", "的", "都", "是", "一个", "只有", "三行", "的", "文本文件", "，", "但", "这些", "代码", "示例", "也", "可", "处理", "大得多", "的", "文件", "。", "如果", "我们", "有", "一个", "文本文件", "，", "其中", "包含", "精确", "到", "小数点", "后", "1", " ", "000", " ", "000", "位", "而", "不是", "30", "位", "的", "圆周率", "\n", "值", "，", "也", "可", "创建", "一个", "包含", "所有", "这些", "数字", "的", "字符串", "。", "为此", "，", "我们", "无需", "对", "前面", "的", "程序", "做", "任何", "修改", "，", "只", "需", "将", "这个", "文件", "传递", "给", "它", "即可", "。", "在", "这里", "，", "我们", "只", "打印", "到", "小数点", "后", "50", "位", "，", "以免", "终端", "为显", "\n", "示", "全部", "1", " ", "000", " ", "000", "位", "而", "不断", "地", "翻滚", "：", "\n", "pi", "_", "string", ".", "py"], ["示", "全部", "1", " ", "000", " ", "000", "位", "而", "不断", "地", "翻滚", "：", "\n", "pi", "_", "string", ".", "py", "\n", "filename", " ", "=", " ", "'", "pi", "_", "million", "_", "digits", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "lines", " ", "=", " ", "file", "_", "object", ".", "readlines", "(", ")", "\n", "pi", "_", "string", " ", "=", " ", "'", "'", "\n", "for", " ", "line", " ", "in", " ", "lines", ":", "\n", " ", " ", " ", " ", "pi", "_", "string", " ", "+", "=", " ", "line", ".", "strip", "(", ")", "\n", "print", "(", "pi", "_", "string", "[", ":", "52", "]", " ", "+", " ", "\"", "...", "\"", ")", "\n", "print", "(", "len", "(", "pi", "_", "string", ")", ")", "\n", "输出", "表明", "，", "我们", "创建", "的", "字符串", "确实", "包含", "精确", "到", "小数点", "后", "1", " ", "000", " ", "000", "位", "的", "圆周率", "值", "：", "\n", "3.14159265358979323846264338327950288419716939937510", "...", "\n", "1000002", "\n", "对于", "你", "可", "处理", "的", "数据量", "，", "Python", "没有", "任何", "限制", "；", "只要", "系统", "的", "内存", "足够", "多", "，", "你", "想", "处理", "多少", "数据", "都", "可以", "。", "\n", "注意", "\n", "注意", " ", "　", "要", "运行", "这个", "程序", "（", "以及", "后面", "的", "众多", "示例", "）", "，", "你", "需要", "从", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncra", "-", "shcourse", "/", " ", "下载", "相关", "的", "资源", "。"], ["10.1", ".", "7", "　", "圆周率", "值中", "包含", "你", "的", "生日", "吗", "\n", "　", "圆周率", "值中", "包含", "你", "的", "生日", "吗", "\n", "我", "一直", "想", "知道", "自己", "的", "生日", "是否", "包含", "在", "圆周率", "值中", "。", "下面", "来", "扩展", "刚才", "编写", "的", "程序", "，", "以", "确定", "某个", "人", "的", "生日", "是否", "包含", "在", "圆周率", "值", "的", "前", "1", " ", "000", " ", "000", "位中", "。", "为此", "，", "可", "将", "生日", "表示", "为", "一个", "由", "数字", "\n", "组成", "的", "字符串", "，", "再", "检查", "这个", "字符串", "是否", "包含", "在", "pi", "_", "string", " ", "中", "：", "\n", " ", " ", "filename", " ", "=", " ", "'", "pi", "_", "million", "_", "digits", ".", "txt", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", " ", " ", "lines", " ", "=", " ", "file", "_", "object", ".", "readlines", "(", ")", "\n", " ", " ", "pi", "_", "string", " ", "=", " ", "'", "'", "\n", " ", " ", "for", " ", "line", " ", "in", " ", "lines", ":", "\n", " ", " ", " ", " ", " ", " ", "pi", "_", "string", " ", "+", "=", " ", "line", ".", "rstrip", "(", ")", "\n", "❶", " ", "birthday", " ", "=", " ", "input", "(", "\"", "Enter", " ", "your", " ", "birthday", ",", " ", "in", " ", "the", " ", "form", " ", "mmddyy", ":", " ", "\"", ")", "\n", "❷", " ", "if", " ", "birthday", " ", "in", " ", "pi", "_", "string", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Your", " ", "birthday", " ", "appears", " ", "in", " ", "the", " ", "first", " ", "million", " ", "digits", " ", "of", " ", "pi", "!", "\"", ")", "\n", " ", " ", "else", ":"], ["else", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Your", " ", "birthday", " ", "does", " ", "not", " ", "appear", " ", "in", " ", "the", " ", "first", " ", "million", " ", "digits", " ", "of", " ", "pi", ".", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "提示", "用户", "输入", "其", "生日", "，", "在", "接下来", "的", "❷", "处", "，", "我们", "检查", "这个", "字符串", "是否", "包含", "在", "pi", "_", "string", " ", "中", "。", "运行", "一下", "这个", "程序", "："], ["Enter", " ", "your", " ", "birthdate", ",", " ", "in", " ", "the", " ", "form", " ", "mmddyy", ":", " ", "120372", "\n", "Your", " ", "birthday", " ", "appears", " ", "in", " ", "the", " ", "first", " ", "million", " ", "digits", " ", "of", " ", "pi", "!", "\n", "我", "的", "生日", "确实", "出现", "在", "了", "圆周率", "值中", "！", "读取", "文件", "的", "内容", "后", "，", "就", "可以", "以", "你", "能", "想到", "的", "任何", "方式", "对", "其", "进行", "分析", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "10", "-", "1", " ", "Python", "学习", "笔记", "\n", "学习", "笔记", " ", "：", "在", "文本编辑", "器中", "新建", "一个", "文件", "，", "写", "几句话", "来", "总结", "一下", "你", "至此", "学到", "的", "Python", "知识", "，", "其中", "每", "一行", "都", "以", "“", "In", " ", "Python", " ", "you", " ", "can", "”", "打头", "。", "将", "这个", "文件", "命名", "为", "\n", "learning", "_", "python", ".", "txt", "，", "并", "将", "其", "存储", "到", "为", "完成", "本章", "练习", "而", "编写", "的", "程序", "所在", "的", "目录", "中", "。", "编写", "一个", "程序", "，", "它", "读取", "这个", "文件", "，", "并", "将", "你", "所", "写", "的", "内容", "打印", "三次", "：", "第一次", "打印", "时", "读取", "整个", "\n", "文件", "；", "第二次", "打印", "时", "遍历", "文件", "对象", "；", "第三次", "打印", "时", "将", "各行", "存储", "在", "一个", "列表", "中", "，", "再", "在", "with", " ", "代码", "块", "外", "打印", "它们", "。", "\n", "10", "-", "2", " ", "C语言", "学习", "笔记", "\n", "语言", "学习", "笔记", " ", "：", "可", "使用", "方法", "replace", "(", ")", " ", "将", "字符串", "中", "的", "特定", "单词", "都", "替换", "为", "另", "一个", "单词", "。", "下面", "是", "一个", "简单", "的", "示例", "，", "演示", "了", "如何", "将", "句子", "中", "的", "'", "dog", "'", " ", "替换", "为", "'", "cat", "'", "\n", "："], ["：", "\n", ">", ">", ">", " ", "message", " ", "=", " ", "\"", "I", " ", "really", " ", "like", " ", "dogs", ".", "\"", "\n", ">", ">", ">", " ", "message", ".", "replace", "(", "'", "dog", "'", ",", " ", "'", "cat", "'", ")", "\n", "'", "I", " ", "really", " ", "like", " ", "cats", ".", "'", "\n", "读取", "你", "刚", "创建", "的", "文件", "learning", "_", "python", ".", "txt", "中", "的", "每", "一行", "，", "将", "其中", "的", "Python", "都", "替换", "为", "另", "一门", "语言", "的", "名称", "，", "如", "C", "。", "将", "修改", "后", "的", "各行", "都", "打印", "到", "屏幕", "上", "。", "\n", "10.2", "　", "写入", "文件", "\n", "　", "写入", "文件", "\n", "保存", "数据", "的", "最", "简单", "的", "方式", "之一", "是", "将", "其", "写入", "到", "文件", "中", "。", "通过", "将", "输出", "写入", "文件", "，", "即便", "关闭", "包含", "程序", "输出", "的", "终端", "窗口", "，", "这些", "输出", "也", "依然", "存在", "：", "你", "可以", "在", "程序", "结束", "运行", "后", "查看", "这些", "输出", "，", "\n", "可", "与", "别人", "分享", "输出", "文件", "，", "还", "可", "编写程序", "来", "将", "这些", "输出", "读取", "到", "内存", "中", "并", "进行", "处理", "。", "\n", "10.2", ".", "1", "　", "写入", "空", "文件", "\n", "　", "写入", "空", "文件", "\n", "要", "将", "文本", "写入", "文件", "，", "你", "在", "调用", "open", "(", ")", " ", "时", "需要", "提供", "另", "一个", "实参", "，", "告诉", "Python", "你", "要", "写入", "打开", "的", "文件", "。", "为", "明白", "其中", "的", "工作", "原理", "，", "我们", "来", "将", "一条", "简单", "的", "消息", "存储", "到", "文件", "中", "，", "而", "不是", "将", "其", "打", "\n", "印", "到", "屏幕", "上", "：", "\n", "write", "_", "message", ".", "py", "\n", " ", " ", "filename", " ", "=", " ", "'", "programming", ".", "txt", "'", "\n", "❶", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "file", "_", "object", ":"], ["❶", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "❷", " ", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "programming", ".", "\"", ")", "\n", "在", "这个", "示例", "中", "，", "调用", "open", "(", ")", " ", "时", "提供", "了", "两个", "实参", "（", "见", "❶", "）", "。", "第一个", "实参", "也", "是", "要", "打开", "的", "文件", "的", "名称", "；", "第二个", "实参", "（", "'", "w", "'", " ", "）", "告诉", "Python", "，", "我们", "要", "以", "写入", "模式", "\n", "写入", "模式", " ", "打开", "这个", "文件", "。", "打开", "文件", "\n", "时", "，", "可", "指定", "读取", "模式", "\n", "读取", "模式", " ", "（", "'", "r", "'", " ", "）", "、", "写入", "模式", "\n", "写入", "模式", " ", "（", "'", "w", "'", " ", "）", "、", "附加", "模式", "\n", "附加", "模式", " ", "（", "'", "a", "'", " ", "）", "或", "让", "你", "能够", "读取", "和", "写入", "文件", "的", "模式", "（", "'", "r", "+", "'", " ", "）", "。", "如果", "你", "省略", "了", "模式", "实参", "，", "Python", "将", "以", "默认", "的", "只读", "模式", "打", "\n", "开", "文件", "。", "\n", "如果", "你", "要", "写入", "的", "文件", "不", "存在", "，", "函数", "open", "(", ")", " ", "将", "自动", "创建", "它", "。", "然而", "，", "以", "写入", "（", "'", "w", "'", " ", "）", "模式", "打开", "文件", "时", "千万", "要", "小心", "，", "因为", "如果", "指定", "的", "文件", "已经", "存在", "，", "Python", "将", "在", "返回", "文件", "对象", "前", "清空", "\n", "该", "文件", "。", "\n", "在", "❷", "处", "，", "我们", "使用", "文件", "对象", "的", "方法", "write", "(", ")", " ", "将", "一个", "字符串", "写入", "文件", "。", "这个", "程序", "没有", "终端", "输出", "，", "但", "如果", "你", "打开", "文件", "programming", ".", "txt", "，", "将", "看到", "其中", "包含", "如下", "一行", "内容", "：", "\n", "programming", ".", "txt", "\n", "I", " ", "love", " ", "programming", "."], ["programming", ".", "txt", "\n", "I", " ", "love", " ", "programming", ".", "\n", "相比", "于", "你", "的", "计算机", "中", "的", "其他", "文件", "，", "这个", "文件", "没有", "什么", "不同", "。", "你", "可以", "打开", "它", "、", "在", "其中", "输入", "新", "文本", "、", "复制", "其", "内容", "、", "将", "内容", "粘贴", "到", "其中", "等", "。", "\n", "注意", "\n", "注意", " ", "　", "Python", "只能", "将", "字符串", "写入", "文本文件", "。", "要", "将", "数值数据", "存储", "到", "文本文件", "中", "，", "必须", "先", "使用", "函数", "str", "(", ")", " ", "将", "其", "转换", "为", "字符串", "格式", "。", "\n", "10.2", ".", "2", "　", "写入", "多行", "\n", "　", "写入", "多行", "\n", "函数", "write", "(", ")", " ", "不会", "在", "你", "写入", "的", "文本", "末尾", "添加", "换行符", "，", "因此", "如果", "你", "写入", "多行", "时", "没有", "指定", "换行符", "，", "文件", "看起来", "可能", "不是", "你", "希望", "的", "那样", "：", "\n", "filename", " ", "=", " ", "'", "programming", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "programming", ".", "\"", ")", "\n", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "creating", " ", "new", " ", "games", ".", "\"", ")", "\n", "如果", "你", "打开", "programming", ".", "txt", "，", "将", "发现", "两行", "内容", "挤", "在", "一起", "：", "\n", "I", " ", "love", " ", "programming", ".", "I", " ", "love", " ", "creating", " ", "new", " ", "games", "."], ["I", " ", "love", " ", "programming", ".", "I", " ", "love", " ", "creating", " ", "new", " ", "games", ".", "\n", "要", "让", "每个", "字符串", "都", "单独", "占", "一行", "，", "需要", "在", "write", "(", ")", " ", "语句", "中", "包含", "换行符", "：", "\n", "filename", " ", "=", " ", "'", "programming", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "programming", ".", "\\", "n", "\"", ")", "\n", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "creating", " ", "new", " ", "games", ".", "\\", "n", "\"", ")", "\n", "现在", "，", "输出", "出现", "在", "不同", "行中", "："], ["I", " ", "love", " ", "programming", ".", "\n", "I", " ", "love", " ", "creating", " ", "new", " ", "games", ".", "\n", "像", "显示", "到", "终端", "的", "输出", "一样", "，", "还", "可以", "使用", "空格", "、", "制表符", "和", "空行", "来", "设置", "这些", "输出", "的", "格式", "。", "\n", "10.2", ".", "3", "　", "附加", "到", "文件", "\n", "　", "附加", "到", "文件", "\n", "如果", "你", "要", "给", "文件", "添加", "内容", "，", "而", "不是", "覆盖", "原有", "的", "内容", "，", "可以", "附加", "模式", "\n", "附加", "模式", " ", "打开", "文件", "。", "你", "以", "附加", "模式", "打开", "文件", "时", "，", "Python", "不会", "在", "返回", "文件", "对象", "前", "清空", "文件", "，", "而", "你", "写入", "到", "文件", "的", "行", "都", "将", "添加", "\n", "到", "文件", "末尾", "。", "如果", "指定", "的", "文件", "不", "存在", "，", "Python", "将", "为", "你", "创建", "一个", "空", "文件", "。", "\n", "下面", "来", "修改", "write", "_", "message", ".", "py", "，", "在", "既有", "文件", "programming", ".", "txt", "中", "再", "添加", "一些", "你", "酷爱", "编程", "的", "原因", "：", "\n", "write", "_", "message", ".", "py", "\n", " ", " ", "filename", " ", "=", " ", "'", "programming", ".", "txt", "'", "\n", "❶", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "a", "'", ")", " ", "as", " ", "file", "_", "object", ":", "\n", "❷", " ", " ", " ", " ", " ", "file", "_", "object", ".", "write", "(", "\"", "I", " ", "also", " ", "love", " ", "finding", " ", "meaning", " ", "in", " ", "large", " ", "datasets", ".", "\\", "n", "\"", ")"], ["file", "_", "object", ".", "write", "(", "\"", "I", " ", "love", " ", "creating", " ", "apps", " ", "that", " ", "can", " ", "run", " ", "in", " ", "a", " ", "browser", ".", "\\", "n", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "打开", "文件", "时", "指定", "了", "实参", "'", "a", "'", " ", "，", "以便", "将", "内容", "附加", "到", "文件", "末尾", "，", "而", "不是", "覆盖文件", "原来", "的", "内容", "。", "在", "❷", "处", "，", "我们", "又", "写入", "了", "两行", "，", "它们", "被", "添加", "到", "文件", "programming", ".", "txt", "末尾", "：", "\n", "programming", ".", "txt", "\n", "I", " ", "love", " ", "programming", ".", "\n", "I", " ", "love", " ", "creating", " ", "new", " ", "games", ".", "\n", "I", " ", "also", " ", "love", " ", "finding", " ", "meaning", " ", "in", " ", "large", " ", "datasets", ".", "\n", "I", " ", "love", " ", "creating", " ", "apps", " ", "that", " ", "can", " ", "run", " ", "in", " ", "a", " ", "browser", ".", "\n", "最终", "的", "结果", "是", "，", "文件", "原来", "的", "内容", "还", "在", "，", "它们", "后面", "是", "我们", "刚", "添加", "的", "内容", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "10", "-", "3", " ", "访客", "\n", "访客", " ", "：", "编写", "一个", "程序", "，", "提示", "用户", "输入", "其", "名字", "；", "用户", "作出", "响应", "后", "，", "将", "其", "名字", "写入", "到", "文件", "guest", ".", "txt", "中", "。", "\n", "10", "-", "4", " ", "访客", "名单"], ["10", "-", "4", " ", "访客", "名单", "\n", "访客", "名单", " ", "：", "编写", "一个", "while", " ", "循环", "，", "提示", "用户", "输入", "其", "名字", "。", "用户", "输入", "其", "名字", "后", "，", "在", "屏幕", "上", "打印", "一句", "问候语", "，", "并", "将", "一条", "访问", "记录", "添加", "到", "文件", "guest", "_", "book", ".", "txt", "中", "。", "确保", "这", "\n", "个", "文件", "中", "的", "每条", "记录", "都", "独占", "一行", "。", "\n", "10", "-", "5", " ", "关于", "编程", "的", "调查", "\n", "关于", "编程", "的", "调查", " ", "：", "编写", "一个", "while", " ", "循环", "，", "询问", "用户", "为何", "喜欢", "编程", "。", "每当", "用户", "输入", "一个", "原因", "后", "，", "都", "将", "其", "添加", "到", "一个", "存储", "所有", "原因", "的", "文件", "中", "。", "\n", "10.3", "　", "异常", "\n", "　", "异常", "\n", "Python", "使用", "被", "称为", "异常", "\n", "异常", " ", "的", "特殊", "对象", "来", "管理程序", "执行", "期间", "发生", "的", "错误", "。", "每当", "发生", "让", "Python", "不知所措", "的", "错误", "时", "，", "它", "都", "会", "创建", "一个", "异常", "对象", "。", "如果", "你", "编写", "了", "处理", "该", "异常", "的", "代码", "，", "程序", "将", "继", "\n", "续", "运行", "；", "如果", "你", "未", "对", "异常", "进行", "处理", "，", "程序", "将", "停止", "，", "并", "显示", "一个", "traceback", "，", "其中", "包含", "有关", "异常", "的", "报告", "。", "\n", "异常", "是", "使用", "try", "-", "except", " ", "代码", "块", "处理", "的", "。", "try", "-", "except", " ", "代码", "块", "让", "Python", "执行", "指定", "的", "操作", "，", "同时", "告诉", "Python", "发生", "异常", "时", "怎么办", "。", "使用", "了", "try", "-", "except", " ", "代码", "块", "时", "，", "即便", "出现异常", "，", "\n", "程序", "也", "将", "继续", "运行", "：", "显示", "你", "编写", "的", "友好", "的", "错误", "消息", "，", "而", "不是", "令", "用户", "迷惑", "的", "traceback", "。", "\n", "10.3", ".", "1", "　", "处理"], ["10.3", ".", "1", "　", "处理", "\n", "　", "处理", "ZeroDivisionError", " ", "异常", "\n", "异常", "\n", "下面", "来看", "一种", "导致", "Python", "引发", "异常", "的", "简单", "错误", "。", "你", "可能", "知道", "不能", "将", "一个", "数字", "除以", "0", "，", "但", "我们", "还是", "让", "Python", "这样", "做", "吧", "：", "\n", "division", ".", "py", "\n", "print", "(", "5", "/", "0", ")", "\n", "显然", "，", "Python", "无法", "这样", "做", "，", "因此", "你", "将", "看到", "一个", "traceback", "：", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "File", " ", "\"", "division", ".", "py", "\"", ",", " ", "line", " ", "1", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "5", "/", "0", ")", "\n", "❶", " ", "ZeroDivisionError", ":", " ", "division", " ", "by", " ", "zero", "\n", "在", "上述", "traceback", "中", "，", "❶", "处", "指出", "的", "错误", "ZeroDivisionError", " ", "是", "一个", "异常", "对象", "。", "Python", "无法", "按", "你", "的", "要求", "做时", "，", "就", "会", "创建", "这种", "对象", "。", "在", "这种", "情况", "下", "，", "Python", "将", "停止", "运行", "程序", "，", "并", "指出", "\n", "引发", "了", "哪种", "异常", "，", "而", "我们", "可", "根据", "这些", "信息", "对", "程序", "进行", "修改", "。", "下面", "我们", "将", "告诉", "Python", "，", "发生", "这种", "错误", "时", "怎么办", "；", "这样", "，", "如果", "再次发生", "这样", "的", "错误", "，", "我们", "就", "有备无患", "了", "。", "\n", "10.3", ".", "2", "　", "使用", "\n", "　", "使用", "try", "-", "except", " ", "代码", "块", "\n", "代码", "块"], ["10.3", ".", "2", "　", "使用", "\n", "　", "使用", "try", "-", "except", " ", "代码", "块", "\n", "代码", "块", "\n", "当", "你", "认为", "可能", "发生", "了", "错误", "时", "，", "可", "编写", "一个", "try", "-", "except", " ", "代码", "块", "来", "处理", "可能", "引发", "的", "异常", "。", "你", "让", "Python", "尝试", "运行", "一些", "代码", "，", "并", "告诉", "它", "如果", "这些", "代码", "引发", "了", "指定", "的", "异常", "，", "该", "怎么办", "。", "\n", "处理", "ZeroDivisionError", " ", "异常", "的", "try", "-", "except", " ", "代码", "块", "类似", "于", "下面", "这样", "：", "\n", "try", ":", "\n", " ", " ", " ", " ", "print", "(", "5", "/", "0", ")", "\n", "except", " ", "ZeroDivisionError", ":", "\n", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "can", "'", "t", " ", "divide", " ", "by", " ", "zero", "!", "\"", ")", "\n", "我们", "将", "导致", "错误", "的", "代码", "行", "print", "(", "5", "/", "0", ")", " ", "放在", "了", "一个", "try", " ", "代码", "块", "中", "。", "如果", "try", " ", "代码", "块", "中", "的", "代码运行", "起来", "没有", "问题", "，", "Python", "将", "跳", "过", "except", " ", "代码", "块", "；", "如果", "try", " ", "代码", "块", "中", "的", "代码", "导致", "了", "\n", "错误", "，", "Python", "将", "查找", "这样", "的", "except", " ", "代码", "块", "，", "并", "运行", "其中", "的", "代码", "，", "即", "其中", "指定", "的", "错误", "与", "引发", "的", "错误", "相同", "。"], ["在", "这个", "示例", "中", "，", "try", " ", "代码", "块", "中", "的", "代码", "引发", "了", "ZeroDivisionError", " ", "异常", "，", "因此", "Python", "指出", "了", "该", "如何", "解决问题", "的", "except", " ", "代码", "块", "，", "并", "运行", "其中", "的", "代码", "。", "这样", "，", "用户", "看到", "的", "是", "一条", "友", "\n", "好", "的", "错误", "消息", "，", "而", "不是", "traceback", "：", "\n", "You", " ", "can", "'", "t", " ", "divide", " ", "by", " ", "zero", "!", "\n", "如果", "try", "-", "except", " ", "代码", "块", "后面", "还有", "其他", "代码", "，", "程序", "将", "接着", "运行", "，", "因为", "已经", "告诉", "了", "Python", "如何", "处理", "这种", "错误", "。", "下面", "来看", "一个", "捕获", "错误", "后", "程序", "将", "继续", "运行", "的", "示例", "。", "\n", "10.3", ".", "3", "　", "使用", "异常", "避免", "崩溃", "\n", "　", "使用", "异常", "避免", "崩溃", "\n", "发生", "错误", "时", "，", "如果", "程序", "还有", "工作", "没有", "完成", "，", "妥善", "地", "处理错误", "就", "尤其", "重要", "。", "这种", "情况", "经常", "会", "出现", "在", "要求", "用户", "提供", "输入", "的", "程序", "中", "；", "如果", "程序", "能够", "妥善", "地", "处理", "无效", "输入", "，", "就", "能", "再", "提示", "用", "\n", "户", "提供", "有效", "输入", "，", "而", "不至于", "崩溃", "。", "\n", "下面", "来", "创建", "一个", "只", "执行", "除法", "运算", "的", "简单", "计算器", "：", "\n", "division", ".", "py", "\n", " ", " ", "print", "(", "\"", "Give", " ", "me", " ", "two", " ", "numbers", ",", " ", "and", " ", "I", "'", "ll", " ", "divide", " ", "them", ".", "\"", ")", "\n", " ", " ", "print", "(", "\"", "Enter", " ", "'", "q", "'", " ", "to", " ", "quit", ".", "\"", ")", "\n", " ", " ", "while", " ", "True", ":"], ["print", "(", "\"", "Enter", " ", "'", "q", "'", " ", "to", " ", "quit", ".", "\"", ")", "\n", " ", " ", "while", " ", "True", ":", "\n", "❶", " ", " ", " ", " ", " ", "first", "_", "number", " ", "=", " ", "input", "(", "\"", "\\", "nFirst", " ", "number", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "first", "_", "number", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", "❷", " ", " ", " ", " ", " ", "second", "_", "number", " ", "=", " ", "input", "(", "\"", "Second", " ", "number", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "second", "_", "number", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", "❸", " ", " ", " ", " ", " ", "answer", " ", "=", " ", "int", "(", "first", "_", "number", ")", " ", "/", " ", "int", "(", "second", "_", "number", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "answer", ")", "\n", "在", "❶", "处", "，", "这个", "程序", "提示", "用户", "输入", "一个", "数字", "，", "并", "将", "其", "存储", "到", "变量", "first", "_", "number", " ", "中", "；", "如果", "用户", "输入", "的", "不是", "表示", "退出", "的", "q", "，", "就", "再", "提示", "用户", "输入", "一个", "数字", "，", "并", "将", "其", "存储", "到", "变", "\n", "量", "second", "_", "number", " ", "中", "（", "见", "❷", "）", "。", "接下来", "，", "我们", "计算", "这", "两个", "数字", "的", "商", "（", "即", "answer", " ", "，", "见", "❸", "）", "。", "这个", "程序", "没有", "采取任何", "处理错误", "的", "措施", "，", "因此", "让", "它", "执行", "除数", "为", "0", "的", "除法", "运算", "时", "，", "它", "\n", "将", "崩溃", "："], ["将", "崩溃", "：", "\n", "Give", " ", "me", " ", "two", " ", "numbers", ",", " ", "and", " ", "I", "'", "ll", " ", "divide", " ", "them", ".", "\n", "Enter", " ", "'", "q", "'", " ", "to", " ", "quit", ".", "\n", "First", " ", "number", ":", " ", "5", "\n", "Second", " ", "number", ":", " ", "0", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "division", ".", "py", "\"", ",", " ", "line", " ", "9", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "answer", " ", "=", " ", "int", "(", "first", "_", "number", ")", " ", "/", " ", "int", "(", "second", "_", "number", ")", "\n", "ZeroDivisionError", ":", " ", "division", " ", "by", " ", "zero", "\n", "程序", "崩溃", "可", "不好", "，", "但", "让", "用户", "看到", "traceback", "也", "不是", "好", "主意", "。", "不", "懂", "技术", "的", "用户", "会", "被", "它们", "搞糊涂", "，", "而且", "如果", "用户", "怀有", "恶意", "，", "他会", "通过", "traceback", "获悉", "你", "不", "希望", "他", "知道", "的", "信息", "。", "例如", "，", "他", "将", "知", "\n", "道", "你", "的", "程序", "文件", "的", "名称", "，", "还", "将", "看到", "部分", "不能", "正确", "运行", "的", "代码", "。", "有时候", "，", "训练有素", "的", "攻击者", "可", "根据", "这些", "信息", "判断", "出", "可", "对", "你", "的", "代码", "发起", "什么样", "的", "攻击", "。", "\n", "10.3", ".", "4", "　", "\n", "　", "else", " ", "代码", "块", "\n", "代码", "块"], ["10.3", ".", "4", "　", "\n", "　", "else", " ", "代码", "块", "\n", "代码", "块", "\n", "通过", "将", "可能", "引发", "错误", "的", "代码", "放在", "try", "-", "except", " ", "代码", "块", "中", "，", "可", "提高", "这个", "程序", "抵御", "错误", "的", "能力", "。", "错误", "是", "执行", "除法", "运算", "的", "代码", "行", "导致", "的", "，", "因此", "我们", "需要", "将", "它", "放到", "try", "-", "except", " ", "代码", "块", "\n", "中", "。", "这个", "示例", "还", "包含", "一个", "else", " ", "代码", "块", "；", "依赖于", "try", " ", "代码", "块", "成功", "执行", "的", "代码", "都", "应", "放到", "else", " ", "代码", "块", "中", "：", "\n", " ", " ", "print", "(", "\"", "Give", " ", "me", " ", "two", " ", "numbers", ",", " ", "and", " ", "I", "'", "ll", " ", "divide", " ", "them", ".", "\"", ")", "\n", " ", " ", "print", "(", "\"", "Enter", " ", "'", "q", "'", " ", "to", " ", "quit", ".", "\"", ")", "\n", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", "first", "_", "number", " ", "=", " ", "input", "(", "\"", "\\", "nFirst", " ", "number", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "first", "_", "number", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", " ", " ", "second", "_", "number", " ", "=", " ", "input", "(", "\"", "Second", " ", "number", ":", " ", "\"", ")", "\n", "❶", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "answer", " ", "=", " ", "int", "(", "first", "_", "number", ")", " ", "/", " ", "int", "(", "second", "_", "number", ")", "\n", "❷", " ", " ", " ", " ", " ", "except", " ", "ZeroDivisionError", ":"], ["❷", " ", " ", " ", " ", " ", "except", " ", "ZeroDivisionError", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "You", " ", "can", "'", "t", " ", "divide", " ", "by", " ", "0", "!", "\"", ")", "\n", "❸", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "answer", ")", "\n", "我们", "让", "Python", "尝试", "执行", "try", " ", "代码", "块", "中", "的", "除法", "运算", "（", "见", "❶", "）", "，", "这个", "代码", "块", "只", "包含", "可能", "导致", "错误", "的", "代码", "。", "依赖于", "try", " ", "代码", "块", "成功", "执行", "的", "代码", "都", "放在", "else", " ", "代码", "块", "中", "；", "在", "这个", "示例", "中", "，", "如", "\n", "果", "除法", "运算", "成功", "，", "我们", "就", "使用", "else", " ", "代码", "块", "来", "打印", "结果", "（", "见", "❸", "）", "。", "\n", "except", " ", "代码", "块", "告诉", "Python", "，", "出现", "ZeroDivisionError", " ", "异常", "时该", "怎么办", "（", "见", "❷", "）", "。", "如果", "try", " ", "代码", "块", "因除", "零", "错误", "而", "失败", "，", "我们", "就", "打印", "一条", "友好", "的", "消息", "，", "告诉", "用户", "如何", "避免", "这种", "错", "\n", "误", "。", "程序", "将", "继续", "运行", "，", "用户", "根本", "看不到", "traceback", "：", "\n", "Give", " ", "me", " ", "two", " ", "numbers", ",", " ", "and", " ", "I", "'", "ll", " ", "divide", " ", "them", ".", "\n", "Enter", " ", "'", "q", "'", " ", "to", " ", "quit", ".", "\n", "First", " ", "number", ":", " ", "5", "\n", "Second", " ", "number", ":", " ", "0", "\n", "You", " ", "can", "'", "t", " ", "divide", " ", "by", " ", "0", "!", "\n", "First", " ", "number", ":", " ", "5", "\n", "Second", " ", "number", ":", " ", "2", "\n", "2.5"], ["First", " ", "number", ":", " ", "5", "\n", "Second", " ", "number", ":", " ", "2", "\n", "2.5", "\n", "First", " ", "number", ":", " ", "q", "\n", "try", "-", "except", "-", "else", " ", "代码", "块", "的", "工作", "原理", "大致", "如下", "：", "Python", "尝试", "执行", "try", " ", "代码", "块", "中", "的", "代码", "；", "只有", "可能", "引发", "异常", "的", "代码", "才", "需要", "放在", "try", " ", "语句", "中", "。", "有时候", "，", "有", "一些", "仅", "在", "try", " ", "代码", "块", "成功", "\n", "执行", "时才", "需要", "运行", "的", "代码", "；", "这些", "代码", "应", "放在", "else", " ", "代码", "块", "中", "。", "except", " ", "代码", "块", "告诉", "Python", "，", "如果", "它", "尝试", "运行", "try", " ", "代码", "块", "中", "的", "代码", "时", "引发", "了", "指定", "的", "异常", "，", "该", "怎么办", "。", "\n", "通过", "预测", "可能", "发生", "错误", "的", "代码", "，", "可", "编写", "健壮", "的", "程序", "，", "它们", "即便", "面临", "无效", "数据", "或", "缺少", "资源", "，", "也", "能", "继续", "运行", "，", "从而", "能够", "抵御", "无意", "的", "用户", "错误", "和", "恶意", "的", "攻击", "。"], ["10.3", ".", "5", "　", "处理", "\n", "　", "处理", "FileNotFoundError", " ", "异常", "\n", "异常", "\n", "使用", "文件", "时", "，", "一种", "常见", "的", "问题", "是", "找", "不到", "文件", "：", "你", "要", "查找", "的", "文件", "可能", "在", "其他", "地方", "、", "文件名", "可能", "不", "正确", "或者", "这个", "文件", "根本", "就", "不", "存在", "。", "对于", "所有", "这些", "情形", "，", "都", "可", "使用", "try", "-", "except", " ", "代码", "\n", "块", "以", "直观", "的", "方式", "进行", "处理", "。", "\n", "我们", "来", "尝试", "读取", "一个", "不", "存在", "的", "文件", "。", "下面", "的", "程序", "尝试", "读取", "文件", "alice", ".", "txt", "的", "内容", "，", "但", "我", "没有", "将", "这个", "文件", "存储", "在", "alice", ".", "py", "所在", "的", "目录", "中", "：", "\n", "alice", ".", "py", "\n", "filename", " ", "=", " ", "'", "alice", ".", "txt", "'", "\n", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", "contents", " ", "=", " ", "f", "_", "obj", ".", "read", "(", ")", "\n", "Python", "无法", "读取", "不", "存在", "的", "文件", "，", "因此", "它", "引发", "一个", "异常", "：", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "alice", ".", "py", "\"", ",", " ", "line", " ", "3", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "FileNotFoundError", ":", " ", "[", "Errno", " ", "2", "]", " ", "No", " ", "such", " ", "file", " ", "or", " ", "directory", ":", " ", "'", "alice", ".", "txt", "'"], ["在", "上述", "traceback", "中", "，", "最后", "一行", "报告", "了", "FileNotFoundError", " ", "异常", "，", "这是", "Python", "找", "不到", "要", "打开", "的", "文件", "时", "创建", "的", "异常", "。", "在", "这个", "示例", "中", "，", "这个", "错误", "是", "函数", "open", "(", ")", " ", "导致", "的", "，", "因此", "要", "处理", "\n", "这个", "错误", "，", "必须", "将", "try", " ", "语句", "放在", "包含", "open", "(", ")", " ", "的", "代码", "行", "之前", "：", "\n", "filename", " ", "=", " ", "'", "alice", ".", "txt", "'", "\n", "try", ":", "\n", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "contents", " ", "=", " ", "f", "_", "obj", ".", "read", "(", ")", "\n", "except", " ", "FileNotFoundError", ":", "\n", " ", " ", " ", " ", "msg", " ", "=", " ", "\"", "Sorry", ",", " ", "the", " ", "file", " ", "\"", " ", "+", " ", "filename", " ", "+", " ", "\"", " ", "does", " ", "not", " ", "exist", ".", "\"", "\n", " ", " ", " ", " ", "print", "(", "msg", ")", "\n", "在", "这个", "示例", "中", "，", "try", " ", "代码", "块", "引发", "FileNotFoundError", " ", "异常", "，", "因此", "Python", "找出", "与", "该", "错误", "匹配", "的", "except", " ", "代码", "块", "，", "并", "运行", "其中", "的", "代码", "。", "最终", "的", "结果", "是", "显示", "一条", "友好", "的", "错误", "消息", "，", "而", "\n", "不是", "traceback", "：", "\n", "Sorry", ",", " ", "the", " ", "file", " ", "alice", ".", "txt", " ", "does", " ", "not", " ", "exist", "."], ["Sorry", ",", " ", "the", " ", "file", " ", "alice", ".", "txt", " ", "does", " ", "not", " ", "exist", ".", "\n", "如果", "文件", "不", "存在", "，", "这个", "程序", "什么", "都", "不", "做", "，", "因此", "错误处理", "代码", "的", "意义", "不", "大", "。", "下面", "来", "扩展", "这个", "示例", "，", "看看", "在", "你", "使用", "多个", "文件", "时", "，", "异常", "处理", "可", "提供", "什么样", "的", "帮助", "。", "\n", "10.3", ".", "6", "　", "分析", "文本", "\n", "　", "分析", "文本", "\n", "你", "可以", "分析", "包含", "整本书", "的", "文本文件", "。", "很多", "经典", "文学作品", "都", "是", "以", "简单", "文本文件", "的", "方式", "提供", "的", "，", "因为", "它们", "不", "受", "版权", "限制", "。", "本", "节", "使用", "的", "文本", "来自", "项目", "Gutenberg", "（", "http", ":", "/", "/", "gutenberg", ".", "org", "/", " ", "）", "，", "\n", "这个", "项目", "提供", "了", "一系列", "不", "受", "版权", "限制", "的", "文学作品", "，", "如果", "你", "要", "在", "编程", "项目", "中", "使用", "文学", "文本", "，", "这是", "一个", "很", "不错", "的", "资源", "。", "\n", "下面", "来", "提取", "童话", " ", "Alice", " ", "in", " ", "Wonderland", " ", "的", "文本", "，", "并", "尝试", "计算", "它", "包含", "多少", "个", "单词", "。", "我们", "将", "使用", "方法", "split", "(", ")", " ", "，", "它", "根据", "一个", "字符串", "创建", "一个", "单词", "列表", "。", "下面", "是", "对", "只", "包含", "童话", "名", "\"", "Alice", "\n", "in", " ", "Wonderland", "\"", " ", "的", "字符串", "调用", "方法", "split", "(", ")", " ", "的", "结果", "：", "\n", ">", ">", ">", " ", "title", " ", "=", " ", "\"", "Alice", " ", "in", " ", "Wonderland", "\"", "\n", ">", ">", ">", " ", "title", ".", "split", "(", ")", "\n", "[", "'", "Alice", "'", ",", " ", "'", "in", "'", ",", " ", "'", "Wonderland", "'", "]"], [">", ">", ">", " ", "title", ".", "split", "(", ")", "\n", "[", "'", "Alice", "'", ",", " ", "'", "in", "'", ",", " ", "'", "Wonderland", "'", "]", "\n", "方法", "split", "(", ")", " ", "以", "空格", "为", "分隔符", "将", "字符串", "分拆", "成", "多个", "部分", "，", "并", "将", "这些", "部分", "都", "存储", "到", "一个", "列表", "中", "。", "结果", "是", "一个", "包含", "字符串", "中", "所有", "单词", "的", "列表", "，", "虽然", "有些", "单词", "可能", "包含", "标点", "。", "为", "计算", "\n", "Alice", " ", "in", " ", "Wonderland", " ", "包含", "多少", "个", "单词", "，", "我们", "将", "对", "整篇", "小说", "调用", "split", "(", ")", " ", "，", "再", "计算", "得到", "的", "列表", "包含", "多少", "个", "元素", "，", "从而", "确定", "整篇", "童话", "大致", "包含", "多少", "个", "单词", "：", "\n", " ", " ", "filename", " ", "=", " ", "'", "alice", ".", "txt", "'", "\n", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "contents", " ", "=", " ", "f", "_", "obj", ".", "read", "(", ")", "\n", " ", " ", "except", " ", "FileNotFoundError", ":", "\n", " ", " ", " ", " ", " ", " ", "msg", " ", "=", " ", "\"", "Sorry", ",", " ", "the", " ", "file", " ", "\"", " ", "+", " ", "filename", " ", "+", " ", "\"", " ", "does", " ", "not", " ", "exist", ".", "\"", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "msg", ")", "\n", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "计算", "文件", "大致", "包含", "多少", "个", "单词", "\n", "❶", " ", " ", " ", " ", " ", "words", " ", "=", " ", "contents", ".", "split", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", "num", "_", "words", " ", "=", " ", "len", "(", "words", ")"], ["❷", " ", " ", " ", " ", " ", "num", "_", "words", " ", "=", " ", "len", "(", "words", ")", "\n", "❸", " ", " ", " ", " ", " ", "print", "(", "\"", "The", " ", "file", " ", "\"", " ", "+", " ", "filename", " ", "+", " ", "\"", " ", "has", " ", "about", " ", "\"", " ", "+", " ", "str", "(", "num", "_", "words", ")", " ", "+", " ", "\"", " ", "words", ".", "\"", ")", "\n", "我们", "把", "文件", "alice", ".", "txt", "移到", "了", "正确", "的", "目录", "中", "，", "让", "try", " ", "代码", "块", "能够", "成功", "地", "执行", "。", "在", "❶", "处", "，", "我们", "对", "变量", "contents", " ", "（", "它", "现在", "是", "一个", "长长的", "字符串", "，", "包含", "童话", " ", "Alice", " ", "in", " ", "Wonderland", " ", "的", "全部", "文", "\n", "本", "）", "调用", "方法", "split", "(", ")", " ", "，", "以", "生成", "一个", "列表", "，", "其中", "包含", "这部", "童话", "中", "的", "所有", "单词", "。", "当", "我们", "使用", "len", "(", ")", " ", "来", "确定", "这个", "列表", "的", "长度", "时", "，", "就", "知道", "了", "原始", "字符串", "大致", "包含", "多少", "个", "单词", "（", "见", "\n", "❷", "）", "。", "在", "❸", "处", "，", "我们", "打印", "一条", "消息", "，", "指出", "文件", "包含", "多少", "个", "单词", "。", "这些", "代码", "都", "放在", "else", " ", "代码", "块", "中", "，", "因为", "仅当", "try", " ", "代码", "块", "成功", "执行", "时才", "执行", "它们", "。", "输出", "指出", "了", "文件", "alice", ".", "txt", "包含", "多少", "\n", "个", "单词", "：", "\n", "The", " ", "file", " ", "alice", ".", "txt", " ", "has", " ", "about", " ", "29461", " ", "words", ".", "\n", "这个", "数字", "有点", "大", "，", "因为", "这里", "使用", "的", "文本文件", "包含", "出版商", "提供", "的", "额外", "信息", "，", "但", "与", "童话", " ", "Alice", " ", "in", " ", "Wonderland", " ", "的", "长度", "相当", "一致", "。", "\n", "10.3", ".", "7", "　", "使用", "多个", "文件"], ["10.3", ".", "7", "　", "使用", "多个", "文件", "\n", "　", "使用", "多个", "文件"], ["下面", "多", "分析", "几本书", "。", "这样", "做", "之前", "，", "我们", "先", "将", "这个", "程序", "的", "大部分", "代码", "移", "到", "一个", "名为", "count", "_", "words", "(", ")", " ", "的", "函数", "中", "，", "这样", "对", "多", "本书", "进行", "分析", "时", "将", "更", "容易", "：", "\n", "word", "_", "count", ".", "py", "\n", " ", " ", "def", " ", "count", "_", "words", "(", "filename", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "\"", "\"", "\"", "计算", "一个", "文件", "大致", "包含", "多少", "个", "单词", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "contents", " ", "=", " ", "f", "_", "obj", ".", "read", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "except", " ", "FileNotFoundError", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "msg", " ", "=", " ", "\"", "Sorry", ",", " ", "the", " ", "file", " ", "\"", " ", "+", " ", "filename", " ", "+", " ", "\"", " ", "does", " ", "not", " ", "exist", ".", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "msg", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "计算", "文件", "大致", "包含", "多少", "个", "单词", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "words", " ", "=", " ", "contents", ".", "split", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "num", "_", "words", " ", "=", " ", "len", "(", "words", ")"], ["num", "_", "words", " ", "=", " ", "len", "(", "words", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "The", " ", "file", " ", "\"", " ", "+", " ", "filename", " ", "+", " ", "\"", " ", "has", " ", "about", " ", "\"", " ", "+", " ", "str", "(", "num", "_", "words", ")", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", " ", "words", ".", "\"", ")", "\n", " ", " ", "filename", " ", "=", " ", "'", "alice", ".", "txt", "'", "\n", " ", " ", "count", "_", "words", "(", "filename", ")", "\n", "这些", "代码", "大都", "与", "原来", "一样", "，", "我们", "只是", "将", "它们", "移到", "了", "函数", "count", "_", "words", "(", ")", " ", "中", "，", "并", "增加", "了", "缩进", "量", "。", "修改", "程序", "的", "同时", "更新", "注释", "是", "个", "不错", "的", "习惯", "，", "因此", "我们", "将", "注释", "改成", "了", "文档", "字符串", "，", "\n", "并", "稍微", "调整", "了", "一下", "措辞", "（", "见", "❶", "）", "。", "\n", "现在", "可以", "编写", "一个", "简单", "的", "循环", "，", "计算", "要", "分析", "的", "任何", "文本", "包含", "多少", "个", "单词", "了", "。", "为此", "，", "我们", "将要", "分析", "的", "文件", "的", "名称", "存储", "在", "一个", "列表", "中", "，", "然后", "对", "列表", "中", "的", "每个", "文件", "都", "调", "\n", "用", "count", "_", "words", "(", ")", " ", "。", "我们", "将", "尝试", "计算", " ", "Alice", " ", "in", " ", "Wonderland", " ", "、", "Siddhartha", " ", "、", "Moby", " ", "Dick", " ", "和", " ", "Little", " ", "Women", " ", "分别", "包含", "多少", "个", "单词", "，", "它们", "都", "不受", "版权", "限制", "。", "我", "故意", "没有", "将", "siddhartha", ".", "txt", "放到"], ["word", "_", "count", ".", "py", "所在", "的", "目录", "中", "，", "让", "你", "能够", "看到", "这个", "程序", "在", "文件", "不", "存在", "时", "处理", "得", "有", "多", "出色", "：", "\n", "def", " ", "count", "_", "words", "(", "filename", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "filenames", " ", "=", " ", "[", "'", "alice", ".", "txt", "'", ",", " ", "'", "siddhartha", ".", "txt", "'", ",", " ", "'", "moby", "_", "dick", ".", "txt", "'", ",", " ", "'", "little", "_", "women", ".", "txt", "'", "]", "\n", "for", " ", "filename", " ", "in", " ", "filenames", ":", "\n", " ", " ", " ", " ", "count", "_", "words", "(", "filename", ")", "\n", "文件", "siddhartha", ".", "txt", "不", "存在", "，", "但", "这", "丝毫", "不", "影响", "这个", "程序处理", "其他", "文件", "：", "\n", "The", " ", "file", " ", "alice", ".", "txt", " ", "has", " ", "about", " ", "29461", " ", "words", ".", "\n", "Sorry", ",", " ", "the", " ", "file", " ", "siddhartha", ".", "txt", " ", "does", " ", "not", " ", "exist", ".", "\n", "The", " ", "file", " ", "moby", "_", "dick", ".", "txt", " ", "has", " ", "about", " ", "215136", " ", "words", ".", "\n", "The", " ", "file", " ", "little", "_", "women", ".", "txt", " ", "has", " ", "about", " ", "189079", " ", "words", "."], ["The", " ", "file", " ", "little", "_", "women", ".", "txt", " ", "has", " ", "about", " ", "189079", " ", "words", ".", "\n", "在", "这个", "示例", "中", "，", "使用", "try", "-", "except", " ", "代码", "块", "提供", "了", "两个", "重要", "的", "优点", "：", "避免", "让", "用户", "看到", "traceback", "；", "让", "程序", "能够", "继续", "分析", "能够", "找到", "的", "其他", "文件", "。", "如果", "不", "捕获", "因找", "不到", "siddhartha", ".", "txt", "而", "引发", "\n", "的", "FileNotFoundError", " ", "异常", "，", "用户", "将", "看到", "完整", "的", "traceback", "，", "而", "程序", "将", "在", "尝试", "分析", " ", "Siddhartha", " ", "后", "停止", "运行", "—", "—", "根本", "不", "分析", " ", "Moby", " ", "Dick", " ", "和", " ", "Little", " ", "Women", " ", "。", "\n", "10.3", ".", "8", "　", "失败", "时", "一声不吭", "\n", "　", "失败", "时", "一声不吭", "\n", "在", "前", "一个", "示例", "中", "，", "我们", "告诉", "用户", "有", "一个", "文件", "找", "不到", "。", "但", "并非", "每次", "捕获", "到", "异常", "时", "都", "需要", "告诉", "用户", "，", "有时候", "你", "希望", "程序", "在", "发生", "异常", "时", "一声不吭", "，", "就", "像", "什么", "都", "没有", "发生", "一样", "继续", "运行", "。", "\n", "要", "让", "程序", "在", "失败", "时", "一声不吭", "，", "可像", "通常", "那样", "编写", "try", " ", "代码", "块", "，", "但", "在", "except", " ", "代码", "块", "中", "明确", "地", "告诉", "Python", "什么", "都", "不要", "做", "。", "Python", "有", "一个", "pass", " ", "语句", "，", "可", "在", "代码", "块", "中", "使用", "它", "来", "让", "Python", "\n", "什么", "都", "不要", "做", "：", "\n", " ", " ", "def", " ", "count", "_", "words", "(", "filename", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "计算", "一个", "文件", "大致", "包含", "多少", "个", "单词", "\"", "\"", "\""], ["\"", "\"", "\"", "计算", "一个", "文件", "大致", "包含", "多少", "个", "单词", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "except", " ", "FileNotFoundError", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pass", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "filenames", " ", "=", " ", "[", "'", "alice", ".", "txt", "'", ",", " ", "'", "siddhartha", ".", "txt", "'", ",", " ", "'", "moby", "_", "dick", ".", "txt", "'", ",", " ", "'", "little", "_", "women", ".", "txt", "'", "]", "\n", " ", " ", "for", " ", "filename", " ", "in", " ", "filenames", ":", "\n", " ", " ", " ", " ", " ", " ", "count", "_", "words", "(", "filename", ")", "\n", "相比", "于", "前", "一个", "程序", "，", "这个", "程序", "唯一", "不同", "的", "地方", "是", "❶", "处", "的", "pass", " ", "语句", "。", "现在", "，", "出现", "FileNotFoundError", " ", "异常", "时", "，", "将", "执行", "except", " ", "代码", "块", "中", "的", "代码", "，", "但", "什么", "都", "不会", "发生", "。", "这种", "错误", "\n", "发生", "时", "，", "不会", "出现", "traceback", "，", "也", "没有", "任何", "输出", "。", "用户", "将", "看到", "存在", "的", "每个", "文件", "包含", "多少", "个", "单词", "，", "但", "没有", "任何迹象", "表明", "有", "一个", "文件", "未找到", "：", "\n", "The", " ", "file", " ", "alice", ".", "txt", " ", "has", " ", "about", " ", "29461", " ", "words", "."], ["The", " ", "file", " ", "alice", ".", "txt", " ", "has", " ", "about", " ", "29461", " ", "words", ".", "\n", "The", " ", "file", " ", "moby", "_", "dick", ".", "txt", " ", "has", " ", "about", " ", "215136", " ", "words", ".", "\n", "The", " ", "file", " ", "little", "_", "women", ".", "txt", " ", "has", " ", "about", " ", "189079", " ", "words", ".", "\n", "pass", " ", "语句", "还", "充当", "了", "占位", "符", "，", "它", "提醒", "你", "在", "程序", "的", "某个", "地方", "什么", "都", "没有", "做", "，", "并且", "以后", "也许", "要", "在", "这里", "做些", "什么", "。", "例如", "，", "在", "这个", "程序", "中", "，", "我们", "可能", "决定", "将", "找", "不到", "的", "文件", "的", "名称", "写入", "到文", "\n", "件", "missing", "_", "files", ".", "txt", "中", "。", "用户", "看不到", "这个", "文件", "，", "但", "我们", "可以", "读取", "这个", "文件", "，", "进而", "处理", "所有", "文件", "找", "不到", "的", "问题", "。", "\n", "10.3", ".", "9", "　", "决定", "报告", "哪些", "错误", "\n", "　", "决定", "报告", "哪些", "错误", "\n", "在", "什么", "情况", "下该", "向", "用户", "报告", "错误", "？", "在", "什么", "情况", "下", "又", "应该", "在", "失败", "时", "一声不吭", "呢", "？", "如果", "用户", "知道", "要", "分析", "哪些", "文件", "，", "他们", "可能", "希望", "在", "有", "文件", "没有", "分析", "时", "出现", "一条", "消息", "，", "将", "其中", "的", "原因", "告", "\n", "诉", "他们", "。", "如果", "用户", "只想", "看到", "结果", "，", "而", "并不知道", "要", "分析", "哪些", "文件", "，", "可能", "就", "无需", "在", "有些", "文件", "不", "存在", "时", "告知", "他们", "。", "向", "用户", "显示", "他", "不想", "看到", "的", "信息", "可能", "会", "降低", "程序", "的", "可用性", "。", "Python", "的", "错误", "\n", "处理", "结构", "让", "你", "能够", "细致", "地", "控制", "与", "用户", "分享", "错误信息", "的", "程度", "，", "要", "分享", "多少", "信息", "由", "你", "决定", "。"], ["处理", "结构", "让", "你", "能够", "细致", "地", "控制", "与", "用户", "分享", "错误信息", "的", "程度", "，", "要", "分享", "多少", "信息", "由", "你", "决定", "。", "\n", "编写", "得", "很", "好且", "经过", "详尽", "测试", "的", "代码", "不", "容易", "出现", "内部", "错误", "，", "如", "语法", "或", "逻辑", "错误", "，", "但", "只要", "程序", "依赖于", "外部", "因素", "，", "如", "用户", "输入", "、", "存在", "指定", "的", "文件", "、", "有", "网络", "链接", "，", "就", "有", "可能", "出现异常", "。", "凭", "\n", "借", "经验", "可", "判断", "该", "在", "程序", "的", "什么", "地方", "包含", "异常", "处理", "块", "，", "以及", "出现", "错误", "时该", "向", "用户", "提供", "多少", "相关", "的", "信息", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "10", "-", "6", " ", "加法", "运算", "\n", "加法", "运算", " ", "：", "提示", "用户", "提供", "数值", "输入", "时", "，", "常", "出现", "的", "一个", "问题", "是", "，", "用户", "提供", "的", "是", "文本", "而", "不是", "数字", "。", "在", "这种", "情况", "下", "，", "当", "你", "尝试", "将", "输入", "转换", "为", "整数", "时", "，", "将", "引", "\n", "发", "TypeError", " ", "异常", "。", "编写", "一个", "程序", "，", "提示", "用户", "输入", "两个", "数字", "，", "再", "将", "它们", "相加", "并打印", "结果", "。", "在", "用户", "输入", "的", "任何", "一个", "值", "不是", "数字", "时", "都", "捕获", "TypeError", " ", "异常", "，", "并打印", "一"], ["条", "友好", "的", "错误", "消息", "。", "对", "你", "编写", "的", "程序", "进行", "测试", "：", "先", "输入", "两个", "数字", "，", "再", "输入", "一些", "文本", "而", "不是", "数字", "。", "\n", "10", "-", "7", " ", "加法", "计算器", "\n", "加法", "计算器", " ", "：", "将", "你", "为", "完成", "练习", "10", "-", "6", "而", "编写", "的", "代码", "放在", "一个", "while", " ", "循环", "中", "，", "让", "用户", "犯错", "（", "输入", "的", "是", "文本", "而", "不是", "数字", "）", "后", "能够", "继续", "输入", "数字", "。", "\n", "10", "-", "8", " ", "猫", "和", "狗", "\n", "猫", "和", "狗", " ", "：", "创建", "两个", "文件", "cats", ".", "txt", "和", "dogs", ".", "txt", "，", "在", "第一个", "文件", "中", "至少", "存储", "三只", "猫", "的", "名字", "，", "在", "第二个", "文件", "中", "至少", "存储", "三条", "狗", "的", "名字", "。", "编写", "一个", "程序", "，", "尝试", "读取", "这些", "文件", "，", "\n", "并", "将", "其", "内容", "打印", "到", "屏幕", "上", "。", "将", "这些", "代码", "放在", "一个", "try", "-", "except", " ", "代码", "块", "中", "，", "以便", "在", "文件", "不", "存在", "时", "捕获", "FileNotFound", " ", "错误", "，", "并打印", "一条", "友好", "的", "消息", "。", "将", "其中", "一个", "文件", "\n", "移到", "另", "一个", "地方", "，", "并", "确认", "except", " ", "代码", "块", "中", "的", "代码", "将", "正确", "地", "执行", "。", "\n", "10", "-", "9", " ", "沉默", "的", "猫", "和", "狗", "\n", "沉默", "的", "猫", "和", "狗", " ", "：", "修改", "你", "在", "练习", "10", "-", "8", "中", "编写", "的", "except", " ", "代码", "块", "，", "让", "程序", "在", "文件", "不", "存在", "时", "一言不发", "。", "\n", "10", "-", "10", " ", "常见", "单词", "\n", "常见", "单词", " ", "：", "访问", "项目", "Gutenberg", "（", "http", ":", "/", "/", "gutenberg", ".", "org", "/", " ", "）", "，", "并", "找", "一些", "你", "想", "分析", "的", "图书", "。", "下载", "这些", "作品", "的", "文本文件", "或", "将", "浏览器", "中", "的", "原始", "文本", "复制到", "文本文件", "中", "。"], ["你", "可以", "使用", "方法", "count", "(", ")", " ", "来", "确定", "特定", "的", "单词", "或", "短语", "在", "字符串", "中", "出现", "了", "多少", "次", "。", "例如", "，", "下面", "的", "代码", "计算", "'", "row", "'", " ", "在", "一个", "字符串", "中", "出现", "了", "多少", "次", "：", "\n", ">", ">", ">", " ", "line", " ", "=", " ", "\"", "Row", ",", " ", "row", ",", " ", "row", " ", "your", " ", "boat", "\"", "\n", ">", ">", ">", " ", "line", ".", "count", "(", "'", "row", "'", ")", "\n", "2", "\n", ">", ">", ">", " ", "line", ".", "lower", "(", ")", ".", "count", "(", "'", "row", "'", ")", "\n", "3", "\n", "请", "注意", "，", "通过", "使用", "lower", "(", ")", " ", "将", "字符串", "转换", "为", "小写", "，", "可", "捕捉", "要", "查找", "的", "单词", "出现", "的", "所有", "次数", "，", "而", "不管", "其", "大小写", "格式", "如何", "。", "\n", "编写", "一个", "程序", "，", "它", "读取", "你", "在", "项目", "Gutenberg", "中", "获取", "的", "文件", "，", "并", "计算", "单词", "'", "the", "'", " ", "在", "每个", "文件", "中", "分别", "出现", "了", "多少", "次", "。", "\n", "10.4", "　", "存储", "数据", "\n", "　", "存储", "数据", "\n", "很多", "程序", "都", "要求", "用户", "输入", "某种", "信息", "，", "如", "让", "用户", "存储", "游戏", "首选项", "或", "提供", "要", "可视化", "的", "数据", "。", "不管", "专注", "的", "是", "什么", "，", "程序", "都", "把", "用户", "提供", "的", "信息", "存储", "在", "列表", "和", "字典", "等", "数据结构", "中", "。", "用户", "关闭", "\n", "程序", "时", "，", "你", "几乎", "总是", "要", "保存", "他们", "提供", "的", "信息", "；", "一种", "简单", "的", "方式", "是", "使用", "模块", "json", " ", "来", "存储", "数据", "。", "\n", "模块", "json", " ", "让", "你", "能够", "将", "简单", "的", "Python", "数据结构", "转储", "到", "文件", "中", "，", "并", "在", "程序", "再次", "运行", "时", "加载", "该", "文件", "中", "的", "数据", "。", "你", "还", "可以", "使用", "json", " ", "在", "Python", "程序", "之间", "分享", "数据", "。", "更", "重要", "的", "是", "，", "JSON", "数据"], ["格式", "并非", "Python", "专用", "的", "，", "这", "让", "你", "能够", "将", "以", "JSON", "格式", "存储", "的", "数据", "与", "使用", "其他", "编程语言", "的", "人", "分享", "。", "这是", "一种", "轻便", "格式", "，", "很", "有用", "，", "也", "易于", "学习", "。", "\n", "注意", "\n", "注意", " ", "　", "JSON", "（", "JavaScript", " ", "Object", " ", "Notation", "）", "格式", "最初", "是", "为", "JavaScript", "开发", "的", "，", "但", "随后", "成", "了", "一种", "常见", "格式", "，", "被", "包括", "Python", "在内", "的", "众多", "语言", "采用", "。", "\n", "10.4", ".", "1", "　", "使用", "\n", "　", "使用", "json", ".", "dump", "(", ")", " ", "和", "\n", "和", "json", ".", "load", "(", ")", "\n", "我们", "来", "编写", "一个", "存储", "一组", "数字", "的", "简短", "程序", "，", "再", "编写", "一个", "将", "这些", "数字", "读取", "到", "内存", "中", "的", "程序", "。", "第一个", "程序", "将", "使用", "json", ".", "dump", "(", ")", " ", "来", "存储", "这组", "数字", "，", "而", "第二个", "程序", "将", "使", "\n", "用", "json", ".", "load", "(", ")", " ", "。", "\n", "函数", "json", ".", "dump", "(", ")", " ", "接受", "两个", "实参", "：", "要", "存储", "的", "数据", "以及", "可", "用于", "存储", "数据", "的", "文件", "对象", "。", "下面", "演示", "了", "如何", "使用", "json", ".", "dump", "(", ")", " ", "来", "存储", "数字", "列表", "：", "\n", "number", "_", "writer", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "numbers", " ", "=", " ", "[", "2", ",", " ", "3", ",", " ", "5", ",", " ", "7", ",", " ", "11", ",", " ", "13", "]", "\n", "❶", " ", "filename", " ", "=", " ", "'", "numbers", ".", "json", "'", "\n", "❷", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":"], ["❷", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "❸", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "numbers", ",", " ", "f", "_", "obj", ")", "\n", "我们", "先导", "入", "模块", "json", " ", "，", "再", "创建", "一个", "数字", "列表", "。", "在", "❶", "处", "，", "我们", "指定", "了", "要", "将", "该", "数字", "列表", "存储", "到", "其中", "的", "文件", "的", "名称", "。", "通常", "使用", "文件", "扩展名", ".", "json", "来", "指出", "文件", "存储", "的", "数据", "为", "JSON", "格式", "。", "接", "\n", "下来", "，", "我们", "以", "写入", "模式", "打开", "这个", "文件", "，", "让", "json", " ", "能够", "将", "数据", "写入", "其中", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "使用", "函数", "json", ".", "dump", "(", ")", " ", "将", "数字", "列表", "存储", "到", "文件", "numbers", ".", "json", "中", "。", "\n", "这个", "程序", "没有", "输出", "，", "但", "我们", "可以", "打开", "文件", "numbers", ".", "json", "，", "看看", "其", "内容", "。", "数据", "的", "存储", "格式", "与", "Python", "中", "一样", "：", "\n", "[", "2", ",", " ", "3", ",", " ", "5", ",", " ", "7", ",", " ", "11", ",", " ", "13", "]", "\n", "下面", "再", "编写", "一个", "程序", "，", "使用", "json", ".", "load", "(", ")", " ", "将", "这个", "列表", "读取", "到", "内存", "中", "：", "\n", "number", "_", "reader", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", "❶", " ", "filename", " ", "=", " ", "'", "numbers", ".", "json", "'", "\n", "❷", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "❸", " ", " ", " ", " ", " ", "numbers", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", " ", " ", "print", "(", "numbers", ")"], ["❸", " ", " ", " ", " ", " ", "numbers", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", " ", " ", "print", "(", "numbers", ")", "\n", "在", "❶", "处", "，", "我们", "确保", "读取", "的", "是", "前面", "写入", "的", "文件", "。", "这次", "我们", "以", "读取", "方式", "打开", "这个", "文件", "，", "因为", "Python", "只", "需", "读取", "这个", "文件", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "使用", "函数", "json", ".", "load", "(", ")", " ", "加载", "存储", "在", "\n", "numbers", ".", "json", "中", "的", "信息", "，", "并", "将", "其", "存储", "到", "变量", "numbers", " ", "中", "。", "最后", "，", "我们", "打印", "恢复", "的", "数字", "列表", "，", "看看", "它", "是否", "与", "number", "_", "writer", ".", "py", "中", "创建", "的", "数字", "列表", "相同", "：", "\n", "[", "2", ",", " ", "3", ",", " ", "5", ",", " ", "7", ",", " ", "11", ",", " ", "13", "]", "\n", "这是", "一种", "在", "程序", "之间", "共享", "数据", "的", "简单", "方式", "。", "\n", "10.4", ".", "2", "　", "保存", "和", "读取", "用户", "生成", "的", "数据", "\n", "　", "保存", "和", "读取", "用户", "生成", "的", "数据", "\n", "对于", "用户", "生成", "的", "数据", "，", "使用", "json", " ", "保存", "它们", "大有裨益", "，", "因为", "如果", "不", "以", "某种", "方式", "进行", "存储", "，", "等", "程序", "停止", "运行", "时", "用户", "的", "信息", "将", "丢失", "。", "下面", "来看", "一个", "这样", "的", "例子", "：", "用户", "首次", "运行", "程序", "时", "\n", "被", "提示", "输入", "自己", "的", "名字", "，", "这样", "再次", "运行", "程序", "时", "就", "记住", "他", "了", "。", "\n", "我们", "先", "来", "存储用户", "的", "名字", "："], ["remember", "_", "me", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", "❶", " ", "username", " ", "=", " ", "input", "(", "\"", "What", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "❷", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "username", ",", " ", "f", "_", "obj", ")", "\n", "❸", " ", " ", " ", " ", " ", "print", "(", "\"", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "提示", "输入", "用户名", "，", "并", "将", "其", "存储", "在", "一个", "变量", "中", "。", "接下来", "，", "我们", "调用", "json", ".", "dump", "(", ")", " ", "，", "并", "将", "用户名", "和", "一个", "文件", "对象", "传递", "给", "它", "，", "从而", "将", "用户名", "存储", "到", "文件", "中", "（", "见", "❷", "）", "。", "然", "\n", "后", "，", "我们", "打印", "一条", "消息", "，", "指出", "我们", "存储", "了", "他", "输入", "的", "信息", "（", "见", "❸", "）", "：", "\n", "What", " ", "is", " ", "your", " ", "name", "?", " ", "Eric", "\n", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "Eric", "!", "\n", "现在", "再", "编写", "一个", "程序", "，", "向", "其", "名字", "被", "存储", "的", "用户", "发出", "问候", "：", "\n", "greet", "_", "user", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'"], ["import", " ", "json", "\n", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "❶", " ", " ", " ", " ", " ", "username", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", "❷", " ", " ", " ", " ", " ", "print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", "在", "❶", "处", "，", "我们", "使用", "json", ".", "load", "(", ")", " ", "将", "存储", "在", "username", ".", "json", "中", "的", "信息", "读取", "到", "变量", "username", " ", "中", "。", "恢复", "用户名", "后", "，", "我们", "就", "可以", "欢迎", "用户", "回来", "了", "（", "见", "❷", "）", "：", "\n", "Welcome", " ", "back", ",", " ", "Eric", "!", "\n", "我们", "需要", "将", "这", "两个", "程序", "合并", "到", "一个", "程序", "（", "remember", "_", "me", ".", "py", "）", "中", "。", "这个", "程序运行", "时", "，", "我们", "将", "尝试", "从文件", "username", ".", "json", "中", "获取", "用户名", "，", "因此", "我们", "首先", "编写", "一个", "尝试", "恢复", "用户名", "的", "try", " ", "代", "\n", "码块", "。", "如果", "这个", "文件", "不", "存在", "，", "我们", "就", "在", "except", " ", "代码", "块", "中", "提示", "用户", "输入", "用户名", "，", "并", "将", "其", "存储", "在", "username", ".", "json", "中", "，", "以便", "程序", "再次", "运行", "时", "能够", "获取", "它", "：", "\n", "remember", "_", "me", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "#", " ", "如果", "以前", "存储", "了", "用户名", "，", "就", "加载", "它", "\n", " ", " ", "#", " ", " ", "否则", "，", "就", "提示", "用户", "输入", "用户名", "并", "存储", "它"], ["#", " ", "如果", "以前", "存储", "了", "用户名", "，", "就", "加载", "它", "\n", " ", " ", "#", " ", " ", "否则", "，", "就", "提示", "用户", "输入", "用户名", "并", "存储", "它", "\n", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", "try", ":", "\n", "❶", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", "❸", " ", "except", " ", "FileNotFoundError", ":", "\n", "❹", " ", " ", " ", " ", " ", "username", " ", "=", " ", "input", "(", "\"", "What", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", "❺", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "username", ",", " ", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")"], ["print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", "这里", "没有", "任何", "新", "代码", "，", "只是", "将", "前", "两个", "示例", "的", "代码", "合并", "到", "了", "一个", "程序", "中", "。", "在", "❶", "处", "，", "我们", "尝试", "打开", "文件", "username", ".", "json", "。", "如果", "这个", "文件", "存在", "，", "就", "将", "其中", "的", "用户名", "读取", "到", "内存", "中", "（", "见", "❷", "）", "，", "\n", "再", "执行", "else", " ", "代码", "块", "，", "即", "打印", "一条", "欢迎", "用户", "回来", "的", "消息", "。", "用户", "首次", "运行", "这个", "程序", "时", "，", "文件", "username", ".", "json", "不", "存在", "，", "将", "引发", "FileNotFoundError", " ", "异常", "（", "见", "❸", "）", "，", "因此", "Python", "将", "执", "\n", "行", "except", " ", "代码", "块", "：", "提示", "用户", "输入", "其", "用户名", "（", "见", "❹", "）", "，", "再", "使用", "json", ".", "dump", "(", ")", " ", "存储", "该", "用户名", "，", "并打印", "一句", "问候语", "（", "见", "❺", "）", "。", "\n", "无论", "执行", "的", "是", "except", " ", "代码", "块", "还是", "else", " ", "代码", "块", "，", "都", "将", "显示", "用户名", "和", "合适", "的", "问候语", "。", "如果", "这个", "程序", "是", "首次", "运行", "，", "输出", "将", "如下", "：", "\n", "What", " ", "is", " ", "your", " ", "name", "?", " ", "Eric", "\n", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "Eric", "!", "\n", "否则", "，", "输出", "将", "如下", "：", "\n", "Welcome", " ", "back", ",", " ", "Eric", "!", "\n", "这是", "程序", "之前", "至少", "运行", "了", "一次", "时", "的", "输出", "。", "\n", "10.4", ".", "3", "　", "重构", "\n", "　", "重构"], ["这是", "程序", "之前", "至少", "运行", "了", "一次", "时", "的", "输出", "。", "\n", "10.4", ".", "3", "　", "重构", "\n", "　", "重构", "\n", "你", "经常", "会", "遇到", "这样", "的", "情况", "：", "代码", "能够", "正确", "地", "运行", "，", "但", "可", "做", "进一步", "的", "改进", "—", "—", "将", "代码", "划分", "为", "一系列", "完成", "具体", "工作", "的", "函数", "。", "这样", "的", "过程", "被", "称为", "重构", "\n", "重构", " ", "。", "重构", "让", "代码", "更", "清晰", "、", "更", "易于", "理", "\n", "解", "、", "更", "容易", "扩展", "。", "\n", "要", "重构", "remember", "_", "me", ".", "py", "，", "可", "将", "其", "大部分", "逻辑", "放到", "一个", "或", "多个", "函数", "中", "。", "remember", "_", "me", ".", "py", "的", "重点", "是", "问候", "用户", "，", "因此", "我们", "将", "其", "所有", "代码", "都", "放到", "一个", "名为", "greet", "_", "user", "(", ")", " ", "的", "函数", "中", "：", "\n", "remember", "_", "me", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "def", " ", "greet", "_", "user", "(", ")", ":"], ["❶", " ", " ", " ", " ", " ", "\"", "\"", "\"", "问候", "用户", "，", "并", "指出", "其", "名字", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", " ", " ", "except", " ", "FileNotFoundError", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "input", "(", "\"", "What", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "username", ",", " ", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", "greet", "_", "user", "(", ")"], ["greet", "_", "user", "(", ")", "\n", "考虑", "到", "现在", "使用", "了", "一个", "函数", "，", "我们", "删除", "了", "注释", "，", "转而", "使用", "一个", "文档", "字符串", "来", "指出", "程序", "是", "做", "什么", "的", "（", "见", "❶", "）", "。", "这个", "程序", "更", "清晰", "些", "，", "但", "函数", "greet", "_", "user", "(", ")", " ", "所", "做", "的", "不仅仅", "是", "问候", "用", "\n", "户", "，", "还", "在", "存储", "了", "用户名", "时", "获取", "它", "，", "而", "在", "没有", "存储用户", "名时", "提示", "用户", "输入", "一个", "。", "\n", "下面", "来", "重构", "greet", "_", "user", "(", ")", " ", "，", "让", "它", "不", "执行", "这么", "多任务", "。", "为此", "，", "我们", "首先", "将", "获取", "存储", "的", "用户名", "的", "代码", "移到", "另", "一个", "函数", "中", "：", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "def", " ", "get", "_", "stored", "_", "username", "(", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "\"", "\"", "\"", "如果", "存储", "了", "用户名", "，", "就", "获取", "它", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "json", ".", "load", "(", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", " ", " ", "except", " ", "FileNotFoundError", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "None", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "username", "\n", " ", " ", "def", " ", "greet", "_", "user", "(", ")", ":"], ["return", " ", "username", "\n", " ", " ", "def", " ", "greet", "_", "user", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "问候", "用户", "，", "并", "指出", "其", "名字", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "get", "_", "stored", "_", "username", "(", ")", "\n", "❸", " ", " ", " ", " ", " ", "if", " ", "username", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "input", "(", "\"", "What", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "username", ",", " ", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", "greet", "_", "user", "(", ")"], ["greet", "_", "user", "(", ")", "\n", "新增", "的", "函数", "get", "_", "stored", "_", "username", "(", ")", " ", "目标", "明确", "，", "❶", "处", "的", "文档", "字符串", "指出", "了", "这", "一点", "。", "如果", "存储", "了", "用户名", "，", "这个", "函数", "就", "获取", "并", "返回", "它", "；", "如果", "文件", "username", ".", "json", "不", "存在", "，", "这个", "函数", "\n", "就", "返回", "None", " ", "（", "见", "❷", "）", "。", "这是", "一种", "不错", "的", "做法", "：", "函数", "要么", "返回", "预期", "的", "值", "，", "要么", "返回", "None", " ", "；", "这", "让", "我们", "能够", "使用", "函数", "的", "返回值", "做", "简单", "测试", "。", "在", "❸", "处", "，", "如果", "成功", "地", "获取", "了", "用户名", "，", "就", "打", "\n", "印", "一条", "欢迎", "用户", "回来", "的", "消息", "，", "否则", "就", "提示", "用户", "输入", "用户名", "。", "\n", "我们", "还", "需", "将", "greet", "_", "user", "(", ")", " ", "中", "的", "另", "一个", "代码", "块", "提取", "出来", "：", "将", "没有", "存储用户", "名时", "提示", "用户", "输入", "的", "代码", "放在", "一个", "独立", "的", "函数", "中", "：", "\n", "import", " ", "json", "\n", "def", " ", "get", "_", "stored", "_", "username", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "如果", "存储", "了", "用户名", "，", "就", "获取", "它", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "def", " ", "get", "_", "new", "_", "username", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "提示", "用户", "输入", "用户名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "username", " ", "=", " ", "input", "(", "\"", "What", " ", "is", " ", "your", " ", "name", "?", " ", "\"", ")", "\n", " ", " ", " ", " ", "filename", " ", "=", " ", "'", "username", ".", "json", "'"], ["filename", " ", "=", " ", "'", "username", ".", "json", "'", "\n", " ", " ", " ", " ", "with", " ", "open", "(", "filename", ",", " ", "'", "w", "'", ")", " ", "as", " ", "f", "_", "obj", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "json", ".", "dump", "(", "username", ",", " ", "f", "_", "obj", ")", "\n", " ", " ", " ", " ", "return", " ", "username", "\n", "def", " ", "greet", "_", "user", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "问候", "用户", "，", "并", "指出", "其", "名字", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "username", " ", "=", " ", "get", "_", "stored", "_", "username", "(", ")", "\n", " ", " ", " ", " ", "if", " ", "username", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Welcome", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "username", " ", "=", " ", "get", "_", "new", "_", "username", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "We", "'", "ll", " ", "remember", " ", "you", " ", "when", " ", "you", " ", "come", " ", "back", ",", " ", "\"", " ", "+", " ", "username", " ", "+", " ", "\"", "!", "\"", ")", "\n", "greet", "_", "user", "(", ")", "\n", "在", "remember", "_", "me", ".", "py", "的", "这个", "最终", "版本", "中", "，", "每个", "函数", "都", "执行", "单一", "而", "清晰", "的", "任务", "。", "我们", "调用", "greet", "_", "user", "(", ")", " ", "，", "它", "打印", "一条", "合适", "的", "消息", "：", "要么", "欢迎", "老", "用户", "回来", "，", "要么", "问候", "新", "用户", "。", "为此", "，"], ["它", "首先", "调用", "get", "_", "stored", "_", "username", "(", ")", " ", "，", "这个", "函数", "只", "负责", "获取", "存储", "的", "用户名", "（", "如果", "存储", "了", "的话", "）", "，", "再", "在", "必要", "时", "调用", "get", "_", "new", "_", "username", "(", ")", " ", "，", "这个", "函数", "只", "负责", "获取", "并", "存储", "新", "\n", "用户", "的", "用户名", "。", "要", "编写出", "清晰", "而", "易于", "维护", "和", "扩展", "的", "代码", "，", "这种", "划分", "工作", "必不可少", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "10", "-", "11", " ", "喜欢", "的", "数字", "\n", "喜欢", "的", "数字", " ", "：", "编写", "一个", "程序", "，", "提示", "用户", "输入", "他", "喜欢", "的", "数字", "，", "并", "使用", "json", ".", "dump", "(", ")", " ", "将", "这个", "数字", "存储", "到", "文件", "中", "。", "再", "编写", "一个", "程序", "，", "从文件", "中", "读取", "这个", "值", "，", "并打印", "\n", "消息", "“", "I", " ", "know", " ", "your", " ", "favorite", " ", "number", "!", " ", "It", "'", "s", " ", "_____.", "”", "。", "\n", "10", "-", "12", " ", "记住", "喜欢", "的", "数字", "\n", "记住", "喜欢", "的", "数字", " ", "：", "将", "练习", "10", "-", "11", "中", "的", "两个", "程序", "合而为一", "。", "如果", "存储", "了", "用户", "喜欢", "的", "数字", "，", "就", "向", "用户", "显示", "它", "，", "否则", "提示", "用户", "输入", "他", "喜欢", "的", "数字", "并", "将", "其", "存储", "到", "文件", "中", "。", "\n", "运行", "这个", "程序", "两次", "，", "看看", "它", "是否", "像", "预期", "的", "那样", "工作", "。", "\n", "10", "-", "13", " ", "验证", "用户", "\n", "验证", "用户", " ", "：", "最后", "一个", "remember", "_", "me", ".", "py", "版本", "假设", "用户", "要么", "已", "输入", "其", "用户名", "，", "要么", "是", "首次", "运行", "该", "程序", "。", "我们", "应", "修改", "这个", "程序", "，", "以", "应对", "这样", "的", "情形", "：", "当前", "和", "最后", "一次", "\n", "运行", "该", "程序", "的", "用户", "并非", "同一个", "人", "。"], ["运行", "该", "程序", "的", "用户", "并非", "同一个", "人", "。", "\n", "为此", "，", "在", "greet", "_", "user", "(", ")", " ", "中", "打印", "欢迎", "用户", "回来", "的", "消息", "前", "，", "先", "询问", "他", "用户名", "是否是", "对", "的", "。", "如果", "不", "对", "，", "就", "调用", "get", "_", "new", "_", "username", "(", ")", " ", "让", "用户", "输入", "正确", "的", "用户名", "。", "\n", "10.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "使用", "文件", "；", "如何", "一次性", "读取", "整个", "文件", "，", "以及", "如何", "以", "每次", "一行", "的", "方式", "读取", "文件", "的", "内容", "；", "如何", "写入", "文件", "，", "以及", "如何", "将", "文本", "附加", "到", "文件", "末尾", "；", "什么", "是", "异常", "以", "\n", "及", "如何", "处理程序", "可能", "引发", "的", "异常", "；", "如何", "存储", "Python", "数据结构", "，", "以", "保存", "用户", "提供", "的", "信息", "，", "避免", "用户", "每次", "运行", "程序", "时", "都", "需要", "重新", "提供", "。"], ["在", "第", "11", "章中", "，", "你", "将", "学习", "高效", "的", "代码", "测试", "方式", "，", "这", "可", "帮助", "你", "确定", "代码", "正确", "无误", "，", "以及", "发现", "扩展", "现有", "程序", "时", "可能", "引入", "的", "bug", "。", "\n", "第", "\n", "第", " ", "11", " ", "章", "　", "测试代码", "\n", "章", "　", "测试代码", "\n", "编写", "函数", "或类", "时", "，", "还", "可", "为", "其", "编写", "测试", "。", "通过", "测试", "，", "可", "确定", "代码", "面对", "各种", "输入", "都", "能够", "按", "要求", "的", "那样", "工作", "。", "测试", "让", "你", "信心", "满满", "，", "深信", "即便", "有", "更", "多", "的", "人", "使用", "你", "的", "程序", "，", "它", "也", "\n", "能", "正确", "地", "工作", "。", "在", "程序", "中", "添加", "新", "代码", "时", "，", "你", "也", "可以", "对", "其", "进行", "测试", "，", "确认", "它们", "不会", "破坏", "程序", "既有", "的", "行为", "。", "程序员", "都", "会", "犯错", "，", "因此", "每个", "程序员", "都", "必须", "经常", "测试", "其", "代码", "，", "在", "\n", "用户", "发现", "问题", "前", "找出", "它们", "。", "\n", "在", "本章", "中", "，", "你", "将", "学习", "如何", "使用", "Python", "模块", "unittest", " ", "中", "的", "工具", "来", "测试代码", "。", "你", "将", "学习", "编写", "测试用例", "，", "核实", "一系列", "输入", "都", "将", "得到", "预期", "的", "输出", "。", "你", "将", "看到", "测试通过", "了", "是", "什", "\n", "么", "样子", "，", "测试", "未", "通过", "又", "是", "什么", "样子", "，", "还", "将", "知道", "测试", "未", "通过", "如何", "有助于", "改进", "代码", "。", "你", "将", "学习", "如何", "测试函数", "和", "类", "，", "并", "将", "知道", "该", "为", "项目", "编写", "多少", "个", "测试", "。", "\n", "11.1", "　", "测试函数", "\n", "　", "测试函数", "\n", "要", "学习", "测试", "，", "得", "有", "要", "测试", "的", "代码", "。", "下面", "是", "一个", "简单", "的", "函数", "，", "它", "接受", "名和姓", "并", "返回", "整洁", "的", "姓名", "：", "\n", "name", "_", "function", ".", "py", "\n", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", ",", " ", "last", ")", ":"], ["def", " ", "get", "_", "formatted", "_", "name", "(", "first", ",", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "Generate", " ", "a", " ", "neatly", " ", "formatted", " ", "full", " ", "name", ".", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "\n", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "将名", "和", "姓", "合并", "成", "姓名", "，", "在", "名", "和", "姓", "之间", "加上", "一个", "空格", "，", "并", "将", "它们", "的", "首字母", "都", "大写", "，", "再", "返回", "结果", "。", "为", "核实", "get", "_", "formatted", "_", "name", "(", ")", " ", "像", "期望", "的", "那样", "\n", "工作", "，", "我们", "来", "编写", "一个", "使用", "这个", "函数", "的", "程序", "。", "程序", "names", ".", "py", "让", "用户", "输入", "名和姓", "，", "并", "显示", "整洁", "的", "全名", "：", "\n", "names", ".", "py", "\n", "from", " ", "name", "_", "function", " ", "import", " ", "get", "_", "formatted", "_", "name", "\n", "print", "(", "\"", "Enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ".", "\"", ")", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "first", " ", "=", " ", "input", "(", "\"", "\\", "nPlease", " ", "give", " ", "me", " ", "a", " ", "first", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", "if", " ", "first", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break"], ["if", " ", "first", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", "last", " ", "=", " ", "input", "(", "\"", "Please", " ", "give", " ", "me", " ", "a", " ", "last", " ", "name", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", "if", " ", "last", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "first", ",", " ", "last", ")", "\n", " ", " ", " ", " ", "print", "(", "\"", "\\", "tNeatly", " ", "formatted", " ", "name", ":", " ", "\"", " ", "+", " ", "formatted", "_", "name", " ", "+", " ", "'", ".", "'", ")", "\n", "这个", "程序", "从", "name", "_", "function", ".", "py", "中", "导入", "get", "_", "formatted", "_", "name", "(", ")", " ", "。", "用户", "可", "输入", "一系列", "的", "名", "和", "姓", "，", "并", "看到", "格式", "整洁", "的", "全名", "：", "\n", "Enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ".", "\n", "Please", " ", "give", " ", "me", " ", "a", " ", "first", " ", "name", ":", " ", "janis", "\n", "Please", " ", "give", " ", "me", " ", "a", " ", "last", " ", "name", ":", " ", "joplin", "\n", " ", " ", " ", " ", " ", " ", " ", "Neatly", " ", "formatted", " ", "name", ":", " ", "Janis", " ", "Joplin", ".", "\n", "Please", " ", "give", " ", "me", " ", "a", " ", "first", " ", "name", ":", " ", "bob"], ["Please", " ", "give", " ", "me", " ", "a", " ", "first", " ", "name", ":", " ", "bob", "\n", "Please", " ", "give", " ", "me", " ", "a", " ", "last", " ", "name", ":", " ", "dylan", "\n", " ", " ", " ", " ", " ", " ", " ", "Neatly", " ", "formatted", " ", "name", ":", " ", "Bob", " ", "Dylan", "."], ["Please", " ", "give", " ", "me", " ", "a", " ", "first", " ", "name", ":", " ", "q", "\n", "从", "上述", "输出", "可知", "，", "合并", "得到", "的", "姓名", "正确", "无误", "。", "现在", "假设", "我们", "要", "修改", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "使", "其", "还", "能够", "处理", "中间", "名", "。", "这样", "做时", "，", "我们", "要", "确保", "不", "破坏", "这个", "函数", "处理", "只有", "名", "和", "\n", "姓", "的", "姓名", "的", "方式", "。", "为此", "，", "我们", "可以", "在", "每次", "修改", "get", "_", "formatted", "_", "name", "(", ")", " ", "后", "都", "进行", "测试", "：", "运行", "程序", "names", ".", "py", "，", "并", "输入", "像", "Janis", " ", "Joplin", " ", "这样", "的", "姓名", "，", "但", "这", "太", "烦琐", "了", "。", "所幸", "\n", "Python", "提供", "了", "一种", "自动", "测试函数", "输出", "的", "高效", "方式", "。", "倘若", "我们", "对", "get", "_", "formatted", "_", "name", "(", ")", " ", "进行", "自动测试", "，", "就", "能", "始终", "信心", "满满", "，", "确信", "给", "这个", "函数", "提供", "我们", "测试", "过", "的", "姓名", "时", "，", "它", "都", "能", "\n", "正确", "地", "工作", "。", "\n", "11.1", ".", "1", "　", "单元测试", "和", "测试用例", "\n", "　", "单元测试", "和", "测试用例", "\n", "Python", "标准", "库中", "的", "模块", "unittest", " ", "提供", "了", "代码", "测试工具", "。", "单元测试", "\n", "单元测试", " ", "用于", "核实", "函数", "的", "某个", "方面", "没有", "问题", "；", "测试用例", "\n", "测试用例", " ", "是", "一组", "单元测试", "，", "这些", "单元测试", "一起", "核实", "函数", "在", "各种", "情形", "下", "的", "\n", "行为", "都", "符合要求", "。", "良好", "的", "测试用例", "考虑", "到", "了", "函数", "可能", "收到", "的", "各种", "输入", "，", "包含", "针对", "所有", "这些", "情形", "的", "测试", "。", "全", "覆盖", "式", "测试"], ["全", "覆盖", "式", "测试", " ", "用例", "包含", "一整套", "单元测试", "，", "涵盖", "了", "各种", "可能", "的", "函数", "使用", "方", "\n", "式", "。", "对于", "大型项目", "，", "要", "实现", "全", "覆盖", "可能", "很难", "。", "通常", "，", "最初", "只要", "针对", "代码", "的", "重要", "行为", "编写", "测试", "即可", "，", "等", "项目", "被", "广泛", "使用", "时", "再", "考虑", "全", "覆盖", "。", "\n", "11.1", ".", "2", "　", "可", "通过", "的", "测试", "\n", "　", "可", "通过", "的", "测试", "\n", "创建", "测试用例", "的", "语法", "需要", "一段时间", "才能", "习惯", "，", "但", "测试用例", "创建", "后", "，", "再", "添加", "针对", "函数", "的", "单元测试", "就", "很", "简单", "了", "。", "要", "为", "函数", "编写", "测试用例", "，", "可", "先导", "入", "模块", "unittest", " ", "以及", "要", "测试", "的", "函", "\n", "数", "，", "再", "创建", "一个", "继承", "unittest", ".", "TestCase", " ", "的", "类", "，", "并", "编写", "一系列", "方法", "对", "函数", "行为", "的", "不同", "方面", "进行", "测试", "。", "\n", "下面", "是", "一个", "只", "包含", "一个", "方法", "的", "测试用例", "，", "它", "检查", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "在", "给", "定名", "和", "姓", "时", "能否", "正确", "地", "工作", "：", "\n", "test", "_", "name", "_", "function", ".", "py", "\n", " ", " ", "import", " ", "unittest", "\n", " ", " ", "from", " ", "name", "_", "function", " ", "import", " ", "get", "_", "formatted", "_", "name", "\n", "❶", " ", "class", " ", "NamesTestCase", "(", "unittest", ".", "TestCase", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "name", "_", "function", ".", "py", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "first", "_", "last", "_", "name", "(", "self", ")", ":"], ["def", " ", "test", "_", "first", "_", "last", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "能够", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "吗", "？", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "janis", "'", ",", " ", "'", "joplin", "'", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertEqual", "(", "formatted", "_", "name", ",", " ", "'", "Janis", " ", "Joplin", "'", ")", "\n", " ", " ", "unittest", ".", "main", "(", ")", "\n", "首先", "，", "我们", "导入", "了", "模块", "unittest", " ", "和", "要", "测试", "的", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "。", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "名为", "NamesTestCase", " ", "的", "类", "，", "用于", "包含", "一系列", "针", "\n", "对", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "单元测试", "。", "你", "可", "随便", "给", "这个", "类", "命名", "，", "但", "最好", "让", "它", "看起来", "与", "要", "测试", "的", "函数", "相关", "，", "并", "包含", "字样", "Test", "。", "这个", "类", "必须", "继承", "unittest", ".", "TestCase", " ", "类", "，", "这", "\n", "样", "Python", "才", "知道", "如何", "运行", "你", "编写", "的", "测试", "。"], ["样", "Python", "才", "知道", "如何", "运行", "你", "编写", "的", "测试", "。", "\n", "NamesTestCase", " ", "只", "包含", "一个", "方法", "，", "用于", "测试", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "一个", "方面", "。", "我们", "将", "这个", "方法", "命名", "为", "test", "_", "first", "_", "last", "_", "name", "(", ")", " ", "，", "因为", "我们", "要", "核实", "的", "是", "只有", "名", "和", "\n", "姓", "的", "姓名", "能否", "被", "正确", "地", "格式化", "。", "我们", "运行", "testname", "_", "function", ".", "py", "时", "，", "所有", "以", "test", " ", "打头", "的", "方法", "都", "将", "自动", "运行", "。", "在", "这个", "方法", "中", "，", "我们", "调用", "了", "要", "测试", "的", "函数", "，", "并", "存储", "了", "要", "测试", "的", "返回值", "。", "\n", "在", "这个", "示例", "中", "，", "我们", "使用", "实参", "'", "janis", "'", " ", "和", "'", "joplin", "'", " ", "调用", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "并", "将", "结果", "存储", "到", "变量", "formatted", "_", "name", " ", "中", "（", "见", "❷", "）", "。", "\n", "在", "❸", "处", "，", "我们", "使用", "了", "unittest", " ", "类", "最", "有用", "的", "功能", "之一", "：", "一个", "断言", "\n", "断言", " ", "方法", "。", "断言", "方法", "用来", "核实", "得到", "的", "结果", "是否", "与", "期望", "的", "结果", "一致", "。", "在", "这里", "，", "我们", "知道", "get", "_", "formatted", "_", "name", "(", ")", " ", "应", "\n", "返回", "这样", "的", "姓名", "，", "即名", "和", "姓", "的", "首字母", "为", "大写", "，", "且", "它们", "之间", "有", "一个", "空格", "，", "因此", "我们", "期望", "formatted", "_", "name", " ", "的", "值", "为", "Janis", " ", "Joplin", " ", "。", "为", "检查", "是否", "确实", "如此", "，", "我们", "调用", "unittest"], ["的", "方法", "assertEqual", "(", ")", " ", "，", "并", "向", "它", "传递", "formatted", "_", "name", " ", "和", "'", "Janis", " ", "Joplin", "'", " ", "。", "代码", "行", "self", ".", "assertEqual", "(", "formatted", "_", "name", ",", " ", "'", "Janis", " ", "Joplin", "'", ")", " ", "的", "意思", "是", "\n", "说", "：", "“", "将", "formatted", "_", "name", " ", "的", "值同", "字符串", "'", "Janis", " ", "Joplin", "'", " ", "进行", "比较", "，", "如果", "它们", "相等", "，", "就", "万事大吉", "，", "如果", "它们", "不", "相等", "，", "跟", "我", "说", "一声", "！", "”", "\n", "代码", "行", "unittest", ".", "main", "(", ")", " ", "让", "Python", "运行", "这个", "文件", "中", "的", "测试", "。", "运行", "test", "_", "name", "_", "function", ".", "py", "时", "，", "得到", "的", "输出", "如下", "：", "\n", ".", "\n", "----------------------------------------------------------------------", "\n", "Ran", " ", "1", " ", "test", " ", "in", " ", "0.000", "s", "\n", "OK", "\n", "第", "1", "行", "的", "句点", "表明", "有", "一个", "测试通过", "了", "。", "接下来", "的", "一行", "指出", "Python", "运行", "了", "一个", "测试", "，", "消耗", "的", "时间", "不到", "0.001", "秒", "。", "最后", "的", "OK", " ", "表明", "该", "测试用例", "中", "的", "所有", "单元测试", "都", "通过", "了", "。"], ["上述", "输出", "表明", "，", "给定", "包含", "名和姓", "的", "姓名", "时", "，", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "总是", "能", "正确", "地", "处理", "。", "修改", "get", "_", "formatted", "_", "name", "(", ")", " ", "后", "，", "可", "再次", "运行", "这个", "测试用例", "。", "如果", "它", "通过", "\n", "了", "，", "我们", "就", "知道", "在", "给定", "Janis", " ", "Joplin", " ", "这样", "的", "姓名", "时", "，", "这个", "函数", "依然", "能够", "正确", "地", "处理", "。", "\n", "11.1", ".", "3", "　", "不能", "通过", "的", "测试", "\n", "　", "不能", "通过", "的", "测试", "\n", "测试", "未", "通过", "时", "结果", "是", "什么样", "的", "呢", "？", "我们", "来", "修改", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "使", "其", "能够", "处理", "中间", "名", "，", "但", "这样", "做时", "，", "故意", "让", "这个", "函数", "无法", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "只有", "名和姓", "的", "\n", "姓名", "。", "\n", "下面", "是", "函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "新", "版本", "，", "它", "要求", "通过", "一个", "实参", "指定", "中间", "名", "：", "\n", "name", "_", "function", ".", "py", "\n", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", ",", " ", "middle", ",", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "生成", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", " ", "+", " ", "'", " ", "'", " ", "+", " ", "middle", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "\n", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")"], ["return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "这个", "版本", "应该", "能够", "正确", "地", "处理", "包含", "中间", "名", "的", "姓名", "，", "但", "对", "其", "进行", "测试", "时", "，", "我们", "发现", "它", "再也不能", "正确", "地", "处理", "只有", "名和姓", "的", "姓名", "。", "这次", "运行", "程序", "test", "_", "name", "_", "function", ".", "py", "时", "，", "输出", "如下", "：", "\n", "❶", " ", "E", "\n", " ", " ", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "=", "\n", "❷", " ", "ERROR", ":", " ", "test", "_", "first", "_", "last", "_", "name", " ", "(", "__", "main", "__.", "NamesTestCase", ")", "\n", " ", " ", "----------------------------------------------------------------------", "\n", "❸", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "File", " ", "\"", "test", "_", "name", "_", "function", ".", "py", "\"", ",", " ", "line", " ", "8", ",", " ", "in", " ", "test", "_", "first", "_", "last", "_", "name", "\n", " ", " ", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "janis", "'", ",", " ", "'", "joplin", "'", ")"], ["TypeError", ":", " ", "get", "_", "formatted", "_", "name", "(", ")", " ", "missing", " ", "1", " ", "required", " ", "positional", " ", "argument", ":", " ", "'", "last", "'", "\n", " ", " ", "----------------------------------------------------------------------", "\n", "❹", " ", "Ran", " ", "1", " ", "test", " ", "in", " ", "0.000", "s"], ["❺", " ", "FAILED", " ", "(", "errors", "=", "1", ")", "\n", "其中", "包含", "的", "信息", "很多", "，", "因为", "测试", "未", "通过", "时", "，", "需要", "让", "你", "知道", "的", "事情", "可能", "有", "很多", "。", "第", "1", "行", "输出", "只有", "一个", "字母", "E", " ", "（", "见", "❶", "）", "，", "它", "指出", "测试用例", "中有", "一个", "单元测试", "导致", "了", "错误", "。", "接下来", "，", "我们", "\n", "看到", "NamesTestCase", " ", "中", "的", "test", "_", "first", "_", "last", "_", "name", "(", ")", " ", "导致", "了", "错误", "（", "见", "❷", "）", "。", "测试用例", "包含", "众多", "单元测试", "时", "，", "知道", "哪个", "测试", "未", "通过", "至关重要", "。", "在", "❸", "处", "，", "我们", "看到", "了", "一个", "标准", "\n", "的", "traceback", "，", "它", "指出", "函数调用", "get", "_", "formatted", "_", "name", "(", "'", "janis", "'", ",", " ", "'", "joplin", "'", ")", " ", "有", "问题", "，", "因为", "它", "缺少", "一个", "必不可少", "的", "位置", "实参", "。", "\n", "我们", "还", "看到", "运行", "了", "一个", "单元测试", "（", "见", "❹", "）", "。", "最后", "，", "还", "看到", "了", "一条", "消息", "，", "它", "指出", "整个", "测试用例", "都", "未", "通过", "，", "因为", "运行", "该", "测试用例", "时", "发生", "了", "一个", "错误", "（", "见", "❺", "）", "。", "这", "条", "消息", "位于", "输出", "末", "\n", "尾", "，", "让", "你", "一眼", "就", "能", "看到", "—", "—", "你", "可不", "希望", "为", "获悉", "有", "多少", "测试", "未", "通过", "而", "翻阅", "长长的", "输出", "。", "\n", "11.1", ".", "4", "　", "测试", "未", "通过", "时", "怎么办", "\n", "　", "测试", "未", "通过", "时", "怎么办", "\n", "测试", "未", "通过", "时", "怎么办", "呢", "？", "如果", "你", "检查", "的", "条件", "没错", "，", "测试通过", "了", "意味着", "函数", "的", "行为", "是", "对", "的", "，", "而", "测试", "未", "通过", "意味着", "你", "编写", "的", "新", "代码", "有", "错", "。", "因此", "，", "测试", "未", "通过", "时", "，", "不要", "修改", "测试", "，", "而应"], ["修复", "导致", "测试", "不能", "通过", "的", "代码", "：", "检查", "刚", "对", "函数", "所", "做", "的", "修改", "，", "找出", "导致", "函数", "行为", "不", "符合", "预期", "的", "修改", "。", "\n", "在", "这个", "示例", "中", "，", "get", "_", "formatted", "_", "name", "(", ")", " ", "以前", "只", "需要", "两个", "实参", "—", "—", "名和姓", "，", "但", "现在", "它", "要求", "提供", "名", "、", "中间", "名和姓", "。", "新增", "的", "中间", "名", "参数", "是", "必不可少", "的", "，", "这导", "\n", "致", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "行为", "不", "符合", "预期", "。", "就", "这里", "而言", "，", "最佳", "的", "选择", "是", "让", "中间", "名", "变为", "可选", "的", "。", "这样", "做后", "，", "使用", "类似", "于", "Janis", " ", "Joplin", "的", "姓名", "进行", "测试", "时", "，", "测试", "就", "会", "通过", "了", "，", "同", "\n", "时", "这个", "函数", "还", "能", "接受", "中间", "名", "。", "下面", "来", "修改", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "将", "中间", "名", "设置", "为", "可选", "的", "，", "然后", "再次", "运行", "这个", "测试用例", "。", "如果", "通过", "了", "，", "我们", "接着", "确认", "这个", "函数", "能够", "妥善", "地", "\n", "处理", "中间", "名", "。", "\n", "要", "将", "中间", "名", "设置", "为", "可选", "的", "，", "可", "在", "函数", "定义", "中将", "形参", "middle", " ", "移到", "形参", "列表", "末尾", "，", "并", "将", "其", "默认值", "指定", "为", "一个", "空", "字符串", "。", "我们", "还要", "添加", "一个", "if", " ", "测试", "，", "以便", "根据", "是否", "提供", "了", "中间", "名", "相应", "\n", "地", "创建", "姓名", "：", "\n", "name", "_", "function", ".", "py", "\n", "def", " ", "get", "_", "formatted", "_", "name", "(", "first", ",", " ", "last", ",", " ", "middle", "=", "'", "'", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "生成", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "middle", ":"], ["\"", "\"", "\"", "生成", "整洁", "的", "姓名", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "middle", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", " ", "+", " ", "'", " ", "'", " ", "+", " ", "middle", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "\n", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "full", "_", "name", " ", "=", " ", "first", " ", "+", " ", "'", " ", "'", " ", "+", " ", "last", "\n", " ", " ", " ", " ", "return", " ", "full", "_", "name", ".", "title", "(", ")", "\n", "在", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "这个", "新", "版本", "中", "，", "中间", "名是", "可选", "的", "。", "如果", "向", "这个", "函数", "传递", "了", "中间", "名", "（", "if", " ", "middle", ":", " ", "）", "，", "姓名", "将", "包含", "名", "、", "中间", "名和姓", "，", "否则", "姓名", "将", "只", "包含", "名和姓", "。", "\n", "现在", "，", "对于", "两种", "不同", "的", "姓名", "，", "这个", "函数", "都", "应该", "能够", "正确", "地", "处理", "。", "为", "确定", "这个", "函数", "依然", "能够", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "，", "我们", "再次", "运行", "test", "_", "name", "_", "function", ".", "py", "：", "\n", ".", "\n", "----------------------------------------------------------------------", "\n", "Ran", " ", "1", " ", "test", " ", "in", " ", "0.000", "s", "\n", "OK"], ["Ran", " ", "1", " ", "test", " ", "in", " ", "0.000", "s", "\n", "OK", "\n", "现在", "，", "测试用例", "通过", "了", "。", "太好了", "，", "这", "意味着", "这个", "函数", "又", "能", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "了", "，", "而且", "我们", "无需", "手工", "测试", "这个", "函数", "。", "这个", "函数", "很", "容易", "就", "修复", "了", "，", "因为", "未", "通过", "的", "测试", "\n", "让", "我们", "得知", "新", "代码", "破坏", "了", "函数", "原来", "的", "行为", "。", "\n", "11.1", ".", "5", "　", "添加", "新", "测试", "\n", "　", "添加", "新", "测试", "\n", "确定", "get", "_", "formatted", "_", "name", "(", ")", " ", "又", "能", "正确", "地", "处理", "简单", "的", "姓名", "后", "，", "我们", "再", "编写", "一个", "测试", "，", "用于", "测试", "包含", "中间", "名", "的", "姓名", "。", "为此", "，", "我们", "在", "NamesTestCase", " ", "类中", "再", "添加", "一个", "方法", "：", "\n", " ", " ", "import", " ", "unittest", "\n", " ", " ", "from", " ", "name", "_", "function", " ", "import", " ", "get", "_", "formatted", "_", "name", "\n", " ", " ", "class", " ", "NamesTestCase", "(", "unittest", ".", "TestCase", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "name", "_", "function", ".", "py", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "first", "_", "last", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "能够", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "吗", "？", "\"", "\"", "\""], ["\"", "\"", "\"", "能够", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "吗", "？", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "'", "janis", "'", ",", " ", "'", "joplin", "'", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertEqual", "(", "formatted", "_", "name", ",", " ", "'", "Janis", " ", "Joplin", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "first", "_", "last", "_", "middle", "_", "name", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "能够", "正确", "地", "处理", "像", "Wolfgang", " ", "Amadeus", " ", "Mozart", "这样", "的", "姓名", "吗", "？", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "formatted", "_", "name", " ", "=", " ", "get", "_", "formatted", "_", "name", "(", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "wolfgang", "'", ",", " ", "'", "mozart", "'", ",", " ", "'", "amadeus", "'", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertEqual", "(", "formatted", "_", "name", ",", " ", "'", "Wolfgang", " ", "Amadeus", " ", "Mozart", "'", ")", "\n", " ", " ", "unittest", ".", "main", "(", ")"], ["unittest", ".", "main", "(", ")", "\n", "我们", "将", "这个", "方法", "命名", "为", "test", "_", "first", "_", "last", "_", "middle", "_", "name", "(", ")", " ", "。", "方法", "名", "必须", "以", "test", "_", "打头", "，", "这样", "它", "才", "会", "在", "我们", "运行", "test", "_", "name", "_", "function", ".", "py", "时", "自动", "运行", "。", "这个", "方法", "名", "清楚", "地", "指出", "了", "它", "测", "\n", "试", "的", "是", "get", "_", "formatted", "_", "name", "(", ")", " ", "的", "哪个", "行为", "，", "这样", "，", "如果", "该", "测试", "未", "通过", "，", "我们", "就", "会", "马上", "知道", "受", "影响", "的", "是", "哪种", "类型", "的", "姓名", "。", "在", "TestCase", " ", "类中", "使用", "很长", "的", "方法", "名是", "可以", "的", "；", "这", "\n", "些", "方法", "的", "名称", "必须", "是", "描述性", "的", "，", "这", "才能", "让", "你", "明白", "测试", "未", "通过", "时", "的", "输出", "；", "这些", "方法", "由", "Python", "自动", "调用", "，", "你", "根本", "不用", "编写", "调用", "它们", "的", "代码", "。", "\n", "为", "测试函数", "get", "_", "formatted", "_", "name", "(", ")", " ", "，", "我们", "使用", "名", "、", "姓", "和", "中间", "名", "调用", "它", "（", "见", "❶", "）", "，", "再", "使用", "assertEqual", "(", ")", " ", "检查", "返回", "的", "姓名", "是否", "与", "预期", "的", "姓名", "（", "名", "、", "中间", "名和姓", "）", "一致", "。", "我", "\n", "们", "再次", "运行", "test", "_", "name", "_", "function", ".", "py", "时", "，", "两个", "测试", "都", "通过", "了", "：", "\n", "..", "\n", "----------------------------------------------------------------------", "\n", "Ran", " ", "2", " ", "tests", " ", "in", " ", "0.000", "s", "\n", "OK"], ["Ran", " ", "2", " ", "tests", " ", "in", " ", "0.000", "s", "\n", "OK", "\n", "太好了", "！", "现在", "我们", "知道", "，", "这个", "函数", "又", "能", "正确", "地", "处理", "像", "Janis", " ", "Joplin", "这样", "的", "姓名", "了", "，", "我们", "还", "深信", "它", "也", "能够", "正确", "地", "处理", "像", "Wolfgang", " ", "Amadeus", " ", "Mozart", "这样", "的", "姓名", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "11", "-", "1", " ", "城市", "和", "国家", "\n", "城市", "和", "国家", " ", "：", "编写", "一个", "函数", "，", "它", "接受", "两个", "形参", "：", "一个", "城市", "名", "和", "一个", "国家", "名", "。", "这个", "函数", "返回", "一个", "格式", "为", "City", ",", " ", "Country", " ", "的", "字符串", "，", "如", "Santiago", ",", " ", "Chile", " ", "。", "将", "\n", "这个", "函数", "存储", "在", "一个", "名为", "city", "_", "functions", ".", "py", "的", "模块", "中", "。"], ["创建", "一个", "名为", "test", "_", "cities", ".", "py", "的", "程序", "，", "对刚", "编写", "的", "函数", "进行", "测试", "（", "别忘了", "，", "你", "需要", "导入", "模块", "unittest", " ", "以及", "要", "测试", "的", "函数", "）", "。", "编写", "一个", "名为", "test", "_", "city", "_", "country", "(", ")", " ", "的", "\n", "方法", "，", "核实", "使用", "类似", "于", "'", "santiago", "'", " ", "和", "'", "chile", "'", " ", "这样", "的", "值来", "调用", "前述", "函数", "时", "，", "得到", "的", "字符串", "是", "正确", "的", "。", "运行", "test", "_", "cities", ".", "py", " ", "，", "确认", "测", "\n", "试", "test", "_", "city", "_", "country", "(", ")", " ", "通过", "了", "。", "\n", "11", "-", "2", " ", "人口数量", "\n", "人口数量", " ", "：", "修改", "前面", "的", "函数", "，", "使", "其", "包含", "第三个", "必不可少", "的", "形参", "population", " ", "，", "并", "返回", "一个", "格式", "为", "City", ",", " ", "Country", " ", "-", " ", "population", " ", "xxx", " ", "的", "字符串", "，", "\n", "如", "Santiago", ",", " ", "Chile", " ", "-", " ", "population", " ", "5000000", " ", "。", "运行", "test", "_", "cities", ".", "py", "，", "确认", "测试", "test", "_", "city", "_", "country", "(", ")", " ", "未", "通过", "。", "\n", "修改", "上述", "函数", "，", "将", "形参", "population", " ", "设置", "为", "可选", "的", "。", "再次", "运行", "test", "_", "cities", ".", "py", "，", "确认", "测试", "test", "_", "city", "_", "country", "(", ")", " ", "又", "通过", "了", "。"], ["再", "编写", "一个", "名为", "test", "_", "city", "_", "country", "_", "population", "(", ")", " ", "的", "测试", "，", "核实", "可以", "使用", "类似", "于", "'", "santiago", "'", " ", "、", "'", "chile", "'", " ", "和", "'", "population", "=", "5000000", "'", " ", "这样", "的", "值来", "调用", "\n", "这个", "函数", "。", "再次", "运行", "test", "_", "cities", ".", "py", "，", "确认", "测试", "test", "_", "city", "_", "country", "_", "population", "(", ")", " ", "通过", "了", "。", "\n", "11.2", "　", "测试", "类", "\n", "　", "测试", "类", "\n", "在", "本章", "前半部", "分", "，", "你", "编写", "了", "针对", "单个", "函数", "的", "测试", "，", "下面", "来", "编写", "针对", "类", "的", "测试", "。", "很多", "程序", "中", "都", "会", "用到", "类", "，", "因此", "能够", "证明", "你", "的", "类", "能够", "正确", "地", "工作", "会", "大有裨益", "。", "如果", "针对", "类", "的", "测试通过", "\n", "了", "，", "你", "就", "能", "确信", "对类", "所", "做", "的", "改进", "没有", "意外", "地", "破坏", "其", "原有", "的", "行为", "。", "\n", "11.2", ".", "1", "　", "各种", "断言", "方法", "\n", "　", "各种", "断言", "方法", "\n", "Python", "在", "unittest", ".", "TestCase", " ", "类中", "提供", "了", "很多", "断言", "方法", "。", "前面", "说", "过", "，", "断言", "方法", "检查", "你", "认为", "应该", "满足", "的", "条件", "是否", "确实", "满足", "。", "如果", "该", "条件", "确实", "满足", "，", "你", "对", "程序", "行为", "的", "假设", "就", "得到", "了", "\n", "确认", "，", "你", "就", "可以", "确信", "其中", "没有", "错误", "。", "如果", "你", "认为", "应该", "满足", "的", "条件", "实际上", "并", "不", "满足", "，", "Python", "将", "引发", "异常", "。"], ["确认", "，", "你", "就", "可以", "确信", "其中", "没有", "错误", "。", "如果", "你", "认为", "应该", "满足", "的", "条件", "实际上", "并", "不", "满足", "，", "Python", "将", "引发", "异常", "。", "\n", "表", "11", "-", "1", "描述", "了", "6", "个", "常用", "的", "断言", "方法", "。", "使用", "这些", "方法", "可", "核实", "返回", "的", "值", "等于", "或", "不", "等于", "预期", "的", "值", "、", "返回", "的", "值", "为", "True", " ", "或", "False", " ", "、", "返回", "的", "值", "在", "列表", "中", "或", "不", "在", "列表", "中", "。", "你", "只能", "在", "继", "\n", "承", "unittest", ".", "TestCase", " ", "的", "类", "中", "使用", "这些", "方法", "，", "下面", "来", "看看", "如何", "在", "测试", "类时", "使用", "其中", "的", "一个", "。", "\n", "表", "\n", "表", "11", "-", "1", "　", "\n", "　", "unittest", " ", "Module", "中", "的", "断言", "方法", "\n", "中", "的", "断言", "方法", "\n", "方法", "\n", "方法", "\n", "用途", "\n", "用途", "\n", "assertEqual", "(", "a", ",", " ", "b", ")", "\n", "核实", "a", " ", "=", "=", " ", "b", "\n", "assertNotEqual", "(", "a", ",", " ", "b", ")", "\n", "核实", "a", " ", "!", "=", " ", "b", "\n", "assertTrue", "(", "x", ")", "\n", "核实", "x", " ", "为", "True", "\n", "assertFalse", "(", "x", ")", "\n", "核实", "x", " ", "为", "False", "\n", "assertIn", "(", "item", " ", ",", " ", "list", " ", ")", "\n", "核实", " ", "item", " ", "在", " ", "list", " ", "中", "\n", "assertNotIn", "(", "item", " ", ",", " ", "list", " ", ")", "\n", "核实", " ", "item", " ", "不", "在", " ", "list", " ", "中", "\n", "11.2", ".", "2", "　", "一个", "要", "测试", "的", "类", "\n", "　", "一个", "要", "测试", "的", "类"], ["核实", " ", "item", " ", "不", "在", " ", "list", " ", "中", "\n", "11.2", ".", "2", "　", "一个", "要", "测试", "的", "类", "\n", "　", "一个", "要", "测试", "的", "类", "\n", "类", "的", "测试", "与", "函数", "的", "测试", "相似", "—", "—", "你", "所", "做", "的", "大部分", "工作", "都", "是", "测试", "类中", "方法", "的", "行为", "，", "但", "存在", "一些", "不同之处", "，", "下面", "来", "编写", "一个", "类", "进行", "测试", "。", "来看", "一个", "帮助", "管理", "匿名", "调查", "的", "类", "：", "\n", "survey", ".", "py", "\n", " ", " ", "class", " ", "AnonymousSurvey", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "收集", "匿名", "调查", "问卷", "的", "答案", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "question", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "存储", "一个", "问题", "，", "并", "为", "存储", "答案", "做", "准备", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "question", " ", "=", " ", "question", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "responses", " ", "=", " ", "[", "]", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "show", "_", "question", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "调查", "问卷", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "question", ")", "\n", "❸", " ", " ", " ", " ", " ", "def", " ", "store", "_", "response", "(", "self", ",", " ", "new", "_", "response", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "存储", "单份", "调查", "答卷", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "responses", ".", "append", "(", "new", "_", "response", ")"], ["self", ".", "responses", ".", "append", "(", "new", "_", "response", ")", "\n", "❹", " ", " ", " ", " ", " ", "def", " ", "show", "_", "results", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "收集", "到", "的", "所有", "答卷", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Survey", " ", "results", ":", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "response", " ", "in", " ", "responses", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "'", "-", " ", "'", " ", "+", " ", "response", ")", "\n", "这个", "类", "首先", "存储", "了", "一个", "你", "指定", "的", "调查", "问题", "（", "见", "❶", "）", "，", "并", "创建", "了", "一个", "空", "列表", "，", "用于", "存储", "答案", "。", "这个", "类", "包含", "打印", "调查", "问题", "的", "方法", "（", "见", "❷", "）", "、", "在", "答案", "列表", "中", "添加", "新", "答案", "的", "方法", "（", "见", "❸", "）", "\n", "以及", "将", "存储", "在", "列表", "中", "的", "答案", "都", "打印", "出来", "的", "方法", "（", "见", "❹", "）", "。", "要", "创建", "这个", "类", "的", "实例", "，", "只", "需", "提供", "一个", "问题", "即可", "。", "有", "了", "表示", "调查", "的", "实例", "后", "，", "就", "可", "使用", "show", "_", "question", "(", ")", " ", "来", "显示", "其中", "的", "问", "\n", "题", "，", "可", "使用", "store", "_", "response", "(", ")", " ", "来", "存储", "答案", "，", "并", "使用", "show", "_", "results", "(", ")", " ", "来", "显示", "调查结果", "。", "\n", "为", "证明", "AnonymousSurvey", " ", "类", "能够", "正确", "地", "工作", "，", "我们", "来", "编写", "一个", "使用", "它", "的", "程序", "：", "\n", "language", "_", "survey", ".", "py"], ["language", "_", "survey", ".", "py", "\n", "from", " ", "survey", " ", "import", " ", "AnonymousSurvey", "\n", "#", "定义", "一个", "问题", "，", "并", "创建", "一个", "表示", "调查", "的", "AnonymousSurvey", "对象", "\n", "question", " ", "=", " ", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\"", "\n", "my", "_", "survey", " ", "=", " ", "AnonymousSurvey", "(", "question", ")", "\n", "#", "显示", "问题", "并", "存储", "答案", "\n", "my", "_", "survey", ".", "show", "_", "question", "(", ")", "\n", "print", "(", "\"", "Enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ".", "\\", "n", "\"", ")", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "response", " ", "=", " ", "input", "(", "\"", "Language", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", "if", " ", "response", " ", "=", "=", " ", "'", "q", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", " ", " ", "my", "_", "survey", ".", "store", "_", "response", "(", "response", ")", "\n", "#", " ", "显示", "调查结果", "\n", "print", "(", "\"", "\\", "nThank", " ", "you", " ", "to", " ", "everyone", " ", "who", " ", "participated", " ", "in", " ", "the", " ", "survey", "!", "\"", ")", "\n", "my", "_", "survey", ".", "show", "_", "results", "(", ")"], ["这个", "程序定义", "了", "一个", "问题", "（", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", " ", "\"", " ", "）", "，", "并", "使用", "这个", "问题", "创建", "了", "一个", "AnonymousSurvey", " ", "对象", "。", "接下来", "，", "这个", "程序", "调", "\n", "用", "show", "_", "question", "(", ")", " ", "来", "显示", "问题", "，", "并", "提示", "用户", "输入", "答案", "。", "收到", "每个", "答案", "的", "同时", "将", "其", "存储", "起来", "。", "用户", "输入", "所有", "答案", "（", "输入", "q", " ", "要求", "退出", "）", "后", "，", "调用", "show", "_", "results", "(", ")", " ", "来", "打印", "调查", "\n", "结果", "：", "\n", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\n", "Enter", " ", "'", "q", "'", " ", "at", " ", "any", " ", "time", " ", "to", " ", "quit", ".", "\n", "Language", ":", " ", "English", "\n", "Language", ":", " ", "Spanish", "\n", "Language", ":", " ", "English", "\n", "Language", ":", " ", "Mandarin", "\n", "Language", ":", " ", "q", "\n", "Thank", " ", "you", " ", "to", " ", "everyone", " ", "who", " ", "participated", " ", "in", " ", "the", " ", "survey", "!", "\n", "Survey", " ", "results", ":", "\n", "-", " ", "English", "\n", "-", " ", "Spanish", "\n", "-", " ", "English", "\n", "-", " ", "Mandarin"], ["-", " ", "English", "\n", "-", " ", "Spanish", "\n", "-", " ", "English", "\n", "-", " ", "Mandarin", "\n", "AnonymousSurvey", " ", "类", "可", "用于", "进行", "简单", "的", "匿名", "调查", "。", "假设", "我们", "将", "它", "放在", "了", "模块", "survey", " ", "中", "，", "并", "想", "进行", "改进", "：", "让", "每位", "用户", "都", "可", "输入", "多个", "答案", "；", "编写", "一个", "方法", "，", "它", "只", "列出", "不同", "的", "答", "\n", "案", "，", "并", "指出", "每个", "答案", "出现", "了", "多少", "次", "；", "再", "编写", "一个", "类", "，", "用于", "管理", "非", "匿名", "调查", "。", "\n", "进行", "上述", "修改", "存在", "风险", "，", "可能", "会", "影响", "AnonymousSurvey", " ", "类", "的", "当前", "行为", "。", "例如", "，", "允许", "每位", "用户", "输入", "多个", "答案", "时", "，", "可能", "不", "小心", "修改", "了", "处理", "单个", "答案", "的", "方式", "。", "要", "确认", "在", "开发", "这个", "模块", "\n", "时", "没有", "破坏", "既有", "行为", "，", "可以", "编写", "针对", "这个", "类", "的", "测试", "。", "\n", "11.2", ".", "3", "　", "测试", "\n", "　", "测试", "AnonymousSurvey", " ", "类", "\n", "类", "\n", "下面", "来", "编写", "一个", "测试", "，", "对", "AnonymousSurvey", " ", "类", "的", "行为", "的", "一个", "方面", "进行", "验证", "：", "如果", "用户", "面对", "调查", "问题", "时", "只", "提供", "了", "一个", "答案", "，", "这个", "答案", "也", "能", "被", "妥善", "地", "存储", "。", "为此", "，", "我们", "将", "在", "这个", "答", "\n", "案", "被", "存储", "后", "，", "使用", "方法", "assertIn", "(", ")", " ", "来", "核实", "它", "包含", "在", "答案", "列表", "中", "：", "\n", "test", "_", "survey", ".", "py", "\n", " ", " ", "import", " ", "unittest", "\n", " ", " ", "from", " ", "survey", " ", "import", " ", "AnonymousSurvey"], ["from", " ", "survey", " ", "import", " ", "AnonymousSurvey", "\n", "❶", " ", "class", " ", "TestAnonmyousSurvey", "(", "unittest", ".", "TestCase", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "针对", "AnonymousSurvey", "类", "的", "测试", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "test", "_", "store", "_", "single", "_", "response", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "单个", "答案", "会", "被", "妥善", "地", "存储", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "question", " ", "=", " ", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\"", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "my", "_", "survey", " ", "=", " ", "AnonymousSurvey", "(", "question", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "my", "_", "survey", ".", "store", "_", "response", "(", "'", "English", "'", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertIn", "(", "'", "English", "'", ",", " ", "my", "_", "survey", ".", "responses", ")", "\n", " ", " ", "unittest", ".", "main", "(", ")"], ["unittest", ".", "main", "(", ")", "\n", "我们", "首先", "导入", "了", "模块", "unittest", " ", "以及", "要", "测试", "的", "类", "AnonymousSurvey", " ", "。", "我们", "将", "测试用例", "命名", "为", "TestAnonymousSurvey", " ", "，", "它", "也", "继承", "了", "unittest", ".", "TestCase", " ", "（", "见", "❶", "）", "。", "第", "\n", "一个", "测试方法", "验证", "调查", "问题", "的", "单个", "答案", "被", "存储", "后", "，", "会", "包含", "在", "调查结果", "列表", "中", "。", "对于", "这个", "方法", "，", "一个", "不错", "的", "描述性", "名称", "是", "test", "_", "store", "_", "single", "_", "response", "(", ")", " ", "（", "见", "❷", "）", "。", "如果", "\n", "这个", "测试", "未", "通过", "，", "我们", "就", "能", "通过", "输出", "中", "的", "方法", "名", "得知", "，", "在", "存储", "单个", "调查", "答案", "方面", "存在", "问题", "。", "\n", "要", "测试", "类", "的", "行为", "，", "需要", "创建", "其实", "例", "。", "在", "❸", "处", "，", "我们", "使用", "问题", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\"", " ", "创建", "了", "一个", "名为", "my", "_", "survey", " ", "的", "实例", "，", "然后", "使用", "方", "\n", "法", "store", "_", "response", "(", ")", " ", "存储", "了", "单个", "答案", "English", " ", "。", "接下来", "，", "我们", "检查", "English", " ", "是否", "包含", "在", "列表", "my", "_", "survey", ".", "responses", " ", "中", "，", "以", "核实", "这个", "答案", "是否", "被", "妥善", "地", "存储", "了", "（", "见", "\n", "❹", "）", "。", "\n", "当", "我们", "运行", "test", "_", "survey", ".", "py", "时", "，", "测试通过", "了", "：", "\n", "."], ["❹", "）", "。", "\n", "当", "我们", "运行", "test", "_", "survey", ".", "py", "时", "，", "测试通过", "了", "：", "\n", ".", "\n", "----------------------------------------------------------------------", "\n", "Ran", " ", "1", " ", "test", " ", "in", " ", "0.001", "s", "\n", "OK", "\n", "这", "很", "好", "，", "但", "只能", "收集", "一个", "答案", "的", "调查", "用途", "不", "大", "。", "下面", "来", "核实", "用户", "提供", "三个", "答案", "时", "，", "它们", "也", "将", "被", "妥善", "地", "存储", "。", "为此", "，", "我们", "在", "TestAnonymousSurvey", " ", "中", "再", "添加", "一个", "方法", "：", "\n", " ", " ", "import", " ", "unittest", "\n", " ", " ", "from", " ", "survey", " ", "import", " ", "AnonymousSurvey", "\n", " ", " ", "class", " ", "TestAnonymousSurvey", "(", "unittest", ".", "TestCase", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "针对", "AnonymousSurvey", "类", "的", "测试", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "store", "_", "single", "_", "response", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "单个", "答案", "会", "被", "妥善", "地", "存储", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "store", "_", "three", "_", "responses", "(", "self", ")", ":"], ["def", " ", "test", "_", "store", "_", "three", "_", "responses", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "三个", "答案", "会", "被", "妥善", "地", "存储", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "question", " ", "=", " ", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "my", "_", "survey", " ", "=", " ", "AnonymousSurvey", "(", "question", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "responses", " ", "=", " ", "[", "'", "English", "'", ",", " ", "'", "Spanish", "'", ",", " ", "'", "Mandarin", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "response", " ", "in", " ", "responses", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "my", "_", "survey", ".", "store", "_", "response", "(", "response", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "response", " ", "in", " ", "responses", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertIn", "(", "response", ",", " ", "my", "_", "survey", ".", "responses", ")", "\n", " ", " ", "unittest", ".", "main", "(", ")"], ["unittest", ".", "main", "(", ")", "\n", "我们", "将", "这个", "方法", "命名", "为", "test", "_", "store", "_", "three", "_", "responses", "(", ")", " ", "，", "并", "像", "test", "_", "store", "_", "single", "_", "response", "(", ")", " ", "一样", "，", "在", "其中", "创建", "一个", "调查", "对象", "。", "我们", "定义", "了", "一个", "包含", "三个", "不同", "答"], ["案", "的", "列表", "（", "见", "❶", "）", "，", "再", "对", "其中", "每个", "答案", "都", "调用", "store", "_", "response", "(", ")", " ", "。", "存储", "这些", "答案", "后", "，", "我们", "使用", "一个", "循环", "来", "确认", "每个", "答案", "都", "包含", "在", "my", "_", "survey", ".", "responses", " ", "中", "（", "见", "❷", "）", "。", "\n", "我们", "再次", "运行", "test", "_", "survey", ".", "py", "时", "，", "两个", "测试", "（", "针对", "单个", "答案", "的", "测试", "和", "针对", "三个", "答案", "的", "测试", "）", "都", "通过", "了", "：", "\n", "..", "\n", "----------------------------------------------------------------------", "\n", "Ran", " ", "2", " ", "tests", " ", "in", " ", "0.000", "s", "\n", "OK", "\n", "前述", "做法", "的", "效果", "很", "好", "，", "但", "这些", "测试", "有些", "重复", "的", "地方", "。", "下面", "使用", "unittest", " ", "的", "另", "一项", "功能", "来", "提高", "它们", "的", "效率", "。", "\n", "11.2", ".", "4", "　", "方法", "\n", "　", "方法", "setUp", "(", ")", "\n", "在", "前面", "的", "test", "_", "survey", ".", "py", "中", "，", "我们", "在", "每个", "测试方法", "中", "都", "创建", "了", "一个", "AnonymousSurvey", " ", "实例", "，", "并", "在", "每个", "方法", "中", "都", "创建", "了", "答案", "。", "unittest", ".", "TestCase", " ", "类", "包含", "方法", "setUp", "(", ")", " ", "，", "让", "我"], ["们", "只", "需", "创建", "这些", "对象", "一次", "，", "并", "在", "每个", "测试方法", "中", "使用", "它们", "。", "如果", "你", "在", "TestCase", " ", "类中", "包含", "了", "方法", "setUp", "(", ")", " ", "，", "Python", "将", "先", "运行", "它", "，", "再", "运行", "各个", "以", "test", "_", "打头", "的", "方法", "。", "这样", "，", "在", "你", "编写", "\n", "的", "每个", "测试方法", "中", "都", "可", "使用", "在", "方法", "setUp", "(", ")", " ", "中", "创建", "的", "对象", "了", "。", "\n", "下面", "使用", "setUp", "(", ")", " ", "来", "创建", "一个", "调查", "对象", "和", "一组", "答案", "，", "供", "方法", "test", "_", "store", "_", "single", "_", "response", "(", ")", " ", "和", "test", "_", "store", "_", "three", "_", "responses", "(", ")", " ", "使用", "：", "\n", " ", " ", "import", " ", "unittest", "\n", " ", " ", "from", " ", "survey", " ", "import", " ", "AnonymousSurvey", "\n", " ", " ", "class", " ", "TestAnonymousSurvey", "(", "unittest", ".", "TestCase", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "针对", "AnonymousSurvey", "类", "的", "测试", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "setUp", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "创建", "一个", "调查", "对象", "和", "一组", "答案", "，", "供", "使用", "的", "测试方法", "使用", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "question", " ", "=", " ", "\"", "What", " ", "language", " ", "did", " ", "you", " ", "first", " ", "learn", " ", "to", " ", "speak", "?", "\""], ["❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "my", "_", "survey", " ", "=", " ", "AnonymousSurvey", "(", "question", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "responses", " ", "=", " ", "[", "'", "English", "'", ",", " ", "'", "Spanish", "'", ",", " ", "'", "Mandarin", "'", "]", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "store", "_", "single", "_", "response", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "单个", "答案", "会", "被", "妥善", "地", "存储", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "my", "_", "survey", ".", "store", "_", "response", "(", "self", ".", "responses", "[", "0", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertIn", "(", "self", ".", "responses", "[", "0", "]", ",", " ", "self", ".", "my", "_", "survey", ".", "responses", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "test", "_", "store", "_", "three", "_", "responses", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "测试", "三个", "答案", "会", "被", "妥善", "地", "存储", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "response", " ", "in", " ", "self", ".", "responses", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "my", "_", "survey", ".", "store", "_", "response", "(", "response", ")"], ["for", " ", "response", " ", "in", " ", "self", ".", "responses", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "assertIn", "(", "response", ",", " ", "self", ".", "my", "_", "survey", ".", "responses", ")", "\n", " ", " ", "unittest", ".", "main", "(", ")", "\n", "方法", "setUp", "(", ")", " ", "做", "了", "两件", "事情", "：", "创建", "一个", "调查", "对象", "（", "见", "❶", "）", "；", "创建", "一个", "答案", "列表", "（", "见", "❷", "）", "。", "存储", "这", "两样", "东西", "的", "变量名", "包含", "前缀", "self", " ", "（", "即", "存储", "在", "属性", "中", "）", "，", "因此", "可", "在", "这个", "类", "的", "任何", "\n", "地方", "使用", "。", "这", "让", "两个", "测试方法", "都", "更", "简单", "，", "因为", "它们", "都", "不用", "创建", "调查", "对象", "和", "答案", "。", "方法", "test", "_", "store", "_", "three", "_", "response", "(", ")", " ", "核实", "self", ".", "responses", " ", "中", "的", "第一个", "答案", "\n", "—", "—", "self", ".", "responses", "[", "0", "]", " ", "—", "—", "被", "妥善", "地", "存储", "，", "而", "方法", "test", "_", "store", "_", "three", "_", "response", "(", ")", " ", "核实", "self", ".", "responses", " ", "中", "的", "全部", "三个", "答案", "都", "被", "妥善", "地", "存储", "。", "\n", "再次", "运行", "test", "_", "survey", ".", "py", "时", "，", "这", "两个", "测试", "也", "都", "通过", "了", "。", "如果", "要", "扩展", "AnonymousSurvey", " ", "，", "使", "其", "允许", "每位", "用户", "输入", "多个", "答案", "，", "这些", "测试", "将", "很", "有用", "。", "修改", "代码", "以", "接受", "多个", "答案", "后", "，", "可", "运"], ["行", "这些", "测试", "，", "确认", "存储", "单个", "答案", "或", "一系列", "答案", "的", "行为", "未受", "影响", "。", "\n", "测试", "自己", "编写", "的", "类时", "，", "方法", "setUp", "(", ")", " ", "让", "测试方法", "编写", "起来", "更", "容易", "：", "可", "在", "setUp", "(", ")", " ", "方法", "中", "创建", "一系列", "实例", "并", "设置", "它们", "的", "属性", "，", "再", "在", "测试方法", "中", "直接", "使用", "这些", "实例", "。", "相比", "于", "在", "每个", "\n", "测试方法", "中", "都", "创建", "实例", "并", "设置", "其", "属性", "，", "这要", "容易", "得", "多", "。", "\n", "注意", "\n", "注意", " ", "　", "运行", "测试用例", "时", "，", "每", "完成", "一个", "单元测试", "，", "Python", "都", "打印", "一个", "字符", "：", "测试通过", "时", "打印", "一个", "句点", "；", "测试", "引发", "错误", "时", "打印", "一个", "E", " ", "；", "测试", "导致", "断言", "失败", "时", "打印", "一个", "F", " ", "。", "\n", "这", "就是", "你", "运行", "测试用例", "时", "，", "在", "输出", "的", "第一行", "中", "看到", "的", "句点", "和", "字符", "数量", "各不相同", "的", "原因", "。", "如果", "测试用例", "包含", "很多", "单元测试", "，", "需要", "运行", "很", "长时间", "，", "就", "可", "通过观察", "这些", "结果", "\n", "来", "获悉", "有", "多少", "个", "测试通过", "了", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "11", "-", "3", " ", "雇员", "\n", "雇员", " ", "：", "编写", "一个", "名为", "Employee", " ", "的", "类", "，", "其", "方法", "__", "init", "__", "(", ")", " ", "接受", "名", "、", "姓", "和", "年薪", "，", "并", "将", "它们", "都", "存储", "在", "属性", "中", "。", "编写", "一个", "名为", "give", "_", "raise", "(", ")", " ", "的", "方法", "，", "它", "默认", "将", "\n", "年薪", "增加", "5000", "美元", "，", "但", "也", "能够", "接受", "其他", "的", "年薪", "增加量", "。"], ["年薪", "增加", "5000", "美元", "，", "但", "也", "能够", "接受", "其他", "的", "年薪", "增加量", "。", "\n", "为", "Employee", " ", "编写", "一个", "测试用例", "，", "其中", "包含", "两个", "测试方法", "：", "test", "_", "give", "_", "default", "_", "raise", "(", ")", " ", "和", "test", "_", "give", "_", "custom", "_", "raise", "(", ")", " ", "。", "使用", "方法", "setUp", "(", ")", " ", "，", "以免", "在", "\n", "每个", "测试方法", "中", "都", "创建", "新", "的", "雇员", "实例", "。", "运行", "这个", "测试用例", "，", "确认", "两个", "测试", "都", "通过", "了", "。", "\n", "11.3", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "使用", "模块", "unittest", " ", "中", "的", "工具", "来", "为", "函数", "和", "类", "编写", "测试", "；", "如何", "编写", "继承", "unittest", ".", "TestCase", " ", "的", "类", "，", "以及", "如何", "编写", "测试方法", "，", "以", "核实", "函数", "和", "类", "的", "行为", "\n", "符合", "预期", "；", "如何", "使用", "方法", "setUp", "(", ")", " ", "来", "根据", "类", "高效", "地", "创建", "实例", "并", "设置", "其", "属性", "，", "以便", "在", "类", "的", "所有", "测试方法", "中", "都", "可", "使用", "它们", "。", "\n", "测试", "是", "很多", "初学者", "都", "不", "熟悉", "的", "主题", "。", "作为", "初学者", "，", "并非", "必须", "为", "你", "尝试", "的", "所有", "项目", "编写", "测试", "；", "但", "参与", "工作量", "较大", "的", "项目", "时", "，", "你", "应对", "自己", "编写", "的", "函数", "和", "类", "的", "重要", "行为", "进行", "测试", "。", "这样", "\n", "你", "就", "能够", "更加", "确定", "自己", "所", "做", "的", "工作", "不会", "破坏", "项目", "的", "其他", "部分", "，", "你", "就", "能够", "随心所欲", "地", "改进", "既有", "代码", "了", "。", "如果", "不", "小心", "破坏", "了", "原来", "的", "功能", "，", "你", "马上", "就", "会", "知道", "，", "从而", "能够", "轻松", "地", "修复", "问"], ["题", "。", "相比", "于", "等到", "不", "满意", "的", "用户", "报告", "bug", "后", "再", "采取措施", "，", "在", "测试", "未", "通过", "时", "采取措施", "要", "容易", "得", "多", "。", "\n", "如果", "你", "在", "项目", "中", "包含", "了", "初步", "测试", "，", "其他", "程序员", "将", "更", "敬佩", "你", "，", "他们", "将", "能够", "更", "得心应手", "地", "尝试", "使用", "你", "编写", "的", "代码", "，", "也", "更", "愿意", "与", "你", "合作开发", "项目", "。", "如果", "你", "要", "跟", "其他", "程序员", "开发", "的", "项目", "共", "\n", "享", "代码", "，", "就", "必须", "证明", "你", "编写", "的", "代码", "通过", "了", "既有", "测试", "，", "通常", "还", "需要", "为", "你", "添加", "的", "新", "行为", "编写", "测试", "。", "\n", "请", "通过", "多", "开展", "测试", "来", "熟悉", "代码", "测试", "过程", "。", "对于", "自己", "编写", "的", "函数", "和", "类", "，", "请", "编写", "针对", "其", "重要", "行为", "的", "测试", "，", "但", "在", "项目", "早期", "，", "不要", "试图", "去", "编写", "全", "覆盖", "的", "测试用例", "，", "除非", "有", "充分", "的", "理由", "这样", "\n", "做", "。", "\n", "第二", "部分", "　", "项目", "\n", "第二", "部分", "　", "项目", "\n", "祝贺", "你", "！", "你", "现在", "已", "对", " ", "Python", " ", "有", "了", "足够", "的", "认识", "，", "可以", "开始", "开发", "有意思", "的", "交互式", "项目", "了", "。", "通过", "动手", "开发", "项目", "，", "可", "学到", "新技能", "，", "并", "更", "深入", "地", "理解", "第一", "部分", "介绍", "的", "概念", "。", "\n", "第二", "部分", "包含", "三个", "不同", "类型", "的", "项目", "，", "你", "可以", "选择", "完成", "其中", "的", "任何", "项目", "或", "全部", "项目", "，", "完成", "这些", "项目", "的", "顺序", "无关紧要", "。", "下面", "简要地", "描述", "每个", "项目", "，", "帮助", "你", "决定", "首先", "去", "完成", "哪个", "项目", "。"], ["外星人", "入侵", "：", "使用", "\n", "外星人", "入侵", "：", "使用", " ", "Python", " ", "开发", "游戏", "\n", "开发", "游戏", "\n", "在", "项目", "“", "外星人", "入侵", "”", "（", "第", " ", "12", "~", "14", " ", "章", "）", "中", "，", "你", "将", "使用", " ", "Pygame", " ", "包来", "开发", "一款", " ", "2D", " ", "游戏", "，", "它", "在", "玩家", "每", "消灭", "一群", "向下", "移动", "的", "外星人", "后", "，", "都", "将", "玩家", "提高", "一个", "等级", "；", "而", "等级", "越高", "，", "游戏", "的", "节奏", "\n", "越", "快", "，", "难度", "越大", "。", "完成", "这个", "项目", "后", "，", "你", "将", "获得", "自己", "动手", "使用", " ", "Pygame", " ", "开发", " ", "2D", " ", "游戏", "所", "需", "的", "技能", "。", "\n", "数据", "可视化", "\n", "数据", "可视化", "\n", "“", "数据", "可视化", "”", "项目", "始于", "第", " ", "15", " ", "章", "，", "在", "这", "一章", "中", "，", "你", "将", "学习", "如何", "使用", " ", "matplotlib", " ", "和", " ", "Pygal", " ", "来", "生成", "数据", "，", "以及", "根据", "这些", "数据", "创建", "实用", "而", "漂亮", "的", "图表", "。", "第", " ", "16", " ", "章", "介绍", "如何", "从", "网上", "获取数据", "，", "并", "\n", "将", "它们", "提供", "给", "可视化", "包以", "创建", "天气图", "和", "世界", "人口", "地图", "。", "最后", "，", "第", " ", "17", " ", "章", "介绍", "如何", "编写", "自动", "下载", "数据", "并", "对", "其", "进行", "可视化", "的", "程序", "。", "学习", "可视化", "让", "你", "可以", "探索", "数据挖掘", "领域", "，", "这是", "当前", "在", "\n", "全球", "都", "非常", "吃香", "的", "技能", "。", "\n", "Web", " ", "应用程序", "\n", "应用程序", "\n", "在", "“", "Web", " ", "应用程序", "”", "项目", "（", "第", " ", "18", "~", "20", " ", "章", "）", "中", "，", "你", "将", "使用", " ", "Django", " ", "包来", "创建", "一个", "简单", "的", " ", "Web", " ", "应用程序", "，", "它", "让", "用户", "能够", "记录", "任意", "多个", "一直", "在", "学习", "的", "主题", "。", "用户", "将", "通过", "指定", "用户名", "和", "密码", "来"], ["创建", "账户", "，", "输入", "主题", "，", "并", "编写", "条目", "来", "记录", "学习", "的", "内容", "。", "你", "还", "将", "学习", "如何", "部署", "应用程序", "，", "让", "世界", "上", "的", "任何人", "都", "能够", "访问", "它", "。", "\n", "完成", "这个", "项目", "后", "，", "你", "将", "能够", "自己", "动手", "创建", "简单", "的", " ", "Web", " ", "应用程序", "，", "并", "能够", "深入", "学习", "其他", "有关", "如何", "使用", " ", "Django", " ", "开发", "应用程序", "的", "资料", "。", "\n", "项目", "\n", "项目", "1", "　", "外星人", "入侵", "\n", "　", "外星人", "入侵", "\n", "第", "\n", "第", " ", "12", " ", "章", "　", "武装", "飞船", "\n", "章", "　", "武装", "飞船", "\n", "我们", "来", "开发", "一个", "游戏吧", "！", "我们", "将", "使用", "Pygame", "，", "这是", "一组", "功能强大", "而", "有趣", "的", "模块", "，", "可", "用于", "管理", "图形", "、", "动画", "乃至", "声音", "，", "让", "你", "能够", "更", "轻松", "地", "开发", "复杂", "的", "游戏", "。", "通过", "使用", "\n", "Pygame", "来", "处理", "在", "屏幕", "上", "绘制", "图像", "等", "任务", "，", "你", "不用", "考虑", "众多", "烦琐", "而", "艰难", "的", "编码", "工作", "，", "而是", "将", "重点", "放在", "程序", "的", "高级", "逻辑", "上", "。", "\n", "在", "本章", "中", "，", "你", "将", "安装", "Pygame", "，", "再", "创建", "一艘", "能够", "根据", "用户", "输入", "而", "左右", "移动", "和", "射击", "的", "飞船", "。", "在", "接下来", "的", "两章", "中", "，", "你", "将", "创建", "一群", "作为", "射杀", "目标", "的", "外星人", "，", "并", "做", "其他", "的", "改进", "，", "\n", "如", "限制", "可", "供", "玩家", "使用", "的", "飞船", "数", "以及", "添加", "记分牌", "。", "\n", "从", "本章", "开始", "，", "你", "还", "将", "学习", "管理", "包含", "多个", "文件", "的", "项目", "。", "我们", "将", "重构", "很多", "代码", "，", "以", "提高", "代码", "的", "效率", "，", "并", "管理文件", "的", "内容", "，", "以", "确保", "项目", "组织", "有序", "。"], ["创建", "游戏", "是", "趣学", "语言", "的", "理想", "方式", "。", "看", "别人", "玩", "你", "编写", "的", "游戏", "让", "你", "很", "有", "满足感", "，", "而", "编写", "简单", "的", "游戏", "有助于", "你", "明白", "专业级", "游戏", "是", "怎么", "编写", "出来", "的", "。", "在", "阅读", "本章", "的", "过程", "中", "，", "请", "\n", "动手", "输入", "并", "运行", "代码", "，", "以", "明白", "各个", "代码", "块", "对", "整个", "游戏", "所", "做", "的", "贡献", "，", "并", "尝试", "不同", "的", "值", "和", "设置", "，", "这样", "你", "将", "对", "如何", "改进", "游戏", "的", "交互性", "有", "更", "深入", "的", "认识", "。", "\n", "　", "\n", "注意", "\n", "注意", " ", "　", "游戏", "《", "外星人", "入侵", "》", "将", "包含", "很多", "不同", "的", "文件", "，", "因此", "请", "在", "你", "的", "系统", "中", "新建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "alien", "_", "invasion", " ", "。", "请", "务必", "将", "这个", "项目", "的", "所有", "文件", "都", "存储", "\n", "到", "这个", "文件夹", "中", "，", "这样", "相关", "的", "import", "语句", "才能", "正确", "地", "工作", "。", "\n", "12.1", "　", "规划", "项目", "\n", "　", "规划", "项目", "\n", "开发", "大型项目", "时", "，", "做好", "规划", "后", "再", "动手", "编写", "项目", "很", "重要", "。", "规划", "可", "确保", "你", "不", "偏离", "轨道", "，", "从而", "提高", "项目", "成功", "的", "可能性", "。", "\n", "下面", "来", "编写", "有关", "游戏", "《", "外星人", "入侵", "》", "的", "描述", "，", "其中", "虽然", "没有", "涵盖", "这", "款", "游戏", "的", "所有", "细节", "，", "但", "能", "让", "你", "清楚", "地", "知道", "该", "如何", "动手", "开发", "它", "。", "\n", "在", "游戏", "《", "外星人", "入侵", "》", "中", "，", "玩家", "控制", "着", "一艘", "最初", "出现", "在", "屏幕", "底部", "中央", "的", "飞船", "。", "玩家", "可以", "使用", "箭头键", "左右", "移动", "飞船", "，", "还", "可", "使用", "空格键", "进行", "射击", "。", "游戏", "开始", "时", "，", "一群", "外星"], ["人", "出现", "在", "天空", "中", "，", "他们", "在", "屏幕", "中", "向下", "移动", "。", "玩家", "的", "任务", "是", "射杀", "这些", "外星人", "。", "玩家", "将", "所有", "外星人", "都", "消灭", "干净", "后", "，", "将", "出现", "一群", "新", "的", "外星人", "，", "他们", "移动", "的", "速度", "更", "快", "。", "只要", "有", "\n", "外星人", "撞", "到", "了", "玩家", "的", "飞船", "或", "到达", "了", "屏幕", "底部", "，", "玩家", "就", "损失", "一艘", "飞船", "。", "玩家", "损失", "三艘", "飞船", "后", "，", "游戏", "结束", "。", "\n", "在", "第一个", "开发阶段", "，", "我们", "将", "创建", "一艘", "可", "左右", "移动", "的", "飞船", "，", "这艘", "飞船", "在", "用户", "按", "空格键", "时", "能够", "开火", "。", "设置", "好", "这种", "行为", "后", "，", "我们", "就", "能够", "将", "注意力", "转向", "外星人", "，", "并", "提高", "这", "款", "游戏", "的", "可", "玩", "\n", "性", "。"], ["12.2", "　", "安装", "\n", "　", "安装", "Pygame", "\n", "开始", "编码", "前", "，", "先", "来", "安装", "Pygame", "。", "下面", "介绍", "如何", "在", "Linux", "、", "OS", " ", "X", "和", "Microsoft", " ", "Windows", "中", "安装", "Pygame", "。", "\n", "如果", "你", "使用", "的", "是", "Linux", "系统", "和", "Python", " ", "3", "，", "或者", "是", "OS", " ", "X", "系统", "，", "就", "需要", "使用", "pip", "来", "安装", "Pygame", "。", "pip", "是", "一个", "负责", "为", "你", "下载", "并", "安装", "Python", "包", "的", "程序", "。", "接下来", "的", "几", "小节", "介绍", "如何", "使用", "pip", "来", "安装", "\n", "Python", "包", "。", "\n", "如果", "你", "使用", "的", "是", "Linux", "系统", "和", "Python", " ", "2.7", "，", "或者", "是", "Windows", "，", "就", "无需", "使用", "pip", "来", "安装", "Pygame", "；", "在", "这种", "情况", "下", "，", "请", "直接", "跳到", "12.2", ".", "2", "节", "或", "12.2", ".", "4", "节", "。", "\n", "注意", "\n", "注意", " ", "　", "接下来", "的", "部分", "包含", "在", "各种", "系统", "上", "安装", "pip", "的", "说明", "，", "因为", "数据", "可视化", "项目", "和", "Web", "应用程序", "项目", "都", "需要", "pip", "。", "这些", "说明", "也", "可", "在", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", "\n", "在线", "资源", "中", "找到", "。", "如果", "安装", "时", "遇到", "麻烦", "，", "看看", "在线", "说明", "是否", "管用", "。", "\n", "12.2", ".", "1", "　", "使用", "\n", "　", "使用", "pip", "安装", "\n", "安装", "Python", "包", "\n", "包", "\n", "大多数", "较", "新", "的", "Python", "版本", "都", "自带", "pip", "，", "因此", "首先", "可", "检查", "系统", "是否", "已经", "安装", "了", "pip", "。", "在", "Python", " ", "3", "中", "，", "pip", "有时", "被", "称为", "pip3", "。", "\n", "1", ".", " ", "在"], ["1", ".", " ", "在", "\n", "在", "Linux", "和", "\n", "和", "OS", " ", "X", "系统", "中", "检查", "是否", "安装", "了", "\n", "系统", "中", "检查", "是否", "安装", "了", "pip", "\n", "打开", "一个", "终端", "窗口", "，", "并", "执行", "如下", "命令", "：", "\n", " ", " ", "$", " ", "pip", " ", "--", "version", "\n", "❶", " ", "pip", " ", "7.0", ".", "3", " ", "from", " ", "/", "usr", "/", "local", "/", "lib", "/", "python3.5", "/", "dist", "-", "packages", " ", "(", "python", " ", "3.5", ")", "\n", " ", " ", "$", "\n", "如果", "你", "的", "系统", "只", "安装", "了", "一个", "版本", "的", "Python", "，", "并", "看到", "了", "类似", "于", "上面", "的", "输出", "，", "请", "跳", "到", "12.2", ".", "2", "节", "或", "12.2", ".", "3", "节", "。", "如果", "出现", "了", "错误", "消息", "，", "请", "尝试", "将", "pip", "替换", "为", "pip3", "。", "如果", "这", "两个", "版本", "都", "没有", "安装", "到", "\n", "你", "的", "系统", "中", "，", "请", "跳", "到", "“", "安装", "pip", "”", "。", "\n", "如果", "你", "的", "系统", "安装", "了", "多个", "版本", "的", "Python", "，", "请", "核实", "pip", "关联", "到", "了", "你", "使用", "的", "Python", "版本", "，", "如", "python", " ", "3.5", "（", "见", "❶", "）", "。", "如果", "pip", "关联", "到", "了", "正确", "的", "Python", "版本", "，", "请", "跳", "到", "12.2", ".", "2", "节", "或", "12.2", ".", "3", "节", "。", "如果", "pip", "没", "\n", "有", "关联", "到", "正确", "的", "Python", "版本", "，", "请", "尝试", "将", "pip", "替换", "为", "pip3", "。", "如果", "执行", "这", "两个", "命令", "时", "，", "输出", "都", "表明", "没有", "关联", "到", "正确", "的", "Python", "版本", "，", "请", "跳", "到", "“", "安装", "pip", "”", "。", "\n", "2", ".", " ", "在", "\n", "在", "Windows", "系统", "中", "检查", "是否", "安装", "了", "\n", "系统", "中", "检查", "是否", "安装", "了", "pip", "\n", "打开", "一个", "终端", "窗口", "，", "并", "执行", "如下", "命令", "："], ["系统", "中", "检查", "是否", "安装", "了", "pip", "\n", "打开", "一个", "终端", "窗口", "，", "并", "执行", "如下", "命令", "：", "\n", " ", " ", "$", " ", "python", " ", "-", "m", " ", "pip", " ", "--", "version", "\n", "❶", " ", "pip", " ", "7.0", ".", "3", " ", "from", " ", "C", ":", "\\", "Python35", "\\", "lib", "\\", "site", "-", "packages", " ", "(", "python", " ", "3.5", ")", "\n", " ", " ", "$", "\n", "如果", "你", "的", "系统", "只", "安装", "了", "一个", "版本", "的", "Python", "，", "并", "看到", "了", "类似", "于", "上面", "的", "输出", "，", "请", "跳", "到", "12.2", ".", "4", "节", "。", "如果", "出现", "了", "错误", "消息", "，", "请", "尝试", "将", "pip", "替换", "为", "pip3", "。", "如果", "执行", "这", "两个", "命令", "时", "都", "出现", "错误", "消", "\n", "息", "，", "请", "跳", "到", "“", "安装", "pip", "”", "。", "\n", "如果", "你", "的", "系统", "安装", "了", "多个", "版本", "的", "Python", "，", "请", "核实", "pip", "关联", "到", "了", "你", "使用", "的", "Python", "版本", "，", "如", "python", " ", "3.5", "（", "见", "❶", "）", "。", "如果", "pip", "关联", "到", "了", "正确", "的", "Python", "版本", "，", "请", "跳", "到", "12.2", ".", "4", "节", "。", "如果", "pip", "没有", "关联", "到", "\n", "正确", "的", "Python", "版本", "，", "请", "尝试", "将", "pip", "替换", "为", "pip3", "。", "如果", "执行", "这", "两个", "命令", "时", "都", "出现", "错误", "消息", "，", "请", "跳", "到", "“", "安装", "pip", "”", "。", "\n", "3", ".", " ", "安装", "\n", "安装", "pip", "\n", "要", "安装", "pip", "，", "请", "访问", "https", ":", "/", "/", "bootstrap", ".", "pypa", ".", "io", "/", "get", "-", "pip", ".", "py", " ", "。", "如果", "出现", "对话框", "，", "请", "选择", "保存", "文件", "；", "如果", "get", "-", "pip", ".", "py", "的", "代码", "出现", "在", "浏览器", "中", "，", "请", "将", "这些", "代码", "复制", "并", "粘贴", "到", "文本编辑", "器中", "，", "再", "将", "文"], ["件", "保存", "为", "get", "-", "pip", ".", "py", "。", "将", "get", "-", "pip", ".", "py", "保存", "到", "计算机", "中后", "，", "你", "需要", "以", "管理员", "身份", "运行", "它", "，", "因为", "pip", "将", "在", "你", "的", "系统", "中", "安装", "新包", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "找", "不到", "get", "-", "pip", ".", "py", "，", "请", "访问", "https", ":", "/", "/", "pip", ".", "pypa", ".", "io", "/", " ", "，", "单击", "左边", "面板", "中", "的", "Installation", "，", "再", "单击", "中间", "窗口", "中", "的", "链接", "get", "-", "pip", ".", "py", "。", "\n", "4", ".", " ", "在", "\n", "在", "Linux", "和", "\n", "和", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "pip", "\n", "使用", "下面", "的", "命令", "以", "管理员", "身份", "运行", "get", "-", "pip", ".", "py", "：", "\n", "$", " ", "sudo", " ", "python", " ", "get", "-", "pip", ".", "py", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "启动", "终端", "会话", "时", "使用", "的", "是", "命令", "python3", " ", "，", "那么", "在", "这里", "应", "使用", "命令", "sudo", " ", "python3", " ", "get", "-", "pip", ".", "py", " ", "。", "\n", "这个", "程序运行", "后", "，", "使用", "命令", "pip", " ", "--", "version", " ", "（", "或", "pip3", " ", "--", "version", " ", "）", "确认", "正确", "地", "安装", "了", "pip", "。", "\n", "5", ".", " ", "在", "\n", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "pip", "\n", "使用", "下面", "的", "命令", "运行", "get", "-", "pip", ".", "py", "：", "\n", "$", " ", "python", " ", "get", "-", "pip", ".", "py"], ["系统", "中", "安装", "pip", "\n", "使用", "下面", "的", "命令", "运行", "get", "-", "pip", ".", "py", "：", "\n", "$", " ", "python", " ", "get", "-", "pip", ".", "py", "\n", "如果", "你", "在", "终端", "中", "运行", "Python", "时", "使用", "的", "是", "另", "一个", "命令", "，", "也", "请", "使用", "这个", "命令", "来", "运行", "get", "-", "pip", ".", "py", "。", "例如", "，", "你", "可能", "需要", "使用", "命令", "python3", " ", "get", "-", "pip", ".", "py", " ", "或", "C", ":", "\\", "Python35", "\\", "python", " ", "get", "-", "\n", "pip", ".", "py", " ", "。", "\n", "这个", "程序运行", "后", "，", "执行命令", "python", " ", "-", "m", " ", "pip", " ", "--", "version", " ", "以", "确认", "成功", "地", "安装", "了", "pip", "。", "\n", "12.2", ".", "2", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Pygame", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "请", "使用", "包", "管理器", "来", "安装", "Pygame", "。", "为此", "，", "打开", "一个", "终端", "窗口", "，", "并", "执行", "下面", "的", "命令", "，", "这", "将", "下载", "Pygame", "，", "并", "将", "其", "安装", "到", "你", "的", "系统", "中", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python", "-", "pygame", "\n", "执行", "如下", "命令", "，", "在", "终端", "会话", "中", "检查", "安装", "情况", "：", "\n", "$", " ", "python", "\n", ">", ">", ">", " ", "import", " ", "pygame", "\n", ">", ">", ">"], ["如果", "没有", "任何", "输出", "，", "就", "说明", "Python", "导入", "了", "Pygame", "，", "你", "可以", "跳到", "12.3", "节", "。", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "3", "，", "就", "需要", "执行", "两个", "步骤", "：", "安装", "Pygame", "依赖", "的", "库", "；", "下载", "并", "安装", "Pygame", "。", "\n", "执行", "下面", "的", "命令", "来", "安装", "Pygame", "依赖", "的", "库", "（", "如果", "你", "开始", "终端", "会话", "时", "使用", "的", "是", "命令", "python3.5", " ", "，", "请", "将", "python3", "-", "dev", " ", "替换", "为", "python3.5", "-", "dev", " ", "）", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python3", "-", "dev", " ", "mercurial", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "libsdl", "-", "image1.2", "-", "dev", " ", "libsdl2", "-", "dev", " ", "libsdl", "-", "ttf2.0", "-", "dev", "\n", "这", "将", "安装", "运行", "《", "外星人", "入侵", "》", "时", "需要", "的", "库", "。", "如果", "你", "要", "启用", "Pygame", "的", "一些", "高级", "功能", "，", "如", "添加", "声音", "的", "功能", "，", "可", "安装", "下面", "这些", "额外", "的", "库", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "libsdl", "-", "mixer1.2", "-", "dev", " ", "libportmidi", "-", "dev", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "libswscale", "-", "dev", " ", "libsmpeg", "-", "dev", " ", "libavformat", "-", "dev", " ", "libavcode", "-", "dev"], ["$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python", "-", "numpy", "\n", "接下来", "，", "执行", "下面", "的", "命令", "来", "安装", "Pygame", "（", "如", "有", "必要", "，", "将", "pip", " ", "替换", "为", "pip3", " ", "）", "：", "\n", "$", " ", "pip", " ", "install", " ", "--", "user", " ", "hg", "+", "http", ":", "/", "/", "bitbucket", ".", "org", "/", "pygame", "/", "pygame", "\n", "告知", "你", "Pygame", "找到", "了", "哪些", "库后", "，", "输出", "将", "暂停", "一段时间", "。", "请", "按", "回车键", "，", "即便", "有", "一些", "库", "没有", "找到", "。", "你", "将", "看到", "一条", "消息", "，", "说明", "成功", "地", "安装", "了", "Pygame", "。", "\n", "要", "确认", "安装", "成功", "，", "请", "启动", "一个", "Python", "终端", "会话", "，", "并", "尝试", "执行", "下面", "的", "命令", "来", "导入", "Pygame", "：", "\n", "$", " ", "python3", "\n", ">", ">", ">", " ", "import", " ", "pygame", "\n", ">", ">", ">", "\n", "如果", "导入", "成功", "，", "请", "跳", "到", "12.3", "节", "。", "\n", "12.2", ".", "3", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Pygame", "\n", "要", "安装", "Pygame", "依赖", "的", "有些", "包", "，", "需要", "Homebrew", "。", "如果", "你", "没有", "安装", "Homebrew", "，", "请参阅", "附录", "A", "的", "说明", "。", "\n", "为", "安装", "Pygame", "依赖", "的", "库", "，", "请", "执行", "下面", "的", "命令", "：", "\n", "$", " ", "brew", " ", "install", " ", "hg", " ", "sdl", " ", "sdl", "_", "image", " ", "sdl", "_", "ttf", "\n", "这", "将", "安装", "运行", "游戏", "《", "外星人", "入侵", "》", "所", "需", "的", "库", "。", "每", "安装", "一个", "库后", "，", "输出", "都", "会", "向上", "滚动", "。"], ["这", "将", "安装", "运行", "游戏", "《", "外星人", "入侵", "》", "所", "需", "的", "库", "。", "每", "安装", "一个", "库后", "，", "输出", "都", "会", "向上", "滚动", "。", "\n", "如果", "你", "还", "想", "启用", "较高级", "的", "功能", "，", "如", "在", "游戏", "中", "包含", "声音", "，", "可", "安装", "下面", "两个", "额外", "的", "库", "：", "\n", "$", " ", "brew", " ", "install", " ", "sdl", "_", "mixer", " ", "portmidi", "\n", "使用", "下面", "的", "命令", "来", "安装", "Pygame", "（", "如果", "你", "运行", "的", "是", "Python", " ", "2.7", "，", "请", "将", "pip3", " ", "替换", "为", "pip", " ", "）", "：", "\n", "$", " ", "pip3", " ", "install", " ", "--", "user", " ", "hg", "+", "http", ":", "/", "/", "bitbucket", ".", "org", "/", "pygame", "/", "pygame", "\n", "启动", "一个", "Python", "终端", "会话", "，", "并", "导入", "Pygame", "以", "检查", "安装", "是否", "成功", "（", "如果", "你", "运行", "的", "是", "Python", " ", "2.7", "，", "请", "将", "python3", " ", "替换", "为", "python", " ", "）", "：", "\n", "$", " ", "python3", "\n", ">", ">", ">", " ", "import", " ", "pygame", "\n", ">", ">", ">", "\n", "如果", "导入", "成功", "，", "请", "跳", "到", "12.3", "节", "。", "\n", "12.2", ".", "4", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Pygame", "\n", "Pygame", "项目", "托管", "在", "代码", "分享", "网站", "Bitbucket", "中", "。", "要", "在", "Windows", "系统", "中", "安装", "Pygame", "，", "请", "访问", "https", ":", "/", "/", "bitbucket", ".", "org", "/", "pygame", "/", "pygame", "/", "downloads", "/", " ", "，", "查找", "与", "你", "运行", "的", "Python", "版本", "匹配", "的", "Windows", "安装"], ["程序", "。", "如果", "在", "Bitbucket", "上", "找", "不到", "合适", "的", "安装程序", "，", "请", "去", "http", ":", "/", "/", "www", ".", "lfd", ".", "uci", ".", "edu", "/", "~", "gohlke", "/", "pythonlibs", "/", "#", "pygame", " ", "看看", "。", "\n", "下载", "合适", "的", "文件", "后", "，", "如果", "它", "是", ".", "exe", "文件", "，", "就", "运行", "它", "。", "\n", "如果", "该", "文件", "的", "扩展", "名为", ".", "whl", "，", "就", "将", "它", "复制到", "你", "的", "项目", "文件夹", "中", "。", "再", "打开", "一个", "命令", "窗口", "，", "切换", "到", "该", "文件", "所在", "的", "文件夹", "，", "并", "使用", "pip", "来", "运行", "它", "：", "\n", ">", " ", "python", " ", "-", "m", " ", "pip", " ", "install", " ", "--", "user", " ", "pygame", "-", "1.9", ".", "2a0", "-", "cp35", "-", "none", "-", "win32", ".", "whl"], ["12.3", "　", "开始", "游戏", "项目", "\n", "　", "开始", "游戏", "项目", "\n", "现在", "来", "开始", "开发", "游戏", "《", "外星人", "入侵", "》", "。", "首先", "创建", "一个", "空", "的", "Pygame", "窗口", "，", "供", "后面", "用来", "绘制", "游戏", "元素", "，", "如", "飞船", "和", "外星人", "。", "我们", "还", "将", "让", "这个", "游戏", "响应", "用户", "输入", "、", "设置", "背景色", "以及", "加载", "飞", "\n", "船", "图像", "。", "\n", "12.3", ".", "1", "　", "创建", "\n", "　", "创建", "Pygame", "窗口", "以及", "响应", "用户", "输入", "\n", "窗口", "以及", "响应", "用户", "输入", "\n", "首先", "，", "我们", "创建", "一个", "空", "的", "Pygame", "窗口", "。", "使用", "Pygame", "编写", "的", "游戏", "的", "基本", "结构", "如下", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "import", " ", "sys", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "初始化", "游戏", "并", "创建", "一个", "屏幕", "对象", "\n", "❶", " ", " ", " ", " ", " ", "pygame", ".", "init", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", "screen", " ", "=", " ", "pygame", ".", "display", ".", "set", "_", "mode", "(", "(", "1200", ",", " ", "800", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "的", "主", "循环", "\n", "❸", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "监视", "键盘", "和", "鼠标", "事件", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":"], ["❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sys", ".", "exit", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "首先", "，", "我们", "导入", "了", "模块", "sys", " ", "和", "pygame", " ", "。", "模块", "pygame", " ", "包含", "开发", "游戏", "所", "需", "的", "功能", "。", "玩家", "退出", "时", "，", "我们", "将", "使用", "模块", "sys", " ", "来", "退出", "游戏", "。", "\n", "游戏", "《", "外星人", "入侵", "》", "的", "开头", "是", "函数", "run", "_", "game", "(", ")", " ", "。", "❶", "处", "的", "代码", "行", "pygame", ".", "init", "(", ")", " ", "初始化", "背景", "设置", "，", "让", "Pygame", "能够", "正确", "地", "工作", "。", "在", "❷", "处", "，", "我们", "调", "\n", "用", "pygame", ".", "display", ".", "set", "_", "mode", "(", ")", " ", "来", "创建", "一个", "名为", "screen", " ", "的", "显示", "窗口", "，", "这个", "游戏", "的", "所有", "图形", "元素", "都", "将", "在", "其中", "绘制", "。", "实参", "(", "1200", ",", " ", "800", ")", " ", "是", "一个", "元组", "，", "指定", "了", "游戏", "窗口", "的", "尺"], ["寸", "。", "通过", "将", "这些", "尺寸", "值", "传递", "给", "pygame", ".", "display", ".", "set", "_", "mode", "(", ")", " ", "，", "我们", "创建", "了", "一个", "宽", "1200", "像素", "、", "高", "800", "像素", "的", "游戏", "窗口", "（", "你", "可以", "根据", "自己", "的", "显示器", "尺寸", "调整", "这些", "值", "）", "。", "\n", "对象", "screen", " ", "是", "一个", "surface", "。", "在", "Pygame", "中", "，", "surface", "是", "屏幕", "的", "一部分", "，", "用于", "显示", "游戏", "元素", "。", "在", "这个", "游戏", "中", "，", "每个", "元素", "（", "如", "外星人", "或", "飞船", "）", "都", "是", "一个", "surface", "。", "display", ".", "set", "_", "mode", "(", ")", "\n", "返回", "的", "surface", "表示", "整个", "游戏", "窗口", "。", "我们", "激活", "游戏", "的", "动画", "循环", "后", "，", "每", "经过", "一次", "循环", "都", "将", "自动", "重绘", "这个", "surface", "。", "\n", "这个", "游戏", "由", "一个", "while", " ", "循环", "（", "见", "❸", "）", "控制", "，", "其中", "包含", "一个", "事件", "循环", "以及", "管理", "屏幕", "更新", "的", "代码", "。", "事件", "是", "用户", "玩游戏", "时", "执行", "的", "操作", "，", "如", "按键", "或", "移动", "鼠标", "。", "为", "让", "程序", "响应", "事件", "，", "我们", "编", "\n", "写", "一个", "事件", "循环", "，", "以", "侦听", "事件", "，", "并", "根据", "发生", "的", "事件", "执行", "相应", "的", "任务", "。", "❹", "处", "的", "for", " ", "循环", "就是", "一个", "事件", "循环", "。", "\n", "为", "访问", "Pygame", "检测", "到", "的", "事件", "，", "我们", "使用", "方法", "pygame", ".", "event", ".", "get", "(", ")", " ", "。", "所有", "键盘", "和", "鼠标", "事件", "都", "将", "促使", "for", " ", "循环", "运行", "。", "在", "这个", "循环", "中", "，", "我们", "将", "编写", "一系列", "的", "if", " ", "语句", "来", "检测", "并", "响应"], ["特定", "的", "事件", "。", "例如", "，", "玩家", "单击", "游戏", "窗口", "的", "关闭", "按钮", "时", "，", "将", "检测", "到", "pygame", ".", "QUIT", " ", "事件", "，", "而", "我们", "调用", "sys", ".", "exit", "(", ")", " ", "来", "退出", "游戏", "（", "见", "❺", "）", "。", "\n", "❻", "处", "调用", "了", "pygame", ".", "display", ".", "flip", "(", ")", " ", "，", "命令", "Pygame", "让", "最近", "绘制", "的", "屏幕", "可见", "。", "在", "这里", "，", "它", "在", "每次", "执行", "while", " ", "循环", "时", "都", "绘制", "一个", "空", "屏幕", "，", "并", "擦", "去", "旧", "屏幕", "，", "使得", "只有", "新", "屏幕", "可", "\n", "见", "。", "在", "我们", "移动游戏", "元素", "时", "，", "pygame", ".", "display", ".", "flip", "(", ")", " ", "将", "不断更新", "屏幕", "，", "以", "显示", "元素", "的", "新", "位置", "，", "并", "在", "原来", "的", "位置", "隐藏", "元素", "，", "从而", "营造", "平滑", "移动", "的", "效果", "。", "\n", "在", "这个", "基本", "的", "游戏", "结构", "中", "，", "最后", "一行", "调用", "run", "_", "game", "(", ")", " ", "，", "这", "将", "初始化", "游戏", "并", "开始", "主", "循环", "。", "\n", "如果", "此时", "运行", "这些", "代码", "，", "你", "将", "看到", "一个", "空", "的", "Pygame", "窗口", "。", "\n", "12.3", ".", "2", "　", "设置", "背景色", "\n", "　", "设置", "背景色", "\n", "Pygame", "默认", "创建", "一个", "黑色", "屏幕", "，", "这太", "乏味", "了", "。", "下面", "来", "将", "背景", "设置", "为", "另", "一种", "颜色", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "设置", "背景色"], ["#", " ", "设置", "背景色", "\n", "❶", " ", " ", " ", " ", " ", "bg", "_", "color", " ", "=", " ", "(", "230", ",", " ", "230", ",", " ", "230", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", ".", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "监听", "键盘", "和", "鼠标", "事件", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "每次", "循环", "时", "都", "重绘", "屏幕", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "screen", ".", "fill", "(", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "首先", "，", "我们", "创建", "了", "一种", "背景色", "，", "并", "将", "其", "存储", "在", "bg", "_", "color", " ", "中", "（", "见", "❶", "）", "。", "该", "颜色", "只", "需", "指定", "一次", "，", "因此", "我们", "在", "进入", "主", "while", " ", "循环", "前", "定义", "它", "。", "\n", "在", "Pygame", "中", "，", "颜色", "是", "以", "RGB", "值", "指定", "的", "。", "这种", "颜色", "由", "红色", "、", "绿色", "和", "蓝色", "值", "组成", "，", "其中", "每个", "值", "的", "可能", "取值", "范围", "都", "为", "0", "~", "255", "。", "颜色", "值", "(", "255", ",", " ", "0", ",", " ", "0", ")", "表示", "红色", "，", "(", "0", ",", " ", "255", ",", " ", "0", ")", "表示", "绿色", "，", "而", "(", "0", ",", " ", "0", ",", "\n", "255", ")", "表示", "蓝色", "。", "通过", "组合", "不同", "的", "RGB", "值", "，", "可", "创建", "1600", "万种", "颜色", "。", "在", "颜色", "值", "(", "230", ",", " ", "230", ",", " ", "230", ")", "中", "，", "红色", "、", "蓝色", "和", "绿色", "量", "相同", "，", "它", "将", "背景", "设置", "为", "一种", "浅", "灰色", "。"], ["在", "❷", "处", "，", "我们", "调用", "方法", "screen", ".", "fill", "(", ")", " ", "，", "用", "背景色", "填充", "屏幕", "；", "这个", "方法", "只", "接受", "一个", "实参", "：", "一种", "颜色", "。", "\n", "12.3", ".", "3", "　", "创建", "设置", "类", "\n", "　", "创建", "设置", "类", "\n", "每次", "给", "游戏", "添加", "新", "功能", "时", "，", "通常", "也", "将", "引入", "一些", "新", "设置", "。", "下面", "来", "编写", "一个", "名为", "settings", " ", "的", "模块", "，", "其中", "包含", "一个", "名为", "Settings", " ", "的", "类", "，", "用于", "将", "所有", "设置", "存储", "在", "一个", "地方", "，", "以免", "在代", "\n", "码中", "到处", "添加", "设置", "。", "这样", "，", "我们", "就", "能", "传递", "一个", "设置", "对象", "，", "而", "不是", "众多", "不同", "的", "设置", "。", "另外", "，", "这", "让", "函数调用", "更", "简单", "，", "且", "在", "项目", "增大", "时", "修改", "游戏", "的", "外观", "更", "容易", "：", "要", "修改", "游戏", "，", "只", "需", "修改", "\n", "settings", ".", "py", "中", "的", "一些", "值", "，", "而", "无需", "查找", "散布", "在", "文件", "中", "的", "不同", "设置", "。", "\n", "下面", "是", "最初", "的", "Settings", " ", "类", "："], ["settings", ".", "py", "\n", "class", " ", "Settings", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "存储", "《", "外星人", "入侵", "》", "的", "所有", "设置", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "游戏", "的", "设置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "屏幕", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "width", " ", "=", " ", "1200", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "height", " ", "=", " ", "800", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bg", "_", "color", " ", "=", " ", "(", "230", ",", " ", "230", ",", " ", "230", ")", "\n", "为", "创建", "Settings", " ", "实例", "并", "使用", "它", "来", "访问", "设置", "，", "将", "alien", "_", "invasion", ".", "py", "修改", "成", "下面", "这样", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "settings", " ", "import", " ", "Settings", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "初始化", "pygame", "、", "设置", "和", "屏幕", "对象", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "init", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", "ai", "_", "settings", " ", "=", " ", "Settings", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", "screen", " ", "=", " ", "pygame", ".", "display", ".", "set", "_", "mode", "("], ["❷", " ", " ", " ", " ", " ", "screen", " ", "=", " ", "pygame", ".", "display", ".", "set", "_", "mode", "(", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "(", "ai", "_", "settings", ".", "screen", "_", "width", ",", " ", "ai", "_", "settings", ".", "screen", "_", "height", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "每次", "循环", "时", "都", "重绘", "屏幕", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "screen", ".", "fill", "(", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "在", "主程序", "文件", "中", "，", "我们", "导入", "Settings", " ", "类", "，", "调用", "pygame", ".", "init", "(", ")", " ", "，", "再", "创建", "一个", "Settings", " ", "实例", "，", "并", "将", "其", "存储", "在", "变量", "ai", "_", "settings", " ", "中", "（", "见", "❶", "）", "。", "创建", "屏幕", "时", "（", "见", "❷", "）", "，", "使用"], ["了", "ai", "_", "settings", " ", "的", "属性", "screen", "_", "width", " ", "和", "screen", "_", "height", " ", "；", "接下来", "填充", "屏幕", "时", "，", "也", "使用", "了", "ai", "_", "settings", " ", "来", "访问", "背景色", "（", "见", "❸", "）", "。", "\n", "12.4", "　", "添加", "飞船", "图像", "\n", "　", "添加", "飞船", "图像", "\n", "下面", "将", "飞船", "加入", "到", "游戏", "中", "。", "为了", "在", "屏幕", "上", "绘制", "玩家", "的", "飞船", "，", "我们", "将", "加载", "一幅", "图像", "，", "再", "使用", "Pygame", "方法", "blit", "(", ")", " ", "绘制", "它", "。", "\n", "为", "游戏", "选择", "素材", "时", "，", "务必", "要", "注意", "许可", "。", "最", "安全", "、", "最", "不", "费钱", "的", "方式", "是", "使用", "http", ":", "/", "/", "pixabay", ".", "com", "/", " ", "等", "网站", "提供", "的", "图形", "，", "这些", "图形", "无需", "许可", "，", "你", "可以", "对", "其", "进行", "修改", "。", "\n", "在", "游戏", "中", "几乎", "可以", "使用", "任何", "类型", "的", "图像文件", "，", "但", "使用", "位", "图", "（", ".", "bmp", "）", "文件", "最为", "简单", "，", "因为", "Pygame", "默认", "加载", "位", "图", "。", "虽然", "可", "配置", "Pygame", "以", "使用", "其他", "文件类型", "，", "但", "有些", "文件类型", "要求", "你", "在", "\n", "计算机上安装", "相应", "的", "图像", "库", "。", "大多数", "图像", "都", "为", ".", "jpg", "、", ".", "png", "或", ".", "gif", "格式", "，", "但", "可", "使用", "Photoshop", "、", "GIMP", "和", "Paint", "等", "工具", "将", "其", "转换", "为位", "图", "。", "\n", "选择", "图像", "时", "，", "要", "特别", "注意", "其", "背景色", "。", "请", "尽可能", "选择", "背景", "透明", "的", "图像", "，", "这样", "可", "使用", "图像", "编辑器", "将", "其", "背景", "设置", "为", "任何", "颜色", "。", "图像", "的", "背景色", "与", "游戏", "的", "背景", "色相", "同时", "，", "游戏", "看起来", "最漂", "\n", "亮", "；", "你", "也", "可以", "将", "游戏", "的", "背景色", "设置", "成", "与", "图像", "的", "背景色", "相同", "。"], ["亮", "；", "你", "也", "可以", "将", "游戏", "的", "背景色", "设置", "成", "与", "图像", "的", "背景色", "相同", "。", "\n", "就", "游戏", "《", "外星人", "入侵", "》", "而言", "，", "你", "可以", "使用", "文件", "ship", ".", "bmp", "（", "如图", "12", "-", "1", "所示", "）", "，", "这个", "文件", "可", "在", "本书", "的", "配套", "资源", "（", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", " ", "）", "中", "找到", "。", "这个", "文件", "的", "背景色", "\n", "与", "这个", "项目", "使用", "的", "设置", "相同", "。", "请", "在", "主", "项目", "文件夹", "（", "alien", "_", "invasion", "）", "中", "新建", "一个", "文件夹", "，", "将", "其", "命名", "为", "images", "，", "并", "将", "文件", "ship", ".", "bmp", "保存", "到", "这个", "文件夹", "中", "。", "\n", "图", "\n", "图", "12", "-", "1", "　", "游戏", "《", "外星人", "入侵", "》", "中", "的", "飞船", "\n", "　", "游戏", "《", "外星人", "入侵", "》", "中", "的", "飞船", "\n", "12.4", ".", "1", "　", "创建", "\n", "　", "创建", "Ship", " ", "类", "\n", "类"], ["选择", "用于", "表示", "飞船", "的", "图像", "后", "，", "需要", "将", "其", "显示", "到", "屏幕", "上", "。", "我们", "将", "创建", "一个", "名为", "ship", " ", "的", "模块", "，", "其中", "包含", "Ship", " ", "类", "，", "它", "负责管理", "飞船", "的", "大部分", "行为", "。", "\n", "ship", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "class", " ", "Ship", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "飞船", "并", "设置", "其", "初始", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "加载", "飞船", "图像", "并", "获取", "其外", "接", "矩形", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "image", " ", "=", " ", "pygame", ".", "image", ".", "load", "(", "'", "images", "/", "ship", ".", "bmp", "'", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", " ", "=", " ", "self", ".", "image", ".", "get", "_", "rect", "(", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "rect", " ", "=", " ", "screen", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "每", "艘", "新", "飞船", "放在", "屏幕", "底部", "中央", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "centerx"], ["self", ".", "rect", ".", "bottom", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "bottom", "\n", "❺", " ", " ", " ", " ", " ", "def", " ", "blitme", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "指定", "位置", "绘制", "飞船", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "image", ",", " ", "self", ".", "rect", ")", "\n", "首先", "，", "我们", "导入", "了", "模块", "pygame", " ", "。", "Ship", " ", "的", "方法", "__", "init", "__", "(", ")", " ", "接受", "两个", "参数", "：", "引用", "self", " ", "和", "screen", " ", "，", "其中", "后者", "指定", "了", "要", "将", "飞船", "绘制", "到", "什么", "地方", "。", "为", "加载", "图像", "，", "我们", "调用", "\n", "了", "pygame", ".", "image", ".", "load", "(", ")", " ", "（", "见", "❶", "）", "。", "这个", "函数", "返回", "一个", "表示", "飞船", "的", "surface", "，", "而", "我们", "将", "这个", "surface", "存储", "到", "了", "self", ".", "image", " ", "中", "。", "\n", "加载", "图像", "后", "，", "我们", "使用", "get", "_", "rect", "(", ")", " ", "获取", "相应", "surface", "的", "属性", "rect", " ", "（", "见", "❷", "）", "。", "Pygame", "的", "效率", "之所以", "如此", "高", "，", "一个", "原因", "是", "它", "让", "你", "能够", "像", "处理", "矩形", "（", "rect", " ", "对象", "）", "一样", "处理", "游戏", "元", "\n", "素", "，", "即便", "它们", "的", "形状", "并非", "矩形", "。", "像", "处理", "矩形", "一样", "处理", "游戏", "元素", "之所以", "高效", "，", "是因为", "矩形", "是", "简单", "的", "几何", "形状", "。", "这种", "做法", "的", "效果", "通常", "很", "好", "，", "游戏", "玩家", "几乎", "注意", "不到", "我们", "处理", "的", "不是", "游", "\n", "戏", "元素", "的", "实际", "形状", "。"], ["戏", "元素", "的", "实际", "形状", "。", "\n", "处理", "rect", " ", "对象", "时", "，", "可", "使用", "矩形", "四角", "和", "中心", "的", " ", "x", " ", "和", " ", "y", " ", "坐标", "。", "可", "通过", "设置", "这些", "值来", "指定", "矩形", "的", "位置", "。", "\n", "要", "将", "游戏", "元素", "居中", "，", "可", "设置", "相应", "rect", " ", "对象", "的", "属性", "center", " ", "、", "centerx", " ", "或", "centery", " ", "。", "要", "让", "游戏", "元素", "与", "屏幕", "边缘", "对齐", "，", "可", "使用", "属性", "top", " ", "、", "bottom", " ", "、", "left", " ", "或", "right", " ", "；", "要", "调整", "游", "\n", "戏", "元素", "的", "水平", "或", "垂直", "位置", "，", "可", "使用", "属性", "x", " ", "和", "y", " ", "，", "它们", "分别", "是", "相应", "矩形", "左上角", "的", " ", "x", " ", "和", " ", "y", " ", "坐标", "。", "这些", "属性", "让", "你", "无需", "去", "做", "游戏", "开发人员", "原本", "需要", "手工", "完成", "的", "计算", "，", "你", "经常", "会", "用到", "这些", "属", "\n", "性", "。", "\n", "注意", "\n", "注意", " ", "　", "在", "Pygame", "中", "，", "原点", "(", "0", ",", " ", "0", ")", "位于", "屏幕", "左上角", "，", "向", "右下方", "移动", "时", "，", "坐标值", "将", "增大", "。", "在", "1200", "×", "800", "的", "屏幕", "上", "，", "原点", "位于", "左上角", "，", "而", "右下角", "的", "坐标", "为", "(", "1200", ",", " ", "800", ")", "。", "\n", "我们", "将", "把", "飞船", "放在", "屏幕", "底部", "中央", "。", "为此", "，", "首先", "将", "表示", "屏幕", "的", "矩形", "存储", "在", "self", ".", "screen", "_", "rect", " ", "中", "（", "见", "❸", "）", "，", "再", "将", "self", ".", "rect", ".", "centerx", " ", "（", "飞船", "中心", "的", "x", " ", "坐标", "）", "设置", "为", "表示", "屏幕"], ["的", "矩形", "的", "属性", "centerx", " ", "（", "见", "❹", "）", "，", "并", "将", "self", ".", "rect", ".", "bottom", " ", "（", "飞船", "下", "边缘", "的", "y", " ", "坐标", "）", "设置", "为", "表示", "屏幕", "的", "矩形", "的", "属性", "bottom", " ", "。", "Pygame", "将", "使用", "这些", "rect", " ", "属性", "来", "放置", "飞船", "图像", "，", "\n", "使", "其", "与", "屏幕", "下", "边缘", "对齐", "并", "水平", "居中", "。", "\n", "在", "❺", "处", "，", "我们", "定义", "了", "方法", "blitme", "(", ")", " ", "，", "它", "根据", "self", ".", "rect", " ", "指定", "的", "位置", "将", "图像", "绘制", "到", "屏幕", "上", "。", "\n", "12.4", ".", "2", "　", "在", "屏幕", "上", "绘制", "飞船", "\n", "　", "在", "屏幕", "上", "绘制", "飞船", "\n", "下面", "来", "更新", "alien", "_", "invasion", ".", "py", "，", "使", "其", "创建", "一艘", "飞船", "，", "并", "调用", "其", "方法", "blitme", "(", ")", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "settings", " ", "import", " ", "Settings", "\n", " ", " ", "from", " ", "ship", " ", "import", " ", "Ship", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一艘", "飞船", "\n", "❶", " ", " ", " ", " ", " ", "ship", " ", "=", " ", "Ship", "(", "screen", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "每次", "循环", "时", "都", "重绘", "屏幕", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "screen", ".", "fill", "(", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "blitme", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "我们", "导入", "Ship", " ", "类", "，", "并", "在", "创建", "屏幕", "后", "创建", "一个", "名为", "ship", " ", "的", "Ship", " ", "实例", "。", "必须", "在", "主", "while", " ", "循环", "前面", "创建", "该", "实例", "（", "见", "❶", "）", "，", "以免", "每次", "循环", "时", "都", "创建", "一艘", "飞船", "。", "填充", "背景", "后", "，", "我们", "调", "\n", "用", "ship", ".", "blitme", "(", ")", " ", "将", "飞船", "绘制", "到", "屏幕", "上", "，", "确保", "它", "出现", "在", "背景", "前面", "（", "见", "❷", "）", "。", "\n", "现在", "如果", "运行", "alien", "_", "invasion", ".", "py", "，", "将", "看到", "飞船", "位于", "空", "游戏", "屏幕", "底部", "中央", "，", "如图", "12", "-", "2", "所示", "。"], ["图", "\n", "图", "12", "-", "2", "　", "游戏", "《", "外星人", "入侵", "》", "屏幕", "底部", "中央", "有", "一艘", "飞船", "\n", "　", "游戏", "《", "外星人", "入侵", "》", "屏幕", "底部", "中央", "有", "一艘", "飞船", "\n", "12.5", "　", "重构", "：", "模块", "\n", "　", "重构", "：", "模块", "game", "_", "functions", "\n", "在", "大型项目", "中", "，", "经常", "需要", "在", "添加", "新", "代码", "前", "重构", "既有", "代码", "。", "重构", "旨在", "简化", "既有", "代码", "的", "结构", "，", "使", "其", "更", "容易", "扩展", "。", "在", "本节", "中", "，", "我们", "将", "创建", "一个", "名为", "game", "_", "functions", " ", "的", "新", "模块", "，", "它", "将", "\n", "存储", "大量", "让", "游戏", "《", "外星人", "入侵", "》", "运行", "的", "函数", "。", "通过", "创建", "模块", "game", "_", "functions", " ", "，", "可", "避免", "alien", "_", "invasion", ".", "py", "太长", "，", "并", "使", "其", "逻辑", "更", "容易", "理解", "。", "\n", "12.5", ".", "1", "　", "函数", "\n", "　", "函数", "check", "_", "events", "(", ")", "\n", "我们", "将", "首先", "把", "管理", "事件", "的", "代码", "移", "到", "一个", "名为", "check", "_", "events", "(", ")", " ", "的", "函数", "中", "，", "以", "简化", "run", "_", "game", "(", ")", " ", "并", "隔离", "事件", "管理", "循环", "。", "通过", "隔离", "事件", "循环", "，", "可", "将", "事件", "管理", "与", "游戏", "的", "其他", "方面", "（", "如", "\n", "更新", "屏幕", "）", "分离", "。", "\n", "将", "check", "_", "events", "(", ")", " ", "放在", "一个", "名为", "game", "_", "functions", " ", "的", "模块", "中", "：", "\n", "game", "_", "functions", ".", "py", "\n", "import", " ", "sys", "\n", "import", " ", "pygame", "\n", "def", " ", "check", "_", "events", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\""], ["def", " ", "check", "_", "events", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sys", ".", "exit", "(", ")", "\n", "这个", "模块", "中", "导入", "了", "事件", "检查", "循环", "要", "使用", "的", "sys", " ", "和", "pygame", " ", "。", "当前", "，", "函数", "check", "_", "events", "(", ")", " ", "不", "需要", "任何", "形参", "，", "其", "函数", "体", "复制", "了", "alien", "_", "invasion", ".", "py", "的", "事件", "循环", "。", "\n", "下面", "来", "修改", "alien", "_", "invasion", ".", "py", "，", "使", "其", "导入", "模块", "game", "_", "functions", " ", "，", "并", "将", "事件", "循环", "替换", "为", "对", "函数", "check", "_", "events", "(", ")", " ", "的", "调用", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", "import", " ", "pygame", "\n", "from", " ", "settings", " ", "import", " ", "Settings", "\n", "from", " ", "ship", " ", "import", " ", "Ship", "\n", "import", " ", "game", "_", "functions", " ", "as", " ", "gf", "\n", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", ")"], ["while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "在", "主程序", "文件", "中", "，", "不再", "需要", "直接", "导入", "sys", " ", "，", "因为", "当前", "只", "在", "模块", "game", "_", "functions", " ", "中", "使用", "了", "它", "。", "出于", "简化", "的", "目的", "，", "我们", "给", "导入", "的", "模块", "game", "_", "functions", " ", "指定", "了", "别名", "gf", " ", "。", "\n", "12.5", ".", "2", "　", "函数", "\n", "　", "函数", "update", "_", "screen", "(", ")", "\n", "为", "进一步", "简化", "run", "_", "game", "(", ")", " ", "，", "下面", "将", "更新", "屏幕", "的", "代码", "移", "到", "一个", "名为", "update", "_", "screen", "(", ")", " ", "的", "函数", "中", "，", "并", "将", "这个", "函数", "放在", "模块", "game", "_", "functions", ".", "py", " ", "中", "：", "\n", "game", "_", "functions", ".", "py", "\n", "--", "snip", "--", "\n", "def", " ", "check", "_", "events", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "更新", "屏幕", "上", "的", "图像", "，", "并", "切换", "到", "新", "屏幕", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "#", " ", "每次", "循环", "时", "都", "重绘", "屏幕", "\n", " ", " ", " ", " ", "screen", ".", "fill", "(", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", "ship", ".", "blitme", "(", ")"], ["#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", "新", "函数", "update", "_", "screen", "(", ")", " ", "包含", "三个", "形参", "：", "ai", "_", "settings", " ", "、", "screen", " ", "和", "ship", " ", "。", "现在", "需要", "将", "alien", "_", "invasion", ".", "py", "的", "while", " ", "循环", "中", "更新", "屏幕", "的", "代码", "替换", "为", "对", "函数", "update", "_", "screen", "(", ")", "\n", "的", "调用", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", "\n", "run", "_", "game", "(", ")", "\n", "这", "两个", "函数", "让", "while", " ", "循环", "更", "简单", "，", "并", "让", "后续", "开发", "更", "容易", "：", "在", "模块", "game", "_", "functions", " ", "而", "不是", "run", "_", "game", "(", ")", " ", "中", "完成", "大部分", "工作", "。", "\n", "鉴于", "我们", "一", "开始", "只想", "使用", "一个", "文件", "，", "因此", "没有", "立刻", "引入", "模块", "game", "_", "functions", " ", "。", "这", "让", "你", "能够", "了解", "实际", "的", "开发", "过程", "：", "一", "开始", "将", "代码", "编写", "得", "尽可能", "简单", "，", "并", "在", "项目", "越来越", "复杂", "时进", "\n", "行", "重构", "。", "\n", "对", "代码", "进行", "重构", "使", "其", "更", "容易", "扩展", "后", "，", "可以", "开始", "处理", "游戏", "的", "动态", "方面", "了", "！", "\n", "动手", "试一试", "\n", "动手", "试一试"], ["行", "重构", "。", "\n", "对", "代码", "进行", "重构", "使", "其", "更", "容易", "扩展", "后", "，", "可以", "开始", "处理", "游戏", "的", "动态", "方面", "了", "！", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "12", "-", "1", " ", "蓝色", "天空", "\n", "蓝色", "天空", " ", "：", "创建", "一个", "背景", "为", "蓝色", "的", "Pygame", "窗口", "。", "\n", "12", "-", "2", " ", "游戏", "角色", "\n", "游戏", "角色", " ", "：", "找", "一幅", "你", "喜欢", "的", "游戏", "角色", "位", "图", "图像", "或", "将", "一幅", "图像", "转换", "为位", "图", "。", "创建", "一个", "类", "，", "将", "该", "角色", "绘制", "到", "屏幕", "中央", "，", "并", "将", "该", "图像", "的", "背景色", "设置", "为", "屏幕", "背景色", "，", "或", "将", "\n", "屏幕", "背景色", "设置", "为", "该", "图像", "的", "背景色", "。", "\n", "12.6", "　", "驾驶", "飞船", "\n", "　", "驾驶", "飞船", "\n", "下面", "来", "让玩家", "能够", "左右", "移动", "飞船", "。", "为此", "，", "我们", "将", "编写", "代码", "，", "在", "用户", "按", "左", "或", "右", "箭头键", "时", "作出", "响应", "。", "我们", "将", "首先", "专注", "于", "向", "右", "移动", "，", "再", "使用", "同样", "的", "原理", "来", "控制", "向", "左", "移动", "。", "通过", "这样", "做", "，", "\n", "你", "将", "学会", "如何", "控制", "屏幕", "图像", "的", "移动", "。", "\n", "12.6", ".", "1", "　", "响应", "按键", "\n", "　", "响应", "按键", "\n", "每当", "用户", "按键", "时", "，", "都", "将", "在", "Pygame", "中", "注册", "一个", "事件", "。", "事件", "都", "是", "通过", "方法", "pygame", ".", "event", ".", "get", "(", ")", " ", "获取", "的", "，", "因此", "在", "函数", "check", "_", "events", "(", ")", " ", "中", "，", "我们", "需要", "指定", "要", "检查", "哪些", "类型", "的", "事", "\n", "件", "。", "每次", "按键", "都", "被", "注册", "为", "一个", "KEYDOWN", " ", "事件", "。", "\n", "检测", "到", "KEYDOWN", " ", "事件", "时", "，", "我们", "需要", "检查", "按下", "的", "是否是", "特定", "的", "键", "。", "例如", "，", "如果", "按下", "的", "是", "右", "箭头键", "，", "我们", "就", "增大", "飞船", "的", "rect", ".", "centerx", " ", "值", "，", "将", "飞船", "向", "右", "移动", "："], ["game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "events", "(", "ship", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sys", ".", "exit", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYDOWN", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "向", "右", "移动", "飞船", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "rect", ".", "centerx", " ", "+", "=", " ", "1", "\n", "我们", "在", "函数", "check", "_", "events", "(", ")", " ", "中", "包含", "形参", "ship", " ", "，", "因为", "玩家", "按右", "箭头键", "时", "，", "需要", "将", "飞船", "向", "右", "移动", "。", "在", "函数", "check", "_", "events", "(", ")", " ", "内部", "，", "我们", "在", "事件", "循环", "中", "添加", "了", "一个", "elif", " ", "代码"], ["块", "，", "以便", "在", "Pygame", " ", "检测", "到", "KEYDOWN", " ", "事件", "时", "作出", "响应", "（", "见", "❶", "）", "。", "我们", "读取", "属性", "event", ".", "key", " ", "，", "以", "检查", "按下", "的", "是否是", "右", "箭头键", "（", "pygame", ".", "K", "_", "RIGHT", " ", "）", "（", "见", "❷", "）", "。", "如果", "按下", "的", "是", "右", "\n", "箭头键", "，", "就", "将", "ship", ".", "rect", ".", "centerx", " ", "的", "值加", "1", "，", "从而", "将", "飞船", "向", "右", "移动", "（", "见", "❸", "）", "。", "\n", "在", "alien", "_", "invasion", ".", "py", "中", "，", "我们", "需要", "更新", "调用", "的", "check", "_", "events", "(", ")", " ", "代码", "，", "将", "ship", " ", "作为", "实参", "传递", "给", "它", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ship", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", "\n", "如果", "现在", "运行", "alien", "_", "invasion", ".", "py", "，", "则", "每", "按", "右", "箭头键", "一次", "，", "飞船", "都", "将", "向", "右", "移动", "1", "像素", "。", "这是", "一个", "开端", "，", "但", "并非", "控制", "飞船", "的", "高效", "方式", "。", "下面", "来", "改进", "控制", "方式", "，", "允许", "持续", "移动", "。", "\n", "12.6", ".", "2", "　", "允许", "不断", "移动", "\n", "　", "允许", "不断", "移动"], ["12.6", ".", "2", "　", "允许", "不断", "移动", "\n", "　", "允许", "不断", "移动", "\n", "玩家", "按住", "右", "箭头", "键不放", "时", "，", "我们", "希望", "飞船", "不断", "地向", "右", "移动", "，", "直到", "玩家", "松开", "为止", "。", "我们", "将", "让", "游戏", "检测", "pygame", ".", "KEYUP", " ", "事件", "，", "以便", "玩家", "松开", "右", "箭头键", "时", "我们", "能够", "知道", "这", "一点", "；", "然", "\n", "后", "，", "我们", "将", "结合", "使用", "KEYDOWN", " ", "和", "KEYUP", " ", "事件", "，", "以及", "一个", "名为", "moving", "_", "right", " ", "的", "标志", "来", "实现", "持续", "移动", "。", "\n", "飞船", "不动时", "，", "标志", "moving", "_", "right", " ", "将", "为", "False", " ", "。", "玩家", "按下", "右", "箭头键", "时", "，", "我们", "将", "这个", "标志", "设置", "为", "True", " ", "；", "而", "玩家", "松开", "时", "，", "我们", "将", "这个", "标志", "重新", "设置", "为", "False", " ", "。", "\n", "飞船", "的", "属性", "都", "由", "Ship", " ", "类", "控制", "，", "因此", "我们", "将", "给", "这个", "类", "添加", "一个", "名为", "moving", "_", "right", " ", "的", "属性", "和", "一个", "名为", "update", "(", ")", " ", "的", "方法", "。", "方法", "update", "(", ")", " ", "检查", "标志", "moving", "_", "right", " ", "的", "状态", "，", "\n", "如果", "这个", "标志", "为", "True", " ", "，", "就", "调整", "飞船", "的", "位置", "。", "每当", "需要", "调整", "飞船", "的", "位置", "时", "，", "我们", "都", "调用", "这个", "方法", "。", "\n", "下面", "是", "对", "Ship", " ", "类", "所", "做", "的", "修改", "：", "\n", "ship", ".", "py", "\n", " ", " ", "class", " ", "Ship", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "每", "艘", "新", "飞船", "放在", "屏幕", "底部", "中央"], ["self", ".", "rect", ".", "centerx", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "centerx", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "bottom", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "bottom", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "移动", "标志", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "根据", "移动", "标志", "调整", "飞船", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "right", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "+", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "blitme", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "在", "方法", "__", "init", "__", "(", ")", " ", "中", "，", "我们", "添加", "了", "属性", "self", ".", "moving", "_", "right", " ", "，", "并", "将", "其", "初始值", "设置", "为", "False", " ", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "添加", "了", "方法", "update", "(", ")", " ", "，", "它", "在", "前述", "标志", "为", "True", " ", "时向", "\n", "右", "移动", "飞船", "（", "见", "❷", "）", "。"], ["右", "移动", "飞船", "（", "见", "❷", "）", "。", "\n", "下面", "来", "修改", "check", "_", "events", "(", ")", " ", "，", "使", "其", "在", "玩家", "按下", "右", "箭头键", "时", "将", "moving", "_", "right", " ", "设置", "为", "True", " ", "，", "并", "在", "玩家", "松开", "时", "将", "moving", "_", "right", " ", "设置", "为", "False", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "events", "(", "ship", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "True", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYUP", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "False"], ["ship", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", "在", "❶", "处", "，", "我们", "修改", "了", "游戏", "在", "玩家", "按下", "右", "箭头键", "时", "响应", "的", "方式", "：", "不", "直接", "调整", "飞船", "的", "位置", "，", "而", "只是", "将", "moving", "_", "right", " ", "设置", "为", "True", " ", "。", "在", "❷", "处", "，", "我们", "添加", "了", "一个", "新", "的", "elif", " ", "代码", "块", "，", "用", "\n", "于", "响应", "KEYUP", " ", "事件", "：", "玩家", "松开", "右", "箭头键", "（", "K", "_", "RIGHT", " ", "）", "时", "，", "我们", "将", "moving", "_", "right", " ", "设置", "为", "False", " ", "。", "\n", "最后", "，", "我们", "需要", "修改", "alien", "_", "invasion", ".", "py", " ", "中", "的", "while", " ", "循环", "，", "以便", "每次", "执行", "循环", "时", "都", "调用", "飞船", "的", "方法", "update", "(", ")", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ship", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", "\n", "飞船", "的", "位置", "将", "在", "检测", "到", "键盘", "事件", "后", "（", "但", "在", "更新", "屏幕", "前", "）", "更新", "。", "这样", "，", "玩家", "输入", "时", "，", "飞船", "的", "位置", "将", "更新", "，", "从而", "确保", "使用", "更新", "后", "的", "位置", "将", "飞船", "绘制", "到", "屏幕", "上", "。"], ["如果", "你", "现在", "运行", "alien", "_", "invasion", ".", "py", "并", "按住", "右", "箭头键", "，", "飞船", "将", "不断", "地向", "右", "移动", "，", "直到", "你", "松开", "为止", "。", "\n", "12.6", ".", "3", "　", "左右", "移动", "\n", "　", "左右", "移动", "\n", "飞船", "能够", "不断", "地向", "右", "移动", "后", "，", "添加", "向", "左", "移动", "的", "逻辑", "很", "容易", "。", "我们", "将", "再次", "修改", "Ship", " ", "类", "和", "函数", "check", "_", "events", "(", ")", " ", "。", "下面", "显示", "了", "对", "Ship", " ", "类", "的", "方法", "__", "init", "__", "(", ")", " ", "和", "update", "(", ")", " ", "所", "做", "\n", "的", "相关", "修改", "：", "\n", "ship", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "移动", "标志", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "moving", "_", "left", " ", "=", " ", "False", "\n", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "根据", "移动", "标志", "调整", "飞船", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "right", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "+", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "left", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "-", "=", " ", "1"], ["self", ".", "rect", ".", "centerx", " ", "-", "=", " ", "1", "\n", "在", "方法", "__", "init", "__", "(", ")", " ", "中", "，", "我们", "添加", "了", "标志", "self", ".", "moving", "_", "left", " ", "；", "在", "方法", "update", "(", ")", " ", "中", "，", "我们", "添加", "了", "一个", "if", " ", "代码", "块", "而", "不是", "elif", " ", "代码", "块", "，", "这样", "如果", "玩家", "同时", "按下", "了", "左右", "箭头", "\n", "键", "，", "将", "先", "增大", "飞船", "的", "rect", ".", "centerx", " ", "值", "，", "再", "降低", "这个", "值", "，", "即", "飞船", "的", "位置", "保持", "不变", "。", "如果", "使用", "一个", "elif", " ", "代码", "块", "来", "处理", "向", "左", "移动", "的", "情况", "，", "右", "箭头键", "将", "始终", "处于", "优先", "地位", "。", "从", "向", "左移", "\n", "动", "切换", "到", "向", "右", "移动", "时", "，", "玩家", "可能", "同时", "按住", "左右", "箭头键", "，", "在", "这种", "情况", "下", "，", "前面", "的", "做法", "让", "移动", "更", "准确", "。", "\n", "我们", "还", "需", "对", "check", "_", "events", "(", ")", " ", "作两", "方面", "的", "调整", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "events", "(", "ship", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":"], ["if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "True", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "LEFT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "left", " ", "=", " ", "True", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYUP", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "LEFT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "left", " ", "=", " ", "False"], ["如果", "因", "玩家", "按下", "K", "_", "LEFT", " ", "键", "而", "触发", "了", "KEYDOWN", " ", "事件", "，", "我们", "就", "将", "moving", "_", "left", " ", "设置", "为", "True", " ", "；", "如果", "因", "玩家", "松开", "K", "_", "LEFT", " ", "而", "触发", "了", "KEYUP", " ", "事件", "，", "我们", "就", "将", "moving", "_", "left", " ", "设置", "\n", "为", "False", " ", "。", "这里", "之所以", "可以", "使用", "elif", " ", "代码", "块", "，", "是因为", "每个", "事件", "都", "只", "与", "一个", "键", "相关联", "；", "如果", "玩家", "同时", "按下", "了", "左右", "箭头键", "，", "将", "检测", "到", "两个", "不同", "的", "事件", "。", "\n", "如果", "此时", "运行", "alien", "_", "invasion", ".", "py", "，", "将", "能够", "不断", "地", "左右", "移动", "飞船", "；", "如果", "你", "同时", "按", "左右", "箭头键", "，", "飞船", "将", "纹丝不动", "。", "\n", "下面", "来", "进一步", "优化", "飞船", "的", "移动", "方式", "：", "调整", "飞船", "的", "速度", "；", "限制", "飞船", "的", "移动", "距离", "，", "以免", "它", "移到", "屏幕", "外面", "去", "。", "\n", "12.6", ".", "4", "　", "调整", "飞船", "的", "速度", "\n", "　", "调整", "飞船", "的", "速度", "\n", "当前", "，", "每次", "执行", "while", " ", "循环", "时", "，", "飞船", "最", "多", "移动", "1", "像素", "，", "但", "我们", "可以", "在", "Settings", " ", "类中", "添加", "属性", "ship", "_", "speed", "_", "factor", " ", "，", "用于", "控制", "飞船", "的", "速度", "。", "我们", "将", "根据", "这个", "属性", "决定", "飞船", "在", "\n", "每次", "循环", "时", "最", "多", "移动", "多少", "距离", "。", "下面", "演示", "了", "如何", "在", "settings", ".", "py", "中", "添加", "这个", "新", "属性", "：", "\n", "settings", ".", "py", "\n", "class", " ", "Settings", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "一个", "存储", "游戏", "《", "外星人", "入侵", "》", "的", "所有", "设置", "的", "类", "\"", "\"", "\""], ["class", " ", "Settings", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "一个", "存储", "游戏", "《", "外星人", "入侵", "》", "的", "所有", "设置", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "飞船", "的", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "speed", "_", "factor", " ", "=", " ", "1.5", "\n", "我们", "将", "ship", "_", "speed", "_", "factor", " ", "的", "初始值", "设置", "成", "了", "1.5", " ", "。", "需要", "移动", "飞船", "时", "，", "我们", "将", "移动", "1.5", "像素", "而", "不是", "1", "像素", "。", "\n", "通过", "将", "速度", "设置", "指定", "为", "小", "数值", "，", "可", "在", "后面", "加快", "游戏", "的", "节奏", "时", "更", "细致", "地", "控制", "飞船", "的", "速度", "。", "然而", "，", "rect", " ", "的", "centerx", " ", "等", "属性", "只能", "存储", "整数", "值", "，", "因此", "我们", "需要", "对", "Ship", " ", "类", "做些", "修改", "：", "\n", "ship", ".", "py", "\n", " ", " ", "class", " ", "Ship", "(", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "飞船", "并", "设置", "其", "初始", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "每", "艘", "新", "飞船", "放在", "屏幕", "底部", "中央"], ["--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "每", "艘", "新", "飞船", "放在", "屏幕", "底部", "中央", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "在", "飞船", "的", "属性", "center", "中", "存储", "小", "数值", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "=", " ", "float", "(", "self", ".", "rect", ".", "centerx", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "移动", "标志", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "moving", "_", "left", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "根据", "移动", "标志", "调整", "飞船", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "更新", "飞船", "的", "center", "值", "，", "而", "不是", "rect", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "right", ":", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "+", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "speed", "_", "factor", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "left", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "-", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "speed", "_", "factor"], ["#", " ", "根据", "self", ".", "center", "更新", "rect", "对象", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "=", " ", "self", ".", "center", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "blitme", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "在", "❶", "处", "，", "我们", "在", "__", "init", "__", "(", ")", " ", "的", "形参", "列表", "中", "添加", "了", "ai", "_", "settings", " ", "，", "让", "飞船", "能够", "获取", "其", "速度", "设置", "。", "接下来", "，", "我们", "将", "形参", "ai", "_", "settings", " ", "的", "值", "存储", "在", "一个", "属性", "中", "，", "以便", "能够", "\n", "在", "update", "(", ")", " ", "中", "使用", "它", "（", "见", "❷", "）", "。", "鉴于", "现在", "调整", "飞船", "的", "位置", "时", "，", "将", "增加", "或", "减去", "一个", "单位", "为", "像素", "的", "小", "数值", "，", "因此", "需要", "将", "位置", "存储", "在", "一个", "能够", "存储", "小", "数值", "的", "变量", "中", "。", "可以", "使用", "小数", "来", "\n", "设置", "rect", " ", "的", "属性", "，", "但", "rect", " ", "将", "只", "存储", "这个", "值", "的", "整数", "部分", "。", "为", "准确", "地", "存储", "飞船", "的", "位置", "，", "我们", "定义", "了", "一个", "可", "存储", "小", "数值", "的", "新", "属性", "self", ".", "center", " ", "（", "见", "❸", "）", "。", "我们", "使用", "函数", "float", "(", ")", "\n", "将", "self", ".", "rect", ".", "centerx", " ", "的", "值", "转换", "为", "小数", "，", "并", "将", "结果", "存储", "到", "self", ".", "center", " ", "中", "。"], ["将", "self", ".", "rect", ".", "centerx", " ", "的", "值", "转换", "为", "小数", "，", "并", "将", "结果", "存储", "到", "self", ".", "center", " ", "中", "。", "\n", "现在", "在", "update", "(", ")", " ", "中", "调整", "飞船", "的", "位置", "时", "，", "将", "self", ".", "center", " ", "的", "值", "增加", "或", "减去", "ai", "_", "settings", ".", "ship", "_", "speed", "_", "factor", " ", "的", "值", "（", "见", "❹", "）", "。", "更新", "self", ".", "center", " ", "后", "，", "我们", "再", "根据", "它", "来", "\n", "更新", "控制", "飞船", "位置", "的", "self", ".", "rect", ".", "centerx", " ", "（", "见", "❺", "）", "。", "self", ".", "rect", ".", "centerx", " ", "将", "只", "存储", "self", ".", "center", " ", "的", "整数", "部分", "，", "但", "对", "显示", "飞船", "而言", "，", "这", "问题", "不", "大", "。", "\n", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "Ship", " ", "实例", "时", "，", "需要", "传入", "实参", "ai", "_", "settings", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", "--", "snip", "--", "\n", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "创建", "飞船", "\n", " ", " ", " ", " ", "ship", " ", "=", " ", "Ship", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "，", "只要", "ship", "_", "speed", "_", "factor", " ", "的", "值", "大于", "1", "，", "飞船", "的", "移动", "速度", "就", "会", "比", "以前", "更", "快", "。", "这", "有助于", "让", "飞船", "的", "反应速度", "足够", "快", "，", "能够", "将", "外星人", "射下来", "，", "还", "让", "我们", "能够", "随着", "游戏", "的", "进行", "加快", "\n", "游戏", "的", "节奏", "。"], ["游戏", "的", "节奏", "。", "\n", "12.6", ".", "5", "　", "限制", "飞船", "的", "活动", "范围", "\n", "　", "限制", "飞船", "的", "活动", "范围", "\n", "当前", "，", "如果", "玩家", "按住", "箭头键", "的", "时间", "足够", "长", "，", "飞船", "将", "移到", "屏幕", "外面", "，", "消失", "得", "无影无踪", "。", "下面", "来", "修复", "这种", "问题", "，", "让", "飞船", "到达", "屏幕", "边缘", "后", "停止", "移动", "。", "为此", "，", "我们", "将", "修改", "Ship", " ", "类", "的", "方", "\n", "法", "update", "(", ")", " ", "：", "\n", "ship", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "根据", "移动", "标志", "调整", "飞船", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "更新", "飞船", "的", "center", "值", "，", "而", "不是", "rect", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "right", " ", "and", " ", "self", ".", "rect", ".", "right", " ", "<", " ", "self", ".", "screen", "_", "rect", ".", "right", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "+", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "speed", "_", "factor"], ["❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "moving", "_", "left", " ", "and", " ", "self", ".", "rect", ".", "left", " ", ">", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "-", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "speed", "_", "factor", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "根据", "self", ".", "center", "更新", "rect", "对象", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "=", " ", "self", ".", "center", "\n", "上述", "代码", "在", "修改", "self", ".", "center", " ", "的", "值", "之前", "检查", "飞船", "的", "位置", "。", "self", ".", "rect", ".", "right", " ", "返回", "飞船", "外接", "矩形", "的", "右", "边缘", "的", " ", "x", " ", "坐标", "，", "如果", "这个", "值", "小于", "self", ".", "screen", "_", "rect", ".", "right", " ", "的", "值", "，", "\n", "就", "说明", "飞船", "未", "触及", "屏幕", "右", "边缘", "（", "见", "❶", "）", "。", "左", "边缘", "的", "情况", "与", "此", "类似", "：", "如果", "rect", " ", "的", "左", "边缘", "的", " ", "x", " ", "坐标", "大于", "零", "，", "就", "说明", "飞船", "未", "触及", "屏幕", "左", "边缘", "（", "见", "❷", "）", "。", "这", "确保", "仅当", "飞船", "在", "屏幕", "内时", "，", "\n", "才", "调整", "self", ".", "center", " ", "的", "值", "。", "\n", "如果", "此时", "运行", "alien", "_", "invasion", ".", "py", "，", "飞船", "将", "在", "触及", "屏幕", "左", "边缘", "或右", "边缘", "后", "停止", "移动", "。", "\n", "12.6", ".", "6", "　", "重构", "\n", "　", "重构", "check", "_", "events", "(", ")"], ["12.6", ".", "6", "　", "重构", "\n", "　", "重构", "check", "_", "events", "(", ")", "\n", "随着", "游戏", "开发", "的", "进行", "，", "函数", "check", "_", "events", "(", ")", " ", "将", "越来越", "长", "，", "我们", "将", "其", "部分", "代码", "放在", "两个", "函数", "中", "：", "一个", "处理", "KEYDOWN", " ", "事件", "，", "另", "一个", "处理", "KEYUP", " ", "事件", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ship", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "True", "\n", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "LEFT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "left", " ", "=", " ", "True", "\n", "def", " ", "check", "_", "keyup", "_", "events", "(", "event", ",", " ", "ship", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "松开", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "RIGHT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "right", " ", "=", " ", "False", "\n", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "LEFT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "moving", "_", "left", " ", "=", " ", "False"], ["ship", ".", "moving", "_", "left", " ", "=", " ", "False", "\n", "def", " ", "check", "_", "events", "(", "ship", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sys", ".", "exit", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ship", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYUP", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "keyup", "_", "events", "(", "event", ",", " ", "ship", ")", "\n", "我们", "创建", "了", "两个", "新", "函数", "：", "check", "_", "keydown", "_", "events", "(", ")", " ", "和", "check", "_", "keyup", "_", "events", "(", ")", " ", "，", "它们", "都", "包含", "形参", "event", " ", "和", "ship", " ", "。", "这", "两个", "函数", "的", "代码", "是从", "check", "_", "events", "(", ")", " ", "中", "复制"], ["而来", "的", "，", "因此", "我们", "将", "函数", "check", "_", "events", " ", "中", "相应", "的", "代码", "替换成", "了", "对", "这", "两个", "函数", "的", "调用", "。", "现在", "，", "函数", "check", "_", "events", "(", ")", " ", "更", "简单", "，", "代码", "结构", "更", "清晰", "。", "这样", "，", "在", "其中", "响应", "其他", "玩家", "\n", "输入", "时", "将", "更", "容易", "。", "\n", "12.7", "　", "简单", "回顾", "\n", "　", "简单", "回顾", "\n", "下", "一节", "将", "添加", "射击", "功能", "，", "这", "需要", "新增", "一个", "名为", "bullet", ".", "py", "的", "文件", "，", "并", "对", "一些", "既有", "文件", "进行", "修改", "。", "当前", "，", "我们", "有", "四个", "文件", "，", "其中", "包含", "很多类", "、", "函数", "和", "方法", "。", "添加", "其他", "功能", "之前", "，", "为", "让", "你", "\n", "清楚", "这个", "项目", "的", "组织", "结构", "，", "先", "来", "回顾", "一下", "这些", "文件", "。", "\n", "12.7", ".", "1", "　", "\n", "　", "alien", "_", "invasion", ".", "py", "\n", "主", "文件", "alien", "_", "invasion", ".", "py", "创建", "一系列", "整个", "游戏", "都", "要", "用到", "的", "对象", "：", "存储", "在", "ai", "_", "settings", " ", "中", "的", "设置", "、", "存储", "在", "screen", " ", "中", "的", "主", "显示", "surface", "以及", "一个", "飞船", "实例", "。", "文件", "alien", "_", "invasion", ".", "py", "还", "包含", "游", "\n", "戏", "的", "主", "循环", "，", "这是", "一个", "调用", "check", "_", "events", "(", ")", " ", "、", "ship", ".", "update", "(", ")", " ", "和", "update", "_", "screen", "(", ")", " ", "的", "while", " ", "循环", "。"], ["要", "玩游戏", "《", "外星人", "入侵", "》", "，", "只", "需", "运行", "文件", "alien", "_", "invasion", ".", "py", "。", "其他", "文件", "（", "settings", ".", "py", "、", "game", "_", "functions", ".", "py", "、", "ship", ".", "py", "）", "包含", "的", "代码", "被", "直接", "或", "间接", "地", "导入到", "这个", "文件", "中", "。", "\n", "12.7", ".", "2", "　", "\n", "　", "settings", ".", "py", "\n", "文件", "settings", ".", "py", "包含", "Settings", " ", "类", "，", "这个", "类", "只", "包含", "方法", "__", "init", "__", "(", ")", " ", "，", "它", "初始化", "控制", "游戏", "外观", "和", "飞船", "速度", "的", "属性", "。", "\n", "12.7", ".", "3", "　", "\n", "　", "game", "_", "functions", ".", "py", "\n", "文件", "game", "_", "functions", ".", "py", "包含", "一系列", "函数", "，", "游戏", "的", "大部分", "工作", "都", "是", "由", "它们", "完成", "的", "。", "函数", "check", "_", "events", "(", ")", " ", "检测", "相关", "的", "事件", "，", "如", "按键", "和", "松开", "，", "并", "使用", "辅助", "函", "\n", "数", "check", "_", "keydown", "_", "events", "(", ")", " ", "和", "check", "_", "keyup", "_", "events", "(", ")", " ", "来", "处理", "这些", "事件", "。", "就", "目前", "而言", "，", "这些", "函数", "管理", "飞船", "的", "移动", "。", "模块", "game", "_", "functions", " ", "还", "包含", "函", "\n", "数", "update", "_", "screen", "(", ")", " ", "，", "它", "用于", "在", "每次", "执行", "主", "循环", "时", "都", "重绘", "屏幕", "。", "\n", "12.7", ".", "4", "　", "\n", "　", "ship", ".", "py"], ["12.7", ".", "4", "　", "\n", "　", "ship", ".", "py", "\n", "文件", "ship", ".", "py", "包含", "Ship", " ", "类", "，", "这个", "类", "包含", "方法", "__", "init", "__", "(", ")", " ", "、", "管理", "飞船", "位置", "的", "方法", "update", "(", ")", " ", "以及", "在", "屏幕", "上", "绘制", "飞船", "的", "方法", "blitme", "(", ")", " ", "。", "表示", "飞船", "的", "图像", "存储", "在", "文件夹", "images", "下", "的", "\n", "文件", "ship", ".", "bmp", "中", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "12", "-", "3", " ", "火箭", "\n", "火箭", " ", "：", "编写", "一个", "游戏", "，", "开始", "时", "屏幕", "中央", "有", "一个", "火箭", "，", "而", "玩家", "可", "使用", "四个", "方向键", "上下左右", "移动", "火箭", "。", "请", "务必", "确保", "火箭", "不会", "移", "到", "屏幕", "外面", "。", "\n", "12", "-", "4", " ", "按键", "\n", "按键", " ", "：", "创建", "一个", "程序", "，", "显示", "一个", "空", "屏幕", "。", "在", "事件", "循环", "中", "，", "每当", "检测", "到", "pygame", ".", "KEYDOWN", " ", "事件", "时", "都", "打印", "属性", "event", ".", "key", " ", "。", "运行", "这个", "程序", "，", "并", "按", "各种", "键", "，", "看看", "\n", "Pygame", "如何", "响应", "。", "\n", "12.8", "　", "射击", "\n", "　", "射击", "\n", "下面", "来", "添加", "射击", "功能", "。", "我们", "将", "编写", "玩家", "按", "空格键", "时", "发射", "子弹", "（", "小", "矩形", "）", "的", "代码", "。", "子弹", "将", "在", "屏幕", "中", "向上", "穿行", "，", "抵达", "屏幕", "上", "边缘", "后", "消失", "。", "\n", "12.8", ".", "1", "　", "添加", "子弹", "设置", "\n", "　", "添加", "子弹", "设置", "\n", "首先", "，", "更新", "settings", ".", "py", "，", "在", "其", "方法", "__", "init", "__", "(", ")", " ", "末尾", "存储", "新类", "Bullet", " ", "所", "需", "的", "值", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "子弹", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "speed", "_", "factor", " ", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "width", " ", "=", " ", "3"], ["self", ".", "bullet", "_", "height", " ", "=", " ", "15", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "color", " ", "=", " ", "60", ",", " ", "60", ",", " ", "60", "\n", "这些", "设置", "创建", "宽", "3", "像素", "、", "高", "15", "像素", "的", "深灰色", "子弹", "。", "子弹", "的", "速度", "比", "飞船", "稍低", "。", "\n", "12.8", ".", "2", "　", "创建", "\n", "　", "创建", "Bullet", " ", "类", "\n", "类", "\n", "下面", "来", "创建", "存储", "Bullet", " ", "类", "的", "文件", "bullet", ".", "py", "，", "其", "前半部", "分", "如下", "：", "\n", "bullet", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Sprite", "\n", " ", " ", "class", " ", "Bullet", "(", "Sprite", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一个", "对", "飞船", "发射", "的", "子弹", "进行", "管理", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "飞船", "所处", "的", "位置", "创建", "一个", "子弹", "对象", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", "Bullet", ",", " ", "self", ")", ".__", "init", "__", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "在", "(", "0", ",", "0", ")", "处", "创建", "一个", "表示", "子弹", "的", "矩形", "，", "再", "设置", "正确", "的", "位置"], ["#", " ", "在", "(", "0", ",", "0", ")", "处", "创建", "一个", "表示", "子弹", "的", "矩形", "，", "再", "设置", "正确", "的", "位置", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", " ", "=", " ", "pygame", ".", "Rect", "(", "0", ",", " ", "0", ",", " ", "ai", "_", "settings", ".", "bullet", "_", "width", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ai", "_", "settings", ".", "bullet", "_", "height", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "centerx", " ", "=", " ", "ship", ".", "rect", ".", "centerx", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "top", " ", "=", " ", "ship", ".", "rect", ".", "top", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "存储", "用", "小数", "表示", "的", "子弹", "位置", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "y", " ", "=", " ", "float", "(", "self", ".", "rect", ".", "y", ")", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "color", " ", "=", " ", "ai", "_", "settings", ".", "bullet", "_", "color", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "speed", "_", "factor", " ", "=", " ", "ai", "_", "settings", ".", "bullet", "_", "speed", "_", "factor", "\n", "Bullet", " ", "类", "继承", "了", "我们", "从", "模块", "pygame", ".", "sprite", " ", "中", "导入", "的", "Sprite", " ", "类", "。", "通过", "使用", "精灵", "，", "可", "将", "游戏", "中", "相关", "的", "元素", "编组", "，", "进而", "同时", "操作", "编组", "中", "的", "所有", "元素", "。", "为", "创建", "子弹", "实例", "，", "需要"], ["向", "__", "init", "__", "(", ")", " ", "传递", "ai", "_", "settings", " ", "、", "screen", " ", "和", "ship", " ", "实例", "，", "还", "调用", "了", "super", "(", ")", " ", "来", "继承", "Sprite", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "代码", "super", "(", "Bullet", ",", " ", "self", ")", ".__", "init", "__", "(", ")", " ", "使用", "了", "Python", " ", "2.7", "语法", "。", "这种", "语法", "也", "适用", "于", "Python", " ", "3", "，", "但", "你", "也", "可以", "将", "这行", "代码", "简写", "为", "super", "(", ")", ".__", "init", "__", "(", ")", " ", "。", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "子弹", "的", "属性", "rect", " ", "。", "子弹", "并非", "基于", "图像", "的", "，", "因此", "我们", "必须", "使用", "pygame", ".", "Rect", "(", ")", " ", "类", "从", "空白", "开始", "创建", "一个", "矩形", "。", "创建", "这个", "类", "的", "实例", "时", "，", "必须", "提供", "矩形", "左上角", "的", "\n", "x", " ", "坐标", "和", " ", "y", " ", "坐标", "，", "还有", "矩形", "的", "宽度", "和", "高度", "。", "我们", "在", "(", "0", ",", " ", "0", ")", "处", "创建", "这个", "矩形", "，", "但", "接下来", "的", "两行", "代码", "将", "其移", "到", "了", "正确", "的", "位置", "，", "因为", "子弹", "的", "初始", "位置", "取决于", "飞船", "当前", "的", "位置", "。", "子弹", "的", "宽度", "\n", "和", "高度", "是从", "ai", "_", "settings", " ", "中", "获取", "的", "。", "\n", "在", "❷", "处", "，", "我们", "将", "子弹", "的", "centerx", " ", "设置", "为", "飞船", "的", "rect", ".", "centerx", " ", "。", "子弹", "应从", "飞船", "顶部", "射", "出", "，", "因此", "我们", "将", "表示", "子弹", "的", "rect", " ", "的", "top", " ", "属性", "设置", "为", "飞船", "的", "rect", " ", "的", "top", " ", "属性", "，", "让", "子弹", "看", "\n", "起来", "像是", "从", "飞船", "中射出", "的", "（", "见", "❸", "）", "。"], ["起来", "像是", "从", "飞船", "中射出", "的", "（", "见", "❸", "）", "。", "\n", "我们", "将", "子弹", "的", " ", "y", " ", "坐标", "存储", "为", "小", "数值", "，", "以便", "能够", "微调", "子弹", "的", "速度", "（", "见", "❹", "）", "。", "在", "❺", "处", "，", "我们", "将", "子弹", "的", "颜色", "和", "速度", "设置", "分别", "存储", "到", "self", ".", "color", " ", "和", "self", ".", "speed", "_", "factor", " ", "中", "。", "\n", "下面", "是", "bullet", ".", "py", "的", "第二", "部分", "—", "—", "方法", "update", "(", ")", " ", "和", "draw", "_", "bullet", "(", ")", " ", "：", "\n", "bullet", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "向上", "移动", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "更新", "表示", "子弹", "位置", "的", "小", "数值", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "y", " ", "-", "=", " ", "self", ".", "speed", "_", "factor", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "更新", "表示", "子弹", "的", "rect", "的", "位置", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "y", " ", "=", " ", "self", ".", "y", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "draw", "_", "bullet", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "屏幕", "上", "绘制", "子弹", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "draw", ".", "rect", "(", "self", ".", "screen", ",", " ", "self", ".", "color", ",", " ", "self", ".", "rect", ")"], ["方法", "update", "(", ")", " ", "管理", "子弹", "的", "位置", "。", "发射", "出去", "后", "，", "子弹", "在", "屏幕", "中", "向上", "移动", "，", "这", "意味着", "y", " ", "坐标", "将", "不断", "减小", "，", "因此", "为", "更新", "子弹", "的", "位置", "，", "我们", "从", "self", ".", "y", " ", "中", "减去", "self", ".", "speed", "_", "factor", "\n", "的", "值", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "将", "self", ".", "rect", ".", "y", " ", "设置", "为", "self", ".", "y", " ", "的", "值", "（", "见", "❷", "）", "。", "属性", "speed", "_", "factor", " ", "让", "我们", "能够", "随着", "游戏", "的", "进行", "或", "根据", "需要", "提高", "子弹", "的", "速度", "，", "以", "调整", "游戏", "的", "行", "\n", "为", "。", "子弹", "发射", "后", "，", "其", " ", "x", " ", "坐标", "始终不变", "，", "因此", "子弹", "将", "沿", "直线", "垂直", "地往", "上", "穿行", "。", "\n", "需要", "绘制", "子弹", "时", "，", "我们", "调用", "draw", "_", "bullet", "(", ")", " ", "。", "函数", "draw", ".", "rect", "(", ")", " ", "使用", "存储", "在", "self", ".", "color", " ", "中", "的", "颜色", "填充", "表示", "子弹", "的", "rect", " ", "占据", "的", "屏幕", "部分", "（", "见", "❸", "）", "。", "\n", "12.8", ".", "3", "　", "将", "子弹", "存储", "到", "编组", "中", "\n", "　", "将", "子弹", "存储", "到", "编组", "中", "\n", "定义", "Bullet", " ", "类", "和", "必要", "的", "设置", "后", "，", "就", "可以", "编写", "代码", "了", "，", "在", "玩家", "每次", "按", "空格键", "时", "都", "射出", "一发", "子弹", "。", "首先", "，", "我们", "将", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "一个", "编组", "（", "group", "）", "，", "用于", "存储", "所有", "有效", "的", "子"], ["弹", "，", "以便", "能够", "管理", "发射", "出去", "的", "所有", "子弹", "。", "这个", "编组", "将", "是", "pygame", ".", "sprite", ".", "Group", " ", "类", "的", "一个", "实例", "；", "pygame", ".", "sprite", ".", "Group", " ", "类", "类似", "于", "列表", "，", "但", "提供", "了", "有助于", "开发", "游戏", "的", "额外", "功", "\n", "能", "。", "在", "主", "循环", "中", "，", "我们", "将", "使用", "这个", "编组", "在", "屏幕", "上", "绘制", "子弹", "，", "以及", "更新", "每颗", "子弹", "的", "位置", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Group", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一艘", "飞船", "\n", " ", " ", " ", " ", " ", " ", "ship", " ", "=", " ", "Ship", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "用于", "存储", "子弹", "的", "编组", "\n", "❶", " ", " ", " ", " ", " ", "bullets", " ", "=", " ", "Group", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "update", "(", ")"], ["❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", "run", "_", "game", "(", ")"], ["我们", "导入", "了", "pygame", ".", "sprite", " ", "中", "的", "Group", " ", "类", "。", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "Group", " ", "实例", "，", "并", "将", "其", "命名", "为", "bullets", " ", "。", "这个", "编组", "是", "在", "while", " ", "循环", "外面", "创建", "的", "，", "这样", "就", "无需", "每次", "运行", "该", "\n", "循环", "时", "都", "创建", "一个", "新", "的", "子弹", "编组", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "在", "循环", "内部", "创建", "这样", "的", "编组", "，", "游戏", "运行", "时", "将", "创建", "数千个", "子弹", "编组", "，", "导致", "游戏", "慢得", "像", "蜗牛", "。", "如果", "游戏", "停滞不前", "，", "请", "仔细", "查看", "主", "while", " ", "循环", "中", "发生", "的", "情况", "。", "\n", "我们", "将", "bullets", " ", "传递", "给", "了", "check", "_", "events", "(", ")", " ", "和", "update", "_", "screen", "(", ")", " ", "。", "在", "check", "_", "events", "(", ")", " ", "中", "，", "需要", "在", "玩家", "按", "空格键", "时", "处理", "bullets", " ", "；", "而", "在", "update", "_", "screen", "(", ")", " ", "中", "，", "需要", "\n", "更新", "要", "绘制", "到", "屏幕", "上", "的", "bullets", " ", "。", "\n", "当", "你", "对", "编组", "调用", "update", "(", ")", " ", "时", "，", "编组", "将", "自动", "对", "其中", "的", "每个", "精灵", "调用", "update", "(", ")", " ", "，", "因此", "代码", "行", "bullets", ".", "update", "(", ")", " ", "将", "为", "编组", "bullets", " ", "中", "的", "每颗", "子弹", "调用", "bullet", ".", "update", "(", ")", "\n", "。", "\n", "12.8", ".", "4", "　", "开火", "\n", "　", "开火"], ["。", "\n", "12.8", ".", "4", "　", "开火", "\n", "　", "开火", "\n", "在", "game", "_", "functions", ".", "py", "中", "，", "我们", "需要", "修改", "check", "_", "keydown", "_", "events", "(", ")", " ", "，", "以便", "在", "玩家", "按", "空格键", "时", "发射", "一颗", "子弹", "。", "我们", "无需", "修改", "check", "_", "keyup", "_", "events", "(", ")", " ", "，", "因为", "玩家", "松开", "空格键", "\n", "时", "什么", "都", "不会", "发生", "。", "我们", "还", "需", "修改", "update", "_", "screen", "(", ")", " ", "，", "确保", "在", "调用", "flip", "(", ")", " ", "前", "在", "屏幕", "上", "重绘", "每颗", "子弹", "。", "下面", "是", "对", "game", "_", "functions", ".", "py", "所", "做", "的", "相关", "修改", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "bullet", " ", "import", " ", "Bullet", "\n", "❶", " ", "def", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "SPACE", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一颗", "子弹", "，", "并", "将", "其", "加入", "到", "编组", "bullets", "中", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "bullet", " ", "=", " ", "Bullet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")"], ["bullets", ".", "add", "(", "new", "_", "bullet", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❸", " ", "def", " ", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "KEYDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❹", " ", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "在", "飞船", "和", "外星人", "后面", "重绘", "所有", "子弹", "\n", "❺", " ", " ", " ", " ", " ", "for", " ", "bullet", " ", "in", " ", "bullets", ".", "sprites", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullet", ".", "draw", "_", "bullet", "(", ")"], ["bullet", ".", "draw", "_", "bullet", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "ship", ".", "blitme", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "编组", "bulltes", " ", "传递", "给", "了", "check", "_", "keydown", "_", "events", "(", ")", " ", "（", "见", "❶", "）", "。", "玩家", "按", "空格键", "时", "，", "创建", "一颗", "新", "子弹", "（", "一个", "名为", "new", "_", "bullet", " ", "的", "Bullet", " ", "实例", "）", "，", "并", "使用", "方法", "add", "(", ")", " ", "将", "其", "加入", "\n", "到", "编组", "bullets", " ", "中", "（", "见", "❷", "）", "；", "代码", "bullets", ".", "add", "(", "new", "_", "bullet", ")", " ", "将", "新", "子弹", "存储", "到", "编组", "bullets", " ", "中", "。", "\n", "在", "check", "_", "events", "(", ")", " ", "的", "定义", "中", "，", "我们", "需要", "添加", "形参", "bullets", " ", "（", "见", "❸", "）", "；", "调用", "check", "_", "keydown", "_", "events", "(", ")", " ", "时", "，", "我们", "也", "需要", "将", "bullets", " ", "作为", "实参", "传递", "给", "它", "。", "\n", "在", "❹", "处", "，", "我们", "给", "在", "屏幕", "上", "绘制", "子弹", "的", "update", "_", "screen", "(", ")", " ", "添加", "了", "形参", "bullets", " ", "。", "方法", "bullets", ".", "sprites", "(", ")", " ", "返回", "一个", "列表", "，", "其中", "包含", "编组", "bullets", " ", "中", "的", "所有", "精灵", "。", "为", "在", "屏", "\n", "幕上", "绘制", "发射", "的", "所有", "子弹", "，", "我们", "遍历", "编组", "bullets", " ", "中", "的", "精灵", "，", "并", "对", "每个", "精灵", "都", "调用", "draw", "_", "bullet", "(", ")", " ", "（", "见", "❺", "）", "。"], ["如果", "此时", "运行", "alien", "_", "invasion", ".", "py", "，", "将", "能够", "左右", "移动", "飞船", "，", "并", "发射", "任意", "数量", "的", "子弹", "。", "子弹", "在", "屏幕", "上", "向上", "穿行", "，", "抵达", "屏幕", "顶部", "后", "消失", "，", "如图", "12", "-", "3", "所示", "。", "可", "在", "settings", ".", "py", "中", "修改", "子弹", "的", "尺寸", "、", "\n", "颜色", "和", "速度", "。", "\n", "图", "\n", "图", "12", "-", "3", "　", "飞船", "发射", "一系列", "子弹", "后", "的", "《", "外星人", "入侵", "》", "游戏", "\n", "　", "飞船", "发射", "一系列", "子弹", "后", "的", "《", "外星人", "入侵", "》", "游戏", "\n", "12.8", ".", "5", "　", "删除", "已", "消失", "的", "子弹", "\n", "　", "删除", "已", "消失", "的", "子弹", "\n", "当前", "，", "子弹", "抵达", "屏幕", "顶端", "后", "消失", "，", "这", "仅仅", "是因为", "Pygame", "无法", "在", "屏幕", "外面", "绘制", "它们", "。", "这些", "子弹", "实际上", "依然", "存在", "，", "它们", "的", " ", "y", " ", "坐标", "为", "负数", "，", "且", "越来越", "小", "。", "这", "是", "个", "问题", "，", "因为", "它们", "将", "继续", "\n", "消耗", "内存", "和", "处理", "能力", "。", "\n", "我们", "需要", "将", "这些", "已", "消失", "的", "子弹", "删除", "，", "否则", "游戏", "所", "做", "的", "无谓", "工作", "将", "越来越", "多", "，", "进而", "变得", "越来越", "慢", "。", "为此", "，", "我们", "需要", "检测", "这样", "的", "条件", "，", "即", "表示", "子弹", "的", "rect", " ", "的", "bottom", " ", "属性", "为", "零", "，", "它", "\n", "表明", "子弹", "已", "穿过", "屏幕", "顶端", "："], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "删除", "已", "消失", "的", "子弹", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "bullet", " ", "in", " ", "bullets", ".", "copy", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "bullet", ".", "rect", ".", "bottom", " ", "<", "=", " ", "0", ":", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "remove", "(", "bullet", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "len", "(", "bullets", ")", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", "在", "for", " ", "循环", "中", "，", "不", "应从", "列表", "或", "编组", "中", "删除", "条目", "，", "因此", "必须", "遍历", "编组", "的", "副本", "。", "我们", "使用", "了", "方法", "copy", "(", ")", " ", "来", "设置", "for", " ", "循环", "（", "见", "❶", "）", "，", "这", "让", "我们", "能够", "在", "循环", "中", "修改", "bullets", " ", "。", "我们", "检"], ["查", "每颗", "子弹", "，", "看看", "它", "是否", "已", "从", "屏幕", "顶端", "消失", "（", "见", "❷", "）", "。", "如果", "是", "这样", "，", "就", "将", "其", "从", "bullets", " ", "中", "删除", "（", "见", "❸", "）", "。", "在", "❹", "处", "，", "我们", "使用", "了", "一条", "print", " ", "语句", "，", "以", "显示", "当前", "还有", "多少", "颗", "子弹", "，", "\n", "从而", "核实", "已", "消失", "的", "子弹", "确实", "删除", "了", "。", "\n", "如果", "这些", "代码", "没有", "问题", "，", "我们", "发射", "子弹", "后", "查看", "终端", "窗口", "时", "，", "将", "发现", "随着", "子弹", "一颗颗", "地", "在", "屏幕", "顶端", "消失", "，", "子弹", "数将", "逐渐", "降为", "零", "。", "运行", "这个", "游戏", "并", "确认", "子弹", "已", "被", "删除", "后", "，", "将", "这", "\n", "条", "print", " ", "语句", "删除", "。", "如果", "你", "留下", "这", "条", "语句", "，", "游戏", "的", "速度", "将", "大大降低", "，", "因为", "将", "输出", "写入", "到", "终端", "而", "花费", "的", "时间", "比", "将", "图形", "绘制", "到", "游戏", "窗口", "花费", "的", "时间", "还", "多", "。", "\n", "12.8", ".", "6", "　", "限制", "子弹", "数量", "\n", "　", "限制", "子弹", "数量", "\n", "很多", "射击", "游戏", "都", "对", "可", "同时", "出现", "在", "屏幕", "上", "的", "子弹", "数量", "进行", "限制", "，", "以", "鼓励", "玩家", "有", "目标", "地", "射击", "。", "下面", "在", "游戏", "《", "外星人", "入侵", "》", "中作", "这样", "的", "限制", "。", "\n", "首先", "，", "在", "settings", ".", "py", "中", "存储", "所", "允许", "的", "最大", "子弹", "数", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "子弹", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "width", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "height", " ", "=", " ", "15", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "color", " ", "=", " ", "60", ",", " ", "60", ",", " ", "60"], ["self", ".", "bullet", "_", "color", " ", "=", " ", "60", ",", " ", "60", ",", " ", "60", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullets", "_", "allowed", " ", "=", " ", "3", "\n", "这", "将", "未", "消失", "的", "子弹", "数", "限制", "为", "3", "颗", "。", "在", "game", "_", "functions", ".", "py", "的", "check", "_", "keydown", "_", "events", "(", ")", " ", "中", "，", "我们", "在", "创建", "新", "子弹", "前", "检查", "未", "消失", "的", "子弹", "数", "是否", "小于", "该", "设置", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "SPACE", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "新", "子弹", "并", "将", "其", "加入", "到", "编组", "bullets", "中", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "len", "(", "bullets", ")", " ", "<", " ", "ai", "_", "settings", ".", "bullets", "_", "allowed", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "bullet", " ", "=", " ", "Bullet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "add", "(", "new", "_", "bullet", ")"], ["bullets", ".", "add", "(", "new", "_", "bullet", ")", "\n", "玩家", "按", "空格键", "时", "，", "我们", "检查", "bullets", " ", "的", "长度", "。", "如果", "len", "(", "bullets", ")", " ", "小于", "3", "，", "我们", "就", "创建", "一个", "新", "子弹", "；", "但", "如果", "已有", "3", "颗", "未", "消失", "的", "子弹", "，", "则", "玩家", "按", "空格键", "时", "什么", "都", "不会", "发生", "。", "如果", "你", "\n", "现在", "运行", "这个", "游戏", "，", "屏幕", "上", "最", "多", "只能", "有", "3", "颗", "子弹", "。", "\n", "12.8", ".", "7", "　", "创建", "函数", "\n", "　", "创建", "函数", "update", "_", "bullets", "(", ")", "\n", "编写", "并", "检查", "子弹", "管理", "代码", "后", "，", "可", "将", "其移", "到", "模块", "game", "_", "functions", " ", "中", "，", "以", "让", "主程序", "文件", "alien", "_", "invasion", ".", "py", "尽可能", "简单", "。", "我们", "创建", "一个", "名为", "update", "_", "bullets", "(", ")", " ", "的", "新", "函数", "，", "并", "将", "其添", "\n", "加到", "game", "_", "functions", ".", "py", "的", "末尾", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "bullets", "(", "bullets", ")", ":", "\n", " ", " ", " ", "\"", "\"", "\"", "更新", "子弹", "的", "位置", "，", "并", "删除", "已", "消失", "的", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "#", " ", "更新", "子弹", "的", "位置", "\n", " ", " ", " ", " ", "bullets", ".", "update", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "删除", "已", "消失", "的", "子弹", "\n", " ", " ", " ", " ", "for", " ", "bullet", " ", "in", " ", "bullets", ".", "copy", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "bullet", ".", "rect", ".", "bottom", " ", "<", "=", " ", "0", ":"], ["if", " ", "bullet", ".", "rect", ".", "bottom", " ", "<", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "remove", "(", "bullet", ")", "\n", "update", "_", "bullets", "(", ")", " ", "的", "代码", "是从", "alien", "_", "invasion", ".", "py", "剪切", "并", "粘贴", "而来", "的", "，", "它", "只", "需要", "一个", "参数", "，", "即", "编组", "bullets", " ", "。", "\n", "alien", "_", "invasion", ".", "py", "中", "的", "while", " ", "循环", "又", "变得", "很", "简单", "了", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "bullets", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", "我们", "让", "主", "循环", "包含", "尽可能少", "的", "代码", "，", "这样", "只要", "看", "函数", "名", "就", "能", "迅速", "知道", "游戏", "中", "发生", "的", "情况", "。", "主", "循环", "检查", "玩家", "的", "输入", "（", "见", "❶", "）", "，", "然后", "更新", "飞船", "的", "位置", "（", "见", "❷", "）", "和", "所有", "未", "消失", "的", "子弹", "的"], ["位置", "（", "见", "❸", "）", "。", "接下来", "，", "我们", "使用", "更新", "后", "的", "位置", "来", "绘制", "新", "屏幕", "（", "见", "❹", "）", "。", "\n", "12.8", ".", "8", "　", "创建", "函数", "\n", "　", "创建", "函数", "fire", "_", "bullet", "(", ")", "\n", "下面", "将", "发射", "子弹", "的", "代码", "移", "到", "一个", "独立", "的", "函数", "中", "，", "这样", "，", "在", "check", "_", "keydown", "_", "events", "(", ")", " ", "中", "只", "需", "使用", "一行", "代码", "来", "发射", "子弹", "，", "让", "elif", " ", "代码", "块", "变得", "非常简单", "："], ["game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "SPACE", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "fire", "_", "bullet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", "def", " ", "fire", "_", "bullet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "如果", "还", "没有", "到达", "限制", "，", "就", "发射", "一颗", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "#", "创建", "新", "子弹", "，", "并", "将", "其", "加入", "到", "编组", "bullets", "中", "\n", " ", " ", " ", " ", "if", " ", "len", "(", "bullets", ")", " ", "<", " ", "ai", "_", "settings", ".", "bullets", "_", "allowed", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "bullet", " ", "=", " ", "Bullet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "add", "(", "new", "_", "bullet", ")"], ["bullets", ".", "add", "(", "new", "_", "bullet", ")", "\n", "函数", "fire", "_", "bullet", "(", ")", " ", "只", "包含", "玩家", "按", "空格键", "时", "用于", "发射", "子弹", "的", "代码", "；", "在", "check", "_", "keydown", "_", "events", "(", ")", " ", "中", "，", "我们", "在", "玩家", "按", "空格键", "时", "调用", "fire", "_", "bullet", "(", ")", " ", "。", "\n", "请", "再次", "运行", "alien", "_", "invasion", ".", "py", "，", "确认", "发射", "子弹", "时", "依然", "没有", "错误", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "12", "-", "5", " ", "侧面", "射击", "\n", "侧面", "射击", " ", "：", "编写", "一个", "游戏", "，", "将", "一艘", "飞船", "放在", "屏幕", "左边", "，", "并", "允许", "玩家", "上下", "移动", "飞船", "。", "在", "玩家", "按", "空格键", "时", "，", "让", "飞船", "发射", "一颗", "在", "屏幕", "中向", "右", "穿行", "的", "子弹", "，", "并", "在", "子弹", "离开", "\n", "屏幕", "而", "消失", "后", "将", "其", "删除", "。", "\n", "12.9", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "游戏", "开发计划", "的", "制定", "；", "使用", "Pygame", "编写", "的", "游戏", "的", "基本", "结构", "；", "如何", "设置", "背景色", "，", "以及", "如何", "将", "设置", "存储", "在", "可供", "游戏", "的", "各个", "部分", "访问", "的", "独立", "类中", "；", "如何", "在", "屏幕", "上", "\n", "绘制", "图像", "，", "以及", "如何", "让玩家", "控制", "游戏", "元素", "的", "移动", "；", "如何", "创建", "自动", "移动", "的", "元素", "，", "如", "在", "屏幕", "中", "向上", "飞驰", "的", "子弹", "，", "以及", "如何", "删除", "不再", "需要", "的", "对象", "；", "如何", "定期", "重构", "项目", "的", "代码", "，", "为", "后续", "开", "\n", "发", "提供", "便利", "。", "\n", "在", "第", "13", "章中", "，", "我们", "将", "在", "游戏", "《", "外星人", "入侵", "》", "中", "添加", "外星人", "。", "在", "第", "13", "章", "结束", "时", "，", "你", "将", "能够", "击落", "外星人", "—", "—", "但愿", "是", "在", "他们", "撞", "到", "飞船", "前", "！", "\n", "第"], ["第", "\n", "第", " ", "13", " ", "章", "　", "外星人", "\n", "章", "　", "外星人", "\n", "在", "本章", "中", "，", "我们", "将", "在", "游戏", "《", "外星人", "入侵", "》", "中", "添加", "外星人", "。", "首先", "，", "我们", "在", "屏幕", "上", "边缘", "附近", "添加", "一个", "外星人", "，", "然后", "生成", "一群", "外星人", "。", "我们", "让", "这群", "外星人", "向", "两边", "和", "下面", "移", "\n", "动", "，", "并", "删除", "被", "子弹", "击中", "的", "外星人", "。", "最后", "，", "我们", "将", "显示", "玩家", "拥有", "的", "飞船", "数量", "，", "并", "在", "玩家", "的", "飞船", "用", "完后", "结束", "游戏", "。", "\n", "通过", "阅读", "本章", "，", "你", "将", "更", "深入", "地", "了解", "Pygame", "和", "大型项目", "的", "管理", "。", "你", "还", "将", "学习", "如何", "检测", "游戏", "对象", "之间", "的", "碰撞", "，", "如", "子弹", "和", "外星人", "之间", "的", "碰撞", "。", "检测", "碰撞", "有助于", "你", "定义", "游戏", "元", "\n", "素", "之间", "的", "交互", "：", "可以", "将", "角色", "限定", "在", "迷宫", "墙壁", "之内", "或", "在", "两个", "角色", "之间", "传球", "。", "我们", "将", "时不时", "地", "查看", "游戏", "开发计划", "，", "以", "确保", "编程", "工作", "不", "偏离", "轨道", "。", "\n", "着手", "编写", "在", "屏幕", "上", "添加", "一群", "外星人", "的", "代码", "前", "，", "先", "来", "回顾", "一下", "这个", "项目", "，", "并", "更新", "开发计划", "。", "\n", "13.1", "　", "回顾", "项目", "\n", "　", "回顾", "项目", "\n", "开发", "较大", "的", "项目", "时", "，", "进入", "每个", "开发阶段", "前", "回顾", "一下", "开发计划", "，", "搞清楚", "接下来", "要", "通过", "编写", "代码", "来", "完成", "哪些", "任务", "都", "是", "不错", "的", "主意", "。", "本章", "涉及", "以下内容", "。", "\n", "研究", "既有", "代码", "，", "确定", "实现", "新", "功能", "前", "是否", "要", "进行", "重构", "。", "\n", "在", "屏幕", "左上角", "添加", "一个", "外星人", "，", "并", "指定", "合适", "的", "边", "距", "。"], ["研究", "既有", "代码", "，", "确定", "实现", "新", "功能", "前", "是否", "要", "进行", "重构", "。", "\n", "在", "屏幕", "左上角", "添加", "一个", "外星人", "，", "并", "指定", "合适", "的", "边", "距", "。", "\n", "根据", "第一个", "外星人", "的", "边", "距", "和", "屏幕", "尺寸", "计算", "屏幕", "上", "可", "容纳", "多少", "个", "外星人", "。", "我们", "将", "编写", "一个", "循环", "来", "创建", "一系列", "外星人", "，", "这些", "外星人", "填满", "了", "屏幕", "的", "上半", "部分", "。"], ["让", "外星人", "群向", "两边", "和", "下方", "移动", "，", "直到", "外星人", "被", "全部", "击落", "，", "有", "外星人", "撞", "到", "飞船", "，", "或", "有", "外星人", "抵达", "屏幕", "底端", "。", "如果", "整群", "外星人", "都", "被", "击落", "，", "我们", "将", "再", "创建", "一群", "外星人", "。", "如果", "有", "外星", "\n", "人撞", "到", "了", "飞船", "或", "抵达", "屏幕", "底端", "，", "我们", "将", "销毁", "飞船", "并", "再", "创建", "一群", "外星人", "。", "\n", "限制", "玩家", "可用", "的", "飞船", "数量", "，", "配给", "的", "飞船", "用", "完后", "，", "游戏", "结束", "。", "\n", "我们", "将", "在", "实现", "功能", "的", "同时", "完善", "这个", "计划", "，", "但", "就", "目前", "而言", "，", "该", "计划", "已", "足够", "详尽", "。", "\n", "在", "给", "项目", "添加", "新", "功能", "前", "，", "还应", "审核", "既有", "代码", "。", "每", "进入", "一个", "新", "阶段", "，", "通常", "项目", "都", "会", "更", "复杂", "，", "因此", "最好", "对", "混乱", "或", "低效", "的", "代码", "进行", "清理", "。", "\n", "我们", "在", "开发", "的", "同时", "一直", "不断", "地", "重构", "，", "因此", "当前", "需要", "做", "的", "清理", "工作", "不", "多", "，", "但", "每次", "为", "测试", "新", "功能", "而", "运行", "这个", "游戏", "时", "，", "都", "必须", "使用", "鼠标", "来", "关闭", "它", "，", "这太", "讨厌", "了", "。", "下面", "来", "添加", "一个", "结束", "游", "\n", "戏", "的", "快捷键", "Q", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "keydown", "_", "events", "(", "event", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "elif", " ", "event", ".", "key", " ", "=", "=", " ", "pygame", ".", "K", "_", "q", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sys", ".", "exit", "(", ")"], ["sys", ".", "exit", "(", ")", "\n", "在", "check", "_", "keydown", "_", "events", "(", ")", " ", "中", "，", "我们", "添加", "了", "一个", "代码", "块", "，", "以便", "在", "玩家", "按", "Q", "时", "结束", "游戏", "。", "这样", "的", "修改", "很", "安全", "，", "因为", "Q", "键离", "箭头键", "和", "空格键", "很", "远", "，", "玩家", "不", "小心", "按", "Q", "键", "而", "导致", "游戏", "\n", "结束", "的", "可能性", "不", "大", "。", "现在", "测试", "时", "可", "按", "Q", "关闭", "游戏", "，", "而", "无需", "使用", "鼠标", "来", "关闭", "窗口", "了", "。", "\n", "13.2", "　", "创建", "第一个", "外星人", "\n", "　", "创建", "第一个", "外星人", "\n", "在", "屏幕", "上", "放置", "外星人", "与", "放置", "飞船", "类似", "。", "每个", "外星人", "的", "行为", "都", "由", "Alien", " ", "类", "控制", "，", "我们", "将", "像", "创建", "Ship", " ", "类", "那样", "创建", "这个", "类", "。", "出于", "简化", "考虑", "，", "我们", "也", "使用", "位图", "来", "表示", "外星人", "。", "你", "可以", "自", "\n", "己", "寻找", "表示", "外星人", "的", "图像", "，", "也", "可", "使用", "图", "13", "-", "1", "所示", "的", "图像", "，", "可", "在", "本书", "配套", "资源", "（", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", " ", "）", "中", "找到", "。", "这", "幅", "图像", "的", "背景", "为", "灰色", "，", "与", "屏幕", "背景色", "一致", "。", "请", "\n", "务必", "将", "你", "选择", "的", "图像文件", "保存", "到", "文件夹", "images", "中", "。", "\n", "图", "\n", "图", "13", "-", "1", "　", "用来", "创建", "外星人", "群", "的", "外星人", "图像", "\n", "　", "用来", "创建", "外星人", "群", "的", "外星人", "图像", "\n", "13.2", ".", "1", "　", "创建", "\n", "　", "创建", "Alien", " ", "类", "\n", "类", "\n", "下面", "来", "编写", "Alien", " ", "类", "：", "\n", "alien", ".", "py", "\n", " ", " ", "import", " ", "pygame"], ["类", "\n", "下面", "来", "编写", "Alien", " ", "类", "：", "\n", "alien", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Sprite", "\n", " ", " ", "class", " ", "Alien", "(", "Sprite", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "表示", "单个", "外星人", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "外星人", "并", "设置", "其", "起始", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", "Alien", ",", " ", "self", ")", ".__", "init", "__", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "加载", "外星人", "图像", "，", "并", "设置", "其", "rect", "属性", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "image", " ", "=", " ", "pygame", ".", "image", ".", "load", "(", "'", "images", "/", "alien", ".", "bmp", "'", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", " ", "=", " ", "self", ".", "image", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "每个", "外星人", "最初", "都", "在", "屏幕", "左上角", "附近"], ["#", " ", "每个", "外星人", "最初", "都", "在", "屏幕", "左上角", "附近", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "x", " ", "=", " ", "self", ".", "rect", ".", "width", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "y", " ", "=", " ", "self", ".", "rect", ".", "height"], ["#", " ", "存储", "外星人", "的", "准确", "位置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "x", " ", "=", " ", "float", "(", "self", ".", "rect", ".", "x", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "blitme", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "指定", "位置", "绘制", "外星人", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "image", ",", " ", "self", ".", "rect", ")", "\n", "除", "位置", "不同", "外", "，", "这个", "类", "的", "大部分", "代码", "都", "与", "Ship", " ", "类", "相似", "。", "每个", "外星人", "最初", "都", "位于", "屏幕", "左上角", "附近", "，", "我们", "将", "每个", "外星人", "的", "左边", "距", "都", "设置", "为", "外星人", "的", "宽度", "，", "并", "将", "上边", "距", "设置", "为", "外星人", "\n", "的", "高度", "（", "见", "❶", "）", "。", "\n", "13.2", ".", "2", "　", "创建", "\n", "　", "创建", "Alien", " ", "实例", "\n", "实例", "\n", "下面", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "一个", "Alien", " ", "实例", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", "--", "snip", "--", "\n", "from", " ", "ship", " ", "import", " ", "Ship", "\n", "from", " ", "alien", " ", "import", " ", "Alien", "\n", "import", " ", "game", "_", "functions", " ", "as", " ", "gf", "\n", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "创建", "一个", "外星人", "\n", " ", " ", " ", " ", "alien", " ", "=", " ", "Alien", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环"], ["#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "alien", ",", " ", "bullets", ")", "\n", "run", "_", "game", "(", ")", "\n", "在", "这里", "，", "我们", "导入", "了", "新创建", "的", "Alien", " ", "类", "，", "并", "在", "进入", "主", "while", " ", "循环", "前", "创建", "了", "一个", "Alien", " ", "实例", "。", "我们", "没有", "修改", "外星人", "的", "位置", "，", "因此", "该", "while", " ", "循环", "没有", "任何", "新", "东西", "，", "但", "我们", "修改", "了", "\n", "对", "update", "_", "screen", "(", ")", " ", "的", "调用", "，", "传递", "了", "一个", "外星人", "实例", "。", "\n", "13.2", ".", "3", "　", "让", "外星人", "出现", "在", "屏幕", "上", "\n", "　", "让", "外星人", "出现", "在", "屏幕", "上", "\n", "为", "让", "外星人", "出现", "在", "屏幕", "上", "，", "我们", "在", "update", "_", "screen", "(", ")", " ", "中", "调用", "其", "方法", "blitme", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "alien", ",", " ", "bullets", ")", ":"], ["--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "在", "飞船", "和", "外星人", "后面", "重绘", "所有", "的", "子弹", "\n", " ", " ", " ", " ", "for", " ", "bullet", " ", "in", " ", "bullets", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullet", ".", "draw", "_", "bullet", "(", ")", "\n", " ", " ", " ", " ", "ship", ".", "blitme", "(", ")", "\n", " ", " ", " ", " ", "alien", ".", "blitme", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", "我们", "先", "绘制", "飞船", "和", "子弹", "，", "再", "绘制", "外星人", "，", "让", "外星人", "在", "屏幕", "上", "位于", "最", "前面", "。", "图", "13", "-", "2", "显示", "了", "屏幕", "上", "的", "第一个", "外星人", "。", "\n", "图", "\n", "图", "13", "-", "2", "　", "第一个", "外星人", "现身", "\n", "　", "第一个", "外星人", "现身", "\n", "第一个", "外星人", "正确", "地", "现身", "后", "，", "下面", "来", "编写", "绘制", "一群", "外星人", "的", "代码", "。", "\n", "13.3", "　", "创建", "一群", "外星人", "\n", "　", "创建", "一群", "外星人"], ["要", "绘制", "一群", "外星人", "，", "需要", "确定", "一行", "能", "容纳", "多少", "个", "外星人", "以及", "要", "绘制", "多少", "行", "外星人", "。", "我们", "将", "首先", "计算", "外星人", "之间", "的", "水平", "间距", "，", "并", "创建", "一行", "外星人", "，", "再", "确定", "可用", "的", "垂直", "空间", "，", "并", "创建", "\n", "整群", "外星人", "。", "\n", "13.3", ".", "1", "　", "确定", "一行", "可", "容纳", "多少", "个", "外星人", "\n", "　", "确定", "一行", "可", "容纳", "多少", "个", "外星人", "\n", "为", "确定", "一行", "可", "容纳", "多少", "个", "外星人", "，", "我们", "来", "看看", "可用", "的", "水平", "空间", "有", "多", "大", "。", "屏幕", "宽度", "存储", "在", "ai", "_", "settings", ".", "screen", "_", "width", " ", "中", "，", "但", "需要", "在", "屏幕", "两边", "都", "留下", "一定", "的", "边", "距", "，", "把", "它", "设置", "为", "\n", "外星人", "的", "宽度", "。", "由于", "有", "两个", "边距", "，", "因此", "可", "用于", "放置", "外星人", "的", "水平", "空间", "为", "屏幕", "宽度", "减去", "外星人", "宽度", "的", "两倍", "：", "\n", "available", "_", "space", "_", "x", " ", "=", " ", "ai", "_", "settings", ".", "screen", "_", "width", " ", "–", " ", "(", "2", " ", "*", " ", "alien", "_", "width", ")", "\n", "我们", "还", "需要", "在", "外星人", "之间", "留出", "一定", "的", "空间", "，", "即", "外星人", "宽度", "。", "因此", "，", "显示", "一个", "外星人", "所", "需", "的", "水平", "空间", "为", "外星人", "宽度", "的", "两倍", "：", "一个", "宽度", "用于", "放置", "外星人", "，", "另", "一个", "宽度", "为", "外星人", "右边", "的", "\n", "空白", "区域", "。", "为", "确定", "一行", "可", "容纳", "多少", "个", "外星人", "，", "我们", "将", "可用", "空间", "除以", "外星人", "宽度", "的", "两倍", "：", "\n", "number", "_", "aliens", "_", "x", " ", "=", " ", "available", "_", "space", "_", "x", " ", "/", " ", "(", "2", " ", "*", " ", "alien", "_", "width", ")"], ["我们", "将", "在", "创建", "外星人", "群时", "使用", "这些", "公式", "。", "\n", "注意", "\n", "注意", " ", "　", "令人欣慰", "的", "是", "，", "在", "程序", "中", "执行", "计算", "时", "，", "一", "开始", "你", "无需", "确定", "公式", "是", "正确", "的", "，", "而", "可以", "尝试", "直接", "运行", "程序", "，", "看看", "结果", "是否", "符合", "预期", "。", "即便", "是", "在", "最", "糟糕", "的", "情况", "下", "，", "也", "只", "\n", "是", "屏幕", "上", "显示", "的", "外星人", "太多", "或", "太少", "。", "你", "可以", "根据", "在", "屏幕", "上", "看到", "的", "情况", "调整", "计算公式", "。", "\n", "13.3", ".", "2", "　", "创建", "多行", "外星人", "\n", "　", "创建", "多行", "外星人", "\n", "为", "创建", "一行", "外星人", "，", "首先", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "一个", "名为", "aliens", " ", "的", "空", "编组", "，", "用于", "存储", "全部", "外星人", "，", "再", "调用", "game", "_", "functions", ".", "py", "中", "创建", "外星人", "群", "的", "函数", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Group", "\n", " ", " ", "from", " ", "settings", " ", "import", " ", "Settings", "\n", " ", " ", "from", " ", "ship", " ", "import", " ", "Ship", "\n", " ", " ", "import", " ", "game", "_", "functions", " ", "as", " ", "gf", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一艘", "飞船", "、", "一个", "子弹", "编组", "和", "一个", "外星人", "编组", "\n", " ", " ", " ", " ", " ", " ", "ship", " ", "=", " ", "Ship", "(", "ai", "_", "settings", ",", " ", "screen", ")"], ["ship", " ", "=", " ", "Ship", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", " ", " ", " ", " ", " ", " ", "bullets", " ", "=", " ", "Group", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", "aliens", " ", "=", " ", "Group", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "外星人", "群", "\n", "❷", " ", " ", " ", " ", " ", "gf", ".", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "—", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "由于", "我们", "不再", "在", "alien", "_", "invasion", ".", "py", "中", "直接", "创建", "外星人", "，", "因此", "无需", "在", "这个", "文件", "中", "导入", "Alien", " ", "类", "。", "\n", "❶", "处", "创建", "了", "一个", "空", "编组", "，", "用于", "存储", "所有", "的", "外星人", "。", "接下来", "，", "调用", "稍后", "将", "编写", "的", "函数", "create", "_", "fleet", "(", ")", " ", "（", "见", "❷", "）", "，", "并", "将", "ai", "_", "settings", " ", "、", "对象", "screen", " ", "和", "空", "编组", "aliens", " ", "传递", "给", "\n", "它", "。", "然后", "，", "修改", "对", "update", "_", "screen", "(", ")", " ", "的", "调用", "，", "让", "它", "能够", "访问", "外星人", "编组", "（", "见", "❸", "）", "。", "\n", "我们", "还", "需要", "修改", "update", "_", "screen", "(", ")", " ", "："], ["我们", "还", "需要", "修改", "update", "_", "screen", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "ship", ".", "blitme", "(", ")", "\n", " ", " ", " ", " ", "aliens", ".", "draw", "(", "screen", ")", "\n", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", "对", "编组", "调用", "draw", "(", ")", " ", "时", "，", "Pygame", "自动", "绘制", "编组", "的", "每个", "元素", "，", "绘制", "位置", "由", "元素", "的", "属性", "rect", " ", "决定", "。", "在", "这里", "，", "aliens", ".", "draw", "(", "screen", ")", " ", "在", "屏幕", "上", "绘制", "编组", "中", "的", "每个", "外星人", "。", "\n", "13.3", ".", "3", "　", "创建", "外星人", "群", "\n", "　", "创建", "外星人", "群", "\n", "现在", "可以", "创建", "外星人", "群", "了", "。", "下面", "是", "新", "函数", "create", "_", "fleet", "(", ")", " ", "，", "我们", "将", "它", "放在", "game", "_", "functions", ".", "py", "的", "末尾", "。", "我们", "还", "需要", "导入", "Alien", " ", "类", "，", "因此", "务必", "在", "文件", "game", "_", "functions", ".", "py", "开头", "添加", "相应", "\n", "的", "import", " ", "语句", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "bullet", " ", "import", " ", "Bullet"], ["--", "snip", "--", "\n", " ", " ", "from", " ", "bullet", " ", "import", " ", "Bullet", "\n", " ", " ", "from", " ", "alien", " ", "import", " ", "Alien", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "创建", "外星人", "群", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "外星人", "，", "并", "计算", "一行", "可", "容纳", "多少", "个", "外星人", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "外星人", "间距", "为", "外星人", "宽度", "\n", "❶", " ", " ", " ", " ", " ", "alien", " ", "=", " ", "Alien", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", "❷", " ", " ", " ", " ", " ", "alien", "_", "width", " ", "=", " ", "alien", ".", "rect", ".", "width", "\n", "❸", " ", " ", " ", " ", " ", "available", "_", "space", "_", "x", " ", "=", " ", "ai", "_", "settings", ".", "screen", "_", "width", " ", "-", " ", "2", " ", "*", " ", "alien", "_", "width", "\n", "❹", " ", " ", " ", " ", " ", "number", "_", "aliens", "_", "x", " ", "=", " ", "int", "(", "available", "_", "space", "_", "x", " ", "/", " ", "(", "2", " ", "*", " ", "alien", "_", "width", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "第一行", "外星人", "\n", "❺", " ", " ", " ", " ", " ", "for", " ", "alien", "_", "number", " ", "in", " ", "range", "(", "number", "_", "aliens", "_", "x", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "外星人", "并", "将", "其", "加入", "当前", "行"], ["#", " ", "创建", "一个", "外星人", "并", "将", "其", "加入", "当前", "行", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", "alien", " ", "=", " ", "Alien", "(", "ai", "_", "settings", ",", " ", "screen", ")"], ["alien", ".", "x", " ", "=", " ", "alien", "_", "width", " ", "+", " ", "2", " ", "*", " ", "alien", "_", "width", " ", "*", " ", "alien", "_", "number", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "x", " ", "=", " ", "alien", ".", "x", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ".", "add", "(", "alien", ")", "\n", "这些", "代码", "大都", "在", "前面", "详细", "介绍", "过", "。", "为", "放置", "外星人", "，", "我们", "需要", "知道", "外星人", "的", "宽度", "和", "高度", "，", "因此", "在", "执行", "计算", "前", "，", "我们", "先", "创建", "一个", "外星人", "（", "见", "❶", "）", "。", "这个", "外星人", "不是", "外星人", "群", "的", "成员", "，", "\n", "因此", "没有", "将", "它", "加入", "到", "编组", "aliens", " ", "中", "。", "在", "❷", "处", "，", "我们", "从", "外星人", "的", "rect", " ", "属性", "中", "获取", "外星人", "宽度", "，", "并", "将", "这个", "值", "存储", "到", "alien", "_", "width", " ", "中", "，", "以免", "反复", "访问", "属性", "rect", " ", "。", "在", "❸", "处", "，", "我们", "计", "\n", "算", "可", "用于", "放置", "外星人", "的", "水平", "空间", "，", "以及", "其中", "可", "容纳", "多少", "个", "外星人", "。", "\n", "相比", "于", "前面", "介绍", "的", "工作", "，", "这里", "唯一", "的", "不同", "是", "使用", "了", "int", "(", ")", " ", "来", "确保", "计算", "得到", "的", "外星人", "数量", "为", "整数", "（", "见", "❹", "）", "，", "因为", "我们", "不", "希望", "某个", "外星人", "只", "显示", "一部分", "，", "而且", "函数", "range", "(", ")", " ", "也", "需要", "\n", "一个", "整数", "。", "函数", "int", "(", ")", " ", "将", "小数", "部分", "丢弃", "，", "相当于", "向下", "圆整", "（", "这", "大有裨益", "，", "因为", "我们", "宁愿", "每行", "都", "多出", "一点点", "空间", "，", "也", "不", "希望", "每行", "的", "外星人", "之间", "过于", "拥挤", "）", "。"], ["接下来", "，", "我们", "编写", "了", "一个", "循环", "，", "它", "从", "零数", "到", "要", "创建", "的", "外星人", "数", "（", "见", "❺", "）", "。", "在", "这个", "循环", "的", "主体", "中", "，", "我们", "创建", "一个", "新", "的", "外星人", "，", "并", "通过", "设置", "x", " ", "坐标", "将", "其", "加入", "当前", "行", "（", "见", "❻", "）", "。", "将", "每个", "\n", "外星人", "都", "往右", "推", "一个", "外星人", "的", "宽度", "。", "接下来", "，", "我们", "将", "外星人", "宽度", "乘以", "2", "，", "得到", "每个", "外星人", "占据", "的", "空间", "（", "其中", "包括", "其", "右边", "的", "空白", "区域", "）", "，", "再", "据此", "计算", "当前", "外星人", "在", "当前", "行", "的", "位置", "。", "最", "\n", "后", "，", "我们", "将", "每个", "新创建", "的", "外星人", "都", "添加", "到", "编组", "aliens", " ", "中", "。", "\n", "如果", "你", "现在", "运行", "这个", "游戏", "，", "将", "看到", "第一行", "外星人", "，", "如图", "13", "-", "3", "所示", "。", "\n", "图", "\n", "图", "13", "-", "3", "　", "第一行", "外星人", "\n", "　", "第一行", "外星人", "\n", "这", "行", "外星人", "在", "屏幕", "上", "稍微", "偏向", "了", "左边", "，", "这", "实际上", "是", "有", "好处", "的", "，", "因为", "我们", "将", "让", "外星人", "群往", "右移", "，", "触及", "屏幕", "边缘", "后", "稍微", "往", "下移", "，", "然后", "往", "左移", "，", "以此类推", "。", "就", "像", "经典", "游戏", "《", "太空", "入侵", "\n", "者", "》", "，", "相比", "于", "只", "往", "下移", "，", "这种", "移动", "方式", "更", "有趣", "。", "我们", "将", "让", "外形", "人群", "不断", "这样", "移动", "，", "直到", "所有", "外星人", "都", "被", "击落", "或", "有", "外星人", "撞", "上", "飞船", "或", "抵达", "屏幕", "底端", "。", "\n", "注意", "\n", "注意", " ", "　", "根据", "你", "选择", "的", "屏幕", "宽度", "，", "在", "你", "的", "系统", "中", "，", "第一行", "外星人", "的", "位置", "可能", "稍", "有", "不同", "。", "\n", "13.3", ".", "4", "　", "重构", "\n", "　", "重构", "create", "_", "fleet", "(", ")"], ["13.3", ".", "4", "　", "重构", "\n", "　", "重构", "create", "_", "fleet", "(", ")", "\n", "倘若", "我们", "创建", "了", "外星人", "群", "，", "也许", "应该", "让", "create", "_", "fleet", "(", ")", " ", "保持", "原样", "，", "但", "鉴于", "创建", "外星人", "的", "工作", "还", "未", "完成", "，", "我们", "稍微", "清理", "一下", "这个", "函数", "。", "下面", "是", "create", "_", "fleet", "(", ")", " ", "和", "两个", "新函", "\n", "数", "，", "get", "_", "number", "_", "aliens", "_", "x", "(", ")", " ", "和", "create", "_", "alien", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "❶", " ", "def", " ", "get", "_", "number", "_", "aliens", "_", "x", "(", "ai", "_", "settings", ",", " ", "alien", "_", "width", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "计算", "每行", "可", "容纳", "多少", "个", "外星人", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "available", "_", "space", "_", "x", " ", "=", " ", "ai", "_", "settings", ".", "screen", "_", "width", " ", "-", " ", "2", " ", "*", " ", "alien", "_", "width", "\n", " ", " ", " ", " ", " ", " ", "number", "_", "aliens", "_", "x", " ", "=", " ", "int", "(", "available", "_", "space", "_", "x", " ", "/", " ", "(", "2", " ", "*", " ", "alien", "_", "width", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "number", "_", "aliens", "_", "x", "\n", " ", " ", "def", " ", "create", "_", "alien", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ",", " ", "alien", "_", "number", ")", ":"], ["\"", "\"", "\"", "创建", "一个", "外星人", "并", "将", "其", "放在", "当前", "行", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "alien", " ", "=", " ", "Alien", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", "❷", " ", " ", " ", " ", " ", "alien", "_", "width", " ", "=", " ", "alien", ".", "rect", ".", "width", "\n", " ", " ", " ", " ", " ", " ", "alien", ".", "x", " ", "=", " ", "alien", "_", "width", " ", "+", " ", "2", " ", "*", " ", "alien", "_", "width", " ", "*", " ", "alien", "_", "number", "\n", " ", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "x", " ", "=", " ", "alien", ".", "x", "\n", " ", " ", " ", " ", " ", " ", "aliens", ".", "add", "(", "alien", ")", "\n", " ", " ", "def", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "创建", "外星人", "群", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "外星人", "，", "并", "计算", "每行", "可", "容纳", "多少", "个", "外星人", "\n", " ", " ", " ", " ", " ", " ", "alien", " ", "=", " ", "Alien", "(", "ai", "_", "settings", ",", " ", "screen", ")", "\n", "❸", " ", " ", " ", " ", " ", "number", "_", "aliens", "_", "x", " ", "=", " ", "get", "_", "number", "_", "aliens", "_", "x", "(", "ai", "_", "settings", ",", " ", "alien", ".", "rect", ".", "width", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "第一行", "外星人", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "alien", "_", "number", " ", "in", " ", "range", "(", "number", "_", "aliens", "_", "x", ")", ":"], ["for", " ", "alien", "_", "number", " ", "in", " ", "range", "(", "number", "_", "aliens", "_", "x", ")", ":", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "alien", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ",", " ", "alien", "_", "number", ")", "\n", "函数", "get", "_", "number", "_", "aliens", "_", "x", "(", ")", " ", "的", "代码", "都", "来自", "create", "_", "fleet", "(", ")", " ", "，", "且", "未", "做", "任何", "修改", "（", "见", "❶", "）", "。", "函数", "create", "_", "alien", "(", ")", " ", "的", "代码", "也", "都", "来自", "create", "_", "fleet", "(", ")", " ", "，", "且", "未", "做", "任何", "修", "\n", "改", "，", "只是", "使用", "刚", "创建", "的", "外星人", "来", "获取", "外星人", "宽度", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "将", "计算", "可用", "水平", "空间", "的", "代码", "替换", "为", "对", "get", "_", "number", "_", "aliens", "_", "x", "(", ")", " ", "的", "调用", "，", "并", "删除", "了", "引", "\n", "用", "alien", "_", "width", " ", "的", "代码", "行", "，", "因为", "现在", "这", "是", "在", "create", "_", "alien", "(", ")", " ", "中", "处理", "的", "。", "在", "❹", "处", "，", "我们", "调用", "create", "_", "alien", "(", ")", " ", "。", "通过", "这样", "的", "重构", "，", "添加", "新", "行进", "而", "创建", "整群", "外星人", "将", "更容", "\n", "易", "。", "\n", "13.3", ".", "5", "　", "添加", "行", "\n", "　", "添加", "行", "\n", "要", "创建", "外星人", "群", "，", "需要", "计算", "屏幕", "可", "容纳", "多少", "行", "，", "并", "对", "创建", "一行", "外星人", "的", "循环", "重复", "相应", "的", "次数", "。", "为", "计算", "可", "容纳", "的", "行数", "，", "我们", "这样", "计算", "可用", "垂直", "空间", "：", "将", "屏幕", "高度", "减去", "第一行", "外星人"], ["的", "上边", "距", "（", "外星人", "高度", "）", "、", "飞船", "的", "高度", "以及", "最初", "外星人", "群", "与", "飞船", "的", "距离", "（", "外星人", "高度", "的", "两倍", "）", "：", "\n", "available", "_", "space", "_", "y", " ", "=", " ", "ai", "_", "settings", ".", "screen", "_", "height", " ", "–", " ", "3", " ", "*", " ", "alien", "_", "height", " ", "–", " ", "ship", "_", "height"], ["这", "将", "在", "飞船", "上方", "留出", "一定", "的", "空白", "区域", "，", "给", "玩家", "留出", "射杀", "外星人", "的", "时间", "。", "\n", "每行", "下方", "都", "要", "留出", "一定", "的", "空白", "区域", "，", "并", "将", "其", "设置", "为", "外星人", "的", "高度", "。", "为", "计算", "可", "容纳", "的", "行数", "，", "我们", "将", "可用", "垂直", "空间", "除以", "外星人", "高度", "的", "两倍", "（", "同样", "，", "如果", "这样", "的", "计算", "不", "对", "，", "我们", "马上", "就", "\n", "能", "发现", "，", "继而", "将", "间距", "调整", "为", "合理", "的", "值", "）", "。", "\n", "number", "_", "rows", " ", "=", " ", "available", "_", "height", "_", "y", " ", "/", " ", "(", "2", " ", "*", " ", "alien", "_", "height", ")", "\n", "知道", "可", "容纳", "多少", "行后", "，", "便", "可", "重复", "执行", "创建", "一行", "外星人", "的", "代码", "：", "\n", "game", "_", "functions", ".", "py", "\n", "❶", " ", "def", " ", "get", "_", "number", "_", "rows", "(", "ai", "_", "settings", ",", " ", "ship", "_", "height", ",", " ", "alien", "_", "height", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "计算", "屏幕", "可", "容纳", "多少", "行", "外星人", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "available", "_", "space", "_", "y", " ", "=", " ", "(", "ai", "_", "settings", ".", "screen", "_", "height", " ", "-", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "(", "3", " ", "*", " ", "alien", "_", "height", ")", " ", "-", " ", "ship", "_", "height", ")", "\n", " ", " ", " ", " ", " ", " ", "number", "_", "rows", " ", "=", " ", "int", "(", "available", "_", "space", "_", "y", " ", "/", " ", "(", "2", " ", "*", " ", "alien", "_", "height", ")", ")"], ["return", " ", "number", "_", "rows", "\n", " ", " ", "def", " ", "create", "_", "alien", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ",", " ", "alien", "_", "number", ",", " ", "row", "_", "number", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "alien", ".", "x", " ", "=", " ", "alien", "_", "width", " ", "+", " ", "2", " ", "*", " ", "alien", "_", "width", " ", "*", " ", "alien", "_", "number", "\n", " ", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "x", " ", "=", " ", "alien", ".", "x", "\n", "❸", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "y", " ", "=", " ", "alien", ".", "rect", ".", "height", " ", "+", " ", "2", " ", "*", " ", "alien", ".", "rect", ".", "height", " ", "*", " ", "row", "_", "number", "\n", " ", " ", " ", " ", " ", " ", "aliens", ".", "add", "(", "alien", ")", "\n", " ", " ", "def", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "number", "_", "aliens", "_", "x", " ", "=", " ", "get", "_", "number", "_", "aliens", "_", "x", "(", "ai", "_", "settings", ",", " ", "alien", ".", "rect", ".", "width", ")"], ["number", "_", "rows", " ", "=", " ", "get", "_", "number", "_", "rows", "(", "ai", "_", "settings", ",", " ", "ship", ".", "rect", ".", "height", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "height", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "外星人", "群", "\n", "❹", " ", " ", " ", " ", " ", "for", " ", "row", "_", "number", " ", "in", " ", "range", "(", "number", "_", "rows", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "alien", "_", "number", " ", "in", " ", "range", "(", "number", "_", "aliens", "_", "x", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "alien", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "aliens", ",", " ", "alien", "_", "number", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "row", "_", "number", ")", "\n", "为", "计算", "屏幕", "可", "容纳", "多少", "行", "外星人", "，", "我们", "在", "函数", "get", "_", "number", "_", "rows", "(", ")", " ", "中", "实现", "了", "前面", "计算", "available", "_", "space", "_", "y", " ", "和", "number", "_", "rows", " ", "的", "公式", "（", "见", "❶", "）", "，", "这个", "函数", "\n", "与", "get", "_", "number", "_", "aliens", "_", "x", "(", ")", " ", "类似", "。", "计算公式", "用", "括号", "括", "起来", "了", "，", "这样", "可", "将", "代码", "分成", "两行", "，", "以", "遵循", "每行", "不", "超过", "79", "字符", "的", "建议", "（", "见", "❷", "）", "。", "这里", "使用", "了", "int", "(", ")", " ", "，", "因为", "我们", "不想", "创建", "\n", "不", "完整", "的", "外星人", "行", "。"], ["不", "完整", "的", "外星人", "行", "。", "\n", "为", "创建", "多行", "，", "我们", "使用", "两个", "嵌套", "在", "一起", "的", "循环", "：", "一个", "外部", "循环", "和", "一个", "内部", "循环", "（", "见", "❸", "）", "。", "其中", "的", "内部", "循环", "创建", "一行", "外星人", "，", "而", "外部", "循环", "从", "零数", "到", "要", "创建", "的", "外星人", "行", "数", "。", "Python", "将重", "\n", "复", "执行", "创建", "单行", "外星人", "的", "代码", "，", "重复", "次数", "为", "number", "_", "rows", " ", "。", "\n", "为", "嵌套循环", "，", "我们", "编写", "了", "一个", "新", "的", "for", " ", "循环", "，", "并", "缩进", "了", "要", "重复", "执行", "的", "代码", "。", "（", "在", "大多数", "文本编辑", "器中", "，", "缩进", "代码", "块", "和", "取消", "缩进", "都", "很", "容易", "，", "详情", "请参阅", "附录", "B", "。", "）", "我们", "调", "\n", "用", "create", "_", "alien", "(", ")", " ", "时", "，", "传递", "了", "一个", "表示", "行号", "的", "实参", "，", "将", "每行", "都", "沿", "屏幕", "依次", "向下", "放置", "。", "\n", "create", "_", "alien", "(", ")", " ", "的", "定义", "需要", "一个", "用于", "存储", "行号", "的", "形参", "。", "在", "create", "_", "alien", "(", ")", " ", "中", "，", "我们", "修改", "外星人", "的", "y", " ", "坐标", "（", "见", "❹", "）", "，", "并", "在", "第一行", "外星人", "上方", "留出", "与", "外星人", "等", "高", "的", "空白", "区", "\n", "域", "。", "相邻", "外星人", "行", "的", "y", " ", "坐标", "相差", "外星人", "高度", "的", "两倍", "，", "因此", "我们", "将", "外星人", "高度", "乘以", "2", "，", "再", "乘以", "行号", "。", "第一行", "的", "行号", "为", "0", "，", "因此", "第一行", "的", "垂直", "位置", "不变", "，", "而", "其他", "行都", "沿", "屏幕", "依次", "向", "下放", "\n", "置", "。"], ["置", "。", "\n", "在", "create", "_", "fleet", "(", ")", " ", "的", "定义", "中", "，", "还", "新增", "了", "一个", "用于", "存储", "ship", " ", "对象", "的", "形参", "，", "因此", "在", "alien", "_", "invasion", ".", "py", "中", "调用", "create", "_", "fleet", "(", ")", " ", "时", "，", "需要", "传递", "实参", "ship", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", "#", " ", "创建", "外星人", "群", "\n", "gf", ".", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", "如果", "你", "现在", "运行", "这个", "游戏", "，", "将", "看到", "一群", "外星人", "，", "如图", "13", "-", "4", "所示", "。"], ["图", "\n", "图", "13", "-", "4", "　", "整群", "外星人", "都", "现身", "了", "\n", "　", "整群", "外星人", "都", "现身", "了", "\n", "在", "下", "一节", "，", "我们", "将", "让", "外星人", "群动", "起来", "！", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "13", "-", "1", " ", "星星", "\n", "星星", " ", "：", "找", "一幅", "星星", "图像", "，", "并", "在", "屏幕", "上", "显示", "一系列", "整齐", "排列", "的", "星星", "。", "\n", "13", "-", "2", " ", "更", "逼真", "的", "星星", "\n", "更", "逼真", "的", "星星", " ", "：", "为", "让", "星星", "的", "分布", "更", "逼真", "，", "可", "随机", "地", "放置", "星星", "。", "本书", "前面", "说", "过", "，", "可像", "下面", "这样", "来", "生成", "随机数", "：", "\n", "from", " ", "random", " ", "import", " ", "randint", "\n", "random", "_", "number", " ", "=", " ", "randint", "(", "-", "10", ",", "10", ")", "\n", "上述", "代码", "返回", "一个", "-", "10", "和", "10", "之间", "的", "随机", "整数", "。", "在", "为", "完成", "练习", "13", "-", "1", "而", "编写", "的", "程序", "中", "，", "随机", "地", "调整", "每颗", "星星", "的", "位置", "。", "\n", "13.4", "　", "让", "外星人", "群", "移动", "\n", "　", "让", "外星人", "群", "移动", "\n", "下面", "来", "让", "外星人", "群在", "屏幕", "上", "向", "右", "移动", "，", "撞", "到", "屏幕", "边缘", "后", "下移", "一定", "的", "距离", "，", "再", "沿", "相反", "的", "方向", "移动", "。", "我们", "将", "不断", "地", "移动", "所有", "的", "外星人", "，", "直到", "所有", "外星人", "都", "被", "消灭", "，", "有", "外星人", "撞", "上", "飞", "\n", "船", "，", "或", "有", "外星人", "抵达", "屏幕", "底端", "。", "下面", "先来", "让", "外星人", "向", "右", "移动", "。", "\n", "13.4", ".", "1", "　", "向", "右", "移动", "外星人", "\n", "　", "向", "右", "移动", "外星人", "\n", "为", "移动", "外星人", "，", "我们", "将", "使用", "alien", ".", "py", "中", "的", "方法", "update", "(", ")", " ", "，", "且", "对", "外星人", "群中", "的", "每个", "外星人", "都", "调用", "它", "。", "首先", "，", "添加", "一个", "控制", "外星人", "速度", "的", "设置", "：", "\n", "settings", ".", "py"], ["settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "外星人", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "speed", "_", "factor", " ", "=", " ", "1", "\n", "然后", "，", "使用", "这个", "设置", "来", "实现", "update", "(", ")", " ", "：", "\n", "alien", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "向", "右", "移动", "外星人", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "x", " ", "+", "=", " ", "self", ".", "ai", "_", "settings", ".", "alien", "_", "speed", "_", "factor", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "x", " ", "=", " ", "self", ".", "x", "\n", "每次", "更新", "外星人", "位置", "时", "，", "都", "将", "它", "向", "右", "移动", "，", "移动", "量", "为", "alien", "_", "speed", "_", "factor", " ", "的", "值", "。", "我们", "使用", "属性", "self", ".", "x", " ", "跟踪", "每个", "外星人", "的", "准确", "位置", "，", "这个", "属性", "可", "存储", "小", "数值", "（", "见", "❶", "）", "。", "然", "\n", "后", "，", "我们", "使用", "self", ".", "x", " ", "的", "值来", "更新", "外星人", "的", "rect", " ", "的", "位置", "（", "见", "❷", "）", "。", "\n", "在", "主", "while", " ", "循环", "中", "已", "调用", "了", "更新", "飞船", "和", "子弹", "的", "方法", "，", "但", "现在", "还", "需", "更新", "每个", "外星人", "的", "位置", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "我们", "在", "更新", "子弹", "后", "再", "更新", "外星人", "的", "位置", "，", "因为", "稍后", "要", "检查", "是否", "有", "子弹", "撞", "到", "了", "外星人", "。", "\n", "最后", "，", "在", "文件", "game", "_", "functions", ".", "py", "末尾", "添加", "新", "函数", "update", "_", "aliens", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "aliens", "(", "aliens", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "更新", "外星人", "群中", "所有", "外星人", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "aliens", ".", "update", "(", ")"], ["\"", "\"", "\"", "更新", "外星人", "群中", "所有", "外星人", "的", "位置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "aliens", ".", "update", "(", ")", "\n", "我们", "对", "编组", "aliens", " ", "调用", "方法", "update", "(", ")", " ", "，", "这", "将", "自动", "对", "每个", "外星人", "调用", "方法", "update", "(", ")", " ", "。", "如果", "你", "现在", "运行", "这个", "游戏", "，", "会", "看到", "外星人", "群向", "右移", "，", "并", "逐渐", "在", "屏幕", "右", "边缘", "消失", "。", "\n", "13.4", ".", "2", "　", "创建", "表示", "外星人", "移动", "方向", "的", "设置", "\n", "　", "创建", "表示", "外星人", "移动", "方向", "的", "设置", "\n", "下面", "来", "创建", "让", "外星人", "撞", "到", "屏幕", "右", "边缘", "后", "向下", "移动", "、", "再", "向", "左", "移动", "的", "设置", "。", "实现", "这种", "行为", "的", "代码", "如下", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "外星人", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "speed", "_", "factor", " ", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "fleet", "_", "drop", "_", "speed", " ", "=", " ", "10", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "fleet", "_", "direction", "为", "1", "表示", "向", "右移", "，", "为", "-", "1", "表示", "向", "左移", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "fleet", "_", "direction", " ", "=", " ", "1", "\n", "设置", "fleet", "_", "drop", "_", "speed", " ", "指定", "了", "有", "外星人", "撞", "到", "屏幕", "边缘", "时", "，", "外星人", "群", "向下", "移动", "的", "速度", "。", "将", "这个", "速度", "与", "水平", "速度", "分开", "是", "有", "好处", "的", "，", "这样", "你", "就", "可以", "分别", "调整", "这", "两种", "速度", "了", "。"], ["要", "实现", "fleet", "_", "direction", " ", "设置", "，", "可以", "将", "其", "设置", "为", "文本", "值", "，", "如", "'", "left", "'", " ", "或", "'", "right", "'", " ", "，", "但", "这样", "就", "必须", "编写", "if", "-", "elif", " ", "语句", "来", "检查", "外星人", "群", "的", "移动", "方向", "。", "鉴于", "只有", "两个", "可能", "的", "方"], ["向", "，", "我们", "使用", "值", "1", "和", "-", "1", "来", "表示", "它们", "，", "并", "在", "外星人", "群", "改变方向", "时", "在", "这", "两个", "值", "之间", "切换", "。", "另外", "，", "鉴于", "向", "右", "移动", "时", "需要", "增大", "每个", "外星人", "的", "x", " ", "坐标", "，", "而", "向", "左", "移动", "时", "需要", "减小", "每个", "外星人", "的", "x", "\n", "坐标", "，", "使用", "数字", "来", "表示", "方向", "更", "合理", "。", "\n", "13.4", ".", "3", "　", "检查", "外星人", "是否", "撞", "到", "了", "屏幕", "边缘", "\n", "　", "检查", "外星人", "是否", "撞", "到", "了", "屏幕", "边缘", "\n", "现在", "需要", "编写", "一个", "方法", "来", "检查", "是否", "有", "外星人", "撞", "到", "了", "屏幕", "边缘", "，", "还", "需", "修改", "update", "(", ")", " ", "，", "以", "让", "每个", "外星人", "都", "沿", "正确", "的", "方向", "移动", "：", "\n", "alien", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "check", "_", "edges", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "如果", "外星人", "位于", "屏幕", "边缘", "，", "就", "返回", "True", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "screen", "_", "rect", " ", "=", " ", "self", ".", "screen", ".", "get", "_", "rect", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "self", ".", "rect", ".", "right", " ", ">", "=", " ", "screen", "_", "rect", ".", "right", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "True", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "self", ".", "rect", ".", "left", " ", "<", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "True", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "update", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "向", "左", "或", "向", "右", "移动", "外星人", "\"", "\"", "\""], ["\"", "\"", "\"", "向", "左", "或", "向", "右", "移动", "外星人", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "x", " ", "+", "=", " ", "(", "self", ".", "ai", "_", "settings", ".", "alien", "_", "speed", "_", "factor", " ", "*", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", ".", "fleet", "_", "direction", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "x", " ", "=", " ", "self", ".", "x", "\n", "我们", "可", "对", "任何", "外星人", "调用", "新", "方法", "check", "_", "edges", "(", ")", " ", "，", "看看", "它", "是否", "位于", "屏幕", "左", "边缘", "或右", "边缘", "。", "如果", "外星人", "的", "rect", " ", "的", "right", " ", "属性", "大于", "或", "等于", "屏幕", "的", "rect", " ", "的", "right", " ", "属性", "，", "就", "说明", "外", "\n", "星人", "位于", "屏幕", "右", "边缘", "（", "见", "❶", "）", "。", "如果", "外星人", "的", "rect", " ", "的", "left", " ", "属性", "小于", "或", "等于", "0", "，", "就", "说明", "外星人", "位于", "屏幕", "左", "边缘", "（", "见", "❷", "）", "。", "\n", "我们", "修改", "了", "方法", "update", "(", ")", " ", "，", "将", "移动", "量", "设置", "为", "外星人", "速度", "和", "fleet", "_", "direction", " ", "的", "乘积", "，", "让", "外星人", "向", "左", "或", "向", "右移", "。", "如果", "fleet", "_", "direction", " ", "为", "1", "，", "就", "将", "外星人", "当前", "的", " ", "x", " ", "坐标", "增"], ["大", "alien", "_", "speed", "_", "factor", " ", "，", "从而", "将", "外星人", "向", "右移", "；", "如果", "fleet", "_", "direction", " ", "为", "-", "1", "，", "就", "将", "外星人", "当前", "的", " ", "x", " ", "坐标", "减去", "alien", "_", "speed", "_", "factor", " ", "，", "从而", "将", "外星人", "向", "左移", "。", "\n", "13.4", ".", "4", "　", "向下", "移动", "外星人", "群", "并", "改变", "移动", "方向", "\n", "　", "向下", "移动", "外星人", "群", "并", "改变", "移动", "方向", "\n", "有", "外星人", "到达", "屏幕", "边缘", "时", "，", "需要", "将", "整群", "外星人", "下移", "，", "并", "改变", "它们", "的", "移动", "方向", "。", "我们", "需要", "对", "game", "_", "functions", ".", "py", "做", "重大", "修改", "，", "因为", "我们", "要", "在", "这里", "检查", "是否", "有", "外星人", "到达", "了", "左", "边缘", "或", "右边", "\n", "缘", "。", "为此", "，", "我们", "编写", "函数", "check", "_", "fleet", "_", "edges", "(", ")", " ", "和", "change", "_", "fleet", "_", "direction", "(", ")", " ", "，", "并", "对", "update", "_", "aliens", "(", ")", " ", "进行", "修改", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "fleet", "_", "edges", "(", "ai", "_", "settings", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "有", "外星人", "到达", "边缘", "时", "采取相应", "的", "措施", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "for", " ", "alien", " ", "in", " ", "aliens", ".", "sprites", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "alien", ".", "check", "_", "edges", "(", ")", ":"], ["if", " ", "alien", ".", "check", "_", "edges", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "change", "_", "fleet", "_", "direction", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", " ", " ", "def", " ", "change", "_", "fleet", "_", "direction", "(", "ai", "_", "settings", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "整群", "外星人", "下移", "，", "并", "改变", "它们", "的", "方向", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "alien", " ", "in", " ", "aliens", ".", "sprites", "(", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "alien", ".", "rect", ".", "y", " ", "+", "=", " ", "ai", "_", "settings", ".", "fleet", "_", "drop", "_", "speed", "\n", " ", " ", " ", " ", " ", " ", "ai", "_", "settings", ".", "fleet", "_", "direction", " ", "*", "=", " ", "-", "1", "\n", " ", " ", "def", " ", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "检查", "是否", "有", "外星人", "位于", "屏幕", "边缘", "，", "并", "更新", "整群", "外星人", "的", "位置", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", "check", "_", "fleet", "_", "edges", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", "aliens", ".", "update", "(", ")"], ["aliens", ".", "update", "(", ")", "\n", "在", "check", "_", "fleet", "_", "edges", "(", ")", " ", "中", "，", "我们", "遍历", "外星人", "群", "，", "并", "对", "其中", "的", "每个", "外星人", "调用", "check", "_", "edges", "(", ")", " ", "（", "见", "❶", "）", "。", "如果", "check", "_", "edges", "(", ")", " ", "返回", "True", " ", "，", "我们", "就", "知道", "相应", "的", "外星人", "位", "\n", "于", "屏幕", "边缘", "，", "需要", "改变", "外星人", "群", "的", "方向", "，", "因此", "我们", "调用", "change", "_", "fleet", "_", "direction", "(", ")", " ", "并", "退出", "循环", "。", "在", "change", "_", "fleet", "_", "direction", "(", ")", " ", "中", "，", "我们", "遍历", "所有", "外星人", "，", "将", "每个", "外", "\n", "星人", "下移", "fleet", "_", "drop", "_", "speed", " ", "设置", "的", "值", "（", "见", "❷", "）", "；", "然后", "，", "将", "fleet", "_", "direction", " ", "的", "值", "修改", "为", "其", "当前", "值", "与", "-", "1", "的", "乘积", "。", "\n", "我们", "修改", "了", "函数", "update", "_", "aliens", "(", ")", " ", "，", "在", "其中", "通过", "调用", "check", "_", "fleet", "_", "edges", "(", ")", " ", "来", "确定", "是否", "有", "外星人", "位于", "屏幕", "边缘", "。", "现在", "，", "函数", "update", "_", "aliens", "(", ")", " ", "包含", "形", "\n", "参", "ai", "_", "settings", " ", "，", "因此", "我们", "调用", "它", "时", "指定", "了", "与", "ai", "_", "settings", " ", "对应", "的", "实参", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "如果", "你", "现在", "运行", "这个", "游戏", "，", "外星人", "群", "将", "在", "屏幕", "上", "来回", "移动", "，", "并", "在", "抵达", "屏幕", "边缘", "后", "向下", "移动", "。", "现在", "可以", "开始", "射杀", "外星人", "，", "检查", "是否", "有", "外星人", "撞", "到", "飞船", "，", "或", "抵达", "了", "屏幕", "底端", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "13", "-", "3", " ", "雨滴", "\n", "雨滴", " ", "：", "寻找", "一幅", "雨滴", "图像", "，", "并", "创建", "一系列", "整齐", "排列", "的", "雨滴", "。", "让", "这些", "雨滴", "往", "下落", "，", "直到", "到达", "屏幕", "底端", "后", "消失", "。", "\n", "13", "-", "4", " ", "连绵", "细雨", "\n", "连绵", "细雨", " ", "：", "修改", "为", "完成", "练习", "13", "-", "3", "而", "编写", "的", "代码", "，", "使得", "一行", "雨滴", "消失", "在", "屏幕", "底端", "后", "，", "屏幕", "顶端", "又", "出现", "一行", "新", "雨滴", "，", "并", "开始", "往", "下落", "。", "\n", "13.5", "　", "射杀", "外星人", "\n", "　", "射杀", "外星人"], ["13.5", "　", "射杀", "外星人", "\n", "　", "射杀", "外星人", "\n", "我们", "创建", "了", "飞船", "和", "外星人", "群", "，", "但", "子弹", "击中", "外星人", "时", "，", "将", "穿过", "外星人", "，", "因为", "我们", "还", "没有", "检查", "碰撞", "。", "在", "游戏", "编程", "中", "，", "碰撞", "指", "的", "是", "游戏", "元素", "重叠", "在", "一起", "。", "要", "让", "子弹", "能够", "击落", "外星人", "，", "我", "\n", "们", "将", "使用", "sprite", ".", "groupcollide", "(", ")", " ", "检测", "两个", "编组", "的", "成员", "之间", "的", "碰撞", "。", "\n", "13.5", ".", "1", "　", "检测", "子弹", "与", "外星人", "的", "碰撞", "\n", "　", "检测", "子弹", "与", "外星人", "的", "碰撞", "\n", "子弹", "击中", "外星人", "时", "，", "我们", "要", "马上", "知道", "，", "以便", "碰撞", "发生", "后", "让", "外星人", "立即", "消失", "。", "为此", "，", "我们", "将", "在", "更新", "子弹", "的", "位置", "后", "立即", "检测", "碰撞", "。", "\n", "方法", "sprite", ".", "groupcollide", "(", ")", " ", "将", "每颗", "子弹", "的", "rect", " ", "同", "每个", "外星人", "的", "rect", " ", "进行", "比较", "，", "并", "返回", "一个", "字典", "，", "其中", "包含", "发生", "了", "碰撞", "的", "子弹", "和", "外星人", "。", "在", "这个", "字典", "中", "，", "每个", "键", "都", "是", "一", "\n", "颗", "子弹", "，", "而", "相应", "的", "值", "都", "是", "被", "击中", "的", "外星人", "（", "第", "14", "章", "实现", "记分", "系统", "时", "，", "也", "会", "用到", "这个", "字典", "）", "。", "\n", "在", "函数", "update", "_", "bullets", "(", ")", " ", "中", "，", "使用", "下面", "的", "代码", "来", "检查", "碰撞", "："], ["game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "bullets", "(", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "更新", "子弹", "的", "位置", "，", "并", "删除", "已", "消失", "的", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "检查", "是否", "有", "子弹", "击中", "了", "外星人", "\n", " ", " ", " ", " ", "#", " ", "如果", "是", "这样", "，", "就", "删除", "相应", "的", "子弹", "和", "外星人", "\n", " ", " ", " ", " ", "collisions", " ", "=", " ", "pygame", ".", "sprite", ".", "groupcollide", "(", "bullets", ",", " ", "aliens", ",", " ", "True", ",", " ", "True", ")", "\n", "新增", "的", "这行", "代码", "遍历", "编组", "bullets", " ", "中", "的", "每颗", "子弹", "，", "再", "遍历", "编组", "aliens", " ", "中", "的", "每个", "外星人", "。", "每当", "有", "子弹", "和", "外星人", "的", "rect", " ", "重叠", "时", "，", "groupcollide", "(", ")", " ", "就", "在", "它", "返回", "的", "字典", "中", "添加", "一", "\n", "个键", "-", "值", "对", "。", "两个", "实参", "True", " ", "告诉", "Pygame", "删除", "发生", "碰撞", "的", "子弹", "和", "外星人", "。", "（", "要", "模拟", "能够", "穿行", "到", "屏幕", "顶端", "的", "高能", "子弹", "—", "—", "消灭", "它", "击中", "的", "每个", "外星人", "，", "可", "将", "第一个", "布尔", "实参", "设置", "\n", "为", "False", " ", "，", "并", "让", "第二个", "布尔", "实参", "为", "True", " ", "。", "这样", "被", "击中", "的", "外星人", "将", "消失", "，", "但", "所有", "的", "子弹", "都", "始终", "有效", "，", "直到", "抵达", "屏幕", "顶端", "后", "消失", "。", "）", "\n", "我们", "调用", "update", "_", "bullets", "(", ")", " ", "时", "，", "传递", "了", "实参", "aliens", " ", "：", "\n", "alien", "_", "invasion", ".", "py"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "如果", "你", "此时", "运行", "这个", "游戏", "，", "被", "击中", "的", "外星人", "将", "消失", "。", "如图", "13", "-", "5", "所示", "，", "其中", "有", "一部分", "外星人", "被", "击落", "。", "\n", "图", "\n", "图", "13", "-", "5", "　", "可以", "射杀", "外星人", "了", "\n", "　", "可以", "射杀", "外星人", "了", "\n", "13.5", ".", "2", "　", "为", "测试", "创建", "大", "子弹", "\n", "　", "为", "测试", "创建", "大", "子弹", "\n", "只", "需", "通过", "运行", "这个", "游戏", "就", "可以", "测试", "其", "很多", "功能", "，", "但", "有些", "功能", "在", "正常", "情况", "下", "测试", "起来", "比较", "烦琐", "。", "例如", "，", "要", "测试代码", "能否", "正确", "地", "处理", "外星人", "编组", "为空", "的", "情形", "，", "需要", "花", "很", "长时间", "将", "屏幕", "\n", "上", "的", "外星人", "都", "击落", "。"], ["上", "的", "外星人", "都", "击落", "。", "\n", "测试", "有些", "功能", "时", "，", "可以", "修改", "游戏", "的", "某些", "设置", "，", "以便", "专注", "于", "游戏", "的", "特定", "方面", "。", "例如", "，", "可以", "缩小", "屏幕", "以", "减少", "需要", "击落", "的", "外星人", "数量", "，", "也", "可以", "提高", "子弹", "的", "速度", "，", "以便", "能够", "在", "单位", "时间", "内", "\n", "发射", "大量", "子弹", "。", "\n", "测试", "这个", "游戏", "时", "，", "我", "喜欢", "做", "的", "一项", "修改", "是", "增大", "子弹", "的", "尺寸", "，", "使", "其", "在", "击中", "外星人", "后", "依然", "有效", "，", "如图", "13", "-", "6", "所示", "。", "请", "尝试", "将", "bullet", "_", "width", " ", "设置", "为", "300", "，", "看看", "将", "所有", "外星人", "都", "射杀", "有", "多", "\n", "快", "！", "\n", "类似", "这样", "的", "修改", "可", "提高", "测试", "效率", "，", "还", "可能", "激发", "出", "如何", "赋予", "玩家", "更大", "威力", "的", "思想", "火花", "。", "（", "完成", "测试", "后", "，", "别忘了", "将", "设置", "恢复正常", "。", "）"], ["图", "\n", "图", "13", "-", "6", "　", "威力", "更大", "的", "子弹", "让", "游戏", "的", "有些", "方法", "测试", "起来", "更", "容易", "\n", "　", "威力", "更大", "的", "子弹", "让", "游戏", "的", "有些", "方法", "测试", "起来", "更", "容易", "\n", "13.5", ".", "3", "　", "生成", "新", "的", "外星人", "群", "\n", "　", "生成", "新", "的", "外星人", "群", "\n", "这个", "游戏", "的", "一个", "重要", "特点", "是", "外星人", "无穷无尽", "，", "一个", "外星人", "群", "被", "消灭", "后", "，", "又", "会", "出现", "一群", "外星人", "。", "\n", "要", "在", "外星人", "群", "被", "消灭", "后", "又", "显示", "一群", "外星人", "，", "首先", "需要", "检查", "编组", "aliens", " ", "是否", "为空", "。", "如果", "为空", "，", "就", "调用", "create", "_", "fleet", "(", ")", " ", "。", "我们", "将", "在", "update", "_", "bullets", "(", ")", " ", "中", "执行", "这种", "检查", "，", "因", "\n", "为", "外星人", "都", "是", "在", "这里", "被", "消灭", "的", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检查", "是否", "有", "子弹", "击中", "了", "外星人", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "如果", "是", "，", "就", "删除", "相应", "的", "子弹", "和", "外星人", "\n", " ", " ", " ", " ", " ", " ", "collisions", " ", "=", " ", "pygame", ".", "sprite", ".", "groupcollide", "(", "bullets", ",", " ", "aliens", ",", " ", "True", ",", " ", "True", ")", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "len", "(", "aliens", ")", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "删除", "现有", "的", "子弹", "并", "新建", "一群", "外星人"], ["#", " ", "删除", "现有", "的", "子弹", "并", "新建", "一群", "外星人", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", "在", "❶", "处", "，", "我们", "检查", "编组", "aliens", " ", "是否", "为空", "。", "如果", "是", "，", "就", "使用", "方法", "empty", "(", ")", " ", "删除", "编组", "中", "余下", "的", "所有", "精灵", "，", "从而", "删除", "现有", "的", "所有", "子弹", "。", "我们", "还", "调用", "了", "create", "_", "fleet", "(", ")", " ", "，", "再次", "在", "屏", "\n", "幕上", "显示", "一群", "外星人", "。", "\n", "现在", "，", "update", "_", "bullets", "(", ")", " ", "的", "定义", "包含", "额外", "的", "形参", "ai", "_", "settings", " ", "、", "screen", " ", "和", "ship", " ", "，", "因此", "我们", "需要", "更新", "alien", "_", "invasion", ".", "py", "中", "对", "update", "_", "bullets", "(", ")", " ", "的", "调用", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")"], ["ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "现在", "，", "当前", "外星人", "群", "消灭", "干净", "后", "，", "将", "立刻", "出现", "一个", "新", "的", "外星人", "群", "。", "\n", "13.5", ".", "4", "　", "提高", "子弹", "的", "速度", "\n", "　", "提高", "子弹", "的", "速度", "\n", "如果", "你", "现在", "尝试", "在", "这个", "游戏", "中", "射杀", "外星人", "，", "可能", "发现", "子弹", "的", "速度", "比", "以前", "慢", "，", "这", "是因为", "在", "每次", "循环", "中", "，", "Pygame", "需要", "做", "的", "工作", "更", "多", "了", "。", "为", "提高", "子弹", "的", "速度", "，", "可", "调整", "settings", ".", "py", "\n", "中", "bullet", "_", "speed", "_", "factor", " ", "的", "值", "。", "例如", "，", "如果", "将", "这个", "值", "增大", "到", "3", "，", "子弹", "在", "屏幕", "上", "向上", "穿行", "的", "速度", "将", "变得", "相当", "快", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "子弹", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "speed", "_", "factor", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "width", " ", "=", " ", "3"], ["self", ".", "bullet", "_", "width", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "这项", "设置", "的", "最佳值", "取决于", "你", "的", "系统", "速度", "，", "请", "找出", "适合", "你", "的", "值", "吧", "。", "\n", "13.5", ".", "5", "　", "重构", "\n", "　", "重构", "update", "_", "bullets", "(", ")", "\n", "下面", "来", "重构", "update", "_", "bullets", "(", ")", " ", "，", "使", "其", "不再", "完成", "那么", "多任务", "。", "我们", "将", "把", "处理", "子弹", "和", "外星人", "碰撞", "的", "代码", "移", "到", "一个", "独立", "的", "函数", "中", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["#", " ", "删除", "已", "消失", "的", "子弹", "\n", " ", " ", " ", " ", "for", " ", "bullet", " ", "in", " ", "bullets", ".", "copy", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "bullet", ".", "rect", ".", "bottom", " ", "<", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "remove", "(", "bullet", ")", "\n", " ", " ", " ", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "子弹", "和", "外星人", "的", "碰撞", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "#", " ", "删除", "发生", "碰撞", "的", "子弹", "和", "外星人", "\n", " ", " ", " ", " ", "collisions", " ", "=", " ", "pygame", ".", "sprite", ".", "groupcollide", "(", "bullets", ",", " ", "aliens", ",", " ", "True", ",", " ", "True", ")", "\n", " ", " ", " ", " ", "if", " ", "len", "(", "aliens", ")", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "删除", "现有", "的", "所有", "子弹", "，", "并", "创建", "一个", "新", "的", "外星人", "群", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")"], ["bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", "我们", "创建", "了", "一个", "新", "函数", "—", "—", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "，", "以", "检测", "子弹", "和", "外星人", "之间", "的", "碰撞", "，", "以及", "在", "整群", "外星人", "都", "被", "消灭", "干净", "时", "采取相应", "的", "措施", "。", "这", "避免", "\n", "了", "update", "_", "bullets", "(", ")", " ", "太", "长", "，", "简化", "了", "后续", "的", "开发", "工作", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "13", "-", "5", " ", "抓球", "\n", "抓球", " ", "：", "创建", "一个", "游戏", "，", "在", "屏幕", "底端", "放置", "一个", "玩家", "可", "左右", "移动", "的", "角色", "。", "让", "一个", "球", "出现", "在", "屏幕", "顶端", "，", "且", "水平", "位置", "是", "随机", "的", "，", "并", "让", "这个", "球以", "固定", "的", "速度", "往", "下落", "。", "如果", "角", "\n", "色", "与", "球", "发生", "碰撞", "（", "表示", "将球", "抓住", "了", "）", "，", "就让", "球", "消失", "。", "每当", "角色", "抓住", "球", "或", "球", "因", "抵达", "屏幕", "底端", "而", "消失", "后", "，", "都", "创建", "一个", "新球", "。", "\n", "13.6", "　", "结束", "游戏", "\n", "　", "结束", "游戏", "\n", "如果", "玩家", "根本", "不会", "输", "，", "游戏", "还有", "什么", "趣味", "和", "挑战性", "可言", "？", "如果", "玩家", "没能", "在", "足够", "短", "的", "时间", "内", "将", "整群", "外星人", "都", "消灭", "干净", "，", "且", "有", "外星人", "撞", "到", "了", "飞船", "，", "飞船", "将", "被", "摧毁", "。", "与此同时", "，", "我们", "还", "\n", "限制", "了", "可供", "玩家", "使用", "的", "飞船", "数", "，", "而", "有", "外星人", "抵达", "屏幕", "底端", "时", "，", "飞船", "也", "将", "被", "摧毁", "。", "玩家", "用光", "了", "飞船", "后", "，", "游戏", "便", "结束", "。", "\n", "13.6", ".", "1", "　", "检测", "外星人", "和", "飞船", "碰撞"], ["13.6", ".", "1", "　", "检测", "外星人", "和", "飞船", "碰撞", "\n", "　", "检测", "外星人", "和", "飞船", "碰撞", "\n", "我们", "首先", "检查", "外星人", "和", "飞船", "之间", "的", "碰撞", "，", "以便", "外星人", "撞", "上", "飞船", "时", "我们", "能够", "作出", "合适", "的", "响应", "。", "我们", "在", "更新", "每个", "外星人", "的", "位置", "后", "立即", "检测", "外星人", "和", "飞船", "之间", "的", "碰撞", "。", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "ship", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "检查", "是否", "有", "外星人", "到达", "屏幕", "边缘", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "然后", "更新", "所有", "外星人", "的", "位置", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "check", "_", "fleet", "_", "edges", "(", "ai", "_", "settings", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", "aliens", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检测", "外星人", "和", "飞船", "之间", "的", "碰撞", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "pygame", ".", "sprite", ".", "spritecollideany", "(", "ship", ",", " ", "aliens", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Ship", " ", "hit", "!", "!", "!", "\"", ")", "\n", "方法", "spritecollideany", "(", ")", " ", "接受", "两个", "实参", "：", "一个", "精灵", "和", "一个", "编组", "。", "它", "检查", "编组", "是否", "有", "成员", "与", "精灵", "发生", "了", "碰撞", "，", "并", "在", "找到", "与", "精灵", "发生", "了", "碰撞", "的", "成员", "后", "就", "停止", "遍历", "编组", "。", "在", "这里", "，"], ["它", "遍历", "编组", "aliens", " ", "，", "并", "返回", "它", "找到", "的", "第一个", "与", "飞船", "发生", "了", "碰撞", "的", "外星人", "。", "\n", "如果", "没有", "发生", "碰撞", "，", "spritecollideany", "(", ")", " ", "将", "返回", "None", " ", "，", "因此", "❶", "处", "的", "if", " ", "代码", "块", "不会", "执行", "。", "如果", "找到", "了", "与", "飞船", "发生", "碰撞", "的", "外星人", "，", "它", "就", "返回", "这个", "外星人", "，", "因此", "if", " ", "代码", "块", "将", "执", "\n", "行", "：", "打印", "“", "Ship", " ", "hit", "!", "!", "!", "”", "（", "见", "❷", "）", "。", "（", "有", "外星人", "撞", "到", "飞船", "时", "，", "需要", "执行", "的", "任务", "很多", "：", "需要", "删除", "余下", "的", "所有", "外星人", "和", "子弹", "，", "让", "飞船", "重新", "居中", "，", "以及", "创建", "一群", "新", "的", "外星人", "。", "编写", "完成", "这些", "任", "\n", "务", "的", "代码", "前", "，", "需要", "确定", "检测", "外星人", "和", "飞船", "碰撞", "的", "方法", "是否", "可行", "。", "而", "为", "确定", "这", "一点", "，", "最", "简单", "的", "方式", "是", "编写", "一条", "print", " ", "语句", "。", "）", "\n", "现在", "，", "我们", "需要", "将", "ship", " ", "传递", "给", "update", "_", "aliens", "(", ")", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")"], ["gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "ship", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "现在", "如果", "你", "运行", "这个", "游戏", "，", "则", "每当", "有", "外星人", "撞", "到", "飞船", "时", "，", "终端", "窗口", "都", "将", "显示", "“", "Ship", " ", "hit", "!", "!", "!", "”", "。", "测试", "这项", "功能", "时", "，", "请", "将", "alien", "_", "drop", "_", "speed", " ", "设置", "为", "较大", "的", "值", "，", "如", "50", "或", "100", "，", "这样", "外星人", "\n", "将", "更", "快", "地", "撞", "到", "飞船", "。", "\n", "13.6", ".", "2", "　", "响应", "外星人", "和", "飞船", "碰撞", "\n", "　", "响应", "外星人", "和", "飞船", "碰撞", "\n", "现在", "需要", "确定", "外星人", "与", "飞船", "发生", "碰撞", "时", "，", "该", "做些", "什么", "。", "我们", "不", "销毁", "ship", " ", "实例", "并", "创建", "一个", "新", "的", "ship", " ", "实例", "，", "而是", "通过", "跟踪", "游戏", "的", "统计", "信息", "来", "记录", "飞船", "被", "撞", "了", "多少", "次", "（", "跟踪", "统计", "信息", "\n", "还", "有助于", "记分", "）", "。", "\n", "下面", "来", "编写", "一个", "用于", "跟踪", "游戏", "统计", "信息", "的", "新类", "—", "—", "GameStats", " ", "，", "并", "将", "其", "保存", "为", "文件", "game", "_", "stats", ".", "py", "：", "\n", "game", "_", "stats", ".", "py", "\n", " ", " ", "class", " ", "GameStats", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "跟踪", "游戏", "的", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ")", ":"], ["def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "reset", "_", "stats", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "reset", "_", "stats", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "在", "游戏", "运行", "期间", "可能", "变化", "的", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", "_", "left", " ", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "limit", "\n", "在", "这个", "游戏", "运行", "期间", "，", "我们", "只", "创建", "一个", "GameStats", " ", "实例", "，", "但", "每当", "玩家", "开始", "新", "游戏", "时", "，", "需要", "重置", "一些", "统计", "信息", "。", "为此", "，", "我们", "在", "方法", "reset", "_", "stats", "(", ")", " ", "中", "初始化", "大部分", "统计", "信息", "，"], ["而", "不是", "在", "__", "init", "__", "(", ")", " ", "中", "直接", "初始化", "它们", "。", "我们", "在", "__", "init", "__", "(", ")", " ", "中", "调用", "这个", "方法", "，", "这样", "创建", "GameStats", " ", "实例", "时", "将", "妥善", "地", "设置", "这些", "统计", "信息", "（", "见", "❶", "）", "，", "同时", "在", "玩家", "开始", "新", "游戏", "\n", "时", "也", "能", "调用", "reset", "_", "stats", "(", ")", " ", "。", "\n", "当前", "只有", "一项", "统计", "信息", "—", "—", "ships", "_", "left", " ", "，", "其值", "在", "游戏", "运行", "期间", "将", "不断", "变化", "。", "一", "开始", "玩家", "拥有", "的", "飞船", "数", "存储", "在", "settings", ".", "py", "的", "ship", "_", "limit", " ", "中", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "飞船", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "speed", "_", "factor", " ", "=", " ", "1.5", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "limit", " ", "=", " ", "3", "\n", "我们", "还", "需", "对", "alien", "_", "invasion", ".", "py", "做些", "修改", "，", "以", "创建", "一个", "GameStats", " ", "实例", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "settings", " ", "import", " ", "Settings", "\n", "❶", " ", "from", " ", "game", "_", "stats", " ", "import", " ", "GameStats", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "用于", "存储", "游戏", "统计", "信息", "的", "实例", "\n", "❷", " ", " ", " ", " ", " ", "stats", " ", "=", " ", "GameStats", "(", "ai", "_", "settings", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "导入", "了", "新类", "GameStats", " ", "（", "见", "❶", "）", "，", "创建", "了", "一个", "名为", "stats", " ", "的", "实例", "（", "见", "❷", "）", "，", "再", "调用", "update", "_", "aliens", "(", ")", " ", "并", "添加", "了", "实参", "stats", " ", "、", "screen", " ", "和", "ship", " ", "（", "见", "❸", "）", "。", "在", "有", "外星人"], ["撞", "到", "飞船", "时", "，", "我们", "将", "使用", "这些", "实参", "来", "跟踪", "玩家", "还有", "多少", "艘", "飞船", "，", "以及", "创建", "一群", "新", "的", "外星人", "。", "\n", "有", "外星人", "撞", "到", "飞船", "时", "，", "我们", "将", "余下", "的", "飞船", "数减", "1", "，", "创建", "一群", "新", "的", "外星人", "，", "并", "将", "飞船", "重新", "放置", "到", "屏幕", "底端", "中央", "（", "我们", "还", "将", "让", "游戏", "暂停", "一段时间", "，", "让玩家", "在", "新", "外星人", "群", "出现", "前", "注意", "到", "发", "\n", "生", "了", "碰撞", "，", "并", "将", "重新", "创建", "外星人", "群", "）", "。", "\n", "下面", "将", "实现", "这些", "功能", "的", "大部分", "代码", "放到", "函数", "ship", "_", "hit", "(", ")", " ", "中", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "import", " ", "sys", "\n", "❶", " ", "from", " ", "time", " ", "import", " ", "sleep", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "被", "外星人", "撞", "到", "的", "飞船", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "将", "ships", "_", "left", "减", "1", "\n", "❷", " ", " ", " ", " ", " ", "stats", ".", "ships", "_", "left", " ", "-", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "清空", "外星人", "列表", "和", "子弹", "列表", "\n", "❸", " ", " ", " ", " ", " ", "aliens", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一群", "新", "的", "外星人", "，", "并", "将", "飞船", "放到", "屏幕", "底端", "中央"], ["#", " ", "创建", "一群", "新", "的", "外星人", "，", "并", "将", "飞船", "放到", "屏幕", "底端", "中央", "\n", "❹", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", "ship", ".", "center", "_", "ship", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "暂停", "\n", "❺", " ", " ", " ", " ", " ", "sleep", "(", "0.5", ")", "\n", "❻", " ", "def", " ", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检测", "外星人", "和", "飞船", "碰撞", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pygame", ".", "sprite", ".", "spritecollideany", "(", "ship", ",", " ", "aliens", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "我们", "首先", "从", "模块", "time", " ", "中", "导入", "了", "函数", "sleep", "(", ")", " ", "，", "以便", "使用", "它", "来", "让", "游戏", "暂停", "（", "见", "❶", "）", "。", "新", "函数", "ship", "_", "hit", "(", ")", " ", "在", "飞船", "被", "外星人", "撞", "到", "时", "作出", "响应", "。", "在", "这个", "函数", "内部", "，", "将", "余下", "的", "飞船", "数", "\n", "减", "1", "（", "见", "❷", "）", "，", "然后", "清空", "编组", "aliens", " ", "和", "bullets", " ", "（", "见", "❸", "）", "。"], ["减", "1", "（", "见", "❷", "）", "，", "然后", "清空", "编组", "aliens", " ", "和", "bullets", " ", "（", "见", "❸", "）", "。", "\n", "接下来", "，", "我们", "创建", "一群", "新", "的", "外星人", "，", "并", "将", "飞船", "居中", "（", "见", "❹", "）", "，", "稍后", "将", "在", "Ship", " ", "类中", "添加", "方法", "center", "_", "ship", "(", ")", " ", "。", "最后", "，", "我们", "更新", "所有", "元素", "后", "（", "但", "在", "将", "修改", "显示", "到", "屏幕", "前", "）", "暂停", "，", "\n", "让玩家", "知道", "其", "飞船", "被", "撞", "到", "了", "（", "见", "❺", "）", "。", "屏幕", "将", "暂时", "停止", "变化", "，", "让玩家", "能够", "看到", "外星人", "撞", "到", "了", "飞船", "。", "函数", "sleep", "(", ")", " ", "执行", "完毕", "后", "，", "将", "接着", "执行", "函数", "update", "_", "screen", "(", ")", " ", "，", "将", "新", "的", "外", "\n", "星", "人群", "绘制", "到", "屏幕", "上", "。", "\n", "我们", "还", "更新", "了", "update", "_", "aliens", "(", ")", " ", "的", "定义", "，", "使", "其", "包含", "形参", "stats", " ", "、", "screen", " ", "和", "bullets", " ", "（", "见", "❻", "）", "，", "让", "它", "能够", "在", "调用", "ship", "_", "hit", "(", ")", " ", "时", "传递", "这些", "值", "。", "\n", "下面", "是", "新", "方法", "center", "_", "ship", "(", ")", " ", "，", "请", "将", "其", "添加", "到", "ship", ".", "py", "的", "末尾", "：", "\n", "ship", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "center", "_", "ship", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "让", "飞船", "在", "屏幕", "上", "居中", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "center", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "centerx", "\n", "为", "让", "飞船", "居中", "，", "我们", "将", "飞船", "的", "属性", "center", " ", "设置", "为", "屏幕", "中心", "的", "x", " ", "坐标", "，", "而", "该", "坐标", "是", "通过", "属性", "screen", "_", "rect", " ", "获得", "的", "。"], ["注意", "\n", "注意", " ", "　", "我们", "根本", "没有", "创建", "多艘", "飞船", "，", "在", "整个", "游戏", "运行", "期间", "，", "我们", "都", "只", "创建", "了", "一个", "飞船", "实例", "，", "并", "在", "该", "飞船", "被", "撞", "到", "时", "将", "其", "居中", "。", "统计", "信息", "ships", "_", "left", " ", "让", "我们", "知道", "飞船", "\n", "是否", "用", "完", "。", "\n", "请", "运行", "这个", "游戏", "，", "射杀", "几个", "外星人", "，", "并", "让", "一个", "外星人", "撞", "到", "飞船", "。", "游戏", "暂停", "后", "，", "将", "出现", "一群", "新", "的", "外星人", "，", "而", "飞船", "将", "在", "屏幕", "底端", "居中", "。"], ["13.6", ".", "3", "　", "有", "外星人", "到达", "屏幕", "底端", "\n", "　", "有", "外星人", "到达", "屏幕", "底端", "\n", "如果", "有", "外星人", "到达", "屏幕", "底端", "，", "我们", "将", "像", "有", "外星人", "撞", "到", "飞船", "那样", "作出", "响应", "。", "请", "添加", "一个", "执行", "这项", "任务", "的", "新", "函数", "，", "并", "将", "其", "命名", "为", "update", "_", "aliens", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "aliens", "_", "bottom", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "检查", "是否", "有", "外星人", "到达", "了", "屏幕", "底端", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "screen", "_", "rect", " ", "=", " ", "screen", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "alien", " ", "in", " ", "aliens", ".", "sprites", "(", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "alien", ".", "rect", ".", "bottom", " ", ">", "=", " ", "screen", "_", "rect", ".", "bottom", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "像", "飞船", "被", "撞", "到", "一样", "进行", "处理", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break"], ["break", "\n", " ", " ", "def", " ", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检查", "是否", "有", "外星人", "到达", "屏幕", "底端", "\n", "❷", " ", " ", " ", " ", " ", "check", "_", "aliens", "_", "bottom", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "函数", "check", "_", "aliens", "_", "bottom", "(", ")", " ", "检查", "是否", "有", "外星人", "到达", "了", "屏幕", "底端", "。", "到达", "屏幕", "底端", "后", "，", "外星人", "的", "属性", "rect", ".", "bottom", " ", "的", "值", "大于", "或", "等于", "屏幕", "的", "属性", "rect", ".", "bottom", " ", "的", "值", "（", "见", "\n", "❶", "）", "。", "如果", "有", "外星人", "到达", "屏幕", "底端", "，", "我们", "就", "调用", "ship", "_", "hit", "(", ")", " ", "；", "只要", "检测", "到", "一个", "外星人", "到达", "屏幕", "底端", "，", "就", "无需", "检查", "其他", "外星人", "，", "因此", "我们", "在", "调用", "ship", "_", "hit", "(", ")", " ", "后", "退出", "循环", "。", "\n", "我们", "在", "更新", "所有", "外星人", "的", "位置", "并", "检测", "是否", "有", "外星人", "和", "飞船", "发生", "碰撞", "后", "调用", "check", "_", "aliens", "_", "bottom", "(", ")", " ", "（", "见", "❷", "）", "。", "现在", "，", "每当", "有", "外星人", "撞", "到", "飞船", "或", "抵达", "屏幕", "底端", "时", "，", "都", "将", "出现", "一", "\n", "群新", "的", "外星人", "。", "\n", "13.6", ".", "4", "　", "游戏", "结束", "\n", "　", "游戏", "结束"], ["群新", "的", "外星人", "。", "\n", "13.6", ".", "4", "　", "游戏", "结束", "\n", "　", "游戏", "结束", "\n", "现在", "这个", "游戏", "看起来", "更", "完整", "了", "，", "但", "它", "永远", "都", "不会", "结束", "，", "只是", "ships", "_", "left", " ", "不断", "变成", "更", "小", "的", "负数", "。", "下面", "在", "GameStats", " ", "中", "添加", "一个", "作为", "标志", "的", "属性", "game", "_", "active", " ", "，", "以便", "在", "玩家", "的", "\n", "飞船", "用", "完后", "结束", "游戏", "：", "\n", "game", "_", "stats", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "settings", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "游戏", "刚", "启动", "时", "处于", "活动状态", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "game", "_", "active", " ", "=", " ", "True", "\n", "现在", "在", "ship", "_", "hit", "(", ")", " ", "中", "添加", "代码", "，", "在", "玩家", "的", "飞船", "都", "用", "完后", "将", "game", "_", "active", " ", "设置", "为", "False", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "飞船", "被", "外星人", "撞", "到", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "stats", ".", "ships", "_", "left", " ", ">", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "ships", "_", "left", "减", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "ships", "_", "left", " ", "-", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["stats", ".", "ships", "_", "left", " ", "-", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", "暂停", "一会儿", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sleep", "(", "0.5", ")", "\n", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "game", "_", "active", " ", "=", " ", "False", "\n", "ship", "_", "hit", "(", ")", " ", "的", "大部分", "代码", "都", "没变", "。", "我们", "将", "原来", "的", "所有", "代码", "都", "移到", "了", "一个", "if", " ", "语句", "块", "中", "，", "这条", "if", " ", "语句", "检查", "玩家", "是否", "至少", "还有", "一艘", "飞船", "。", "如果", "是", "这样", "，", "就", "创建", "一群", "新", "的", "外星人", "，", "暂", "\n", "停", "一会儿", "，", "再", "接着", "往", "下", "执行", "。", "如果", "玩家", "没有", "飞船", "了", "，", "就", "将", "game", "_", "active", " ", "设置", "为", "False", " ", "。", "\n", "13.7", "　", "确定", "应", "运行", "游戏", "的", "哪些", "部分", "\n", "　", "确定", "应", "运行", "游戏", "的", "哪些", "部分", "\n", "在", "alien", "_", "invasion", ".", "py", "中", "，", "我们", "需要", "确定", "游戏", "的", "哪些", "部分", "在", "任何", "情况", "下", "都", "应", "运行", "，", "哪些", "部分", "仅", "在", "游戏", "处于", "活动状态", "时才", "运行", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "game", "_", "active", ":"], ["if", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "stats", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "在", "主", "循环", "中", "，", "在", "任何", "情况", "下", "都", "需要", "调用", "check", "_", "events", "(", ")", " ", "，", "即便", "游戏", "处于", "非", "活动状态", "时", "亦", "如此", "。", "例如", "，", "我们", "需要", "知道", "玩家", "是否", "按", "了", "Q", "键以", "退出", "游戏", "，", "或", "单击", "关闭", "窗口", "的", "按钮", "。", "\n", "我们", "还", "需要", "不断更新", "屏幕", "，", "以便", "在", "等待", "玩家", "是否", "选择", "开始", "新", "游戏", "时", "能够", "修改", "屏幕", "。", "其他", "的", "函数", "仅", "在", "游戏", "处于", "活动状态", "时才", "需要", "调用", "，", "因为", "游戏", "处于", "非", "活动状态", "时", "，", "我们", "不用", "更新", "\n", "游戏", "元素", "的", "位置", "。", "\n", "现在", "，", "你", "运行", "这个", "游戏", "时", "，", "它", "将", "在", "飞船", "用", "完后", "停止", "不", "动", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "13", "-", "6", " ", "游戏", "结束"], ["现在", "，", "你", "运行", "这个", "游戏", "时", "，", "它", "将", "在", "飞船", "用", "完后", "停止", "不", "动", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "13", "-", "6", " ", "游戏", "结束", "\n", "游戏", "结束", " ", "：", "在", "为", "完成", "练习", "13", "-", "5", "而", "编写", "的", "代码", "中", "，", "跟踪", "玩家", "有", "多少", "次", "未", "将", "球", "接着", "。", "在", "未", "接着", "球", "的", "次数", "到达", "三次", "后", "，", "结束", "游戏", "。", "\n", "13.8", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "在", "游戏", "中", "添加", "大量", "相同", "的", "元素", "，", "如", "创建", "一群", "外星人", "；", "如何", "使用", "嵌套循环", "来", "创建", "元素", "网格", "，", "还", "通过", "调用", "每个", "元素", "的", "方法", "update", "(", ")", " ", "移动", "了", "大量", "的", "元素", "；", "\n", "如何", "控制", "对象", "在", "屏幕", "上", "移动", "的", "方向", "，", "以及", "如何", "响应", "事件", "，", "如", "有", "外星人", "到达", "屏幕", "边缘", "；", "如何", "检测", "和", "响应", "子弹", "和", "外星人", "碰撞", "以及", "外星人", "和", "飞船", "碰撞", "；", "如何", "在", "游戏", "中", "跟踪", "统计", "信息", "，", "以", "\n", "及", "如何", "使用", "标志", "game", "_", "active", " ", "来", "判断", "游戏", "是否", "结束", "了", "。"], ["在", "与", "这个", "项目", "相关", "的", "最后", "一章", "中", "，", "我们", "将", "添加", "一个", "Play", "按钮", "，", "让玩家", "能够", "开始", "游戏", "，", "以及", "游戏", "结束", "后", "再", "玩", "。", "每当", "玩家", "消灭", "一群", "外星人", "后", "，", "我们", "都", "将", "加快", "游戏", "的", "节奏", "，", "并", "添加", "一个", "记", "\n", "分系统", "，", "得到", "一个", "极具", "可玩性", "的", "游戏", "！", "\n", "记分", "\n", "记分", "\n", "在", "本章", "中", "，", "我们", "将", "结束", "游戏", "《", "外星人", "入侵", "》", "的", "开发", "。", "我们", "将", "添加", "一个", "Play", "按钮", "，", "用于", "根据", "需要", "启动", "游戏", "以及", "在", "游戏", "结束", "后", "重启", "游戏", "。", "我们", "还", "将", "修改", "这个", "游戏", "，", "使", "其", "在", "玩", "\n", "家", "的", "等级", "提高", "时", "加快", "节奏", "，", "并", "实现", "一个", "记分", "系统", "。", "阅读", "本章", "后", "，", "你", "将", "掌握", "足够", "多", "的", "知识", "，", "能够", "开始", "编写", "随", "玩家", "等级", "提高", "而", "加大", "难度", "以及", "显示", "得分", "的", "游戏", "。", "\n", "14.1", "　", "添加", "\n", "　", "添加", "Play", "按钮", "\n", "按钮", "\n", "在", "本节", "中", "，", "我们", "将", "添加", "一个", "Play", "按钮", "，", "它", "在", "游戏", "开始", "前", "出现", "，", "并", "在", "游戏", "结束", "后", "再次出现", "，", "让玩家", "能够", "开始", "新", "游戏", "。", "\n", "当前", "，", "这个", "游戏", "在", "玩家", "运行", "alien", "_", "invasion", ".", "py", "时", "就", "开始", "了", "。", "下面", "让", "游戏", "一", "开始", "处于", "非", "活动状态", "，", "并", "提示", "玩家", "单击", "Play", "按钮", "来", "开始", "游戏", "。", "为此", "，", "在", "game", "_", "stats", ".", "py", "中", "输入", "如下", "代码", "：", "\n", "game", "_", "stats", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "统计", "信息", "\"", "\"", "\""], ["\"", "\"", "\"", "初始化", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "reset", "_", "stats", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "游戏", "一", "开始", "处于", "非", "活动状态", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "game", "_", "active", " ", "=", " ", "False", "\n", " ", " ", " ", " ", "def", " ", "reset", "_", "stats", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "游戏", "一", "开始", "将", "处于", "非", "活动状态", "，", "等", "我们", "创建", "Play", "按钮", "后", "，", "玩家", "才能", "开始", "游戏", "。", "\n", "14.1", ".", "1", "　", "创建", "\n", "　", "创建", "Button", " ", "类", "\n", "类", "\n", "由于", "Pygame", "没有", "内置", "创建", "按钮", "的", "方法", "，", "我们", "创建", "一个", "Button", " ", "类", "，", "用于", "创建", "带", "标签", "的", "实心", "矩形", "。", "你", "可以", "在", "游戏", "中", "使用", "这些", "代码", "来", "创建", "任何", "按钮", "。", "下面", "是", "Button", " ", "类", "的", "第一", "部分", "，", "\n", "请", "将", "这个", "类", "保存", "为", "文件", "button", ".", "py", "：", "\n", "button", ".", "py", "\n", " ", " ", "import", " ", "pygame", ".", "font", "\n", " ", " ", "class", " ", "Button", "(", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "msg", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "按钮", "的", "属性", "\"", "\"", "\""], ["\"", "\"", "\"", "初始化", "按钮", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "rect", " ", "=", " ", "screen", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "设置", "按钮", "的", "尺寸", "和", "其他", "属性", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "width", ",", " ", "self", ".", "height", " ", "=", " ", "200", ",", " ", "50", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "button", "_", "color", " ", "=", " ", "(", "0", ",", " ", "255", ",", " ", "0", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "text", "_", "color", " ", "=", " ", "(", "255", ",", " ", "255", ",", " ", "255", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "font", " ", "=", " ", "pygame", ".", "font", ".", "SysFont", "(", "None", ",", " ", "48", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "按钮", "的", "rect", "对象", "，", "并", "使", "其", "居中", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", " ", "=", " ", "pygame", ".", "Rect", "(", "0", ",", " ", "0", ",", " ", "self", ".", "width", ",", " ", "self", ".", "height", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "rect", ".", "center", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "center", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "按钮", "的", "标签", "只", "需", "创建", "一次"], ["❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "msg", "(", "msg", ")", "\n", "首先", "，", "我们", "导入", "了", "模块", "pygame", ".", "font", " ", "，", "它", "让", "Pygame", "能够", "将", "文本", "渲染", "到", "屏幕", "上", "。", "方法", "__", "init", "__", "(", ")", " ", "接受", "参数", "self", " ", "，", "对象", "ai", "_", "settings", " ", "和", "screen", " ", "，", "以及", "msg", " ", "，", "其中", "msg", " ", "是", "\n", "要", "在", "按钮", "中", "显示", "的", "文本", "（", "见", "❶", "）", "。", "我们", "设置", "按钮", "的", "尺寸", "（", "见", "❷", "）", "，", "然后", "通过", "设置", "button", "_", "color", " ", "让", "按钮", "的", "rect", " ", "对象", "为亮", "绿色", "，", "并", "通过", "设置", "text", "_", "color", " ", "让", "文本", "为", "白色", "。", "\n", "在", "（", "见", "❸", "）", "处", "，", "我们", "指定", "使用", "什么", "字体", "来", "渲染", "文本", "。", "实参", "None", " ", "让", "Pygame", " ", "使用", "默认", "字体", "，", "而", "48", " ", "指定", "了", "文本", "的", "字号", "。", "为", "让", "按钮", "在", "屏幕", "上", "居中", "，", "我们", "创建", "一个", "表示", "按钮", "的", "rect", " ", "对", "\n", "象", "（", "见", "❹", "）", "，", "并", "将", "其", "center", " ", "属性", "设置", "为", "屏幕", "的", "center", " ", "属性", "。", "\n", "Pygame", "通过", "将", "你", "要", "显示", "的", "字符串", "渲染", "为", "图像", "来", "处理", "文本", "。", "在", "❺", "处", "，", "我们", "调用", "prep", "_", "msg", "(", ")", " ", "来", "处理", "这样", "的", "渲染", "。", "\n", "prep", "_", "msg", "(", ")", " ", "的", "代码", "如下", "：", "\n", "button", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "msg", "(", "self", ",", " ", "msg", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "msg", "渲染", "为", "图像", "，", "并", "使", "其", "在", "按钮", "上", "居中", "\"", "\"", "\""], ["\"", "\"", "\"", "将", "msg", "渲染", "为", "图像", "，", "并", "使", "其", "在", "按钮", "上", "居中", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "msg", "_", "image", " ", "=", " ", "self", ".", "font", ".", "render", "(", "msg", ",", " ", "True", ",", " ", "self", ".", "text", "_", "color", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "button", "_", "color", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "msg", "_", "image", "_", "rect", " ", "=", " ", "self", ".", "msg", "_", "image", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "msg", "_", "image", "_", "rect", ".", "center", " ", "=", " ", "self", ".", "rect", ".", "center", "\n", "方法", "prep", "_", "msg", "(", ")", " ", "接受", "实参", "self", " ", "以及", "要", "渲染", "为", "图像", "的", "文本", "（", "msg", " ", "）", "。", "调用", "font", ".", "render", "(", ")", " ", "将", "存储", "在", "msg", " ", "中", "的", "文本", "转换", "为", "图像", "，", "然后", "将", "该", "图像", "存储", "在", "msg", "_", "image", " ", "中", "（", "见", "\n", "❶", "）", "。", "方法", "font", ".", "render", "(", ")", " ", "还", "接受", "一个", "布尔", "实参", "，", "该", "实参", "指定", "开启", "还是", "关闭", "反锯齿", "功能", "（", "反锯齿", "让", "文本", "的", "边缘", "更", "平滑", "）", "。", "余下", "的", "两个", "实参", "分别", "是", "文本", "颜色", "和", "背景色", "。", "我们", "启用", "\n", "了", "反锯齿", "功能", "，", "并", "将", "文本", "的", "背景色", "设置", "为", "按钮", "的", "颜色", "（", "如果", "没有", "指定", "背景色", "，", "Pygame", "将", "以", "透明", "背景", "的", "方式", "渲染", "文本", "）", "。"], ["在", "❷", "处", "，", "我们", "让", "文本", "图像", "在", "按钮", "上", "居中", "：", "根据", "文本", "图像", "创建", "一个", "rect", " ", "，", "并", "将", "其", "center", " ", "属性", "设置", "为", "按钮", "的", "center", " ", "属性", "。", "\n", "最后", "，", "我们", "创建", "方法", "draw", "_", "button", "(", ")", " ", "，", "通过", "调用", "它", "可", "将", "这个", "按钮", "显示", "到", "屏幕", "上", "：", "\n", "button", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "draw", "_", "button", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "绘制", "一个", "用", "颜色", "填充", "的", "按钮", "，", "再", "绘制", "文本", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "fill", "(", "self", ".", "button", "_", "color", ",", " ", "self", ".", "rect", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "msg", "_", "image", ",", " ", "self", ".", "msg", "_", "image", "_", "rect", ")", "\n", "我们", "调用", "screen", ".", "fill", "(", ")", " ", "来", "绘制", "表示", "按钮", "的", "矩形", "，", "再", "调用", "screen", ".", "blit", "(", ")", " ", "，", "并", "向", "它", "传递", "一幅", "图像", "以及", "与", "该", "图像", "相关联", "的", "rect", " ", "对象", "，", "从而", "在", "屏幕", "上", "绘制", "文本", "图像", "。", "至", "\n", "此", "，", "Button", " ", "类", "便", "创建", "好", "了", "。", "\n", "14.1", ".", "2", "　", "在", "屏幕", "上", "绘制", "按钮", "\n", "　", "在", "屏幕", "上", "绘制", "按钮", "\n", "我们", "将", "使用", "Button", " ", "类来", "创建", "一个", "Play", "按钮", "。", "鉴于", "只", "需要", "一个", "Play", "按钮", "，", "我们", "直接", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "它", "，", "如下", "所示", "：", "\n", "alien", "_", "invasion", ".", "py"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "game", "_", "stats", " ", "import", " ", "GameStats", "\n", " ", " ", "from", " ", "button", " ", "import", " ", "Button", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "pygame", ".", "display", ".", "set", "_", "caption", "(", "\"", "Alien", " ", "Invasion", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "Play", "按钮", "\n", "❶", " ", " ", " ", " ", " ", "play", "_", "button", " ", "=", " ", "Button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "\"", "Play", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "play", "_", "button", ")", "\n", " ", " ", "run", "_", "game", "(", ")"], ["play", "_", "button", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "我们", "导入", "Button", " ", "类", "，", "并", "创建", "一个", "名为", "play", "_", "button", " ", "的", "实例", "（", "见", "❶", "）", "，", "然后", "我们", "将", "play", "_", "button", " ", "传递", "给", "update", "_", "screen", "(", ")", " ", "，", "以便", "能够", "在", "屏幕", "更新", "时", "显示", "按钮", "（", "见", "❷", "）", "。", "\n", "接下来", "，", "修改", "update", "_", "screen", "(", ")", " ", "，", "以便", "在", "游戏", "处于", "非", "活动状态", "时", "显示", "Play", "按钮", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "play", "_", "button", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "更新", "屏幕", "上", "的", "图像", "，", "并", "切换", "到", "新", "屏幕", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "如果", "游戏", "处于", "非", "活动状态", "，", "就", "绘制", "Play", "按钮", "\n", " ", " ", " ", " ", "if", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "play", "_", "button", ".", "draw", "_", "button", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")"], ["#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", "为", "让", "Play", "按钮", "位于", "其他", "所有", "屏幕", "元素", "上面", "，", "我们", "在", "绘制", "其他", "所有", "游戏", "元素", "后", "再", "绘制", "这个", "按钮", "，", "然后", "切换", "到", "新", "屏幕", "。", "如果", "你", "现在", "运行", "这个", "游戏", "，", "将", "在", "屏幕", "中央", "看到", "一个", "Play", "按钮", "，", "如", "\n", "图", "14", "-", "1", "所示", "。"], ["图", "\n", "图", "14", "-", "1", "　", "游戏", "处于", "非", "活动状态", "时", "出现", "的", "\n", "　", "游戏", "处于", "非", "活动状态", "时", "出现", "的", "Play", "按钮", "\n", "按钮", "\n", "14.1", ".", "3", "　", "开始", "游戏", "\n", "　", "开始", "游戏", "\n", "为", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "，", "需在", "game", "_", "functions", ".", "py", "中", "添加", "如下", "代码", "，", "以", "监视", "与", "这个", "按钮", "相关", "的", "鼠标", "事件", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "MOUSEBUTTONDOWN", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", " ", "=", " ", "pygame", ".", "mouse", ".", "get", "_", "pos", "(", ")"], ["❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "play", "_", "button", "(", "stats", ",", " ", "play", "_", "button", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", " ", " ", "def", " ", "check", "_", "play", "_", "button", "(", "stats", ",", " ", "play", "_", "button", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", "❹", " ", " ", " ", " ", " ", "if", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "game", "_", "active", " ", "=", " ", "True", "\n", "我们", "修改", "了", "check", "_", "events", "(", ")", " ", "的", "定义", "，", "在", "其中", "添加", "了", "形参", "stats", " ", "和", "play", "_", "button", " ", "。", "我们", "将", "使用", "stats", " ", "来", "访问", "标志", "game", "_", "active", " ", "，", "并", "使用", "play", "_", "button", " ", "来", "检查", "玩家", "是否", "\n", "单击", "了", "Play", "按钮", "。", "\n", "无论", "玩家", "单击", "屏幕", "的", "什么", "地方", "，", "Pygame", "都", "将", "检测", "到", "一个", "MOUSEBUTTONDOWN", " ", "事件", "（", "见", "❶", "）", "，", "但", "我们", "只想", "让", "这个", "游戏", "在", "玩家", "用", "鼠标", "单击", "Play", "按钮", "时", "作出", "响应", "。", "为此", "，", "我们", "使用"], ["了", "pygame", ".", "mouse", ".", "get", "_", "pos", "(", ")", " ", "，", "它", "返回", "一个", "元组", "，", "其中", "包含", "玩家", "单击", "时", "鼠标", "的", "x", " ", "和", "y", " ", "坐标", "（", "见", "❷", "）", "。", "我们", "将", "这些", "值", "传递", "给", "函数", "check", "_", "play", "_", "button", "(", ")", " ", "（", "见", "❸", "）", "，", "而", "这个", "函", "\n", "数", "使用", "collidepoint", "(", ")", " ", "检查", "鼠标", "单击", "位置", "是否", "在", "Play", "按钮", "的", "rect", " ", "内", "（", "见", "❹", "）", "。", "如果", "是", "这样", "的", "，", "我们", "就", "将", "game", "_", "active", " ", "设置", "为", "True", " ", "，", "让", "游戏", "就此", "开始", "！", "\n", "在", "alien", "_", "invasion", ".", "py", " ", "中", "调用", "check", "_", "events", "(", ")", " ", "，", "需要", "传递", "另外", "两个", "实参", "—", "—", "stats", " ", "和", "play", "_", "button", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "至此", "，", "你", "应该", "能够", "开始", "这个", "游戏", "了", "。", "游戏", "结束", "时", "，", "game", "_", "active", " ", "应为", "False", " ", "，", "并", "重新", "显示", "Play", "按钮", "。", "\n", "14.1", ".", "4", "　", "重置", "游戏", "\n", "　", "重置", "游戏"], ["14.1", ".", "4", "　", "重置", "游戏", "\n", "　", "重置", "游戏", "\n", "前面", "编写", "的", "代码", "只", "处理", "了", "玩家", "第一次", "单击", "Play", "按钮", "的", "情况", "，", "而", "没有", "处理", "游戏", "结束", "的", "情况", "，", "因为", "没有", "重置", "导致", "游戏", "结束", "的", "条件", "。", "\n", "为", "在", "玩家", "每次", "单击", "Play", "按钮", "时", "都", "重置", "游戏", "，", "需要", "重置", "统计", "信息", "、", "删除", "现有", "的", "外星人", "和", "子弹", "、", "创建", "一群", "新", "的", "外星人", "，", "并", "让", "飞船", "居中", "，", "如下", "所示", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "重置", "游戏", "统计", "信息", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "reset", "_", "stats", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "game", "_", "active", " ", "=", " ", "True", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "清空", "外星人", "列表", "和", "子弹", "列表", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ".", "empty", "(", ")"], ["#", " ", "清空", "外星人", "列表", "和", "子弹", "列表", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一群", "新", "的", "外星人", "，", "并", "让", "飞船", "居中", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "center", "_", "ship", "(", ")"], ["我们", "更新", "了", "check", "_", "play", "_", "button", "(", ")", " ", "的", "定义", "，", "使", "其", "能够", "访问", "ai", "_", "settings", " ", "、", "stats", " ", "、", "ship", " ", "、", "aliens", " ", "和", "bullets", " ", "。", "为", "重置", "在", "游戏", "期间", "发生", "了", "变化", "的", "设置", "以及", "刷新", "游戏", "的", "\n", "视觉", "元素", "，", "它", "需要", "这些", "对象", "。", "\n", "在", "❶", "处", "，", "我们", "重置", "了", "游戏", "统计", "信息", "，", "给", "玩家", "提供", "了", "三艘", "新", "飞船", "。", "接下来", "，", "我们", "将", "game", "_", "active", " ", "设置", "为", "True", " ", "（", "这样", "，", "这个", "函数", "的", "代码执行", "完毕", "后", "，", "游戏", "就", "会", "开始", "）", "，", "清空", "编", "\n", "组", "aliens", " ", "和", "bullets", " ", "（", "见", "❷", "）", "，", "创建", "一群", "新", "的", "外星人", "，", "并", "将", "飞船", "居中", "（", "见", "❸", "）", "。", "\n", "check", "_", "events", "(", ")", " ", "的", "定义", "需要", "修改", "，", "调用", "check", "_", "play", "_", "button", "(", ")", " ", "的", "代码", "亦", "如此", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":"], ["if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "MOUSEBUTTONDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", " ", "=", " ", "pygame", ".", "mouse", ".", "get", "_", "pos", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", "check", "_", "events", "(", ")", " ", "的", "定义", "需要", "形参", "aliens", " ", "，", "以便", "将", "它", "传递", "给", "check", "_", "play", "_", "button", "(", ")", " ", "。", "接下来", "，", "我们", "修改", "了", "调用", "check", "_", "play", "_", "button", "(", ")", " ", "的", "代码", "，", "以", "将", "合适", "的", "实参", "传递", "\n", "给", "它", "（", "见", "❶", "）", "。", "\n", "下面", "来", "修改", "alien", "_", "invasion", ".", "py", "中", "调用", "check", "_", "events", "(", ")", " ", "的", "代码", "，", "以", "将", "实参", "aliens", " ", "传递", "给", "它", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "，", "每当", "玩家", "单击", "Play", "按钮", "时", "，", "这个", "游戏", "都", "将", "正确", "地", "重置", "，", "让玩家", "想", "玩", "多少", "次", "就", "玩", "多少", "次", "！", "\n", "14.1", ".", "5", "　", "将", "\n", "　", "将", "Play", "按钮", "切换", "到", "非", "活动状态", "\n", "按钮", "切换", "到", "非", "活动状态", "\n", "当前", "，", "Play", "按钮", "存在", "一个", "问题", "，", "那", "就是", "即便", "Play", "按钮", "不", "可见", "，", "玩家", "单击", "其", "原来", "所在", "的", "区域", "时", "，", "游戏", "依然", "会", "作出", "响应", "。", "游戏", "开始", "后", "，", "如果", "玩家", "不", "小心", "单击", "了", "Play", "按钮", "原来", "所处", "的", "区", "\n", "域", "，", "游戏", "将", "重新", "开始", "！", "\n", "为", "修复", "这个", "问题", "，", "可", "让", "游戏", "仅", "在", "game", "_", "active", " ", "为", "False", " ", "时才", "开始", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ","], ["bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "button", "_", "clicked", " ", "=", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", "❷", " ", " ", " ", " ", " ", "if", " ", "button", "_", "clicked", " ", "and", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "重置", "游戏", "统计", "信息", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "标志", "button", "_", "clicked", " ", "的", "值", "为", "True", " ", "或", "False", " ", "（", "见", "❶", "）", "，", "仅当", "玩家", "单击", "了", "Play", "按钮", "且", "\n", "且", " ", "游戏", "当前", "处于", "非", "活动状态", "时", "，", "游戏", "才", "重新", "开始", "（", "见", "❷", "）", "。", "为", "测试", "这种", "行为", "，", "可", "开始", "新游", "\n", "戏", "，", "并", "不断", "地", "单击", "Play", "按钮", "原来", "所在", "的", "区域", "。", "如果", "一切", "都", "像", "预期", "的", "那样", "工作", "，", "单击", "Play", "按钮", "原来", "所处", "的", "区域", "应该", "没有", "任何", "影响", "。", "\n", "14.1", ".", "6", "　", "隐藏", "光标", "\n", "　", "隐藏", "光标", "\n", "为", "让玩家", "能够", "开始", "游戏", "，", "我们", "要", "让", "光标", "可见", "，", "但", "游戏", "开始", "后", "，", "光标", "只会", "添乱", "。", "为", "修复", "这种", "问题", "，", "我们", "在", "游戏", "处于", "活动状态", "时", "让", "光标", "不", "可见", "：", "\n", "game", "_", "functions", ".", "py"], ["game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "button", "_", "clicked", " ", "=", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", " ", " ", " ", " ", "if", " ", "button", "_", "clicked", " ", "and", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "隐藏", "光标", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "mouse", ".", "set", "_", "visible", "(", "False", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "通过", "向", "set", "_", "visible", "(", ")", " ", "传递", "False", " ", "，", "让", "Pygame", "在", "光标", "位于", "游戏", "窗口", "内时", "将", "其", "隐藏", "起来", "。", "\n", "游戏", "结束", "后", "，", "我们", "将", "重新", "显示", "光标", "，", "让玩家", "能够", "单击", "Play", "按钮", "来", "开始", "新", "游戏", "。", "相关", "的", "代码", "如下", "：", "\n", "game", "_", "functions", ".", "py"], ["game", "_", "functions", ".", "py", "\n", "def", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "飞船", "被", "外星人", "撞", "到", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "if", " ", "stats", ".", "ships", "_", "left", " ", ">", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "game", "_", "active", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "mouse", ".", "set", "_", "visible", "(", "True", ")", "\n", "在", "ship", "_", "hit", "(", ")", " ", "中", "，", "我们", "在", "游戏", "进入", "非", "活动状态", "后", "，", "立即", "让", "光标", "可见", "。", "关注", "这样", "的", "细节", "让", "游戏", "显得", "更", "专业", "，", "也", "让玩家", "能够", "专注", "于", "玩游戏", "而", "不是", "费力", "搞", "明白", "用户界面", "。"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "14", "-", "1", " ", "按", "\n", "按", "P", "开始", "新", "游戏", "\n", "开始", "新", "游戏", " ", "：", "鉴于", "游戏", "《", "外星人", "入侵", "》", "使用", "键盘", "来", "控制", "飞船", "，", "最好", "让玩家", "也", "能够", "通过", "按键", "来", "开始", "游戏", "。", "请", "添加", "让玩家", "在", "按", "P", "时", "开始", "游戏", "的", "代码", "。", "也许", "这样", "做", "\n", "会", "有所", "帮助", "：", "将", "check", "_", "play", "_", "button", "(", ")", " ", "的", "一些", "代码", "提取", "出来", "，", "放到", "一个", "名为", "start", "_", "game", "(", ")", " ", "的", "函数", "中", "，", "并", "在", "check", "_", "play", "_", "button", "(", ")", "\n", "和", "check", "_", "keydown", "_", "events", "(", ")", " ", "中", "调用", "这个", "函数", "。", "\n", "14", "-", "2", " ", "射击", "练习", "\n", "射击", "练习", " ", "：", "创建", "一个", "矩形", "，", "它", "在", "屏幕", "右", "边缘", "以", "固定", "的", "速度", "上下", "移动", "。", "然后", "，", "在", "屏幕", "左", "边缘", "创建", "一艘", "飞船", "，", "玩家", "可", "上下", "移动", "该", "飞船", "，", "并", "射击", "前述", "矩形", "目标", "。", "添加", "一", "\n", "个", "用于", "开始", "游戏", "的", "Play", "按钮", "，", "在", "玩家", "三次", "未", "击中目标", "时", "结束", "游戏", "，", "并", "重新", "显示", "Play", "按钮", "，", "让玩家", "能够", "通过", "单击", "该", "按钮", "来", "重新", "开始", "游戏", "。", "\n", "14.2", "　", "提高", "等级", "\n", "　", "提高", "等级", "\n", "当前", "，", "将", "整群", "外星人", "都", "消灭", "干净", "后", "，", "玩家", "将", "提高", "一个", "等级", "，", "但", "游戏", "的", "难度", "并", "没有", "变", "。", "下面", "来", "增加", "一点", "趣味性", "：", "每当", "玩家", "将", "屏幕", "上", "的", "外星人", "都", "消灭", "干净", "后", "，", "加快", "游戏", "的", "节奏", "，", "让", "游", "\n", "戏", "玩起来", "更难", "。", "\n", "14.2", ".", "1", "　", "修改", "速度", "设置", "\n", "　", "修改", "速度", "设置"], ["戏", "玩起来", "更难", "。", "\n", "14.2", ".", "1", "　", "修改", "速度", "设置", "\n", "　", "修改", "速度", "设置", "\n", "我们", "首先", "重新", "组织", "Settings", " ", "类", "，", "将", "游戏", "设置", "划分", "成", "静态", "的", "和", "动态", "的", "两组", "。", "对于", "随着", "游戏", "进行", "而", "变化", "的", "设置", "，", "我们", "还", "确保", "它们", "在", "开始", "新", "游戏", "时", "被", "重置", "。", "settings", ".", "py", "的", "方", "\n", "法", "__", "init", "__", "(", ")", " ", "如下", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "游戏", "的", "静态", "设置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "屏幕", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "width", " ", "=", " ", "1200", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "height", " ", "=", " ", "800", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bg", "_", "color", " ", "=", " ", "(", "230", ",", " ", "230", ",", " ", "230", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "飞船", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "limit", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "子弹", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "width", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "height", " ", "=", " ", "15", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "color", " ", "=", " ", "60", ",", " ", "60", ",", " ", "60"], ["self", ".", "bullet", "_", "color", " ", "=", " ", "60", ",", " ", "60", ",", " ", "60", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullets", "_", "allowed", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "外星人", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "fleet", "_", "drop", "_", "speed", " ", "=", " ", "10", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "以", "什么样", "的", "速度", "加快", "游戏", "节奏", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "speedup", "_", "scale", " ", "=", " ", "1.1", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "initialize", "_", "dynamic", "_", "settings", "(", ")", "\n", "我们", "依然", "在", "__", "init", "__", "(", ")", " ", "中", "初始化", "静态", "设置", "。", "在", "❶", "处", "，", "我们", "添加", "了", "设置", "speedup", "_", "scale", " ", "，", "用于", "控制", "游戏", "节奏", "的", "加快速度", "：", "2", "表示", "玩家", "每", "提高", "一个", "等级", "，", "游戏", "的", "节奏", "就", "翻倍", "；", "1", "\n", "表示", "游戏", "节奏", "始终不变", "。", "将", "其", "设置", "为", "1.1", "能够", "将", "游戏", "节奏", "提高", "到", "够快", "，", "让", "游戏", "既有", "难度", "，", "又", "并非", "不可", "完成", "。", "最后", "，", "我们", "调用", "initialize", "_", "dynamic", "_", "settings", "(", ")", " ", "，", "以", "初始化", "随", "\n", "游戏", "进行", "而", "变化", "的", "属性", "（", "见", "❷", "）", "。", "\n", "initialize", "_", "dynamic", "_", "settings", "(", ")", " ", "的", "代码", "如下", "：", "\n", "settings", ".", "py"], ["initialize", "_", "dynamic", "_", "settings", "(", ")", " ", "的", "代码", "如下", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "initialize", "_", "dynamic", "_", "settings", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "随", "游戏", "进行", "而", "变化", "的", "设置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "speed", "_", "factor", " ", "=", " ", "1.5", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "speed", "_", "factor", " ", "=", " ", "3", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "speed", "_", "factor", " ", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "fleet", "_", "direction", "为", "1", "表示", "向", "右", "；", "为", "-", "1", "表示", "向", "左", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "fleet", "_", "direction", " ", "=", " ", "1", "\n", "这个", "方法", "设置", "了", "飞船", "、", "子弹", "和", "外星人", "的", "初始", "速度", "。", "随", "游戏", "的", "进行", "，", "我们", "将", "提高", "这些", "速度", "，", "而", "每当", "玩家", "开始", "新", "游戏", "时", "，", "都", "将", "重置", "这些", "速度", "。", "在", "这个", "方法", "中", "，", "我们", "还", "设置", "\n", "了", "fleet", "_", "direction", " ", "，", "使得", "游戏", "刚", "开始", "时", "，", "外星人", "总是", "向", "右", "移动", "。", "每当", "玩家", "提高", "一个", "等级", "时", "，", "我们", "都", "使用", "increase", "_", "speed", "(", ")", " ", "来", "提高", "飞船", "、", "子弹", "和", "外星人", "的", "速度", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "increase", "_", "speed", "(", "self", ")", ":"], ["settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "increase", "_", "speed", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "提高", "速度", "设置", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale", "\n", "为", "提高", "这些", "游戏", "元素", "的", "速度", "，", "我们", "将", "每个", "速度", "设置", "都", "乘以", "speedup", "_", "scale", " ", "的", "值", "。", "\n", "在", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "中", "，", "我们", "在", "整群", "外星人", "都", "被", "消灭", "后", "调用", "increase", "_", "speed", "(", ")", " ", "来", "加快", "游戏", "的", "节奏", "，", "再", "创建", "一群", "新", "的", "外星人", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "if", " ", "len", "(", "aliens", ")", " ", "=", "=", " ", "0", ":"], ["--", "snip", "--", "\n", " ", " ", " ", " ", "if", " ", "len", "(", "aliens", ")", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "删除", "现有", "的", "子弹", "，", "加快", "游戏", "节奏", "，", "并", "创建", "一群", "新", "的", "外星人", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ai", "_", "settings", ".", "increase", "_", "speed", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", "通过", "修改", "速度", "设置", "ship", "_", "speed", "_", "factor", " ", "、", "alien", "_", "speed", "_", "factor", " ", "和", "bullet", "_", "speed", "_", "factor", " ", "的", "值", "，", "足以", "加快", "整个", "游戏", "的", "节奏", "！", "\n", "14.2", ".", "2", "　", "重置", "速度", "\n", "　", "重置", "速度", "\n", "每当", "玩家", "开始", "新", "游戏", "时", "，", "我们", "都", "需要", "将", "发生", "了", "变化", "的", "设置", "重置", "为", "初始值", "，", "否则", "新", "游戏", "开始", "时", "，", "速度", "设置", "将", "是", "前", "一次", "游戏", "增加", "了", "的", "值", "："], ["game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "button", "_", "clicked", " ", "=", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", " ", " ", " ", " ", "if", " ", "button", "_", "clicked", " ", "and", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "重置", "游戏", "设置", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "ai", "_", "settings", ".", "initialize", "_", "dynamic", "_", "settings", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "隐藏", "光标", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "pygame", ".", "mouse", ".", "set", "_", "visible", "(", "False", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "，", "游戏", "《", "外星人", "入侵", "》", "玩起来", "更", "有趣", "，", "也", "更", "有", "挑战性", "。", "每当", "玩家", "将", "屏幕", "上", "的", "外星人", "消灭", "干净", "后", "，", "游戏", "都", "将", "加快", "节奏", "，", "因此", "难度", "会", "更", "大些", "。", "如果", "游戏", "的", "难度", "提高", "得太快", "，", "可降"], ["低", "settings", ".", "speedup", "_", "scale", " ", "的", "值", "；", "如果", "游戏", "的", "挑战性", "不足", "，", "可", "稍微", "提高", "这个", "设置", "的", "值", "。", "找出", "这个", "设置", "的", "最佳值", "，", "让", "难度", "的", "提高", "速度", "相对", "合理", "：", "一", "开始", "的", "几群", "外星人", "很", "容易", "\n", "消灭", "干净", "；", "接下来", "的", "几群", "消灭", "起来", "有", "一定", "难度", "，", "但", "也", "不是", "不", "可能", "；", "而", "要", "将", "更", "靠", "后", "的", "外星人", "群", "消灭", "干净", "几乎", "不", "可能", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "14", "-", "3", " ", "有", "一定", "难度", "的", "射击", "练习", "\n", "有", "一定", "难度", "的", "射击", "练习", " ", "：", "以", "你", "为", "完成", "练习", "14", "-", "2", "而", "做", "的", "工作", "为", "基础", "，", "让", "标靶", "的", "移动", "速度", "随", "游戏", "进行", "而", "加快", "，", "并", "在", "玩家", "单击", "Play", "按钮", "时", "将", "其", "重置", "为", "初始值", "。", "\n", "14.3", "　", "记分", "\n", "　", "记分", "\n", "下面", "来", "实现", "一个", "记分", "系统", "，", "以", "实时", "地", "跟踪", "玩家", "的", "得分", "，", "并", "显示", "最高", "得分", "、", "当前", "等级", "和", "余下", "的", "飞船", "数", "。", "\n", "得分", "是", "游戏", "的", "一项", "统计", "信息", "，", "因此", "我们", "在", "GameStats", " ", "中", "添加", "一个", "score", " ", "属性", "：", "\n", "game", "_", "stats", ".", "py", "\n", "class", " ", "GameStats", "(", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "def", " ", "reset", "_", "stats", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "随", "游戏", "进行", "可能", "变化", "的", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", "_", "left", " ", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "limit"], ["self", ".", "score", " ", "=", " ", "0", "\n", "为", "在", "每次", "开始", "游戏", "时", "都", "重置", "得分", "，", "我们", "在", "reset", "_", "stats", "(", ")", " ", "而", "不是", "__", "init", "__", "(", ")", " ", "中", "初始化", "score", " ", "。", "\n", "14.3", ".", "1", "　", "显示", "得分", "\n", "　", "显示", "得分", "\n", "为", "在", "屏幕", "上", "显示", "得分", "，", "我们", "首先", "创建", "一个", "新类", "Scoreboard", " ", "。", "就", "当前", "而言", "，", "这个", "类", "只", "显示", "当前", "得分", "，", "但", "后面", "我们", "也", "将", "使用", "它", "来", "显示", "最高", "得分", "、", "等级", "和", "余下", "的", "飞船", "数", "。", "下面", "是", "这个", "\n", "类", "的", "前半部", "分", "，", "它", "被", "保存", "为", "文件", "scoreboard", ".", "py", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", "import", " ", "pygame", ".", "font", "\n", " ", " ", "class", " ", "Scoreboard", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "得分", "信息", "的", "类", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "显示", "得分", "涉及", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", " ", "=", " ", "screen", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", "_", "rect", " ", "=", " ", "screen", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings"], ["self", ".", "ai", "_", "settings", " ", "=", " ", "ai", "_", "settings", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "stats", " ", "=", " ", "stats", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "显示", "得分", "信息", "时", "使用", "的", "字体", "设置", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "text", "_", "color", " ", "=", " ", "(", "30", ",", " ", "30", ",", " ", "30", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "font", " ", "=", " ", "pygame", ".", "font", ".", "SysFont", "(", "None", ",", " ", "48", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "准备", "初始", "得分", "图像", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "score", "(", ")", "\n", "由于", "Scoreboard", " ", "在", "屏幕", "上", "显示", "文本", "，", "因此", "我们", "首先", "导入", "模块", "pygame", ".", "font", " ", "。", "接下来", "，", "我们", "在", "__", "init", "__", "(", ")", " ", "中", "包含", "形参", "ai", "_", "settings", " ", "、", "screen", " ", "和", "stats", " ", "，", "让", "它", "能够", "报告", "\n", "我们", "跟踪", "的", "值", "（", "见", "❶", "）", "。", "然后", "，", "我们", "设置", "文本", "颜色", "（", "见", "❷", "）", "并", "实例", "化", "一个", "字体", "对象", "（", "见", "❸", "）", "。", "\n", "为", "将要", "显示", "的", "文本", "转换", "为", "图像", "，", "我们", "调用", "了", "prep", "_", "score", "(", ")", " ", "（", "见", "❹", "）", "，", "其", "定义", "如下", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "得分", "转换", "为", "一幅", "渲染", "的", "图像", "\"", "\"", "\""], ["\"", "\"", "\"", "将", "得分", "转换", "为", "一幅", "渲染", "的", "图像", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "score", "_", "str", " ", "=", " ", "str", "(", "self", ".", "stats", ".", "score", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "image", " ", "=", " ", "self", ".", "font", ".", "render", "(", "score", "_", "str", ",", " ", "True", ",", " ", "self", ".", "text", "_", "color", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "得分", "放在", "屏幕", "右上角", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "rect", " ", "=", " ", "self", ".", "score", "_", "image", ".", "get", "_", "rect", "(", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "rect", ".", "right", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "right", " ", "-", " ", "20", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "rect", ".", "top", " ", "=", " ", "20", "\n", "在", "prep", "_", "score", "(", ")", " ", "中", "，", "我们", "首先", "将", "数字", "值", "stats", ".", "score", " ", "转换", "为", "字符串", "（", "见", "❶", "）", "，", "再", "将", "这个", "字符串", "传递", "给", "创建", "图像", "的", "render", "(", ")", " ", "（", "见", "❷", "）", "。", "为", "在", "屏幕", "上", "清晰", "地", "显示", "得分", "，", "我们", "\n", "向", "render", "(", ")", " ", "传递", "了", "屏幕", "背景色", "，", "以及", "文本", "颜色", "。"], ["向", "render", "(", ")", " ", "传递", "了", "屏幕", "背景色", "，", "以及", "文本", "颜色", "。", "\n", "我们", "将", "得分", "放在", "屏幕", "右上角", "，", "并", "在", "得分", "增大", "导致", "这个", "数字", "更", "宽", "时", "让", "它", "向", "左", "延伸", "。", "为", "确保", "得分", "始终", "锚定", "在", "屏幕", "右边", "，", "我们", "创建", "了", "一个", "名为", "score", "_", "rect", " ", "的", "rect", " ", "（", "见", "❸", "）", "，", "让", "其右", "\n", "边缘", "与", "屏幕", "右", "边缘", "相距", "20", "像素", "（", "见", "❹", "）", "，", "并", "让", "其", "上", "边缘", "与", "屏幕", "上", "边缘", "也", "相距", "20", "像素", "（", "见", "❺", "）", "。", "\n", "最后", "，", "我们", "创建", "方法", "show", "_", "score", "(", ")", " ", "，", "用于", "显示", "渲染", "好", "的", "得分", "图像", "：", "\n", "scoreboard", ".", "py"], ["def", " ", "show", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "屏幕", "上", "显示", "得分", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "score", "_", "image", ",", " ", "self", ".", "score", "_", "rect", ")", "\n", "这个", "方法", "将", "得分", "图像", "显示", "到", "屏幕", "上", "，", "并", "将", "其", "放在", "score", "_", "rect", " ", "指定", "的", "位置", "。", "\n", "14.3", ".", "2", "　", "创建", "记分牌", "\n", "　", "创建", "记分牌", "\n", "为", "显示", "得分", "，", "我们", "在", "alien", "_", "invasion", ".", "py", "中", "创建", "一个", "Scoreboard", " ", "实例", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", "game", "_", "stats", " ", "import", " ", "GameStats", "\n", " ", " ", "from", " ", "scoreboard", " ", "import", " ", "Scoreboard", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "run", "_", "game", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "存储", "游戏", "统计", "信息", "的", "实例", "，", "并", "创建", "记分牌", "\n", " ", " ", " ", " ", " ", " ", "stats", " ", "=", " ", "GameStats", "(", "ai", "_", "settings", ")", "\n", "❶", " ", " ", " ", " ", " ", "sb", " ", "=", " ", "Scoreboard", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环"], ["--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ",", " ", "play", "_", "button", ")", "\n", " ", " ", "run", "_", "game", "(", ")", "\n", "我们", "导入", "新创建", "的", "类", "Scoreboard", " ", "，", "并", "在", "创建", "实例", "stats", " ", "后", "创建", "了", "一个", "名为", "sb", " ", "的", "Scoreboard", " ", "实例", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "将", "sb", " ", "传递", "给", "update", "_", "screen", "(", ")", " ", "，", "让", "它", "能够", "在", "\n", "屏幕", "上", "显示", "得分", "（", "见", "❷", "）", "。", "\n", "为", "显示", "得分", "，", "将", "update", "_", "screen", "(", ")", " ", "修改", "成", "下面", "这样", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "screen", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "play", "_", "button", ")", ":", "\n", " ", " ", " ", " ", "_--", "snip", "--_", "\n", " ", " ", " ", " ", "#", " ", "显示", "得分", "\n", " ", " ", " ", " ", "sb", ".", "show", "_", "score", "(", ")"], ["_--", "snip", "--_", "\n", " ", " ", " ", " ", "#", " ", "显示", "得分", "\n", " ", " ", " ", " ", "sb", ".", "show", "_", "score", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "如果", "游戏", "处于", "非", "活动状态", "，", "就", "显示", "Play", "按钮", "\n", " ", " ", " ", " ", "if", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "play", "_", "button", ".", "draw", "_", "button", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "让", "最近", "绘制", "的", "屏幕", "可见", "\n", " ", " ", " ", " ", "pygame", ".", "display", ".", "flip", "(", ")", "\n", "我们", "在", "update", "_", "screen", "(", ")", " ", "的", "形参", "列表", "中", "添加", "了", "sb", " ", "，", "并", "在", "绘制", "Play", "按钮", "前", "调用", "show", "_", "score", " ", "。", "\n", "如果", "现在", "运行", "这个", "游戏", "，", "你", "将", "在", "屏幕", "右上角", "看到", "0", "（", "当前", "，", "我们", "只想", "在", "进一步", "开发", "记分", "系统", "前", "确认", "得分", "出现", "在", "正确", "的", "地方", "）", "。", "图", "14", "-", "2", "显示", "了", "游戏", "开始", "前", "的", "得分", "。", "\n", "图", "\n", "图", "14", "-", "2", "　", "得分", "出现", "在", "屏幕", "右上角", "\n", "　", "得分", "出现", "在", "屏幕", "右上角", "\n", "下面", "来", "指定", "每个", "外星人", "值", "多少", "点", "！", "\n", "14.3", ".", "3", "　", "在", "外星人", "被", "消灭", "时", "更新", "得分", "\n", "　", "在", "外星人", "被", "消灭", "时", "更新", "得分", "\n", "为", "在", "屏幕", "上", "实时", "地", "显示", "得分", "，", "每当", "有", "外星人", "被", "击中", "时", "，", "我们", "都", "更新", "stats", ".", "score", " ", "的", "值", "，", "再", "调用", "prep", "_", "score", "(", ")", " ", "更新", "得分", "图像", "。", "但", "在此之前", "，", "我们", "需要", "指定", "玩家", "每", "击落", "一个", "外", "\n", "星人", "都", "将", "得到", "多少", "个点", "："], ["settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "initialize", "_", "dynamic", "_", "settings", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "记分", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "points", " ", "=", " ", "50", "\n", "随着", "游戏", "的", "进行", "，", "我们", "将", "提高", "每个", "外星人", "值", "的", "点数", "。", "为", "确保", "每次", "开始", "新", "游戏", "时", "这个", "值", "都", "会", "被", "重置", "，", "我们", "在", "initialize", "_", "dynamic", "_", "settings", "(", ")", " ", "中", "设置", "它", "。", "\n", "在", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "中", "，", "每当", "有", "外星人", "被", "击落", "时", "，", "都", "更新", "得分", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "子弹", "和", "外星人", "发生", "碰撞", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "删除", "发生", "碰撞", "的", "子弹", "和", "外星人", "\n", " ", " ", " ", " ", " ", " ", "collisions", " ", "=", " ", "pygame", ".", "sprite", ".", "groupcollide", "(", "bullets", ",", " ", "aliens", ",", " ", "True", ",", " ", "True", ")"], ["if", " ", "collisions", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "score", " ", "+", "=", " ", "ai", "_", "settings", ".", "alien", "_", "points", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "更新", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "的", "定义", "，", "在", "其中", "包含", "了", "形参", "stats", " ", "和", "sb", " ", "，", "让", "它", "能够", "更新", "得分", "和", "记分牌", "。", "有", "子弹", "撞", "到", "外星人", "时", "，", "Pygame", "返回", "一个", "字典", "\n", "（", "collisions", " ", "）", "。", "我们", "检查", "这个", "字典", "是否", "存在", "，", "如果", "存在", "，", "就", "将", "得分", "加上", "一个", "外星人", "值", "的", "点数", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "调用", "prep", "_", "score", "(", ")", " ", "来", "创建", "一幅", "显示", "最新", "得分", "的", "新图", "\n", "像", "。", "\n", "我们", "需要", "修改", "update", "_", "bullets", "(", ")", " ", "，", "确保", "在", "函数", "之间", "传递", "合适", "的", "实参", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "更新", "子弹", "的", "位置", "，", "并", "删除", "已", "消失", "的", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["\"", "\"", "\"", "更新", "子弹", "的", "位置", "，", "并", "删除", "已", "消失", "的", "子弹", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", "\n", "在", "update", "_", "bullets", "(", ")", " ", "的", "定义", "中", "，", "需要", "新增", "形参", "stats", " ", "和", "sb", " ", "，", "而", "调用", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "时", "，", "也", "需要", "传递", "实参", "stats", " ", "和", "sb", " ", "。", "\n", "我们", "还", "需要", "修改", "主", "while", " ", "循环", "中", "调用", "update", "_", "bullets", "(", ")", " ", "的", "代码", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")"], ["ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "调用", "update", "_", "bullets", "(", ")", " ", "时", "，", "需要", "传递", "实参", "stats", " ", "和", "sb", " ", "。", "\n", "如果", "你", "现在", "运行", "这个", "游戏", "，", "得分", "将", "不断", "增加", "！", "\n", "14.3", ".", "4", "　", "将", "消灭", "的", "每个", "外星人", "的", "点数", "都", "计入", "得分", "\n", "　", "将", "消灭", "的", "每个", "外星人", "的", "点数", "都", "计入", "得分", "\n", "当前", "，", "我们", "的", "代码", "可能", "遗漏", "了", "一些", "被", "消灭", "的", "外星人", "。", "例如", "，", "如果", "在", "一次", "循环", "中有", "两颗", "子弹", "射中", "了", "外星人", "，", "或者", "因", "子弹", "更", "宽", "而", "同时", "击中", "了", "多个", "外星人", "，", "玩家", "将", "只能", "得到", "一个", "被", "消灭", "\n", "的", "外星人", "的", "点数", "。", "为", "修复", "这种", "问题", "，", "我们", "来", "调整", "检测", "子弹", "和", "外星人", "碰撞", "的", "方式", "。", "\n", "在", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "中", "，", "与", "外星人", "碰撞", "的", "子弹", "都", "是", "字典", "collisions", " ", "中", "的", "一个", "键", "；", "而", "与", "每颗", "子弹", "相关", "的", "值", "都", "是", "一个", "列表", "，", "其中", "包含", "该", "子弹", "撞", "到", "的", "外星", "\n", "人", "。", "我们", "遍历", "字典", "collisions", " ", "，", "确保", "将", "消灭", "的", "每个", "外星人", "的", "点数", "都", "记入", "得分", "："], ["人", "。", "我们", "遍历", "字典", "collisions", " ", "，", "确保", "将", "消灭", "的", "每个", "外星人", "的", "点数", "都", "记入", "得分", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "collisions", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "aliens", " ", "in", " ", "collisions", ".", "values", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "score", " ", "+", "=", " ", "ai", "_", "settings", ".", "alien", "_", "points", " ", "*", " ", "len", "(", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "如果", "字典", "collisions", " ", "存在", "，", "我们", "就", "遍历", "其中", "的", "所有", "值", "。", "别忘了", "，", "每个", "值", "都", "是", "一个", "列表", "，", "包含", "被", "同", "一颗", "子弹", "击中", "的", "所有", "外星人", "。", "对于", "每个", "列表", "，", "都", "将", "一个", "外星人", "的", "点数", "乘以", "其中"], ["包含", "的", "外星人", "数量", "，", "并", "将", "结果", "加入", "到", "当前", "得分", "中", "。", "为", "测试", "这", "一点", "，", "请", "将", "子弹", "宽度", "改为", "300", "像素", "，", "并", "核实", "你", "得到", "了", "更", "宽", "的", "子弹", "击中", "的", "每个", "外星人", "的", "点数", "，", "再", "将", "子弹", "宽度", "恢复", "到", "正常", "\n", "值", "。", "\n", "14.3", ".", "5", "　", "提高", "点数", "\n", "　", "提高", "点数", "\n", "玩家", "每", "提高", "一个", "等级", "，", "游戏", "都", "变得", "更难", "，", "因此", "处于", "较", "高", "的", "等级", "时", "，", "外星人", "的", "点数", "应", "更", "高", "。", "为", "实现", "这种", "功能", "，", "我们", "添加", "一些", "代码", "，", "以", "在", "游戏", "节奏", "加快", "时", "提高", "点数", "：", "\n", "settings", ".", "py"], ["class", " ", "Settings", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "存储", "游戏", "《", "外星人", "入侵", "》", "的", "所有", "设置", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "加快", "游戏", "节奏", "的", "速度", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "speedup", "_", "scale", " ", "=", " ", "1.1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "外星人", "点数", "的", "提高", "速度", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "scale", " ", "=", " ", "1.5", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "initialize", "_", "dynamic", "_", "settings", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "increase", "_", "speed", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "提高", "速度", "设置", "和", "外星人", "点数", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ship", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "bullet", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "speed", "_", "factor", " ", "*", "=", " ", "self", ".", "speedup", "_", "scale"], ["❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "points", " ", "=", " ", "int", "(", "self", ".", "alien", "_", "points", " ", "*", " ", "self", ".", "score", "_", "scale", ")", "\n", "我们", "定义", "了", "点数", "提高", "的", "速度", "，", "并", "称之为", "score", "_", "scale", " ", "（", "见", "❶", "）", "。", "很小", "的", "节奏", "加快速度", "（", "1.1", "）", "让", "游戏", "很快", "就", "变得", "极具", "挑战性", "，", "但", "为", "让", "记分", "发生", "显著", "的", "变化", "，", "需要", "将", "点数", "的", "提", "高速", "\n", "度", "设置", "为", "更", "大", "的", "值", "（", "1.5", "）", "。", "现在", "，", "我们", "在", "加快", "游戏", "节奏", "的", "同时", "，", "提高", "了", "每个", "外星人", "的", "点数", "。", "为", "让", "点数", "为", "整数", "，", "我们", "使用", "了", "函数", "int", "(", ")", " ", "。", "\n", "为", "显示", "外星人", "的", "点数", "，", "我们", "在", "Settings", " ", "的", "方法", "increase", "_", "speed", "(", ")", " ", "中", "添加", "了", "一条", "print", " ", "语句", "：", "\n", "settings", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "increase", "_", "speed", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "alien", "_", "points", " ", "=", " ", "int", "(", "self", ".", "alien", "_", "points", " ", "*", " ", "self", ".", "score", "_", "scale", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "self", ".", "alien", "_", "points", ")", "\n", "现在", "每当", "提高", "一个", "等级", "时", "，", "你", "都", "会", "在", "终端", "窗口", "看到", "新", "的", "点", "数值", "。", "\n", "注意"], ["现在", "每当", "提高", "一个", "等级", "时", "，", "你", "都", "会", "在", "终端", "窗口", "看到", "新", "的", "点", "数值", "。", "\n", "注意", "\n", "注意", " ", "　", "确认", "点数", "在", "不断", "增加", "后", "，", "一定", "要", "删除", "这条", "print", " ", "语句", "，", "否则", "它", "可能", "会", "影响", "游戏", "的", "性能", "以及", "分散", "玩家", "的", "注意力", "。", "\n", "14.3", ".", "6", "　", "将", "得分", "圆整", "\n", "　", "将", "得分", "圆整", "\n", "大多数", "街机", "风格", "的", "射击", "游戏", "都", "将", "得分", "显示", "为", "10", "的", "整数倍", "，", "下面", "让", "我们", "的", "记分", "系统", "遵循", "这个", "原则", "。", "我们", "还", "将", "设置", "得分", "的", "格式", "，", "在", "大", "数字", "中", "添加", "用", "逗号", "表示", "的", "千位", "分隔符", "。", "我们", "\n", "在", "Scoreboard", " ", "中", "执行", "这种", "修改", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "得分", "转换", "为", "渲染", "的", "图像", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "rounded", "_", "score", " ", "=", " ", "int", "(", "round", "(", "self", ".", "stats", ".", "score", ",", " ", "-", "1", ")", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "score", "_", "str", " ", "=", " ", "\"", "{", ":", ",", "}", "\"", ".", "format", "(", "rounded", "_", "score", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", "_", "image", " ", "=", " ", "self", ".", "font", ".", "render", "(", "score", "_", "str", ",", " ", "True", ",", " ", "self", ".", "text", "_", "color", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ai", "_", "settings", ".", "bg", "_", "color", ")"], ["self", ".", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "函数", "round", "(", ")", " ", "通常", "让", "小数", "精确", "到", "小数点", "后", "多少", "位", "，", "其中", "小数位", "数是", "由", "第二个", "实参", "指定", "的", "。", "然而", "，", "如果", "将", "第二个", "实参", "指定", "为", "负数", "，", "round", "(", ")", " ", "将", "圆整", "到", "最近", "的", "10", "、", "100", "、", "1000", "等整", "\n", "数倍", "。", "❶", "处", "的", "代码", "让", "Python", "将", "stats", ".", "score", " ", "的", "值", "圆整", "到", "最近", "的", "10", "的", "整数倍", "，", "并", "将", "结果", "存储", "到", "rounded", "_", "score", " ", "中", "。", "\n", "注意", "\n", "注意", " ", "　", "在", "Python", " ", "2.7", "中", "，", "round", "(", ")", " ", "总是", "返回", "一个", "小", "数值", "，", "因此", "我们", "使用", "int", "(", ")", " ", "来", "确保", "报告", "的", "得", "分为", "整数", "。", "如果", "你", "使用", "的", "是", "Python", " ", "3", "，", "可", "省略", "对", "int", "(", ")", " ", "的", "调用", "。", "\n", "❷", "处", "使用", "了", "一个", "字符串", "格式", "设置", "指令", "，", "它", "让", "Python", "将", "数值", "转换", "为", "字符串", "时", "在", "其中", "插入", "逗号", "，", "例如", "，", "输出", "1", ",", "000", ",", "000", " ", "而", "不是", "1000000", " ", "。", "如果", "你", "现在", "运行", "这个", "游戏", "，", "看到", "的", "将", "是", "10", "\n", "的", "整数倍", "的", "整洁", "得分", "，", "即便", "得分", "很", "高", "亦", "如此", "，", "如图", "14", "-", "3", "所示", "。", "\n", "图", "\n", "图", "14", "-", "3", "　", "得", "分为", "\n", "　", "得", "分为", "10", "的", "整数倍", "，", "并", "将", "逗号", "用作", "千分", "位", "分隔符", "\n", "的", "整数倍", "，", "并", "将", "逗号", "用作", "千分", "位", "分隔符", "\n", "14.3", ".", "7", "　", "最高", "得分", "\n", "　", "最高", "得分"], ["每个", "玩家", "都", "想", "超过", "游戏", "的", "最高", "得分", "记录", "。", "下面", "来", "跟踪", "并", "显示", "最高", "得分", "，", "给", "玩家", "提供", "要", "超越", "的", "目标", "。", "我们", "将", "最高", "得分", "存储", "在", "GameStats", " ", "中", "：", "\n", "game", "_", "stats", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "在", "任何", "情况", "下", "都", "不应", "重置", "最高", "得分", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "high", "_", "score", " ", "=", " ", "0", "\n", "鉴于", "在", "任何", "情况", "下", "都", "不会", "重置", "最高", "得分", "，", "我们", "在", "__", "init", "__", "(", ")", " ", "中", "而", "不是", "reset", "_", "stats", "(", ")", " ", "中", "初始化", "high", "_", "score", " ", "。", "\n", "下面", "来", "修改", "Scoreboard", " ", "以", "显示", "最高", "得分", "。", "先", "来", "修改", "方法", "__", "init", "__", "(", ")", " ", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "准备", "包含", "最高", "得分", "和", "当前", "得分", "的", "图像", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "score", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "high", "_", "score", "(", ")"], ["❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "high", "_", "score", "(", ")", "\n", "最高", "得分", "将", "与", "当前", "得分", "分开", "显示", "，", "因此", "我们", "需要", "编写", "一个", "新", "方法", "prep", "_", "high", "_", "score", "(", ")", " ", "，", "用于", "准备", "包含", "最高", "得分", "的", "图像", "（", "见", "❶", "）", "。", "\n", "方法", "prep", "_", "high", "_", "score", "(", ")", " ", "的", "代码", "如下", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "high", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "最高", "得分", "转换", "为", "渲染", "的", "图像", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", "_", "score", " ", "=", " ", "int", "(", "round", "(", "self", ".", "stats", ".", "high", "_", "score", ",", " ", "-", "1", ")", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", "_", "score", "_", "str", " ", "=", " ", "\"", "{", ":", ",", "}", "\"", ".", "format", "(", "high", "_", "score", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "high", "_", "score", "_", "image", " ", "=", " ", "self", ".", "font", ".", "render", "(", "high", "_", "score", "_", "str", ",", " ", "True", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "text", "_", "color", ",", " ", "self", ".", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", "将", "最高", "得分", "放在", "屏幕", "顶部", "中央"], ["#", "将", "最高", "得分", "放在", "屏幕", "顶部", "中央", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "high", "_", "score", "_", "rect", " ", "=", " ", "self", ".", "high", "_", "score", "_", "image", ".", "get", "_", "rect", "(", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "high", "_", "score", "_", "rect", ".", "centerx", " ", "=", " ", "self", ".", "screen", "_", "rect", ".", "centerx", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "high", "_", "score", "_", "rect", ".", "top", " ", "=", " ", "self", ".", "score", "_", "rect", ".", "top", "\n", "我们", "将", "最高", "得分", "圆整", "到", "最近", "的", "10", "的", "整数倍", "（", "见", "❶", "）", "，", "并", "添加", "了", "用", "逗号", "表示", "的", "千分", "位", "分隔符", "（", "见", "❷", "）", "。", "然后", "，", "我们", "根据", "最高", "得分", "生成", "一幅", "图像", "（", "见", "❸", "）", "，", "使", "其", "水平", "居中", "（", "见", "❹", "）", "，", "\n", "并", "将", "其", "top", " ", "属性", "设置", "为", "当前", "得分", "图像", "的", "top", " ", "属性", "（", "见", "❺", "）", "。", "\n", "现在", "，", "方法", "show", "_", "score", "(", ")", " ", "需要", "在", "屏幕", "右上角", "显示", "当前", "得分", "，", "并", "在", "屏幕", "顶部", "中央", "显示", "最高", "得分", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "show", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "屏幕", "上", "显示", "当前", "得分", "和", "最高", "得分", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "score", "_", "image", ",", " ", "self", ".", "score", "_", "rect", ")"], ["self", ".", "screen", ".", "blit", "(", "self", ".", "high", "_", "score", "_", "image", ",", " ", "self", ".", "high", "_", "score", "_", "rect", ")", "\n", "为", "检查", "是否", "诞生", "了", "新", "的", "最高", "得分", "，", "我们", "在", "game", "_", "functions", ".", "py", "中", "添加", "一个", "新", "函数", "check", "_", "high", "_", "score", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "high", "_", "score", "(", "stats", ",", " ", "sb", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "检查", "是否", "诞生", "了", "新", "的", "最高", "得分", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "score", " ", ">", " ", "stats", ".", "high", "_", "score", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "high", "_", "score", " ", "=", " ", "stats", ".", "score", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "high", "_", "score", "(", ")", "\n", "函数", "check", "_", "high", "_", "score", "(", ")", " ", "包含", "两个", "形参", "：", "stats", " ", "和", "sb", " ", "。", "它", "使用", "stats", " ", "来", "比较", "当前", "得分", "和", "最高", "得分", "，", "并", "在", "必要", "时", "使用", "sb", " ", "来", "修改", "最高", "得分", "图像", "。", "在", "❶", "处", "，", "我们", "比较", "当前", "得分", "\n", "和", "最高", "得分", "，", "如果", "当前", "得分", "更高", "，", "就", "更新", "high", "_", "score", " ", "的", "值", "，", "并", "调用", "prep", "_", "high", "_", "score", "(", ")", " ", "来", "更新", "包含", "最高", "得分", "的", "图像", "。"], ["在", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "中", "，", "每当", "有", "外星人", "被", "消灭", "，", "都", "需要", "在", "更新", "得分", "后", "调用", "check", "_", "high", "_", "score", "(", ")", " ", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "if", " ", "collisions", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "aliens", " ", "in", " ", "collisions", ".", "values", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "score", " ", "+", "=", " ", "ai", "_", "settings", ".", "alien", "_", "points", " ", "*", " ", "len", "(", "aliens", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "high", "_", "score", "(", "stats", ",", " ", "sb", ")", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "字典", "collisions", " ", "存在", "时", "，", "我们", "根据", "消灭", "了", "多少", "外星人", "来", "更新", "得分", "，", "再", "调用", "check", "_", "high", "_", "score", "(", ")", " ", "。"], ["第一次", "玩", "这款", "游戏", "时", "，", "当前", "得分", "就是", "最高", "得分", "，", "因此", "两个", "地方", "显示", "的", "都", "是", "当前", "得分", "。", "但", "再次", "开始", "这个", "游戏", "时", "，", "最高", "得分", "出现", "在", "中央", "，", "而", "当前", "得分", "出现", "在", "右边", "，", "如图", "14", "-", "4", "所示", "。"], ["图", "\n", "图", "14", "-", "4", "　", "最高", "得分", "显示", "在", "屏幕", "顶部", "中央", "\n", "　", "最高", "得分", "显示", "在", "屏幕", "顶部", "中央", "\n", "14.3", ".", "8", "　", "显示", "等级", "\n", "　", "显示", "等级", "\n", "为", "在", "游戏", "中", "显示", "玩家", "的", "等级", "，", "首先", "需要", "在", "GameStats", " ", "中", "添加", "一个", "表示", "当前", "等级", "的", "属性", "。", "为", "确保", "每次", "开始", "新", "游戏", "时", "都", "重置", "等级", "，", "在", "reset", "_", "stats", "(", ")", " ", "中", "初始化", "它", "：", "\n", "game", "_", "stats", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "reset", "_", "stats", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "随", "游戏", "进行", "可能", "变化", "的", "统计", "信息", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", "_", "left", " ", "=", " ", "self", ".", "ai", "_", "settings", ".", "ship", "_", "limit", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "score", " ", "=", " ", "0", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "level", " ", "=", " ", "1", "\n", "为", "让", "Scoreboard", " ", "能够", "在", "当前", "得分", "下方", "显示", "当前", "等级", "，", "我们", "在", "__", "init", "__", "(", ")", " ", "中", "调用", "了", "一个", "新", "方法", "prep", "_", "level", "(", ")", " ", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "准备", "包含", "得分", "的", "初始", "图像", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "score", "(", ")"], ["#", " ", "准备", "包含", "得分", "的", "初始", "图像", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "high", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "level", "(", ")", "\n", "prep", "_", "level", "(", ")", " ", "的", "代码", "如下", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "level", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "将", "等级", "转换", "为", "渲染", "的", "图像", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "level", "_", "image", " ", "=", " ", "self", ".", "font", ".", "render", "(", "str", "(", "self", ".", "stats", ".", "level", ")", ",", " ", "True", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "text", "_", "color", ",", " ", "self", ".", "ai", "_", "settings", ".", "bg", "_", "color", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "等级", "放在", "得分", "下方", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "level", "_", "rect", " ", "=", " ", "self", ".", "level", "_", "image", ".", "get", "_", "rect", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "level", "_", "rect", ".", "right", " ", "=", " ", "self", ".", "score", "_", "rect", ".", "right"], ["❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "level", "_", "rect", ".", "top", " ", "=", " ", "self", ".", "score", "_", "rect", ".", "bottom", " ", "+", " ", "10", "\n", "方法", "prep", "_", "level", "(", ")", " ", "根据", "存储", "在", "stats", ".", "level", " ", "中", "的", "值", "创建", "一幅", "图像", "（", "见", "❶", "）", "，", "并", "将", "其", "right", " ", "属性", "设置", "为", "得分", "的", "right", " ", "属性", "（", "见", "❷", "）", "。", "然后", "，", "将", "top", " ", "属性", "设置", "为", "比", "得分", "图像", "\n", "的", "bottom", " ", "属性", "大", "10", "像素", "，", "以便", "在", "得分", "和", "等级", "之间", "留出", "一定", "的", "空间", "（", "见", "❸", "）", "。", "\n", "我们", "还", "需要", "更新", "show", "_", "score", "(", ")", " ", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "show", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "屏幕", "上", "显示", "飞船", "和", "得分", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "score", "_", "image", ",", " ", "self", ".", "score", "_", "rect", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "high", "_", "score", "_", "image", ",", " ", "self", ".", "high", "_", "score", "_", "rect", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "level", "_", "image", ",", " ", "self", ".", "level", "_", "rect", ")", "\n", "在", "这个", "方法", "中", "，", "添加", "了", "一行", "在", "屏幕", "上", "显示", "等级", "图像", "的", "代码", "。"], ["在", "这个", "方法", "中", "，", "添加", "了", "一行", "在", "屏幕", "上", "显示", "等级", "图像", "的", "代码", "。", "\n", "我们", "在", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "中", "提高", "等级", "，", "并", "更新", "等级", "图像", "：", "\n", "game", "_", "functions", ".", "py"], ["def", " ", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "len", "(", "aliens", ")", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "如果", "整群", "外星人", "都", "被", "消灭", "，", "就", "提高", "一个", "等级", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ai", "_", "settings", ".", "increase", "_", "speed", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "提高", "等级", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "level", " ", "+", "=", " ", "1", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "level", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "create", "_", "fleet", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "ship", ",", " ", "aliens", ")", "\n", "如果", "整群", "外星人", "都", "被", "消灭", "，", "我们", "就", "将", "stats", ".", "level", " ", "的", "值加", "1", "（", "见", "❶", "）", "，", "并", "调用", "prep", "_", "level", "(", ")", " ", "，", "以", "确保", "正确", "地", "显示", "新", "等级", "（", "见", "❷", "）", "。", "\n", "为", "确保", "开始", "新", "游戏", "时", "更新", "记分", "和", "等级", "图像", "，", "在", "按钮", "Play", "被", "单击", "时", "触发", "重置", "：", "\n", "game", "_", "functions", ".", "py"], ["game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "button", "_", "clicked", " ", "=", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "button", "_", "clicked", " ", "and", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "重置", "游戏", "统计", "信息", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "reset", "_", "stats", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "game", "_", "active", " ", "=", " ", "True", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "重置", "记分牌", "图像", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "high", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "level", "(", ")"], ["sb", ".", "prep", "_", "level", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "清空", "外星人", "列表", "和", "子弹", "列表", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ".", "empty", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "check", "_", "play", "_", "button", "(", ")", " ", "的", "定义", "需要", "包含", "对象", "sb", " ", "。", "为", "重置", "记分牌", "图像", "，", "我们", "在", "重置", "相关", "游戏", "设置", "后", "调用", "prep", "_", "score", "(", ")", " ", "、", "prep", "_", "high", "_", "score", "(", ")", " ", "和", "prep", "_", "level", "(", ")", " ", "（", "见", "\n", "❶", "）", "。", "\n", "在", "check", "_", "events", "(", ")", " ", "中", "，", "现在", "需要", "向", "check", "_", "play", "_", "button", "(", ")", " ", "传递", "sb", " ", "，", "让", "它", "能够", "访问", "记分牌", "对象", "：", "\n", "game", "_", "functions", ".", "py", "\n", " ", " ", "def", " ", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "play", "_", "button", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "按键", "和", "鼠标", "事件", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "event", " ", "in", " ", "pygame", ".", "event", ".", "get", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":"], ["if", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "QUIT", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "elif", " ", "event", ".", "type", " ", "=", "=", " ", "pygame", ".", "MOUSEBUTTONDOWN", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", " ", "=", " ", "pygame", ".", "mouse", ".", "get", "_", "pos", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "play", "_", "button", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", "check", "_", "events", "(", ")", " ", "的", "定义", "需要", "包含", "形参", "sb", " ", "，", "这样", "调用", "check", "_", "play", "_", "button", "(", ")", " ", "时", "，", "才能", "将", "sb", " ", "作为", "实参", "传递", "给", "它", "（", "见", "❶", "）", "。", "\n", "最后", "，", "更新", "alien", "_", "invasion", ".", "py", "中", "调用", "check", "_", "events", "(", ")", " ", "的", "代码", "，", "也", "向", "它", "传递", "sb", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":"], ["alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "check", "_", "events", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "你", "可以", "知道", "升", "到", "多少级", "了", "，", "如图", "14", "-", "5", "所示", "。"], ["图", "\n", "图", "14", "-", "5", "　", "当前", "等级", "显示", "在", "当前", "得分", "的", "正下方", "\n", "　", "当前", "等级", "显示", "在", "当前", "得分", "的", "正下方", "\n", "注意", "\n", "注意", " ", "　", "在", "一些", "经典", "游戏", "中", "，", "得分", "带", "标签", "，", "如", "Score", "、", "High", " ", "Score", "和", "Level", "。", "我们", "没有", "显示", "这些", "标签", "，", "因为", "开始", "玩", "这款", "游戏", "后", "，", "每个", "数字", "的", "含义", "将", "一目了然", "。", "要", "包含", "这些", "标", "\n", "签", "，", "只", "需", "在", "Scoreboard", " ", "中", "调用", "font", ".", "render", "(", ")", " ", "前", "，", "将", "它们", "添加", "到", "得分", "字符串", "中", "即可", "。", "\n", "14.3", ".", "9", "　", "显示", "余下", "的", "飞船", "数", "\n", "　", "显示", "余下", "的", "飞船", "数", "\n", "最后", "，", "我们", "来", "显示", "玩家", "还有", "多少", "艘", "飞船", "，", "但", "使用", "图形", "而", "不是", "数字", "。", "为此", "，", "我们", "在", "屏幕", "左上角", "绘制", "飞船", "图像", "来", "指出", "还", "余下", "多少", "艘", "飞船", "，", "就", "像", "众多", "经典", "的", "街机", "游戏", "那样", "。", "\n", "首先", "，", "需要", "让", "Ship", " ", "继承", "Sprite", " ", "，", "以便", "能够", "创建", "飞船", "编组", "：", "\n", "ship", ".", "py", "\n", " ", " ", "import", " ", "pygame", "\n", " ", " ", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Sprite", "\n", "❶", " ", "class", " ", "Ship", "(", "Sprite", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "飞船", "，", "并", "设置", "其", "起始", "位置", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", "Ship", ",", " ", "self", ")", ".__", "init", "__", "(", ")"], ["❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "super", "(", "Ship", ",", " ", "self", ")", ".__", "init", "__", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "在", "这里", "，", "我们", "导入", "了", "Sprite", " ", "，", "让", "Ship", " ", "继承", "Sprite", " ", "（", "见", "❶", "）", "，", "并", "在", "__", "init", "__", "(", ")", " ", "的", "开头", "就", "调用", "了", "super", "(", ")", " ", "（", "见", "❷", "）", "。", "\n", "接下来", "，", "需要", "修改", "Scoreboard", " ", "，", "在", "其中", "创建", "一个", "可", "供", "显示", "的", "飞船", "编组", "。", "下面", "是", "其中", "的", "import", " ", "语句", "和", "方法", "__", "init", "__", "(", ")", " ", "：", "\n", "scoreboard", ".", "py", "\n", "import", " ", "pygame", ".", "font", "\n", "from", " ", "pygame", ".", "sprite", " ", "import", " ", "Group", "\n", "from", " ", "ship", " ", "import", " ", "Ship", "\n", "class", " ", "Scoreboard", "(", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "报告", "得分", "信息", "的", "类", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "level", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "prep", "_", "ships", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["self", ".", "prep", "_", "ships", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "鉴于", "要", "创建", "一个", "飞船", "编组", "，", "我们", "导入", "Group", " ", "和", "Ship", " ", "类", "。", "调用", "prep", "_", "level", "(", ")", " ", "后", "，", "我们", "调用", "了", "prep", "_", "ships", "(", ")", " ", "。", "\n", "prep", "_", "ships", "(", ")", " ", "的", "代码", "如下", "：", "\n", "scoreboard", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "prep", "_", "ships", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "还", "余下", "多少", "艘", "飞船", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", " ", "=", " ", "Group", "(", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "for", " ", "ship", "_", "number", " ", "in", " ", "range", "(", "self", ".", "stats", ".", "ships", "_", "left", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", " ", "=", " ", "Ship", "(", "self", ".", "ai", "_", "settings", ",", " ", "self", ".", "screen", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "rect", ".", "x", " ", "=", " ", "10", " ", "+", " ", "ship", "_", "number", " ", "*", " ", "ship", ".", "rect", ".", "width", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "rect", ".", "y", " ", "=", " ", "10", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", ".", "add", "(", "ship", ")"], ["❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", ".", "add", "(", "ship", ")", "\n", "方法", "prep", "_", "ships", "(", ")", " ", "创建", "一个", "空", "编组", "self", ".", "ships", " ", "，", "用于", "存储", "飞船", "实例", "（", "见", "❶", "）", "。", "为", "填充", "这个", "编组", "，", "根据", "玩家", "还有", "多少", "艘", "飞船", "运行", "一个", "循环", "相应", "的", "次数", "（", "见", "❷", "）", "。", "在", "这个", "循环", "\n", "中", "，", "我们", "创建", "一艘", "新", "飞船", "，", "并", "设置", "其", "x", " ", "坐标", "，", "让", "整个", "飞船", "编组", "都", "位于", "屏幕", "左边", "，", "且", "每", "艘", "飞船", "的", "左边", "距", "都", "为", "10", "像素", "（", "见", "❸", "）", "。", "我们", "还", "将", "y", " ", "坐标", "设置", "为", "离", "屏幕", "上", "边缘", "10", "像素", "，", "让", "所有", "飞", "\n", "船", "都", "与", "得分", "图像", "对齐", "（", "见", "❹", "）", "。", "最后", "，", "我们", "将", "每", "艘", "新", "飞船", "都", "添加", "到", "编组", "ships", " ", "中", "（", "见", "❺", "）", "。", "\n", "现在", "需要", "在", "屏幕", "上", "绘制", "飞船", "了", "："], ["scoreboard", ".", "py", "\n", " ", " ", " ", " ", "def", " ", "show", "_", "score", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "screen", ".", "blit", "(", "self", ".", "level", "_", "image", ",", " ", "self", ".", "level", "_", "rect", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "绘制", "飞船", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "ships", ".", "draw", "(", "self", ".", "screen", ")", "\n", "为", "在", "屏幕", "上", "显示", "飞船", "，", "我们", "对", "编组", "调用", "了", "draw", "(", ")", " ", "。", "Pygame", "将", "绘制", "每艘", "飞船", "。", "\n", "为", "在", "游戏", "开始", "时", "让玩家", "知道", "他", "有", "多少", "艘", "飞船", "，", "我们", "在", "开始", "新", "游戏", "时", "调用", "prep", "_", "ships", "(", ")", " ", "。", "这", "是", "在", "game", "_", "functions", ".", "py", "的", "check", "_", "play", "_", "button", "(", ")", " ", "中", "进行", "的", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "play", "_", "button", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "play", "_", "button", ",", " ", "ship", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "aliens", ",", " ", "bullets", ",", " ", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\""], ["\"", "\"", "\"", "在", "玩家", "单击", "Play", "按钮", "时", "开始", "新", "游戏", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "button", "_", "clicked", " ", "=", " ", "play", "_", "button", ".", "rect", ".", "collidepoint", "(", "mouse", "_", "x", ",", " ", "mouse", "_", "y", ")", "\n", " ", " ", " ", " ", "if", " ", "button", "_", "clicked", " ", "and", " ", "not", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "重置", "记分牌", "图像", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "high", "_", "score", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "level", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "ships", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "还", "在", "飞船", "被", "外星人", "撞", "到", "时", "调用", "prep", "_", "ships", "(", ")", " ", "，", "从而", "在", "玩家", "损失", "一艘", "飞船", "时", "更新", "飞船", "图像", "：", "\n", "game", "_", "functions", ".", "py", "\n", "❶", " ", "def", " ", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检测", "外星人", "和", "飞船", "之间", "的", "碰撞"], ["--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检测", "外星人", "和", "飞船", "之间", "的", "碰撞", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pygame", ".", "sprite", ".", "spritecollideany", "(", "ship", ",", " ", "aliens", ")", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "检查", "是否", "有", "外星人", "抵达", "屏幕", "底端", "\n", "❸", " ", " ", " ", " ", " ", "check", "_", "aliens", "_", "bottom", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", "❹", " ", "def", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "响应", "被", "外星人", "撞", "到", "的", "飞船", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "ships", "_", "left", " ", ">", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "将", "ships", "_", "left", "减", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "stats", ".", "ships", "_", "left", " ", "-", "=", " ", "1", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "更新", "记分牌", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "ships", "(", ")"], ["#", " ", "更新", "记分牌", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "sb", ".", "prep", "_", "ships", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "清空", "外星人", "列表", "和", "子弹", "列表", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "首先", "，", "我们", "在", "update", "_", "aliens", "(", ")", " ", "的", "定义", "中", "添加", "了", "形参", "sb", " ", "（", "见", "❶", "）", "。", "然后", "，", "我们", "向", "ship", "_", "hit", "(", ")", " ", "（", "见", "❷", "）", "和", "check", "_", "aliens", "_", "bottom", "(", ")", " ", "（", "见", "❸", "）", "都", "传递", "了", "sb", " ", "，", "让", "它们", "都", "能", "\n", "够", "访问", "记分牌", "对象", "。", "\n", "接下来", "，", "我们", "更新", "了", "ship", "_", "hit", "(", ")", " ", "的", "定义", "，", "使", "其", "包含", "形参", "sb", " ", "（", "见", "❹", "）", "。", "我们", "在", "将", "ships", "_", "left", " ", "的", "值", "减", "1", "后", "调用", "了", "prep", "_", "ships", "(", ")", " ", "（", "见", "❺", "）", "，", "这样", "每次", "损失", "了", "飞船", "时", "，", "显示", "的", "\n", "飞船", "数都", "是", "正确", "的", "。", "\n", "在", "check", "_", "aliens", "_", "bottom", "(", ")", " ", "中", "需要", "调用", "ship", "_", "hit", "(", ")", " ", "，", "因此", "对", "这个", "函数", "进行", "更新", "：", "\n", "game", "_", "functions", ".", "py", "\n", "def", " ", "check", "_", "aliens", "_", "bottom", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "检查", "是否", "有", "外星人", "抵达", "屏幕", "底端", "\"", "\"", "\""], ["bullets", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "检查", "是否", "有", "外星人", "抵达", "屏幕", "底端", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "screen", "_", "rect", " ", "=", " ", "screen", ".", "get", "_", "rect", "(", ")", "\n", " ", " ", " ", " ", "for", " ", "alien", " ", "in", " ", "aliens", ".", "sprites", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "alien", ".", "rect", ".", "bottom", " ", ">", "=", " ", "screen", "_", "rect", ".", "bottom", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "像", "飞船", "被", "外星人", "撞", "到", "一样", "处理", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", "_", "hit", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", "现在", "，", "check", "_", "aliens", "_", "bottom", "(", ")", " ", "包含", "形参", "sb", " ", "，", "并", "在", "调用", "ship", "_", "hit", "(", ")", " ", "时", "传递", "了", "实参", "sb", " ", "。", "\n", "最后", "，", "在", "alien", "_", "invasion", ".", "py", "中", "修改", "调用", "update", "_", "aliens", "(", ")", " ", "的", "代码", "，", "向", "它", "传递", "实参", "sb", " ", "：", "\n", "alien", "_", "invasion", ".", "py", "\n", " ", " ", " ", " ", "#", " ", "开始", "游戏", "主", "循环", "\n", " ", " ", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "game", "_", "active", ":"], ["--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "stats", ".", "game", "_", "active", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "ship", ".", "update", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "bullets", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "gf", ".", "update", "_", "aliens", "(", "ai", "_", "settings", ",", " ", "screen", ",", " ", "stats", ",", " ", "sb", ",", " ", "ship", ",", " ", "aliens", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "bullets", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "图", "14", "-", "6", "显示", "了", "完整", "的", "记分", "系统", "，", "它", "在", "屏幕", "左上角", "指出", "了", "还", "余下", "多少", "艘", "飞船", "。"], ["图", "\n", "图", "14", "-", "6", "　", "游戏", "《", "外星人", "入侵", "》", "的", "完整", "记分", "系统", "\n", "　", "游戏", "《", "外星人", "入侵", "》", "的", "完整", "记分", "系统", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "14", "-", "4", " ", "历史", "最高分", "\n", "历史", "最高分", " ", "：", "每当", "玩家", "关闭", "并", "重新", "开始", "游戏", "《", "外星人", "入侵", "》", "时", "，", "最高分", "都", "将", "被", "重置", "。", "请", "修复", "这个", "问题", "，", "调用", "sys", ".", "exit", "(", ")", " ", "前", "将", "最高分", "写入", "文件", "，", "并", "当", "\n", "在", "GameStats", " ", "中", "初始化", "最高分", "时", "从文件", "中", "读取", "它", "。", "\n", "14", "-", "5", " ", "重构", "\n", "重构", " ", "：", "找出", "执行", "了", "多项", "任务", "的", "函数", "和", "方法", "，", "对", "它们", "进行", "重构", "，", "以", "让", "代码", "高效", "而", "有序", "。", "例如", "，", "对于", "check", "_", "bullet", "_", "alien", "_", "collisions", "(", ")", " ", "，", "将", "其中", "在", "外星人", "\n", "群", "被", "消灭", "干净", "时", "开始", "新", "等级", "的", "代码", "移", "到", "一个", "名为", "start", "_", "new", "_", "level", "(", ")", " ", "的", "函数", "中", "；", "又", "比如", "，", "对于", "Scoreboard", " ", "的", "方法", "__", "init", "__", "(", ")", " ", "，", "将", "其中", "调用", "四个", "不同", "方法", "的", "\n", "代码", "移", "到", "一个", "名为", "prep", "_", "images", "(", ")", " ", "的", "方法", "中", "，", "以", "缩短", "方法", "__", "init", "__", "(", ")", " ", "。", "如果", "你", "重构", "了", "check", "_", "play", "_", "button", "(", ")", " ", "，", "方法", "prep", "_", "images", "(", ")", " ", "也", "可", "\n", "为", "check", "_", "play", "_", "button", "(", ")", " ", "或", "start", "_", "game", "(", ")", " ", "提供", "帮助", "。", "\n", "注意"], ["为", "check", "_", "play", "_", "button", "(", ")", " ", "或", "start", "_", "game", "(", ")", " ", "提供", "帮助", "。", "\n", "注意", "\n", "注意", " ", "　", "重构", "项目", "前", "，", "请", "阅读", "附录", "D", "，", "了解", "如果", "重构", "时", "引入", "了", "bug", "，", "如何", "将", "项目", "恢复", "到", "可", "正确", "运行", "的", "状态", "。", "\n", "14", "-", "6", " ", "扩展", "游戏", "《", "外星人", "入侵", "》", "\n", "扩展", "游戏", "《", "外星人", "入侵", "》", " ", "：", "想想", "如何", "扩展", "游戏", "《", "外星人", "入侵", "》", "。", "例如", "，", "可", "让", "外星人", "也", "能够", "向", "飞船", "射击", "，", "或者", "添加", "盾牌", "，", "让", "飞船", "躲到", "它", "后面", "，", "使得", "只有", "从", "两边", "射", "\n", "来", "的", "子弹", "才能", "摧毁", "飞船", "。", "另外", "，", "还", "可以", "使用", "像", "pygame", ".", "mixer", " ", "这样", "的", "模块", "来", "添加", "音效", "，", "如", "爆炸声", "和", "射击", "声", "。", "\n", "14.4", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "如何", "创建", "用于", "开始", "新", "游戏", "的", "Play", "按钮", "，", "如何", "检测", "鼠标", "事件", "，", "以及", "在", "游戏", "处于", "活动状态", "时", "如何", "隐藏", "光标", "。", "你", "可以", "利用", "学到", "的", "知识", "在", "游戏", "中", "创建", "其他", "按钮", "，", "如", "用于", "\n", "显示", "玩法", "说明", "的", "Help", "按钮", "。", "你", "还", "学习", "了", "如何", "随", "游戏", "的", "进行", "调整", "其", "节奏", "，", "如何", "实现", "记分", "系统", "，", "以及", "如何", "以", "文本", "和", "非", "文本", "方式", "显示信息", "。", "\n", "项目", "\n", "项目", "2", "　", "数据", "可视化", "\n", "　", "数据", "可视化", "\n", "第", "\n", "第", " ", "15", " ", "章", "　", "生成", "数据", "\n", "章", "　", "生成", "数据"], ["数据", "可视化", "\n", "数据", "可视化", " ", "指", "的", "是", "通过", "可视化", "表示", "来", "探索", "数据", "，", "它", "与", "数据挖掘", "\n", "数据挖掘", " ", "紧密", "相关", "，", "而", "数据挖掘", "指", "的", "是", "使用", "代码", "来", "探索", "数据", "集", "的", "规律", "和", "关联", "。", "数据", "集", "可以", "是", "用", "一行", "代码", "就", "能表", "\n", "示", "的", "小型", "数字", "列表", "，", "也", "可以", "是", "数以", "吉", "字节", "的", "数据", "。", "\n", "漂亮", "地", "呈现", "数据", "关乎", "的", "并非", "仅仅", "是", "漂亮", "的", "图片", "。", "以", "引人注目", "的", "简洁", "方式", "呈现", "数据", "，", "让", "观看", "者", "能够", "明白", "其", "含义", "，", "发现", "数据", "集中", "原本", "未", "意识", "到", "的", "规律", "和", "意义", "。", "\n", "所幸", "即便", "没有", "超级计算机", "，", "也", "能够", "可视化", "复杂", "的", "数据", "。", "鉴于", "Python", "的", "高效性", "，", "使用", "它", "在", "笔记本电脑", "上", "就", "能", "快速", "地", "探索", "由", "数百万个", "数据", "点", "组成", "的", "数据", "集", "。", "数据", "点", "并非", "必须", "\n", "是", "数字", "，", "利用", "本书", "前半部", "分", "介绍", "的", "基本知识", "，", "也", "可以", "对非", "数字", "数据", "进行", "分析", "。", "\n", "在", "基因", "研究", "、", "天气", "研究", "、", "政治经济", "分析", "等", "众多", "领域", "，", "大家", "都", "使用", "Python", "来", "完成", "数据", "密集型", "工作", "。", "数据", "科学家", "使用", "Python", "编写", "了", "一系列", "令人", "印象", "深刻", "的", "可视化", "和", "分析", "工", "\n", "具", "，", "其中", "很多", "也", "可供", "你", "使用", "。", "最", "流行", "的", "工具", "之一", "是", "matplotlib", "，", "它", "是", "一个", "数学", "绘", "图库", "，", "我们", "将", "使用", "它", "来", "制作", "简单", "的", "图表", "，", "如", "折线图", "和", "散点图", "。", "然后", "，", "我们", "将", "基于", "随机", "漫", "\n", "步", "概念", "生成", "一个", "更", "有趣", "的", "数据", "集", "—", "—", "根据", "一系列", "随机", "决策", "生成", "的", "图表", "。"], ["步", "概念", "生成", "一个", "更", "有趣", "的", "数据", "集", "—", "—", "根据", "一系列", "随机", "决策", "生成", "的", "图表", "。", "\n", "我们", "还", "将", "使用", "Pygal", "包", "，", "它", "专注", "于", "生成", "适合", "在", "数字", "设备", "上", "显示", "的", "图表", "。", "通过", "使用", "Pygal", "，", "可", "在", "用户", "与", "图表", "交互", "时", "突出", "元素", "以及", "调整", "其", "大小", "，", "还", "可", "轻松", "地", "调整", "整个", "图表", "的", "尺", "\n", "寸", "，", "使", "其", "适合", "在", "微型", "智能", "手表", "或", "巨型", "显示器", "上", "显示", "。", "我们", "将", "使用", "Pygal", "以", "各种", "方式", "探索", "掷骰子", "的", "结果", "。", "\n", "15.1", "　", "安装", "\n", "　", "安装", "matplotlib", "\n", "首先", "，", "需要", "安装", "matplotlib", "，", "我们", "将", "使用", "它", "来", "制作", "开始", "的", "几个", "图表", "。", "如果", "你", "还", "未", "使用", "过", "pip", "，", "请参阅", "12.2", ".", "1", "节", "。", "\n", "15.1", ".", "1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "matplotlib", "\n", "如果", "你", "使用", "的", "是", "系统", "自带", "的", "Python", "版本", "，", "可", "使用", "系统", "的", "包", "管理器", "来", "安装", "matplotlib", "，", "为此", "只", "需", "执行", "一行", "命令", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python3", "-", "matplotlib", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "请", "执行", "如下", "命令", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python", "-", "matplotlib", "\n", "如果", "你", "安装", "了", "较", "新", "的", "Python", "版本", "，", "就", "必须", "安装", "matplotlib", "依赖", "的", "一些", "库", "："], ["如果", "你", "安装", "了", "较", "新", "的", "Python", "版本", "，", "就", "必须", "安装", "matplotlib", "依赖", "的", "一些", "库", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python3.5", "-", "dev", " ", "python3.5", "-", "tk", " ", "tk", "-", "dev", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "libfreetype6", "-", "dev", " ", "g", "++", "\n", "再", "使用", "pip", "来", "安装", "matplotlib", "：", "\n", "$", " ", "pip", " ", "install", " ", "--", "user", " ", "matplotlib", "\n", "15.1", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "matplotlib", "\n", "Apple", "的", "标准", "Python", "安装", "自带", "了", "matplotlib", "。", "要", "检查", "系统", "是否", "安装", "了", "matplotlib", "，", "可", "打开", "一个", "终端", "会话", "并", "尝试", "导入", "matplotlib", "。", "如果", "系统", "没有", "自带", "matplotlib", "，", "且", "你", "的", "Python", "是", "使用", "Homebrew", "安", "\n", "装", "的", "，", "则", "可以", "像", "下面", "这样", "安装", "matplotlib", "：", "\n", "$", " ", "pip", " ", "install", " ", "--", "user", " ", "matplotlib"], ["注意", "\n", "注意", " ", "　", "安装包", "时", "可能", "需要", "使用", "pip3", " ", "，", "而", "不是", "pip", " ", "。", "另外", "，", "如果", "这个", "命令", "不管", "用", "，", "你", "可能", "需要", "删除", "标志", "--", "user", " ", "。", "\n", "15.1", ".", "3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "matplotlib", "\n", "在", "Windows", "系统", "中", "，", "首先", "需要", "安装", "Visual", " ", "Studio", "。", "为此", "，", "请", "访问", "https", ":", "/", "/", "dev", ".", "windows", ".", "com", "/", " ", "，", "单击", "Downloads", "，", "再", "查找", "Visual", " ", "Studio", " ", "Community", "—", "—", "一组", "免费", "的", "Windows", "开发工具", "。", "请", "下载", "并", "\n", "运行", "该", "安装程序", "。", "\n", "接下来", "，", "需要", "下载", "matplotlib", "安装程序", "。", "为此", "，", "请", "访问", "https", ":", "/", "/", "pypi", ".", "python", ".", "org", "/", "pypi", "/", "matplotlib", "/", " ", "，", "并", "查找", "与", "你", "使用", "的", "Python", "版本", "匹配", "的", "wheel", "文件", "（", "扩展", "名为", ".", "whl", "的", "文件", "）", "。", "例如", "，", "如果", "你", "使", "\n", "用", "的", "是", "32", "位", "的", "Python", " ", "3.5", "，", "则", "需要", "下载", "matplotlib", "-", "1.4", ".", "3", "-", "cp35", "-", "none", "-", "win32", ".", "whl", "。", "\n", "注意"], ["注意", "\n", "注意", " ", "　", "如果", "找", "不到", "与", "你", "安装", "的", "Python", "版本", "匹配", "的", "文件", "，", "请", "去", "http", ":", "/", "/", "www", ".", "lfd", ".", "uci", ".", "edu", "/", "-", "gohlke", "/", "pythonlibs", "/", "#", "matplotlib", " ", "看看", "，", "这个", "网站", "发布", "安装程序", "的", "时间", "通常", "比", "matplotlib", "官网", "早", "\n", "些", "。", "\n", "将", "这个", ".", "whl", "文件", "复制到", "你", "的", "项目", "文件夹", "，", "打开", "一个", "命令", "窗口", "，", "并", "切换", "到", "该", "项目", "文件夹", "，", "再", "使用", "pip", "来", "安装", "matplotlib", "：", "\n", ">", " ", "cd", " ", "python", "_", "work", "\n", "python", "_", "work", ">", " ", "python", " ", "-", "m", " ", "pip", " ", "install", " ", "--", "user", " ", "matplotlib", "-", "1.4", ".", "3", "-", "cp35", "-", "none", "-", "win32", ".", "whl", "\n", "15.1", ".", "4", "　", "测试", "\n", "　", "测试", "matplotlib", "\n", "安装", "必要", "的", "包后", "，", "对", "安装", "进行", "测试", "。", "为此", "，", "首先", "使用", "命令", "python", " ", "或", "python3", " ", "启动", "一个", "终端", "会话", "，", "再", "尝试", "导入", "matplotlib", "：", "\n", "$", " ", "python3", "\n", ">", ">", ">", " ", "import", " ", "matplotlib", "\n", ">", ">", ">", "\n", "如果", "没有", "出现", "任何", "错误", "消息", "，", "就", "说明", "你", "的", "系统", "安装", "了", "matplotlib", "，", "可以", "接着", "阅读", "下", "一节", "。", "\n", "注意"], ["如果", "没有", "出现", "任何", "错误", "消息", "，", "就", "说明", "你", "的", "系统", "安装", "了", "matplotlib", "，", "可以", "接着", "阅读", "下", "一节", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "在", "安装", "过程", "中", "遇到", "了", "麻烦", "，", "请参阅", "附录", "C", "。", "如果", "依然", "无济于事", "，", "请", "向", "他人", "寻求", "帮助", "。", "对于", "你", "遇到", "的", "问题", "，", "只要", "向", "经验丰富", "的", "Python", "程序员", "提供", "少量", "的", "信", "\n", "息", "，", "他们", "很", "可能", "很快", "就", "能", "帮", "你", "解决", "。", "\n", "15.1", ".", "5", "　", "\n", "　", "matplotlib", "画廊", "\n", "画廊", "\n", "要", "查看", "使用", "matplotlib", "可", "制作", "的", "各种", "图表", "，", "请", "访问", "http", ":", "/", "/", "matplotlib", ".", "org", "/", " ", "的", "示例", "画廊", "。", "单击", "画廊", "中", "的", "图表", "，", "就", "可", "查看", "用于", "生成", "图表", "的", "代码", "。", "\n", "15.2", "　", "绘制", "简单", "的", "折线图", "\n", "　", "绘制", "简单", "的", "折线图", "\n", "下面", "来", "使用", "matplotlib", "绘制", "一个", "简单", "的", "折线图", "，", "再", "对", "其", "进行", "定制", "，", "以", "实现", "信息", "更", "丰富", "的", "数据", "可视化", "。", "我们", "将", "使用", "平方", "数", "序列", "1", "、", "4", "、", "9", "、", "16", "和", "25", "来", "绘制", "这个", "图表", "。", "\n", "只", "需向", "matplotlib", "提供", "如下", "数字", "，", "matplotlib", "就", "能", "完成", "其他", "的", "工作", "：", "\n", "mpl", "_", "squares", ".", "py", "\n", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "squares", " ", "=", " ", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", "]", "\n", "plt", ".", "plot", "(", "squares", ")", "\n", "plt", ".", "show", "(", ")"], ["plt", ".", "plot", "(", "squares", ")", "\n", "plt", ".", "show", "(", ")", "\n", "我们", "首先", "导入", "了", "模块", "pyplot", " ", "，", "并", "给", "它", "指定", "了", "别名", "plt", " ", "，", "以免", "反复", "输入", "pyplot", " ", "。", "在线", "示例", "大都", "这样", "做", "，", "因此", "这里", "也", "这样", "做", "。", "模块", "pyplot", " ", "包含", "很多", "用于", "生成", "图表", "的", "函数", "。", "\n", "我们", "创建", "了", "一个", "列表", "，", "在", "其中", "存储", "了", "前述", "平方", "数", "，", "再", "将", "这个", "列表", "传递", "给", "函数", "plot", "(", ")", " ", "，", "这个", "函数", "尝试", "根据", "这些", "数字", "绘制", "出", "有", "意义", "的", "图形", "。", "plt", ".", "show", "(", ")", " ", "打开", "matplotlib", "查看器", "，", "并", "\n", "显示", "绘制", "的", "图形", "，", "如图", "15", "-", "1", "所示", "。", "查看器", "让", "你", "能够", "缩放", "和", "导航", "图形", "，", "另外", "，", "单击", "磁盘", "图标", "可", "将", "图形", "保存起来", "。", "\n", "图", "\n", "图", "15", "-", "1", "　", "使用", "\n", "　", "使用", "matplotlib", "可", "制作", "的", "最", "简单", "的", "图表", "\n", "可", "制作", "的", "最", "简单", "的", "图表", "\n", "15.2", ".", "1", "　", "修改", "标签", "文字", "和", "线条", "粗细", "\n", "　", "修改", "标签", "文字", "和", "线条", "粗细", "\n", "图", "15", "-", "1", "所示", "的", "图形", "表明", "数字", "是", "越来越", "大", "的", "，", "但", "标签", "文字", "太小", "，", "线条", "太细", "。", "所幸", "matplotlib", "让", "你", "能够", "调整", "可视化", "的", "各个方面", "。"], ["下面", "通过", "一些", "定制", "来", "改善", "这个", "图形", "的", "可读性", "，", "如下", "所示", "：", "\n", "mpl", "_", "squares", ".", "py", "\n", " ", " ", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", " ", " ", "squares", " ", "=", " ", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", "]", "\n", "❶", " ", "plt", ".", "plot", "(", "squares", ",", " ", "linewidth", "=", "5", ")", "\n", " ", " ", "#", " ", "设置", "图表", "标题", "，", "并", "给", "坐标轴", "加上", "标签", "\n", "❷", " ", "plt", ".", "title", "(", "\"", "Square", " ", "Numbers", "\"", ",", " ", "fontsize", "=", "24", ")", "\n", "❷", " ", "plt", ".", "xlabel", "(", "\"", "Value", "\"", ",", " ", "fontsize", "=", "14", ")", "\n", " ", " ", "plt", ".", "ylabel", "(", "\"", "Square", " ", "of", " ", "Value", "\"", ",", " ", "fontsize", "=", "14", ")", "\n", " ", " ", "#", " ", "设置", "刻度", "标记", "的", "大小", "\n", "❹", " ", "plt", ".", "tick", "_", "params", "(", "axis", "=", "'", "both", "'", ",", " ", "labelsize", "=", "14", ")", "\n", " ", " ", "plt", ".", "show", "(", ")", "\n", "参数", "linewidth", " ", "（", "见", "❶", "）", "决定", "了", "plot", "(", ")", " ", "绘制", "的", "线条", "的", "粗细", "。", "函数", "title", "(", ")", " ", "（", "见", "❷", "）", "给", "图表", "指定", "标题", "。", "在", "上述", "代码", "中", "，", "出现", "了", "多次", "的", "参数", "fontsize", " ", "指定", "了", "图表", "中", "文字", "的", "大", "\n", "小", "。"], ["小", "。", "\n", "函数", "xlabel", "(", ")", " ", "和", "ylabel", "(", ")", " ", "让", "你", "能够", "为", "每条", "轴", "设置", "标题", "（", "见", "❸", "）", "；", "而", "函数", "tick", "_", "params", "(", ")", " ", "设置", "刻度", "的", "样式", "（", "见", "❹", "）", "，", "其中", "指定", "的", "实参", "将", "影响", "x", " ", "轴", "和", "y", " ", "轴上", "的", "刻度", "\n", "（", "axes", "=", "'", "both", "'", " ", "）", "，", "并", "将", "刻度", "标记", "的", "字号", "设置", "为", "14", "（", "labelsize", "=", "14", " ", "）", "。", "\n", "最终", "的", "图表", "阅读", "起来", "容易", "得", "多", "了", "，", "如图", "15", "-", "2", "所示", "：", "标签", "文字", "更大", "，", "线条", "也", "更", "粗", "。", "\n", "图", "\n", "图", "15", "-", "2", "　", "现在", "图表", "阅读", "起来", "容易", "得", "多", "\n", "　", "现在", "图表", "阅读", "起来", "容易", "得", "多", "\n", "15.2", ".", "2", "　", "校正", "图形", "\n", "　", "校正", "图形", "\n", "图形", "更", "容易", "阅读", "后", "，", "我们", "发现", "没有", "正确", "地", "绘制", "数据", "：", "折线图", "的", "终点", "指出", "4.0", "的", "平方", "为", "25", "！", "下面", "来", "修复", "这个", "问题", "。", "\n", "当", "你", "向", "plot", "(", ")", " ", "提供", "一系列", "数字", "时", "，", "它", "假设", "第一个", "数据", "点", "对应", "的", " ", "x", " ", "坐标值", "为", "0", "，", "但", "我们", "的", "第一个", "点", "对应", "的", " ", "x", " ", "值为", "1", "。", "为", "改变", "这种", "默认", "行为", "，", "我们", "可以", "给", "plot", "(", ")", " ", "同时", "提供", "输入", "值", "和", "\n", "输出", "值", "：", "\n", "mpl", "_", "squares", ".", "py", "\n", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "input", "_", "values", " ", "=", " ", "[", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", ",", " ", "5", "]", "\n", "squares", " ", "=", " ", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", "]"], ["squares", " ", "=", " ", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", "]", "\n", "plt", ".", "plot", "(", "input", "_", "values", ",", " ", "squares", ",", " ", "linewidth", "=", "5", ")", "\n", "#", " ", "设置", "图表", "标题", "并", "给", "坐标轴", "加上", "标签", "\n", "--", "snip", "--", "\n", "现在", "plot", "(", ")", " ", "将", "正确", "地", "绘制", "数据", "，", "因为", "我们", "同时", "提供", "了", "输入", "值", "和", "输出", "值", "，", "它", "无需", "对", "输出", "值", "的", "生成", "方式", "作出", "假设", "。", "最终", "的", "图形", "是", "正确", "的", "，", "如图", "15", "-", "3", "所示", "。"], ["图", "\n", "图", "15", "-", "3", "　", "根据", "数据", "正确", "地", "绘制", "了", "图形", "\n", "　", "根据", "数据", "正确", "地", "绘制", "了", "图形", "\n", "使用", "plot", "(", ")", " ", "时", "可", "指定", "各种", "实参", "，", "还", "可", "使用", "众多", "函数", "对", "图形", "进行", "定制", "。", "本章", "后面", "处理", "更", "有趣", "的", "数据", "集时", "，", "将", "继续", "探索", "这些", "定制", "函数", "。", "\n", "15.2", ".", "3", "　", "使用", "\n", "　", "使用", "scatter", "(", ")", " ", "绘制", "散点图", "并", "设置", "其", "样式", "\n", "绘制", "散点图", "并", "设置", "其", "样式", "\n", "有时候", "，", "需要", "绘制", "散点图", "并", "设置", "各个", "数据", "点", "的", "样式", "。", "例如", "，", "你", "可能", "想以", "一种", "颜色", "显示", "较", "小", "的", "值", "，", "而用", "另", "一种", "颜色", "显示", "较大", "的", "值", "。", "绘制", "大型", "数据", "集时", "，", "你", "还", "可以", "对", "每个", "点", "都", "设置", "同", "\n", "样", "的", "样式", "，", "再", "使用", "不同", "的", "样式", "选项", "重新", "绘制", "某些", "点", "，", "以", "突出", "它们", "。", "\n", "要", "绘制", "单个", "点", "，", "可", "使用", "函数", "scatter", "(", ")", " ", "，", "并", "向", "它", "传递", "一对", " ", "x", " ", "和", " ", "y", " ", "坐标", "，", "它", "将", "在", "指定", "位置", "绘制", "一个点", "：", "\n", "scatter", "_", "squares", ".", "py", "\n", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "plt", ".", "scatter", "(", "2", ",", " ", "4", ")", "\n", "plt", ".", "show", "(", ")", "\n", "下面", "来", "设置", "输出", "的", "样式", "，", "使", "其", "更", "有趣", "：", "添加", "标题", "，", "给", "轴", "加上", "标签", "，", "并", "确保", "所有", "文本", "都", "大到", "能够", "看清", "：", "\n", " ", " ", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "❶", " ", "plt", ".", "scatter", "(", "2", ",", " ", "4", ",", " ", "s", "=", "200", ")"], ["❶", " ", "plt", ".", "scatter", "(", "2", ",", " ", "4", ",", " ", "s", "=", "200", ")", "\n", " ", " ", "#", " ", "设置", "图表", "标题", "并", "给", "坐标轴", "加上", "标签", "\n", " ", " ", "plt", ".", "title", "(", "\"", "Square", " ", "Numbers", "\"", ",", " ", "fontsize", "=", "24", ")", "\n", " ", " ", "plt", ".", "xlabel", "(", "\"", "Value", "\"", ",", " ", "fontsize", "=", "14", ")", "\n", " ", " ", "plt", ".", "ylabel", "(", "\"", "Square", " ", "of", " ", "Value", "\"", ",", " ", "fontsize", "=", "14", ")", "\n", " ", " ", "#", " ", "设置", "刻度", "标记", "的", "大小", "\n", " ", " ", "plt", ".", "tick", "_", "params", "(", "axis", "=", "'", "both", "'", ",", " ", "which", "=", "'", "major", "'", ",", " ", "labelsize", "=", "14", ")", "\n", " ", " ", "plt", ".", "show", "(", ")", "\n", "在", "❶", "处", "，", "我们", "调用", "了", "scatter", "(", ")", " ", "，", "并", "使用", "实参", "s", " ", "设置", "了", "绘制", "图形", "时", "使用", "的", "点", "的", "尺寸", "。", "如果", "此时", "运行", "scatter", "_", "squares", ".", "py", "，", "将", "在", "图表", "中央", "看到", "一个点", "，", "如图", "15", "-", "4", "所示", "。", "\n", "图", "\n", "图", "15", "-", "4", "　", "绘制", "单个", "点", "\n", "　", "绘制", "单个", "点", "\n", "15.2", ".", "4", "　", "使用", "\n", "　", "使用", "scatter", "(", ")", " ", "绘制", "一系列", "点", "\n", "绘制", "一系列", "点", "\n", "要", "绘制", "一系列", "的", "点", "，", "可向", "scatter", "(", ")", " ", "传递", "两个", "分别", "包含", "x", " ", "值", "和", "y", " ", "值", "的", "列表", "，", "如下", "所示", "：", "\n", "scatter", "_", "squares", ".", "py", "\n", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt"], ["x", "_", "values", " ", "=", " ", "[", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", ",", " ", "5", "]", "\n", "y", "_", "values", " ", "=", " ", "[", "1", ",", " ", "4", ",", " ", "9", ",", " ", "16", ",", " ", "25", "]", "\n", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "s", "=", "100", ")", "\n", "#", " ", "设置", "图表", "标题", "并", "给", "坐标轴", "指定", "标签", "\n", "--", "snip", "--", "\n", "列表", "x", "_", "values", " ", "包含", "要", "计算", "其", "平方", "值", "的", "数字", "，", "而", "列表", "y", "_", "values", " ", "包含", "前述", "每个", "数字", "的", "平方", "值", "。", "将", "这些", "列表", "传递", "给", "scatter", "(", ")", " ", "时", "，", "matplotlib", "依次", "从", "每个", "列表", "中", "读取", "一个", "值来", "绘制", "\n", "一个点", "。", "要", "绘制", "的", "点", "的", "坐标", "分别", "为", " ", "(", "1", ",", " ", "1", ")", "、", "(", "2", ",", " ", "4", ")", "、", "(", "3", ",", " ", "9", ")", "、", "(", "4", ",", " ", "16", ")", "和", "(", "5", ",", " ", "25", ")", "，", "最终", "的", "结果", "如图", "15", "-", "5", "所示", "。", "\n", "图", "\n", "图", "15", "-", "5", "　", "由", "多个", "点", "组成", "的", "散点图", "\n", "　", "由", "多个", "点", "组成", "的", "散点图", "\n", "15.2", ".", "5", "　", "自动", "计算", "数据", "\n", "　", "自动", "计算", "数据", "\n", "手工", "计算", "列表", "要", "包含", "的", "值", "可能", "效率", "低下", "，", "需要", "绘制", "的", "点", "很多", "时", "尤其", "如此", "。", "可以", "不必", "手工", "计算", "包含", "点", "坐标", "的", "列表", "，", "而", "让", "Python", "循环", "来", "替", "我们", "完成", "这种", "计算", "。", "下面", "是", "绘制", "1000", "个点", "的", "代", "\n", "码", "：", "\n", "scatter", "_", "squares", ".", "py", "\n", " ", " ", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt"], ["import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "❶", " ", "x", "_", "values", " ", "=", " ", "list", "(", "range", "(", "1", ",", " ", "1001", ")", ")", "\n", " ", " ", "y", "_", "values", " ", "=", " ", "[", "x", "*", "*", "2", " ", "for", " ", "x", " ", "in", " ", "x", "_", "values", "]", "\n", "❷", " ", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "s", "=", "40", ")", "\n", " ", " ", "#", " ", "设置", "图表", "标题", "并", "给", "坐标轴", "加上", "标签", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "设置", "每个", "坐标轴", "的", "取值", "范围", "\n", "❸", " ", "plt", ".", "axis", "(", "[", "0", ",", " ", "1100", ",", " ", "0", ",", " ", "1100000", "]", ")", "\n", " ", " ", "plt", ".", "show", "(", ")", "\n", "我们", "首先", "创建", "了", "一个", "包含", " ", "x", " ", "值", "的", "列表", "，", "其中", "包含", "数字", "1", "~", "1000", "（", "见", "❶", "）", "。", "接下来", "是", "一个", "生成", " ", "y", " ", "值", "的", "列表", "解析", "，", "它", "遍历", " ", "x", " ", "值", "（", "for", " ", "x", " ", "in", " ", "x", "_", "values", " ", "）", "，", "计算", "其", "平方", "值", "（", "x", "*", "*", "2", " ", "）", "，", "\n", "并", "将", "结果", "存储", "到", "列表", "y", "_", "values", " ", "中", "。", "然后", "，", "将", "输入", "列表", "和", "输出", "列表", "传递", "给", "scatter", "(", ")", " ", "（", "见", "❷", "）", "。", "\n", "由于", "这个", "数据", "集", "较大", "，", "我们", "将点", "设置", "得", "较", "小", "，", "并", "使用", "函数", "axis", "(", ")", " ", "指定", "了", "每个", "坐标轴", "的", "取值", "范围", "（", "见", "❸", "）", "。", "函数", "axis", "(", ")", " ", "要求", "提供", "四个", "值", "：", "x", " ", "和", " ", "y", " ", "坐标轴", "的", "最小值", "和", "最大值", "。", "在"], ["这里", "，", "我们", "将", " ", "x", " ", "坐标轴", "的", "取值", "范围", "设置", "为", "0", "~", "1100", "，", "并", "将", " ", "y", " ", "坐标轴", "的", "取值", "范围", "设置", "为", "0", "~", "1", " ", "100", " ", "000", "。", "结果", "如图", "15", "-", "6", "所示", "。", "\n", "图", "\n", "图", "15", "-", "6", "　", "\n", "　", "Python", "绘制", "\n", "绘制", "1000", "个点", "与", "绘制", "\n", "个点", "与", "绘制", "5", "个点", "一样", "容易", "\n", "个点", "一样", "容易", "\n", "15.2", ".", "6", "　", "删除", "数据", "点", "的", "轮廓", "\n", "　", "删除", "数据", "点", "的", "轮廓"], ["matplotlib", "允许", "你", "给", "散点图", "中", "的", "各个", "点", "指定", "颜色", "。", "默认", "为", "蓝色", "点", "和", "黑色", "轮廓", "，", "在", "散点图", "包含", "的", "数据", "点", "不多时", "效果", "很", "好", "。", "但", "绘制", "很多", "点时", "，", "黑色", "轮廓", "可能", "会", "粘连", "在", "一起", "。", "要", "删除", "数据", "\n", "点", "的", "轮廓", "，", "可", "在", "调用", "scatter", "(", ")", " ", "时", "传递", "实参", "edgecolor", "=", "'", "none", "'", " ", "：", "\n", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "40", ")", "\n", "将", "相应", "调用", "修改", "为", "上述", "代码", "后", "，", "如果", "再", "运行", "scatter", "_", "squares", ".", "py", "，", "在", "图表", "中", "看到", "的", "将", "是", "蓝色", "实心", "点", "。", "\n", "15.2", ".", "7", "　", "自定义", "颜色", "\n", "　", "自定义", "颜色", "\n", "要", "修改", "数据", "点", "的", "颜色", "，", "可向", "scatter", "(", ")", " ", "传递", "参数", "c", " ", "，", "并", "将", "其", "设置", "为", "要", "使用", "的", "颜色", "的", "名称", "，", "如下", "所示", "：", "\n", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "c", "=", "'", "red", "'", ",", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "40", ")", "\n", "你", "还", "可以", "使用", "RGB", "颜色", "模式", "自定义", "颜色", "。", "要", "指定", "自定义", "颜色", "，", "可", "传递", "参数", "c", " ", "，", "并", "将", "其", "设置", "为", "一个", "元组", "，", "其中", "包含", "三个", "0", "~", "1", "之间", "的", "小", "数值", "，", "它们", "分别", "表示", "红色", "、", "绿色", "和", "蓝色", "分量", "。", "例", "\n", "如", "，", "下面", "的", "代码", "行", "创建", "一个", "由", "淡蓝色", "点", "组成", "的", "散点图", "："], ["如", "，", "下面", "的", "代码", "行", "创建", "一个", "由", "淡蓝色", "点", "组成", "的", "散点图", "：", "\n", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "c", "=", "(", "0", ",", " ", "0", ",", " ", "0.8", ")", ",", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "40", ")", "\n", "值越", "接近", "0", "，", "指定", "的", "颜色", "越深", "，", "值越", "接近", "1", "，", "指定", "的", "颜色", "越浅", "。", "\n", "15.2", ".", "8", "　", "使用", "颜色", "映射", "\n", "　", "使用", "颜色", "映射", "\n", "颜色", "映射", "\n", "颜色", "映射", " ", "（", "colormap", "）", "是", "一系列", "颜色", "，", "它们", "从", "起始", "颜色", "渐变", "到", "结束", "颜色", "。", "在", "可视化", "中", "，", "颜色", "映射", "用于", "突出", "数据", "的", "规律", "，", "例如", "，", "你", "可能", "用", "较浅", "的", "颜色", "来", "显示", "较", "小", "的", "值", "，", "并", "使用", "较", "深", "\n", "的", "颜色", "来", "显示", "较大", "的", "值", "。", "\n", "模块", "pyplot", " ", "内置", "了", "一组", "颜色", "映射", "。", "要", "使用", "这些", "颜色", "映射", "，", "你", "需要", "告诉", "pyplot", " ", "该", "如何", "设置", "数据", "集中", "每个", "点", "的", "颜色", "。", "下面", "演示", "了", "如何", "根据", "每个", "点", "的", " ", "y", " ", "值来", "设置", "其", "颜色", "：", "\n", "scatter", "_", "squares", ".", "py", "\n", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", "x", "_", "values", " ", "=", " ", "list", "(", "range", "(", "1001", ")", ")", "\n", "y", "_", "values", " ", "=", " ", "[", "x", "*", "*", "2", " ", "for", " ", "x", " ", "in", " ", "x", "_", "values", "]", "\n", "plt", ".", "scatter", "(", "x", "_", "values", ",", " ", "y", "_", "values", ",", " ", "c", "=", "y", "_", "values", ",", " ", "cmap", "=", "plt", ".", "cm", ".", "Blues", ","], ["edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "40", ")", "\n", "#", " ", "设置", "图表", "标题", "并", "给", "坐标轴", "加上", "标签", "\n", "--", "snip", "--", "\n", "我们", "将", "参数", "c", " ", "设置", "成", "了", "一个", " ", "y", " ", "值", "列表", "，", "并", "使用", "参数", "cmap", " ", "告诉", "pyplot", " ", "使用", "哪个", "颜色", "映射", "。", "这些", "代码", "将", " ", "y", " ", "值较", "小", "的", "点", "显示", "为", "浅蓝色", "，", "并", "将", " ", "y", " ", "值", "较大", "的", "点", "显示", "为", "深蓝色", "，", "生成", "的", "图形", "\n", "如图", "15", "-", "7", "所示", "。", "\n", "图", "\n", "图", "15", "-", "7", "　", "使用", "颜色", "映射", "\n", "　", "使用", "颜色", "映射", "Blues", " ", "的", "图表", "\n", "的", "图表", "\n", "注意", "\n", "注意", " ", "　", "要", "了解", "pyplot", " ", "中", "所有", "的", "颜色", "映射", "，", "请", "访问", "http", ":", "/", "/", "matplotlib", ".", "org", "/", " ", "，", "单击", "Examples", "，", "向下", "滚动", "到", "Color", " ", "Examples", "，", "再", "单击", "colormaps", "_", "reference", "。", "\n", "15.2", ".", "9", "　", "自动", "保存", "图表", "\n", "　", "自动", "保存", "图表", "\n", "要", "让", "程序", "自动", "将", "图表", "保存", "到", "文件", "中", "，", "可", "将", "对", "plt", ".", "show", "(", ")", " ", "的", "调用", "替换", "为", "对", "plt", ".", "savefig", "(", ")", " ", "的", "调用", "：", "\n", "plt", ".", "savefig", "(", "'", "squares", "_", "plot", ".", "png", "'", ",", " ", "bbox", "_", "inches", "=", "'", "tight", "'", ")"], ["第一个", "实参", "指定", "要", "以", "什么样", "的", "文件名", "保存", "图表", "，", "这个", "文件", "将", "存储", "到", "scatter", "_", "squares", ".", "py", "所在", "的", "目录", "中", "；", "第二个", "实参", "指定", "将", "图表", "多余", "的", "空白", "区域", "裁剪", "掉", "。", "如果", "要", "保留", "图表", "周围", "多余", "的", "空", "\n", "白", "区域", "，", "可", "省略", "这个", "实参", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "15", "-", "1", " ", "立方", "\n", "立方", " ", "：", "数字", "的", "三次方", "被", "称为", "其", "立方", "。", "请", "绘制", "一个", "图形", "，", "显示", "前", "5", "个", "整数", "的", "立方", "值", "，", "再", "绘制", "一个", "图形", "，", "显示", "前", "5000", "个", "整数", "的", "立方", "值", "。"], ["15", "-", "2", " ", "彩色", "立方", "\n", "彩色", "立方", " ", "：", "给", "你", "前面", "绘制", "的", "立方", "图", "指定", "颜色", "映射", "。", "\n", "15.3", "　", "随机", "漫步", "\n", "　", "随机", "漫步", "\n", "在", "本节", "中", "，", "我们", "将", "使用", "Python", "来", "生成", "随机", "漫步", "数据", "，", "再", "使用", "matplotlib", "以", "引人瞩目", "的", "方式", "将", "这些", "数据", "呈现", "出来", "。", "随机", "漫步", "\n", "随机", "漫步", " ", "是", "这样", "行走", "得到", "的", "路径", "：", "每次", "行走", "都", "完全", "是", "随机", "的", "，", "没有", "\n", "明确", "的", "方向", "，", "结果", "是", "由", "一系列", "随机", "决策", "决定", "的", "。", "你", "可以", "这样", "认为", "，", "随机", "漫步", "就是", "蚂蚁", "在", "晕头转向", "的", "情况", "下", "，", "每次", "都", "沿", "随机", "的", "方向", "前行", "所", "经过", "的", "路径", "。", "\n", "在", "自然界", "、", "物理学", "、", "生物学", "、", "化学", "和", "经济", "领域", "，", "随机", "漫步", "都", "有", "其", "实际", "用途", "。", "例如", "，", "漂浮", "在", "水滴", "上", "的", "花粉", "因", "不断", "受到", "水分子", "的", "挤压", "而", "在", "水面", "上", "移动", "。", "水滴", "中", "的", "分子运动", "是", "随机", "的", "，", "\n", "因此", "花粉", "在", "水面", "上", "的", "运动", "路径", "犹如", "随机", "漫步", "。", "我们", "稍后", "将", "编写", "的", "代码", "模拟", "了", "现实", "世界", "的", "很多", "情形", "。", "\n", "15.3", ".", "1", "　", "创建", "\n", "　", "创建", "RandomWalk", "(", ")", " ", "类", "\n", "类", "\n", "为", "模拟", "随机", "漫步", "，", "我们", "将", "创建", "一个", "名为", "RandomWalk", " ", "的", "类", "，", "它", "随机", "地", "选择", "前进方向", "。", "这个", "类", "需要", "三个", "属性", "，", "其中", "一个", "是", "存储", "随机", "漫步", "次数", "的", "变量", "，", "其他", "两个", "是", "列表", "，", "分别", "存储", "随", "\n", "机", "漫步", "经过", "的", "每个", "点", "的", " ", "x", " ", "和", " ", "y", " ", "坐标", "。"], ["机", "漫步", "经过", "的", "每个", "点", "的", " ", "x", " ", "和", " ", "y", " ", "坐标", "。", "\n", "RandomWalk", " ", "类", "只", "包含", "两个", "方法", "：", "__", "init", "__", "(", ")", " ", "和", "fill", "_", "walk", "(", ")", " ", "，", "其中", "后者", "计算", "随机", "漫步", "经过", "的", "所有", "点", "。", "下面", "先", "来", "看看", "__", "init", "__", "(", ")", " ", "，", "如下", "所示", "：", "\n", "random", "_", "walk", ".", "py", "\n", "❶", " ", "from", " ", "random", " ", "import", " ", "choice", "\n", " ", " ", "class", " ", "RandomWalk", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "一个", "生成", "随机", "漫步", "数据", "的", "类", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "num", "_", "points", "=", "5000", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "初始化", "随机", "漫步", "的", "属性", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "num", "_", "points", " ", "=", " ", "num", "_", "points", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "所有", "随机", "漫步", "都", "始于", "(", "0", ",", " ", "0", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "x", "_", "values", " ", "=", " ", "[", "0", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "y", "_", "values", " ", "=", " ", "[", "0", "]", "\n", "为", "做出", "随机", "决策", "，", "我们", "将", "所有", "可能", "的", "选择", "都", "存储", "在", "一个", "列表", "中", "，", "并", "在", "每次", "做", "决策", "时", "都", "使用", "choice", "(", ")", " ", "来", "决定", "使用", "哪", "种", "选择", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "将", "随机", "漫步", "包含", "的", "默认", "点数", "设"], ["置", "为", "5000", "，", "这大到", "足以", "生成", "有趣", "的", "模式", "，", "同时", "又", "足够", "小", "，", "可", "确保", "能够", "快速", "地", "模拟", "随机", "漫步", "（", "见", "❷", "）", "。", "然后", "，", "在", "❸", "处", "，", "我们", "创建", "了", "两个", "用于", "存储", "x", " ", "和", "y", " ", "值", "的", "列表", "，", "并", "让", "每次", "漫步", "都", "从", "\n", "点", "(", "0", ",", " ", "0", ")", "出发", "。", "\n", "15.3", ".", "2", "　", "选择", "方向", "\n", "　", "选择", "方向", "\n", "我们", "将", "使用", "fill", "_", "walk", "(", ")", " ", "来", "生成", "漫步", "包含", "的", "点", "，", "并", "决定", "每次", "漫步", "的", "方向", "，", "如下", "所示", "。", "请", "将", "这个", "方法", "添加", "到", "random", "_", "walk", ".", "py", "中", "：", "\n", "random", "_", "walk", ".", "py", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "fill", "_", "walk", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "计算", "随机", "漫步", "包含", "的", "所有", "点", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "不断", "漫步", "，", "直到", "列表", "达到", "指定", "的", "长度", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "while", " ", "len", "(", "self", ".", "x", "_", "values", ")", " ", "<", " ", "self", ".", "num", "_", "points", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "决定", "前进方向", "以及", "沿", "这个", "方向", "前进", "的", "距离", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "x", "_", "direction", " ", "=", " ", "choice", "(", "[", "1", ",", " ", "-", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "x", "_", "distance", " ", "=", " ", "choice", "(", "[", "0", ",", " ", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", "]", ")"], ["❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "x", "_", "step", " ", "=", " ", "x", "_", "direction", " ", "*", " ", "x", "_", "distance", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "y", "_", "direction", " ", "=", " ", "choice", "(", "[", "1", ",", " ", "-", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "y", "_", "distance", " ", "=", " ", "choice", "(", "[", "0", ",", " ", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", "]", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "y", "_", "step", " ", "=", " ", "y", "_", "direction", " ", "*", " ", "y", "_", "distance", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "拒绝", "原地踏步", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "x", "_", "step", " ", "=", "=", " ", "0", " ", "and", " ", "y", "_", "step", " ", "=", "=", " ", "0", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "continue", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "计算", "下", "一个点", "的", "x", "和", "y", "值", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "next", "_", "x", " ", "=", " ", "self", ".", "x", "_", "values", "[", "-", "1", "]", " ", "+", " ", "x", "_", "step", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "next", "_", "y", " ", "=", " ", "self", ".", "y", "_", "values", "[", "-", "1", "]", " ", "+", " ", "y", "_", "step", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "x", "_", "values", ".", "append", "(", "next", "_", "x", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "y", "_", "values", ".", "append", "(", "next", "_", "y", ")"], ["self", ".", "y", "_", "values", ".", "append", "(", "next", "_", "y", ")", "\n", "在", "❶", "处", "，", "我们", "建立", "了", "一个", "循环", "，", "这个", "循环不断", "运行", "，", "直到", "漫步", "包含", "所", "需", "数量", "的", "点", "。", "这个", "方法", "的", "主要", "部分", "告诉", "Python", "如何", "模拟", "四种", "漫步", "决定", "：", "向右走", "还是", "向左走", "？", "沿", "指定", "的", "方向", "走", "多", "\n", "远", "？", "向上", "走", "还是", "向下", "走", "？", "沿", "选定", "的", "方向", "走多远", "？", "\n", "我们", "使用", "choice", "(", "[", "1", ",", " ", "-", "1", "]", ")", " ", "给", "x", "_", "direction", " ", "选择", "一个", "值", "，", "结果", "要么", "是", "表示", "向右走", "的", "1", "，", "要么", "是", "表示", "向左走", "的", "-", "1", "（", "见", "❷", "）", "。", "接下来", "，", "choice", "(", "[", "0", ",", " ", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", "]", ")", " ", "随机", "地", "\n", "选择", "一个", "0", "~", "4", "之间", "的", "整数", "，", "告诉", "Python", " ", "沿", "指定", "的", "方向", "走多远", "（", "x", "_", "distance", " ", "）", "。", "（", "通过", "包含", "0", "，", "我们", "不仅", "能够", "沿", "两个", "轴", "移动", "，", "还", "能够", "沿", "y", " ", "轴", "移动", "。", "）", "\n", "在", "❸", "和", "❹", "处", "，", "我们", "将", "移动", "方向", "乘以", "移动", "距离", "，", "以", "确定", "沿", " ", "x", " ", "和", " ", "y", " ", "轴", "移动", "的", "距离", "。", "如果", "x", "_", "step", " ", "为", "正", "，", "将", "向", "右", "移动", "，", "为", "负", "将", "向", "左", "移动", "，", "而", "为", "零", "将", "垂直", "移动", "；", "如果", "y", "_", "step", " ", "为", "正", "，", "就意", "\n", "味", "着", "向上", "移动", "，", "为", "负", "意味着", "向下", "移动", "，", "而", "为", "零", "意味着", "水平", "移动", "。", "如果", "x", "_", "step", " ", "和", "y", "_", "step", " ", "都", "为", "零", "，", "则", "意味着", "原地踏步", "，", "我们", "拒绝", "这样", "的", "情况", "，", "接着", "执行", "下", "一次", "循环", "（", "见", "❺", "）", "。"], ["为", "获取", "漫步", "中", "下", "一个点", "的", " ", "x", " ", "值", "，", "我们", "将", "x", "_", "step", " ", "与", "x", "_", "values", " ", "中", "的", "最后", "一个", "值", "相加", "（", "见", "❻", "）", "，", "对于", " ", "y", " ", "值", "也", "做", "相同", "的", "处理", "。", "获得", "下", "一个点", "的", " ", "x", " ", "值", "和", " ", "y", " ", "值后", "，", "我们", "将", "它们", "分别", "附加", "到", "\n", "列表", "x", "_", "values", " ", "和", "y", "_", "values", " ", "的", "末尾", "。", "\n", "15.3", ".", "3", "　", "绘制", "随机", "漫步", "图", "\n", "　", "绘制", "随机", "漫步", "图", "\n", "下面", "的", "代码", "将", "随机", "漫步", "的", "所有", "点", "都", "绘制", "出来", "：", "\n", "rw", "_", "visual", ".", "py", "\n", " ", " ", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", " ", " ", "from", " ", "random", "_", "walk", " ", "import", " ", "RandomWalk", "\n", " ", " ", "#", " ", "创建", "一个", "RandomWalk", "实例", "，", "并", "将", "其", "包含", "的", "点", "都", "绘制", "出来", "\n", "❶", " ", "rw", " ", "=", " ", "RandomWalk", "(", ")", "\n", " ", " ", "rw", ".", "fill", "_", "walk", "(", ")", "\n", "❷", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", ",", " ", "rw", ".", "y", "_", "values", ",", " ", "s", "=", "15", ")", "\n", " ", " ", "plt", ".", "show", "(", ")"], ["我们", "首先", "导入", "了", "模块", "pyplot", " ", "和", "RandomWalk", " ", "类", "，", "然后", "创建", "了", "一个", "RandomWalk", " ", "实例", "，", "并", "将", "其", "存储", "到", "rw", " ", "中", "（", "见", "❶", "）", "，", "再", "调用", "fill", "_", "walk", "(", ")", " ", "。", "在", "❷", "处", "，", "我们", "将", "随机", "漫步", "包含", "的", "\n", "x", " ", "和", " ", "y", " ", "值", "传递", "给", "scatter", "(", ")", " ", "，", "并", "选择", "了", "合适", "的", "点", "尺寸", "。", "图", "15", "-", "8", "显示", "了", "包含", "5000", "个点", "的", "随机", "漫步", "图", "（", "本节", "的", "示意图", "未", "包含", "matplotlib", "查看器", "部分", "，", "但", "你", "运行", "rw", "_", "visual", ".", "py", "时", "，", "依然", "会", "看", "\n", "到", "）", "。", "\n", "图", "\n", "图", "15", "-", "8", "　", "包含", "\n", "　", "包含", "5000", "个点", "的", "随机", "漫步", "\n", "个点", "的", "随机", "漫步", "\n", "15.3", ".", "4", "　", "模拟", "多次", "随机", "漫步", "\n", "　", "模拟", "多次", "随机", "漫步", "\n", "每次", "随机", "漫步", "都", "不同", "，", "因此", "探索", "可能", "生成", "的", "各种", "模式", "很", "有趣", "。", "要", "在", "不", "多次", "运行", "程序", "的", "情况", "下", "使用", "前面", "的", "代码", "模拟", "多次", "随机", "漫步", "，", "一种", "办法", "是", "将", "这些", "代码", "放在", "一个", "while", " ", "循环", "中", "，", "\n", "如下", "所示", "：", "\n", "rw", "_", "visual", ".", "py", "\n", " ", " ", "import", " ", "matplotlib", ".", "pyplot", " ", "as", " ", "plt", "\n", " ", " ", "from", " ", "random", "_", "walk", " ", "import", " ", "RandomWalk", "\n", " ", " ", "#", " ", "只要", "程序", "处于", "活动状态", "，", "就", "不断", "地", "模拟", "随机", "漫步", "\n", " ", " ", "while", " ", "True", ":"], ["#", " ", "只要", "程序", "处于", "活动状态", "，", "就", "不断", "地", "模拟", "随机", "漫步", "\n", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "RandomWalk", "实例", "，", "并", "将", "其", "包含", "的", "点", "都", "绘制", "出来", "\n", " ", " ", " ", " ", " ", " ", "rw", " ", "=", " ", "RandomWalk", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "rw", ".", "fill", "_", "walk", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", ",", " ", "rw", ".", "y", "_", "values", ",", " ", "s", "=", "15", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "show", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", "keep", "_", "running", " ", "=", " ", "input", "(", "\"", "Make", " ", "another", " ", "walk", "?", " ", "(", "y", "/", "n", ")", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "keep", "_", "running", " ", "=", "=", " ", "'", "n", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "break", "\n", "这些", "代码", "模拟", "一次", "随机", "漫步", "，", "在", "matplotlib", "查看器", "中", "显示", "结果", "，", "再", "在", "不", "关闭", "查看器", "的", "情况", "下", "暂停", "。", "如果", "你", "关闭", "查看器", "，", "程序", "将", "询问", "你", "是否", "要", "再", "模拟", "一次", "随机", "漫步", "。", "如果", "你", "输入", "y", " ", "，", "可", "\n", "模拟", "多次", "随机", "漫步", "：", "这些", "随机", "漫步", "都", "在", "起点", "附近", "进行", "，", "大多", "沿", "特定", "方向", "偏离", "起点", "，", "漫步", "点", "分布", "不", "均匀", "等", "。", "要", "结束", "程序", "，", "请", "输入", "n", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "别忘了", "将", "❶", "处", "的", "input", "(", ")", " ", "替换", "为", "raw", "_", "input", "(", ")", " ", "。"], ["15.3", ".", "5", "　", "设置", "随机", "漫步", "图", "的", "样式", "\n", "　", "设置", "随机", "漫步", "图", "的", "样式", "\n", "在", "本节", "中", "，", "我们", "将", "定制", "图表", "，", "以", "突出", "每次", "漫步", "的", "重要", "特征", "，", "并", "让", "分散", "注意力", "的", "元素", "不", "那么", "显眼", "。", "为此", "，", "我们", "确定", "要", "突出", "的", "元素", "，", "如", "漫步", "的", "起点", "、", "终点", "和", "经过", "的", "路径", "。", "接下来", "确定", "\n", "要", "使", "其", "不", "那么", "显眼", "的", "元素", "，", "如", "刻度", "标记", "和", "标签", "。", "最终", "的", "结果", "是", "简单", "的", "可视化", "表示", "，", "清楚", "地", "指出", "了", "每次", "漫步", "经过", "的", "路径", "。", "\n", "15.3", ".", "6", "　", "给", "点着", "色", "\n", "　", "给", "点着", "色", "\n", "我们", "将", "使用", "颜色", "映射", "来", "指出", "漫步", "中", "各点", "的", "先后顺序", "，", "并", "删除", "每个", "点", "的", "黑色", "轮廓", "，", "让", "它们", "的", "颜色", "更", "明显", "。", "为", "根据", "漫步", "中", "各点", "的", "先后顺序", "进行", "着色", "，", "我们", "传递", "参数", "c", " ", "，", "并", "将", "其", "设置", "为", "\n", "一个", "列表", "，", "其中", "包含", "各点", "的", "先后顺序", "。", "由于", "这些", "点", "是", "按", "顺序", "绘制", "的", "，", "因此", "给", "参数", "c", " ", "指定", "的", "列表", "只", "需", "包含", "数字", "1", "~", "5000", "，", "如下", "所示", "：", "\n", "rw", "_", "visual", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "创建", "一个", "RandomWalk", "实例", "，", "并", "将", "其", "包含", "的", "点", "都", "绘制", "出来", "\n", " ", " ", " ", " ", " ", " ", "rw", " ", "=", " ", "RandomWalk", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "rw", ".", "fill", "_", "walk", "(", ")", "\n", "❶", " ", " ", " ", " ", " ", "point", "_", "numbers", " ", "=", " ", "list", "(", "range", "(", "rw", ".", "num", "_", "points", ")", ")"], ["❶", " ", " ", " ", " ", " ", "point", "_", "numbers", " ", "=", " ", "list", "(", "range", "(", "rw", ".", "num", "_", "points", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", ",", " ", "rw", ".", "y", "_", "values", ",", " ", "c", "=", "point", "_", "numbers", ",", " ", "cmap", "=", "plt", ".", "cm", ".", "Blues", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "15", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "show", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "keep", "_", "running", " ", "=", " ", "input", "(", "\"", "Make", " ", "another", " ", "walk", "?", " ", "(", "y", "/", "n", ")", ":", " ", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "在", "❶", "处", "，", "我们", "使用", "了", "range", "(", ")", " ", "生成", "了", "一个", "数字", "列表", "，", "其中", "包含", "的", "数字", "个数", "与", "漫步", "包含", "的", "点数", "相同", "。", "接下来", "，", "我们", "将", "这个", "列表", "存储", "在", "point", "_", "numbers", " ", "中", "，", "以便", "后面", "使用", "它", "来", "设", "\n", "置", "每个", "漫步", "点", "的", "颜色", "。", "我们", "将", "参数", "c", " ", "设置", "为", "point", "_", "numbers", " ", "，", "指定", "使用", "颜色", "映射", "Blues", " ", "，", "并", "传递", "实参", "edgecolor", "=", "none", " ", "以", "删除", "每个", "点", "周围", "的", "轮廓", "。", "最终", "的", "随机", "漫步", "图", "从", "浅蓝", "\n", "色", "渐变", "为", "深蓝色", "，", "如图", "15", "-", "9", "所示", "。"], ["图", "\n", "图", "15", "-", "9", "　", "使用", "颜色", "映射", "\n", "　", "使用", "颜色", "映射", "Blues", " ", "着色", "的", "随机", "漫步", "图", "\n", "着色", "的", "随机", "漫步", "图", "\n", "15.3", ".", "7", "　", "重新", "绘制", "起点", "和", "终点", "\n", "　", "重新", "绘制", "起点", "和", "终点", "\n", "除了", "给", "随机", "漫步", "的", "各个", "点着", "色", "，", "以", "指出", "它们", "的", "先后顺序", "外", "，", "如果", "还", "能", "呈现", "随机", "漫步", "的", "起点", "和", "终点", "就", "更好", "了", "。", "为此", "，", "可", "在", "绘制", "随机", "漫步", "图后", "重新", "绘制", "起点", "和", "终点", "。", "我们", "让", "起点", "和", "终", "\n", "点", "变得", "更大", "，", "并", "显示", "为", "不同", "的", "颜色", "，", "以", "突出", "它们", "，", "如下", "所示", "：", "\n", "rw", "_", "visual", ".", "py", "\n", "--", "snip", "--", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", ",", " ", "rw", ".", "y", "_", "values", ",", " ", "c", "=", "point", "_", "numbers", ",", " ", "cmap", "=", "plt", ".", "cm", ".", "Blues", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "15", ")", "\n", " ", " ", " ", " ", "#", " ", "突出", "起点", "和", "终点", "\n", " ", " ", " ", " ", "plt", ".", "scatter", "(", "0", ",", " ", "0", ",", " ", "c", "=", "'", "green", "'", ",", " ", "edgecolors", "=", "'", "none", "'", ",", " ", "s", "=", "100", ")", "\n", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", "[", "-", "1", "]", ",", " ", "rw", ".", "y", "_", "values", "[", "-", "1", "]", ",", " ", "c", "=", "'", "red", "'", ",", " ", "edgecolors", "=", "'", "none", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "s", "=", "100", ")"], ["s", "=", "100", ")", "\n", " ", " ", " ", " ", "plt", ".", "show", "(", ")", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "为", "突出", "起点", "，", "我们", "使用", "绿色", "绘制", "点", "(", "0", ",", " ", "0", ")", "，", "并", "使", "其", "比", "其他", "点大", "（", "s", "=", "100", " ", "）", "。", "为", "突出", "终点", "，", "我们", "在", "漫步", "包含", "的", "最后", "一个", " ", "x", " ", "和", " ", "y", " ", "值处", "绘制", "一个点", "，", "将", "其", "颜色", "设置", "为", "红色", "，", "并", "将", "尺寸", "设置", "\n", "为", "100", "。", "请", "务必", "将", "这些", "代码", "放在", "调用", "plt", ".", "show", "(", ")", " ", "的", "代码", "前面", "，", "确保", "在", "其他", "点", "的", "上面", "绘制", "起点", "和", "终点", "。", "\n", "如果", "你", "现在", "运行", "这些", "代码", "，", "将", "能", "准确", "地", "知道", "每次", "随机", "漫步", "的", "起点", "和", "终点", "（", "如果", "起点", "和", "终点", "不", "明显", "，", "请", "调整", "它们", "的", "颜色", "和", "大小", "，", "直到", "明显", "为止", "）", "。", "\n", "15.3", ".", "8", "　", "隐藏", "坐标轴", "\n", "　", "隐藏", "坐标轴", "\n", "下面", "来", "隐藏", "这个", "图表", "中", "的", "坐标轴", "，", "以免", "我们", "注意", "的", "是", "坐标轴", "而", "不是", "随机", "漫步", "路径", "。", "要", "隐藏", "坐标轴", "，", "可", "使用", "如下", "代码", "：", "\n", "rw", "_", "visual", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "while", " ", "True", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", "[", "-", "1", "]", ",", " ", "rw", ".", "y", "_", "values", "[", "-", "1", "]", ",", " ", "c", "=", "'", "red", "'", ",", " ", "edgecolors", "=", "'", "none", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "s", "=", "100", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "隐藏", "坐标轴"], ["s", "=", "100", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "隐藏", "坐标轴", "\n", "❶", " ", " ", " ", " ", " ", "plt", ".", "axes", "(", ")", ".", "get", "_", "xaxis", "(", ")", ".", "set", "_", "visible", "(", "False", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "axes", "(", ")", ".", "get", "_", "yaxis", "(", ")", ".", "set", "_", "visible", "(", "False", ")", "\n", " ", " ", " ", " ", " ", " ", "plt", ".", "show", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "为", "修改", "坐标轴", "，", "使用", "了", "函数", "plt", ".", "axes", "(", ")", " ", "（", "见", "❶", "）", "来", "将", "每条", "坐标轴", "的", "可见", "性", "都", "设置", "为", "False", " ", "。", "随着", "你", "越来越", "多地", "进行", "数据", "可视化", "，", "经常", "会", "看到", "这种", "串接", "方法", "的", "方式", "。", "\n", "如果", "你", "现在", "运行", "rw", "_", "visual", ".", "py", "，", "将", "看到", "一系列", "图形", "，", "但", "看不到", "坐标轴", "。", "\n", "15.3", ".", "9", "　", "增加", "点数", "\n", "　", "增加", "点数", "\n", "下面", "来", "增加", "点数", "，", "以", "提供", "更", "多", "的", "数据", "。", "为此", "，", "我们", "在", "创建", "RandomWalk", " ", "实例", "时", "增大", "num", "_", "points", " ", "的", "值", "，", "并", "在", "绘图", "时", "调整", "每个", "点", "的", "大小", "，", "如下", "所示", "：", "\n", "rw", "_", "visual", ".", "py", "\n", "--", "snip", "--", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "#", "创建", "一个", "RandomWalk", "实例", "，", "并", "将", "其", "包含", "的", "点", "都", "绘制", "出来", "\n", " ", " ", " ", " ", "rw", " ", "=", " ", "RandomWalk", "(", "50000", ")", "\n", " ", " ", " ", " ", "rw", ".", "fill", "_", "walk", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "绘制", "点", "并", "将", "图形", "显示", "出来"], ["rw", ".", "fill", "_", "walk", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "绘制", "点", "并", "将", "图形", "显示", "出来", "\n", " ", " ", " ", " ", "point", "_", "numbers", " ", "=", " ", "list", "(", "range", "(", "rw", ".", "num", "_", "points", ")", ")", "\n", " ", " ", " ", " ", "plt", ".", "scatter", "(", "rw", ".", "x", "_", "values", ",", " ", "rw", ".", "y", "_", "values", ",", " ", "c", "=", "point", "_", "numbers", ",", " ", "cmap", "=", "plt", ".", "cm", ".", "Blues", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "edgecolor", "=", "'", "none", "'", ",", " ", "s", "=", "1", ")", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["这个", "示例", "模拟", "了", "一次", "包含", "50", " ", "000", "个点", "的", "随机", "漫步", "（", "以", "模拟", "现实情况", "）", "，", "并", "将", "每个", "点", "的", "大小", "都", "设置", "为", "1", "。", "最终", "的", "随机", "漫步", "图", "更", "纤细", "，", "犹如", "云朵", "，", "如图", "15", "-", "10", "所示", "。", "正如", "你", "看到", "的", "，", "我们", "\n", "使用", "简单", "的", "散点图", "制作", "出", "了", "一件", "艺术品", "！", "\n", "请", "尝试", "修改", "上述", "代码", "，", "看看", "将", "漫步", "包含", "的", "点数", "增加", "到", "多少", "后", "，", "程序", "的", "运行", "速度", "变得", "极其", "缓慢", "或", "绘制", "出", "的", "图形", "变得", "很", "难看", "。", "\n", "图", "\n", "图", "15", "-", "10", "　", "包含", "\n", "　", "包含", "50", " ", "000", "个点", "的", "随机", "漫步", "\n", "个点", "的", "随机", "漫步", "\n", "15.3", ".", "10", "　", "调整", "尺寸", "以", "适合", "屏幕", "\n", "　", "调整", "尺寸", "以", "适合", "屏幕", "\n", "图表", "适合", "屏幕", "大", "小时", "，", "更能", "有效", "地", "将", "数据", "中", "的", "规律", "呈现", "出来", "。", "为", "让", "绘图", "窗口", "更", "适合", "屏幕", "大小", "，", "可像", "下面", "这样", "调整", "matplotlib", "输出", "的", "尺寸", "：", "\n", "rw", "_", "visual", ".", "py", "\n", "--", "snip", "--", "\n", "while", " ", "True", ":", "\n", " ", " ", " ", " ", "#", " ", "创建", "一个", "RandomWalk", "实例", "，", "并", "将", "其", "包含", "的", "点", "都", "绘制", "出来", "\n", " ", " ", " ", " ", "rw", " ", "=", " ", "RandomWalk", "(", ")", "\n", " ", " ", " ", " ", "rw", ".", "fill", "_", "walk", "(", ")", "\n", " ", " ", " ", " ", "#", " ", "设置", "绘图", "窗口", "的", "尺寸", "\n", " ", " ", " ", " ", "plt", ".", "figure", "(", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["plt", ".", "figure", "(", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "函数", "figure", "(", ")", " ", "用于", "指定", "图表", "的", "宽度", "、", "高度", "、", "分辨率", "和", "背景色", "。", "你", "需要", "给", "形参", "figsize", " ", "指定", "一个", "元组", "，", "向", "matplotlib", "指出", "绘图", "窗口", "的", "尺寸", "，", "单位", "为", "英寸", "。", "\n", "Python", "假定", "屏幕", "分辨率", "为", "80", "像素", "/", "英寸", "，", "如果", "上述", "代码", "指定", "的", "图表", "尺寸", "不", "合适", "，", "可", "根据", "需要", "调整", "其中", "的", "数字", "。", "如果", "你", "知道", "自己", "的", "系统", "的", "分辨率", "，", "可", "使用", "形参", "dpi", " ", "向", "figure", "(", ")", " ", "传递", "\n", "该", "分辨率", "，", "以", "有效", "地", "利用", "可用", "的", "屏幕", "空间", "，", "如下", "所示", "：", "\n", "plt", ".", "figure", "(", "dpi", "=", "128", ",", " ", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "15", "-", "3", " ", "分子运动", "\n", "分子运动", " ", "：", "修改", "rw", "_", "visual", ".", "py", "，", "将", "其中", "的", "plt", ".", "scatter", "(", ")", " ", "替换", "为", "plt", ".", "plot", "(", ")", " ", "。", "为", "模拟", "花粉", "在", "水滴", "表面", "的", "运动", "路径", "，", "向", "plt", ".", "plot", "(", ")", " ", "传递", "rw", ".", "x", "_", "values", "\n", "和", "rw", ".", "y", "_", "values", " ", "，", "并", "指定", "实参", "值", "linewidth", " ", "。", "使用", "5000", "个点", "而", "不是", "50", " ", "000", "个点", "。", "\n", "15", "-", "4", " ", "改进", "的", "随机", "漫步"], ["15", "-", "4", " ", "改进", "的", "随机", "漫步", "\n", "改进", "的", "随机", "漫步", " ", "：", "在", "类", "RandomWalk", " ", "中", "，", "x", "_", "step", " ", "和", "y", "_", "step", " ", "是", "根据", "相同", "的", "条件", "生成", "的", "：", "从", "列表", "[", "1", ",", " ", "-", "1", "]", " ", "中", "随机", "地", "选择", "方向", "，", "并", "从", "列表", "[", "0", ",", " ", "1", ",", " ", "2", ",", " ", "3", ",", " ", "4", "]", "\n", "中", "随机", "地", "选择", "距离", "。", "请", "修改", "这些", "列表", "中", "的", "值", "，", "看看", "对", "随机", "漫步", "路径", "有何", "影响", "。", "尝试", "使用", "更长", "的", "距离", "选择", "列表", "，", "如", "0", "~", "8", "；", "或者", "将", "-", "1", "从", " ", "x", " ", "或", " ", "y", " ", "方向", "列表", "中", "删除", "。", "\n", "15", "-", "5", " ", "重构", "\n", "重构", " ", "：", "方法", "fill", "_", "walk", "(", ")", " ", "很长", "。", "请", "新建", "一个", "名为", "get", "_", "step", "(", ")", " ", "的", "方法", "，", "用于", "确定", "每次", "漫步", "的", "距离", "和", "方向", "，", "并", "计算", "这次", "漫步", "将", "如何", "移动", "。", "然后", "，", "\n", "在", "fill", "_", "walk", "(", ")", " ", "中", "调用", "get", "_", "step", "(", ")", " ", "两次", "：", "\n", "x", "_", "step", " ", "=", " ", "get", "_", "step", "(", ")", "\n", "y", "_", "step", " ", "=", " ", "get", "_", "step", "(", ")", "\n", "通过", "这样", "的", "重构", "，", "可", "缩小", "fill", "_", "walk", "(", ")", " ", "的", "规模", "，", "让", "这个", "方法", "阅读", "和", "理解", "起来", "更", "容易", "。", "\n", "15.4", "　", "使用", "\n", "　", "使用", "Pygal", "模拟", "掷骰子", "\n", "模拟", "掷骰子", "\n", "在", "本节", "中", "，", "我们", "将", "使用", "Python", "可视化", "包", "Pygal", "来", "生成", "可", "缩放", "的", "矢量", "图形文件", "。", "对于", "需要", "在", "尺寸", "不同", "的", "屏幕", "上", "显示", "的", "图表", "，", "这", "很", "有用", "，", "因为", "它们", "将", "自动", "缩放", "，", "以", "适合", "观看", "者", "的", "屏幕", "。"], ["如果", "你", "打算", "以", "在线", "方式", "使用", "图表", "，", "请", "考虑", "使用", "Pygal", "来", "生成", "它们", "，", "这样", "它们", "在", "任何", "设备", "上", "显示", "时", "都", "会", "很", "美观", "。", "\n", "在", "这个", "项目", "中", "，", "我们", "将", "对", "掷骰子", "的", "结果", "进行", "分析", "。", "掷", "6", "面", "的", "常规", "骰子", "时", "，", "可能", "出现", "的", "结果", "为", "1", "~", "6", "点", "，", "且", "出现", "每种", "结果", "的", "可能性", "相同", "。", "然而", "，", "如果", "同时", "掷", "两个", "骰子", "，", "某些", "点数", "出现", "的", "\n", "可能性", "将", "比", "其他", "点数", "大", "。", "为", "确定", "哪些", "点数", "出现", "的", "可能性", "最大", "，", "我们", "将", "生成", "一个", "表示", "掷骰子", "结果", "的", "数据", "集", "，", "并", "根据", "结果", "绘制", "出", "一个", "图形", "。", "\n", "在", "数学", "领域", "，", "常常", "利用", "掷骰子", "来", "解释", "各种", "数据分析", "，", "但", "它", "在", "赌场", "和", "其他", "博弈", "场景", "中", "也", "得到", "了", "实际", "应用", "，", "在", "游戏", "《", "大富翁", "》", "以及", "众多", "角色扮演", "游戏", "中", "亦", "如此", "。", "\n", "15.4", ".", "1", "　", "安装", "\n", "　", "安装", "Pygal", "\n", "请", "使用", "pip", " ", "来", "安装", "Pygal", "（", "如果", "还", "未", "使用", "过", "pip", " ", "，", "请参阅", "12.2", ".", "1", "节", "）", "。"], ["在", "Linux", "和", "OS", " ", "X", "系统", "中", "，", "应", "执行", "的", "命令", "类似", "于", "下面", "这样", "：", "\n", "pip", " ", "install", " ", "--", "user", " ", "pygal", "\n", "在", "Windows", "系统", "中", "，", "命令", "类似", "于", "下面", "这样", "：", "\n", "python", " ", "-", "m", " ", "pip", " ", "install", " ", "--", "user", " ", "pygal", "\n", "注意", "\n", "注意", " ", "　", "你", "可能", "需要", "使用", "命令", "pip3", " ", "而", "不是", "pip", " ", "，", "如果", "这", "还是", "不管", "用", "，", "你", "可能", "需要", "删除", "标志", "--", "user", " ", "。", "\n", "15.4", ".", "2", "　", "\n", "　", "Pygal", "画廊", "\n", "画廊", "\n", "要", "了解", "使用", "Pygal", "可", "创建", "什么样", "的", "图表", "，", "请", "查看", "图表", "类型", "画廊", "：", "访问", "http", ":", "/", "/", "www", ".", "pygal", ".", "org", "/", " ", "，", "单击", "Documentation", "，", "再", "单击", "Chart", " ", "types", "。", "每个", "示例", "都", "包含", "源代码", "，", "让", "你", "知道", "这些", "图表", "是", "如何", "\n", "生成", "的", "。", "\n", "15.4", ".", "3", "　", "创建", "\n", "　", "创建", "Die", " ", "类", "\n", "类", "\n", "下面", "的", "类", "模拟", "掷", "一个", "骰子", "：", "\n", "die", ".", "py", "\n", " ", " ", "from", " ", "random", " ", "import", " ", "randint", "\n", " ", " ", "class", " ", "Die", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "表示", "一个", "骰子", "的", "类", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "def", " ", "__", "init", "__", "(", "self", ",", " ", "num", "_", "sides", "=", "6", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "骰子", "默认", "为", "6", "面", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "self", ".", "num", "_", "sides", " ", "=", " ", "num", "_", "sides"], ["self", ".", "num", "_", "sides", " ", "=", " ", "num", "_", "sides", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "roll", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "\"", "返回", "一个", "位于", "1", "和", "骰子", "面数", "之间", "的", "随机", "值", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "randint", "(", "1", ",", " ", "self", ".", "num", "_", "sides", ")", "\n", "方法", "__", "init", "__", "(", ")", " ", "接受", "一个", "可", "选", "参数", "。", "创建", "这个", "类", "的", "实例", "时", "，", "如果", "没有", "指定", "任何", "实参", "，", "面数", "默认", "为", "6", "；", "如果", "指定", "了", "实参", "，", "这个", "值", "将", "用于", "设置", "骰子", "的", "面数", "（", "见", "❶", "）", "。", "骰子", "是", "根据", "面", "\n", "数", "命名", "的", "，", "6", "面", "的", "骰子", "名为", "D6", "，", "8", "面", "的", "骰子", "名为", "D8", "，", "以此类推", "。", "\n", "方法", "roll", "(", ")", " ", "使用", "函数", "randint", "(", ")", " ", "来", "返回", "一个", "1", "和", "面数", "之间", "的", "随机数", "（", "见", "❷", "）", "。", "这个", "函数", "可能", "返回", "起始值", "1", "、", "终止", "值", "num", "_", "sides", " ", "或", "这", "两个", "值", "之间", "的", "任何", "整数", "。", "\n", "15.4", ".", "4", "　", "掷骰子", "\n", "　", "掷骰子", "\n", "使用", "这个", "类来", "创建", "图表", "前", "，", "先来", "掷", "D6", "骰子", "，", "将", "结果", "打印", "出来", "，", "并", "检查", "结果", "是否", "合理", "：", "\n", "die", "_", "visual", ".", "py", "\n", " ", " ", "from", " ", "die", " ", "import", " ", "Die", "\n", " ", " ", "#", " ", "创建", "一个", "D6", "\n", "❶", " ", "die", " ", "=", " ", "Die", "(", ")", "\n", " ", " ", "#", " ", "掷", "几次", "骰子", "，", "并", "将", "结果", "存储", "在", "一个", "列表", "中", "\n", " ", " ", "results", " ", "=", " ", "[", "]"], ["#", " ", "掷", "几次", "骰子", "，", "并", "将", "结果", "存储", "在", "一个", "列表", "中", "\n", " ", " ", "results", " ", "=", " ", "[", "]", "\n", "❷", " ", "for", " ", "roll", "_", "num", " ", "in", " ", "range", "(", "100", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "result", " ", "=", " ", "die", ".", "roll", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "results", ".", "append", "(", "result", ")", "\n", " ", " ", "print", "(", "results", ")", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "Die", " ", "实例", "，", "其面", "数为", "默认值", "6", "。", "在", "❷", "处", "，", "我们", "掷骰子", "100", "次", "，", "并", "将", "每次", "的", "结果", "都", "存储", "在", "列表", "results", " ", "中", "。", "下面", "是", "一个", "示例", "结果", "集", "：", "\n", "[", "4", ",", " ", "6", ",", " ", "5", ",", " ", "6", ",", " ", "1", ",", " ", "5", ",", " ", "6", ",", " ", "3", ",", " ", "5", ",", " ", "3", ",", " ", "5", ",", " ", "3", ",", " ", "2", ",", " ", "2", ",", " ", "1", ",", " ", "3", ",", " ", "1", ",", " ", "5", ",", " ", "3", ",", " ", "6", ",", " ", "3", ",", " ", "6", ",", " ", "5", ",", " ", "4", ",", "\n", " ", "1", ",", " ", "1", ",", " ", "4", ",", " ", "2", ",", " ", "3", ",", " ", "6", ",", " ", "4", ",", " ", "2", ",", " ", "6", ",", " ", "4", ",", " ", "1", ",", " ", "3", ",", " ", "2", ",", " ", "5", ",", " ", "6", ",", " ", "3", ",", " ", "6", ",", " ", "2", ",", " ", "1", ",", " ", "1", ",", " ", "3", ",", " ", "4", ",", " ", "1", ",", " ", "4", ",", "\n", " ", "3", ",", " ", "5", ",", " ", "1", ",", " ", "4", ",", " ", "5", ",", " ", "5", ",", " ", "2", ",", " ", "3", ",", " ", "3", ",", " ", "1", ",", " ", "2", ",", " ", "3", ",", " ", "5", ",", " ", "6", ",", " ", "2", ",", " ", "5", ",", " ", "6", ",", " ", "1", ",", " ", "3", ",", " ", "2", ",", " ", "1", ",", " ", "1", ",", " ", "1", ",", " ", "6", ",", "\n", " ", "5", ",", " ", "5", ",", " ", "2", ",", " ", "2", ",", " ", "6", ",", " ", "4", ",", " ", "1", ",", " ", "4", ",", " ", "5", ",", " ", "1", ",", " ", "1", ",", " ", "1", ",", " ", "4", ",", " ", "5", ",", " ", "3", ",", " ", "3", ",", " ", "1", ",", " ", "3", ",", " ", "5", ",", " ", "4", ",", " ", "5", ",", " ", "6", ",", " ", "5", ",", " ", "4", ","], ["1", ",", " ", "5", ",", " ", "1", ",", " ", "2", "]", "\n", "通过", "快速", "扫描", "这些", "结果", "可知", "，", "Die", " ", "类", "看起来", "没有", "问题", "。", "我们", "见到", "了", "值", "1", "和", "6", "，", "这", "表明", "返回", "了", "最大", "和", "最小", "的", "可能", "值", "；", "我们", "没有", "见到", "0", "或", "7", "，", "这", "表明", "结果", "都", "在", "正确", "的", "范围", "内", "。", "我们", "还", "看到", "\n", "了", "1", "~", "6", "的", "所有", "数字", "，", "这", "表明", "所有", "可能", "的", "结果", "都", "出现", "了", "。", "\n", "15.4", ".", "5", "　", "分析", "结果", "\n", "　", "分析", "结果", "\n", "为", "分析", "掷", "一个", "D6", "骰子", "的", "结果", "，", "我们", "计算", "每个", "点数", "出现", "的", "次数", "：", "\n", "die", "_", "visual", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "掷", "几次", "骰子", "，", "并", "将", "结果", "存储", "在", "一个", "列表", "中", "\n", " ", " ", "results", " ", "=", " ", "[", "]", "\n", "❶", " ", "for", " ", "roll", "_", "num", " ", "in", " ", "range", "(", "1000", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "result", " ", "=", " ", "die", ".", "roll", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "results", ".", "append", "(", "result", ")", "\n", " ", " ", "#", " ", "分析", "结果", "\n", " ", " ", "frequencies", " ", "=", " ", "[", "]", "\n", "❷", " ", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", " ", "die", ".", "num", "_", "sides", "+", "1", ")", ":", "\n", "❸", " ", " ", " ", " ", " ", "frequency", " ", "=", " ", "results", ".", "count", "(", "value", ")", "\n", "❹", " ", " ", " ", " ", " ", "frequencies", ".", "append", "(", "frequency", ")", "\n", " ", " ", "print", "(", "frequencies", ")"], ["由于", "我们", "将", "使用", "Pygal", "来", "进行", "分析", "，", "而", "不是", "将", "结果", "打印", "出来", "，", "因此", "可以", "将", "模拟", "掷骰子", "的", "次数", "增加", "到", "1000", "（", "见", "❶", "）", "。", "为", "分析", "结果", "，", "我们", "创建", "了", "空", "列表", "frequencies", " ", "，", "用于", "存储", "每种", "\n", "点数", "出现", "的", "次数", "。", "在", "❷", "处", "，", "我们", "遍历", "可能", "的", "点数", "（", "这里", "为", "1", "~", "6", "）", "，", "计算", "每种", "点数", "在", "results", " ", "中", "出现", "了", "多少", "次", "（", "见", "❸", "）", "，", "并", "将", "这个", "值", "附加", "到", "列表", "frequencies", " ", "的", "末尾", "（", "见", "❹", "）", "。", "\n", "接下来", "，", "我们", "在", "可视化", "之前", "将", "这个", "列表", "打印", "出来", "：", "\n", "[", "155", ",", " ", "167", ",", " ", "168", ",", " ", "170", ",", " ", "159", ",", " ", "181", "]", "\n", "结果", "看起来", "是", "合理", "的", "：", "我们", "看到", "了", "6", "个值", "—", "—", "掷", "D6", "骰子", "时", "可能", "出现", "的", "每个", "点数", "对应", "一个", "；", "我们", "还", "发现", "，", "没有", "任何", "点数", "出现", "的", "频率", "比", "其他", "点数", "高", "很多", "。", "下面", "来", "可视化", "这些", "结果", "。", "\n", "15.4", ".", "6", "　", "绘制", "直方图", "\n", "　", "绘制", "直方图", "\n", "有", "了", "频率", "列表", "后", "，", "我们", "就", "可以", "绘制", "一个", "表示", "结果", "的", "直方图", "。", "直方图", "\n", "直方图", " ", "是", "一种", "条形图", "，", "指出", "了", "各种", "结果", "出现", "的", "频率", "。", "创建", "这种", "直方图", "的", "代码", "如下", "：", "\n", "die", "_", "visual", ".", "py", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "分析", "结果", "\n", " ", " ", "frequencies", " ", "=", " ", "[", "]", "\n", " ", " ", "for", " ", "value", " ", "in", " ", "range", "(", "1", ",", " ", "die", ".", "num", "_", "sides", "+", "1", ")", ":"], ["for", " ", "value", " ", "in", " ", "range", "(", "1", ",", " ", "die", ".", "num", "_", "sides", "+", "1", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "frequency", " ", "=", " ", "results", ".", "count", "(", "value", ")", "\n", " ", " ", " ", " ", " ", " ", "frequencies", ".", "append", "(", "frequency", ")", "\n", " ", " ", "#", " ", "对", "结果", "进行", "可视化", "\n", "❶", " ", "hist", " ", "=", " ", "pygal", ".", "Bar", "(", ")", "\n", " ", " ", "hist", ".", "title", " ", "=", " ", "\"", "Results", " ", "of", " ", "rolling", " ", "one", " ", "D6", " ", "1000", " ", "times", ".", "\"", "\n", "❷", " ", "hist", ".", "x", "_", "labels", " ", "=", " ", "[", "'", "1", "'", ",", " ", "'", "2", "'", ",", " ", "'", "3", "'", ",", " ", "'", "4", "'", ",", " ", "'", "5", "'", ",", " ", "'", "6", "'", "]", "\n", " ", " ", "hist", ".", "x", "_", "title", " ", "=", " ", "\"", "Result", "\"", "\n", " ", " ", "hist", ".", "y", "_", "title", " ", "=", " ", "\"", "Frequency", " ", "of", " ", "Result", "\"", "\n", "❸", " ", "hist", ".", "add", "(", "'", "D6", "'", ",", " ", "frequencies", ")", "\n", " ", " ", "hist", ".", "render", "_", "to", "_", "file", "(", "'", "die", "_", "visual", ".", "svg", "'", ")", "\n", "为", "创建", "条形图", "，", "我们", "创建", "了", "一个", "pygal", ".", "Bar", "(", ")", " ", "实例", "，", "并", "将", "其", "存储", "在", "hist", " ", "中", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "设置", "hist", " ", "的", "属性", "title", " ", "（", "用于", "标示", "直方图", "的", "字符串", "）", "，", "将", "掷", "D6", "骰子", "的", "可"], ["能", "结果", "用作", " ", "x", " ", "轴", "的", "标签", "（", "见", "❷", "）", "，", "并", "给", "每个", "轴", "都", "添加", "了", "标题", "。", "在", "❸", "处", "，", "我们", "使用", "add", "(", ")", " ", "将", "一系列", "值", "添加", "到", "图表", "中", "（", "向", "它", "传递", "要", "给", "添加", "的", "值", "指定", "的", "标签", "，", "还有", "一个", "列表", "，", "其中", "包含", "\n", "将", "出现", "在", "图表", "中", "的", "值", "）", "。", "最后", "，", "我们", "将", "这个", "图表", "渲染", "为", "一个", "SVG", "文件", "，", "这种", "文件", "的", "扩展名", "必须", "为", ".", "svg", "。", "\n", "要", "查看", "生成", "的", "直方图", "，", "最", "简单", "的", "方式", "是", "使用", "Web", "浏览器", "。", "为此", "，", "在", "任何", "Web", "浏览器", "中", "新建", "一个", "标签", "页", "，", "再", "在", "其中", "打开", "文件", "die", "_", "visual", ".", "svg", "（", "它", "位于", "die", "_", "visual", ".", "py", "所在", "的", "文件夹", "中", "）", "。", "你", "\n", "将", "看到", "一个", "类似", "于图", "15", "-", "11", "所示", "的", "图表", "（", "为", "方便", "印刷", "，", "我", "稍微", "修改", "了", "这个", "图表", "；", "默认", "情况", "下", "，", "Pygal", "生成", "的", "图表", "的", "背景", "比", "你", "在", "图", "15", "-", "11", "中", "看到", "的", "要", "暗", "）", "。", "\n", "图", "\n", "图", "15", "-", "11", "　", "使用", "\n", "　", "使用", "Pygal", "创建", "的", "简单", "条形图", "\n", "创建", "的", "简单", "条形图", "\n", "注意", "，", "Pygal", "让", "这个", "图表", "具有", "交互性", "：", "如果", "你", "将", "鼠标", "指向", "该", "图表", "中", "的", "任何", "条形", "，", "将", "看到", "与", "之", "相关联", "的", "数据", "。", "在", "同一个", "图表", "中", "绘制", "多个", "数据", "集时", "，", "这项", "功能", "显得", "特别", "有用", "。", "\n", "15.4", ".", "7", "　", "同时", "掷", "两个", "骰子", "\n", "　", "同时", "掷", "两个", "骰子"], ["15.4", ".", "7", "　", "同时", "掷", "两个", "骰子", "\n", "　", "同时", "掷", "两个", "骰子", "\n", "同时", "掷", "两个", "骰子", "时", "，", "得到", "的", "点数", "更", "多", "，", "结果", "分布", "情况", "也", "不同", "。", "下面", "来", "修改", "前面", "的", "代码", "，", "创建", "两个", "D6", "骰子", "，", "以", "模拟", "同时", "掷", "两个", "骰子", "的", "情况", "。", "每次", "掷", "两个", "骰子", "时", "，", "我们", "都", "将", "两个", "骰子", "\n", "的", "点数", "相加", "，", "并", "将", "结果", "存储", "在", "results", " ", "中", "。", "请", "复制", "die", "_", "visual", ".", "py", "并", "将", "其", "保存", "为", "dice", "_", "visual", ".", "py", "，", "再", "做", "如下", "修改", "：", "\n", "dice", "_", "visual", ".", "py", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "from", " ", "die", " ", "import", " ", "Die", "\n", " ", " ", "#", " ", "创建", "两个", "D6", "骰子", "\n", " ", " ", "die", "_", "1", " ", "=", " ", "Die", "(", ")", "\n", " ", " ", "die", "_", "2", " ", "=", " ", "Die", "(", ")", "\n", " ", " ", "#", " ", "掷骰子", "多次", "，", "并", "将", "结果", "存储", "到", "一个", "列表", "中", "\n", " ", " ", "results", " ", "=", " ", "[", "]", "\n", " ", " ", "for", " ", "roll", "_", "num", " ", "in", " ", "range", "(", "1000", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", "result", " ", "=", " ", "die", "_", "1", ".", "roll", "(", ")", " ", "+", " ", "die", "_", "2", ".", "roll", "(", ")"], ["results", ".", "append", "(", "result", ")", "\n", " ", " ", "#", " ", "分析", "结果", "\n", " ", " ", "frequencies", " ", "=", " ", "[", "]", "\n", "❷", " ", "max", "_", "result", " ", "=", " ", "die", "_", "1", ".", "num", "_", "sides", " ", "+", " ", "die", "_", "2", ".", "num", "_", "sides", "\n", "❸", " ", "for", " ", "value", " ", "in", " ", "range", "(", "2", ",", " ", "max", "_", "result", "+", "1", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "frequency", " ", "=", " ", "results", ".", "count", "(", "value", ")", "\n", " ", " ", " ", " ", " ", " ", "frequencies", ".", "append", "(", "frequency", ")", "\n", " ", " ", "#", " ", "可视化", "结果", "\n", " ", " ", "hist", " ", "=", " ", "pygal", ".", "Bar", "(", ")", "\n", "❹", " ", "hist", ".", "title", " ", "=", " ", "\"", "Results", " ", "of", " ", "rolling", " ", "two", " ", "D6", " ", "dice", " ", "1000", " ", "times", ".", "\"", "\n", " ", " ", "hist", ".", "x", "_", "labels", " ", "=", " ", "[", "'", "2", "'", ",", " ", "'", "3", "'", ",", " ", "'", "4", "'", ",", " ", "'", "5", "'", ",", " ", "'", "6", "'", ",", " ", "'", "7", "'", ",", " ", "'", "8", "'", ",", " ", "'", "9", "'", ",", " ", "'", "10", "'", ",", " ", "'", "11", "'", ",", " ", "'", "12", "'", "]", "\n", " ", " ", "hist", ".", "x", "_", "title", " ", "=", " ", "\"", "Result", "\"", "\n", " ", " ", "hist", ".", "y", "_", "title", " ", "=", " ", "\"", "Frequency", " ", "of", " ", "Result", "\"", "\n", " ", " ", "hist", ".", "add", "(", "'", "D6", " ", "+", " ", "D6", "'", ",", " ", "frequencies", ")"], ["hist", ".", "add", "(", "'", "D6", " ", "+", " ", "D6", "'", ",", " ", "frequencies", ")", "\n", " ", " ", "hist", ".", "render", "_", "to", "_", "file", "(", "'", "dice", "_", "visual", ".", "svg", "'", ")", "\n", "创建", "两个", "Die", " ", "实例", "后", "，", "我们", "掷骰子", "多次", "，", "并", "计算", "每次", "的", "总", "点数", "（", "见", "❶", "）", "。", "可能", "出现", "的", "最大", "点数", "12", "为", "两个", "骰子", "的", "最大", "可能", "点数", "之", "和", "，", "我们", "将", "这个", "值", "存储", "在", "了", "max", "_", "result", " ", "中", "（", "见", "\n", "❷", "）", "。", "可能", "出现", "的", "最小", "总", "点数", "2", "为", "两个", "骰子", "的", "最小", "可能", "点数", "之", "和", "。", "分析", "结果", "时", "，", "我们", "计算", "2", "到", "max", "_", "result", " ", "的", "各种", "点数", "出现", "的", "次数", "（", "见", "❸", "）", "。", "我们", "原本", "可以", "使用", "range", "(", "2", ",", " ", "13", ")", "\n", "，", "但", "这", "只", "适用", "于", "两个", "D6", "骰子", "。", "模拟", "现实", "世界", "的", "情形", "时", "，", "最好", "编写", "可", "轻松", "地", "模拟", "各种", "情形", "的", "代码", "。", "前面", "的", "代码", "让", "我们", "能够", "模拟", "掷", "任何", "两个", "骰子", "的", "情形", "，", "而", "不管", "这些", "骰子", "有", "多少", "面", "。", "\n", "创建", "图表", "时", "，", "我们", "修改", "了", "标题", "、", "x", " ", "轴", "标签", "和", "数据", "系列", "（", "见", "❹", "）", "。", "（", "如果", "列表", "x", "_", "labels", " ", "比", "这里", "所示", "的", "长得", "多", "，", "那么", "编写", "一个", "循环", "来", "自动", "生成", "它", "将", "更", "合适", "。", "）", "\n", "运行", "这些", "代码", "后", "，", "在", "浏览器", "中", "刷新", "显示", "图表", "的", "标签", "页", "，", "你", "将", "看到", "如图", "15", "-", "12", "所示", "的", "图表", "。", "\n", "图", "\n", "图", "15", "-", "12", "　", "模拟", "同时", "掷", "两个", "\n", "　", "模拟", "同时", "掷", "两个", "6", "面", "骰子", "\n", "面", "骰子", "1000", "次", "的", "结果", "\n", "次", "的", "结果"], ["图", "\n", "图", "15", "-", "12", "　", "模拟", "同时", "掷", "两个", "\n", "　", "模拟", "同时", "掷", "两个", "6", "面", "骰子", "\n", "面", "骰子", "1000", "次", "的", "结果", "\n", "次", "的", "结果", "\n", "这个", "图表", "显示", "了", "掷", "两个", "D6", "骰子", "时", "得到", "的", "大致", "结果", "。", "正如", "你", "看到", "的", "，", "总", "点数", "为", "2", "或", "12", "的", "可能性", "最小", "，", "而", "总", "点数", "为", "7", "的", "可能性", "最大", "，", "这", "是因为", "在", "6", "种", "情况", "下", "得到", "的", "总", "点数", "都", "为", "7", "。", "这", "6", "种", "\n", "情况", "如下", "：", "1", "和", "6", "、", "2", "和", "5", "、", "3", "和", "4", "、", "4", "和", "3", "、", "5", "和", "2", "、", "6", "和", "1", "。", "\n", "15.4", ".", "8", "　", "同时", "掷", "两个", "面数", "不同", "的", "骰子", "\n", "　", "同时", "掷", "两个", "面数", "不同", "的", "骰子", "\n", "下面", "来", "创建", "一个", "6", "面", "骰子", "和", "一个", "10", "面", "骰子", "，", "看看", "同时", "掷", "这", "两个", "骰子", "50", " ", "000", "次", "的", "结果", "如何", "：", "\n", "different", "_", "dice", ".", "py", "\n", " ", " ", "from", " ", "die", " ", "import", " ", "Die", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "#", " ", "创建", "一个", "D6", "和", "一个", "D10", "\n", " ", " ", "die", "_", "1", " ", "=", " ", "Die", "(", ")", "\n", "❶", " ", "die", "_", "2", " ", "=", " ", "Die", "(", "10", ")", "\n", " ", " ", "#", " ", "掷骰子", "多次", "，", "并", "将", "结果", "存储", "在", "一个", "列表", "中", "\n", " ", " ", "results", " ", "=", " ", "[", "]", "\n", " ", " ", "for", " ", "roll", "_", "num", " ", "in", " ", "range", "(", "50000", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "result", " ", "=", " ", "die", "_", "1", ".", "roll", "(", ")", " ", "+", " ", "die", "_", "2", ".", "roll", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "results", ".", "append", "(", "result", ")", "\n", " ", " ", "#", " ", "分析", "结果", "\n", " ", " ", "--", "snip", "--"], ["results", ".", "append", "(", "result", ")", "\n", " ", " ", "#", " ", "分析", "结果", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "可视化", "结果", "\n", " ", " ", "hist", " ", "=", " ", "pygal", ".", "Bar", "(", ")", "\n", "❷", " ", "hist", ".", "title", " ", "=", " ", "\"", "Results", " ", "of", " ", "rolling", " ", "a", " ", "D6", " ", "and", " ", "a", " ", "D10", " ", "50", ",", "000", " ", "times", ".", "\"", "\n", " ", " ", "hist", ".", "x", "_", "labels", " ", "=", " ", "[", "'", "2", "'", ",", " ", "'", "3", "'", ",", " ", "'", "4", "'", ",", " ", "'", "5", "'", ",", " ", "'", "6", "'", ",", " ", "'", "7", "'", ",", " ", "'", "8", "'", ",", " ", "'", "9", "'", ",", " ", "'", "10", "'", ",", " ", "'", "11", "'", ",", " ", "'", "12", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "13", "'", ",", " ", "'", "14", "'", ",", " ", "'", "15", "'", ",", " ", "'", "16", "'", "]", "\n", " ", " ", "hist", ".", "x", "_", "title", " ", "=", " ", "\"", "Result", "\"", "\n", " ", " ", "hist", ".", "y", "_", "title", " ", "=", " ", "\"", "Frequency", " ", "of", " ", "Result", "\"", "\n", " ", " ", "hist", ".", "add", "(", "'", "D6", " ", "+", " ", "D10", "'", ",", " ", "frequencies", ")", "\n", " ", " ", "hist", ".", "render", "_", "to", "_", "file", "(", "'", "dice", "_", "visual", ".", "svg", "'", ")", "\n", "为", "创建", "D10", "骰子", "，", "我们", "在", "创建", "第二个", "Die", " ", "实例", "时", "传递", "了", "实参", "10", " ", "（", "见", "❶", "）", "。", "我们", "还", "修改", "了", "第一个", "循环", "，", "以", "模拟", "掷骰子", "50", " ", "000", "次", "而", "不是", "1000", "次", "。", "可能", "出现", "的", "最小", "总", "点数", "依然", "是", "2", "，", "但现"], ["在", "可能", "出现", "的", "最大", "总", "点数", "为", "16", "，", "因此", "我们", "相应", "地", "调整", "了", "标题", "、", "x", " ", "轴", "标签", "和", "数据", "系列", "标签", "（", "见", "❷", "）", "。", "\n", "图", "15", "-", "13", "显示", "了", "最终", "的", "图表", "。", "可能性", "最大", "的", "点数", "不是", "一个", "，", "而是", "5", "个", "，", "这", "是因为", "导致", "出现", "最小", "点数", "和", "最大", "点数", "的", "组合", "都", "只有", "一种", "（", "1", "和", "1", "以及", "6", "和", "10", "）", "，", "但", "面数", "较", "小", "的", "骰子", "限制", "了", "得到"], ["中间", "点数", "的", "组合", "数", "：", "得到", "总", "点数", "7", "、", "8", "、", "9", "、", "10", "和", "11", "的", "组合", "数都", "是", "6", "种", "。", "因此", "，", "这些", "总", "点数", "是", "最", "常见", "的", "结果", "，", "它们", "出现", "的", "可能性", "相同", "。", "\n", "图", "\n", "图", "15", "-", "13", "　", "同时", "掷", "\n", "　", "同时", "掷", "6", "面", "骰子", "和", "\n", "面", "骰子", "和", "10", "面", "骰子", "\n", "面", "骰子", "50", " ", "000", "次", "的", "结果", "\n", "次", "的", "结果", "\n", "通过", "使用", "Pygal", "来", "模拟", "掷骰子", "的", "结果", "，", "能够", "非常", "自由", "地", "探索", "这种", "现象", "。", "只", "需", "几分钟", "，", "就", "可以", "掷", "各种", "骰子", "很", "多次", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "15", "-", "6", " ", "自动", "生成", "标签", "\n", "自动", "生成", "标签", " ", "：", "请", "修改", "die", ".", "py", "和", "dice", "_", "visual", ".", "py", "，", "将", "用来", "设置", "hist", ".", "x", "_", "labels", " ", "值", "的", "列表", "替换", "为", "一个", "自动", "生成", "这种", "列表", "的", "循环", "。", "如果", "你", "熟悉", "列表", "解析", "，", "可", "尝试", "将", "\n", "die", "_", "visual", ".", "py", "和", "dice", "_", "visual", ".", "py", "中", "的", "其他", "for", " ", "循环", "也", "替换", "为", "列表", "解析", "。", "\n", "15", "-", "7", " ", "两个", "\n", "两个", "D8", "骰子", "：", "\n", "骰子", "：", " ", "请", "模拟", "同时", "掷", "两个", "8", "面", "骰子", "1000", "次", "的", "结果", "。", "逐渐", "增加", "掷骰子", "的", "次数", "，", "直到", "系统", "不堪重负", "为止", "。", "\n", "15", "-", "8", " ", "同时", "掷", "三个", "骰子", "\n", "同时", "掷", "三个", "骰子", " ", "：", "如果", "你", "同时", "掷", "三个", "D6", "骰子", "，", "可能", "得到", "的", "最小", "点数", "为", "3", "，", "而", "最大", "点数", "为", "18", "。", "请", "通过", "可视化", "展示", "同时", "掷", "三个", "D6", "骰子", "的", "结果", "。", "\n", "15", "-", "9", " ", "将", "点数", "相乘"], ["15", "-", "9", " ", "将", "点数", "相乘", "\n", "将", "点数", "相乘", " ", "：", "同时", "掷", "两个", "骰子", "时", "，", "通常", "将", "它们", "的", "点数", "相加", "。", "请", "通过", "可视化", "展示", "将", "两个", "骰子", "的", "点数", "相乘", "的", "结果", "。", "\n", "15", "-", "10", " ", "练习", "使用", "本章", "介绍", "的", "两个", "库", "\n", "练习", "使用", "本章", "介绍", "的", "两个", "库", " ", "：", "尝试", "使用", "matplotlib", "通过", "可视化", "来", "模拟", "掷骰子", "的", "情况", "，", "并", "尝试", "使用", "Pygal", "通过", "可视化", "来", "模拟", "随机", "漫步", "的", "情况", "。", "\n", "15.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "生成", "数据", "集", "以及", "如何", "对", "其", "进行", "可视化", "；", "如何", "使用", "matplotlib", "创建", "简单", "的", "图表", "，", "以及", "如何", "使用", "散点图", "来", "探索", "随机", "漫步", "过程", "；", "如何", "使用", "Pygal", "来", "创建", "直方图", "，", "\n", "以及", "如何", "使用", "直方图", "来", "探索", "同时", "掷", "两个", "面数", "不同", "的", "骰子", "的", "结果", "。", "\n", "使用", "代码生成", "数据", "集是", "一种", "有趣", "而", "强大", "的", "方式", "，", "可", "用于", "模拟", "和", "探索", "现实", "世界", "的", "各种", "情形", "。", "完成", "后面", "的", "数据", "可视化", "项目", "时", "，", "请", "注意", "可", "使用", "代码", "模拟", "哪些", "情形", "。", "请", "研究", "新闻媒体", "中", "的", "\n", "可视化", "，", "看看", "其中", "是否", "有", "图表", "是", "以", "你", "在", "这些", "项目", "中学", "到", "的", "类似", "方式", "生成", "的", "。", "\n", "在", "第", "16", "章中", "，", "我们", "将", "从", "网上", "下载", "数据", "，", "并", "继续", "使用", "matplotlib", "和", "Pygal", "来", "探索", "这些", "数据", "。", "\n", "第", "\n", "第", " ", "16", " ", "章", "　", "下载", "数据", "\n", "章", "　", "下载", "数据"], ["在", "本章", "中", "，", "你", "将", "从", "网上", "下载", "数据", "，", "并", "对", "这些", "数据", "进行", "可视化", "。", "网上", "的", "数据", "多得", "难以置信", "，", "且", "大多", "未", "经过", "仔细检查", "。", "如果", "能够", "对", "这些", "数据", "进行", "分析", "，", "你", "就", "能", "发现", "别人", "没", "\n", "有", "发现", "的", "规律", "和", "关联", "。", "\n", "我们", "将", "访问", "并", "可视化", "以", "两种", "常见", "格式", "存储", "的", "数据", "：", "CSV", " ", "和", "JSON", "。", "我们", "将", "使用", "Python", "模块", "csv", " ", "来", "处理", "以", "CSV", "（", "逗号", "分隔", "的", "值", "）", "格式", "存储", "的", "天气", "数据", "，", "找出", "两个", "不同", "地区", "\n", "在", "一段时间", "内", "的", "最高", "温度", "和", "最低温度", "。", "然后", "，", "我们", "将", "使用", "matplotlib", "根据", "下载", "的", "数据", "创建", "一个", "图表", "，", "展示", "两个", "不同", "地区", "的", "气温", "变化", "：", "阿拉斯加", "锡特卡", "和", "加利福尼亚", "死亡", "\n", "谷", "。", "在", "本章", "的", "后面", "，", "我们", "将", "使用", "模块", "json", " ", "来", "访问", "以", "JSON", "格式", "存储", "的", "人口", "数据", "，", "并", "使用", "Pygal", "绘制", "一幅", "按", "国别", "划分", "的", "人口", "地图", "。", "\n", "阅读", "本章", "后", "，", "你", "将", "能够", "处理", "各种类型", "和", "格式", "的", "数据", "集", "，", "并", "对", "如何", "创建", "复杂", "的", "图表", "有", "更", "深入", "的", "认识", "。", "要", "处理", "各种", "真实世界", "的", "数据", "集", "，", "必须", "能够", "访问", "并", "可视化", "各种类型", "和", "\n", "格式", "的", "在线", "数据", "。", "\n", "16.1", "　", "\n", "　", "CSV", "文件格式", "\n", "文件格式", "\n", "要", "在", "文本文件", "中", "存储", "数据", "，", "最", "简单", "的", "方式", "是", "将", "数据", "作为", "一系列", "以", "逗号", "分隔", "的", "值", "\n", "以", "逗号", "分隔", "的", "值", " ", "（", "CSV", "）", "写入", "文件", "。", "这样", "的", "文件", "称为", "CSV", "文件", "。", "例如", "，", "下面", "是", "一行", "CSV", "格式", "的", "天气", "数据", "："], ["2014", "-", "1", "-", "5", ",", "61", ",", "44", ",", "26", ",", "18", ",", "7", ",", "-", "1", ",", "56", ",", "30", ",", "9", ",", "30.34", ",", "30.27", ",", "30.15", ",", ",", ",", ",", "10", ",", "4", ",", ",", "0.00", ",", "0", ",", ",", "195", "\n", "这是", "阿拉斯加", "锡特卡", "2014", "年", "1", "月", "5", "日", "的", "天气", "数据", "，", "其中", "包含", "当天", "的", "最高", "气温", "和", "最低气温", "，", "还有", "众多", "其他", "数据", "。", "CSV", "文件", "对人", "来说", "阅读", "起来", "比较", "麻烦", "，", "但", "程序", "可", "轻松", "地", "提取", "并", "处理", "其", "\n", "中", "的", "值", "，", "这", "有助于", "加快", "数据分析", "过程", "。", "\n", "我们", "将", "首先", "处理", "少量", "锡特卡", "的", "CSV", "格式", "的", "天气", "数据", "，", "这些", "数据", "可", "在", "本书", "的", "配套", "资源", "（", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", " ", "）", "中", "找到", "。", "请", "将", "文件", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "复制到", "\n", "存储", "本章", "程序", "的", "文件夹", "中", "（", "下载", "本书", "的", "配套", "资源", "后", "，", "你", "就", "有", "了", "这个", "项目", "所", "需", "的", "所有", "文件", "）", "。", "\n", "注意", "\n", "注意", " ", "　", "这个", "项目", "使用", "的", "天气", "数据", "是从", "http", ":", "/", "/", "www", ".", "wunderground", ".", "com", "/", "history", "/", " ", "下载", "而来", "的", "。", "\n", "16.1", ".", "1", "　", "分析", "\n", "　", "分析", "CSV", "文件", "头", "\n", "文件", "头", "\n", "csv", " ", "模块", "包含", "在", "Python", "标准", "库中", "，", "可", "用于", "分析", "CSV", "文件", "中", "的", "数据", "行", "，", "让", "我们", "能够", "快速", "提取", "感兴趣", "的", "值", "。", "下面", "先", "来", "查看", "这个", "文件", "的", "第一行", "，", "其中", "包含", "一系列", "有关", "数据", "的", "描述", "："], ["highs", "_", "lows", ".", "py", "\n", " ", " ", "import", " ", "csv", "\n", " ", " ", "filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "'", "\n", "❶", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", "❷", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", "❸", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "header", "_", "row", ")", "\n", "导入", "模块", "csv", " ", "后", "，", "我们", "将要", "使用", "的", "文件", "的", "名称", "存储", "在", "filename", " ", "中", "。", "接下来", "，", "我们", "打开", "这个", "文件", "，", "并", "将", "结果", "文件", "对象", "存储", "在", "f", " ", "中", "（", "见", "❶", "）", "。", "然后", "，", "我们", "调用", "csv", ".", "reader", "(", ")", " ", "，", "\n", "并", "将", "前面", "存储", "的", "文件", "对象", "作为", "实参", "传递", "给", "它", "，", "从而", "创建", "一个", "与", "该", "文件", "相关联", "的", "阅读器", "（", "reader", " ", "）", "对象", "（", "见", "❷", "）", "。", "我们", "将", "这个", "阅读器", "对象", "存储", "在", "reader", " ", "中", "。", "\n", "模块", "csv", " ", "包含", "函数", "next", "(", ")", " ", "，", "调用", "它", "并", "将", "阅读器", "对象", "传递", "给", "它", "时", "，", "它", "将", "返回", "文件", "中", "的", "下", "一行", "。", "在", "前面", "的", "代码", "中", "，", "我们", "只", "调用", "了", "next", "(", ")", " ", "一次", "，", "因此", "得到", "的", "是", "文件", "的", "第一行", "，", "其中", "\n", "包含", "文件", "头", "（", "见", "❸", "）", "。", "我们", "将", "返回", "的", "数据", "存储", "在", "header", "_", "row", " ", "中", "。", "正如", "你", "看到", "的", "，", "header", "_", "row", " ", "包含", "与", "天气", "相关", "的", "文件", "头", "，", "指出", "了", "每行", "都", "包含", "哪些", "数据", "："], ["[", "'", "AKDT", "'", ",", " ", "'", "Max", " ", "TemperatureF", "'", ",", " ", "'", "Mean", " ", "TemperatureF", "'", ",", " ", "'", "Min", " ", "TemperatureF", "'", ",", "\n", "'", "Max", " ", "Dew", " ", "PointF", "'", ",", " ", "'", "MeanDew", " ", "PointF", "'", ",", " ", "'", "Min", " ", "DewpointF", "'", ",", " ", "'", "Max", " ", "Humidity", "'", ",", "\n", "'", " ", "Mean", " ", "Humidity", "'", ",", " ", "'", " ", "Min", " ", "Humidity", "'", ",", " ", "'", " ", "Max", " ", "Sea", " ", "Level", " ", "PressureIn", "'", ",", "\n", "'", " ", "Mean", " ", "Sea", " ", "Level", " ", "PressureIn", "'", ",", " ", "'", " ", "Min", " ", "Sea", " ", "Level", " ", "PressureIn", "'", ",", "\n", "'", " ", "Max", " ", "VisibilityMiles", "'", ",", " ", "'", " ", "Mean", " ", "VisibilityMiles", "'", ",", " ", "'", " ", "Min", " ", "VisibilityMiles", "'", ",", "\n", "'", " ", "Max", " ", "Wind", " ", "SpeedMPH", "'", ",", " ", "'", " ", "Mean", " ", "Wind", " ", "SpeedMPH", "'", ",", " ", "'", " ", "Max", " ", "Gust", " ", "SpeedMPH", "'", ",", "\n", "'", "PrecipitationIn", "'", ",", " ", "'", " ", "CloudCover", "'", ",", " ", "'", " ", "Events", "'", ",", " ", "'", " ", "WindDirDegrees", "'", "]"], ["reader", "处理", "文件", "中以", "逗号", "分隔", "的", "第一行", "数据", "，", "并", "将", "每项", "数据", "都", "作为", "一个", "元素", "存储", "在", "列表", "中", "。", "文件", "头", "AKDT", " ", "表示", "阿拉斯加", "时间", "（", "Alaska", " ", "Daylight", " ", "Time", "）", "，", "其", "位置", "表明", "每行", "的", "第一个", "值", "都", "\n", "是", "日期", "或", "时间", "。", "文件", "头", "Max", " ", "TemperatureF", " ", "指出", "每行", "的", "第二个", "值", "都", "是", "当天", "的", "最高", "华氏温度", "。", "可", "通过", "阅读", "其他", "的", "文件", "头来", "确定", "文件", "包含", "的", "信息", "类型", "。", "\n", "注意", "\n", "注意", " ", "　", "文件", "头", "的", "格式", "并非", "总是", "一致", "的", "，", "空格", "和", "单位", "可能", "出现", "在", "奇怪", "的", "地方", "。", "这", "在", "原始数据", "文件", "中", "很", "常见", "，", "但", "不会", "带来", "任何", "问题", "。", "\n", "16.1", ".", "2", "　", "打印文件", "头", "及其", "位置", "\n", "　", "打印文件", "头", "及其", "位置", "\n", "为", "让", "文件", "头", "数据", "更", "容易", "理解", "，", "将", "列表", "中", "的", "每个", "文件", "头", "及其", "位置", "打印", "出来", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", " ", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", "❶", " ", " ", " ", " ", " ", "for", " ", "index", ",", " ", "column", "_", "header", " ", "in", " ", "enumerate", "(", "header", "_", "row", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "index", ",", " ", "column", "_", "header", ")"], ["print", "(", "index", ",", " ", "column", "_", "header", ")", "\n", "我们", "对", "列表", "调用", "了", "enumerate", "(", ")", " ", "（", "见", "❶", "）", "来", "获取", "每个", "元素", "的", "索引", "及其", "值", "。", "（", "请", "注意", "，", "我们", "删除", "了", "代码", "行", "print", "(", "header", "_", "row", ")", " ", "，", "转而", "显示", "这个", "更", "详细", "的", "版本", "。", "）", "\n", "输出", "如下", "，", "其中", "指出", "了", "每个", "文件", "头", "的", "索引", "：", "\n", "0", " ", "AKDT", "\n", "1", " ", "Max", " ", "TemperatureF", "\n", "2", " ", "Mean", " ", "TemperatureF", "\n", "3", " ", "Min", " ", "TemperatureF", "\n", "--", "snip", "--", "\n", "20", " ", " ", "CloudCover", "\n", "21", " ", " ", "Events", "\n", "22", " ", " ", "WindDirDegrees", "\n", "从中", "可知", "，", "日期", "和", "最高", "气温", "分别", "存储", "在", "第", "0", "列", "和", "第", "1", "列", "。", "为", "研究", "这些", "数据", "，", "我们", "将", "处理", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "中", "的", "每行", "数据", "，", "并", "提取", "其中", "索引", "为", "0", "和", "1", "的", "值", "。", "\n", "16.1", ".", "3", "　", "提取", "并", "读取数据", "\n", "　", "提取", "并", "读取数据", "\n", "知道", "需要", "哪些", "列中", "的", "数据", "后", "，", "我们", "来", "读取", "一些", "数据", "。", "首先", "读取", "每天", "的", "最高", "气温", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "import", " ", "csv", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "最高", "气温", "\n", " ", " ", "filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "'"], ["filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", " ", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", "❶", " ", " ", " ", " ", " ", "highs", " ", "=", " ", "[", "]", "\n", "❷", " ", " ", " ", " ", " ", "for", " ", "row", " ", "in", " ", "reader", ":", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "highs", ".", "append", "(", "row", "[", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "highs", ")", "\n", "我们", "创建", "了", "一个", "名为", "highs", " ", "的", "空", "列表", "（", "见", "❶", "）", "，", "再", "遍历", "文件", "中", "余下", "的", "各行", "（", "见", "❷", "）", "。", "阅读器", "对象", "从", "其", "停留", "的", "地方", "继续", "往下读", "取", "CSV", "文件", "，", "每次", "都", "自动", "返回", "当前", "所", "处", "位置", "的", "下", "一", "\n", "行", "。", "由于", "我们", "已经", "读取", "了", "文件", "头行", "，", "这个", "循环", "将", "从", "第二行", "开始", "—", "—", "从", "这行", "开始", "包含", "的", "是", "实际", "数据", "。", "每次", "执行", "该", "循环", "时", "，", "我们", "都", "将", "索引", "1", "处", "（", "第", "2", "列", "）", "的", "数据", "附加", "到", "highs", " ", "末尾", "（", "见", "\n", "❸", "）", "。", "\n", "下面", "显示", "了", "highs", " ", "现在", "存储", "的", "数据", "：", "\n", "[", "'", "64", "'", ",", " ", "'", "71", "'", ",", " ", "'", "64", "'", ",", " ", "'", "59", "'", ",", " ", "'", "69", "'", ",", " ", "'", "62", "'", ",", " ", "'", "61", "'", ",", " ", "'", "55", "'", ",", " ", "'", "57", "'", ",", " ", "'", "61", "'", ",", " ", "'", "57", "'", ",", " ", "'", "59", "'", ",", " ", "'", "57", "'", ","], ["'", "61", "'", ",", " ", "'", "64", "'", ",", " ", "'", "61", "'", ",", " ", "'", "59", "'", ",", " ", "'", "63", "'", ",", " ", "'", "60", "'", ",", " ", "'", "57", "'", ",", " ", "'", "69", "'", ",", " ", "'", "63", "'", ",", " ", "'", "62", "'", ",", " ", "'", "59", "'", ",", " ", "'", "57", "'", ",", " ", "'", "57", "'", ",", "\n", " ", "'", "61", "'", ",", " ", "'", "59", "'", ",", " ", "'", "61", "'", ",", " ", "'", "61", "'", ",", " ", "'", "66", "'", "]", "\n", "我们", "提取", "了", "每天", "的", "最高", "气温", "，", "并", "将", "它们", "作为", "字符串", "整洁地", "存储", "在", "一个", "列表", "中", "。", "\n", "下面", "使用", "int", "(", ")", " ", "将", "这些", "字符串", "转换", "为", "数字", "，", "让", "matplotlib", "能够", "读取", "它们", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "highs", " ", "=", " ", "[", "]", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "row", " ", "in", " ", "reader", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", " ", "=", " ", "int", "(", "row", "[", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "highs", ".", "append", "(", "high", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "highs", ")", "\n", "在", "❶", "处", "，", "我们", "将", "表示", "气温", "的", "字符串", "转换成", "了", "数字", "，", "再", "将", "其", "附加", "到", "列表", "末尾", "。", "这样", "，", "最终", "的", "列表", "将", "包含", "以", "数字", "表示", "的", "每日", "最高", "气温", "：", "\n", "[", "64", ",", " ", "71", ",", " ", "64", ",", " ", "59", ",", " ", "69", ",", " ", "62", ",", " ", "61", ",", " ", "55", ",", " ", "57", ",", " ", "61", ",", " ", "57", ",", " ", "59", ",", " ", "57", ",", " ", "61", ",", " ", "64", ",", " ", "61", ",", " ", "59", ",", " ", "63", ",", " ", "60", ",", " ", "57", ","], ["69", ",", " ", "63", ",", " ", "62", ",", " ", "59", ",", " ", "57", ",", " ", "57", ",", " ", "61", ",", " ", "59", ",", " ", "61", ",", " ", "61", ",", " ", "66", "]"], ["下面", "来", "对", "这些", "数据", "进行", "可视化", "。", "\n", "16.1", ".", "4", "　", "绘制", "气温", "图表", "\n", "　", "绘制", "气温", "图表", "\n", "为", "可视化", "这些", "气温", "数据", "，", "我们", "首先", "使用", "matplotlib", "创建", "一个", "显示", "每日", "最高", "气温", "的", "简单", "图形", "，", "如下", "所示", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "import", " ", "csv", "\n", " ", " ", "from", " ", "matplotlib", " ", "import", " ", "pyplot", " ", "as", " ", "plt", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "最高", "气温", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "根据", "数据", "绘制", "图形", "\n", " ", " ", "fig", " ", "=", " ", "plt", ".", "figure", "(", "dpi", "=", "128", ",", " ", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", "❶", " ", "plt", ".", "plot", "(", "highs", ",", " ", "c", "=", "'", "red", "'", ")", "\n", " ", " ", "#", " ", "设置", "图形", "的", "格式", "\n", "❷", " ", "plt", ".", "title", "(", "\"", "Daily", " ", "high", " ", "temperatures", ",", " ", "July", " ", "2014", "\"", ",", " ", "fontsize", "=", "24", ")", "\n", "❸", " ", "plt", ".", "xlabel", "(", "'", "'", ",", " ", "fontsize", "=", "16", ")", "\n", " ", " ", "plt", ".", "ylabel", "(", "\"", "Temperature", " ", "(", "F", ")", "\"", ",", " ", "fontsize", "=", "16", ")", "\n", " ", " ", "plt", ".", "tick", "_", "params", "(", "axis", "=", "'", "both", "'", ",", " ", "which", "=", "'", "major", "'", ",", " ", "labelsize", "=", "16", ")", "\n", " ", " ", "plt", ".", "show", "(", ")"], ["plt", ".", "show", "(", ")", "\n", "我们", "将", "最高", "气温", "列表", "传给", "plot", "(", ")", " ", "（", "见", "❶", "）", "，", "并", "传递", "c", "=", "'", "red", "'", " ", "以便", "将", "数据", "点", "绘制", "为", "红色", "（", "红色", "显示", "最高", "气温", "，", "蓝色", "显示", "最低气温", "）", "。", "接下来", "，", "我们", "设置", "了", "一些", "其他", "的", "格式", "，", "如字", "\n", "体", "大小", "和", "标签", "（", "见", "❷", "）", "，", "这些", "都", "在", "第", "15", "章", "介绍", "过", "。", "鉴于", "我们", "还", "没有", "添加", "日期", "，", "因此", "没有", "给", "x", " ", "轴", "添加", "标签", "，", "但", "plt", ".", "xlabel", "(", ")", " ", "确实", "修改", "了", "字体大小", "，", "让", "默认", "标签", "更", "容易", "看清", "。", "图", "\n", "16", "-", "1", "显示", "了", "绘制", "的", "图表", "：", "一个", "简单", "的", "折线图", "，", "显示", "了", "阿拉斯加", "锡特卡", "2014", "年", "7", "月", "每天", "的", "最高", "气温", "。", "\n", "图", "\n", "图", "16", "-", "1", "　", "阿拉斯加", "锡特卡", "\n", "　", "阿拉斯加", "锡特卡", "2014", "年", "\n", "年", "7", "月", "每日", "最高", "气温", "折线图", "\n", "月", "每日", "最高", "气温", "折线图", "\n", "16.1", ".", "5", "　", "模块", "\n", "　", "模块", "datetime", "\n", "下面", "在", "图表", "中", "添加", "日期", "，", "使", "其", "更", "有用", "。", "在", "天气", "数据文件", "中", "，", "第一个", "日期", "在", "第二行", "：", "\n", "2014", "-", "7", "-", "1", ",", "64", ",", "56", ",", "50", ",", "53", ",", "51", ",", "48", ",", "96", ",", "83", ",", "58", ",", "30.19", ",", "--", "snip", "--", "\n", "读取", "该", "数据", "时", "，", "获得", "的", "是", "一个", "字符串", "，", "因为", "我们", "需要", "想", "办法", "将", "字符串", "'", "2014", "-", "7", "-", "1", "'", " ", "转换", "为", "一个", "表示", "相应", "日期", "的", "对象", "。", "为", "创建", "一个", "表示", "2014", "年", "7", "月", "1", "日", "的", "对象", "，", "可", "使用", "模"], ["块", "datetime", " ", "中", "的", "方法", "strptime", "(", ")", " ", "。", "我们", "在", "终端", "会话", "中", "看看", "strptime", "(", ")", " ", "的", "工作", "原理", "：", "\n", ">", ">", ">", " ", "from", " ", "datetime", " ", "import", " ", "datetime", "\n", ">", ">", ">", " ", "first", "_", "date", " ", "=", " ", "datetime", ".", "strptime", "(", "'", "2014", "-", "7", "-", "1", "'", ",", " ", "'", "%", "Y", "-%", "m", "-%", "d", "'", ")", "\n", ">", ">", ">", " ", "print", "(", "first", "_", "date", ")", "\n", "2014", "-", "07", "-", "01", " ", "00", ":", "00", ":", "00", "\n", "我们", "首先", "导入", "了", "模块", "datetime", " ", "中", "的", "datetime", " ", "类", "，", "然后", "调用", "方法", "strptime", "(", ")", " ", "，", "并", "将", "包含", "所", "需", "日期", "的", "字符串", "作为", "第一个", "实参", "。", "第二个", "实参", "告诉", "Python", "如何", "设置", "日期", "的", "格式", "。", "在", "\n", "这个", "示例", "中", "，", "'", "%", "Y", "-", "'", " ", "让", "Python", "将", "字符串", "中", "第一个", "连", "字符", "前面", "的", "部分", "视为", "四位", "的", "年份", "；", "'", "%", "m", "-", "'", " ", "让", "Python", "将", "第二个", "连", "字符", "前面", "的", "部分", "视为", "表示", "月份", "的", "数字", "；", "而", "'", "%", "d", "'", " ", "让", "Python", "将", "字符串", "\n", "的", "最后", "一部分", "视为", "月份", "中", "的", "一天", "（", "1", "~", "31", "）", "。", "\n", "方法", "strptime", "(", ")", " ", "可", "接受", "各种", "实参", "，", "并", "根据", "它们", "来", "决定", "如何", "解读", "日期", "。", "表", "16", "-", "1", "列出", "了", "其中", "一些", "这样", "的", "实参", "。", "\n", "表", "\n", "表", "16", "-", "1", "　", "模块", "\n", "　", "模块", "datetime", "中", "设置", "日期", "和", "时间", "格式", "的", "实参", "\n", "中", "设置", "日期", "和", "时间", "格式", "的", "实参", "\n", "实参", "\n", "实参"], ["模块", "datetime", "中", "设置", "日期", "和", "时间", "格式", "的", "实参", "\n", "中", "设置", "日期", "和", "时间", "格式", "的", "实参", "\n", "实参", "\n", "实参", "\n", "含义", "\n", "含义", "\n", "%", "A", "\n", "星期", "的", "名称", "，", "如", "Monday", "\n", "%", "B", "\n", "月份", "名", "，", "如", "January", "\n", "%", "m", "\n", "用", "数字", "表示", "的", "月份", "（", "01", "~", "12", "）", "\n", "%", "d", "\n", "用", "数字", "表示", "月份", "中", "的", "一天", "（", "01", "~", "31", "）"], ["%", "Y", "\n", "四位", "的", "年份", "，", "如", "2015", "\n", "%", "y", "\n", "两位", "的", "年份", "，", "如", "15", "\n", "%", "H", "\n", "24", "小时", "制", "的", "小时数", "（", "00", "~", "23", "）", "\n", "%", "I", "\n", "12", "小时", "制", "的", "小时数", "（", "01", "~", "12", "）", "\n", "%", "p", "\n", "am", "或", "pm", "\n", "%", "M", "\n", "分钟", "数", "（", "00", "~", "59", "）", "\n", "%", "S", "\n", "秒数", "（", "00", "~", "61", "）", "\n", "实参", "\n", "实参", "\n", "含义", "\n", "含义", "\n", "16.1", ".", "6", "　", "在", "图表", "中", "添加", "日期", "\n", "　", "在", "图表", "中", "添加", "日期", "\n", "知道", "如何", "处理", "CSV", "文件", "中", "的", "日期", "后", "，", "就", "可", "对", "气温", "图形", "进行", "改进", "了", "，", "即", "提取", "日期", "和", "最高", "气温", "，", "并", "将", "它们", "传递", "给", "plot", "(", ")", " ", "，", "如下", "所示", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "import", " ", "csv", "\n", " ", " ", "from", " ", "datetime", " ", "import", " ", "datetime", "\n", " ", " ", "from", " ", "matplotlib", " ", "import", " ", "pyplot", " ", "as", " ", "plt", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "日期", "和", "最高", "气温", "\n", " ", " ", "filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "07", "-", "2014", ".", "csv", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", " ", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", "❶", " ", " ", " ", " ", " ", "dates", ",", " ", "highs", " ", "=", " ", "[", "]", ",", " ", "[", "]", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "row", " ", "in", " ", "reader", ":"], ["for", " ", "row", " ", "in", " ", "reader", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "current", "_", "date", " ", "=", " ", "datetime", ".", "strptime", "(", "row", "[", "0", "]", ",", " ", "\"", "%", "Y", "-%", "m", "-%", "d", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "dates", ".", "append", "(", "current", "_", "date", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", " ", "=", " ", "int", "(", "row", "[", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "highs", ".", "append", "(", "high", ")", "\n", " ", " ", "#", " ", "根据", "数据", "绘制", "图形", "\n", " ", " ", "fig", " ", "=", " ", "plt", ".", "figure", "(", "dpi", "=", "128", ",", " ", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", "❸", " ", "plt", ".", "plot", "(", "dates", ",", " ", "highs", ",", " ", "c", "=", "'", "red", "'", ")", "\n", " ", " ", "#", " ", "设置", "图形", "的", "格式", "\n", " ", " ", "plt", ".", "title", "(", "\"", "Daily", " ", "high", " ", "temperatures", ",", " ", "July", " ", "2014", "\"", ",", " ", "fontsize", "=", "24", ")", "\n", " ", " ", "plt", ".", "xlabel", "(", "'", "'", ",", " ", "fontsize", "=", "16", ")", "\n", "❹", " ", "fig", ".", "autofmt", "_", "xdate", "(", ")", "\n", " ", " ", "plt", ".", "ylabel", "(", "\"", "Temperature", " ", "(", "F", ")", "\"", ",", " ", "fontsize", "=", "16", ")", "\n", " ", " ", "plt", ".", "tick", "_", "params", "(", "axis", "=", "'", "both", "'", ",", " ", "which", "=", "'", "major", "'", ",", " ", "labelsize", "=", "16", ")"], ["plt", ".", "show", "(", ")", "\n", "我们", "创建", "了", "两个", "空", "列表", "，", "用于", "存储", "从文件", "中", "提取", "的", "日期", "和", "最高", "气温", "（", "见", "❶", "）", "。", "然后", "，", "我们", "将", "包含", "日期", "信息", "的", "数据", "（", "row", "[", "0", "]", " ", "）", "转换", "为", "datetime", " ", "对象", "（", "见", "❷", "）", "，", "并", "将", "其", "附加", "到列", "\n", "表", "dates", " ", "末尾", "。", "在", "❸", "处", "，", "我们", "将", "日期", "和", "最高", "气温", "值", "传递", "给", "plot", "(", ")", " ", "。", "在", "❹", "处", "，", "我们", "调用", "了", "fig", ".", "autofmt", "_", "xdate", "(", ")", " ", "来", "绘制", "斜", "的", "日期", "标签", "，", "以免", "它们", "彼此", "重叠", "。", "图", "16", "-", "2", "显示", "了", "改", "\n", "进后", "的", "图表", "。", "\n", "图", "\n", "图", "16", "-", "2", "　", "现在", "图表", "的", "\n", "　", "现在", "图表", "的", " ", "x", " ", "轴上", "有", "日期", "，", "含义", "更", "丰富", "\n", "轴上", "有", "日期", "，", "含义", "更", "丰富", "\n", "16.1", ".", "7", "　", "涵盖", "更长", "的", "时间", "\n", "　", "涵盖", "更长", "的", "时间", "\n", "设置", "好", "图表", "后", "，", "我们", "来", "添加", "更", "多", "的", "数据", "，", "以成", "一幅", "更", "复杂", "的", "锡", "特卡", "天气图", "。", "请", "将", "文件", "sitka", "_", "weather", "_", "2014", ".", "csv", "复制到", "存储", "本章", "程序", "的", "文件夹", "中", "，", "该", "文件", "包含", "Weather", " ", "Underground", "提供", "\n", "的", "整年", "的", "锡", "特卡", "天气", "数据", "。", "\n", "现在", "可以", "创建", "覆盖", "整年", "的", "天气图", "了", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "日期", "和", "最高", "气温", "\n", "❶", " ", "filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "2014", ".", "csv", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":"], ["with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "设置", "图形", "的", "格式", "\n", "❷", " ", "plt", ".", "title", "(", "\"", "Daily", " ", "high", " ", "temperatures", " ", "-", " ", "2014", "\"", ",", " ", "fontsize", "=", "24", ")"], ["plt", ".", "xlabel", "(", "'", "'", ",", " ", "fontsize", "=", "16", ")", "\n", " ", " ", "--", "snip", "--", "\n", "我们", "修改", "了", "文件名", "，", "以", "使用", "新", "的", "数据文件", "sitka", "_", "weather", "_", "2014", ".", "csv", "（", "见", "❶", "）", "；", "我们", "还", "修改", "了", "图表", "的", "标题", "，", "以", "反映", "其", "内容", "的", "变化", "（", "见", "❷", "）", "。", "图", "16", "-", "3", "显示", "了", "生成", "的", "图形", "。", "\n", "图", "\n", "图", "16", "-", "3", "　", "一年", "的", "天气", "数据", "\n", "　", "一年", "的", "天气", "数据", "\n", "16.1", ".", "8", "　", "再", "绘制", "一个", "数据", "系列", "\n", "　", "再", "绘制", "一个", "数据", "系列", "\n", "图", "16", "-", "3", "所示", "的", "改进", "后", "的", "图表", "显示", "了", "大量", "意义", "深远", "的", "数据", "，", "但", "我们", "可以", "在", "其中", "再", "添加", "最低气温", "数据", "，", "使", "其", "更", "有用", "。", "为此", "，", "需要", "从", "数据文件", "中", "提取", "最低气温", "，", "并", "将", "它们", "添加", "到", "图表", "\n", "中", "，", "如下", "所示", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "日期", "、", "最高", "气温", "和", "最低气温", "\n", " ", " ", "filename", " ", "=", " ", "'", "sitka", "_", "weather", "_", "2014", ".", "csv", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", " ", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", "❶", " ", " ", " ", " ", " ", "dates", ",", " ", "highs", ",", " ", "lows", " ", "=", " ", "[", "]", ",", " ", "[", "]", ",", " ", "[", "]", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "row", " ", "in", " ", "reader", ":"], ["for", " ", "row", " ", "in", " ", "reader", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "current", "_", "date", " ", "=", " ", "datetime", ".", "strptime", "(", "row", "[", "0", "]", ",", " ", "\"", "%", "Y", "-%", "m", "-%", "d", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "dates", ".", "append", "(", "current", "_", "date", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", " ", "=", " ", "int", "(", "row", "[", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "highs", ".", "append", "(", "high", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", "low", " ", "=", " ", "int", "(", "row", "[", "3", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "lows", ".", "append", "(", "low", ")", "\n", " ", " ", "#", " ", "根据", "数据", "绘制", "图形", "\n", " ", " ", "fig", " ", "=", " ", "plt", ".", "figure", "(", "dpi", "=", "128", ",", " ", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", " ", " ", "plt", ".", "plot", "(", "dates", ",", " ", "highs", ",", " ", "c", "=", "'", "red", "'", ")", "\n", "❸", " ", "plt", ".", "plot", "(", "dates", ",", " ", "lows", ",", " ", "c", "=", "'", "blue", "'", ")", "\n", " ", " ", "#", " ", "设置", "图形", "的", "格式", "\n", "❹", " ", "plt", ".", "title", "(", "\"", "Daily", " ", "high", " ", "and", " ", "low", " ", "temperatures", " ", "-", " ", "2014", "\"", ",", " ", "fontsize", "=", "24", ")", "\n", " ", " ", "--", "snip", "--"], ["--", "snip", "--", "\n", "在", "❶", "处", "，", "我们", "添加", "了", "空", "列表", "lows", " ", "，", "用于", "存储", "最低气温", "。", "接下来", "，", "我们", "从", "每行", "的", "第", "4", "列", "（", "row", "[", "3", "]", " ", "）", "提取", "每天", "的", "最低气温", "，", "并", "存储", "它们", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "添加", "了", "一个", "\n", "对", "plot", "(", ")", " ", "的", "调用", "，", "以", "使用", "蓝色", "绘制", "最低气温", "。", "最后", "，", "我们", "修改", "了", "标题", "（", "见", "❹", "）", "。", "图", "16", "-", "4", "显示", "了", "这样", "绘制", "出来", "的", "图表", "。", "\n", "图", "\n", "图", "16", "-", "4", "　", "在", "一个", "图表", "中", "包含", "两个", "数据", "系列", "\n", "　", "在", "一个", "图表", "中", "包含", "两个", "数据", "系列", "\n", "16.1", ".", "9", "　", "给", "图表", "区域", "着色", "\n", "　", "给", "图表", "区域", "着色", "\n", "添加", "两个", "数据", "系列", "后", "，", "我们", "就", "可以", "了解", "每天", "的", "气温", "范围", "了", "。", "下面", "来", "给", "这个", "图表", "做", "最后", "的", "修饰", "，", "通过", "着色", "来", "呈现", "每天", "的", "气温", "范围", "。", "为此", "，", "我们", "将", "使用", "方法", "fill", "_", "between", "(", ")", " ", "，", "它", "\n", "接受", "一个", " ", "x", " ", "值", "系列", "和", "两个", " ", "y", " ", "值", "系列", "，", "并", "填充", "两个", " ", "y", " ", "值", "系列", "之间", "的", "空间", "："], ["highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "根据", "数据", "绘制", "图形", "\n", " ", " ", "fig", " ", "=", " ", "plt", ".", "figure", "(", "dpi", "=", "128", ",", " ", "figsize", "=", "(", "10", ",", " ", "6", ")", ")", "\n", "❶", " ", "plt", ".", "plot", "(", "dates", ",", " ", "highs", ",", " ", "c", "=", "'", "red", "'", ",", " ", "alpha", "=", "0.5", ")", "\n", " ", " ", "plt", ".", "plot", "(", "dates", ",", " ", "lows", ",", " ", "c", "=", "'", "blue", "'", ",", " ", "alpha", "=", "0.5", ")", "\n", "❷", " ", "plt", ".", "fill", "_", "between", "(", "dates", ",", " ", "highs", ",", " ", "lows", ",", " ", "facecolor", "=", "'", "blue", "'", ",", " ", "alpha", "=", "0.1", ")", "\n", " ", " ", "--", "snip", "--", "\n", "❶", "处", "的", "实参", "alpha", " ", "指定", "颜色", "的", "透明度", "。", "Alpha", " ", "值为", "0", "表示", "完全", "透明", "，", "1", "（", "默认设置", "）", "表示", "完全", "不", "透明", "。", "通过", "将", "alpha", " ", "设置", "为", "0.5", "，", "可", "让", "红色", "和", "蓝色", "折线", "的", "颜色", "看起来", "更", "浅", "。", "\n", "在", "❷", "处", "，", "我们", "向", "fill", "_", "between", "(", ")", " ", "传递", "了", "一个", " ", "x", " ", "值", "系列", "：", "列表", "dates", " ", "，", "还", "传递", "了", "两个", " ", "y", " ", "值", "系列", "：", "highs", " ", "和", "lows", " ", "。", "实参", "facecolor", " ", "指定", "了", "填充", "区域", "的", "颜色", "，", "我们", "还", "将", "alpha"], ["设置", "成", "了", "较", "小", "的", "值", "0.1", "，", "让", "填充", "区域", "将", "两个", "数据", "系列", "连接起来", "的", "同时", "不", "分散", "观察者", "的", "注意力", "。", "图", "16", "-", "5", "显示", "了", "最高", "气温", "和", "最低气温", "之间", "的", "区域", "被", "填充", "的", "图表", "。", "\n", "图", "\n", "图", "16", "-", "5", "　", "给", "两个", "数据", "集", "之间", "的", "区域", "着色", "\n", "　", "给", "两个", "数据", "集", "之间", "的", "区域", "着色", "\n", "通过", "着色", "，", "让", "两个", "数据", "集", "之间", "的", "区域", "显而易见", "。", "\n", "16.1", ".", "10", "　", "错误", "检查", "\n", "　", "错误", "检查", "\n", "我们", "应该", "能够", "使用", "有关", "任何", "地方", "的", "天气", "数据", "来", "运行", "highs", "_", "lows", ".", "py", "中", "的", "代码", "，", "但", "有些", "气象站", "会", "偶尔", "出现", "故障", "，", "未能", "收集", "部分", "或", "全部", "其", "应该", "收集", "的", "数据", "。", "缺失", "数据", "可能", "会", "引发", "异常", "，", "如", "\n", "果", "不", "妥善", "地", "处理", "，", "还", "可能", "导致", "程序", "崩溃", "。", "\n", "例如", "，", "我们", "来", "看看", "生成", "加利福尼亚", "死亡", "谷", "的", "气温", "图时", "出现", "的", "情况", "。", "将", "文件", "death", "_", "valley", "_", "2014", ".", "csv", "复制到", "本章", "程序", "所在", "的", "文件夹", "，", "再", "修改", "highs", "_", "lows", ".", "py", "，", "使", "其", "生成", "死亡", "谷", "的", "气温", "图", "：", "\n", "highs", "_", "lows", ".", "py", "\n", "--", "snip", "--", "\n", "#", " ", "从文件", "中", "获取", "日期", "、", "最高", "气温", "和", "最低气温", "\n", "filename", " ", "=", " ", "'", "death", "_", "valley", "_", "2014", ".", "csv", "'", "\n", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", "--", "snip", "--", "\n", "运行", "这个", "程序", "时", "，", "出现", "了", "一个", "错误", "，", "如", "下述", "输出", "的", "最后", "一行", "所示", "："], ["--", "snip", "--", "\n", "运行", "这个", "程序", "时", "，", "出现", "了", "一个", "错误", "，", "如", "下述", "输出", "的", "最后", "一行", "所示", "：", "\n", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", "File", " ", "\"", "highs", "_", "lows", ".", "py", "\"", ",", " ", "line", " ", "17", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", "high", " ", "=", " ", "int", "(", "row", "[", "1", "]", ")", "\n", "ValueError", ":", " ", "invalid", " ", "literal", " ", "for", " ", "int", "(", ")", " ", "with", " ", "base", " ", "10", ":", " ", "'", "'", "\n", "该", "traceback", "指出", "，", "Python", "无法", "处理", "其中", "一天", "的", "最高", "气温", "，", "因为", "它", "无法", "将空", "字符串", "（", "'", " ", "'", " ", "）", "转换", "为", "整数", "。", "只要", "看", "一下", "death", "_", "valley", "_", "2014", ".", "csv", "，", "就", "能", "发现", "其中", "的", "问题", "：", "\n", "2014", "-", "2", "-", "16", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", ",", "0.00", ",", ",", ",", "-", "1", "\n", "其中", "好像", "没有", "记录", "2014", "年", "2", "月", "16", "日", "的", "数据", "，", "表示", "最高", "温度", "的", "字符串", "为空", "。", "为", "解决", "这种", "问题", "，", "我们", "在", "从", "CSV", "文件", "中读", "取值", "时", "执行", "错误", "检查", "代码", "，", "对", "分析", "数据", "集时", "可能", "出现", "的", "异常", "进行", "\n", "处理", "，", "如下", "所示", "：", "\n", "highs", "_", "lows", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "从文件", "中", "获取", "日期", "、", "最高", "气温", "和", "最低气温", "\n", " ", " ", "filename", " ", "=", " ", "'", "death", "_", "valley", "_", "2014", ".", "csv", "'"], ["filename", " ", "=", " ", "'", "death", "_", "valley", "_", "2014", ".", "csv", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", " ", " ", " ", " ", " ", " ", "reader", " ", "=", " ", "csv", ".", "reader", "(", "f", ")", "\n", " ", " ", " ", " ", " ", " ", "header", "_", "row", " ", "=", " ", "next", "(", "reader", ")", "\n", " ", " ", " ", " ", " ", " ", "dates", ",", " ", "highs", ",", " ", "lows", " ", "=", " ", "[", "]", ",", " ", "[", "]", ",", " ", "[", "]", "\n", " ", " ", " ", " ", " ", " ", "for", " ", "row", " ", "in", " ", "reader", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "try", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "current", "_", "date", " ", "=", " ", "datetime", ".", "strptime", "(", "row", "[", "0", "]", ",", " ", "\"", "%", "Y", "-%", "m", "-%", "d", "\"", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "high", " ", "=", " ", "int", "(", "row", "[", "1", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "low", " ", "=", " ", "int", "(", "row", "[", "3", "]", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "except", " ", "ValueError", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "current", "_", "date", ",", " ", "'", "missing", " ", "data", "'", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "else", ":", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "dates", ".", "append", "(", "current", "_", "date", ")"], ["highs", ".", "append", "(", "high", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "lows", ".", "append", "(", "low", ")", "\n", " ", " ", " ", "#", "根据", "数据", "绘制", "图形", "\n", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", "#", "设置", "图形", "的", "格式", "\n", "❹", " ", "title", " ", "=", " ", "\"", "Daily", " ", "high", " ", "and", " ", "low", " ", "temperatures", " ", "-", " ", "2014", "\\", "nDeath", " ", "Valley", ",", " ", "CA", "\"", "\n", " ", " ", " ", "plt", ".", "title", "(", "title", ",", " ", "fontsize", "=", "20", ")", "\n", " ", " ", " ", "--", "snip", "--", "\n", "对于", "每", "一行", "，", "我们", "都", "尝试", "从中", "提取", "日期", "、", "最高", "气温", "和", "最低气温", "（", "见", "❶", "）", "。", "只要", "缺失", "其中", "一项", "数据", "，", "Python", "就", "会", "引发", "ValueError", " ", "异常", "，", "而", "我们", "可", "这样", "处理", "：", "打印", "一条", "错误", "消息", "，", "\n", "指出", "缺失", "数据", "的", "日期", "（", "见", "❷", "）", "。", "打印", "错误", "消息", "后", "，", "循环", "将", "接着", "处理", "下", "一行", "。", "如果", "获取", "特定", "日期", "的", "所有", "数据", "时", "没有", "发生", "错误", "，", "将", "运行", "else", " ", "代码", "块", "，", "并", "将", "数据", "附加", "到", "相应", "列表", "的", "末", "\n", "尾", "（", "见", "❸", "）", "。", "鉴于", "我们", "绘图", "时", "使用", "的", "是", "有关", "另", "一个", "地方", "的", "信息", "，", "我们", "修改", "了", "标题", "，", "在", "图表", "中", "指出", "了", "这个", "地方", "（", "见", "❹", "）", "。", "\n", "如果", "你", "现在", "运行", "highs", "_", "lows", ".", "py", " ", "，", "将", "发现", "缺失", "数据", "的", "日期", "只有", "一个", "：", "\n", "2014", "-", "02", "-", "16", " ", "missing", " ", "data"], ["2014", "-", "02", "-", "16", " ", "missing", " ", "data", "\n", "图", "16", "-", "6", "显示", "了", "绘制", "出", "的", "图形", "。", "\n", "图", "\n", "图", "16", "-", "6", "　", "死亡", "谷", "每日", "高", "气温", "和", "最低气温", "\n", "　", "死亡", "谷", "每日", "高", "气温", "和", "最低气温", "\n", "将", "这个", "图表", "与", "锡", "特卡", "的", "图表", "对比", "可知", "，", "总体而言", "，", "死亡", "谷比", "阿拉斯加", "东南部", "暖和", "，", "这", "可能", "符合", "预期", "，", "但", "这个", "沙漠", "中", "每天", "的", "温差", "也", "更", "大", "，", "从", "着色", "区域", "的", "高度", "可以", "明显", "看出", "这", "一点", "。", "\n", "使用", "的", "很多", "数据", "集都", "可能", "缺失", "数据", "、", "数据格式", "不", "正确", "或", "数据", "本身", "不", "正确", "。", "对于", "这样", "的", "情形", "，", "可", "使用", "本书", "前半部", "分", "介绍", "的", "工具", "来", "处理", "。", "在", "这里", "，", "我们", "使用", "了", "一个", "try", "-", "except", "-", "\n", "else", " ", "代码", "块", "来", "处理", "数据", "缺失", "的", "问题", "。", "在", "有些", "情况", "下", "，", "需要", "使用", "continue", " ", "来", "跳", "过", "一些", "数据", "，", "或者", "使用", "remove", "(", ")", " ", "或", "del", " ", "将", "已", "提取", "的", "数据", "删除", "。", "可", "采用", "任何", "管用", "的", "方法", "，", "只要", "能", "\n", "进行", "精确", "而", "有", "意义", "的", "可视化", "就", "好", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "16", "-", "1", " ", "旧金山", "\n", "旧金山", " ", "：", "旧金山", "的", "气温", "更", "接近", "于锡特卡", "还是", "死亡", "谷", "呢", "？", "请", "绘制", "一个", "显示", "旧金山", "最高", "气温", "和", "最低气温", "的", "图表", "，", "并", "进行", "比较", "。", "可", "从", "http", ":", "/", "/", "www", ".", "wunderground", ".", "com", "/", "history", "/"], ["下载", "几乎", "任何", "地方", "的", "天气", "数据", "。", "为此", "，", "请", "输入", "相应", "的", "地方", "和", "日期", "范围", "，", "滚动", "到", "页面", "底部", "，", "找到", "名为", "Comma", "-", "Delimited", " ", "File", "的", "链接", "，", "再", "单击", "该", "链接", "，", "将", "数据", "存储", "为", "CSV", "文", "\n", "件", "。", "\n", "16", "-", "2", " ", "比较", "锡特卡", "和", "死亡", "谷", "的", "气温", "\n", "比较", "锡特卡", "和", "死亡", "谷", "的", "气温", " ", "：", "在", "有关", "锡特卡", "和", "死亡", "谷", "的", "图表", "中", "，", "气温", "刻度", "反映", "了", "数据", "范围", "的", "不同", "。", "为", "准确", "地", "比较", "锡特卡", "和", "死亡", "谷", "的", "气温", "范围", "，", "需要", "在", "y", " ", "轴上", "使", "\n", "用", "相同", "的", "刻度", "。", "为此", "，", "请", "修改", "图", "16", "-", "5", "和", "图", "16", "-", "6", "所示", "图表", "的", "y", " ", "轴", "设置", "，", "对锡特卡", "和", "死亡", "谷", "的", "气温", "范围", "进行", "直接", "比较", "（", "你", "也", "可以", "对", "任何", "两个", "地方", "的", "气温", "范围", "进行", "比较", "）", "。", "你", "\n", "还", "可以", "尝试", "在", "一个", "图表", "中", "呈现", "这", "两个", "数据", "集", "。", "\n", "16", "-", "3", " ", "降雨量", "\n", "降雨量", " ", "：", "选择", "你", "感兴趣", "的", "任何", "地方", "，", "通过", "可视化", "将", "其", "降雨量", "呈现", "出来", "。", "为此", "，", "可先", "只", "涵盖", "一个月", "的", "数据", "，", "确定", "代码", "正确", "无误", "后", "，", "再", "使用", "一", "整年", "的", "数据", "来", "运行", "它", "。", "\n", "16", "-", "4", " ", "探索", "\n", "探索", " ", "：", "生成", "一些", "图表", "，", "对", "你", "好奇", "的", "任何", "地方", "的", "其他", "天气", "数据", "进行", "研究", "。", "\n", "16.2", "　", "制作", "世界", "人口", "地图", "：", "\n", "　", "制作", "世界", "人口", "地图", "：", "JSON", "格式", "\n", "格式"], ["16.2", "　", "制作", "世界", "人口", "地图", "：", "\n", "　", "制作", "世界", "人口", "地图", "：", "JSON", "格式", "\n", "格式", "\n", "在", "本节", "中", "，", "你", "将", "下载", "JSON", "格式", "的", "人口", "数据", "，", "并", "使用", "json", " ", "模块", "来", "处理", "它们", "。", "Pygal", "提供", "了", "一个", "适合", "初学者", "使用", "的", "地图", "创建", "工具", "，", "你", "将", "使用", "它", "来", "对", "人口", "数据", "进行", "可视化", "，", "以", "探索", "全球", "\n", "人口", "的", "分布", "情况", "。", "\n", "16.2", ".", "1", "　", "下载", "世界", "人口", "数据", "\n", "　", "下载", "世界", "人口", "数据", "\n", "将", "文件", "population", "_", "data", ".", "json", "复制到", "本章", "程序", "所在", "的", "文件夹", "中", "，", "这个", "文件", "包含", "全球", "大部分", "国家", "1960", "~", "2010", "年", "的", "人口", "数据", "。", "Open", " ", "Knowledge", " ", "Foundation", "（", "http", ":", "/", "/", "data", ".", "okfn", ".", "org", "/", " ", "）", "提供", "了", "大量", "可", "\n", "以", "免费", "使用", "的", "数据", "集", "，", "这些", "数据", "就", "来自", "其中", "一个", "数据", "集", "。", "\n", "16.2", ".", "2", "　", "提取", "相关", "的", "数据", "\n", "　", "提取", "相关", "的", "数据", "\n", "我们", "来", "研究", "一下", "population", "_", "data", ".", "json", "，", "看看", "如何", "着手", "处理", "这个", "文件", "中", "的", "数据", "：", "\n", "population", "_", "data", ".", "json", "\n", "[", "\n", " ", " ", "{", "\n", " ", " ", " ", " ", "\"", "Country", " ", "Name", "\"", ":", " ", "\"", "Arab", " ", "World", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Country", " ", "Code", "\"", ":", " ", "\"", "ARB", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Year", "\"", ":", " ", "\"", "1960", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Value", "\"", ":", " ", "\"", "96388069", "\"", "\n", " ", " ", "}", ","], ["\"", "Year", "\"", ":", " ", "\"", "1960", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Value", "\"", ":", " ", "\"", "96388069", "\"", "\n", " ", " ", "}", ",", "\n", " ", " ", "{", "\n", " ", " ", " ", " ", "\"", "Country", " ", "Name", "\"", ":", " ", "\"", "Arab", " ", "World", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Country", " ", "Code", "\"", ":", " ", "\"", "ARB", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Year", "\"", ":", " ", "\"", "1961", "\"", ",", "\n", " ", " ", " ", " ", "\"", "Value", "\"", ":", " ", "\"", "98882541.4", "\""], ["}", ",", "\n", " ", " ", "--", "snip", "--", "\n", "]", "\n", "这个", "文件", "实际上", "就是", "一个", "很长", "的", "Python", "列表", "，", "其中", "每个", "元素", "都", "是", "一个", "包含", "四个", "键", "的", "字典", "：", "国家", "名", "、", "国别", "码", "、", "年份", "以及", "表示", "人口数量", "的", "值", "。", "我们", "只", "关心", "每个", "国家", "2010", "年", "的", "人口数量", "，", "\n", "因此", "我们", "首先", "编写", "一个", "打印", "这些", "信息", "的", "程序", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "#", " ", "将", "数据", "加载", "到", "一个", "列表", "中", "\n", " ", " ", "filename", " ", "=", " ", "'", "population", "_", "data", ".", "json", "'", "\n", " ", " ", "with", " ", "open", "(", "filename", ")", " ", "as", " ", "f", ":", "\n", "❶", " ", " ", " ", " ", " ", "pop", "_", "data", " ", "=", " ", "json", ".", "load", "(", "f", ")", "\n", " ", " ", "#", " ", "打印", "每个", "国家", "2010", "年", "的", "人口数量", "\n", "❷", " ", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", "❸", " ", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "country", "_", "name", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "pop", "_", "dict", "[", "'", "Value", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "country", "_", "name", " ", "+", " ", "\"", ":", " ", "\"", " ", "+", " ", "population", ")"], ["print", "(", "country", "_", "name", " ", "+", " ", "\"", ":", " ", "\"", " ", "+", " ", "population", ")", "\n", "我们", "首先", "导入", "了", "模块", "json", " ", "，", "以便", "能够", "正确", "地", "加载", "文件", "中", "的", "数据", "，", "然后", "，", "我们", "将", "数据", "存储", "在", "pop", "_", "data", " ", "中", "（", "见", "❶", "）", "。", "函数", "json", ".", "load", "(", ")", " ", "将", "数据", "转换", "为", "Python", "能够", "处理", "的", "格式", "，", "\n", "这里", "是", "一个", "列表", "。", "在", "❷", "处", "，", "我们", "遍历", "pop", "_", "data", " ", "中", "的", "每个", "元素", "。", "每个", "元素", "都", "是", "一个", "字典", "，", "包含", "四个", "键", "—", "值", "对", "，", "我们", "将", "每个", "字典", "依次", "存储", "在", "pop", "_", "dict", " ", "中", "。", "\n", "在", "❸", "处", "，", "我们", "检查", "字典", "的", "'", "Year", "'", " ", "键", "对应", "的", "值", "是否是", "2010", "（", "由于", "population", "_", "data", ".", "json", "中", "的", "值", "都", "是", "用", "引号", "括起", "的", "，", "因此", "我们", "执行", "的", "是", "字符串", "比较", "）", "。", "如果", "年份", "为", "2010", "，", "我们", "就", "将", "\n", "与", "'", "Country", " ", "Name", "'", " ", "相关联", "的", "值", "存储", "到", "country", "_", "name", " ", "中", "，", "并", "将", "与", "'", "Value", "'", " ", "相关联", "的", "值", "存储", "在", "population", " ", "中", "（", "见", "❹", "）", "。", "接下来", "，", "我们", "打印", "每个", "国家", "的", "名称", "和", "人口数量", "。", "\n", "输出", "为", "一系列", "国家", "的", "名称", "和", "人口数量", "：", "\n", "Arab", " ", "World", ":", " ", "357868000", "\n", "Caribbean", " ", "small", " ", "states", ":", " ", "6880000"], ["Caribbean", " ", "small", " ", "states", ":", " ", "6880000", "\n", "East", " ", "Asia", " ", "&", " ", "Pacific", " ", "(", "all", " ", "income", " ", "levels", ")", ":", " ", "2201536674", "\n", "--", "snip", "--", "\n", "Zimbabwe", ":", " ", "12571000", "\n", "我们", "捕获", "的", "数据", "并非", "都", "包含", "准确", "的", "国家", "名", "，", "但", "这开", "了", "一个", "好头", "。", "现在", "，", "我们", "需要", "将", "数据", "转换", "为", "Pygal", "能够", "处理", "的", "格式", "。", "\n", "16.2", ".", "3", "　", "将", "字符串", "转换", "为", "数字", "值", "\n", "　", "将", "字符串", "转换", "为", "数字", "值", "\n", "population", "_", "data", ".", "json", "中", "的", "每个", "键和值", "都", "是", "字符串", "。", "为", "处理", "这些", "人口", "数据", "，", "我们", "需要", "将", "表示", "人口数量", "的", "字符串", "转换", "为", "数字", "值", "，", "为此", "我们", "使用", "函数", "int", "(", ")", " ", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "country", "_", "name", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")"], ["❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "country", "_", "name", " ", "+", " ", "\"", ":", " ", "\"", " ", "+", " ", "str", "(", "population", ")", ")", "\n", "在", "❶", "处", "，", "我们", "将", "每个", "人口数", "量值", "都", "存储", "为", "数字", "格式", "。", "打印", "人口数", "量值", "时", "，", "需要", "将", "其", "转换", "为", "字符串", "（", "见", "❷", "）", "。", "\n", "然而", "，", "对于", "有些", "值", "，", "这种", "转换", "会", "导致", "错误", "，", "如下", "所示", "：", "\n", " ", " ", "Arab", " ", "World", ":", " ", "357868000", "\n", " ", " ", "Caribbean", " ", "small", " ", "states", ":", " ", "6880000", "\n", " ", " ", "East", " ", "Asia", " ", "&", " ", "Pacific", " ", "(", "all", " ", "income", " ", "levels", ")", ":", " ", "2201536674", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "Traceback", " ", "(", "most", " ", "recent", " ", "call", " ", "last", ")", ":", "\n", " ", " ", " ", " ", "File", " ", "\"", "print", "_", "populations", ".", "py", "\"", ",", " ", "line", " ", "12", ",", " ", "in", " ", "<", "module", ">", "\n", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")", "\n", "❶", " ", "ValueError", ":", " ", "invalid", " ", "literal", " ", "for", " ", "int", "(", ")", " ", "with", " ", "base", " ", "10", ":", " ", "'", "1127437398.85751", "'"], ["原始数据", "的", "格式", "常常", "不", "统一", "，", "因此", "经常", "会", "出现", "错误", "。", "导致", "上述", "错误", "的", "原因", "是", "，", "Python", "不能", "直接", "将", "包含", "小数点", "的", "字符串", "'", "1127437398.85751", "'", " ", "转换", "为", "整数", "（", "这个", "小", "数值", "可能", "是", "人", "\n", "口", "数据", "缺失", "时", "通过", "插值", "得到", "的", "）", "。", "为", "消除", "这种", "错误", "，", "我们", "先", "将", "字符串", "转换", "为", "浮点数", "，", "再", "将", "浮点数", "转换", "为", "整数", "：", "\n", "world", "_", "population", ".", "py", "\n", "--", "snip", "--", "\n", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "country", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "float", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "country", " ", "+", " ", "\"", ":", " ", "\"", " ", "+", " ", "str", "(", "population", ")", ")", "\n", "函数", "float", "(", ")", " ", "将", "字符串", "转换", "为", "小数", "，", "而", "函数", "int", "(", ")", " ", "丢弃", "小数", "部分", "，", "返回", "一个", "整数", "。", "现在", "，", "我们", "可以", "打印", "2010", "年", "的", "完整", "人口", "数据", "，", "不会", "导致", "错误", "了", "：", "\n", "Arab", " ", "World", ":", " ", "357868000", "\n", "Caribbean", " ", "small", " ", "states", ":", " ", "6880000"], ["Caribbean", " ", "small", " ", "states", ":", " ", "6880000", "\n", "East", " ", "Asia", " ", "&", " ", "Pacific", " ", "(", "all", " ", "income", " ", "levels", ")", ":", " ", "2201536674", "\n", "--", "snip", "--", "\n", "Zimbabwe", ":", " ", "12571000"], ["每个", "字符串", "都", "成功", "地", "转换成", "了", "浮点数", "，", "再", "转换", "为", "整数", "。", "以", "数字", "格式", "存储", "人口数", "量值", "后", "，", "就", "可以", "使用", "它们", "来", "制作", "世界", "人口", "地图", "了", "。", "\n", "16.2", ".", "4", "　", "获取", "两个", "字母", "的", "国别", "码", "\n", "　", "获取", "两个", "字母", "的", "国别", "码", "\n", "制作", "地图", "前", "，", "还", "需要", "解决", "数据", "存在", "的", "最后", "一个", "问题", "。", "Pygal", "中", "的", "地图", "制作", "工具", "要求", "数据", "为", "特定", "的", "格式", "：", "用", "国别", "码", "表示", "国家", "，", "以及", "用", "数字", "表示", "人口数量", "。", "处理", "地理", "政治", "数据", "时", "，", "经常", "\n", "需要", "用到", "几个", "标准化", "国别", "码集", "。", "population", "_", "data", ".", "json", "中", "包含", "的", "是", "三个", "字母", "的", "国别", "码", "，", "但", "Pygal", "使用", "两个", "字母", "的", "国别", "码", "。", "我们", "需要", "想", "办法", "根据", "国家", "名", "获取", "两个", "字母", "的", "国别", "码", "。", "\n", "Pygal", "使用", "的", "国别", "码", "存储", "在", "模块", "i18n", " ", "（", "internationalization", "的", "缩写", "）", "中", "。", "字典", "COUNTRIES", " ", "包含", "的", "键", "和", "值", "分别", "为", "两个", "字母", "的", "国别", "码", "和", "国家", "名", "。", "要", "查看", "这些", "国别", "码", "，", "可", "从", "模块", "i18n", " ", "中", "导", "\n", "入", "这个", "字典", "，", "并打印", "其键", "和", "值", "：", "\n", "countries", ".", "py", "\n", " ", " ", "from", " ", "pygal", ".", "i18n", " ", "import", " ", "COUNTRIES", "\n", "❶", " ", "for", " ", "country", "_", "code", " ", "in", " ", "sorted", "(", "COUNTRIES", ".", "keys", "(", ")", ")", ":"], ["❶", " ", "for", " ", "country", "_", "code", " ", "in", " ", "sorted", "(", "COUNTRIES", ".", "keys", "(", ")", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "country", "_", "code", ",", " ", "COUNTRIES", "[", "country", "_", "code", "]", ")", "\n", "在", "上面", "的", "for", " ", "循环", "中", "，", "我们", "让", "Python", "将键", "按", "字母", "顺序", "排序", "（", "见", "❶", "）", "，", "然后", "打印", "每个", "国别", "码", "及其", "对应", "的", "国家", "：", "\n", "ad", " ", "Andorra", "\n", "ae", " ", "United", " ", "Arab", " ", "Emirates", "\n", "af", " ", "Afghanistan", "\n", "--", "snip", "--", "\n", "zw", " ", "Zimbabwe", "\n", "为", "获取", "国别", "码", "，", "我们", "将", "编写", "一个", "函数", "，", "它", "在", "COUNTRIES", " ", "中", "查找", "并", "返回", "国别", "码", "。", "我们", "将", "这个", "函数", "放在", "一个", "名为", "country", "_", "codes", " ", "的", "模块", "中", "，", "以便", "能够", "在", "可视化", "程序", "中", "导入", "它", "：", "\n", "country", "_", "codes", ".", "py", "\n", " ", " ", "from", " ", "pygal", ".", "i18n", " ", "import", " ", "COUNTRIES", "\n", "❶", " ", "def", " ", "get", "_", "country", "_", "code", "(", "country", "_", "name", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "根据", "指定", "的", "国家", "，", "返回", "Pygal", "使用", "的", "两个", "字母", "的", "国别", "码", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "for", " ", "code", ",", " ", "name", " ", "in", " ", "COUNTRIES", ".", "items", "(", ")", ":"], ["❷", " ", " ", " ", " ", " ", "for", " ", "code", ",", " ", "name", " ", "in", " ", "COUNTRIES", ".", "items", "(", ")", ":", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "name", " ", "=", "=", " ", "country", "_", "name", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "code", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "如果", "没有", "找到", "指定", "的", "国家", "，", "就", "返回", "None", "\n", "❹", " ", " ", " ", " ", " ", "return", " ", "None", "\n", " ", " ", "print", "(", "get", "_", "country", "_", "code", "(", "'", "Andorra", "'", ")", ")", "\n", " ", " ", "print", "(", "get", "_", "country", "_", "code", "(", "'", "United", " ", "Arab", " ", "Emirates", "'", ")", ")", "\n", " ", " ", "print", "(", "get", "_", "country", "_", "code", "(", "'", "Afghanistan", "'", ")", ")", "\n", "get", "_", "country", "_", "code", "(", ")", " ", "接受", "国家", "名", "，", "并", "将", "其", "存储", "在", "形参", "country", "_", "name", " ", "中", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "遍历", "COUNTRIES", " ", "中", "的", "国家", "名", "—", "国别", "码对", "（", "见", "❷", "）", "；", "如果", "找到", "指定", "的", "国家", "\n", "名", "，", "就", "返回", "相应", "的", "国别", "码", "（", "见", "❸", "）", "。", "在", "循环", "后面", "，", "我们", "在", "没有", "找到", "指定", "的", "国家", "名时", "返回", "None", " ", "（", "见", "❹", "）", "。", "最后", "，", "我们", "使用", "了", "三个", "国家", "名来", "调用", "这个", "函数", "，", "以", "核实", "它", "能否", "正确", "地工", "\n", "作", "。", "与", "预期", "的", "一样", "，", "这个", "程序", "输出", "了", "三个", "由", "两个", "字母", "组成", "的", "国别", "码", "：", "\n", "ad", "\n", "ae", "\n", "af"], ["作", "。", "与", "预期", "的", "一样", "，", "这个", "程序", "输出", "了", "三个", "由", "两个", "字母", "组成", "的", "国别", "码", "：", "\n", "ad", "\n", "ae", "\n", "af", "\n", "使用", "这个", "函数", "前", "，", "先", "将", "country", "_", "codes", ".", "py", "中", "的", "print", " ", "语句", "删除", "。", "\n", "接下来", "，", "在", "world", "_", "population", ".", "py", "中", "导入", "get", "_", "country", "_", "code", " ", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "from", " ", "country", "_", "codes", " ", "import", " ", "get", "_", "country", "_", "code", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "打印", "每个", "国家", "2010", "年", "的", "人口数量", "\n", " ", " ", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "country", "_", "name", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "float", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")", ")", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "code", " ", "=", " ", "get", "_", "country", "_", "code", "(", "country", "_", "name", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "code", ":"], ["if", " ", "code", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "code", " ", "+", " ", "\"", ":", " ", "\"", "+", " ", "str", "(", "population", ")", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "print", "(", "'", "ERROR", " ", "-", " ", "'", " ", "+", " ", "country", "_", "name", ")", "\n", "提取", "国家", "名", "和", "人口数量", "后", "，", "我们", "将", "国别", "码", "存储", "在", "code", " ", "中", "，", "如果", "没有", "国别", "码", "，", "就", "在", "其中", "存储", "None", " ", "（", "见", "❶", "）", "。", "如果", "返回", "了", "国别", "码", "，", "就", "打印", "国别", "码", "和", "相应", "国家", "的", "人口数量", "（", "见", "❷", "）", "。", "\n", "如果", "没有", "找到", "国别", "码", "，", "就", "显示", "一条", "错误", "消息", "，", "其中", "包含", "无法", "找到", "国别", "码", "的", "国家", "的", "名称", "（", "见", "❸", "）", "。", "如果", "你", "运行", "这个", "程序", "，", "将", "看到", "一些", "国别", "码", "和", "相应", "国家", "的", "人口数量", "，", "还有", "一些", "错误", "\n", "消息", "：", "\n", "ERROR", " ", "-", " ", "Arab", " ", "World", "\n", "ERROR", " ", "-", " ", "Caribbean", " ", "small", " ", "states", "\n", "ERROR", " ", "-", " ", "East", " ", "Asia", " ", "&", " ", "Pacific", " ", "(", "all", " ", "income", " ", "levels", ")", "\n", "--", "snip", "--", "\n", "af", ":", " ", "34385000", "\n", "al", ":", " ", "3205000", "\n", "dz", ":", " ", "35468000", "\n", "--", "snip", "--", "\n", "ERROR", " ", "-", " ", "Yemen", ",", " ", "Rep", ".", "\n", "zm", ":", " ", "12927000", "\n", "zw", ":", " ", "12571000"], ["导致", "显示", "错误", "消息", "的", "原因", "有", "两个", "。", "首先", "，", "并非", "所有", "人口数量", "对应", "的", "都", "是", "国家", "，", "有些", "人口数量", "对应", "的", "是", "地区", "（", "阿拉伯", "世界", "）", "和", "经济", "类群", "（", "所有", "收入水平", "）", "。", "其次", "，", "有些", "统计数据", "使", "\n", "用", "了", "不同", "的", "完整", "国家", "名", "（", "如", "Yemen", ",", " ", "Rep", ".", "，", "而", "不是", "Yemen", "）", "。", "当前", "，", "我们", "将", "忽略", "导致", "错误", "的", "数据", "，", "看看", "根据", "成功", "恢复", "了", "的", "数据", "制作", "出", "的", "地图", "是", "什么样", "的", "。", "\n", "16.2", ".", "5", "　", "制作", "世界地图", "\n", "　", "制作", "世界地图", "\n", "有", "了", "国别", "码后", "，", "制作", "世界地图", "易如反掌", "。", "Pygal", "提供", "了", "图表", "类型", "Worldmap", " ", "，", "可", "帮助", "你", "制作", "呈现", "各国", "数据", "的", "世界地图", "。", "为", "演示", "如何", "使用", "Worldmap", " ", "，", "我们", "来", "创建", "一个", "突出", "北美", "、", "中", "\n", "美", "和", "南美", "的", "简单", "地图", "：", "\n", "americas", ".", "py", "\n", " ", " ", "import", " ", "pygal", "\n", "❶", " ", "wm", " ", "=", " ", "pygal", ".", "Worldmap", "(", ")", "\n", " ", " ", "wm", ".", "title", " ", "=", " ", "'", "North", ",", " ", "Central", ",", " ", "and", " ", "South", " ", "America", "'", "\n", "❷", " ", "wm", ".", "add", "(", "'", "North", " ", "America", "'", ",", " ", "[", "'", "ca", "'", ",", " ", "'", "mx", "'", ",", " ", "'", "us", "'", "]", ")", "\n", " ", " ", "wm", ".", "add", "(", "'", "Central", " ", "America", "'", ",", " ", "[", "'", "bz", "'", ",", " ", "'", "cr", "'", ",", " ", "'", "gt", "'", ",", " ", "'", "hn", "'", ",", " ", "'", "ni", "'", ",", " ", "'", "pa", "'", ",", " ", "'", "sv", "'", "]", ")"], ["wm", ".", "add", "(", "'", "South", " ", "America", "'", ",", " ", "[", "'", "ar", "'", ",", " ", "'", "bo", "'", ",", " ", "'", "br", "'", ",", " ", "'", "cl", "'", ",", " ", "'", "co", "'", ",", " ", "'", "ec", "'", ",", " ", "'", "gf", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "gy", "'", ",", " ", "'", "pe", "'", ",", " ", "'", "py", "'", ",", " ", "'", "sr", "'", ",", " ", "'", "uy", "'", ",", " ", "'", "ve", "'", "]", ")", "\n", "❸", " ", "wm", ".", "render", "_", "to", "_", "file", "(", "'", "americas", ".", "svg", "'", ")", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "Worldmap", " ", "实例", "，", "并", "设置", "了", "该", "地图", "的", "的", "title", " ", "属性", "。", "在", "❷", "处", "，", "我们", "使用", "了", "方法", "add", "(", ")", " ", "，", "它", "接受", "一个", "标签", "和", "一个", "列表", "，", "其中", "后者", "包含", "我们", "要", "突出", "的", "国家", "\n", "的", "国别", "码", "。", "每次", "调用", "add", "(", ")", " ", "都", "将", "为", "指定", "的", "国家", "选择", "一种", "新", "颜色", "，", "并", "在", "图表", "左边", "显示", "该", "颜色", "和", "指定", "的", "标签", "。", "我们", "要", "以同", "一种", "颜色", "显示", "整个", "北美地区", "，", "因此", "第一次", "调用", "add", "(", ")", " ", "时", "，", "\n", "在", "传递", "给", "它", "的", "列表", "中", "包含", "'", "ca", "'", " ", "、", "'", "mx", "'", " ", "和", "'", "us", "'", " ", "，", "以", "同时", "突出", "加拿大", "、", "墨西哥", "和", "美国", "。", "接下来", "，", "对", "中美", "和", "南美国家", "做", "同样", "的", "处理", "。", "\n", "❸", "处", "的", "方法", "render", "_", "to", "_", "file", "(", ")", " ", "创建", "一个", "包含", "该", "图表", "的", ".", "svg", "文件", "，", "你", "可以", "在", "浏览器", "中", "打开", "它", "。", "输出", "是", "一幅", "以", "不同", "颜色", "突出", "北美", "、", "中美", "和", "南美", "的", "地图", "，", "如图", "16", "-", "7", "所示", "。", "\n", "图", "\n", "图", "16", "-", "7", "　", "图表", "类型", "\n", "　", "图表", "类型", "Worldmap", " ", "的", "一个", "简单", "实例", "\n", "的", "一个", "简单", "实例"], ["图", "\n", "图", "16", "-", "7", "　", "图表", "类型", "\n", "　", "图表", "类型", "Worldmap", " ", "的", "一个", "简单", "实例", "\n", "的", "一个", "简单", "实例", "\n", "知道", "如何", "创建", "包含", "彩色", "区域", "、", "颜色", "标示", "和", "标签", "的", "地图", "后", "，", "我们", "在", "地图", "中", "添加", "数据", "，", "以", "显示", "有关", "国家", "的", "信息", "。", "\n", "16.2", ".", "6", "　", "在", "世界地图", "上", "呈现", "数字", "数据", "\n", "　", "在", "世界地图", "上", "呈现", "数字", "数据", "\n", "为", "练习", "在", "地图", "上", "呈现", "数字", "数据", "，", "我们", "来", "创建", "一幅", "地图", "，", "显示", "三个", "北美", "国家", "的", "人口数量", "：", "\n", "na", "_", "populations", ".", "py", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "wm", " ", "=", " ", "pygal", ".", "Worldmap", "(", ")", "\n", " ", " ", "wm", ".", "title", " ", "=", " ", "'", "Populations", " ", "of", " ", "Countries", " ", "in", " ", "North", " ", "America", "'", "\n", "❶", " ", "wm", ".", "add", "(", "'", "North", " ", "America", "'", ",", " ", "{", "'", "ca", "'", ":", " ", "34126000", ",", " ", "'", "us", "'", ":", " ", "309349000", ",", " ", "'", "mx", "'", ":", " ", "113423000", "}", ")", "\n", " ", " ", "wm", ".", "render", "_", "to", "_", "file", "(", "'", "na", "_", "populations", ".", "svg", "'", ")", "\n", "首先", "，", "创建", "了", "一个", "Worldmap", " ", "实例", "并", "设置", "了", "标题", "。", "接下来", "，", "使用", "了", "方法", "add", "(", ")", " ", "，", "但", "这次", "通过", "第二个", "实参", "传递", "了", "一个", "字典", "而", "不是", "列表", "（", "见", "❶", "）", "。", "这个", "字典", "将", "两个", "字母", "的", "Pygal", "国别"], ["码", "作为", "键", "，", "将", "人口数量", "作为", "值", "。", "Pygal", "根据", "这些", "数字", "自动", "给", "不同", "国家", "着", "以", "深浅", "不一", "的", "颜色", "（", "人口", "最少", "的", "国家", "颜色", "最浅", "，", "人口", "最多", "的", "国家", "颜色", "最深", "）", "，", "如图", "16", "-", "8", "所示", "。"], ["图", "\n", "图", "16", "-", "8", "　", "北美", "国家", "的", "人口数量", "\n", "　", "北美", "国家", "的", "人口数量", "\n", "这", "幅", "地图", "具有", "交互性", "：", "如果", "你", "将", "鼠标", "指向", "某个", "国家", "，", "将", "看到", "其", "人口数量", "。", "下面", "在", "这个", "地图", "中", "添加", "更", "多", "的", "数据", "。", "\n", "16.2", ".", "7", "　", "绘制", "完整", "的", "世界", "人口", "地图", "\n", "　", "绘制", "完整", "的", "世界", "人口", "地图", "\n", "要", "呈现", "其他", "国家", "的", "人口数量", "，", "需要", "将", "前面", "处理", "的", "数据", "转换", "为", "Pygal", "要求", "的", "字典", "格式", "：", "键为", "两个", "字母", "的", "国别", "码", "，", "值为", "人口数量", "。", "为此", "，", "在", "world", "_", "population", ".", "py", "中", "添加", "如下", "代码", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "from", " ", "country", "_", "codes", " ", "import", " ", "get", "_", "country", "_", "code", "\n", " ", " ", "#", " ", "将", "数据", "加载", "到", "列表", "中", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "创建", "一个", "包含", "人口数量", "的", "字典", "\n", "❶", " ", "cc", "_", "populations", " ", "=", " ", "{", "}", "\n", " ", " ", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "country", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]"], ["country", " ", "=", " ", "pop", "_", "dict", "[", "'", "Country", " ", "Name", "'", "]", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "population", " ", "=", " ", "int", "(", "float", "(", "pop", "_", "dict", "[", "'", "Value", "'", "]", ")", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "code", " ", "=", " ", "get", "_", "country", "_", "code", "(", "country", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "code", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "cc", "_", "populations", "[", "code", "]", " ", "=", " ", "population", "\n", "❸", " ", "wm", " ", "=", " ", "pygal", ".", "Worldmap", "(", ")", "\n", " ", " ", "wm", ".", "title", " ", "=", " ", "'", "World", " ", "Population", " ", "in", " ", "2010", ",", " ", "by", " ", "Country", "'", "\n", "❹", " ", "wm", ".", "add", "(", "'", "2010", "'", ",", " ", "cc", "_", "populations", ")", "\n", " ", " ", "wm", ".", "render", "_", "to", "_", "file", "(", "'", "world", "_", "population", ".", "svg", "'", ")", "\n", "我们", "首先", "导入", "了", "pygal", " ", "。", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "空", "字典", "，", "用于", "以", "Pygal", "要求", "的", "格式", "存储", "国别", "码", "和", "人口数量", "。", "在", "❷", "处", "，", "如果", "返回", "了", "国别", "码", "，", "就", "将", "国别", "码", "和", "人口数量", "分别", "作为", "键和值", "\n", "填充", "字典", "cc", "_", "populations", " ", "。", "我们", "还", "删除", "了", "所有", "的", "print", " ", "语句", "。"], ["填充", "字典", "cc", "_", "populations", " ", "。", "我们", "还", "删除", "了", "所有", "的", "print", " ", "语句", "。", "\n", "在", "❸", "处", "，", "我们", "创建", "了", "一个", "Worldmap", " ", "实例", "，", "并", "设置", "其", "title", " ", "属性", "。", "在", "❹", "处", "，", "我们", "调用", "了", "add", "(", ")", " ", "，", "并", "向", "它", "传递", "由", "国别", "码", "和", "人口数量", "组成", "的", "字典", "。", "图", "16", "-", "9", "显示", "了", "生成", "的", "地图", "。", "\n", "图", "\n", "图", "16", "-", "9", "　", "\n", "　", "2010", "年", "的", "世界", "人口数量", "\n", "年", "的", "世界", "人口数量"], ["有", "几个", "国家", "没有", "相关", "的", "数据", "，", "我们", "将", "其", "显示", "为", "黑色", "，", "但", "对于", "大多数", "国家", "，", "都", "根据", "其", "人口数量", "进行", "了", "着色", "。", "本章", "后面", "将", "处理", "数据", "缺失", "的", "问题", "，", "这里", "先", "来", "修改", "着色", "，", "以", "更", "准确", "地", "反映", "\n", "各国", "的", "人口数量", "。", "在", "当前", "的", "地图", "中", "，", "很多", "国家", "都", "是", "浅色", "的", "，", "只有", "两个", "国家", "是", "深色", "的", "。", "对", "大多数", "国家", "而言", "，", "颜色", "深浅", "的", "差别", "不足以", "反映", "其", "人口数量", "的", "差别", "。", "为", "修复", "这种", "问题", "，", "我们", "\n", "将", "根据", "人口数量", "将", "国家", "分组", "，", "再", "分别", "给", "每个", "组", "着色", "。", "\n", "16.2", ".", "8", "　", "根据", "人口数量", "将", "国家", "分组", "\n", "　", "根据", "人口数量", "将", "国家", "分组", "\n", "印度", "和", "中国", "的", "人口", "比", "其他", "国家", "多得多", "，", "但", "在", "当前", "的", "地图", "中", "，", "它们", "的", "颜色", "与", "其他", "国家", "差别", "较", "小", "。", "中国", "和", "印度", "的", "人口", "都", "超过", "了", "10", "亿", "，", "接下来", "人口", "最多", "的", "国家", "是", "美国", "，", "但", "只有", "大约", "3", "亿", "。", "\n", "下面", "不", "将", "所有", "国家", "都", "作为", "一个", "编组", "，", "而是", "根据", "人口数量", "分成", "三组", "—", "—", "少于", "1000", "万", "的", "、", "介于", "1000", "万", "和", "10", "亿", "之间", "的", "以及", "超过", "10", "亿", "的", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "创建", "一个", "包含", "人口", "数据", "的", "字典", "\n", " ", " ", "cc", "_", "populations", " ", "=", " ", "{", "}", "\n", " ", " ", "for", " ", "pop", "_", "dict", " ", "in", " ", "pop", "_", "data", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", "_", "dict", "[", "'", "Year", "'", "]", " ", "=", "=", " ", "'", "2010", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "code", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "cc", "_", "populations", "[", "code", "]", " ", "=", " ", "population", "\n", " ", " ", "#", " ", "根据", "人口数量", "将", "所有", "的", "国家", "分成", "三组", "\n", "❶", " ", "cc", "_", "pops", "_", "1", ",", " ", "cc", "_", "pops", "_", "2", ",", " ", "cc", "_", "pops", "_", "3", " ", "=", " ", "{", "}", ",", " ", "{", "}", ",", " ", "{", "}", "\n", "❷", " ", "for", " ", "cc", ",", " ", "pop", " ", "in", " ", "cc", "_", "populations", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", " ", "<", " ", "10000000", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "cc", "_", "pops", "_", "1", "[", "cc", "]", " ", "=", " ", "pop", "\n", " ", " ", " ", " ", " ", " ", "elif", " ", "pop", " ", "<", " ", "1000000000", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "cc", "_", "pops", "_", "2", "[", "cc", "]", " ", "=", " ", "pop", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "cc", "_", "pops", "_", "3", "[", "cc", "]", " ", "=", " ", "pop", "\n", " ", " ", " ", "#", " ", "看看", "每组", "分别", "包含", "多少", "个", "国家", "\n", "❸", " ", "print", "(", "len", "(", "cc", "_", "pops", "_", "1", ")", ",", " ", "len", "(", "cc", "_", "pops", "_", "2", ")", ",", " ", "len", "(", "cc", "_", "pops", "_", "3", ")", ")", "\n", " ", " ", " ", "wm", " ", "=", " ", "pygal", ".", "Worldmap", "(", ")", "\n", " ", " ", " ", "wm", ".", "title", " ", "=", " ", "'", "World", " ", "Population", " ", "in", " ", "2010", ",", " ", "by", " ", "Country", "'"], ["❹", " ", "wm", ".", "add", "(", "'", "0", "-", "10m", "'", ",", " ", "cc", "_", "pops", "_", "1", ")", "\n", " ", " ", " ", "wm", ".", "add", "(", "'", "10m", "-", "1bn", "'", ",", " ", "cc", "_", "pops", "_", "2", ")", "\n", " ", " ", " ", "wm", ".", "add", "(", "'", ">", "1bn", "'", ",", " ", "cc", "_", "pops", "_", "3", ")", "\n", " ", " ", " ", "wm", ".", "render", "_", "to", "_", "file", "(", "'", "world", "_", "population", ".", "svg", "'", ")", "\n", "为", "将", "国家", "分组", "，", "我们", "创建", "了", "三个", "空", "字典", "（", "见", "❶", "）", "。", "接下来", "，", "遍历", "cc", "_", "populations", " ", "，", "检查", "每个", "国家", "的", "人口数量", "（", "见", "❷", "）", "。", "if", "-", "elif", "-", "else", " ", "代码", "块", "将", "每个", "国别", "码", "-", "人口数量", "对加", "\n", "入到", "合适", "的", "字典", "（", "cc", "_", "pops", "_", "1", " ", "、", "cc", "_", "pops", "_", "2", " ", "或", "cc", "_", "pops", "_", "3", " ", "）", "中", "。", "\n", "在", "❸", "处", "，", "我们", "打印", "这些", "字典", "的", "长度", "，", "以", "获悉", "每个", "分组", "的", "规模", "。", "绘制地图", "时", "，", "我们", "将", "全部", "三个", "分组", "都", "添加", "到", "Worldmap", " ", "中", "（", "见", "❹", "）", "。", "如果", "你", "现在", "运行", "这个", "程序", "，", "首先", "看到", "的", "将", "是", "每", "\n", "个", "分组", "的", "规模", "：", "\n", "85", " ", "69", " ", "2", "\n", "上述", "输出", "表明", "，", "人口", "少于", "1000", "万", "的", "国家", "有", "85", "个", "，", "人口", "介于", "1000", "万", "和", "10", "亿", "之间", "的", "国家", "有", "69", "个", "，", "还有", "两个", "国家", "比较", "特殊", "，", "其", "人口", "都", "超过", "了", "10", "亿", "。", "这样", "的", "分组", "看起来", "足够", "了", "，", "让", "地图包", "\n", "含", "丰富", "的", "信息", "。", "图", "16", "-", "10", "显示", "了", "生成", "的", "地图", "。", "\n", "图", "\n", "图", "16", "-", "10", "　", "分", "三组", "显示", "的", "世界", "各国", "人口", "\n", "　", "分", "三组", "显示", "的", "世界", "各国", "人口"], ["图", "\n", "图", "16", "-", "10", "　", "分", "三组", "显示", "的", "世界", "各国", "人口", "\n", "　", "分", "三组", "显示", "的", "世界", "各国", "人口", "\n", "现在", "使用", "了", "三种", "不同", "的", "颜色", "，", "让", "我们", "能够", "看出", "人口数量", "上", "的", "差别", "。", "在", "每组", "中", "，", "各个", "国家", "都", "按", "人口", "从少", "到", "多", "着", "以", "从", "浅", "到", "深", "的", "颜色", "。", "\n", "16.2", ".", "9", "　", "使用", "\n", "　", "使用", "Pygal", "设置", "世界地图", "的", "样式", "\n", "设置", "世界地图", "的", "样式", "\n", "在", "这个", "地图", "中", "，", "根据", "人口", "将", "国家", "分组", "虽然", "很", "有效", "，", "但", "默认", "的", "颜色", "设置", "很", "难看", "。", "例如", "，", "在", "这里", "，", "Pygal", "选择", "了", "鲜艳", "的", "粉色", "和", "绿色", "基色", "。", "下面", "使用", "Pygal", "样式", "设置", "指令", "来", "调整", "颜色", "。", "\n", "我们", "也", "让", "Pygal", "使用", "一种", "基色", "，", "但", "将", "指定", "该", "基色", "，", "并", "让", "三个", "分组", "的", "颜色", "差别", "更大", "：", "\n", "world", "_", "population", ".", "py", "\n", " ", " ", "import", " ", "json", "\n", " ", " ", "import", " ", "pygal", "\n", "❶", " ", "from", " ", "pygal", ".", "style", " ", "import", " ", "RotateStyle"], ["--", "snip", "--", "\n", " ", " ", "#", " ", "根据", "人口数量", "将", "所有", "的", "国家", "分成", "三组", "\n", " ", " ", "cc", "_", "pops", "_", "1", ",", " ", "cc", "_", "pops", "_", "2", ",", " ", "cc", "_", "pops", "_", "3", " ", "=", " ", "{", "}", ",", " ", "{", "}", ",", " ", "{", "}", "\n", " ", " ", "for", " ", "cc", ",", " ", "pop", " ", "in", " ", "cc", "_", "populations", ".", "items", "(", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "pop", " ", "<", " ", "10000000", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", "wm", "_", "style", " ", "=", " ", "RotateStyle", "(", "'", "#", "336699", "'", ")", "\n", "❸", " ", "wm", " ", "=", " ", "pygal", ".", "Worldmap", "(", "style", "=", "wm", "_", "style", ")", "\n", " ", " ", "wm", ".", "title", " ", "=", " ", "'", "World", " ", "Population", " ", "in", " ", "2010", ",", " ", "by", " ", "Country", "'", "\n", " ", " ", "--", "snip", "--", "\n", "Pygal", "样式", "存储", "在", "模块", "style", " ", "中", "，", "我们", "从", "这个", "模块", "中", "导入", "了", "样式", "RotateStyle", " ", "（", "见", "❶", "）", "。", "创建", "这个", "类", "的", "实例", "时", "，", "需要", "提供", "一个", "实参", "—", "—", "十六进制", "的", "RGB", "颜色", "（", "见", "❷", "）", "；", "Pygal", "将", "根", "\n", "据", "指定", "的", "颜色", "为", "每组", "选择", "颜色", "。", "十六进制", "格式", "\n", "十六进制", "格式", " ", "的", "RGB", "颜色", "是", "一个", "以井号", "（", "#", "）", "打头", "的", "字符串", "，", "后面", "跟着", "6", "个字符", "，", "其中", "前", "两个", "字符", "表示", "红色", "分量", "，", "接下来", "的", "两个", "表示", "绿色", "分量", "，", "最"], ["后", "两个", "表示", "蓝色", "分量", "。", "每个", "分量", "的", "取值", "范围", "为", "00", " ", "（", "没有", "相应", "的", "颜色", "）", "~", "FF", " ", "（", "包含", "最多", "的", "相应", "颜色", "）", "。", "如果", "你", "在线", "搜索", "hex", " ", "color", " ", "chooser", "（", "十六进制", "颜色", "选择器", "\n", "十六进制", "颜色", "选择器", " ", "）", "，", "可", "找到", "让你能", "\n", "够", "尝试", "选择", "不同", "的", "颜色", "并", "显示", "其", "RGB", "值", "的", "工具", "。", "这里", "使用", "的", "颜色", "值", "（", "#", "336699", "）", "混合", "了", "少量", "的", "红色", "（", "33", "）", "、", "多一些", "的", "绿色", "（", "66", "）", "和", "更", "多一些", "的", "蓝色", "（", "99", "）", "，", "它", "为", "RotateStyle", " ", "提", "\n", "供", "了", "一种", "淡蓝色", "基色", "。", "\n", "RotateStyle", " ", "返回", "一个", "样式", "对象", "，", "我们", "将", "其", "存储", "在", "wm", "_", "style", " ", "中", "。", "为", "使用", "这个", "样式", "对象", "，", "我们", "在", "创建", "Worldmap", " ", "实例", "时以", "关键字", "实参", "的", "方式", "传递", "它", "（", "见", "❸", "）", "。", "更新", "后", "的", "地图", "如", "\n", "图", "16", "-", "11", "所示", "。", "\n", "图", "\n", "图", "16", "-", "11", "　", "按", "人口", "划分", "的", "三个", "国家", "编组", "了", "统一", "的", "颜色", "主题", "\n", "　", "按", "人口", "划分", "的", "三个", "国家", "编组", "了", "统一", "的", "颜色", "主题", "\n", "前面", "的", "样式", "设置", "让", "地图", "的", "颜色", "更", "一致", "，", "也", "更", "容易", "区分", "不同", "的", "编组", "。", "\n", "16.2", ".", "10", "　", "加亮", "颜色", "主题", "\n", "　", "加亮", "颜色", "主题", "\n", "Pygal", "通常", "默认", "使用", "较暗", "的", "颜色", "主题", "。", "为", "方便", "印刷", "，", "我", "使用", "LightColorizedStyle", " ", "加亮", "了", "地图", "的", "颜色", "。", "这个", "类", "修改", "整个", "图表", "的", "主题", "，", "包括", "背景色", "、", "标签", "以及", "各个", "国家", "的", "颜色", "。"], ["要", "使用", "这个", "样式", "，", "先导", "入", "它", "：", "\n", "from", " ", "pygal", ".", "style", " ", "import", " ", "LightColorizedStyle", "\n", "然后", "就", "可", "独立", "地", "使用", "LightColorizedStyle", " ", "了", "，", "例如", "：", "\n", "wm", "_", "style", " ", "=", " ", "LightColorizedStyle", "\n", "然而", "使用", "这个", "类时", "，", "你", "不能", "直接", "控制", "使用", "的", "颜色", "，", "Pygal", "将", "选择", "默认", "的", "基色", "。", "要", "设置", "颜色", "，", "可", "使用", "RotateStyle", " ", "，", "并", "将", "LightColorizedStyle", " ", "作为", "基本", "样式", "。", "为此", "，", "导", "\n", "入", "LightColorizedStyle", " ", "和", "RotateStyle", " ", "：", "\n", "from", " ", "pygal", ".", "style", " ", "import", " ", "LightColorizedStyle", ",", " ", "RotateStyle", "\n", "再", "使用", "RotateStyle", " ", "创建", "一种", "样式", "，", "并", "传入", "另", "一个", "实参", "base", "_", "style", " ", "：", "\n", "wm", "_", "style", " ", "=", " ", "RotateStyle", "(", "'", "#", "336699", "'", ",", " ", "base", "_", "style", "=", "LightColorizedStyle", ")", "\n", "这", "设置", "了", "较亮", "的", "主题", "，", "同时", "根据", "通过", "实参", "传递", "的", "颜色", "给", "各个", "国家", "着色", "。", "使用", "这种", "样式", "时", "，", "生成", "的", "图表", "与", "本书", "的", "屏幕", "截图", "更", "一致", "。"], ["尝试", "为", "不同", "的", "可视化", "选择", "合适", "的", "样式", "设置", "指令", "时", "，", "在", "import", " ", "语句", "中", "指定", "别名", "会", "有所", "帮助", "：", "\n", "from", " ", "pygal", ".", "style", " ", "import", " ", "LightColorizedStyle", " ", "as", " ", "LCS", ",", " ", "RotateStyle", " ", "as", " ", "RS"], ["这样", "，", "样式", "定义", "将", "更", "短", "：", "\n", "wm", "_", "style", " ", "=", " ", "RS", "(", "'", "#", "336699", "'", ",", " ", "base", "_", "style", "=", "LCS", ")", "\n", "通过", "使用", "几个", "样式", "设置", "指令", "，", "就", "能", "很", "好", "地", "控制", "图表", "和", "地图", "的", "外观", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "16", "-", "5", " ", "涵盖", "所有", "国家", "\n", "涵盖", "所有", "国家", " ", "：", "本", "节制", "作", "人口", "地图", "时", "，", "对于", "大约", "12", "个", "国家", "，", "程序", "不能", "自动", "确定", "其", "两个", "字母", "的", "国别", "码", "。", "请", "找出", "这些", "国家", "，", "在", "字典", "COUNTRIES", " ", "中", "找到", "它们", "的", "国别", "\n", "码", "；", "然后", "，", "对于", "每个", "这样", "的", "国家", "，", "都", "在", "get", "_", "country", "_", "code", "(", ")", " ", "中", "添加", "一个", "if", "-", "elif", " ", "代码", "块", "，", "以", "返回", "其", "国别", "码", "：", "\n", "if", " ", "country", "_", "name", " ", "=", "=", " ", "'", "Yemen", ",", " ", "Rep", ".", "'", "\n", " ", " ", " ", " ", "return", " ", "'", "ye", "'", "\n", "elif", " ", "--", "snip", "--", "\n", "将", "这些", "代码", "放在", "遍历", "COUNTRIES", " ", "的", "循环", "和", "语句", "return", " ", "None", " ", "之间", "。", "完成", "这样", "的", "修改", "后", "，", "你", "看到", "的", "地图", "将", "更", "完整", "。", "\n", "16", "-", "6", " ", "国内", "生产总值", "\n", "国内", "生产总值", " ", "：", "Open", " ", "Knowledge", " ", "Foundation", "提供", "了", "一个", "数据", "集", "，", "其中", "包含", "全球", "各国", "的", "国内", "生产总值", "（", "GDP", "）", "，", "可", "在", "http", ":", "/", "/", "data", ".", "okfn", ".", "org", "/", "data", "/", "core", "/", "gdp", "/", " ", "找到", "这个", "数据"], ["集", "。", "请", "下载", "这个", "数据", "集", "的", "JSON", "版本", "，", "并", "绘制", "一个", "图表", "，", "将", "全球", "各国", "最近", "一年", "的", "GDP", "呈现", "出来", "。", "\n", "16", "-", "7", " ", "选择", "你", "自己", "的", "数据", "\n", "选择", "你", "自己", "的", "数据", " ", "：", "世界银行", "（", "The", " ", "World", " ", "Bank", "）", "提供", "了", "很多", "数据", "集", "，", "其中", "包含", "有关", "全球", "各国", "的", "信息", "。", "请", "访问", "http", ":", "/", "/", "data", ".", "worldbank", ".", "org", "/", "indicator", "/", " ", "，", "并", "找到", "一个", "你", "感", "\n", "兴趣", "的", "数据", "集", "。", "单击", "该", "数据", "集", "，", "再", "单击", "链接", "Download", " ", "Data", "并", "选择", "CSV", "。", "你", "将", "收到", "三个", "CSV", "文件", "，", "其中", "两个", "包含", "字样", "Metadata", "，", "你", "应", "使用", "第三个", "CSV", "文件", "。", "编写", "一个程", "\n", "序", "，", "生成", "一个", "字典", "，", "它", "将", "两个", "字母", "的", "Pygal", "国别", "码", "作为", "键", "，", "并", "将", "你", "从", "这个", "文件", "中", "选择", "的", "数据", "作为", "值", "。", "使用", "Worldmap", " ", "制作", "一个", "地图", "，", "在", "其中", "呈现", "这些", "数据", "，", "并", "根据", "你", "的", "\n", "喜好", "设置", "这个", "地图", "的", "样式", "。", "\n", "16", "-", "8", " ", "测试", "模块", "\n", "测试", "模块", "country", "_", "codes", " ", "：", "我们", "编写", "模块", "country", "_", "codes", " ", "时", "，", "使用", "了", "print", " ", "语句", "来", "核实", "get", "_", "country", "_", "code", "(", ")", " ", "能否", "按", "预期", "那样", "工作", "。", "请", "利用", "你", "在", "第", "11", "\n", "章", "学到", "的", "知识", "，", "为", "这个", "函数", "编写", "合适", "的", "测试", "。", "\n", "16.3", "　", "小结", "\n", "　", "小结"], ["章", "学到", "的", "知识", "，", "为", "这个", "函数", "编写", "合适", "的", "测试", "。", "\n", "16.3", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "使用", "网上", "的", "数据", "集", "；", "如何", "处理", "CSV", "和", "JSON", "文件", "，", "以及", "如何", "提取", "你", "感兴趣", "的", "数据", "；", "如何", "使用", "matplotlib", "来", "处理", "以往", "的", "天气", "数据", "，", "包括", "如何", "使用", "模", "\n", "块", "datetime", " ", "，", "以及", "如何", "在", "同一个", "图表", "中", "绘制", "多个", "数据", "系列", "；", "如何", "使用", "Pygal", "绘制", "呈现", "各国", "数据", "的", "世界地图", "，", "以及", "如何", "设置", "Pygal", "地图", "和", "图表", "的", "样式", "。", "\n", "有", "了", "使用", "CSV", "和", "JSON", "文件", "的", "经验", "后", "，", "你", "将", "能够", "处理", "几乎", "任何", "要", "分析", "的", "数据", "。", "大多数", "在线", "数据", "集都", "可以", "以", "这", "两种", "格式", "中", "的", "一种", "或", "两种", "下载", "。", "学习", "使用", "这", "两种", "格式", "为", "学习", "使用", "其他", "格", "\n", "式", "的", "数据", "做好", "了", "准备", "。", "\n", "在", "下", "一章", "，", "你", "将", "编写", "自动", "从", "网上", "采集", "数据", "并", "对", "其", "进行", "可视化", "的", "程序", "。", "如果", "你", "只是", "将", "编程", "作为", "业余爱好", "，", "学会", "这些", "技能", "可以", "增加", "乐趣", "；", "如果", "你", "有志于", "成为", "专业", "程序员", "，", "就", "必须", "掌握", "\n", "这些", "技能", "。", "\n", "第", "\n", "第", " ", "17", " ", "章", "　", "使用", "\n", "章", "　", "使用", "API", "\n", "在", "本章", "中", "，", "你", "将", "学习", "如何", "编写", "一个", "独立", "的", "程序", "，", "并", "对", "其", "获取", "的", "数据", "进行", "可视化", "。", "这个", "程序", "将", "使用", "Web", "应用", "编程", "接口", "\n", "应用", "编程", "接口", " ", "（", "API", "）", "自动", "请求", "网站", "的", "特定", "信息", "而", "不是", "整个", "网"], ["应用", "编程", "接口", " ", "（", "API", "）", "自动", "请求", "网站", "的", "特定", "信息", "而", "不是", "整个", "网", "\n", "页", "，", "再", "对", "这些", "信息", "进行", "可视化", "。", "由于", "这样", "编写", "的", "程序", "始终", "使用", "最新", "的", "数据", "来", "生成", "可视化", "，", "因此", "即便", "数据", "瞬息万变", "，", "它", "呈现", "的", "信息", "也", "都", "是", "最新", "的", "。", "\n", "17.1", "　", "使用", "\n", "　", "使用", "Web", " ", "API", "\n", "Web", " ", "API", "是", "网站", "的", "一部分", "，", "用于", "与", "使用", "非常", "具体", "的", "URL", "请求", "特定", "信息", "的", "程序", "交互", "。", "这种", "请求", "称为", "API", "调用", "。", "请求", "的", "数据", "将", "以", "易于", "处理", "的", "格式", "（", "如", "JSON", "或", "CSV", "）", "返回", "。", "依赖于", "外部", "数"], ["据源", "的", "大多数", "应用程序", "都", "依赖于", "API", "调用", "，", "如", "集成", "社交", "媒体", "网站", "的", "应用程序", "。", "\n", "17.1", ".", "1", "　", "\n", "　", "Git", "和", "\n", "和", "GitHub", "\n", "本章", "的", "可视化", "将", "基于", "来自", "GitHub", "的", "信息", "，", "这是", "一个", "让", "程序员", "能够", "协作", "开发", "项目", "的", "网站", "。", "我们", "将", "使用", "GitHub", "的", "API", "来", "请求", "有关", "该", "网站", "中", "Python", "项目", "的", "信息", "，", "然后", "使用", "Pygal", "生成", "交互式", "\n", "可视化", "，", "以", "呈现", "这些", "项目", "的", "受欢迎", "程度", "。", "\n", "GitHub", "（", "https", ":", "/", "/", "github", ".", "com", "/", " ", "）", "的", "名字", "源自", "Git", "，", "Git", "是", "一个", "分布式", "版本", "控制系统", "，", "让", "程序员", "团队", "能够", "协作", "开发", "项目", "。", "Git", "帮助", "大家", "管理", "为", "项目", "所", "做", "的", "工作", "，", "避免", "一个", "人", "所", "做", "的", "修改", "影响", "其", "\n", "他人", "所", "做", "的", "修改", "。", "你", "在", "项目", "中", "实现", "新", "功能", "时", "，", "Git", "将", "跟踪", "你", "对", "每个", "文件", "所", "做", "的", "修改", "。", "确定", "代码", "可行", "后", "，", "你", "提交", "所", "做", "的", "修改", "，", "而", "Git", "将", "记录", "项目", "最新", "的", "状态", "。", "如果", "你", "犯了错", "，", "想", "撤销", "所", "\n", "做", "的", "修改", "，", "可", "轻松", "地", "返回", "以前", "的", "任何", "可行", "状态", "（", "要", "更", "深入", "地", "了解", "如何", "使用", "Git", "进行", "版本控制", "，", "请参阅", "附录", "D", "）", "。", "GitHub", "上", "的", "项目", "都", "存储", "在", "仓库", "中", "，", "后者", "包含", "与", "项目", "相关联", "的", "一切", "：", "代", "\n", "码", "、", "项目", "参与者", "的", "信息", "、", "问题", "或", "bug", "报告", "等", "。"], ["码", "、", "项目", "参与者", "的", "信息", "、", "问题", "或", "bug", "报告", "等", "。", "\n", "对于", "喜欢", "的", "项目", "，", "GitHub", "用户", "可", "给", "它", "加星", "（", "star", "）", "以", "表示", "支持", "，", "用户", "还", "可", "跟踪", "他", "可能", "想", "使用", "的", "项目", "。", "在", "本章", "中", "，", "我们", "将", "编写", "一个", "程序", "，", "它", "自动", "下载", "GitHub", "上", "星级", "最高", "的", "Python", "项目", "的", "\n", "信息", "，", "并", "对", "这些", "信息", "进行", "可视化", "。", "\n", "17.1", ".", "2", "　", "使用", "\n", "　", "使用", "API", "调用", "请求", "数据", "\n", "调用", "请求", "数据", "\n", "GitHub", "的", "API", "让", "你", "能够", "通过", "API", "调用", "来", "请求", "各种", "信息", "。", "要", "知道", "API", "调用", "是", "什么样", "的", "，", "请", "在", "浏览器", "的", "地址栏", "中", "输入", "如下", "地址", "并", "按", "回车键", "：", "\n", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", "search", "/", "repositories", "?", "q", "=", "language", ":", "python", "&", "sort", "=", "stars", "\n", "这个", "调用", "返回", "GitHub", "当前", "托管", "了", "多少", "个", "Python", "项目", "，", "还有", "有关", "最", "受欢迎", "的", "Python", "仓库", "的", "信息", "。", "下面", "来", "仔细", "研究", "这个", "调用", "。", "第一", "部分", "（", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", " ", "）", "将", "请求", "发送", "\n", "到", "GitHub", "网站", "中", "响应", "API", "调用", "的", "部分", "；", "接下来", "的", "一部分", "（", "search", "/", "repositories", " ", "）", "让", "API", "搜索", "GitHub", "上", "的", "所有", "仓库", "。"], ["repositories", " ", "后面", "的", "问号", "指出", "我们", "要", "传递", "一个", "实参", "。", "q", " ", "表示", "查询", "，", "而", "等", "号", "让", "我们", "能够", "开始", "指定", "查询", "（", "q", "=", " ", "）", "。", "通过", "使用", "language", ":", "python", " ", "，", "我们", "指出", "只想", "获取", "主要", "语言", "为", "\n", "Python", "的", "仓库", "的", "信息", "。", "最后", "一部分", "（", "&", "sort", "=", "stars", " ", "）", "指定", "将", "项目", "按", "其", "获得", "的", "星级", "进行", "排序", "。", "\n", "下面", "显示", "了", "响应", "的", "前", "几行", "。", "从", "响应", "可知", "，", "该", "URL", "并", "不", "适合", "人工", "输入", "。", "\n", "{", "\n", " ", " ", "\"", "total", "_", "count", "\"", ":", " ", "713062", ",", "\n", " ", " ", "\"", "incomplete", "_", "results", "\"", ":", " ", "false", ",", "\n", " ", " ", "\"", "items", "\"", ":", " ", "[", "\n", " ", " ", " ", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "\"", "id", "\"", ":", " ", "3544424", ",", "\n", " ", " ", " ", " ", " ", " ", "\"", "name", "\"", ":", " ", "\"", "httpie", "\"", ",", "\n", " ", " ", " ", " ", " ", " ", "\"", "full", "_", "name", "\"", ":", " ", "\"", "jkbrzt", "/", "httpie", "\"", ",", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "从", "第二行", "输出", "可知", "，", "编写", "本书", "时", "，", "GitHub", "总共", "有", "713", " ", "062", "个", "Python", "项目", "。", "\"", "incomplete", "_", "results", "\"", " ", "的", "值", "为", "false", " ", "，", "据此", "我们", "知道", "请求", "是", "成功", "的", "（", "它", "并非", "不", "完整", "的", "）", "。", "倘若", "GitHub"], ["无法", "全面", "处理", "该", "API", "，", "它", "返回", "的", "这个", "值", "将", "为", "true", " ", "。", "接下来", "的", "列表", "中", "显示", "了", "返回", "的", "\"", "items", "\"", " ", "，", "其中", "包含", "GitHub", "上", "最", "受欢迎", "的", "Python", "项目", "的", "详细信息", "。", "\n", "17.1", ".", "3", "　", "安装", "\n", "　", "安装", "requests", "\n", "requests", "包让", "Python", "程序", "能够", "轻松", "地向", "网站", "请求", "信", "，", "息", "以及", "检查", "返回", "的", "响应", "。", "要", "安装", "requests", "，", "请", "执行", "类似", "于", "下面", "的", "命令", "：", "\n", "$", " ", "pip", " ", "install", " ", "--", "user", " ", "requests", "\n", "如果", "你", "还", "没有", "使用", "过", "pip", "，", "请参阅", "12.2", ".", "1", "节", "（", "根据", "系统", "的", "设置", "，", "你", "可能", "需要", "使用", "这个", "命令", "的", "稍微", "不同", "的", "版本", "）", "。", "\n", "17.1", ".", "4", "　", "处理", "\n", "　", "处理", "API", "响应", "\n", "响应", "\n", "下面", "来", "编写", "一个", "程序", "，", "它", "执行", "API", "调用", "并", "处理结果", "，", "找出", "GitHub", "上", "星级", "最高", "的", "Python", "项目", "：", "\n", "python", "_", "repos", ".", "py", "\n", "❶", " ", "import", " ", "requests", "\n", " ", " ", "#", " ", "执行", "API", "调用", "并", "存储", "响应", "\n", "❷", " ", "url", " ", "=", " ", "'", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", "search", "/", "repositories", "?", "q", "=", "language", ":", "python", "&", "sort", "=", "stars", "'", "\n", "❸", " ", "r", " ", "=", " ", "requests", ".", "get", "(", "url", ")"], ["❸", " ", "r", " ", "=", " ", "requests", ".", "get", "(", "url", ")", "\n", "❹", " ", "print", "(", "\"", "Status", " ", "code", ":", "\"", ",", " ", "r", ".", "status", "_", "code", ")", "\n", " ", " ", "#", " ", "将", "API", "响应", "存储", "在", "一个", "变量", "中", "\n", "❺", " ", "response", "_", "dict", " ", "=", " ", "r", ".", "json", "(", ")", "\n", " ", " ", "#", " ", "处理结果", "\n", " ", " ", "print", "(", "response", "_", "dict", ".", "keys", "(", ")", ")", "\n", "在", "❶", "处", "，", "我们", "导入", "了", "模块", "requests", " ", "。", "在", "❷", "处", "，", "我们", "存储", "API", "调用", "的", "URL", "，", "然后", "使用", "requests", " ", "来", "执行", "调用", "（", "见", "❸", "）", "。", "我们", "调用", "get", "(", ")", " ", "并", "将", "URL", "传递", "给", "它", "，", "再", "将", "响应", "对象", "存储", "在", "\n", "变量", "r", " ", "中", "。", "响应", "对象", "包含", "一个", "名为", "status", "_", "code", " ", "的", "属性", "，", "它", "让", "我们", "知道", "请求", "是否", "成功", "了", "（", "状态", "码", "200", "表示", "请求", "成功", "）", "。", "在", "❹", "处", "，", "我们", "打印", "status", "_", "code", " ", "，", "核实", "调用", "是否", "成功", "\n", "了", "。", "\n", "这个", "API", "返回", "JSON", "格式", "的", "信息", "，", "因此", "我们", "使用", "方法", "json", "(", ")", " ", "将", "这些", "信息", "转换", "为", "一个", "Python", "字典", "（", "见", "❺", "）", "。", "我们", "将", "转换", "得到", "的", "字典", "存储", "在", "response", "_", "dict", " ", "中", "。", "\n", "最后", "，", "我们", "打印", "response", "_", "dict", " ", "中", "的", "键", "。", "输出", "如下", "：", "\n", "Status", " ", "code", ":", " ", "200"], ["最后", "，", "我们", "打印", "response", "_", "dict", " ", "中", "的", "键", "。", "输出", "如下", "：", "\n", "Status", " ", "code", ":", " ", "200", "\n", "dict", "_", "keys", "(", "[", "'", "items", "'", ",", " ", "'", "total", "_", "count", "'", ",", " ", "'", "incomplete", "_", "results", "'", "]", ")", "\n", "状态", "码为", "200", "，", "因此", "我们", "知道", "请求", "成功", "了", "。", "响应", "字典", "只", "包含", "三个", "键", "：", "'", "items", "'", " ", "、", "'", "total", "_", "count", "'", " ", "和", "'", "incomplete", "_", "results", "'", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "像", "这样", "简单", "的", "调用", "应该", "会", "返回", "完整", "的", "结果", "集", "，", "因此", "完全", "可以", "忽略", "与", "'", "incomplete", "_", "results", "'", " ", "相关联", "的", "值", "。", "但", "执行", "更", "复杂", "的", "API", "调用", "时", "，", "程序", "应", "检查", "这个", "\n", "值", "。"], ["17.1", ".", "5", "　", "处理", "响应", "字典", "\n", "　", "处理", "响应", "字典", "\n", "将", "API", "调用", "返回", "的", "信息", "存储", "到", "字典", "中后", "，", "就", "可以", "处理", "这个", "字典", "中", "的", "数据", "了", "。", "下面", "来", "生成", "一些", "概述", "这些", "信息", "的", "输出", "。", "这是", "一种", "不错", "的", "方式", "，", "可", "确认", "收到", "了", "期望", "的", "信息", "，", "进而", "可以", "开始", "\n", "研究", "感兴趣", "的", "信息", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "import", " ", "requests", "\n", " ", " ", "#", " ", "执行", "API", "调用", "并", "存储", "响应", "\n", " ", " ", "url", " ", "=", " ", "'", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", "search", "/", "repositories", "?", "q", "=", "language", ":", "python", "&", "sort", "=", "stars", "'", "\n", " ", " ", "r", " ", "=", " ", "requests", ".", "get", "(", "url", ")", "\n", " ", " ", "print", "(", "\"", "Status", " ", "code", ":", "\"", ",", " ", "r", ".", "status", "_", "code", ")", "\n", " ", " ", "#", " ", "将", "API", "响应", "存储", "在", "一个", "变量", "中", "\n", " ", " ", "response", "_", "dict", " ", "=", " ", "r", ".", "json", "(", ")", "\n", "❶", " ", "print", "(", "\"", "Total", " ", "repositories", ":", "\"", ",", " ", "response", "_", "dict", "[", "'", "total", "_", "count", "'", "]", ")", "\n", " ", " ", "#", " ", "探索", "有关", "仓库", "的", "信息", "\n", "❷", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]"], ["❷", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]", "\n", " ", " ", "print", "(", "\"", "Repositories", " ", "returned", ":", "\"", ",", " ", "len", "(", "repo", "_", "dicts", ")", ")", "\n", " ", " ", "#", " ", "研究", "第一个", "仓库", "\n", "❸", " ", "repo", "_", "dict", " ", "=", " ", "repo", "_", "dicts", "[", "0", "]", "\n", "❹", " ", "print", "(", "\"", "\\", "nKeys", ":", "\"", ",", " ", "len", "(", "repo", "_", "dict", ")", ")", "\n", "❺", " ", "for", " ", "key", " ", "in", " ", "sorted", "(", "repo", "_", "dict", ".", "keys", "(", ")", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "key", ")", "\n", "在", "❶", "处", "，", "我们", "打印", "了", "与", "'", "total", "_", "count", "'", " ", "相关联", "的", "值", "，", "它", "指出", "了", "GitHub", "总共", "包含", "多少", "个", "Python", "仓库", "。", "\n", "与", "'", "items", "'", " ", "相关联", "的", "值", "是", "一个", "列表", "，", "其中", "包含", "很多", "字典", "，", "而", "每个", "字典", "都", "包含", "有关", "一个", "Python", "仓库", "的", "信息", "。", "在", "❷", "处", "，", "我们", "将", "这个", "字典", "列表", "存储", "在", "repo", "_", "dicts", " ", "中", "。", "接下来", "，", "我们", "\n", "打印", "repo", "_", "dicts", " ", "的", "长度", "，", "以", "获悉", "我们", "获得", "了", "多少", "个", "仓库", "的", "信息", "。", "\n", "为", "更", "深入", "地", "了解", "返回", "的", "有关", "每个", "仓库", "的", "信息", "，", "我们", "提取", "了", "repo", "_", "dicts", " ", "中", "的", "第一个", "字典", "，", "并", "将", "其", "存储", "在", "repo", "_", "dict", " ", "中", "（", "见", "❸", "）", "。", "接下来", "，", "我们", "打印", "这个", "字典", "包含", "的", "键数", "，", "看看"], ["其中", "有", "多少", "信息", "（", "见", "❹", "）", "。", "在", "❺", "处", "，", "我们", "打印", "这个", "字典", "的", "所有", "键", "，", "看看", "其中", "包含", "哪些", "信息", "。", "\n", "输出", "让", "我们", "对", "实际", "包含", "的", "数据", "有", "了", "更", "清晰", "的", "认识", "：", "\n", " ", " ", "Status", " ", "code", ":", " ", "200", "\n", " ", " ", "Total", " ", "repositories", ":", " ", "713062", "\n", " ", " ", "Repositories", " ", "returned", ":", " ", "30", "\n", "❶", " ", "Keys", ":", " ", "68", "\n", " ", " ", "archive", "_", "url", "\n", " ", " ", "assignees", "_", "url", "\n", " ", " ", "blobs", "_", "url", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "url", "\n", " ", " ", "watchers", "\n", " ", " ", "watchers", "_", "count", "\n", "GitHub", "的", "API", "返回", "有关", "每个", "仓库", "的", "大量", "信息", "：", "repo", "_", "dict", " ", "包含", "68", "个键", "（", "见", "❶", "）", "。", "通过", "仔细", "查看", "这些", "键", "，", "可", "大致", "知道", "可", "提取", "有关", "项目", "的", "哪些", "信息", "（", "要", "准确", "地", "获悉", "API", "将", "返回", "哪些", "信", "\n", "息", "，", "要么", "阅读", "文档", "，", "要么", "像", "此处", "这样", "使用", "代码", "来", "查看", "这些", "信息", "）", "。", "\n", "下面", "来", "提取", "repo", "_", "dict", " ", "中", "与", "一些", "键", "相关联", "的", "值", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "研究", "有关", "仓库", "的", "信息", "\n", " ", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]"], ["repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]", "\n", " ", " ", "print", "(", "\"", "Repositories", " ", "returned", ":", "\"", ",", " ", "len", "(", "repo", "_", "dicts", ")", ")", "\n", " ", " ", "#", " ", "研究", "第一个", "仓库", "\n", " ", " ", "repo", "_", "dict", " ", "=", " ", "repo", "_", "dicts", "[", "0", "]", "\n", " ", " ", "print", "(", "\"", "\\", "nSelected", " ", "information", " ", "about", " ", "first", " ", "repository", ":", "\"", ")", "\n", "❶", " ", "print", "(", "'", "Name", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "name", "'", "]", ")", "\n", "❷", " ", "print", "(", "'", "Owner", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "owner", "'", "]", "[", "'", "login", "'", "]", ")", "\n", "❸", " ", "print", "(", "'", "Stars", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ")", "\n", " ", " ", "print", "(", "'", "Repository", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "html", "_", "url", "'", "]", ")", "\n", "❹", " ", "print", "(", "'", "Created", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "created", "_", "at", "'", "]", ")", "\n", "❺", " ", "print", "(", "'", "Updated", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "updated", "_", "at", "'", "]", ")", "\n", " ", " ", "print", "(", "'", "Description", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "description", "'", "]", ")"], ["print", "(", "'", "Description", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "description", "'", "]", ")", "\n", "在", "这里", "，", "我们", "打印", "了", "表示", "第一个", "仓库", "的", "字典", "中", "与", "很多", "键", "相关联", "的", "值", "。", "在", "❶", "处", "，", "我们", "打印", "了", "项目", "的", "名称", "。", "项目", "所有者", "是", "用", "一个", "字典", "表示", "的", "，", "因此", "在", "❷", "处", "，", "我们", "使用", "键", "owner", " ", "来", "访问", "\n", "表示", "所有者", "的", "字典", "，", "再", "使用", "键", "key", " ", "来", "获取", "所有者", "的", "登录名", "。", "在", "❸", "处", "，", "我们", "打印", "项目", "获得", "了", "多少", "个星", "的", "评级", "，", "以及", "项目", "在", "GitHub", "仓库", "的", "URL", "。", "接下来", "，", "我们", "显示", "项目", "的", "创建", "时间", "\n", "（", "见", "❹", "）", "和", "最后", "一次", "更新", "的", "时间", "（", "见", "❺", "）", "。", "最后", "，", "我们", "打印", "仓库", "的", "描述", "。", "输出", "类似", "于", "下面", "这样", "：", "\n", "Status", " ", "code", ":", " ", "200", "\n", "Total", " ", "repositories", ":", " ", "713065", "\n", "Repositories", " ", "returned", ":", " ", "30", "\n", "Selected", " ", "information", " ", "about", " ", "first", " ", "repository", ":", "\n", "Name", ":", " ", "httpie", "\n", "Owner", ":", " ", "jkbrzt", "\n", "Stars", ":", " ", "16101", "\n", "Repository", ":", " ", "https", ":", "/", "/", "github", ".", "com", "/", "jkbrzt", "/", "httpie", "\n", "Created", ":", " ", "2012", "-", "02", "-", "25T12", ":", "39", ":", "13Z"], ["Created", ":", " ", "2012", "-", "02", "-", "25T12", ":", "39", ":", "13Z", "\n", "Updated", ":", " ", "2015", "-", "07", "-", "13T14", ":", "56", ":", "41Z", "\n", "Description", ":", " ", "CLI", " ", "HTTP", " ", "client", ";", " ", "user", "-", "friendly", " ", "cURL", " ", "replacement", " ", "featuring", " ", "intuitive", " ", "UI", ",", " ", "JSON", " ", "support", ",", " ", "syntax", " ", "highlighting", ",", " ", "wget", "-", "like", " ", "downloads", ",", " ", "extensions", ",", " ", "etc", ".", "\n", "从", "上述", "输出", "可知", "，", "编写", "本书", "时", "，", "GitHub", "上", "星级", "最高", "的", "Python", "项目", "为", "HTTPie", "，", "其", "所有者", "为", "用户", "jkbrzt", "，", "有", "16", " ", "000", "多个", "GitHub", "用户", "给", "这个", "项目", "加星", "。", "我们", "可以", "看到", "这个", "项目", "的", "仓库", "的", "\n", "URL", "，", "其", "创建", "时间", "为", "2012", "年", "2", "月", "，", "且", "最近", "更新", "了", "。", "最后", "，", "描述", "指出", "HTTPie", "用于", "帮助", "从", "终端", "执行", "HTTP", "调用", "（", "CLI", "是", "命令行", "界面", "\n", "命令行", "界面", " ", "的", "缩写", "）", "。", "\n", "17.1", ".", "6", "　", "概述", "最", "受欢迎", "的", "仓库", "\n", "　", "概述", "最", "受欢迎", "的", "仓库"], ["对", "这些", "数据", "进行", "可视化", "时", "，", "我们", "需要", "涵盖", "多个", "仓库", "。", "下面", "就", "来", "编写", "一个", "循环", "，", "打印", "API", "调用", "返回", "的", "每个", "仓库", "的", "特定", "信息", "，", "以便", "能够", "在", "可视化", "中", "包含", "所有", "这些", "信息", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "研究", "有关", "仓库", "的", "信息", "\n", " ", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]", "\n", " ", " ", "print", "(", "\"", "Repositories", " ", "returned", ":", "\"", ",", " ", "len", "(", "repo", "_", "dicts", ")", ")", "\n", "❶", " ", "print", "(", "\"", "\\", "nSelected", " ", "information", " ", "about", " ", "each", " ", "repository", ":", "\"", ")", "\n", "❷", " ", "for", " ", "repo", "_", "dict", " ", "in", " ", "repo", "_", "dicts", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "'", "\\", "nName", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "name", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "'", "Owner", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "owner", "'", "]", "[", "'", "login", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "'", "Stars", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "'", "Repository", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "html", "_", "url", "'", "]", ")"], ["print", "(", "'", "Repository", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "html", "_", "url", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "'", "Description", ":", "'", ",", " ", "repo", "_", "dict", "[", "'", "description", "'", "]", ")", "\n", "在", "❶", "处", "，", "我们", "打印", "了", "一条", "说明性", "消息", "。", "在", "❷", "处", "，", "我们", "遍历", "repo", "_", "dicts", " ", "中", "的", "所有", "字典", "。", "在", "这个", "循环", "中", "，", "我们", "打印", "每个", "项目", "的", "名称", "、", "所有者", "、", "星级", "、", "在", "GitHub", "上", "的", "URL", "以及", "描述", "：", "\n", "Status", " ", "code", ":", " ", "200", "\n", "Total", " ", "repositories", ":", " ", "713067", "\n", "Repositories", " ", "returned", ":", " ", "30", "\n", "Selected", " ", "information", " ", "about", " ", "each", " ", "repository", ":", "\n", "Name", ":", " ", "httpie", "\n", "Owner", ":", " ", "jkbrzt", "\n", "Stars", ":", " ", "16101", "\n", "Repository", ":", " ", "https", ":", "/", "/", "github", ".", "com", "/", "jkbrzt", "/", "httpie"], ["Repository", ":", " ", "https", ":", "/", "/", "github", ".", "com", "/", "jkbrzt", "/", "httpie", "\n", "Description", ":", " ", "CLI", " ", "HTTP", " ", "client", ";", " ", "user", "-", "friendly", " ", "cURL", " ", "replacement", " ", "featuring", " ", "intuitive", " ", "UI", ",", " ", "JSON", " ", "support", ",", " ", "syntax", " ", "highlighting", ",", " ", "wget", "-", "like", " ", "downloads", ",", " ", "extensions", ",", " ", "etc", ".", "\n", "Name", ":", " ", "django", "\n", "Owner", ":", " ", "django", "\n", "Stars", ":", " ", "15028", "\n", "Repository", ":", " ", "https", ":", "/", "/", "github", ".", "com", "/", "django", "/", "django", "\n", "Description", ":", " ", "The", " ", "Web", " ", "framework", " ", "for", " ", "perfectionists", " ", "with", " ", "deadlines", ".", "\n", "--", "snip", "--", "\n", "Name", ":", " ", "powerline", "\n", "Owner", ":", " ", "powerline", "\n", "Stars", ":", " ", "4315", "\n", "Repository", ":", " ", "https", ":", "/", "/", "github", ".", "com", "/", "powerline", "/", "powerline"], ["Description", ":", " ", "Powerline", " ", "is", " ", "a", " ", "statusline", " ", "plugin", " ", "for", " ", "vim", ",", " ", "and", " ", "provides", " ", "statuslines", " ", "and", " ", "prompts", " ", "for", " ", "several", " ", "other", " ", "applications", ",", " ", "including", " ", "zsh", ",", " ", "bash", ",", " ", "tmux", ",", " ", "IPython", ",", " ", "Awesome", " ", "and", " ", "Qtile", ".", "\n", "上述", "输出", "中有", "一些", "有趣", "的", "项目", "，", "可能", "值得", "再", "看", "一眼", "。", "但", "不要", "在", "这", "上面", "花费", "太", "多", "时间", "，", "因为", "我们", "即将", "创建", "的", "可视化", "可", "让", "你", "更", "容易", "地", "看清", "结果", "。", "\n", "17.1", ".", "7", "　", "监视", "\n", "　", "监视", "API", "的", "速率", "限制", "\n", "的", "速率", "限制", "\n", "大多数", "API", "都", "存在", "速率", "限制", "，", "即", "你", "在", "特定", "时间", "内", "可", "执行", "的", "请求", "数", "存在", "限制", "。", "要", "获悉", "你", "是否", "接近", "了", "GitHub", "的", "限制", "，", "请", "在", "浏览器", "中", "输入", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", "rate", "_", "limit", " ", "，", "你", "将", "看到", "类似", "于", "下", "\n", "面", "的", "响应", "：", "\n", " ", " ", "{", "\n", " ", " ", " ", " ", "\"", "resources", "\"", ":", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "\"", "core", "\"", ":", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "limit", "\"", ":", " ", "60", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "remaining", "\"", ":", " ", "58", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "reset", "\"", ":", " ", "1426082320", "\n", " ", " ", " ", " ", " ", " ", "}", ","], ["\"", "reset", "\"", ":", " ", "1426082320", "\n", " ", " ", " ", " ", " ", " ", "}", ",", "\n", "❶", " ", " ", " ", " ", " ", "\"", "search", "\"", ":", " ", "{", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", "\"", "limit", "\"", ":", " ", "10", ",", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", "\"", "remaining", "\"", ":", " ", "8", ",", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", "\"", "reset", "\"", ":", " ", "1426078803", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", " ", " ", "}", ",", "\n", " ", " ", " ", " ", "\"", "rate", "\"", ":", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "\"", "limit", "\"", ":", " ", "60", ",", "\n", " ", " ", " ", " ", " ", " ", "\"", "remaining", "\"", ":", " ", "58", ",", "\n", " ", " ", " ", " ", " ", " ", "\"", "reset", "\"", ":", " ", "1426082320", "\n", " ", " ", " ", " ", "}", "\n", " ", " ", "}", "\n", "我们", "关心", "的", "信息", "是", "搜索", "API", "的", "速率", "限制", "（", "见", "❶", "）", "。", "从", "❷", "处", "可知", "，", "极限", "为", "每分钟", "10", "个", "请求", "，", "而", "在", "当前", "这", "一分钟", "内", "，", "我们", "还", "可", "执行", "8", "个", "请求", "（", "见", "❸", "）", "。", "reset", " ", "值指", "的", "是", "配额", "将", "重置", "的", "\n", "Unix", "时间", "或", "新纪元", "时间", "\n", "新纪元", "时间", " ", "（", "1970", "年", "1", "月", "1", "日", "午夜", "后", "多少", "秒", "）", "（", "见", "❹", "）", "。", "用", "完", "配额", "后", "，", "你", "将", "收到", "一条", "简单", "的", "响应", "，", "由此", "知道", "已", "到达", "API", "极限", "。", "到达", "极限", "后", "，", "你", "必须", "等待", "配额", "重置", "。", "\n", "注意", "\n", "注意", " ", "　", "很多", "API", "都", "要求", "你", "注册", "获得", "API", "密钥", "后", "才能", "执行", "API", "调用", "。", "编写", "本书", "时", "，", "GitHub", "没有", "这样", "的", "要求", "，", "但", "获得", "API", "密钥", "后", "，", "配额", "将", "高得", "多", "。", "\n", "17.2", "　", "使用", "\n", "　", "使用", "Pygal", "可视化", "仓库", "\n", "可视化", "仓库"], ["17.2", "　", "使用", "\n", "　", "使用", "Pygal", "可视化", "仓库", "\n", "可视化", "仓库", "\n", "有", "了", "一些", "有趣", "的", "数据", "后", "，", "我们", "来", "进行", "可视化", "，", "呈现", "GitHub", "上", "Python", "项目", "的", "受欢迎", "程度", "。", "我们", "将", "创建", "一个", "交互式", "条形图", "：", "条形", "的", "高度", "表示", "项目", "获得", "了", "多少", "颗星", "。", "单击", "条形", "将", "带", "你", "进入", "\n", "项目", "在", "GitHub", "上", "的", "主页", "。", "下面", "是", "首次", "尝试", "这样", "做", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "import", " ", "requests", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "from", " ", "pygal", ".", "style", " ", "import", " ", "LightColorizedStyle", " ", "as", " ", "LCS", ",", " ", "LightenStyle", " ", "as", " ", "LS", "\n", " ", " ", "#", " ", "执行", "API", "调用", "并", "存储", "响应", "\n", " ", " ", "URL", " ", "=", " ", "'", "https", ":", "/", "/", "api", ".", "github", ".", "com", "/", "search", "/", "repositories", "?", "q", "=", "language", ":", "python", "&", "sort", "=", "star", "'", "\n", " ", " ", "r", " ", "=", " ", "requests", ".", "get", "(", "URL", ")", "\n", " ", " ", "print", "(", "\"", "Status", " ", "code", ":", "\"", ",", " ", "r", ".", "status", "_", "code", ")", "\n", " ", " ", "#", " ", "将", "API", "响应", "存储", "在", "一个", "变量", "中", "\n", " ", " ", "response", "_", "dict", " ", "=", " ", "r", ".", "json", "(", ")"], ["#", " ", "将", "API", "响应", "存储", "在", "一个", "变量", "中", "\n", " ", " ", "response", "_", "dict", " ", "=", " ", "r", ".", "json", "(", ")", "\n", " ", " ", "print", "(", "\"", "Total", " ", "repositories", ":", "\"", ",", " ", "response", "_", "dict", "[", "'", "total", "_", "count", "'", "]", ")", "\n", " ", " ", "#", " ", "研究", "有关", "仓库", "的", "信息", "\n", " ", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]", "\n", "❶", " ", "names", ",", " ", "stars", " ", "=", " ", "[", "]", ",", " ", "[", "]", "\n", " ", " ", "for", " ", "repo", "_", "dict", " ", "in", " ", "repo", "_", "dicts", ":"], ["❷", " ", " ", " ", " ", " ", "names", ".", "append", "(", "repo", "_", "dict", "[", "'", "name", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "stars", ".", "append", "(", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ")", "\n", " ", " ", "#", " ", "可视化", "\n", "❸", " ", "my", "_", "style", " ", "=", " ", "LS", "(", "'", "#", "333366", "'", ",", " ", "base", "_", "style", "=", "LCS", ")", "\n", "❹", " ", "chart", " ", "=", " ", "pygal", ".", "Bar", "(", "style", "=", "my", "_", "style", ",", " ", "x", "_", "label", "_", "rotation", "=", "45", ",", " ", "show", "_", "legend", "=", "False", ")", "\n", " ", " ", "chart", ".", "title", " ", "=", " ", "'", "Most", "-", "Starred", " ", "Python", " ", "Projects", " ", "on", " ", "GitHub", "'", "\n", " ", " ", "chart", ".", "x", "_", "labels", " ", "=", " ", "names", "\n", "❺", " ", "chart", ".", "add", "(", "'", "'", ",", " ", "stars", ")", "\n", " ", " ", "chart", ".", "render", "_", "to", "_", "file", "(", "'", "python", "_", "repos", ".", "svg", "'", ")", "\n", "我们", "首先", "导入", "了", "pygal", " ", "以及", "要", "应用", "于", "图表", "的", "Pygal", "样式", "。", "接下来", "，", "打印", "API", "调用", "响应", "的", "状态", "以及", "找到", "的", "仓库", "总数", "，", "以便", "获悉", "API", "调用", "是否", "出现", "了", "问题", "。", "我们", "不再", "打印", "返回", "的", "有关", "项目", "\n", "的", "信息", "，", "因为", "将", "通过", "可视化", "来", "呈现", "这些", "信息", "。"], ["的", "信息", "，", "因为", "将", "通过", "可视化", "来", "呈现", "这些", "信息", "。", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "两个", "空", "列表", "，", "用于", "存储", "将", "包含", "在", "图表", "中", "的", "信息", "。", "我们", "需要", "每个", "项目", "的", "名称", "，", "用于", "给", "条形", "加上", "标签", "，", "我们", "还", "需要", "知道", "项目", "获得", "了", "多少", "个星", "，", "用于", "确定", "条形", "的", "高", "\n", "度", "。", "在", "循环", "中", "，", "我们", "将", "项目", "的", "名称", "和", "获得", "的", "星数", "附加", "到", "这些", "列表", "的", "末尾", "❷", "。", "\n", "接下来", "，", "我们", "使用", "LightenStyle", " ", "类", "（", "别名", "LS", " ", "）", "定义", "了", "一种", "样式", "，", "并", "将", "其", "基色", "设置", "为", "深蓝色", "（", "见", "❸", "）", "。", "我们", "还", "传递", "了", "实参", "base", "_", "style", " ", "，", "以", "使用", "LightColorizedStyle", "\n", "类", "（", "别名", "LCS", " ", "）", "。", "然后", "，", "我们", "使用", "Bar", "(", ")", " ", "创建", "一个", "简单", "的", "条形图", "，", "并", "向", "它", "传递", "了", "my", "_", "style", " ", "（", "见", "❹", "）", "。", "我们", "还", "传递", "了", "另外", "两个", "样式", "实参", "：", "让", "标签", "绕", "x", " ", "轴", "旋转", "45", "度", "\n", "（", "x", "_", "label", "_", "rotation", "=", "45", " ", "）", "，", "并", "隐藏", "了", "图例", "（", "show", "_", "legend", "=", "False", " ", "）", "，", "因为", "我们", "只", "在", "图表", "中", "绘制", "一个", "数据", "系列", "。", "接下来", "，", "我们", "给", "图表", "指定", "了", "标题", "，", "并", "将", "属性", "x", "_", "labels", "\n", "设置", "为", "列表", "names", " ", "。", "\n", "由于", "我们", "不", "需要", "给", "这个", "数据", "系列", "添加", "标签", "，", "因此", "在", "❺", "处", "添加", "数据", "时", "，", "将", "标签", "设置", "成", "了", "空", "字符串", "。", "生成", "的", "图表", "如图", "17", "-", "1", "所示", "。", "从中", "可知", "，", "前", "几个", "项目", "的", "受欢迎", "程度", "比", "其他", "项目", "高得"], ["多", "，", "但", "所有", "这些", "项目", "在", "Python", "生态系统", "中", "都", "很", "重要", "。", "\n", "图", "\n", "图", "17", "-", "1", "　", "\n", "　", "GitHub", "上", "受欢迎", "程度", "最高", "的", "\n", "上", "受欢迎", "程度", "最高", "的", "Python", "项目", "\n", "项目", "\n", "17.2", ".", "1", "　", "改进", "\n", "　", "改进", "Pygal", "图表", "\n", "图表", "\n", "下面", "来", "改进", "这个", "图表", "的", "样式", "。", "我们", "将", "进行", "多个", "方面", "的", "定制", "，", "因此", "先", "来", "稍微", "调整", "代码", "的", "结构", "，", "创建", "一个", "配置", "对象", "，", "在", "其中", "包含", "要", "传递", "给", "Bar", "(", ")", " ", "的", "所有", "定制", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "可视化", "\n", " ", " ", "my", "_", "style", " ", "=", " ", "LS", "(", "'", "#", "333366", "'", ",", " ", "base", "_", "style", "=", "LCS", ")", "\n", "❶", " ", "my", "_", "config", " ", "=", " ", "pygal", ".", "Config", "(", ")", "\n", "❷", " ", "my", "_", "config", ".", "x", "_", "label", "_", "rotation", " ", "=", " ", "45", "\n", " ", " ", "my", "_", "config", ".", "show", "_", "legend", " ", "=", " ", "False", "\n", "❸", " ", "my", "_", "config", ".", "title", "_", "font", "_", "size", " ", "=", " ", "24", "\n", " ", " ", "my", "_", "config", ".", "label", "_", "font", "_", "size", " ", "=", " ", "14", "\n", " ", " ", "my", "_", "config", ".", "major", "_", "label", "_", "font", "_", "size", " ", "=", " ", "18", "\n", "❹", " ", "my", "_", "config", ".", "truncate", "_", "label", " ", "=", " ", "15"], ["❹", " ", "my", "_", "config", ".", "truncate", "_", "label", " ", "=", " ", "15", "\n", "❺", " ", "my", "_", "config", ".", "show", "_", "y", "_", "guides", " ", "=", " ", "False", "\n", "❻", " ", "my", "_", "config", ".", "width", " ", "=", " ", "1000", "\n", "❼", " ", "chart", " ", "=", " ", "pygal", ".", "Bar", "(", "my", "_", "config", ",", " ", "style", "=", "my", "_", "style", ")", "\n", " ", " ", "chart", ".", "title", " ", "=", " ", "'", "Most", "-", "Starred", " ", "Python", " ", "Projects", " ", "on", " ", "GitHub", "'", "\n", " ", " ", "chart", ".", "x", "_", "labels", " ", "=", " ", "names", "\n", " ", " ", "chart", ".", "add", "(", "'", "'", ",", " ", "stars", ")", "\n", " ", " ", "chart", ".", "render", "_", "to", "_", "file", "(", "'", "python", "_", "repos", ".", "svg", "'", ")", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "一个", "Pygal", "类", "Config", " ", "的", "实例", "，", "并", "将", "其", "命名", "为", "my", "_", "config", " ", "。", "通过", "修改", "my", "_", "config", " ", "的", "属性", "，", "可", "定制", "图表", "的", "外观", "。", "在", "❷", "处", "，", "我们", "设置", "了", "两个", "属性", "\n", "—", "—", "x", "_", "label", "_", "rotation", " ", "和", "show", "_", "legend", " ", "，", "它们", "原来", "是", "在", "创建", "Bar", " ", "实例", "时以", "关键字", "实参", "的", "方式", "传递", "的", "。", "在", "❸", "处", "，", "我们", "设置", "了", "图表", "标题", "、", "副", "标签", "和", "主", "标签", "的", "字体大小", "。", "在", "这个"], ["图表", "中", "，", "副", "标签", "是", " ", "x", " ", "轴上", "的", "项目", "名", "以及", " ", "y", " ", "轴上", "的", "大部分", "数字", "。", "主", "标签", "是", " ", "y", " ", "轴上", "为", "5000", "整数倍", "的", "刻度", "；", "这些", "标签", "应", "更", "大", "，", "以", "与", "副", "标签", "区分", "开来", "。", "在", "❹", "处", "，", "我们", "使", "\n", "用", "truncate", "_", "label", " ", "将", "较", "长", "的", "项目", "名", "缩短", "为", "15", "个字符", "（", "如果", "你", "将", "鼠标", "指向", "屏幕", "上", "被", "截短", "的", "项目", "名", "，", "将", "显示", "完整", "的", "项目", "名", "）", "。", "接下来", "，", "我们", "将", "show", "_", "y", "_", "guides", " ", "设置", "为", "False", "\n", "，", "以", "隐藏", "图表", "中", "的", "水平线", "（", "见", "❺", "）", "。", "最后", "，", "在", "❻", "处", "设置", "了", "自定义", "宽度", "，", "让", "图表", "更", "充分", "地", "利用", "浏览器", "中", "的", "可用", "空间", "。", "\n", "在", "❼", "处", "创建", "Bar", " ", "实例", "时", "，", "我们", "将", "my", "_", "config", " ", "作为", "第一个", "实参", "，", "从而", "通过", "一个", "实参", "传递", "了", "所有", "的", "配置", "设置", "。", "我们", "可以", "通过", "my", "_", "config", " ", "做", "任意", "数量", "的", "样式", "和", "配置", "修改", "，", "而", "❼", "处", "的", "\n", "代码", "行将", "保持", "不变", "。", "图", "17", "-", "2", "显示", "了", "重新", "设置", "样式", "后", "的", "图表", "。"], ["图", "\n", "图", "17", "-", "2", "　", "改进", "了", "图表", "的", "样式", "\n", "　", "改进", "了", "图表", "的", "样式", "\n", "17.2", ".", "2", "　", "添加", "自定义", "工具", "提示", "\n", "　", "添加", "自定义", "工具", "提示", "\n", "在", "Pygal", "中", "，", "将", "鼠标", "指向", "条形", "将", "显示", "它", "表示", "的", "信息", "，", "这", "通常", "称为", "工具", "提示", "\n", "工具", "提示", " ", "。", "在", "这个", "示例", "中", "，", "当前", "显示", "的", "是", "项目", "获得", "了", "多少", "个星", "。", "下面", "来", "创建", "一个", "自定义", "工具", "提示", "，", "以", "同时", "显示", "项目", "\n", "的", "描述", "。", "\n", "来看", "一个", "简单", "的", "示例", "，", "它", "可视化", "前", "三个", "项目", "，", "并", "给", "每个", "项目", "对应", "的", "条形", "都", "指定", "自定义", "标签", "。", "为此", "，", "我们", "向", "add", "(", ")", " ", "传递", "一个", "字典", "列表", "，", "而", "不是", "值", "列表", "：", "\n", "bar", "_", "descriptions", ".", "py", "\n", " ", " ", "import", " ", "pygal", "\n", " ", " ", "from", " ", "pygal", ".", "style", " ", "import", " ", "LightColorizedStyle", " ", "as", " ", "LCS", ",", " ", "LightenStyle", " ", "as", " ", "LS", "\n", " ", " ", "my", "_", "style", " ", "=", " ", "LS", "(", "'", "#", "333366", "'", ",", " ", "base", "_", "style", "=", "LCS", ")", "\n", " ", " ", "chart", " ", "=", " ", "pygal", ".", "Bar", "(", "style", "=", "my", "_", "style", ",", " ", "x", "_", "label", "_", "rotation", "=", "45", ",", " ", "show", "_", "legend", "=", "False", ")", "\n", " ", " ", "chart", ".", "title", " ", "=", " ", "'", "Python", " ", "Projects", "'"], ["chart", ".", "title", " ", "=", " ", "'", "Python", " ", "Projects", "'", "\n", " ", " ", "chart", ".", "x", "_", "labels", " ", "=", " ", "[", "'", "httpie", "'", ",", " ", "'", "django", "'", ",", " ", "'", "flask", "'", "]", "\n", "❶", " ", "plot", "_", "dicts", " ", "=", " ", "[", "\n", "❷", " ", " ", " ", " ", " ", "{", "'", "value", "'", ":", " ", "16101", ",", " ", "'", "label", "'", ":", " ", "'", "Description", " ", "of", " ", "httpie", ".", "'", "}", ",", "\n", " ", " ", " ", " ", " ", " ", "{", "'", "value", "'", ":", " ", "15028", ",", " ", "'", "label", "'", ":", " ", "'", "Description", " ", "of", " ", "django", ".", "'", "}", ",", "\n", " ", " ", " ", " ", " ", " ", "{", "'", "value", "'", ":", " ", "14798", ",", " ", "'", "label", "'", ":", " ", "'", "Description", " ", "of", " ", "flask", ".", "'", "}", ",", "\n", " ", " ", " ", " ", " ", " ", "]", "\n", "❸", " ", "chart", ".", "add", "(", "'", "'", ",", " ", "plot", "_", "dicts", ")", "\n", " ", " ", "chart", ".", "render", "_", "to", "_", "file", "(", "'", "bar", "_", "descriptions", ".", "svg", "'", ")", "\n", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "名为", "plot", "_", "dicts", " ", "的", "列表", "，", "其中", "包含", "三个", "字典", "，", "分别", "针对", "项目", "HTTPie", "、", "Django", "和", "Flask", "。", "每个", "字典", "都", "包含", "两个", "键", "：", "'", "value", "'", " ", "和", "'", "label", "'", " ", "。", "Pygal", "根据", "与"], ["键", "'", "value", "'", " ", "相关联", "的", "数字", "来", "确定", "条形", "的", "高度", "，", "并", "使用", "与", "'", "label", "'", " ", "相关联", "的", "字符串", "给", "条形", "创建", "工具", "提示", "。", "例如", "，", "❷", "处", "的", "第一个", "字典", "将", "创建", "一个", "条形", "，", "用于", "表示", "一个", "获得", "了", "16", " ", "101", "\n", "颗星", "、", "工具", "提示", "为", "Description", " ", "of", " ", "httpie", "的", "项目", "。", "\n", "方法", "add", "(", ")", " ", "接受", "一个", "字符串", "和", "一个", "列表", "。", "这里", "调用", "add", "(", ")", " ", "时", "，", "我们", "传入", "了", "一个", "由", "表示", "条形", "的", "字典", "组成", "的", "列表", "（", "plot", "_", "dicts", " ", "）", "（", "见", "❸", "）", "。", "图", "17", "-", "3", "显示", "了", "一个", "工具", "提示", "：", "除", "默认", "\n", "工具", "提示", "（", "获得", "的", "星数", "）", "外", "，", "Pygal", "还", "显示", "了", "我们", "传入", "的", "自定义", "提示", "。", "\n", "图", "\n", "图", "17", "-", "3", "　", "每个", "条形", "都", "有", "自定义", "的", "工具", "提示", "标签", "\n", "　", "每个", "条形", "都", "有", "自定义", "的", "工具", "提示", "标签", "\n", "17.2", ".", "3", "　", "根据", "数据", "绘图", "\n", "　", "根据", "数据", "绘图", "\n", "为", "根据", "数据", "绘图", "，", "我们", "将", "自动", "生成", "plot", "_", "dicts", " ", "，", "其中", "包含", "API", "调用", "返回", "的", "30", "个", "项目", "的", "信息", "。", "\n", "完成", "这种", "工作", "的", "代码", "如下", "：", "\n", "python", "_", "repos", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "研究", "有关", "仓库", "的", "信息", "\n", " ", " ", "repo", "_", "dicts", " ", "=", " ", "response", "_", "dict", "[", "'", "items", "'", "]"], ["print", "(", "\"", "Number", " ", "of", " ", "items", ":", "\"", ",", " ", "len", "(", "repo", "_", "dicts", ")", ")", "\n", "❶", " ", "names", ",", " ", "plot", "_", "dicts", " ", "=", " ", "[", "]", ",", " ", "[", "]", "\n", " ", " ", "for", " ", "repo", "_", "dict", " ", "in", " ", "repo", "_", "dicts", ":", "\n", " ", " ", " ", " ", " ", " ", "names", ".", "append", "(", "repo", "_", "dict", "[", "'", "name", "'", "]", ")", "\n", "❷", " ", " ", " ", " ", " ", "plot", "_", "dict", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "value", "'", ":", " ", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "label", "'", ":", " ", "repo", "_", "dict", "[", "'", "description", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "}", "\n", "❸", " ", " ", " ", " ", " ", "plot", "_", "dicts", ".", "append", "(", "plot", "_", "dict", ")", "\n", " ", " ", "#", " ", "可视化", "\n", " ", " ", "my", "_", "style", " ", "=", " ", "LS", "(", "'", "#", "333366", "'", ",", " ", "base", "_", "style", "=", "LCS", ")", "\n", " ", " ", "--", "snip", "--", "\n", "❹", " ", "chart", ".", "add", "(", "'", "'", ",", " ", "plot", "_", "dicts", ")", "\n", " ", " ", "chart", ".", "render", "_", "to", "_", "file", "(", "'", "python", "_", "repos", ".", "svg", "'", ")", "\n", "在", "❶", "处", "，", "我们", "创建", "了", "两个", "空", "列表", "names", " ", "和", "plot", "_", "dicts", " ", "。", "为", "生成", "x", " ", "轴上", "的", "标签", "，", "我们", "依然", "需要", "列表", "names", " ", "。"], ["在", "循环", "内部", "，", "对于", "每个", "项目", "，", "我们", "都", "创建", "了", "字典", "plot", "_", "dict", " ", "（", "见", "❷", "）", "。", "在", "这个", "字典", "中", "，", "我们", "使用", "键", "'", "value", "'", " ", "存储", "了", "星数", "，", "并", "使用", "键", "'", "label", "'", " ", "存储", "了", "项目", "描述", "。", "接下来", "，", "我们", "\n", "将", "字典", "plot", "_", "dict", " ", "附加", "到", "plot", "_", "dicts", " ", "末尾", "（", "见", "❸", "）", "。", "在", "❹", "处", "，", "我们", "将", "列表", "plot", "_", "dicts", " ", "传递", "给", "了", "add", "(", ")", " ", "。", "图", "17", "-", "4", "显示", "了", "生成", "的", "图表", "。", "\n", "图", "\n", "图", "17", "-", "4", "　", "将", "鼠标", "指向", "条形", "将", "显示", "项目", "的", "描述", "\n", "　", "将", "鼠标", "指向", "条形", "将", "显示", "项目", "的", "描述", "\n", "17.2", ".", "4", "　", "在", "图表", "中", "添加", "可", "单击", "的", "链接", "\n", "　", "在", "图表", "中", "添加", "可", "单击", "的", "链接", "\n", "Pygal", "还", "允许", "你", "将", "图表", "中", "的", "每个", "条形", "用作", "网站", "的", "链接", "。", "为此", "，", "只", "需", "添加", "一行", "代码", "，", "在", "为", "每个", "项目", "创建", "的", "字典", "中", "，", "添加", "一个", "键为", "'", "xlink", "'", " ", "的", "键", "—", "值", "对", "：", "\n", "python", "_", "repos", ".", "py", "\n", "--", "snip", "--", "\n", "names", ",", " ", "plot", "_", "dicts", " ", "=", " ", "[", "]", ",", " ", "[", "]", "\n", "for", " ", "repo", "_", "dict", " ", "in", " ", "repo", "_", "dicts", ":", "\n", " ", " ", " ", " ", "names", ".", "append", "(", "repo", "_", "dict", "[", "'", "name", "'", "]", ")", "\n", " ", " ", " ", " ", "plot", "_", "dict", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "value", "'", ":", " ", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ","], ["'", "value", "'", ":", " ", "repo", "_", "dict", "[", "'", "stargazers", "_", "count", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "label", "'", ":", " ", "repo", "_", "dict", "[", "'", "description", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "xlink", "'", ":", " ", "repo", "_", "dict", "[", "'", "html", "_", "url", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", " ", " ", "plot", "_", "dicts", ".", "append", "(", "plot", "_", "dict", ")", "\n", "--", "snip", "--", "\n", "Pygal", "根据", "与键", "'", "xlink", "'", " ", "相关联", "的", "URL", "将", "每个", "条形", "都", "转换", "为", "活跃", "的", "链接", "。", "单击", "图表", "中", "的", "任何", "条形", "时", "，", "都", "将", "在", "浏览器", "中", "打开", "一个", "新", "的", "标签", "页", "，", "并", "在", "其中", "显示", "相应", "项目", "的", "GitHub", "页面", "。", "\n", "至此", "，", "你", "对", "API", "获取", "的", "数据", "进行", "了", "可视化", "，", "它", "是", "交互性", "的", "，", "包含", "丰富", "的", "信息", "！", "\n", "17.3", "　", "\n", "　", "Hacker", " ", "News", " ", "API", "\n", "为", "探索", "如何", "使用", "其他", "网站", "的", "API", "调用", "，", "我们", "来", "看看", "Hacker", " ", "News", "（", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", " ", "）", "。", "在", "Hacker", " ", "News", "网站", "，", "用户", "分享", "编程", "和", "技术", "方面", "的", "文章", "，", "并", "就", "这些", "文章", "展开", "积极", "的", "讨", "\n", "论", "。", "Hacker", " ", "News", "的", "API", "让", "你", "能够", "访问", "有关", "该", "网站", "所有", "文章", "和", "评论", "的", "信息", "，", "且", "不", "要求", "你", "通过", "注册", "获得", "密钥", "。"], ["下面", "的", "调用", "返回", "本书", "编写", "时", "最", "热门", "的", "文章", "的", "信息", "：", "\n", "https", ":", "/", "/", "hacker", "-", "news", ".", "firebaseio", ".", "com", "/", "v0", "/", "item", "/", "9884165", ".", "json", "\n", "响应", "是", "一个", "字典", "，", "包含", "ID", "为", "9884165", "的", "文章", "的", "信息", "：", "\n", " ", " ", "{", "\n", "❶", " ", " ", " ", " ", " ", "'", "url", "'", ":", " ", "'", "http", ":", "/", "/", "www", ".", "bbc", ".", "co", ".", "uk", "/", "news", "/", "science", "-", "environment", "-", "33524589", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "type", "'", ":", " ", "'", "story", "'", ",", "\n", "❷", " ", " ", " ", " ", " ", "'", "title", "'", ":", " ", "'", "New", " ", "Horizons", ":", " ", "Nasa", " ", "spacecraft", " ", "speeds", " ", "past", " ", "Pluto", "'", ",", "\n", "❸", " ", " ", " ", " ", " ", "'", "descendants", "'", ":", " ", "141", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "score", "'", ":", " ", "230", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "time", "'", ":", " ", "1436875181", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "text", "'", ":", " ", "'", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "by", "'", ":", " ", "'", "nns", "'", ",", "\n", " ", " ", " ", " ", " ", " ", "'", "id", "'", ":", " ", "9884165", ",", "\n", "❹", " ", " ", " ", " ", " ", "'", "kids", "'", ":", " ", "[", "9884723", ",", " ", "9885099", ",", " ", "9884789", ",", " ", "9885604", ",", " ", "9885844", "]", "\n", " ", " ", "}"], ["这个", "字典", "包含", "很多", "键", "，", "如", "'", "url", "'", " ", "（", "见", "❶", "）", "和", "'", "title", "'", " ", "（", "见", "❷", "）", "。", "与键", "'", "descendants", "'", " ", "相关联", "的", "值", "是", "文章", "被", "评论", "的", "次数", "（", "见", "❸", "）", "。", "与键", "'", "kids", "'", " ", "相关联", "的", "值", "包含", "对", "文章", "所", "做", "的", "\n", "所有", "评论", "的", "ID", "（", "见", "❹", "）", "。", "每个", "评论", "自己", "也", "可能", "有", "kid", "，", "因此", "文章", "的", "后代", "（", "descendant", "）", "数量", "可能", "比其", "kid", "数量", "多", "。", "\n", "下面", "来", "执行", "一个", "API", "调用", "，", "返回", "Hacker", " ", "News", "上", "当前", "热门", "文章", "的", "ID", "，", "再", "查看", "每篇", "排名", "靠", "前", "的", "文章", "：", "\n", "hn", "_", "submissions", ".", "py", "\n", " ", " ", "import", " ", "requests", "\n", " ", " ", "from", " ", "operator", " ", "import", " ", "itemgetter", "\n", " ", " ", "#", " ", "执行", "API", "调用", "并", "存储", "响应", "\n", "❶", " ", "url", " ", "=", " ", "'", "https", ":", "/", "/", "hacker", "-", "news", ".", "firebaseio", ".", "com", "/", "v0", "/", "topstories", ".", "json", "'", "\n", " ", " ", "r", " ", "=", " ", "requests", ".", "get", "(", "url", ")", "\n", " ", " ", "print", "(", "\"", "Status", " ", "code", ":", "\"", ",", " ", "r", ".", "status", "_", "code", ")", "\n", " ", " ", "#", " ", "处理", "有关", "每篇", "文章", "的", "信息", "\n", "❷", " ", "submission", "_", "ids", " ", "=", " ", "r", ".", "json", "(", ")", "\n", "❸", " ", "submission", "_", "dicts", " ", "=", " ", "[", "]"], ["❸", " ", "submission", "_", "dicts", " ", "=", " ", "[", "]", "\n", " ", " ", "for", " ", "submission", "_", "id", " ", "in", " ", "submission", "_", "ids", "[", ":", "30", "]", ":", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "对于", "每篇", "文章", "，", "都", "执行", "一个", "API", "调用", "\n", "❹", " ", " ", " ", " ", " ", "url", " ", "=", " ", "(", "'", "https", ":", "/", "/", "hacker", "-", "news", ".", "firebaseio", ".", "com", "/", "v0", "/", "item", "/", "'", " ", "+", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "str", "(", "submission", "_", "id", ")", " ", "+", " ", "'", ".", "json", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "submission", "_", "r", " ", "=", " ", "requests", ".", "get", "(", "url", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "submission", "_", "r", ".", "status", "_", "code", ")", "\n", " ", " ", " ", " ", " ", " ", "response", "_", "dict", " ", "=", " ", "submission", "_", "r", ".", "json", "(", ")", "\n", "❺", " ", " ", " ", " ", " ", "submission", "_", "dict", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "title", "'", ":", " ", "response", "_", "dict", "[", "'", "title", "'", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "link", "'", ":", " ", "'", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "'", " ", "+", " ", "str", "(", "submission", "_", "id", ")", ","], ["❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "comments", "'", ":", " ", "response", "_", "dict", ".", "get", "(", "'", "descendants", "'", ",", " ", "0", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", " ", " ", " ", " ", "submission", "_", "dicts", ".", "append", "(", "submission", "_", "dict", ")", "\n", "❼", " ", "submission", "_", "dicts", " ", "=", " ", "sorted", "(", "submission", "_", "dicts", ",", " ", "key", "=", "itemgetter", "(", "'", "comments", "'", ")", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "reverse", "=", "True", ")", "\n", "❽", " ", "for", " ", "submission", "_", "dict", " ", "in", " ", "submission", "_", "dicts", ":", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "\\", "nTitle", ":", "\"", ",", " ", "submission", "_", "dict", "[", "'", "title", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Discussion", " ", "link", ":", "\"", ",", " ", "submission", "_", "dict", "[", "'", "link", "'", "]", ")", "\n", " ", " ", " ", " ", " ", " ", "print", "(", "\"", "Comments", ":", "\"", ",", " ", "submission", "_", "dict", "[", "'", "comments", "'", "]", ")"], ["首先", "，", "我们", "执行", "了", "一个", "API", "调用", "，", "并打印", "了", "响应", "的", "状态", "（", "见", "❶", "）", "。", "这个", "API", "调用", "返回", "一个", "列表", "，", "其中", "包含", "Hacker", " ", "News", "上", "当前", "最", "热门", "的", "500", "篇文章", "的", "ID", "。", "接下来", "，", "我们", "将", "响应", "文本", "转", "\n", "换", "为", "一个", "Python", "列表", "（", "见", "❷", "）", "，", "并", "将", "其", "存储", "在", "submission", "_", "ids", " ", "中", "。", "我们", "将", "使用", "这些", "ID", "来", "创建", "一系列", "字典", "，", "其中", "每个", "字典", "都", "存储", "了", "一篇", "文章", "的", "信息", "。", "\n", "在", "❸", "处", "，", "我们", "创建", "了", "一个", "名为", "submission", "_", "dicts", " ", "的", "空", "列表", "，", "用于", "存储", "前面", "所说", "的", "字典", "。", "接下来", "，", "我们", "遍历", "前", "30", "篇文章", "的", "ID", "。", "对于", "每篇", "文章", "，", "我们", "都", "执行", "一个", "API", "调用", "，", "其中", "\n", "的", "URL", "包含", "submission", "_", "id", " ", "的", "当前", "值", "（", "见", "❹", "）", "。", "我们", "打印", "每次", "请求", "的", "状态", "，", "以便", "知道", "请求", "是否", "成功", "了", "。", "\n", "在", "❺", "处", "，", "我们", "为", "当前", "处理", "的", "文章", "创建", "一个", "字典", "，", "并", "在", "其中", "存储", "文章", "的", "标题", "以及", "到", "其", "讨论", "页面", "的", "链接", "。", "在", "❻", "处", "，", "我们", "在", "这个", "字典", "中", "存储", "了", "评论", "数", "。", "如果", "文章", "还", "没有", "评论", "，", "响应", "字典", "\n", "中将", "没有", "键", "'", "descendants", "'", " ", "。", "不", "确定", "某个", "键", "是否", "包含", "在", "字典", "中", "时", "，", "可", "使用", "方法", "dict", ".", "get", "(", ")", " ", "，", "它", "在", "指定", "的", "键", "存在", "时", "返回", "与", "之", "相关联", "的", "值", "，", "并", "在", "指定", "的", "键", "不", "存在", "时", "返回", "你", "指定"], ["的", "值", "（", "这里", "是", "0", "）", "。", "最后", "，", "我们", "将", "submission", "_", "dict", " ", "附加", "到", "submission", "_", "dicts", " ", "末尾", "。", "\n", "Hacker", " ", "News", "上", "的", "文章", "是", "根据", "总体", "得分", "排名", "的", "，", "而", "总体", "得分", "取决于", "很多", "因素", "，", "其中", "包含", "被", "推荐", "的", "次数", "、", "评论", "数", "以及", "发表", "的", "时间", "。", "我们", "要", "根据", "评论", "数对", "字典", "列", "\n", "表", "submission", "_", "dicts", " ", "进行", "排序", "，", "为此", "，", "使用", "了", "模块", "operator", " ", "中", "的", "函数", "itemgetter", "(", ")", " ", "（", "见", "❼", "）", "。", "我们", "向", "这个", "函数", "传递", "了", "键", "'", "comments", "'", " ", "，", "因此", "它", "将", "从", "这个", "列表", "的", "每个", "\n", "字典", "中", "提取", "与键", "'", "comments", "'", " ", "相关联", "的", "值", "。", "这样", "，", "函数", "sorted", "(", ")", " ", "将", "根据", "这种", "值", "对", "列表", "进行", "排序", "。", "我们", "将", "列表", "按", "降序", "排列", "，", "即", "评论", "最多", "的", "文章", "位于", "最", "前面", "。", "\n", "对", "列表", "排序", "后", "，", "我们", "遍历", "这个", "列表", "（", "见", "❽", "）", "，", "对于", "每篇", "热门", "文章", "，", "都", "打印", "其", "三项", "信息", "：", "标题", "、", "到", "讨论", "页面", "的", "链接", "以及", "文章", "现有", "的", "评论", "数", "：", "\n", "Status", " ", "code", ":", " ", "200", "\n", "200", "\n", "200", "\n", "200", "\n", "--", "snip", "--", "\n", "Title", ":", " ", "Firefox", " ", "deactivates", " ", "Flash", " ", "by", " ", "default", "\n", "Discussion", " ", "link", ":", " ", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "9883246"], ["Comments", ":", " ", "231", "\n", "Title", ":", " ", "New", " ", "Horizons", ":", " ", "Nasa", " ", "spacecraft", " ", "speeds", " ", "past", " ", "Pluto", "\n", "Discussion", " ", "link", ":", " ", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "9884165", "\n", "Comments", ":", " ", "142", "\n", "Title", ":", " ", "Iran", " ", "Nuclear", " ", "Deal", " ", "Is", " ", "Reached", " ", "With", " ", "World", " ", "Powers", "\n", "Discussion", " ", "link", ":", " ", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "9884005", "\n", "Comments", ":", " ", "141", "\n", "Title", ":", " ", "Match", " ", "Group", " ", "Buys", " ", "PlentyOfFish", " ", "for", " ", "$", "575M", "\n", "Discussion", " ", "link", ":", " ", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "9884417", "\n", "Comments", ":", " ", "75", "\n", "Title", ":", " ", "Our", " ", "Nexus", " ", "4", " ", "devices", " ", "are", " ", "about", " ", "to", " ", "explode", "\n", "Discussion", " ", "link", ":", " ", "http", ":", "/", "/", "news", ".", "ycombinator", ".", "com", "/", "item", "?", "id", "=", "9885625"], ["Comments", ":", " ", "14", "\n", "--", "snip", "--", "\n", "使用", "任何", "API", "来", "访问", "和", "分析", "信息", "时", "，", "流程", "都", "与", "此", "类似", "。", "有", "了", "这些", "数据", "后", "，", "你", "就", "可以", "进行", "可视化", "，", "指出", "最近", "哪些", "文章", "引发", "了", "最", "激烈", "的", "讨论", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "17", "-", "1", " ", "其他", "语言", "\n", "其他", "语言", " ", "：", "修改", "python", "_", "repos", ".", "py", "中", "的", "API", "调用", "，", "使", "其", "在", "生成", "的", "图表", "中", "显示", "使用", "其他", "语言", "编写", "的", "最", "受欢迎", "的", "项目", "。", "请", "尝试", "语言", "JavaScript", "、", "Ruby", "、", "C", "、", "Java", "、", "Perl", "、", "\n", "Haskell", "和", "Go", "等", "。", "\n", "17", "-", "2", " ", "最", "活跃", "的", "讨论", "\n", "最", "活跃", "的", "讨论", " ", "：", "使用", "hn", "_", "submissions", ".", "py", "中", "的", "数据", "，", "创建", "一个", "条形图", "，", "显示", "Hacker", " ", "News", "上", "当前", "最", "活跃", "的", "讨论", "。", "条形", "的", "高度", "应", "对应", "于", "文章", "得到", "的", "评论", "数量", "，", "条形", "的", "标", "\n", "签应", "包含", "文章", "的", "标题", "，", "而", "每个", "条形", "应是", "到", "该", "文章", "讨论", "页面", "的", "链接", "。", "\n", "17", "-", "3", " ", "测试", "\n", "测试", "python", "_", "repos", ".", "py", " ", "：", "在", "python", "_", "repos", ".", "py", "中", "，", "打印", "status", "_", "code", " ", "的", "值", "，", "以", "核实", "API", "调用", "是否", "成功", "了", "。", "请", "编写", "一个", "名为", "test", "_", "python", "_", "repos", ".", "py", "的", "程序", "，", "它", "使用", "单元测试"], ["来", "断言", "status", "_", "code", " ", "的", "值", "为", "200", "。", "想想", "你", "还", "可", "做出", "哪些", "断言", "，", "如", "返回", "的", "条目", "数", "符合", "预期", "，", "仓库", "总数", "超过", "特定", "的", "值", "等", "。"], ["17.4", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "：", "如何", "使用", "API", "来", "编写", "独立", "的", "程序", "，", "它们", "自动", "采集", "所", "需", "的", "数据", "并", "对", "其", "进行", "可视化", "；", "使用", "GitHub", " ", "API", "来", "探索", "GitHub", "上", "星级", "最高", "的", "Python", "项目", "，", "还", "大致", "地", "了解", "了", "\n", "Hacker", " ", "News", " ", "API", "；", "如何", "使用", "requests", "包来", "自动", "执行", "GitHub", " ", "API", "调用", "，", "以及", "如何", "处理", "调用", "的", "结果", "。", "我们", "还", "简要地", "介绍", "了", "一些", "Pygal", "设置", "，", "使用", "它们", "可", "进一步", "定制", "生成", "的", "图表", "的", "外观", "。", "\n", "在", "本书", "的", "最后", "一个", "项目", "中", "，", "我们", "将", "使用", "Django", "来", "创建", "一个", "Web", "应用程序", "。", "\n", "项目", "\n", "项目", "3", "　", "\n", "　", "Web", "应用程序", "\n", "应用程序", "\n", "第", "\n", "第", " ", "18", " ", "章", "　", "\n", "章", "　", "Django", "入门", "\n", "入门", "\n", "当今", "的", "网站", "实际上", "都", "是", "富", "应用程序", "（", "rich", " ", "application", "）", "，", "就", "像", "成熟", "的", "桌面", "应用程序", "一样", "。", "Python", "提供", "了", "一组", "开发", "Web", "应用程序", "的", "卓越", "工具", "。", "在", "本章", "中", "，", "你", "将", "学习", "如何", "使用", "\n", "Django", "（", "http", ":", "/", "/", "djangoproject", ".", "com", "/", " ", "）", "来", "开发", "一个", "名为", "“", "学习", "笔记", "”", "（", "Learning", " ", "Log", "）", "的", "项目", "，", "这是", "一个", "在线", "日志", "系统", "，", "让", "你", "能够", "记录", "所", "学习", "的", "有关", "特定", "主题", "的", "知识", "。"], ["我们", "将", "为", "这个", "项目", "制定", "规范", "，", "然后", "为", "应用程序", "使用", "的", "数据", "定义", "模型", "。", "我们", "将", "使用", "Django", "的", "管理系统", "来", "输入", "一些", "初始", "数据", "，", "再", "学习", "编写", "视图", "和", "模板", "，", "让", "Django", "能够", "为", "我们", "\n", "的", "网站", "创建", "网页", "。", "\n", "Django", "是", "一个", "Web", "框架", "\n", "框架", " ", "—", "—", "一套", "用于", "帮助", "开发", "交互式", "网站", "的", "工具", "。", "Django", "能够", "响应", "网页", "请求", "，", "还", "能", "让", "你", "更", "轻松", "地", "读写", "数据库", "、", "管理", "用户", "等", "。", "在", "第", "19", "章", "和", "第", "20", "章", "，", "我们", "\n", "将", "改进", "“", "学习", "笔记", "”", "项目", "，", "再", "将", "其", "部署", "到", "活动", "的", "服务器", "，", "让", "你", "和", "你", "的", "朋友", "能够", "使用", "它", "。", "\n", "18.1", "　", "建立", "项目", "\n", "　", "建立", "项目", "\n", "建立", "项目", "时", "，", "首先", "需要", "以", "规范", "的", "方式", "对", "项目", "进行", "描述", "，", "再", "建立", "虚拟环境", "，", "以便", "在", "其中", "创建", "项目", "。", "\n", "18.1", ".", "1", "　", "制定", "规范", "\n", "　", "制定", "规范", "\n", "完整", "的", "规范", "详细", "说明", "了", "项目", "的", "目标", "，", "阐述", "了", "项目", "的", "功能", "，", "并", "讨论", "了", "项目", "的", "外观", "和", "用户界面", "。", "与", "任何", "良好", "的", "项目", "规划", "和", "商业", "计划书", "一样", "，", "规范", "应", "突出重点", "，", "帮助", "避免", "项目", "偏离", "轨", "\n", "道", "。", "这里", "不会", "制定", "完整", "的", "项目", "规划", "，", "而", "只", "列出", "一些", "明确", "的", "目标", "，", "以", "突出", "开发", "的", "重点", "。", "我们", "制定", "的", "规范", "如下", "：", "\n", "我们", "要", "编写", "一个", "名为", "“", "学习", "笔记", "”", "的", "Web", "应用程序", "，", "让", "用户", "能够", "记录", "感兴趣", "的", "主题", "，", "并", "在", "学习", "每个", "主题", "的", "过程", "中", "添加", "日志", "条目", "。", "“", "学习", "笔记", "”", "的", "主页", "对", "这个", "网站", "进行", "描述", "，"], ["并", "邀请", "用户注册", "或", "登录", "。", "用户", "登录", "后", "，", "就", "可", "创建", "新", "主题", "、", "添加", "新", "条目", "以及", "阅读", "既有", "的", "条目", "。", "\n", "学习", "新", "的", "主题", "时", "，", "记录", "学到", "的", "知识", "可", "帮助", "跟踪", "和", "复习", "这些", "知识", "。", "优秀", "的", "应用程序", "让", "这个", "记录", "过程", "简单易行", "。", "\n", "18.1", ".", "2", "　", "建立", "虚拟环境", "\n", "　", "建立", "虚拟环境", "\n", "要", "使用", "Django", "，", "首先", "需要", "建立", "一个", "虚拟", "工作", "环境", "。", "虚拟环境", "\n", "虚拟环境", " ", "是", "系统", "的", "一个", "位置", "，", "你", "可以", "在", "其中", "安装包", "，", "并", "将", "其", "与", "其他", "Python", "包", "隔离", "。", "将", "项目", "的", "库", "与", "其他", "项目", "分离", "是", "有益", "的", "，", "且", "为", "\n", "了", "在", "第", "20", "章", "将", "“", "学习", "笔记", "”", "部署", "到", "服务器", "，", "这", "也", "是", "必须", "的", "。", "\n", "为", "项目", "新建", "一个", "目录", "，", "将", "其", "命名", "为", "learning", "_", "log", "，", "再", "在", "终端", "中", "切换", "到", "这个", "目录", "，", "并", "创建", "一个", "虚拟环境", "。", "如果", "你", "使用", "的", "是", "Python", " ", "3", "，", "可", "使用", "如下", "命令", "来", "创建", "虚拟环境", "：", "\n", "learning", "_", "log", "$", " ", "python", " ", "-", "m", " ", "venv", " ", "ll", "_", "env", "\n", "learning", "_", "log", "$", "\n", "这里", "运行", "了", "模块", "venv", " ", "，", "并", "使用", "它", "来", "创建", "一个", "名为", "ll", "_", "env", "的", "虚拟环境", "。", "如果", "这样", "做", "管用", "，", "请", "跳", "到", "后面", "的", "18.1", ".", "4", "节", "；", "如果", "不管", "用", "，", "请", "阅读", "18.1", ".", "3", "节", "。", "\n", "18.1", ".", "3", "　", "安装", "\n", "　", "安装", "virtualenv"], ["如果", "你", "使用", "的", "是", "较", "早", "的", "Python", "版本", "，", "或者", "系统", "没有", "正确", "地", "设置", "，", "不能", "使用", "模块", "venv", " ", "，", "可", "安装", "virtualenv", "包", "。", "为此", "，", "可", "执行", "如下", "命令", "：", "\n", "$", " ", "pip", " ", "install", " ", "--", "user", " ", "virtualenv", "\n", "别忘了", "，", "对于", "这个", "命令", "，", "你", "可能", "需要", "使用", "稍微", "不同", "的", "版本", "（", "如果", "你", "没有", "使用", "过", "pip", "，", "请参阅", "12.2", ".", "1", "节", "）", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Linux", "系统", "，", "且", "上面", "的", "做法", "不管", "用", "，", "可", "使用", "系统", "的", "包", "管理器", "来", "安装", "virtualenv", "。", "例如", "，", "要", "在", "Ubuntu", "系统", "中", "安装", "virtualenv", "，", "可", "使用", "命令", "sudo", " ", "apt", "-", "\n", "get", " ", "install", " ", "python", "-", "virtualenv", " ", "。", "\n", "在", "终端", "中", "切换", "到", "目录", "learning", "_", "log", "，", "并", "像", "下面", "这样", "创建", "一个", "虚拟环境", "：", "\n", "learning", "_", "log", "$", " ", "virtualenv", " ", "ll", "_", "env", "\n", "New", " ", "python", " ", "executable", " ", "in", " ", "ll", "_", "env", "/", "bin", "/", "python", "\n", "Installing", " ", "setuptools", ",", " ", "pip", "...", "done", ".", "\n", "learning", "_", "log", "$", "\n", "注意"], ["learning", "_", "log", "$", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "的", "系统", "安装", "了", "多个", "Python", "版本", "，", "需要", "指定", "virtualenv", "使用", "的", "版本", "。", "例如", "，", "命令", "virtualenv", " ", "ll", "_", "env", " ", "--", "python", "=", "python3", " ", "创建", "一个", "使用", "Python", " ", "3", "的", "虚拟", "\n", "环境", "。", "\n", "18.1", ".", "4", "　", "激活", "虚拟环境", "\n", "　", "激活", "虚拟环境", "\n", "建立", "虚拟环境", "后", "，", "需要", "使用", "下面", "的", "命令", "激活", "它", "：", "\n", " ", " ", "learning", "_", "log", "$", " ", "source", " ", "ll", "_", "env", "/", "bin", "/", "activate", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "这个", "命令", "运行", "ll", "_", "env", "/", "bin", "中", "的", "脚本", "activate", "。", "环境", "处于", "活动状态", "时", "，", "环境", "名将", "包含", "在", "括号", "内", "，", "如", "❶", "处所", "示", "。", "在", "这种", "情况", "下", "，", "你", "可以", "在", "环境", "中", "安装包", "，", "并", "使用", "已", "安装", "的", "包", "。", "你", "在", "ll", "_", "env", "中安", "\n", "装", "的", "包仅", "在", "该", "环境", "处于", "活动状态", "时才", "可用", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "请", "使用", "命令", "ll", "_", "env", "\\", "Scripts", "\\", "activate", " ", "（", "不", "包含", "source", " ", "）", "来", "激活", "这个", "虚拟环境", "。", "\n", "要", "停止使用", "虚拟环境", "，", "可", "执行命令", "deactivate", " ", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "deactivate", "\n", "learning", "_", "log", "$"], ["(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "deactivate", "\n", "learning", "_", "log", "$", "\n", "如果", "关闭", "运行", "虚拟环境", "的", "终端", "，", "虚拟环境", "也", "将", "不再", "处于", "活动状态", "。", "\n", "18.1", ".", "5", "　", "安装", "\n", "　", "安装", "Django", "\n", "创建", "并", "激活", "虚拟环境", "后", "，", "就", "可", "安装", "Django", "了", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "Django", "\n", "Installing", " ", "collected", " ", "packages", ":", " ", "Django", "\n", "Successfully", " ", "installed", " ", "Django", "\n", "Cleaning", " ", "up", "...", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "由于", "我们", "是", "在", "虚拟", "环境中工作", "，", "因此", "在", "所有", "的", "系统", "中", "，", "安装", "Django", "的", "命令", "都", "相同", "：", "不", "需要", "指定", "标志", "--", "user", " ", "，", "也", "无需", "使用", "python", " ", "-", "m", " ", "pip", " ", "install", " ", "package", "_", "name", " ", "这样", "较", "\n", "长", "的", "命令", "。", "\n", "别忘了", "，", "Django", "仅", "在", "虚拟环境", "处于", "活动状态", "时才", "可用", "。", "\n", "18.1", ".", "6", "　", "在", "\n", "　", "在", "Django", "中", "创建", "项目", "\n", "中", "创建", "项目", "\n", "在", "依然", "处于", "活动", "的", "虚拟环境", "的", "情况", "下", "（", "ll", "_", "env", "包含", "在", "括号", "内", "）", "，", "执行", "如下", "命令", "来", "新建", "一个", "项目", "："], ["在", "依然", "处于", "活动", "的", "虚拟环境", "的", "情况", "下", "（", "ll", "_", "env", "包含", "在", "括号", "内", "）", "，", "执行", "如下", "命令", "来", "新建", "一个", "项目", "：", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "django", "-", "admin", ".", "py", " ", "startproject", " ", "learning", "_", "log", " ", ".", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", "\n", " ", " ", "learning", "_", "log", " ", "ll", "_", "env", " ", "manage", ".", "py", "\n", "❸", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", " ", "learning", "_", "log", "\n", " ", " ", "__", "init", "__.", "py", " ", " ", "settings", ".", "py", " ", " ", "urls", ".", "py", " ", " ", "wsgi", ".", "py", "\n", "❶", "处", "的", "命令", "让", "Django", "新建", "一个", "名为", "learning", "_", "log", "的", "项目", "。", "这个", "命令", "末尾", "的", "句点", "让", "新", "项目", "使用", "合适", "的", "目录", "结构", "，", "这样", "开发", "完成", "后", "可", "轻松", "地", "将", "应用程序", "部署", "到", "服务器", "。", "\n", "注意", "\n", "注意", " ", "　", "千万", "别忘了", "这个", "句点", "，", "否则", "部署", "应用程序", "时", "将", "遭遇", "一些", "配置", "问题", "。", "如果", "忘记", "了", "这个", "句点", "，", "就", "将", "创建", "的", "文件", "和", "文件夹", "删除", "（", "ll", "_", "env", "除外", "）", "，", "再", "重新", "运行", "这个", "命令", "。"], ["在", "❸", "处", "，", "运行", "了", "命令", "ls", " ", "（", "在", "Windows", "系统", "上", "应为", "dir", " ", "）", "，", "结果表明", "Django", "新建", "了", "一个", "名为", "learning", "_", "log", "的", "目录", "。", "它", "还", "创建", "了", "一个", "名为", "manage", ".", "py", "的", "文件", "，", "这是", "一个", "简单", "的", "程序", "，", "它", "接受", "\n", "命令", "并", "将", "其", "交给", "Django", "的", "相关", "部分", "去", "运行", "。", "我们", "将", "使用", "这些", "命令", "来", "管理", "诸如", "使用", "数据库", "和", "运行", "服务器", "等", "任务", "。", "\n", "目录", "learning", "_", "log", "包含", "4", "个", "文件", "（", "见", "❸", "）", "，", "其中", "最", "重要", "的", "是", "settings", ".", "py", "、", "urls", ".", "py", "和", "wsgi", ".", "py", "。", "文件", "settings", ".", "py", "指定", "Django", "如何", "与", "你", "的", "系统", "交互", "以及", "如何", "管理", "项目", "。", "在", "开发", "项目", "的", "过程", "中", "，", "我们", "\n", "将", "修改", "其中", "一些", "设置", "，", "并", "添加", "一些", "设置", "。", "文件", "urls", ".", "py", "告诉", "Django", "应", "创建", "哪些", "网页", "来", "响应", "浏览器", "请求", "。", "文件", "wsgi", ".", "py", "帮助", "Django", "提供", "它", "创建", "的", "文件", "，", "这个", "文件名", "是", "web", " ", "server", " ", "gateway", "\n", "interface", "（", "Web", "服务器", "网关", "接口", "\n", "服务器", "网关", "接口", " ", "）", "的", "首字母", "缩写", "。", "\n", "18.1", ".", "7", "　", "创建", "数据库", "\n", "　", "创建", "数据库", "\n", "Django", "将", "大部分", "与", "项目", "相关", "的", "信息", "都", "存储", "在", "数据库", "中", "，", "因此", "我们", "需要", "创建", "一个", "供", "Django", "使用", "的", "数据库", "。", "为", "给", "项目", "“", "学习", "笔记", "”", "创建", "数据库", "，", "请", "在", "处于", "活动", "虚拟环境", "中", "的", "情况", "下", "执行", "下"], ["面", "的", "命令", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "migrate", "\n", "❶", " ", "Operations", " ", "to", " ", "perform", ":"], ["Synchronize", " ", "unmigrated", " ", "apps", ":", " ", "messages", ",", " ", "staticfiles", "\n", " ", " ", " ", " ", "Apply", " ", "all", " ", "migrations", ":", " ", "contenttypes", ",", " ", "sessions", ",", " ", "auth", ",", " ", "admin", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "Applying", " ", "sessions.0001", "_", "initial", "...", " ", "OK", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", "\n", " ", " ", "db", ".", "sqlite3", " ", " ", "learning", "_", "log", " ", " ", "ll", "_", "env", " ", " ", "manage", ".", "py", "\n", "我们", "将", "修改", "数据库", "称为", "迁移", "\n", "迁移", " ", "数据库", "。", "首次", "执行命令", "migrate", " ", "时", "，", "将", "让", "Django", "确保", "数据库", "与", "项目", "的", "当前", "状态", "匹配", "。", "在", "使用", "SQLite", "（", "后面", "将", "更", "详细", "地", "介绍", "）", "的", "新", "项目", "中", "首次", "执行", "这个", "\n", "命令", "时", "，", "Django", "将", "新建", "一个", "数据库", "。", "在", "❶", "处", "，", "Django", "指出", "它", "将", "创建", "必要", "的", "数据库", "表", "，", "用于", "存储", "我们", "将", "在", "这个", "项目", "（", "Synchronize", " ", "unmigrated", " ", "apps", "，", "同步", "未", "迁移", "的", "应用程序", "\n", "同步", "未", "迁移", "的", "应用程序", " ", "）", "中", "使用", "的", "\n", "信息", "，", "再", "确保", "数据库", "结构", "与", "当前", "代码", "（", "Apply", " ", "all", " ", "migrations", "，", "应用", "所有", "的", "迁移", "\n", "应用", "所有", "的", "迁移", " ", "）", "匹配", "。"], ["应用", "所有", "的", "迁移", " ", "）", "匹配", "。", "\n", "在", "❷", "处", "，", "我们", "运行", "了", "命令", "ls", " ", "，", "其", "输出", "表明", "Django", "又", "创建", "了", "一个", "文件", "—", "—", "db", ".", "sqlite3", "。", "SQLite", "是", "一种", "使用", "单个", "文件", "的", "数据库", "，", "是", "编写", "简单", "应用程序", "的", "理想", "选择", "，", "因为", "它", "让", "你", "不用", "太关", "\n", "注", "数据库", "管理", "的", "问题", "。", "\n", "18.1", ".", "8", "　", "查看", "项目", "\n", "　", "查看", "项目", "\n", "下面", "来", "核实", "Django", "是否", "正确", "地", "创建", "了", "项目", "。", "为此", "，", "可", "执行命令", "runserver", " ", "，", "如下", "所示", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "runserver", "\n", " ", " ", "Performing", " ", "system", " ", "checks", "...", "\n", "❶", " ", "System", " ", "check", " ", "identified", " ", "no", " ", "issues", " ", "(", "0", " ", "silenced", ")", ".", "\n", " ", " ", "July", " ", "15", ",", " ", "2015", " ", "-", " ", "06", ":", "23", ":", "51", "\n", "❷", " ", "Django", " ", "version", " ", "1.8", ".", "4", ",", " ", "using", " ", "settings", " ", "'", "learning", "_", "log", ".", "settings", "'", "\n", "❸", " ", "Starting", " ", "development", " ", "server", " ", "at", " ", "http", ":", "/", "/", "127.0", ".", "0.1", ":", "8000", "/", "\n", " ", " ", "Quit", " ", "the", " ", "server", " ", "with", " ", "CONTROL", "-", "C", "."], ["Quit", " ", "the", " ", "server", " ", "with", " ", "CONTROL", "-", "C", ".", "\n", "Django", "启动", "一个", "服务器", "，", "让", "你", "能够", "查看", "系统", "中", "的", "项目", "，", "了解", "它们", "的", "工作", "情况", "。", "当", "你", "在", "浏览器", "中", "输入", "URL", "以", "请求", "网页", "时", "，", "该", "Django", "服务器", "将", "进行", "响应", "：", "生成", "合适", "的", "网页", "，", "并", "将", "其", "发送", "\n", "给", "浏览器", "。", "\n", "在", "❶", "处", "，", "Django", "通过", "检查", "确认", "正确", "地", "创建", "了", "项目", "；", "在", "❷", "处", "，", "它", "指出", "了", "使用", "的", "Django", "版本", "以及", "当前", "使用", "的", "设置", "文件", "的", "名称", "；", "在", "❸", "处", "，", "它", "指出", "了", "项目", "的", "URL", "。", "URL", " ", "http", ":", "/", "/", "127.0", ".", "0.1", ":", "8000", "/", "\n", "表明", "项目", "将", "在", "你", "的", "计算机", "（", "即", "localhost", "）", "的", "端口", "8000", "上", "侦听", "请求", "。", "localhost", "是", "一种", "只", "处理", "当前", "系统", "发出", "的", "请求", "，", "而", "不", "允许", "其他", "任何人", "查看", "你", "正在", "开发", "的", "网页", "的", "服务器", "。", "\n", "现在", "打开", "一款", "Web", "浏览器", "，", "并", "输入", "URL", "：", "http", ":", "/", "/", "localhost", ":", "8000", "/", "；", "如果", "这", "不管", "用", "，", "请", "输入", "http", ":", "/", "/", "127.0", ".", "0.1", ":", "8000", "/", "。", "你", "将", "看到", "类似", "于图", "18", "-", "1", "所示", "的", "页面", "，", "这个", "页面", "是", "Django", "创建", "的", "，", "让", "你", "知道", "\n", "到", "目前为止", "一切正常", "。", "现在", "暂时", "不要", "关闭", "这个", "服务器", "。", "若", "要", "关闭", "这个", "服务器", "，", "按", "Ctrl", " ", "+", " ", "C", "即可", "。", "\n", "图", "\n", "图", "18", "-", "1", "　", "到", "目前为止", "一切正常", "\n", "　", "到", "目前为止", "一切正常", "\n", "注意"], ["图", "\n", "图", "18", "-", "1", "　", "到", "目前为止", "一切正常", "\n", "　", "到", "目前为止", "一切正常", "\n", "注意", "\n", "注意", " ", "　", "如果", "出现", "错误", "消息", "“", "That", " ", "port", " ", "is", " ", "already", " ", "in", " ", "use", "”", "（", "指定", "端口", "已", "被", "占用", "）", "，", "请", "执行命令", "python", " ", "manage", ".", "py", " ", "runserver", " ", "8001", " ", "，", "让", "Diango", "使用", "另", "一个", "端口", "；", "如果", "\n", "这个", "端口", "也", "不可", "用", "，", "请", "不断", "执行", "上述", "命令", "，", "并", "逐渐", "增大", "其中", "的", "端口号", "，", "直到", "找到", "可用", "的", "端口", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "1", " ", "新", "项目", "\n", "新", "项目", " ", "：", "为", "更", "深入", "地", "了解", "Django", "做", "了", "些", "什么", "，", "可", "创建", "两个", "空", "项目", "，", "看看", "Django", "创建", "了", "什么", "。", "新建", "一个", "文件夹", "，", "并", "给", "它", "指定", "简单", "的", "名称", "，", "如", "InstaBook", "或", "\n", "FaceGram", "（", "不要", "在", "目录", "learning", "_", "log", "中", "新建", "该", "文件夹", "）", "，", "在", "终端", "中", "切换", "到", "该", "文件夹", "，", "并", "创建", "一个", "虚拟环境", "。", "在", "这个", "虚拟环境", "中", "安装", "Django", "，", "并", "执行命令", "django", "-", "\n", "admin", ".", "py", " ", "startproject", " ", "instabook", ".", " ", "（", "千万", "不要", "忘", "了", "这个", "命令", "末尾", "的", "句点", "）", "。", "\n", "看看", "这个", "命令", "创建", "了", "哪些", "文件", "和", "文件夹", "，", "并", "与", "项目", "“", "学习", "笔记", "”", "包含", "的", "文件", "和", "文件夹", "进行", "比较", "。", "这样", "多", "做", "几次", "，", "直到", "对", "Django", "新建", "项目", "时", "创建", "的", "东西", "了如指掌", "。", "然后", "，", "将"], ["项目", "目录", "删除", "—", "—", "如果", "你", "想", "这样", "做", "的话", "。", "\n", "18.2", "　", "创建", "应用程序", "\n", "　", "创建", "应用程序", "\n", "Django", "项目", "\n", "项目", " ", "由", "一系列", "应用程序", "组成", "，", "它们", "协同工作", "，", "让", "项目", "成为", "一个", "整体", "。", "我们", "暂时", "只", "创建", "一个", "应用程序", "，", "它", "将", "完成", "项目", "的", "大部分", "工作", "。", "在", "第", "19", "章", "，", "我们", "将", "再", "添加", "一个", "管理", "用户", "\n", "账户", "的", "应用程序", "。", "\n", "当前", "，", "在", "前面", "打开", "的", "终端", "窗口", "中", "应该", "还", "运行", "着", "runserver", " ", "。", "请", "再", "打开", "一个", "终端", "窗口", "（", "或", "标签", "页", "）", "，", "并", "切换", "到", "manage", ".", "py", "所在", "的", "目录", "。", "激活", "该", "虚拟环境", "，", "再", "执行命令", "startapp", " ", "：", "\n", " ", " ", "learning", "_", "log", "$", " ", "source", " ", "ll", "_", "env", "/", "bin", "/", "activate", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "startapp", " ", "learning", "_", "logs", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", "\n", " ", " ", "db", ".", "sqlite3", " ", " ", "learning", "_", "log", " ", " ", "learning", "_", "logs", " ", " ", "ll", "_", "env", " ", " ", "manage", ".", "py", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", " ", "learning", "_", "logs", "/"], ["❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", " ", "learning", "_", "logs", "/", "\n", " ", " ", "admin", ".", "py", " ", " ", "__", "init", "__.", "py", " ", " ", "migrations", " ", " ", "models", ".", "py", " ", " ", "tests", ".", "py", " ", " ", "views", ".", "py", "\n", "命令", "startapp", " ", "appname", " ", "让", "Django", "建立", "创建", "应用程序", "所", "需", "的", "基础设施", "。", "如果", "现在", "查看", "项目", "目录", "，", "将", "看到", "其中", "新增", "了", "一个", "文件夹", "learning", "_", "logs", "（", "见", "❶", "）", "。", "打开", "这个", "文件夹", "，", "看看", "\n", "Django", "都", "创建", "了", "什么", "（", "见", "❷", "）", "。", "其中", "最", "重要", "的", "文件", "是", "models", ".", "py", "、", "admin", ".", "py", "和", "views", ".", "py", "。", "我们", "将", "使用", "models", ".", "py", "来", "定义", "我们", "要", "在", "应用程序", "中", "管理", "的", "数据", "。", "admin", ".", "py", "和", "views", ".", "py", "将", "在", "稍后", "介", "\n", "绍", "。", "\n", "18.2", ".", "1", "　", "定义", "模型", "\n", "　", "定义", "模型"], ["我们", "来", "想想", "涉及", "的", "数据", "。", "每位", "用户", "都", "需要", "在", "学习", "笔记", "中", "创建", "很多", "主题", "。", "用户", "输入", "的", "每个", "条目", "都", "与", "特定", "主题", "相关联", "，", "这些", "条目", "将", "以", "文本", "的", "方式", "显示", "。", "我们", "还", "需要", "存储", "每个", "条", "目的", "时", "\n", "间", "戳", "，", "以便", "能够", "告诉", "用户", "各个", "条目", "都", "是", "什么", "时候", "创建", "的", "。", "\n", "打开", "文件", "models", ".", "py", "，", "看看", "它", "当前", "包含", "哪些", "内容", "：", "\n", "models", ".", "py", "\n", "from", " ", "django", ".", "db", " ", "import", " ", "models", "\n", "#", " ", "在", "这里", "创建", "模型", "\n", "这为", "我们", "导入", "了", "模块", "models", "，", "还", "让", "我们", "创建", "自己", "的", "模型", "。", "模型", "告诉", "Django", "如何", "处理", "应用程序", "中", "存储", "的", "数据", "。", "在", "代码", "层面", "，", "模型", "就是", "一个", "类", "，", "就", "像", "前面", "讨论", "的", "每个", "类", "一样", "，", "包含", "属性", "\n", "和", "方法", "。", "下面", "是", "表示", "用户", "将要", "存储", "的", "主题", "的", "模型", "：", "\n", " ", " ", "from", " ", "django", ".", "db", " ", "import", " ", "models", "\n", " ", " ", "class", " ", "Topic", "(", "models", ".", "Model", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "用户", "学习", "的", "主题", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "text", " ", "=", " ", "models", ".", "CharField", "(", "max", "_", "length", "=", "200", ")", "\n", "❷", " ", " ", " ", " ", " ", "date", "_", "added", " ", "=", " ", "models", ".", "DateTimeField", "(", "auto", "_", "now", "_", "add", "=", "True", ")", "\n", "❸", " ", " ", " ", " ", " ", "def", " ", "__", "str", "__", "(", "self", ")", ":"], ["❸", " ", " ", " ", " ", " ", "def", " ", "__", "str", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "模型", "的", "字符串", "表示", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "self", ".", "text", "\n", "我们", "创建", "了", "一个", "名为", "Topic", " ", "的", "类", "，", "它", "继承", "了", "Model", " ", "—", "—", "Django", "中", "一个", "定义", "了", "模型", "基本功能", "的", "类", "。", "Topic", " ", "类", "只有", "两个", "属性", "：", "text", " ", "和", "date", "_", "added", " ", "。", "\n", "属性", "text", "是", "一个", "CharField", "—", "—", "由", "字符", "或", "文本", "组成", "的", "数据", "（", "见", "❶", "）", "。", "需要", "存储", "少量", "的", "文本", "，", "如", "名称", "、", "标题", "或", "城市", "时", "，", "可", "使用", "CharField", " ", "。", "定义", "CharField", " ", "属性", "时", "，", "必须", "告诉", "Django", "\n", "该", "在", "数据库", "中", "预留", "多少", "空间", "。", "在", "这里", "，", "我们", "将", "max", "_", "length", " ", "设置", "成", "了", "200", "（", "即", "200", "个字符", "）", "，", "这", "对", "存储", "大多数", "主题", "名", "来说", "足够", "了", "。", "\n", "属性", "date", "_", "added", " ", "是", "一个", "DateTimeField", " ", "—", "—", "记录", "日期", "和", "时间", "的", "数据", "（", "见", "❷", "）", "。", "我们", "传递", "了", "实参", "auto", "_", "add", "_", "now", "=", "True", " ", "，", "每当", "用户", "创建", "新", "主题", "时", "，", "这", "都", "让", "Django", "将", "这个", "属性", "\n", "自动", "设置", "成", "当前", "日期", "和", "时间", "。", "\n", "注意"], ["自动", "设置", "成", "当前", "日期", "和", "时间", "。", "\n", "注意", "\n", "注意", " ", "　", "要", "获悉", "可", "在", "模型", "中", "使用", "的", "各种", "字", "段", "，", "请参阅", "Django", " ", "Model", " ", "Field", " ", "Reference", "（", "Django", "模型", "字", "段", "参考", "）", "，", "其", "网址", "为", "https", ":", "/", "/", "docs", ".", "djangoproject", ".", "com", "/", "en", "/", "1.8", "/", "ref", "/", "models", "/", "fields", "/", " ", "。", "\n", "就", "当前", "而言", "，", "你", "无需", "全面", "了解", "其中", "的", "所有", "内容", "，", "但", "自己", "开发", "应用程序", "时", "，", "这些", "内容", "会", "提供", "极大", "的", "帮助", "。", "\n", "我们", "需要", "告诉", "Django", "，", "默认", "应", "使用", "哪个", "属性", "来", "显示", "有关", "主题", "的", "信息", "。", "Django", "调用", "方法", "__", "str", "__", "(", ")", " ", "来", "显示", "模型", "的", "简单", "表示", "。", "在", "这里", "，", "我们", "编写", "了", "方法", "__", "str", "__", "(", ")", " ", "，", "它", "返回", "存储", "在", "\n", "属性", "text", " ", "中", "的", "字符串", "（", "见", "❸", "）", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "应", "调用", "方法", "__", "unicode", "__", "(", ")", " ", "，", "而", "不是", "__", "str", "__", "(", ")", " ", "，", "但", "其中", "的", "代码", "相同", "。", "\n", "18.2", ".", "2", "　", "激活", "模型", "\n", "　", "激活", "模型", "\n", "要", "使用", "模型", "，", "必须", "让", "Django", "将", "应用程序", "包含", "到", "项目", "中", "。", "为此", "，", "打开", "settings", ".", "py", "（", "它", "位于", "目录", "learning", "_", "log", "/", "learning", "_", "log", "中", "）", "，", "你", "将", "看到", "一个", "这样", "的", "片段", "，", "即", "告诉", "Django", "哪些", "应用", "程序安装", "\n", "在", "项目", "中", "："], ["在", "项目", "中", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "INSTALLED", "_", "APPS", " ", "=", " ", "(", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "admin", "'", ",", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "auth", "'", ",", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "contenttypes", "'", ",", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "sessions", "'", ",", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "messages", "'", ",", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "staticfiles", "'", ",", "\n", ")", "\n", "--", "snip", "--", "\n", "这是", "一个", "元组", "，", "告诉", "Django", "项目", "是", "由", "哪些", "应用程序", "组成", "的", "。", "请", "将", "INSTALLED", "_", "APPS", " ", "修改", "成", "下面", "这样", "，", "将", "前面", "的", "应用程序", "添加", "到", "这个", "元组", "中", "：", "\n", "--", "snip", "--", "\n", "INSTALLED", "_", "APPS", " ", "=", " ", "(", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "staticfiles", "'", ",", "\n", " ", " ", " ", " ", "#", " ", "我", "的", "应用程序", "\n", " ", " ", " ", " ", "'", "learning", "_", "logs", "'", ",", "\n", ")", "\n", "--", "snip", "--"], ["#", " ", "我", "的", "应用程序", "\n", " ", " ", " ", " ", "'", "learning", "_", "logs", "'", ",", "\n", ")", "\n", "--", "snip", "--", "\n", "通过", "将", "应用程序", "编组", "，", "在", "项目", "不断", "增大", "，", "包含", "更", "多", "的", "应用程序", "时", "，", "有助于", "对", "应用程序", "进行", "跟踪", "。", "这里", "新建", "了", "一个", "名为", "My", " ", "apps", "的", "片段", "，", "当前", "它", "只", "包含", "应用程序", "learning", "_", "logs", "。", "\n", "接下来", "，", "需要", "让", "Django", "修改", "数据库", "，", "使", "其", "能够", "存储", "与", "模型", "Topic", " ", "相关", "的", "信息", "。", "为此", "，", "在", "终端", "窗口", "中", "执行", "下面", "的", "命令", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "makemigrations", " ", "learning", "_", "logs", "\n", "Migrations", " ", "for", " ", "'", "learning", "_", "logs", "'", ":", "\n", " ", " ", "0001", "_", "initial", ".", "py", ":", "\n", " ", " ", " ", " ", "-", " ", "Create", " ", "model", " ", "Topic", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "命令", "makemigrations", " ", "让", "Django", "确定", "该", "如何", "修改", "数据库", "，", "使", "其", "能够", "存储", "与", "我们", "定义", "的", "新", "模型", "相关联", "的", "数据", "。", "输出", "表明", "Django", "创建", "了", "一个", "名为", "0001", "_", "initial", ".", "py", "的", "迁移", "文件", "，", "这个", "文件", "\n", "将", "在", "数据库", "中为", "模型", "Topic", " ", "创建", "一个", "表", "。", "\n", "下面", "来", "应用", "这种", "迁移", "，", "让", "Django", "替", "我们", "修改", "数据库", "："], ["将", "在", "数据库", "中为", "模型", "Topic", " ", "创建", "一个", "表", "。", "\n", "下面", "来", "应用", "这种", "迁移", "，", "让", "Django", "替", "我们", "修改", "数据库", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "migrate", "\n", " ", " ", "--", "snip", "--"], ["Running", " ", "migrations", ":", "\n", " ", " ", " ", " ", "Rendering", " ", "model", " ", "states", "...", " ", "DONE", "\n", "❶", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0001", "_", "initial", "...", " ", "OK", "\n", "这个", "命令", "的", "大部分", "输出", "都", "与", "我们", "首次", "执行命令", "migrate", "的", "输出", "相同", "。", "我们", "需要", "检查", "的", "是", "❶", "处", "的", "输出", "行", "，", "在", "这里", "，", "Django", "确认", "为", "learning", "_", "logs", " ", "应用", "迁移", "时", "一切正常", "（", "OK", " ", "）", "。", "\n", "每当", "需要", "修改", "“", "学习", "笔记", "”", "管理", "的", "数据", "时", "，", "都", "采取", "如下", "三个", "步骤", "：", "修改", "models", ".", "py", "；", "对", "learning", "_", "logs", " ", "调用", "makemigrations", " ", "；", "让", "Django", "迁移", "项目", "。", "\n", "18.2", ".", "3", "　", "\n", "　", "Django", "管理", "网站", "\n", "管理", "网站", "\n", "为", "应用", "程序定义", "模型", "时", "，", "Django", "提供", "的", "管理", "网站", "（", "admin", " ", "site", "）", "让", "你", "能够", "轻松", "地", "处理", "模型", "。", "网站", "的", "管理员", "可", "使用", "管理", "网站", "，", "但", "普通用户", "不能", "使用", "。", "在", "本节", "中", "，", "我们", "将", "建立", "管理", "网站", "，", "\n", "并", "通过", "它", "使用", "模型", "Topic", " ", "来", "添加", "一些", "主题", "。", "\n", "1", ".", " ", "创建", "超级", "用户", "\n", "创建", "超级", "用户"], ["并", "通过", "它", "使用", "模型", "Topic", " ", "来", "添加", "一些", "主题", "。", "\n", "1", ".", " ", "创建", "超级", "用户", "\n", "创建", "超级", "用户", "\n", "Django", "允许", "你", "创建", "具备", "所有", "权限", "的", "用户", "—", "—", "超级", "用户", "。", "权限", "决定", "了", "用户", "可", "执行", "的", "操作", "。", "最", "严格", "的", "权限", "设置", "只", "允许", "用户", "阅读", "网站", "的", "公开", "信息", "；", "注册", "了", "的", "用户", "通常", "可", "阅读", "自己", "的", "私有", "\n", "数据", "，", "还", "可", "查看", "一些", "只有", "会员", "才能", "查看", "的", "信息", "。", "为", "有效", "地", "管理", "Web", "应用程序", "，", "网站", "所有者", "通常", "需要", "访问", "网站", "存储", "的", "所有", "信息", "。", "优秀", "的", "管理员", "会", "小心", "对待", "用户", "的", "敏感", "信息", "，", "因为", "用", "\n", "户", "对", "其", "访问", "的", "应用程序", "有", "极大", "的", "信任", "。", "\n", "为", "在", "Django", "中", "创建", "超级", "用户", "，", "请", "执行", "下面", "的", "命令", "并", "按", "提示", "做", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "createsuperuser", "\n", "❶", " ", "Username", " ", "(", "leave", " ", "blank", " ", "to", " ", "use", " ", "'", "ehmatthes", "'", ")", ":", " ", "ll", "_", "admin", "\n", "❷", " ", "Email", " ", "address", ":", "\n", "❸", " ", "Password", ":", "\n", " ", " ", "Password", " ", "(", "again", ")", ":", "\n", " ", " ", "Superuser", " ", "created", " ", "successfully", ".", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$"], ["(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "你", "执行命令", "createsuperuser", " ", "时", "，", "Django", "提示", "你", "输入", "超级", "用户", "的", "用户名", "（", "见", "❶", "）", "。", "这里", "我们", "输入", "的", "是", "ll", "_", "admin", "，", "但", "你", "可以", "输入", "任何", "用户名", "，", "比如", "电子邮件", "地址", "，", "也", "可", "让", "这个", "字", "段", "\n", "为空", "（", "见", "❷", "）", "。", "你", "需要", "输入", "密码", "两次", "（", "见", "❸", "）", "。", "\n", "注意", "\n", "注意", " ", "　", "可能", "会", "对", "网站", "管理员", "隐藏", "有些", "敏感", "信息", "。", "例如", "，", "Django", "并", "不", "存储", "你", "输入", "的", "密码", "，", "而", "存储", "从", "该", "密码", "派生", "出来", "的", "一个", "字符串", "—", "—", "散列值", "。", "每当", "你", "输入", "密码", "\n", "时", "，", "Django", "都", "计算", "其散", "列值", "，", "并", "将", "结果", "与", "存储", "的", "散列值", "进行", "比较", "。", "如果", "这", "两个", "散列值", "相同", "，", "就", "通过", "了", "身份验证", "。", "通过", "存储", "散列值", "，", "即便", "黑客", "获得", "了", "网站", "数据库", "的", "访问", "\n", "权", "，", "也", "只能", "获取", "其中", "存储", "的", "散列值", "，", "而", "无法", "获得", "密码", "。", "在", "网站", "配置", "正确", "的", "情况", "下", "，", "几乎", "无法", "根据", "散列值", "推导", "出", "原始", "密码", "。", "\n", "2", ".", " ", "向", "管理", "网站", "注册", "模型", "\n", "向", "管理", "网站", "注册", "模型", "\n", "Django", "自动", "在", "管理", "网站", "中", "添加", "了", "一些", "模型", "，", "如", "User", " ", "和", "Group", " ", "，", "但", "对于", "我们", "创建", "的", "模型", "，", "必须", "手工", "进行", "注册", "。", "\n", "我们", "创建", "应用程序", "learning", "_", "logs", " ", "时", "，", "Django", "在", "models", ".", "py", "所在", "的", "目录", "中", "创建", "了", "一个", "名为", "admin", ".", "py", "的", "文件", "：", "\n", "admin", ".", "py"], ["admin", ".", "py", "\n", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", "#", " ", "在", "这里", "注册", "你", "的", "模型", "\n", "为", "向", "管理", "网站", "注册", "Topic", " ", "，", "请", "输入", "下面", "的", "代码", "：", "\n", " ", " ", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", "❶", " ", "from", " ", "learning", "_", "logs", ".", "models", " ", "import", " ", "Topic", "\n", "❷", " ", "admin", ".", "site", ".", "register", "(", "Topic", ")", "\n", "这些", "代码", "导入", "我们", "要", "注册", "的", "模型", "Topic", " ", "（", "见", "❶", "）", "，", "再", "使用", "admin", ".", "site", ".", "register", "(", ")", " ", "（", "见", "❷", "）", "让", "Django", "通过", "管理", "网站", "管理", "我们", "的", "模型", "。", "\n", "现在", "，", "使用", "超级", "用户", "账户", "访问", "管理", "网站", "：", "访问", "http", ":", "/", "/", "localhost", ":", "8000", "/", "admin", "/", " ", "，", "并", "输入", "你", "刚", "创建", "的", "超级", "用户", "的", "用户名", "和", "密码", "，", "你", "将", "看到", "类似", "于图", "18", "-", "2", "所示", "的", "屏幕", "。", "这个", "网页", "让", "你", "能够", "添加", "\n", "和", "修改", "用户", "和", "用户组", "，", "还", "可以", "管理", "与", "刚才", "定义", "的", "模型", "Topic", " ", "相关", "的", "数据", "。", "\n", "图", "\n", "图", "18", "-", "2", "　", "包含", "模型", "\n", "　", "包含", "模型", "Topic", " ", "的", "管理", "网站", "\n", "的", "管理", "网站", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "在", "浏览器", "中", "看到", "一条", "消息", "，", "指出", "访问", "的", "网页", "不可", "用", "，", "请", "确认", "你", "在", "终端", "窗口", "中", "运行", "着", "Django", "服务器", "。", "如果", "没有", "，", "请", "激活", "虚拟环境", "，", "并", "执行命令", "python"], ["manage", ".", "py", " ", "runserver", " ", "。"], ["3", ".", " ", "添加", "主题", "\n", "添加", "主题", "\n", "向", "管理", "网站", "注册", "Topic", " ", "后", "，", "我们", "来", "添加", "第一个", "主题", "。", "为此", "，", "单击", "Topics", "进入", "主题", "网页", "，", "它", "几乎", "是", "空", "的", "，", "这", "是因为", "我们", "还", "没有", "添加", "任何", "主题", "。", "单击", "Add", "，", "你", "将", "看到", "一个", "用于", "添加", "新主", "\n", "题", "的", "表单", "。", "在", "第一个", "方框", "中", "输入", "Chess", " ", "，", "再", "单击", "Save", "，", "这", "将", "返回", "到", "主题", "管理", "页面", "，", "其中", "包含", "刚", "创建", "的", "主题", "。", "\n", "下面", "再", "创建", "一个", "主题", "，", "以便", "有", "更", "多", "的", "数据", "可供使用", "。", "再次", "单击", "Add", "，", "并", "创建", "另", "一个", "主题", "Rock", " ", "Climbing", " ", "。", "当", "你", "单击", "Save", "时", "，", "将", "重新", "回到", "主题", "管理", "页面", "，", "其中", "包含", "主题", "Chess", "和", "\n", "Rock", " ", "Climbing", "。", "\n", "18.2", ".", "4", "　", "定义", "模型", "\n", "　", "定义", "模型", "Entry", "\n", "要", "记录", "学到", "的", "国际象棋", "和", "攀岩", "知识", "，", "需要", "为", "用户", "可", "在", "学习", "笔记", "中", "添加", "的", "条目", "定义", "模型", "。", "每个", "条目", "都", "与", "特定", "主题", "相关联", "，", "这种", "关系", "被", "称为", "多", "对", "一", "关系", "，", "即", "多个", "条目", "可", "关联", "到", "同一个", "\n", "主题", "。", "\n", "下面", "是", "模型", "Entry", " ", "的", "代码", "：", "\n", "models", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "db", " ", "import", " ", "models", "\n", " ", " ", "class", " ", "Topic", "(", "models", ".", "Model", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❶", " ", "class", " ", "Entry", "(", "models", ".", "Model", ")", ":"], ["--", "snip", "--", "\n", "❶", " ", "class", " ", "Entry", "(", "models", ".", "Model", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "学到", "的", "有关", "某个", "主题", "的", "具体", "知识", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "topic", " ", "=", " ", "models", ".", "ForeignKey", "(", "Topic", ")", "\n", "❸", " ", " ", " ", " ", " ", "text", " ", "=", " ", "models", ".", "TextField", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "date", "_", "added", " ", "=", " ", "models", ".", "DateTimeField", "(", "auto", "_", "now", "_", "add", "=", "True", ")", "\n", "❹", " ", " ", " ", " ", " ", "class", " ", "Meta", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "verbose", "_", "name", "_", "plural", " ", "=", " ", "'", "entries", "'", "\n", " ", " ", " ", " ", " ", " ", "def", " ", "__", "str", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "模型", "的", "字符串", "表示", "\"", "\"", "\"", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "self", ".", "text", "[", ":", "50", "]", " ", "+", " ", "\"", "...", "\"", "\n", "像", "Topic", " ", "一样", "，", "Entry", " ", "也", "继承", "了", "Django", "基类", "Model", " ", "（", "见", "❶", "）", "。", "第一个", "属性", "topic", " ", "是", "一个", "ForeignKey", " ", "实例", "（", "见", "❷", "）", "。", "外键", "是", "一个", "数据库", "术语", "，", "它", "引用", "了", "数据库", "中", "的", "另", "一条", "记"], ["录", "；", "这些", "代码", "将", "每个", "条目", "关联", "到", "特定", "的", "主题", "。", "每个", "主题", "创建", "时", "，", "都", "给", "它", "分配", "了", "一个", "键", "（", "或", "ID", "）", "。", "需要", "在", "两项", "数据", "之间", "建立联系", "时", "，", "Django", "使用", "与", "每项", "信息", "相关联", "的", "键", "。", "稍后", "我们", "\n", "将", "根据", "这些", "联系", "获取", "与", "特定", "主题", "相关联", "的", "所有", "条目", "。", "\n", "接下来", "是", "属性", "text", " ", "，", "它", "是", "一个", "TextField", " ", "实例", "（", "见", "❸", "）", "。", "这种", "字段", "不", "需要", "长度", "限制", "，", "因为", "我们", "不想", "限制", "条", "目的", "长度", "。", "属性", "date", "_", "added", " ", "让", "我们", "能够", "按", "创建", "顺序", "呈现", "条目", "，", "并", "\n", "在", "每个", "条目", "旁边", "放置", "时间", "戳", "。", "\n", "在", "❹", "处", "，", "我们", "在", "Entry", " ", "类中", "嵌套", "了", "Meta", " ", "类", "。", "Meta", " ", "存储", "用于", "管理", "模型", "的", "额外", "信息", "，", "在", "这里", "，", "它", "让", "我们", "能够", "设置", "一个", "特殊", "属性", "，", "让", "Django", "在", "需要", "时", "使用", "Entries", " ", "来", "表示", "多个", "条", "\n", "目", "。", "如果", "没有", "这个", "类", "，", " ", "Django", "将", "使用", "Entrys", "来", "表示", "多个", "条目", "。", "最后", "，", "方法", "__", "str", "__", "(", ")", " ", "告诉", "Django", "，", "呈现", "条目", "时应", "显示", "哪些", "信息", "。", "由于", "条目", "包含", "的", "文本", "可能", "很长", "，", "我们", "让", "Django", "只", "\n", "显示", "text", " ", "的", "前", "50", "个字符", "（", "见", "❺", "）", "。", "我们", "还", "添加", "了", "一个", "省略号", "，", "指出", "显示", "的", "并非", "整个", "条目", "。", "\n", "18.2", ".", "5", "　", "迁移", "模型", "\n", "　", "迁移", "模型", "Entry"], ["18.2", ".", "5", "　", "迁移", "模型", "\n", "　", "迁移", "模型", "Entry", "\n", "由于", "我们", "添加", "了", "一个", "新", "模型", "，", "因此", "需要", "再次", "迁移", "数据库", "。", "你", "将", "慢慢", "地", "对", "这个", "过程", "了如指掌", "：", "修改", "models", ".", "py", "，", "执行命令", "python", " ", "manage", ".", "py", " ", "makemigrations", " ", "app", "_", "name", " ", "，", "\n", "再", "执行命令", "python", " ", "manage", ".", "py", " ", "migrate", " ", "。", "\n", "下面", "来", "迁移", "数据库", "并", "查看", "输出", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "makemigrations", " ", "learning", "_", "logs", "\n", " ", " ", "Migrations", " ", "for", " ", "'", "learning", "_", "logs", "'", ":", "\n", "❶", " ", " ", " ", "0002", "_", "entry", ".", "py", ":", "\n", " ", " ", " ", " ", " ", " ", "-", " ", "Create", " ", "model", " ", "Entry", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "migrate", "\n", " ", " ", "Operations", " ", "to", " ", "perform", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0002", "_", "entry", "...", " ", "OK"], ["❷", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0002", "_", "entry", "...", " ", "OK", "\n", "生成", "了", "一个", "新", "的", "迁移", "文件", "—", "—", "0002", "_", "entry", ".", "py", "，", "它", "告诉", "Django", "如何", "修改", "数据库", "，", "使", "其", "能够", "存储", "与", "模型", "Entry", " ", "相关", "的", "信息", "（", "见", "❶", "）", "。", "执行命令", "migrate", " ", "，", "我们", "发现", "Django", "应用", "了", "这种", "\n", "迁移", "且", "一切顺利", "（", "见", "❷", "）", "。", "\n", "18.2", ".", "6", "　", "向", "管理", "网站", "注册", "\n", "　", "向", "管理", "网站", "注册", "Entry", "\n", "我们", "还", "需要", "注册", "模型", "Entry", " ", "。", "为此", "，", "需要", "将", "admin", ".", "py", "修改", "成", "类似", "于", "下面", "这样", "：", "\n", "admin", ".", "py", "\n", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", "from", " ", "learning", "_", "logs", ".", "models", " ", "import", " ", "Topic", ",", " ", "Entry", "\n", "admin", ".", "site", ".", "register", "(", "Topic", ")", "\n", "admin", ".", "site", ".", "register", "(", "Entry", ")", "\n", "返回", "到", "http", ":", "/", "/", "localhost", "/", "admin", "/", " ", "，", "你", "将", "看到", "learning", "_", "logs", "下列", "出", "了", "Entries", "。", "单击", "Entries", "的", "Add", "链接", "，", "或者", "单击", "Entries", "再", "选择", "Add", " ", "entry", "。", "你", "将", "看到", "一个", "下", "拉", "列表", "，", "让", "你", "能够", "选择", "要", "为", "哪个", "主题", "创"], ["建", "条目", "，", "还有", "一个", "用于", "输入条", "目的", "文本框", "。", "从", "下", "拉", "列表", "中", "选择", "Chess", "，", "并", "添加", "一个", "条目", "。", "下面", "是", "我", "添加", "的", "第一个", "条目", "。", "\n", "The", " ", "opening", " ", "is", " ", "the", " ", "first", " ", "part", " ", "of", " ", "the", " ", "game", ",", " ", "roughly", " ", "the", " ", "first", " ", "ten", " ", "moves", " ", "or", " ", "so", ".", " ", "In", " ", "the", " ", "opening", ",", " ", "it", "'", "s", " ", "a", " ", "good", " ", "idea", " ", "to", " ", "do", " ", "three", " ", "things", "—", " ", "bring", " ", "out", " ", "your", " ", "bishops", " ", "and", " ", "knights", ",", " ", "try", " ", "to", " ", "control", " ", "the", " ", "center", " ", "of", " ", "the", "\n", "board", ",", " ", "and", " ", "castle", " ", "your", " ", "king", ".", "（", "国际象棋", "的", "第一个", "阶段", "是", "开局", "，", "大致", "是", "前", "10", "步", "左右", "。", "在", "开局", "阶段", "，", "最好", "做", "三件", "事情", "：", "将象", "和", "马调", "出来", "；", "努力", "控制", "棋盘", "的", "中间", "区域", "；", "用车", "将", "王", "\n", "护住", "。", "）"], ["护住", "。", "）", "\n", "Of", " ", "course", ",", " ", "these", " ", "are", " ", "just", " ", "guidelines", ".", " ", "It", " ", "will", " ", "be", " ", "important", " ", "to", " ", "learn", " ", "when", " ", "to", " ", "follow", " ", "these", " ", "guidelines", " ", "and", " ", "when", " ", "to", " ", "disregard", " ", "these", " ", "suggestions", ".", "（", "当然", "，", "这些", "只是", "指导", "原则", "。", "学习", "什么", "情况", "下", "遵", "\n", "守", "这些", "原则", "、", "什么", "情况", "下", "不用", "遵守", "很", "重要", "。", "）", "\n", "当", "你", "单击", "Save", "时", "，", "将", "返回", "到", "主", "条目", "管理", "页面", "。", "在", "这里", "，", "你", "将", "发现", "使用", "text", "[", ":", "50", "]", " ", "作为", "条", "目的", "字符串", "表示", "的", "好处", "：", "管理", "界面", "中", "，", "只", "显示", "了", "条", "目的", "开头", "部分", "而", "不是", "其", "所有", "文本", "，", "这", "\n", "使得", "管理", "多个", "条目", "容易", "得", "多", "。"], ["再", "来", "创建", "一个", "国际象棋", "条目", "，", "并", "创建", "一个", "攀岩", "条目", "，", "以", "提供", "一些", "初始", "数据", "。", "下面", "是", "第二个", "国际象棋", "条目", "。", "\n", "In", " ", "the", " ", "opening", " ", "phase", " ", "of", " ", "the", " ", "game", ",", " ", "it", "'", "s", " ", "important", " ", "to", " ", "bring", " ", "out", " ", "your", " ", "bishops", " ", "and", " ", "knights", ".", " ", "These", " ", "pieces", " ", "are", " ", "powerful", " ", "and", " ", "maneuverable", " ", "enough", " ", "to", " ", "play", " ", "a", " ", "significant", " ", "role", " ", "in", " ", "the", " ", "beginning", " ", "moves", " ", "of", " ", "a", "\n", "game", ".", "（", "在", "国际象棋", "的", "开局", "阶段", "，", "将象", "和", "马调", "出来", "很", "重要", "。", "这些", "棋子", "威力", "大", "，", "机动性", "强", "，", "在", "开局", "阶段", "扮演着", "重要", "角色", "。", "）", "\n", "下面", "是", "第一个", "攀岩", "条目", "：", "\n", "One", " ", "of", " ", "the", " ", "most", " ", "important", " ", "concepts", " ", "in", " ", "climbing", " ", "is", " ", "to", " ", "keep", " ", "your", " ", "weight", " ", "on", " ", "your", " ", "feet", " ", "as", " ", "much", " ", "as", " ", "possible", ".", " ", "There", "'", "s", " ", "a", " ", "myth", " ", "that", " ", "climbers", " ", "can", " ", "hang", " ", "all", " ", "day", " ", "on", " ", "their", " ", "arms", ".", " ", "In", " ", "reality", ",", " ", "good", " ", "climbers", " ", "have"], ["practiced", " ", "specific", " ", "ways", " ", "of", " ", "keeping", " ", "their", " ", "weight", " ", "over", " ", "their", " ", "feet", " ", "whenever", " ", "possible", ".", "（", "最", "重要", "的", "攀岩", "概念", "之一", "是", "尽可能", "让", "双脚", "承受", "体重", "。", "有", "谬误", "认为", "攀岩", "者", "能", "依靠", "手臂", "的", "力量", "坚持", "一", "\n", "整天", "。", "实际上", "，", "优秀", "的", "攀岩", "者", "都", "经过", "专门", "训练", "，", "能够", "尽可能", "让", "双脚", "承受", "体重", "。", "）", "\n", "继续", "往", "下", "开发", "“", "学习", "笔记", "”", "时", "，", "这", "三个", "条目", "可", "为", "我们", "提供", "使用", "的", "数据", "。", "\n", "18.2", ".", "7", "　", "\n", "　", "Django", " ", "shell", "\n", "输入", "一些", "数据", "后", "，", "就", "可", "通过", "交互式", "终端", "会话", "以", "编程", "方式", "查看", "这些", "数据", "了", "。", "这种", "交互式", "环境", "称为", "Django", " ", "shell", "，", "是", "测试项目", "和", "排除", "其", "故障", "的", "理想", "之地", "。", "下面", "是", "一个", "交互式", "shell", "会话示", "\n", "例", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "shell", "\n", "❶", " ", ">", ">", ">", " ", "from", " ", "learning", "_", "logs", ".", "models", " ", "import", " ", "Topic", "\n", " ", " ", ">", ">", ">", " ", "Topic", ".", "objects", ".", "all", "(", ")", "\n", " ", " ", "[", "<", "Topic", ":", " ", "Chess", ">", ",", " ", "<", "Topic", ":", " ", "Rock", " ", "Climbing", ">", "]"], ["[", "<", "Topic", ":", " ", "Chess", ">", ",", " ", "<", "Topic", ":", " ", "Rock", " ", "Climbing", ">", "]", "\n", "在", "活动", "的", "虚拟环境", "中", "执行", "时", "，", "命令", "python", " ", "manage", ".", "py", " ", "shell", " ", "启动", "一个", "Python", "解释器", "，", "可", "使用", "它", "来", "探索", "存储", "在", "项目", "数据库", "中", "的", "数据", "。", "在", "这里", "，", "我们", "导入", "了", "模", "\n", "块", "learning", "_", "logs", ".", "models", " ", "中", "的", "模型", "Topic", " ", "（", "见", "❶", "）", "，", "然后", "使用", "方法", "Topic", ".", "objects", ".", "all", "(", ")", " ", "来", "获取", "模型", "Topic", " ", "的", "所有", "实例", "；", "它", "返回", "的", "是", "一个", "列表", "，", "称为", "查询", "集", "\n", "（", "queryset", "）", "。", "\n", "我们", "可以", "像", "遍历", "列表", "一样", "遍历", "查询", "集", "。", "下面", "演示", "了", "如何", "查看", "分配", "给", "每个", "主题", "对象", "的", "ID", "：", "\n", ">", ">", ">", " ", "topics", " ", "=", " ", "Topic", ".", "objects", ".", "all", "(", ")", "\n", ">", ">", ">", " ", "for", " ", "topic", " ", "in", " ", "topics", ":", "\n", "...", " ", " ", " ", "print", "(", "topic", ".", "id", ",", " ", "topic", ")", "\n", "...", "\n", "1", " ", "Chess", "\n", "2", " ", "Rock", " ", "Climbing", "\n", "我们", "将", "返回", "的", "查询", "集", "存储", "在", "topics", " ", "中", "，", "然后", "打印", "每个", "主题", "的", "id", " ", "属性", "和", "字符串", "表示", "。", "从", "输出", "可知", "，", "主题", "Chess", "的", "ID", "为", "1", "，", "而", "Rock", " ", "Climbing", "的", "ID", "为", "2", "。"], ["知道", "对象", "的", "ID", "后", "，", "就", "可", "获取", "该", "对象", "并", "查看", "其", "任何", "属性", "。", "下面", "来", "看看", "主题", "Chess", "的", "属性", "text", " ", "和", "date", "_", "added", " ", "的", "值", "：", "\n", ">", ">", ">", " ", "t", " ", "=", " ", "Topic", ".", "objects", ".", "get", "(", "id", "=", "1", ")", "\n", ">", ">", ">", " ", "t", ".", "text", "\n", "'", "Chess", "'", "\n", ">", ">", ">", " ", "t", ".", "date", "_", "added", "\n", "datetime", ".", "datetime", "(", "2015", ",", " ", "5", ",", " ", "28", ",", " ", "4", ",", " ", "39", ",", " ", "11", ",", " ", "989446", ",", " ", "tzinfo", "=", "<", "UTC", ">", ")", "\n", "我们", "还", "可以", "查看", "与", "主题", "相关联", "的", "条目", "。", "前面", "我们", "给", "模型", "Entry", " ", "定义", "了", "属性", "topic", " ", "，", "这是", "一个", "ForeignKey", " ", "，", "将", "条目", "与", "主题", "关联", "起来", "。", "利用", "这种", "关联", "，", "Django", "能够", "获取", "与", "特定", "主", "\n", "题", "相关联", "的", "所有", "条目", "，", "如下", "所示", "：", "\n", "❶", " ", ">", ">", ">", " ", "t", ".", "entry", "_", "set", ".", "all", "(", ")", "\n", " ", " ", "[", "<", "Entry", ":", " ", "The", " ", "opening", " ", "is", " ", "the", " ", "first", " ", "part", " ", "of", " ", "the", " ", "game", ",", " ", "roughly", "...", ">", ",", " ", "<", "Entry", ":", " ", "In", " ", "the", " ", "opening", " ", "phase", " ", "of", " ", "the", " ", "game", ",", " ", "it", "'", "s", " ", "important", " ", "t", "...", ">", "]"], ["为", "通过", "外键", "关系", "获取数据", "，", "可", "使用", "相关", "模型", "的", "小写", "名称", "、", "下划线", "和", "单词", "set", "（", "见", "❶", "）", "。", "例如", "，", "假设", "你", "有", "模型", "Pizza", " ", "和", "Topping", " ", "，", "而", "Topping", "通过", "一个", "外键", "关联", "到", "Pizza", " ", "；", "如果", "你", "有", "\n", "一个", "名为", "my", "_", "pizza", " ", "的", "对象", "，", "表示", "一张", "比萨", "，", "就", "可", "使用", "代码", "my", "_", "pizza", ".", "topping", "_", "set", ".", "all", "(", ")", " ", "来", "获取", "这张", "比萨", "的", "所有", "配料", "。", "\n", "编写", "用户", "可", "请求", "的", "网页", "时", "，", "我们", "将", "使用", "这种", "语法", "。", "确认", "代码", "能", "获取", "所", "需", "的", "数据", "时", "，", "shell", "很", "有", "帮助", "。", "如果", "代码", "在", "shell", "中", "的", "行为", "符合", "预期", "，", "那么", "它们", "在", "项目", "文件", "中", "也", "能", "正确", "地", "工作", "。", "如", "\n", "果", "代码", "引发", "了", "错误", "或", "获取", "的", "数据", "不", "符合", "预期", "，", "那么", "在", "简单", "的", "shell", "环境", "中", "排除故障", "要", "比", "在", "生成", "网页", "的", "文件", "中", "排除故障", "容易", "得", "多", "。", "我们", "不会", "太多地", "使用", "shell", "，", "但应", "继续", "使用", "它", "来", "熟悉", "对", "\n", "存储", "在", "项目", "中", "的", "数据", "进行", "访问", "的", "Django", "语法", "。", "\n", "注意", "\n", "注意", " ", "　", "每次", "修改", "模型", "后", "，", "你", "都", "需要", "重启", "shell", "，", "这样", "才能", "看到", "修改", "的", "效果", "。", "要", "退出", "shell", "会话", "，", "可", "按", "Ctr", " ", "+", " ", "D", "；", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "应", "按", "Ctr", " ", "+", " ", "Z", "，", "再", "按", "回车键", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "2", " ", "简短", "的", "条目"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "2", " ", "简短", "的", "条目", "\n", "简短", "的", "条目", " ", "：", "当前", "，", "Django", "在", "管理", "网站", "或", "shell", "中", "显示", "Entry", " ", "实例", "时", "，", "模型", "Entry", " ", "的", "方法", "__", "str", "__", "(", ")", " ", "都", "在", "它", "的", "末尾", "加上", "省略号", "。", "请", "在", "方法", "__", "str", "__", "(", ")", " ", "中", "添加", "一", "\n", "条", "if", " ", "语句", "，", "以便", "仅", "在", "条目", "长度", "超过", "50", "字符", "时才", "添加", "省略号", "。", "使用", "管理", "网站", "来", "添加", "一个", "长度", "少于", "50", "字符", "的", "条目", "，", "并", "核实", "显示", "它", "时", "没有", "省略号", "。", "\n", "18", "-", "3", " ", "Django", " ", "API", " ", "：", "编写", "访问", "项目", "中", "的", "数据", "的", "代码", "时", "，", "你", "编写", "的", "是", "查询", "。", "请", "浏览", "有关", "如何", "查询", "数据", "的", "文档", "，", "其", "网址", "为", "https", ":", "/", "/", "docs", ".", "djangoproject", ".", "com", "/", "en", "/", "7.8", "/", "topics", "/", "db", "/", "queries", "/", "\n", "。", "其中", "大部分", "内容", "都", "是", "你", "不", "熟悉", "的", "，", "但", "等", "你", "自己", "开发", "项目", "时", "，", "这些", "内容", "会", "很", "有用", "。", "\n", "18", "-", "4", " ", "比萨", "店", "\n", "比萨", "店", " ", "：", "新建", "一个", "名为", "pizzeria", " ", "的", "项目", "，", "并", "在", "其中", "添加", "一个", "名为", "pizzas", " ", "的", "应用程序", "。", "定义", "一个", "名为", "Pizza", " ", "的", "模型", "，", "它", "包含", "字段", "name", " ", "，", "用于", "存储", "比萨", "名"], ["称", "，", "如", "Hawaiian", "和", "Meat", " ", "Lovers", "。", "定义", "一个", "名为", "Topping", " ", "的", "模型", "，", "它", "包含", "字段", "pizza", " ", "和", "name", " ", "，", "其中", "字段", "pizza", " ", "是", "一个", "关联", "到", "Pizza", " ", "的", "外键", "，", "而", "字", "段", "name", " ", "用于", "存储", "配", "\n", "料", "，", "如", "pineapple", " ", "、", "Canadian", " ", "bacon", " ", "和", "sausage", " ", "。", "\n", "向", "管理", "网站", "注册", "这", "两个", "模型", "，", "并", "使用", "管理", "网站", "输入", "一些", "比萨", "名", "和", "配料", "。", "使用", "shell", "来", "查看", "你", "输入", "的", "数据", "。", "\n", "18.3", "　", "创建", "网页", "：", "学习", "笔记", "主页", "\n", "　", "创建", "网页", "：", "学习", "笔记", "主页", "\n", "使用", "Django", "创建", "网页", "的", "过程", "通常", "分", "三个", "阶段", "：", "定义", "URL", "、", "编写", "视图", "和", "编写", "模板", "。", "首先", "，", "你", "必须", "定义", "URL", "模式", "。", "URL", "模式", "描述", "了", "URL", "是", "如何", "设计", "的", "，", "让", "Django", "知道", "如何", "将", "浏览器", "请求", "\n", "与", "网站", "URL", "匹配", "，", "以", "确定", "返回", "哪个", "网页", "。", "\n", "每个", "URL", "都", "被", "映射", "到", "特定", "的", "视图", "\n", "视图", " ", "—", "—", "视图", "函数", "获取", "并", "处理", "网页", "所", "需", "的", "数据", "。", "视图", "函数", "通常", "调用", "一个", "模板", "，", "后者", "生成", "浏览器", "能够", "理解", "的", "网页", "。", "为", "明白", "其中", "的", "工作", "原理", "，", "我们", "来", "创建", "\n", "学习", "笔记", "的", "主页", "。", "我们", "将", "定义", "该", "主页", "的", "URL", "、", "编写", "其", "视图", "函数", "并", "创建", "一个", "简单", "的", "模板", "。"], ["学习", "笔记", "的", "主页", "。", "我们", "将", "定义", "该", "主页", "的", "URL", "、", "编写", "其", "视图", "函数", "并", "创建", "一个", "简单", "的", "模板", "。", "\n", "鉴于", "我们", "只是", "要", "确保", "“", "学习", "笔记", "”", "按", "要求", "的", "那样", "工作", "，", "我们", "将", "暂时", "让", "这个", "网页", "尽可能", "简单", "。", "Web", "应用程序", "能够", "正常", "运行", "后", "，", "设置", "样式", "可使", "其", "更", "有趣", "，", "但", "中", "看", "不中用", "的", "应用程序", "毫无", "意", "\n", "义", "。", "就", "目前", "而言", "，", "主页", "只", "显示", "标题", "和", "简单", "的", "描述", "。"], ["18.3", ".", "1", "　", "映射", "\n", "　", "映射", "URL", "\n", "用户", "通过", "在", "浏览器", "中", "输入", "URL", "以及", "单击", "链接", "来", "请求", "网页", "，", "因此", "我们", "需要", "确定", "项目", "需要", "哪些", "URL", "。", "主页", "的", "URL", "最", "重要", "，", "它", "是", "用户", "用来", "访问", "项目", "的", "基础", "URL", "。", "当前", "，", "基础", "\n", "URL", "（", "http", ":", "/", "/", "localhost", ":", "8000", "/", "）", "返回", "默认", "的", "Django", "网站", "，", "让", "我们", "知道", "正确", "地", "建立", "了", "项目", "。", "我们", "将", "修改", "这", "一点", "，", "将", "这个", "基础", "URL", "映射", "到", "“", "学习", "笔记", "”", "的", "主页", "。", "\n", "打开", "项目", "主", "文件夹", "learning", "_", "log", "中", "的", "文件", "urls", ".", "py", "，", "你", "将", "看到", "如下", "代码", "：", "\n", "urls", ".", "py", "\n", "❶", " ", "from", " ", "django", ".", "conf", ".", "urls", " ", "import", " ", "include", ",", " ", "url", "\n", " ", " ", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", "❷", " ", "urlpatterns", " ", "=", " ", "[", "\n", "❸", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "admin", "/", "'", ",", " ", "include", "(", "admin", ".", "site", ".", "urls", ")", ")", ",", "\n", " ", " ", "]", "\n", "前", "两行", "导入", "了", "为", "项目", "和", "管理", "网站", "管理", "URL", "的", "函数", "和", "模块", "（", "见", "❶", "）", "。", "这个", "文件", "的", "主体", "定义", "了", "变量", "urlpatterns", " ", "（", "见", "❷", "）", "。", "在", "这个", "针对", "整个", "项目", "的", "urls", ".", "py", "文件", "中", "，", "变"], ["量", "urlpatterns", " ", "包含", "项目", "中", "的", "应用程序", "的", "URL", "。", "❸", "处", "的", "代码", "包含", "模块", "admin", ".", "site", ".", "urls", " ", "，", "该", "模块", "定义", "了", "可", "在", "管理", "网站", "中", "请求", "的", "所有", "URL", "。", "\n", "我们", "需要", "包含", "learning", "_", "logs", "的", "URL", "：", "\n", " ", " ", "from", " ", "django", ".", "conf", ".", "urls", " ", "import", " ", "include", ",", " ", "url", "\n", " ", " ", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", " ", " ", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "admin", "/", "'", ",", " ", "include", "(", "admin", ".", "site", ".", "urls", ")", ")", ",", "\n", "❶", " ", " ", " ", " ", " ", "url", "(", "r", "'", "'", ",", " ", "include", "(", "'", "learning", "_", "logs", ".", "urls", "'", ",", " ", "namespace", "=", "'", "learning", "_", "logs", "'", ")", ")", ",", "\n", " ", " ", "]", "\n", "在", "❶", "处", "，", "我们", "添加", "了", "一行", "代码", "来", "包含", "模块", "learning", "_", "logs", ".", "urls", " ", "。", "这", "行", "代码", "包含", "实参", "namespace", " ", "，", "让", "我们", "能够", "将", "learning", "_", "logs", " ", "的", "URL", "同", "项目", "中", "的", "其他", "URL", "区分", "开来", "，", "这", "\n", "在", "项目", "开始", "扩展", "时", "很", "有", "帮助", "。", "\n", "默认", "的", "urls", ".", "py", "包含", "在", "文件夹", "learning", "_", "log", "中", "，", "现在", "我们", "需要", "在", "文件夹", "learning", "_", "logs", "中", "创建", "另", "一个", "urls", ".", "py", "文件", "："], ["urls", ".", "py", "\n", "❶", " ", "\"", "\"", "\"", "定义", "learning", "_", "logs", "的", "URL", "模式", "\"", "\"", "\"", "\n", "❷", " ", "from", " ", "django", ".", "conf", ".", "urls", " ", "import", " ", "url", "\n", "❸", " ", "from", " ", ".", " ", "import", " ", "views", "\n", "❹", " ", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "主页", "\n", "❺", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "$", "'", ",", " ", "views", ".", "index", ",", " ", "name", "=", "'", "index", "'", ")", ",", "\n", " ", " ", "]", "\n", "为", "弄清楚", "当前", "位于", "哪个", "urls", ".", "py", "文件", "中", "，", "我们", "在", "这个", "文件", "开头", "添加", "了", "一个", "文档", "字符串", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "导入", "了", "函数", "url", " ", "，", "因为", "我们", "需要", "使用", "它", "来", "将", "URL", "映射", "到", "视图", "（", "见", "❷", "）", "。", "\n", "我们", "还", "导入", "了", "模块", "views", " ", "（", "见", "❸", "）", "，", "其中", "的", "句点", "让", "Python", "从", "当前", "的", "urls", ".", "py", "模块", "所在", "的", "文件夹", "中", "导入", "视图", "。", "在", "这个", "模块", "中", "，", "变量", "urlpatterns", " ", "是", "一个", "列表", "，", "包含", "可", "在", "应用", "程", "\n", "序", "learning", "_", "logs", " ", "中", "请求", "的", "网页", "（", "见", "❹", "）", "。", "\n", "实际", "的", "URL", "模式", "是", "一个", "对", "函数", "url", "(", ")", " ", "的", "调用", "，", "这个", "函数", "接受", "三个", "实参", "（", "见", "❸", "）", "。", "第一个", "是", "一个", "正则表达式", "。", "Django", "在", "urlpatterns", " ", "中", "查找", "与", "请求", "的", "URL", "字符串", "匹配", "的", "正则", "表达", "\n", "式", "，", "因此", "正则表达式", "定义", "了", "Django", "可", "查找", "的", "模式", "。"], ["式", "，", "因此", "正则表达式", "定义", "了", "Django", "可", "查找", "的", "模式", "。", "\n", "我们", "来", "看看", "正则表达式", "r", "'", "^", "$", "'", " ", "。", "其中", "的", "r", " ", "让", "Python", "将", "接下来", "的", "字符串", "视为", "原始", "字符串", "，", "而", "引号", "告诉", "Python", "正则表达式", "始于", "和", "终于", "何处", "。", "脱", "字符", "（", "^", " ", "）", "让", "Python", "查看", "字符串", "的", "开头", "，", "\n", "而", "美元", "符号", "让", "Python", "查看", "字符串", "的", "末尾", "。", "总体而言", "，", "这个", "正则表达式", "让", "Python", "查找", "开头", "和", "末尾", "之间", "没有", "任何", "东西", "的", "URL", "。", "Python", "忽略", "项目", "的", "基础", "URL", "（", "http", ":", "/", "/", "localhost", ":", "8000", "/", "）", "，", "因此", "这", "\n", "个", "正则表达式", "与", "基础", "URL", "匹配", "。", "其他", "URL", "都", "与", "这个", "正则表达式", "不", "匹配", "。", "如果", "请求", "的", "URL", "不", "与", "任何", "URL", "模式匹配", "，", "Django", "将", "返回", "一个", "错误", "页面", "。", "\n", "url", "(", ")", " ", "的", "第二个", "实参", "（", "见", "❺", "）", "指定", "了", "要", "调用", "的", "视图", "函数", "。", "请求", "的", "URL", "与", "前述", "正则表达式", "匹配", "时", "，", "Django", "将", "调用", "views", ".", "index", " ", "（", "这个", "视图", "函数", "将", "在", "下", "一节", "编写", "）", "。", "第三个", "实参", "将", "\n", "这个", "URL", "模式", "的", "名称", "指定", "为", "index", "，", "让", "我们", "能够", "在", "代码", "的", "其他", "地方", "引用", "它", "。", "每当", "需要", "提供", "到", "这个", "主页", "的", "链接", "时", "，", "我们", "都", "将", "使用", "这个", "名称", "，", "而", "不", "编写", "URL", "。", "\n", "注意"], ["注意", "\n", "注意", " ", "　", "正则表达式", "通常", "被", "称为", "regex", "，", "几乎", "每种", "编程语言", "都", "使用", "它", "。", "它们", "的", "用途", "多得", "难以置信", "，", "但", "需要", "经过", "一定", "的", "练习", "才能", "熟悉", "。", "如果", "你", "不", "明白", "前面", "介绍", "的", "内容", "，", "也", "不", "\n", "用", "担心", "，", "你", "在", "完成", "这个", "项目", "的", "过程", "中", "，", "将会", "看到", "很多", "正则表达式", "。", "\n", "18.3", ".", "2", "　", "编写", "视图", "\n", "　", "编写", "视图", "\n", "视图", "函数", "接受", "请求", "中", "的", "信息", "，", "准备", "好", "生成", "网页", "所", "需", "的", "数据", "，", "再", "将", "这些", "数据", "发送给", "浏览器", "—", "—", "这", "通常", "是", "使用", "定义", "了", "网页", "是", "什么样", "的", "模板", "实现", "的", "。", "\n", "learning", "_", "logs", "中", "的", "文件", "views", ".", "py", "是", "你", "执行命令", "python", " ", "manage", ".", "py", " ", "startapp", " ", "时", "自动", "生成", "的", "，", "当前", "其", "内容", "如下", "：", "\n", "views", ".", "py", "\n", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", "#", " ", "在", "这里", "创建", "视图", "\n", "当前", "，", "这个", "文件", "只", "导入", "了", "函数", "render", "(", ")", " ", "，", "它", "根据", "视图", "提供", "的", "数据", "渲染", "响应", "。", "下面", "的", "代码", "演示", "了", "该", "如何", "为主", "页", "编写", "视图", "：", "\n", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", "def", " ", "index", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "学习", "笔记", "的", "主页", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "index", ".", "html", "'", ")"], ["URL", "请求", "与", "我们", "刚才", "定义", "的", "模式匹配", "时", "，", "Django", "将", "在", "文件", "views", ".", "py", "中", "查找", "函数", "index", "(", ")", " ", "，", "再", "将", "请求", "对象", "传递", "给", "这个", "视图", "函数", "。", "在", "这里", "，", "我们", "不", "需要", "处理", "任何", "数据", "，", "因此", "这个", "函数", "只", "\n", "包含", "调用", "render", "(", ")", " ", "的", "代码", "。", "这里", "向", "函数", "render", "(", ")", " ", "提供", "了", "两个", "实参", "：", "原始", "请求", "对象", "以及", "一个", "可", "用于", "创建", "网页", "的", "模板", "。", "下面", "来", "编写", "这个", "模板", "。"], ["18.3", ".", "3", "　", "编写", "模板", "\n", "　", "编写", "模板", "\n", "模板", "定义", "了", "网页", "的", "结构", "。", "模板", "指定", "了", "网页", "是", "什么样", "的", "，", "而", "每当", "网页", "被", "请求", "时", "，", "Django", "将", "填入", "相关", "的", "数据", "。", "模板", "让", "你", "能够", "访问", "视图", "提供", "的", "任何", "数据", "。", "我们", "的", "主页", "视图", "没有", "提供", "任何", "\n", "数据", "，", "因此", "相应", "的", "模板", "非常简单", "。", "\n", "在", "文件夹", "learning", "_", "logs", "中", "新建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "templates", "。", "在", "文件夹", "templates", "中", "，", "再", "新建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "learning", "_", "logs", "。", "这", "好像", "有点", "多余", "（", "我们", "在", "文件夹", "\n", "learning", "_", "logs", "中", "创建", "了", "文件夹", "templates", "，", "又", "在", "这个", "文件夹", "中", "创建", "了", "文件夹", "learning", "_", "logs", "）", "，", "但", "建立", "了", "Django", "能够", "明确", "解读", "的", "结构", "，", "即便", "项目", "很大", "，", "包含", "很多", "应用程序", "亦", "如此", "。", "在", "最", "里面", "\n", "的", "文件夹", "learning", "_", "logs", "中", "，", "新建", "一个", "文件", "，", "并", "将", "其", "命名", "为", "index", ".", "html", "，", "再", "在", "这个", "文件", "中", "编写", "如下", "代码", "：", "\n", "index", ".", "html", "\n", "<", "p", ">", "Learning", " ", "Log", "<", "/", "p", ">", "\n", "<", "p", ">", "Learning", " ", "Log", " ", "helps", " ", "you", " ", "keep", " ", "track", " ", "of", " ", "your", " ", "learning", ",", " ", "for", " ", "any", " ", "topic", " ", "you", "'", "re", "\n", "learning", " ", "about", ".", "<", "/", "p", ">"], ["learning", " ", "about", ".", "<", "/", "p", ">", "\n", "这个", "文件", "非常简单", "。", "对于", "不", "熟悉", "HTML", "的", "读者", "，", "这里", "解释一下", "：", "标签", "<", "p", ">", "<", "/", "p", ">", " ", "标识", "段落", "；", "标签", "<", "p", ">", " ", "指出", "了", "段落", "的", "开头", "位置", "，", "而", "标签", "<", "/", "p", ">", " ", "指出", "了", "段落", "的", "结束", "位置", "。", "这里", "定义", "了", "两", "\n", "个", "段落", "：", "第一个", "充当", "标题", "，", "第二个", "阐述", "了", "用户", "可", "使用", "“", "学习", "笔记", "”", "来", "做", "什么", "。", "\n", "现在", "，", "如果", "你", "请求", "这个", "项目", "的", "基础", "URL", "—", "—", "http", ":", "/", "/", "localhost", ":", "8000", "/", "，", "将", "看到", "刚才", "创建", "的", "网页", "，", "而", "不是", "默认", "的", "Django", "网页", "。", "Django", "接受", "请求", "的", "URL", "，", "发现", "该", "URL", "与", "模式", "r", "'", "^", "$", "'", " ", "匹配", "，", "因此", "\n", "调用函数", "views", ".", "index", "(", ")", " ", "，", "这", "将", "使用", "index", ".", "html", "包含", "的", "模板", "来", "渲染", "网页", "，", "结果", "如图", "18", "-", "3", "所示", "。", "\n", "图", "\n", "图", "18", "-", "3", "　", "学习", "笔记", "的", "主页", "\n", "　", "学习", "笔记", "的", "主页", "\n", "创建", "网页", "的", "过程", "看起来", "可能", "很", "复杂", "，", "但", "将", "URL", "、", "视图", "和", "模板", "分离", "的", "效果", "实际上", "很", "好", "。", "这", "让", "我们", "能够", "分别", "考虑", "项目", "的", "不同", "方面", "，", "且", "在", "项目", "很大", "时", "，", "让", "各个", "参与者", "可", "专注", "于", "其", "最", "擅长", "\n", "的", "方面", "。", "例如", "，", "数据库", "专家", "可", "专注", "于", "模型", "，", "程序员", "可", "专注", "于", "视图", "代码", "，", "而", "Web", "设计", "人员", "可", "专注", "于", "模板", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "5", " ", "膳食", "规划", "程序"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "5", " ", "膳食", "规划", "程序", "\n", "膳食", "规划", "程序", " ", "：", "假设", "你", "要", "创建", "一个", "应用程序", "，", "帮助", "用户", "规划", "一周", "的", "膳食", "。", "为此", "，", "新建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "meal", "_", "planner", "，", "再", "在", "这个", "文件夹", "中", "新建", "一个", "Django", "\n", "项目", "。", "接下来", "，", "新建", "一个", "名为", "meal", "_", "plans", " ", "的", "应用程序", "，", "并", "为", "这个", "项目", "创建", "一个", "简单", "的", "主页", "。", "\n", "18", "-", "6", " ", "比萨", "店主", "页", "\n", "比萨", "店主", "页", " ", "：", "在", "你", "为", "完成", "练习", "18", "-", "4", "而", "创建", "的", "项目", "Pizzeria", "中", "，", "添加", "一个", "主页", "。", "\n", "18.4", "　", "创建", "其他", "网页", "\n", "　", "创建", "其他", "网页", "\n", "制定", "创建", "网页", "的", "流程", "后", "，", "可以", "开始", "扩充", "“", "学习", "笔记", "”", "项目", "了", "。", "我们", "将", "创建", "两个", "显示", "数据", "的", "网页", "，", "其中", "一个", "列出", "所有", "的", "主题", "，", "另", "一个", "显示", "特定", "主题", "的", "所有", "条目", "。", "对于", "每个", "网页", "，", "我们", "\n", "都", "将", "指定", "URL", "模式", "，", "编写", "一个", "视图", "函数", "，", "并", "编写", "一个", "模板", "。", "但", "这样", "做", "之前", "，", "我们", "先", "创建", "一个", "父", "模板", "，", "项目", "中", "的", "其他", "模板", "都", "将", "继承", "它", "。", "\n", "18.4", ".", "1", "　", "模板", "继承", "\n", "　", "模板", "继承", "\n", "创建", "网站", "时", "，", "几乎", "都", "有", "一些", "所有", "网页", "都", "将", "包含", "的", "元素", "。", "在", "这种", "情况", "下", "，", "可", "编写", "一个", "包含", "通用", "元素", "的", "父", "模板", "，", "并", "让", "每个", "网页", "都", "继承", "这个", "模板", "，", "而", "不必", "在", "每个", "网页", "中", "重复", "定义", "这些", "通", "\n", "用", "元素", "。", "这种", "方法", "能", "让", "你", "专注", "于", "开发", "每个", "网页", "的", "独特", "方面", "，", "还", "能", "让", "修改", "项目", "的", "整体", "外观", "容易", "得", "多", "。", "\n", "1", ".", " ", "父", "模板"], ["1", ".", " ", "父", "模板", "\n", "父", "模板", "\n", "我们", "首先", "来", "创建", "一个", "名为", "base", ".", "html", "的", "模板", "，", "并", "将", "其", "存储", "在", "index", ".", "html", "所在", "的", "目录", "中", "。", "这个", "文件", "包含", "所有", "页面", "都", "有", "的", "元素", "；", "其他", "的", "模板", "都", "继承", "base", ".", "html", "。", "当前", "，", "所有", "页面", "都", "包含", "的", "元素", "\n", "只有", "顶端", "的", "标题", "。", "我们", "将", "在", "每个", "页面", "中", "包含", "这个", "模板", "，", "因此", "我们", "将", "这个", "标题", "设置", "为", "到", "主页", "的", "链接", "：", "\n", "base", ".", "html", "\n", " ", " ", "<", "p", ">", "\n", "❶", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", ">", "Learning", " ", "Log", "<", "/", "a", ">", "\n", " ", " ", "<", "/", "p", ">", "\n", "❷", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "这个", "文件", "的", "第一", "部分", "创建", "一个", "包含", "项目", "名", "的", "段落", "，", "该", "段落", "也", "是", "一个", "到", "主页", "的", "链接", "。", "为", "创建", "链接", "，", "我们", "使用", "了", "一个", "模板", "标签", "\n", "模板", "标签", " ", "，", "它", "是", "用", "大括号", "和", "百分号", "（", "{", "%", " ", "%", "}", " ", "）", "表示", "的", "。", "模板", "标", "\n", "签是", "一小", "段", "代码", "，", "生成", "要", "在", "网页", "中", "显示", "的", "信息", "。", "在", "这个", "实例", "中", "，", "模板", "标签", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", " ", "生成", "一个", "URL", "，", "该", "URL", "与", "learning", "_", "logs", "/", "urls", ".", "py", "中", "定义", "的", "名"], ["为", "index", " ", "的", "URL", "模式匹配", "（", "见", "❶", "）", "。", "在", "这个", "示例", "中", "，", "learning", "_", "logs", " ", "是", "一个", "命名", "空间", "\n", "命名", "空间", " ", "，", "而", "index", " ", "是", "该", "命名", "空间", "中", "一个", "名称", "独特", "的", "URL", "模式", "。", "\n", "在", "简单", "的", "HTML", "页面", "中", "，", "链接", "是", "使用", "锚", "\n", "锚", " ", "标签", "定义", "的", "：", "\n", "<", "a", " ", "href", "=", "\"", "link", "_", "url", "\"", ">", "link", " ", "text", "<", "/", "a", ">", "\n", "让", "模板", "标签", "来", "生成", "URL", "，", "可", "让", "链接", "保持", "最新", "容易", "得", "多", "。", "要", "修改", "项目", "中", "的", "URL", "，", "只", "需", "修改", "urls", ".", "py", "中", "的", "URL", "模式", "，", "这样", "网页", "被", "请求", "时", "，", "Django", "将", "自动", "插入", "修改", "后", "的", "URL", "。", "在", "我们", "的", "项目", "\n", "中", "，", "每个", "网页", "都", "将", "继承", "base", ".", "html", "，", "因此", "从", "现在", "开始", "，", "每个", "网页", "都", "包含", "到", "主页", "的", "链接", "。", "\n", "在", "❶", "处", "，", "我们", "插入", "了", "一对", "块", "标签", "。", "这个", "块", "名为", "content", " ", "，", "是", "一个", "占位", "符", "，", "其中", "包含", "的", "信息", "将", "由子", "模板", "指定", "。", "\n", "子", "模板", "并非", "必须", "定", "义父", "模板", "中", "的", "每个", "块", "，", "因此", "在", "父", "模板", "中", "，", "可", "使用", "任意", "多个", "块", "来", "预留", "空间", "，", "而子", "模板", "可", "根据", "需要", "定义", "相应", "数量", "的", "块", "。"], ["注意", "\n", "注意", " ", "　", "在", "Python", "代码", "中", "，", "我们", "几乎", "总是", "缩进", "四个", "空格", "。", "相比", "于", "Python", "文件", "，", "模板", "文件", "的", "缩进", "层级", "更", "多", "，", "因此", "每个", "层级", "通常", "只", "缩进", "两个", "空格", "。", "\n", "2", ".", " ", "子", "模板", "\n", "子", "模板", "\n", "现在", "需要", "重新", "编写", "index", ".", "html", "，", "使", "其", "继承", "base", ".", "html", "，", "如下", "所示", "：", "\n", "index", ".", "html", "\n", "❶", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "❷", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "Learning", " ", "Log", " ", "helps", " ", "you", " ", "keep", " ", "track", " ", "of", " ", "your", " ", "learning", ",", " ", "for", " ", "any", " ", "topic", " ", "you", "'", "re", "\n", " ", " ", " ", " ", "learning", " ", "about", ".", "<", "/", "p", ">", "\n", "❸", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "如果", "将", "这些", "代码", "与", "原来", "的", "index", ".", "html", "进行", "比较", "，", "可", "发现", "我们", "将", "标题", "Learning", " ", "Log", "替换成", "了", "从父", "模板", "那里", "继承", "的", "代码", "（", "见", "❶", "）", "。", "子", "模板", "的", "第一行", "必须", "包含", "标签", "{", "%", " ", "extends", " ", "%", "}", " ", "，", "让"], ["Django", "知道", "它", "继承", "了", "哪个", "父", "模板", "。", "文件", "base", ".", "html", "位于", "文件夹", "learning", "_", "logs", "中", "，", "因此", "父", "模板", "路径", "中", "包含", "learning", "_", "logs", "。", "这", "行", "代码", "导入", "模板", "base", ".", "html", "的", "所有", "内容", "，", "让", "index", ".", "html", "能够", "指定", "要", "\n", "在", "content", " ", "块", "预留", "的", "空间", "中", "添加", "的", "内容", "。", "\n", "在", "❷", "处", "，", "我们", "插入", "了", "一个", "名为", "content", " ", "的", "{", "%", " ", "block", " ", "%", "}", " ", "标签", "，", "以", "定义", "content", " ", "块", "。", "不是", "从父", "模板", "继承", "的", "内容", "都", "包含", "在", "content", " ", "块", "中", "，", "在", "这里", "是", "一个", "描述", "项目", "“", "学习", "笔记", "”", "的", "\n", "段落", "。", "在", "❸", "处", "，", "我们", "使用", "标签", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", " ", "指出", "了", "内容", "定义", "的", "结束", "位置", "。", "\n", "模板", "继承", "的", "优点", "开始", "显现出来", "了", "：", "在子", "模板", "中", "，", "只", "需", "包含", "当前", "网页", "特有", "的", "内容", "。", "这", "不仅", "简化", "了", "每个", "模板", "，", "还", "使得", "网站", "修改", "起来", "容易", "得", "多", "。", "要", "修改", "很多", "网页", "都", "包含", "的", "元素", "，", "只", "需", "在", "\n", "父", "模板", "中", "修改", "该", "元素", "，", "你", "所", "做", "的", "修改", "将", "传导", "到", "继承", "该父", "模板", "的", "每个", "页面", "。", "在", "包含", "数十", "乃至", "数百个", "网页", "的", "项目", "中", "，", "这种", "结构", "使得", "网站", "改进", "起来", "容易", "而且", "快捷", "得", "多", "。", "\n", "注意"], ["注意", "\n", "注意", " ", "　", "在", "大型项目", "中", "，", "通常", "有", "一个", "用于", "整个", "网站", "的", "父", "模板", "—", "—", "base", ".", "html", "，", "且", "网站", "的", "每个", "主要", "部分", "都", "有", "一个", "父", "模板", "。", "每个", "部分", "的", "父", "模板", "都", "继承", "base", ".", "html", "，", "而", "网站", "的", "每个", "网", "\n", "页", "都", "继承", "相应", "部分", "的", "父", "模板", "。", "这", "让", "你", "能够", "轻松", "地", "修改", "整个", "网站", "的", "外观", "、", "网站", "任何", "一部分", "的", "外观", "以及", "任何", "一个", "网页", "的", "外观", "。", "这种", "配置", "提供", "了", "一种", "效率", "极高", "的", "工作", "方式", "，", "\n", "让", "你", "乐意", "不断", "地去", "改进", "网站", "。", "\n", "18.4", ".", "2", "　", "显示", "所有", "主题", "的", "页面", "\n", "　", "显示", "所有", "主题", "的", "页面", "\n", "有", "了", "高效", "的", "网页", "创建", "方法", "，", "就", "能", "专注", "于", "另外", "两个", "网页", "了", "：", "显示", "全部", "主题", "的", "网页", "以及", "显示", "特定", "主题", "中", "条", "目的", "网页", "。", "所有", "主题", "页面", "显示", "用户", "创建", "的", "所有", "主题", "，", "它", "是", "第一个", "需要", "使用", "数", "\n", "据", "的", "网页", "。", "\n", "1", ".", " ", "URL", "模式", "\n", "模式", "\n", "首先", "，", "我们", "来", "定义", "显示", "所有", "主题", "的", "页面", "的", "URL", "。", "通常", "，", "使用", "一个", "简单", "的", "URL", "片段", "来", "指出", "网页", "显示", "的", "信息", "；", "我们", "将", "使用", "单词", "topics", "，", "因此", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "topics", "/", "将", "返回", "显示", "所有", "\n", "主题", "的", "页面", "。", "下面", "演示", "了", "该", "如何", "修改", "learning", "_", "logs", "/", "urls", ".", "py", "：", "\n", "urls", ".", "py", "\n", " ", " ", "\"", "\"", "\"", "为", "learning", "_", "logs", "定义", "URL", "模式", "\"", "\"", "\"", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "urlpatterns", " ", "=", " ", "["], ["--", "snip", "--", "\n", " ", " ", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "主页", "\n", " ", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "$", "'", ",", " ", "views", ".", "index", ",", " ", "name", "=", "'", "index", "'", ")", ",", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "显示", "所有", "的", "主题", "\n", "❶", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "topics", "/", "$", "'", ",", " ", "views", ".", "topics", ",", " ", "name", "=", "'", "topics", "'", ")", ",", "\n", " ", " ", "]", "\n", "我们", "只是", "在", "用于", "主页", "URL", "的", "正则表达式", "中", "添加", "了", "topics", "/", " ", "（", "见", "❶", "）", "。", "Django", "检查", "请求", "的", "URL", "时", "，", "这个", "模式", "与", "这样", "的", "URL", "匹配", "：", "基础", "URL", "后面", "跟着", "topics", " ", "。", "可以", "在", "末尾", "包含", "斜", "\n", "杠", "，", "也", "可以", "省略", "它", "，", "但", "单词", "topics", " ", "后面", "不能", "有", "任何", "东西", "，", "否则", "就", "与", "该", "模式", "不", "匹配", "。", "其", "URL", "与", "该", "模式匹配", "的", "请求", "都", "将", "交给", "views", ".", "py", "中", "的", "函数", "topics", "(", ")", " ", "进行", "处理", "。", "\n", "2", ".", " ", "视图", "\n", "视图", "\n", "函数", "topics", "(", ")", " ", "需要", "从", "数据库", "中", "获取", "一些", "数据", "，", "并", "将", "其", "发送给", "模板", "。", "我们", "需要", "在", "views", ".", "py", "中", "添加", "的", "代码", "如下", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", "❶", " ", "from", " ", ".", "models", " ", "import", " ", "Topic", "\n", " ", " ", "def", " ", "index", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["def", " ", "index", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "❷", " ", "def", " ", "topics", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "所有", "的", "主题", "\"", "\"", "\"", "\n", "❸", " ", " ", " ", " ", " ", "topics", " ", "=", " ", "Topic", ".", "objects", ".", "order", "_", "by", "(", "'", "date", "_", "added", "'", ")", "\n", "❹", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "topics", "'", ":", " ", "topics", "}", "\n", "❺", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "topics", ".", "html", "'", ",", " ", "context", ")", "\n", "我们", "首先", "导入", "了", "与", "所", "需", "数据", "相关联", "的", "模型", "（", "见", "❶", "）", "。", "函数", "topics", "(", ")", " ", "包含", "一个", "形参", "：", "Django", "从", "服务器", "那里", "收到", "的", "request", " ", "对象", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "我们", "查询数据库", "—", "—", "请求", "提", "\n", "供", "Topic", " ", "对象", "，", "并", "按", "属性", "date", "_", "added", " ", "对", "它们", "进行", "排序", "。", "我们", "将", "返回", "的", "查询", "集", "存储", "在", "topics", " ", "中", "。", "\n", "在", "❹", "处", "，", "我们", "定义", "了", "一个", "将要", "发送给", "模板", "的", "上下文", "。", "上下文", "是", "一个", "字典", "，", "其中", "的", "键", "是", "我们", "将", "在", "模板", "中", "用来", "访问", "数据", "的", "名称", "，", "而值", "是", "我们", "要", "发送给", "模板", "的", "数据", "。", "在", "这里", "，", "只有", "一个"], ["键", "—", "值", "对", "，", "它", "包含", "我们", "将", "在", "网页", "中", "显示", "的", "一组", "主题", "。", "创建", "使用", "数据", "的", "网页", "时", "，", "除", "对象", "request", " ", "和", "模板", "的", "路径", "外", "，", "我们", "还", "将", "变量", "context", " ", "传递", "给", "render", "(", ")", " ", "（", "见", "❺", "）", "。", "\n", "3", ".", " ", "模板", "\n", "模板", "\n", "显示", "所有", "主题", "的", "页面", "的", "模板", "接受", "字典", "context", " ", "，", "以便", "能够", "使用", "topics", "(", ")", " ", "提供", "的", "数据", "。", "请", "创建", "一个", "文件", "，", "将", "其", "命名", "为", "topics", ".", "html", "，", "并", "存储", "到", "index", ".", "html", "所在", "的", "目录", "中", "。", "下面", "演示", "了", "\n", "如何", "在", "这个", "模板", "中", "显示", "主题", "：", "\n", "topics", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "Topics", "<", "/", "p", ">", "\n", "❶", " ", " ", " ", "<", "ul", ">", "\n", "❷", " ", " ", " ", " ", " ", "{", "%", " ", "for", " ", "topic", " ", "in", " ", "topics", " ", "%", "}", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "li", ">"], ["❹", " ", " ", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "No", " ", "topics", " ", "have", " ", "been", " ", "added", " ", "yet", ".", "<", "/", "li", ">", "\n", "❺", " ", " ", " ", " ", " ", "{", "%", " ", "endfor", " ", "%", "}", "\n", "❻", " ", " ", " ", "<", "/", "ul", ">", "\n", " ", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "就", "像", "模板", "index", ".", "html", "一样", "，", "我们", "首先", "使用", "标签", "{", "%", " ", "extends", " ", "%", "}", " ", "来", "继承", "base", ".", "html", "，", "再", "开始", "定义", "content", " ", "块", "。", "这个", "网页", "的", "主体", "是", "一个", "项目", "列表", "，", "其中", "列出", "了", "用户", "输入", "的", "主题", "。", "在", "标准", "\n", "HTML", "中", "，", "项目", "列表", "被", "称为", "无序", "列表", "，", "用", "标签", "<", "ul", ">", "<", "/", "ul", ">", " ", "表示", "。", "包含", "所有", "主题", "的", "项目", "列表", "始于", "❶", "处", "。", "\n", "在", "❷", "处", "，", "我们", "使用", "了", "一个", "相当于", "for", " ", "循环", "的", "模板", "标签", "，", "它", "遍历", "字典", "context", " ", "中", "的", "列表", "topics", " ", "。", "模板", "中", "使用", "的", "代码", "与", "Python", "代码", "存在", "一些", "重要", "差别", "：", "Python", "使用", "缩", "进来", "指出", "哪些", "\n", "代码", "行是", "for", " ", "循环", "的", "组成部分", "，", "而", "在", "模板", "中", "，", "每个", "for", " ", "循环", "都", "必须", "使用", "{", "%", " ", "endfor", " ", "%", "}", " ", "标签", "来", "显式", "地", "指出", "其", "结束", "位置", "。", "因此", "在", "模板", "中", "，", "循环", "类似", "于", "下面", "这样", "：", "\n", "{", "%", " ", "for", " ", "item", " ", "in", " ", "list", " ", "%", "}", "\n", " ", " ", " ", " ", "do", " ", "something", " ", "with", " ", "each", " ", "item"], ["do", " ", "something", " ", "with", " ", "each", " ", "item", "\n", "{", "%", " ", "endfor", " ", "%", "}", "\n", "在", "循环", "中", "，", "我们", "要", "将", "每个", "主题", "转换", "为", "一个", "项目", "列表", "项", "。", "要", "在", "模板", "中", "打印", "变量", "，", "需要", "将", "变量名", "用", "双花", "括号", "括", "起来", "。", "每次", "循环", "时", "，", "❸", "处", "的", "代码", "{", "{", " ", "topic", " ", "}", "}", " ", "都", "被", "替换", "为", "topic", " ", "的", "当", "\n", "前值", "。", "这些", "花", "括号", "不会", "出现", "在", "网页", "中", "，", "它们", "只是", "用于", "告诉", "Django", "我们", "使用", "了", "一个", "模板", "变量", "。", "HTML", "标签", "<", "li", ">", "<", "/", "li", ">", " ", "表示", "一个", "项目", "列表", "项", "，", "在", "标签", "对", "<", "ul", ">", "<", "/", "ul", ">", " ", "内部", "，", "位于", "标", "\n", "签", "<", "li", ">", " ", "和", "<", "/", "li", ">", " ", "之间", "的", "内容", "都", "是", "一个", "项目", "列表", "项", "。", "\n", "在", "❹", "处", "，", "我们", "使用", "了", "模板", "标签", "{", "%", " ", "empty", " ", "%", "}", " ", "，", "它", "告诉", "Django", "在", "列表", "topics", " ", "为", "空时", "该", "怎么办", "：", "这里", "是", "打印", "一条", "消息", "，", "告诉", "用户", "还", "没有", "添加", "任何", "主题", "。", "最后", "两行", "分别", "结束", "for", " ", "循", "\n", "环", "（", "见", "❺", "）", "和", "项目", "列表", "（", "见", "❻", "）", "。", "\n", "现在", "需要", "修改", "父", "模板", "，", "使", "其", "包含", "到", "显示", "所有", "主题", "的", "页面", "的", "链接", "：", "\n", "base", ".", "html", "\n", " ", " ", "<", "p", ">", "\n", "❶", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", ">", "Learning", " ", "Log", "<", "/", "a", ">", " ", "-"], ["❷", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topics", "'", " ", "%", "}", "\"", ">", "Topics", "<", "/", "a", ">", "\n", " ", " ", "<", "/", "p", ">", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "我们", "在", "到", "主页", "的", "链接", "后面", "添加", "了", "一个", "连", "字符", "（", "见", "❶", "）", "，", "然后", "添加", "了", "一个", "到", "显示", "所有", "主题", "的", "页面", "的", "链接", "—", "—", "使用", "的", "也", "是", "模板", "标签", "url", " ", "（", "见", "❷", "）", "。", "这", "一行", "让", "Django", "生成", "一个", "链接", "，", "它", "\n", "与", "learning", "_", "logs", "/", " ", "urls", ".", "py", "中", "名为", "topics", " ", "的", "URL", "模式匹配", "。", "\n", "现在", "如果", "你", "刷新", "浏览器", "中", "的", "主页", "，", "将", "看到", "链接", "Topics", "。", "单击", "这个", "链接", "，", "将", "看到", "类似", "于图", "18", "-", "4", "所示", "的", "网页", "。", "\n", "图", "\n", "图", "18", "-", "4", "　", "显示", "所有", "主题", "的", "网页", "\n", "　", "显示", "所有", "主题", "的", "网页", "\n", "18.4", ".", "3", "　", "显示", "特定", "主题", "的", "页面", "\n", "　", "显示", "特定", "主题", "的", "页面", "\n", "接下来", "，", "我们", "需要", "创建", "一个", "专注", "于", "特定", "主题", "的", "页面", "—", "—", "显示", "该", "主题", "的", "名称", "及", "该", "主题", "的", "所有", "条目", "。", "同样", "，", "我们", "将", "定义", "一个", "新", "的", "URL", "模式", "，", "编写", "一个", "视图", "并", "创建", "一个", "模板", "。", "我们", "还", "将", "\n", "修改", "显示", "所有", "主题", "的", "网页", "，", "让", "每个", "项目", "列表", "项", "都", "是", "一个", "链接", "，", "单击", "它", "将", "显示", "相应", "主题", "的", "所有", "条目", "。", "\n", "1", ".", " ", "URL", "模式", "\n", "模式"], ["1", ".", " ", "URL", "模式", "\n", "模式", "\n", "显示", "特定", "主题", "的", "页面", "的", "URL", "模式", "与", "前面", "的", "所有", "URL", "模式", "都", "稍", "有", "不同", "，", "因为", "它", "将", "使用", "主题", "的", "id", " ", "属性", "来", "指出", "请求", "的", "是", "哪个", "主题", "。", "例如", "，", "如果", "用户", "要", "查看", "主题", "Chess", "（", "其", "id", " ", "为", "1", "）", "的", "详细", "\n", "页面", "，", "URL", "将", "为", "http", ":", "/", "/", "localhost", ":", "8000", "/", "topics", "/", "1", "/", "。", "下面", "是", "与", "这个", "URL", "匹配", "的", "模式", "，", "它", "包含", "在", "learning", "_", "logs", "/", "urls", ".", "py", "中", "：", "\n", "urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "特定", "主题", "的", "详细", "页面", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "topics", "/", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", "/", "$", "'", ",", " ", "views", ".", "topic", ",", " ", "name", "=", "'", "topic", "'", ")", ",", "\n", "]", "\n", "我们", "来", "详细", "研究", "这个", "URL", "模式", "中", "的", "正则表达式", "—", "—", "r", "'", "^", "topics", "/", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", "/", "$", "'", " ", "。", "r", " ", "让", "Django", "将", "这个", "字符串", "视为", "原始", "字符串", "，", "并", "指出", "正则表达式", "包含", "在", "引号", "内", "。", "这个", "\n", "表达式", "的", "第二", "部分", "（", "/", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", "/", " ", "）", "与", "包含", "在", "两个", "斜杠", "内", "的", "整数", "匹配", "，", "并", "将", "这个", "整数", "存储", "在", "一个", "名为", "topic", "_", "id", " ", "的", "实参", "中", "。", "这部分", "表达式", "两边", "的", "括号", "捕获", "URL", "中", "的"], ["值", "；", "?", "P", "<", "topic", "_", "id", ">", " ", "将", "匹配", "的", "值", "存储", "到", "topic", "_", "id", " ", "中", "；", "而", "表达式", "\\", "d", "+", " ", "与", "包含", "在", "两个", "斜杆", "内", "的", "任何", "数字", "都", "匹配", "，", "不管", "这个", "数字", "为", "多少", "位", "。", "\n", "发现", "URL", "与", "这个", "模式匹配", "时", "，", "Django", "将", "调用", "视图", "函数", "topic", "(", ")", " ", "，", "并", "将", "存储", "在", "topic", "_", "id", " ", "中", "的", "值", "作为", "实参", "传递", "给", "它", "。", "在", "这个", "函数", "中", "，", "我们", "将", "使用", "topic", "_", "id", " ", "的", "值来", "获取", "相应", "的", "主", "\n", "题", "。", "\n", "2", ".", " ", "视图", "\n", "视图", "\n", "函数", "topic", "(", ")", " ", "需要", "从", "数据库", "中", "获取", "指定", "的", "主题", "以及", "与", "之", "相关联", "的", "所有", "条目", "，", "如下", "所示", "："], ["views", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", "❶", " ", "def", " ", "topic", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "单个", "主题", "及其", "所有", "的", "条目", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "topic", " ", "=", " ", "Topic", ".", "objects", ".", "get", "(", "id", "=", "topic", "_", "id", ")", "\n", "❸", " ", " ", " ", " ", " ", "entries", " ", "=", " ", "topic", ".", "entry", "_", "set", ".", "order", "_", "by", "(", "'", "-", "date", "_", "added", "'", ")", "\n", "❹", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "topic", "'", ":", " ", "topic", ",", " ", "'", "entries", "'", ":", " ", "entries", "}", "\n", "❺", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "topic", ".", "html", "'", ",", " ", "context", ")", "\n", "这是", "第一个", "除", "request", " ", "对象", "外", "还", "包含", "另", "一个", "形参", "的", "视图", "函数", "。", "这个", "函数", "接受", "正则表达式", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", " ", "捕获", "的", "值", "，", "并", "将", "其", "存储", "到", "topic", "_", "id", " ", "中", "（", "见", "❶", "）", "。", "在", "❷", "处", "，", "我", "\n", "们", "使用", "get", "(", ")", " ", "来", "获取", "指定", "的", "主题", "，", "就", "像", "前面", "在", "Django", " ", "shell", "中所", "做", "的", "那样", "。", "在", "❸", "处", "，", "我们", "获取", "与", "该", "主题", "相关联", "的", "条目", "，", "并", "将", "它们", "按", "date", "_", "added", " ", "排序", "：", "date", "_", "added", " ", "前面", "的", "减号"], ["指定", "按", "降序", "排列", "，", "即先", "显示", "最近", "的", "条目", "。", "我们", "将", "主题", "和", "条目", "都", "存储", "在", "字典", "context", " ", "中", "（", "见", "❹", "）", "，", "再", "将", "这个", "字典", "发送给", "模板", "topic", ".", "html", "（", "见", "❺", "）", "。", "\n", "注意", "\n", "注意", " ", "　", "❷", "处", "和", "❸", "处", "的", "代码", "被", "称为", "查询", "，", "因为", "它们", "向", "数据库", "查询", "特定", "的", "信息", "。", "在", "自己", "的", "项目", "中", "编写", "这样", "的", "查询", "时", "，", "先", "在", "Django", " ", "shell", "中", "进行", "尝试", "大有裨益", "。", "相比", "于", "编写", "视", "\n", "图", "和", "模板", "，", "再", "在", "浏览器", "中", "检查", "结果", "，", "在", "shell", "中", "执行", "代码", "可", "更", "快", "地", "获得", "反馈", "。", "\n", "3", ".", " ", "模板", "\n", "模板", "\n", "这个", "模板", "需要", "显示", "主题", "的", "名称", "和", "条", "目的", "内容", "；", "如果", "当前", "主题", "不", "包含", "任何", "条目", "，", "我们", "还", "需向", "用户", "指出", "这", "一点", "：", "\n", "topic", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "'", "learning", "_", "logs", "/", "base", ".", "html", "'", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❶", " ", " ", " ", "<", "p", ">", "Topic", ":", " ", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "<", "p", ">", "Entries", ":", "<", "/", "p", ">", "\n", "❷", " ", " ", " ", "<", "ul", ">", "\n", "❸", " ", " ", " ", "{", "%", " ", "for", " ", "entry", " ", "in", " ", "entries", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "<", "li", ">", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", "<", "p", ">", "{", "{", " ", "entry", ".", "date", "_", "added", "|", "date", ":", "'", "M", " ", "d", ",", " ", "Y", " ", "H", ":", "i", "'", " ", "}", "}", "<", "/", "p", ">"], ["❺", " ", " ", " ", " ", " ", " ", " ", "<", "p", ">", "{", "{", " ", "entry", ".", "text", "|", "linebreaks", " ", "}", "}", "<", "/", "p", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "li", ">", "\n", "❻", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "<", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "There", " ", "are", " ", "no", " ", "entries", " ", "for", " ", "this", " ", "topic", " ", "yet", ".", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "li", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "endfor", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "/", "ul", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "像", "这个", "项目", "的", "其他", "页面", "一样", "，", "这里", "也", "继承", "了", "base", ".", "html", "。", "接下来", "，", "我们", "显示", "当前", "的", "主题", "（", "见", "❶", "）", "，", "它", "存储", "在", "模板", "变量", "{", "{", " ", "topic", " ", "}", "}", " ", "中", "。", "为什么", "可以", "使用", "变量", "topic", " ", "呢", "？", "因为", "它", "包", "\n", "含", "在", "字典", "context", " ", "中", "。", "接下来", "，", "我们", "开始", "定义", "一个", "显示", "每个", "条", "目的", "项目", "列表", "（", "见", "❷", "）", "，", "并", "像", "前面", "显示", "所有", "主题", "一样", "遍历", "条目", "（", "见", "❸", "）", "。", "\n", "每个", "项目", "列表", "项", "都", "将", "列出", "两项", "信息", "：", "条", "目的", "时间", "戳", "和", "完整", "的", "文本", "。", "为", "列出", "时间", "戳", "（", "见", "❹", "）", "，", "我们", "显示", "属性", "date", "_", "added", " ", "的", "值", "。", "在", "Django", "模板", "中", "，", "竖线", "（", "|", " ", "）", "表示", "模板", "过滤器", "—", "—"], ["对", "模板", "变量", "的", "值", "进行", "修改", "的", "函数", "。", "过滤器", "date", ":", " ", "'", "M", " ", "d", ",", " ", "Y", " ", "H", ":", "i", "'", " ", "以", "这样", "的", "格式", "显示", "时间", "戳", "：", "January", " ", "1", ",", " ", "2015", " ", "23", ":", "00", "。", "接下来", "的", "一行", "显示", "text", " ", "的", "完整", "值", "，", "而", "不仅仅", "是", "entry", " ", "的", "前", "\n", "50", "个字符", "。", "过滤器", "linebreaks", " ", "（", "见", "❺", "）", "将", "包含", "换行符", "的", "长", "条目", "转换", "为", "浏览器", "能够", "理解", "的", "格式", "，", "以免", "显示", "为", "一个", "不间断", "的", "文本", "块", "。", "在", "❻", "处", "，", "我们", "使用", "模板", "标签", "{", "%", " ", "empty", " ", "%", "}", " ", "打", "\n", "印", "一条", "消息", "，", "告诉", "用户", "当前", "主题", "还", "没有", "条目", "。", "\n", "4", ".", " ", "将", "显示", "所有", "主题", "的", "页面", "中", "的", "每个", "主题", "都", "设置", "为", "链接", "\n", "将", "显示", "所有", "主题", "的", "页面", "中", "的", "每个", "主题", "都", "设置", "为", "链接", "\n", "在", "浏览器", "中", "查看", "显示", "特定", "主题", "的", "页", "面前", "，", "我们", "需要", "修改", "模板", "topics", ".", "html", "，", "让", "每个", "主题", "都", "链接", "到", "相应", "的", "网页", "，", "如下", "所示", "：", "\n", "topics", ".", "html", "\n", "--", "snip", "--", "\n", " ", " ", " ", " ", "{", "%", " ", "for", " ", "topic", " ", "in", " ", "topics", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "<", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topic", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "a", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "li", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", "--", "snip", "--"], ["<", "/", "li", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", "--", "snip", "--", "\n", "我们", "使用", "模板", "标签", "url", " ", "根据", "learning", "_", "logs", "中", "名为", "topic", " ", "的", "URL", "模式", "来", "生成", "合适", "的", "链接", "。", "这个", "URL", "模式", "要求", "提供", "实参", "topic", "_", "id", " ", "，", "因此", "我们", "在", "模板", "标签", "url", " ", "中", "添加", "了", "属性", "topic", ".", "id", "\n", "。", "现在", "，", "主题", "列表", "中", "的", "每个", "主题", "都", "是", "一个", "链接", "，", "链接", "到", "显示", "相应", "主题", "的", "页面", "，", "如", "http", ":", "/", "/", "localhost", ":", "8000", "/", "topics", "/", "1", "/", "。", "\n", "如果", "你", "刷新", "显示", "所有", "主题", "的", "页面", "，", "再", "单击", "其中", "的", "一个", "主题", "，", "将", "看到", "类似", "于图", "18", "-", "5", "所示", "的", "页面", "。"], ["图", "\n", "图", "18", "-", "5", "　", "特定", "主题", "的", "详细", "页面", "，", "其中", "显示", "了", "该", "主题", "的", "所有", "条目", "\n", "　", "特定", "主题", "的", "详细", "页面", "，", "其中", "显示", "了", "该", "主题", "的", "所有", "条目", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "18", "-", "7", " ", "模板", "文档", "\n", "模板", "文档", " ", "：", "请", "浏览", "Django", "模板", "文档", "，", "其", "网址", "为", "https", ":", "/", "/", "docs", ".", "djangoproject", ".", "com", "/", "en", "/", "1.8", "/", "ref", "/", "templates", "/", " ", "。", "自己", "开发", "项目", "时", "，", "可", "再", "回过头来", "参考", "该", "文档", "。", "\n", "18", "-", "8", " ", "比萨", "店", "页面", "\n", "比萨", "店", "页面", " ", "：", "在", "练习", "18", "-", "6", "中", "开发", "的", "项目", "Pizzeria", "中", "添加", "一个", "页面", "，", "它", "显示", "供应", "的", "比萨", "的", "名称", "。", "然后", "，", "将", "每个", "比萨", "名称", "都", "设置", "成", "一个", "链接", "，", "单击", "这种", "链接", "将", "显示", "一个", "\n", "页面", "，", "其中", "列出", "了", "相应", "比萨", "的", "配料", "。", "请", "务必", "使用", "模板", "继承", "来", "高效", "地", "创建", "页面", "。", "\n", "18.5", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "首先", "学习", "了", "如何", "使用", "Django", "框架", "来", "创建", "Web", "应用程序", "。", "你", "制定", "了", "简要", "的", "项目", "规范", "，", "在", "虚拟环境", "中", "安装", "了", "Django", "，", "创建", "了", "一个", "项目", "，", "并", "核实", "该", "项目", "已", "正确", "地", "创建", "。", "你学", "\n", "习了", "如何", "创建", "应用程序", "，", "以及", "如何", "定义", "表示", "应用程序", "数据", "的", "模型", "。", "你", "学习", "了", "数据库", "，", "以及", "在", "你", "修改", "模型", "后", "，", "Django", "可为", "你", "迁移", "数据库", "提供", "什么样", "的", "帮助", "。", "你", "学习", "了", "如何", "创建", "可访", "\n", "问", "管理", "网站", "的", "超级", "用户", "，", "并", "使用", "管理", "网站", "输入", "了", "一些", "初始", "数据", "。"], ["问", "管理", "网站", "的", "超级", "用户", "，", "并", "使用", "管理", "网站", "输入", "了", "一些", "初始", "数据", "。", "\n", "你", "还", "探索", "了", "Django", " ", "shell", "，", "它", "让", "你", "能够", "在", "终端", "会话", "中", "处理", "项目", "的", "数据", "。", "你", "学习", "了", "如何", "定义", "URL", "、", "创建", "视图", "函数", "以及", "编写", "为", "网站", "创建", "网页", "的", "模板", "。", "最后", "，", "你", "使用", "了", "模板", "继承", "，", "它", "可简化", "\n", "各个", "模板", "的", "结构", "，", "并", "使得", "修改", "网站", "更", "容易", "。", "\n", "在", "第", "19", "章", "，", "我们", "将", "创建", "对", "用户", "友好", "而", "直观", "的", "网页", "，", "让", "用户", "无需", "通过", "管理", "网站", "就", "能", "添加", "新", "的", "主题", "和", "条目", "，", "以及", "编辑", "既有", "的", "条目", "。", "我们", "还", "将", "添加", "一个", "用户注册", "系统", "，", "让", "用户", "能够", "创建", "\n", "账户", "和", "自己", "的", "学习", "笔记", "。", "让", "任意", "数量", "的", "用户", "都", "能", "与", "之", "交互", "，", "是", "Web", "应用程序", "的", "核心", "所在", "。", "\n", "第", "\n", "第", " ", "19", " ", "章", "　", "用户", "账户", "\n", "章", "　", "用户", "账户", "\n", "Web", "应用程序", "的", "核心", "是", "让", "任何", "用户", "都", "能够", "注册", "账户", "并", "能够", "使用", "它", "，", "不管", "用户", "身处", "何方", "。", "在", "本章", "中", "，", "你", "将", "创建", "一些", "表单", "，", "让", "用户", "能够", "添加", "主题", "和", "条目", "，", "以及", "编辑", "既有", "的", "\n", "条目", "。", "你", "还", "将", "学习", "Django", "如何", "防范", "对", "基于", "表单", "的", "网页", "发起", "的", "常见", "攻击", "，", "这", "让", "你", "无需", "花太多", "时间", "考虑", "确保", "应用程序", "安全", "的", "问题", "。", "\n", "然后", "，", "我们", "将", "实现", "一个", "用户", "身份验证", "系统", "。", "你", "将", "创建", "一个", "注册", "页面", "，", "供", "用户", "创建", "账户", "，", "并", "让", "有些", "页面", "只能", "供", "已", "登录", "的", "用户", "访问", "。", "接下来", "，", "我们", "将", "修改", "一些", "视图", "函数", "，"], ["使得", "用户", "只能", "看到", "自己", "的", "数据", "。", "你", "将", "学习", "如何", "确保", "用户", "数据", "的", "安全", "。", "\n", "19.1", "　", "让", "用户", "能够", "输入", "数据", "\n", "　", "让", "用户", "能够", "输入", "数据", "\n", "建立", "用于", "创建", "用户", "账户", "的", "身份验证", "系统", "之前", "，", "我们", "先", "来", "添加", "几个", "页面", "，", "让", "用户", "能够", "输入", "数据", "。", "我们", "将", "让", "用户", "能够", "添加", "新", "主题", "、", "添加", "新", "条目", "以及", "编辑", "既有", "条目", "。", "\n", "当前", "，", "只有", "超级", "用户", "能够", "通过", "管理", "网站", "输入", "数据", "。", "我们", "不想", "让", "用户", "与", "管理", "网站", "交互", "，", "因此", "我们", "将", "使用", "Django", "的", "表单", "创建", "工具", "来", "创建", "让", "用户", "能够", "输入", "数据", "的", "页面", "。", "\n", "19.1", ".", "1", "　", "添加", "新", "主题", "\n", "　", "添加", "新", "主题", "\n", "首先", "来", "让", "用户", "能够", "添加", "新", "主题", "。", "创建", "基于", "表单", "的", "页面", "的", "方法", "几乎", "与", "前面", "创建", "网页", "一样", "：", "定义", "一个", "URL", "，", "编写", "一个", "视图", "函数", "并", "编写", "一个", "模板", "。", "一个", "主要", "差别", "是", "，", "需要", "导入", "包含", "表单", "\n", "的", "模块", "forms", ".", "py", "。", "\n", "1", ".", " ", "用于", "添加", "主题", "的", "表单", "\n", "用于", "添加", "主题", "的", "表单", "\n", "让", "用户", "输入", "并", "提交", "信息", "的", "页面", "都", "是", "表单", "，", "那怕", "它", "看起来", "不像", "表单", "。", "用户", "输入", "信息", "时", "，", "我们", "需要", "进行", "验证", "，", "确认", "提供", "的", "信息", "是", "正确", "的", "数据类型", "，", "且", "不是", "恶意", "的", "信息", "，", "如", "中断", "服务器", "\n", "的", "代码", "。", "然后", "，", "我们", "再", "对", "这些", "有效", "信息", "进行", "处理", "，", "并", "将", "其", "保存", "到", "数据库", "的", "合适", "地方", "。", "这些", "工作", "很多", "都", "是", "由", "Django", "自动", "完成", "的", "。"], ["在", "Django", "中", "，", "创建", "表单", "的", "最", "简单", "方式", "是", "使用", "ModelForm", "，", "它", "根据", "我们", "在", "第", "18", "章", "定义", "的", "模型", "中", "的", "信息", "自动", "创建", "表单", "。", "创建", "一个", "名为", "forms", ".", "py", "的", "文件", "，", "将", "其", "存储", "到", "models", ".", "py", "所在", "的", "目录", "\n", "中", "，", "并", "在", "其中", "编写", "你", "的", "第一个", "表单", "：", "\n", "forms", ".", "py", "\n", " ", " ", "from", " ", "django", " ", "import", " ", "forms", "\n", " ", " ", "from", " ", ".", "models", " ", "import", " ", "Topic"], ["❶", " ", "class", " ", "TopicForm", "(", "forms", ".", "ModelForm", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "class", " ", "Meta", ":", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "model", " ", "=", " ", "Topic", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "fields", " ", "=", " ", "[", "'", "text", "'", "]", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "labels", " ", "=", " ", "{", "'", "text", "'", ":", " ", "'", "'", "}", "\n", "我们", "首先", "导入", "了", "模块", "forms", " ", "以及", "要", "使用", "的", "模型", "Topic", " ", "。", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "名为", "TopicForm", " ", "的", "类", "，", "它", "继承", "了", "forms", ".", "ModelForm", " ", "。", "\n", "最", "简单", "的", "ModelForm", " ", "版本", "只", "包含", "一个", "内嵌", "的", "Meta", " ", "类", "，", "它", "告诉", "Django", "根据", "哪个", "模型", "创建", "表单", "，", "以及", "在", "表单", "中", "包含", "哪些", "字", "段", "。", "在", "❷", "处", "，", "我们", "根据", "模型", "Topic", " ", "创建", "一个", "表单", "，", "该表", "\n", "单只", "包含", "字段", "text", " ", "（", "见", "❸", "）", "。", "❹", "处", "的", "代码", "让", "Django", "不要", "为", "字", "段", "text", " ", "生成", "标签", "。", "\n", "2", ".", " ", "URL", "模式", "\n", "模式", "new", "_", "topic", "\n", "这个", "新", "网页", "的", "URL", "应", "简短", "而", "具有", "描述性", "，", "因此", "当", "用户", "要", "添加", "新", "主题", "时", "，", "我们", "将", "切换", "到", "http", ":", "/", "/", "localhost", ":", "8000", "/", "new", "_", "topic", "/", "。", "下面", "是", "网页", "new", "_", "topic", " ", "的", "URL", "模式", "，", "我们", "将", "其", "添加", "到", "\n", "learning", "_", "logs", "/", "urls", ".", "py", "中", "：", "\n", "urls", ".", "py"], ["learning", "_", "logs", "/", "urls", ".", "py", "中", "：", "\n", "urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "用于", "添加", "新", "主题", "的", "网页", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "new", "_", "topic", "/", "$", "'", ",", " ", "views", ".", "new", "_", "topic", ",", " ", "name", "=", "'", "new", "_", "topic", "'", ")", ",", "\n", "]", "\n", "这个", "URL", "模式", "将", "请求", "交给", "视图", "函数", "new", "_", "topic", "(", ")", " ", "，", "接下来", "我们", "将", "编写", "这个", "函数", "。", "\n", "3", ".", " ", "视图", "函数", "\n", "视图", "函数", "new", "_", "topic", "(", ")", "\n", "函数", "new", "_", "topic", "(", ")", " ", "需要", "处理", "两种", "情形", "：", "刚", "进入", "new", "_", "topic", " ", "网页", "（", "在", "这种", "情况", "下", "，", "它", "应", "显示", "一个", "空", "表单", "）", "；", "对", "提交", "的", "表单", "数据", "进行", "处理", "，", "并", "将", "用户", "重定向", "到", "网页", "topics", " ", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", " ", " ", "from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect", "\n", " ", " ", "from", " ", "django", ".", "core", ".", "urlresolvers", " ", "import", " ", "reverse", "\n", " ", " ", "from", " ", ".", "models", " ", "import", " ", "Topic", "\n", " ", " ", "from", " ", ".", "forms", " ", "import", " ", "TopicForm"], ["from", " ", ".", "forms", " ", "import", " ", "TopicForm", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "new", "_", "topic", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "添加", "新", "主题", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "未", "提交", "数据", "：", "创建", "一个", "新", "表单", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "TopicForm", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "POST", "提交", "的", "数据", ",", "对", "数据", "进行", "处理", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "TopicForm", "(", "request", ".", "POST", ")", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", ".", "save", "(", ")", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "topics", "'", ")", ")", "\n", "❼", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "form", "'", ":", " ", "form", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "new", "_", "topic", ".", "html", "'", ",", " ", "context", ")"], ["我们", "导入", "了", "HttpResponseRedirect", " ", "类", "，", "用户", "提交", "主题", "后", "我们", "将", "使用", "这个", "类", "将", "用户", "重定向", "到", "网页", "topics", " ", "。", "函数", "reverse", "(", ")", " ", "根据", "指定", "的", "URL", "模型", "确定", "URL", "，", "这", "意味着", "Django", "\n", "将", "在", "页面", "被", "请求", "时", "生成", "URL", "。", "我们", "还", "导入", "了", "刚才", "创建", "的", "表单", "TopicForm", " ", "。", "\n", "4", ".", " ", "GET", "请求", "和", "\n", "请求", "和", "POST", "请求", "\n", "请求", "\n", "创建", "Web", "应用程序", "时", "，", "将", "用到", "的", "两种", "主要", "请求", "类型", "是", "GET", "请求", "和", "POST", "请求", "。", "对于", "只是", "从", "服务器", "读取数据", "的", "页面", "，", "使用", "GET", "请求", "；", "在", "用户", "需要", "通过", "表单", "提交", "信息", "时", "，", "通常", "使用", "POST", "\n", "请求", "。", "处理", "所有", "表单", "时", "，", "我们", "都", "将", "指定", "使用", "POST", "方法", "。", "还有", "一些", "其他", "类型", "的", "请求", "，", "但", "这个", "项目", "没有", "使用", "。", "\n", "函数", "new", "_", "topic", "(", ")", " ", "将", "请求", "对象", "作为", "参数", "。", "用户", "初次", "请求", "该", "网页", "时", "，", "其", "浏览器", "将", "发送", "GET", "请求", "；", "用户", "填写", "并", "提交", "表单", "时", "，", "其", "浏览器", "将", "发送", "POST", "请求", "。", "根据", "请求", "的", "类型", "，", "我们", "可以", "\n", "确定", "用户", "请求", "的", "是", "空", "表单", "（", "GET", "请求", "）", "还是", "要求", "对", "填写", "好", "的", "表单", "进行", "处理", "（", "POST", "请求", "）", "。", "\n", "❶", "处", "的", "测试", "确定", "请求", "方法", "是", "GET", "还是", "POST", "。", "如果", "请求", "方法", "不是", "POST", "，", "请求", "就", "可能", "是", "GET", "，", "因此", "我们", "需要", "返回", "一个", "空", "表单", "（", "即便", "请求", "是", "其他", "类型", "的", "，", "返回", "一个", "空", "表单", "也", "不会", "有", "任何"], ["问题", "）", "。", "我们", "创建", "一个", "TopicForm", " ", "实例", "（", "见", "❷", "）", "，", "将", "其", "存储", "在", "变量", "form", " ", "中", "，", "再", "通过", "上下文", "字典", "将", "这个", "表单", "发送给", "模板", "（", "见", "❼", "）", "。", "由于", "实例", "化", "TopicForm", " ", "时", "我们", "没有", "指定", "任何", "\n", "实参", "，", "Django", "将", "创建", "一个", "可", "供", "用户", "填写", "的", "空", "表单", "。", "\n", "如果", "请求", "方法", "为", "POST", "，", "将", "执行", "else", " ", "代码", "块", "，", "对", "提交", "的", "表单", "数据", "进行", "处理", "。", "我们", "使用", "用户", "输入", "的", "数据", "（", "它们", "存储", "在", "request", ".", "POST", " ", "中", "）", "创建", "一个", "TopicForm", " ", "实例", "（", "见", "❸", "）", "，", "\n", "这样", "对象", "form", " ", "将", "包含", "用户", "提交", "的", "信息", "。", "\n", "要", "将", "提交", "的", "信息", "保存", "到", "数据库", "，", "必须", "先", "通过", "检查", "确定", "它们", "是", "有效", "的", "（", "见", "❹", "）", "。", "函数", "is", "_", "valid", "(", ")", " ", "核实", "用户", "填写", "了", "所有", "必不可少", "的", "字", "段", "（", "表", "单字", "段", "默认", "都", "是", "必不可少", "的", "）", "，", "且", "输入", "\n", "的", "数据", "与", "要求", "的", "字", "段", "类型", "一致", "（", "例如", "，", "字段", "text", " ", "少于", "200", "个字符", "，", "这是", "我们", "在", "第", "18", "章中", "的", "models", ".", "py", "中", "指定", "的", "）", "。", "这种", "自动", "验证", "避免", "了", "我们", "去", "做", "大量", "的", "工作", "。", "如果", "所有", "字段", "都", "有", "\n", "效", "，", "我们", "就", "可", "调用", "save", "(", ")", " ", "（", "见", "❺", "）", "，", "将", "表单", "中", "的", "数据", "写入", "数据库", "。", "保存", "数据", "后", "，", "就", "可", "离开", "这个", "页面", "了", "。", "我们", "使用", "reverse", "(", ")", " ", "获取", "页面", "topics", " ", "的", "URL", "，", "并", "将", "其", "传递"], ["给", "HttpResponseRedirect", "(", ")", " ", "（", "见", "❻", "）", "，", "后者", "将", "用户", "的", "浏览器", "重定向", "到", "页面", "topics", " ", "。", "在", "页面", "topics", " ", "中", "，", "用户", "将", "在", "主题", "列表", "中", "看到", "他", "刚", "输入", "的", "主题", "。", "\n", "5", ".", " ", "模板", "\n", "模板", "new", "_", "topic", "\n", "下面", "来", "创建", "新", "模板", "new", "_", "topic", ".", "html", "，", "用于", "显示", "我们", "刚", "创建", "的", "表单", "：", "\n", "new", "_", "topic", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "Add", " ", "a", " ", "new", " ", "topic", ":", "<", "/", "p", ">", "\n", "❶", " ", " ", " ", "<", "form", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "topic", "'", " ", "%", "}", "\"", " ", "method", "=", "'", "post", "'", ">", "\n", "❷", " ", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", "❸", " ", " ", " ", " ", " ", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", "\n", "❹", " ", " ", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", ">", "add", " ", "topic", "<", "/", "button", ">", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}"], ["这个", "模板", "继承", "了", "base", ".", "html", "，", "因此", "其", "基本", "结构", "与", "项目", "“", "学习", "笔记", "”", "的", "其他", "页面", "相同", "。", "在", "❶", "处", "，", "我们", "定义", "了", "一个", "HTML", "表单", "。", "实参", "action", " ", "告诉", "服务器", "将", "提交", "的", "表单", "数据", "发送到", "哪里", "，", "这", "\n", "里", "我们", "将", "它", "发回", "给", "视图", "函数", "new", "_", "topic", "(", ")", " ", "。", "实参", "method", " ", "让", "浏览器", "以", "POST", "请求", "的", "方式", "提交", "数据", "。", "\n", "Django", "使用", "模板", "标签", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", " ", "（", "见", "❷", "）", "来", "防止", "攻击者", "利用", "表单", "来", "获得", "对", "服务器", "未经", "授权", "的", "访问", "（", "这种", "攻击", "被", "称为", "跨站", "请求", "伪造", "\n", "跨站", "请求", "伪造", " ", "）", "。", "在", "❸", "处", "，", "我们", "显示", "表单", "，", "从中", "可", "\n", "知", "Django", "使得", "完成", "显示", "表单", "等", "任务", "有", "多", "简单", "：", "我们", "只", "需", "包含", "模板", "变量", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", " ", "，", "就", "可", "让", "Django", "自动", "创建", "显示", "表单", "所", "需", "的", "全部", "字", "段", "。", "修饰符", "as", "_", "p", " ", "让", "Django", "以", "段落", "格式", "渲", "\n", "染", "所有", "表单", "元素", "，", "这是", "一种", "整洁地", "显示", "表单", "的", "简单", "方式", "。", "\n", "Django", "不会", "为", "表单", "创建", "提交", "按钮", "，", "因此", "我们", "在", "❹", "处", "定义", "了", "一个", "这样", "的", "按钮", "。", "\n", "6", ".", " ", "链接", "到", "页面", "\n", "链接", "到", "页面", "new", "_", "topic", "\n", "接下来", "，", "我们", "在", "页面", "topics", " ", "中", "添加", "一个", "到", "页面", "new", "_", "topic", " ", "的", "链接", "：", "\n", "topics", ".", "html"], ["topics", ".", "html", "\n", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", "<", "p", ">", "Topics", "<", "/", "p", ">", "\n", " ", " ", "<", "ul", ">", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "<", "/", "ul", ">", "\n", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "topic", "'", " ", "%", "}", "\"", ">", "Add", " ", "a", " ", "new", " ", "topic", ":", "<", "/", "a", ">", "\n", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "这个", "链接", "放在", "了", "既有", "主题", "列表", "的", "后面", "。", "图", "19", "-", "1", "显示", "了", "生成", "的", "表单", "。", "请", "使用", "这个", "表单", "来", "添加", "几个", "新", "主题", "。", "\n", "图", "\n", "图", "19", "-", "1", "　", "用于", "添加", "新", "主题", "的", "页面", "\n", "　", "用于", "添加", "新", "主题", "的", "页面", "\n", "19.1", ".", "2", "　", "添加", "新", "条目", "\n", "　", "添加", "新", "条目", "\n", "现在", "用户", "可以", "添加", "新", "主题", "了", "，", "但", "他们", "还", "想", "添加", "新", "条目", "。", "我们", "将", "再次", "定义", "URL", "，", "编写", "视图", "函数", "和", "模板", "，", "并", "链接", "到", "添加", "新条", "目的", "网页", "。", "但", "在此之前", "，", "我们", "需要", "在", "forms", ".", "py", "中", "再", "添加", "一个", "\n", "类", "。", "\n", "1", ".", " ", "用于", "添加", "新条", "目的", "表单", "\n", "用于", "添加", "新条", "目的", "表单", "\n", "我们", "需要", "创建", "一个", "与", "模型", "Entry", " ", "相关联", "的", "表单", "，", "但", "这个", "表单", "的", "定制", "程度", "比", "TopicForm", " ", "要", "高些", "：", "\n", "forms", ".", "py", "\n", " ", " ", "from", " ", "django", " ", "import", " ", "forms"], ["forms", ".", "py", "\n", " ", " ", "from", " ", "django", " ", "import", " ", "forms", "\n", " ", " ", "from", " ", ".", "models", " ", "import", " ", "Topic", ",", " ", "Entry", "\n", " ", " ", "class", " ", "TopicForm", "(", "forms", ".", "ModelForm", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", "class", " ", "EntryForm", "(", "forms", ".", "ModelForm", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "class", " ", "Meta", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "model", " ", "=", " ", "Entry", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "fields", " ", "=", " ", "[", "'", "text", "'", "]", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "labels", " ", "=", " ", "{", "'", "text", "'", ":", " ", "'", "'", "}", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "widgets", " ", "=", " ", "{", "'", "text", "'", ":", " ", "forms", ".", "Textarea", "(", "attrs", "=", "{", "'", "cols", "'", ":", " ", "80", "}", ")", "}", "\n", "我们", "首先", "修改", "了", "import", " ", "语句", "，", "使", "其除", "导入", "Topic", " ", "外", "，", "还", "导入", "Entry", " ", "。", "新类", "EntryForm", " ", "继承", "了", "forms", ".", "ModelForm", " ", "，", "它", "包含", "的", "Meta", " ", "类", "指出", "了", "表单", "基于", "的", "模型", "以及", "要", "在", "表单", "\n", "中", "包含", "哪些", "字", "段", "。", "这里", "也", "给", "字", "段", "'", "text", "'", " ", "指定", "了", "一个", "空", "标签", "（", "见", "❶", "）", "。", "\n", "在", "❷", "处", "，", "我们", "定义", "了", "属性", "widgets", " ", "。", "小", "部件"], ["在", "❷", "处", "，", "我们", "定义", "了", "属性", "widgets", " ", "。", "小", "部件", "\n", "小", "部件", " ", "（", "widget", "）", "是", "一个", "HTML", "表单", "元素", "，", "如", "单行", "文本框", "、", "多行", "文本", "区域", "或", "下", "拉", "列表", "。", "通过", "设置", "属性", "widgets", " ", "，", "可", "覆盖", "Django", "选择", "的", "默认", "小", "\n", "部件", "。", "通过", "让", "Django", "使用", "forms", ".", "Textarea", " ", "，", "我们", "定制", "了", "字", "段", "'", "text", "'", " ", "的", "输入", "小", "部件", "，", "将", "文本", "区域", "的", "宽度", "设置", "为", "80", "列", "，", "而", "不是", "默认", "的", "40", "列", "。", "这", "给", "用户", "提供", "了", "足够", "的", "空间", "，", "可以", "\n", "编写", "有", "意义", "的", "条目", "。", "\n", "2", ".", " ", "URL", "模式", "\n", "模式", "new", "_", "entry", "\n", "在", "用于", "添加", "新条", "目的", "页面", "的", "URL", "模式", "中", "，", "需要", "包含", "实参", "topic", "_", "id", " ", "，", "因为", "条目", "必须", "与", "特定", "的", "主题", "相关联", "。", "该", "URL", "模式", "如下", "，", "我们", "将", "它", "添加", "到", "了", "learning", "_", "logs", "/", "urls", ".", "py", "中", "："], ["urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "用于", "添加", "新条", "目的", "页面", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "new", "_", "entry", "/", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", "/", "$", "'", ",", " ", "views", ".", "new", "_", "entry", ",", " ", "name", "=", "'", "new", "_", "entry", "'", ")", ",", "\n", "]", "\n", "这个", "URL", "模式", "与", "形式", "为", "http", ":", "/", "/", "localhost", ":", "8000", "/", "new", "_", "entry", "/", "id", " ", "/", " ", "的", "URL", "匹配", "，", "其中", " ", "id", " ", "是", "一个", "与", "主题", "ID", "匹配", "的", "数字", "。", "代码", "(", "?", "P", "<", "topic", "_", "id", ">", "\\", "d", "+", ")", " ", "捕获", "一个", "数字", "值", "，", "并", "\n", "将", "其", "存储", "在", "变量", "topic", "_", "id", " ", "中", "。", "请求", "的", "URL", "与", "这个", "模式匹配", "时", "，", "Django", "将", "请求", "和", "主题", "ID", "发送给", "函数", "new", "_", "entry", "(", ")", " ", "。", "\n", "3", ".", " ", "视图", "函数", "\n", "视图", "函数", "new", "_", "entry", "(", ")", "\n", "视图", "函数", "new", "_", "entry", "(", ")", " ", "与", "函数", "new", "_", "topic", "(", ")", " ", "很", "像", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", ".", "models", " ", "import", " ", "Topic", "\n", " ", " ", "from", " ", ".", "forms", " ", "import", " ", "TopicForm", ",", " ", "EntryForm"], ["from", " ", ".", "forms", " ", "import", " ", "TopicForm", ",", " ", "EntryForm", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "new", "_", "entry", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "在", "特定", "的", "主题", "中", "添加", "新", "条目", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "topic", " ", "=", " ", "Topic", ".", "objects", ".", "get", "(", "id", "=", "topic", "_", "id", ")", "\n", "❷", " ", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "未", "提交", "数据", ",", "创建", "一个", "空", "表单", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "EntryForm", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "POST", "提交", "的", "数据", ",", "对", "数据", "进行", "处理", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "EntryForm", "(", "data", "=", "request", ".", "POST", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "entry", " ", "=", " ", "form", ".", "save", "(", "commit", "=", "False", ")", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "entry", ".", "topic", " ", "=", " ", "topic", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "entry", ".", "save", "(", ")"], ["new", "_", "entry", ".", "save", "(", ")", "\n", "❼", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "topic", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "args", "=", "[", "topic", "_", "id", "]", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "topic", "'", ":", " ", "topic", ",", " ", "'", "form", "'", ":", " ", "form", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "new", "_", "entry", ".", "html", "'", ",", " ", "context", ")", "\n", "我们", "修改", "了", "import", " ", "语句", "，", "在", "其中", "包含", "了", "刚", "创建", "的", "EntryForm", " ", "。", "new", "_", "entry", "(", ")", " ", "的", "定义", "包含", "形参", "topic", "_", "id", " ", "，", "用于", "存储", "从", "URL", "中", "获得", "的", "值", "。", "渲染", "页面", "以及", "处理", "表单", "数据", "时", "，", "都", "\n", "需要", "知道", "针对", "的", "是", "哪个", "主题", "，", "因此", "我们", "使用", "topic", "_", "id", " ", "来", "获得", "正确", "的", "主题", "（", "见", "❶", "）", "。", "\n", "在", "❷", "处", "，", "我们", "检查", "请求", "方法", "是", "POST", "还是", "GET", "。", "如果", "是", "GET", "请求", "，", "将", "执行", "if", " ", "代码", "块", "：", "创建", "一个", "空", "的", "EntryForm", " ", "实例", "（", "见", "❸", "）", "。", "如果", "请求", "方法", "为", "POST", "，", "我们", "就", "对", "数据", "进行", "处理", "："], ["创建", "一个", "EntryForm", " ", "实例", "，", "使用", "request", " ", "对象", "中", "的", "POST", "数据", "来", "填充", "它", "（", "见", "❹", "）", "；", "再", "检查", "表单", "是否", "有效", "，", "如果", "有效", "，", "就", "设置", "条目", "对象", "的", "属性", "topic", " ", "，", "再", "将", "条目", "对象", "保存", "到", "数据", "\n", "库", "。", "\n", "调用", "save", "(", ")", " ", "时", "，", "我们", "传递", "了", "实参", "commit", "=", "False", " ", "（", "见", "❺", "）", "，", "让", "Django", "创建", "一个", "新", "的", "条目", "对象", "，", "并", "将", "其", "存储", "到", "new", "_", "entry", " ", "中", "，", "但", "不", "将", "它", "保存", "到", "数据库", "中", "。", "我们", "将", "new", "_", "entry", "\n", "的", "属性", "topic", " ", "设置", "为", "在", "这个", "函数", "开头", "从", "数据库", "中", "获取", "的", "主题", "（", "见", "❻", "）", "，", "然后", "调用", "save", "(", ")", " ", "，", "且", "不", "指定", "任何", "实参", "。", "这", "将", "把", "条目", "保存", "到", "数据库", "，", "并", "将", "其", "与", "正确", "的", "主题", "相关联", "。", "\n", "在", "❼", "处", "，", "我们", "将", "用户", "重定向", "到", "显示", "相关", "主题", "的", "页面", "。", "调用", "reverse", "(", ")", " ", "时", "，", "需要", "提供", "两个", "实参", "：", "要", "根据", "它", "来", "生成", "URL", "的", "URL", "模式", "的", "名称", "；", "列表", "args", " ", "，", "其中", "包含", "要", "包含", "在", "URL", "中", "的", "\n", "所有", "实参", "。", "在", "这里", "，", "列表", "args", " ", "只有", "一个", "元素", "—", "—", "topic", "_", "id", " ", "。", "接下来", "，", "调用", "HttpResponseRedirect", "(", ")", " ", "将", "用户", "重定向", "到", "显示", "新增", "条目", "所属", "主题", "的", "页面", "，", "用户", "将", "在", "该", "页面", "的", "\n", "条目", "列表", "中", "看到", "新", "添加", "的", "条目", "。", "\n", "4", ".", " ", "模板", "\n", "模板", "new", "_", "entry"], ["条目", "列表", "中", "看到", "新", "添加", "的", "条目", "。", "\n", "4", ".", " ", "模板", "\n", "模板", "new", "_", "entry", "\n", "从", "下面", "的", "代码", "可知", "，", "模板", "new", "_", "entry", " ", "类似", "于", "模板", "new", "_", "topic", " ", "：", "\n", "new", "_", "entry", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❶", " ", " ", " ", "<", "p", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topic", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "a", ">", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "<", "p", ">", "Add", " ", "a", " ", "new", " ", "entry", ":", "<", "/", "p", ">", "\n", "❷", " ", " ", " ", "<", "form", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "entry", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", " ", "method", "=", "'", "post", "'", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", "\n", " ", " ", " ", " ", " ", " ", "<", "button", " ", "name", "=", "'", "submit", "'", ">", "add", " ", "entry", "<", "/", "button", ">", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}"], ["<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "我们", "在", "页面", "顶端", "显示", "了", "主题", "（", "见", "❶", "）", "，", "让", "用户", "知道", "他", "是", "在", "哪个", "主题", "中", "添加", "条目", "；", "该", "主题", "名", "也", "是", "一个", "链接", "，", "可", "用于", "返回", "到", "该", "主题", "的", "主", "页面", "。", "\n", "表单", "的", "实参", "action", " ", "包含", "URL", "中", "的", "topic", "_", "id", " ", "值", "，", "让", "视图", "函数", "能够", "将", "新", "条目", "关联", "到", "正确", "的", "主题", "（", "见", "❷", "）", "。", "除此之外", "，", "这个", "模板", "与", "模板", "new", "_", "topic", ".", "html", "完全相同", "。", "\n", "5", ".", " ", "链接", "到", "页面", "\n", "链接", "到", "页面", "new", "_", "entry", "\n", "接下来", "，", "我们", "需要", "在", "显示", "特定", "主题", "的", "页面", "中", "添加", "到", "页面", "new", "_", "entry", " ", "的", "链接", "：", "\n", "topic", ".", "html", "\n", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", "<", "p", ">", "Topic", ":", " ", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "p", ">", "\n", " ", " ", "<", "p", ">", "Entries", ":", "<", "/", "p", ">", "\n", " ", " ", "<", "p", ">", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "entry", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "add", " ", "new", " ", "entry", "<", "/", "a", ">"], ["<", "/", "p", ">", "\n", " ", " ", "<", "ul", ">", "\n", " ", " ", "--", "snip", "—", "\n", " ", " ", "<", "/", "ul", ">", "\n", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "我们", "在", "显示", "条", "目前", "添加", "链接", "，", "因为", "在", "这种", "页面", "中", "，", "执行", "的", "最", "常见", "的", "操作", "是", "添加", "新", "条目", "。", "图", "19", "-", "2", "显示", "了", "页面", "new", "_", "entry", " ", "。", "现在", "用户", "可以", "添加", "新", "主题", "，", "还", "可以", "在", "每个", "主题", "中", "添加", "任", "\n", "意", "数量", "的", "条目", "。", "请", "在", "一些", "既有", "主题", "中", "添加", "一些", "新", "条目", "，", "尝试", "使用", "一下", "页面", "new", "_", "entry", " ", "。", "\n", "图", "\n", "图", "19", "-", "2", "　", "页面", "\n", "　", "页面", "new", "_", "entry", "\n", "19.1", ".", "3", "　", "编辑", "条目", "\n", "　", "编辑", "条目", "\n", "下面", "来", "创建", "一个", "页面", "，", "让", "用户", "能够", "编辑", "既有", "的", "条目", "。", "\n", "1", ".", " ", "URL", "模式", "\n", "模式", "edit", "_", "entry", "\n", "这个", "页面", "的", "URL", "需要", "传递", "要", "编辑", "的", "条", "目的", "ID", "。", "修改", "后", "的", "learning", "_", "logs", "/", "urls", ".", "py", "如下", "：", "\n", "urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "用于", "编辑", "条", "目的", "页面", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "edit", "_", "entry", "/", "(", "?", "P", "<", "entry", "_", "id", ">", "\\", "d", "+", ")", "/", "$", "'", ",", " ", "views", ".", "edit", "_", "entry", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "name", "=", "'", "edit", "_", "entry", "'", ")", ",", "\n", "]"], ["name", "=", "'", "edit", "_", "entry", "'", ")", ",", "\n", "]", "\n", "在", "URL", "（", "如", "http", ":", "/", "/", "localhost", ":", "8000", "/", "edit", "_", "entry", "/", "1", "/", "）", "中", "传递", "的", "ID", "存储", "在", "形参", "entry", "_", "id", " ", "中", "。", "这个", "URL", "模式", "将", "预期", "匹配", "的", "请求", "发送给", "视图", "函数", "edit", "_", "entry", "(", ")", " ", "。", "\n", "2", ".", " ", "视图", "函数", "\n", "视图", "函数", "edit", "_", "entry", "(", ")", "\n", "页面", "edit", "_", "entry", " ", "收到", "GET", "请求", "时", "，", "edit", "_", "entry", "(", ")", " ", "将", "返回", "一个", "表单", "，", "让", "用户", "能够", "对", "条目", "进行", "编辑", "。", "该", "页面", "收到", "POST", "请求", "（", "条目", "文本", "经过", "修订", "）", "时", "，", "它", "将", "修改", "后", "的", "文本", "保存", "到", "\n", "数据库", "中", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "from", " ", ".", "models", " ", "import", " ", "Topic", ",", " ", "Entry", "\n", " ", " ", "from", " ", ".", "forms", " ", "import", " ", "TopicForm", ",", " ", "EntryForm", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "edit", "_", "entry", "(", "request", ",", " ", "entry", "_", "id", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "编辑", "既有", "条目", "\"", "\"", "\"", "\n", "❶", " ", " ", " ", " ", " ", "entry", " ", "=", " ", "Entry", ".", "objects", ".", "get", "(", "id", "=", "entry", "_", "id", ")"], ["❶", " ", " ", " ", " ", " ", "entry", " ", "=", " ", "Entry", ".", "objects", ".", "get", "(", "id", "=", "entry", "_", "id", ")", "\n", " ", " ", " ", " ", " ", " ", "topic", " ", "=", " ", "entry", ".", "topic", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "初次", "请求", "，", "使用", "当前", "条目", "填充", "表单", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "EntryForm", "(", "instance", "=", "entry", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "POST", "提交", "的", "数据", "，", "对", "数据", "进行", "处理", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "EntryForm", "(", "instance", "=", "entry", ",", " ", "data", "=", "request", ".", "POST", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", ".", "save", "(", ")", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "topic", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "args", "=", "[", "topic", ".", "id", "]", ")", ")"], ["context", " ", "=", " ", "{", "'", "entry", "'", ":", " ", "entry", ",", " ", "'", "topic", "'", ":", " ", "topic", ",", " ", "'", "form", "'", ":", " ", "form", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "edit", "_", "entry", ".", "html", "'", ",", " ", "context", ")", "\n", "我们", "首先", "需要", "导入", "模型", "Entry", " ", "。", "在", "❶", "处", "，", "我们", "获取", "用户", "要", "修改", "的", "条目", "对象", "，", "以及", "与", "该", "条目", "相关联", "的", "主题", "。", "在", "请求", "方法", "为", "GET", "时", "将", "执行", "的", "if", " ", "代码", "块", "中", "，", "我们", "使用", "实", "\n", "参", "instance", "=", "entry", " ", "创建", "一个", "EntryForm", " ", "实例", "（", "见", "❷", "）", "。", "这个", "实参", "让", "Django", "创建", "一个", "表单", "，", "并", "使用", "既有", "条目", "对象", "中", "的", "信息", "填充", "它", "。", "用户", "将", "看到", "既有", "的", "数据", "，", "并", "能够", "编辑", "它们", "。"], ["处理", "POST", "请求", "时", "，", "我们", "传递", "实参", "instance", "=", "entry", " ", "和", "data", "=", "request", ".", "POST", " ", "（", "见", "❸", "）", "，", "让", "Django", "根据", "既有", "条目", "对象", "创建", "一个", "表单", "实例", "，", "并", "根据", "request", ".", "POST", " ", "中", "的", "相关", "数", "\n", "据", "对", "其", "进行", "修改", "。", "然后", "，", "我们", "检查", "表单", "是否", "有效", "，", "如果", "有效", "，", "就", "调用", "save", "(", ")", " ", "，", "且", "不", "指定", "任何", "实参", "（", "见", "❹", "）", "。", "接下来", "，", "我们", "重定向", "到", "显示", "条目", "所属", "主题", "的", "页面", "（", "见", "❺", "）", "，", "用户", "将", "\n", "在", "其中", "看到", "其", "编辑", "的", "条", "目的", "新", "版本", "。", "\n", "3", ".", " ", "模板", "\n", "模板", "edit", "_", "entry", "\n", "下面", "是", "模板", "edit", "_", "entry", ".", "html", "，", "它", "与", "模板", "new", "_", "entry", ".", "html", "类似", "：", "\n", "edit", "_", "entry", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topic", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "a", ">", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "<", "p", ">", "Edit", " ", "entry", ":", "<", "/", "p", ">"], ["<", "p", ">", "Edit", " ", "entry", ":", "<", "/", "p", ">", "\n", "❶", " ", " ", " ", "<", "form", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "edit", "_", "entry", "'", " ", "entry", ".", "id", " ", "%", "}", "\"", " ", "method", "=", "'", "post", "'", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", "\n", "❷", " ", " ", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", ">", "save", " ", "changes", "<", "/", "button", ">", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "在", "❶", "处", "，", "实参", "action", " ", "将", "表单", "发回", "给", "函数", "edit", "_", "entry", "(", ")", " ", "进行", "处理", "。", "在", "标签", "{", "%", " ", "url", " ", "%", "}", " ", "中", "，", "我们", "将", "条目", "ID", "作为", "一个", "实参", "，", "让", "视图", "对象", "能够", "修改", "正确", "的", "条目", "对象", "。", "我们", "将", "提交", "按", "\n", "钮", "命名", "为", "save", " ", "changes", "，", "以", "提醒", "用户", "：", "单击", "该", "按钮", "将", "保存", "所", "做", "的", "编辑", "，", "而", "不是", "创建", "一个", "新", "条目", "（", "见", "❷", "）", "。", "\n", "4", ".", " ", "链接", "到", "页面", "\n", "链接", "到", "页面", "edit", "_", "entry", "\n", "现在", "，", "在", "显示", "特定", "主题", "的", "页面", "中", "，", "需要", "给", "每个", "条目", "添加", "到", "页面", "edit", "_", "entry", " ", "的", "链接", "：", "\n", "topic", ".", "html", "\n", "--", "snip", "--", "\n", " ", " ", "{", "%", " ", "for", " ", "entry", " ", "in", " ", "entries", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "li", ">"], ["--", "snip", "--", "\n", " ", " ", "{", "%", " ", "for", " ", "entry", " ", "in", " ", "entries", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "li", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "p", ">", "{", "{", " ", "entry", ".", "date", "_", "added", "|", "date", ":", "'", "M", " ", "d", ",", " ", "Y", " ", "H", ":", "i", "'", " ", "}", "}", "<", "/", "p", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "p", ">", "{", "{", " ", "entry", ".", "text", "|", "linebreaks", " ", "}", "}", "<", "/", "p", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "p", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "edit", "_", "entry", "'", " ", "entry", ".", "id", " ", "%", "}", "\"", ">", "edit", " ", "entry", "<", "/", "a", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "<", "/", "li", ">", "\n", "--", "snip", "--", "\n", "我们", "将", "编辑", "链接", "放在", "每个", "条", "目的", "日期", "和", "文本", "后面", "。", "在", "循环", "中", "，", "我们", "使用", "模板", "标签", "{", "%", " ", "url", " ", "%", "}", " ", "根据", "URL", "模式", "edit", "_", "entry", " ", "和", "当前", "条", "目的", "ID", "属性", "（", "entry", ".", "id", " ", "）", "来", "确定", "URL", "。", "链接", "\n", "文本", "为", "\"", "edit", " ", "entry", "\"", " ", "，", "它", "出现", "在", "页面", "中", "每个", "条", "目的", "后面", "。", "图", "19", "-", "3", "显示", "了", "包含", "这些", "链接", "时", "，", "显示", "特定", "主题", "的", "页面", "是", "什么样", "的", "。", "\n", "图", "\n", "图", "19", "-", "3", "　", "每个", "条目", "都", "有", "一个", "用于", "对", "其", "进行", "编辑", "的", "链接", "\n", "　", "每个", "条目", "都", "有", "一个", "用于", "对", "其", "进行", "编辑", "的", "链接"], ["图", "\n", "图", "19", "-", "3", "　", "每个", "条目", "都", "有", "一个", "用于", "对", "其", "进行", "编辑", "的", "链接", "\n", "　", "每个", "条目", "都", "有", "一个", "用于", "对", "其", "进行", "编辑", "的", "链接", "\n", "至此", "，", "“", "学习", "笔记", "”", "已", "具备", "了", "需要", "的", "大部分", "功能", "。", "用户", "可", "添加", "主题", "和", "条目", "，", "还", "可", "根据", "需要", "查看", "任何", "一组", "条目", "。", "在", "下", "一节", "，", "我们", "将", "实现", "一个", "用户注册", "系统", "，", "让", "任何人", "都", "可", "向", "“", "学习", "笔", "\n", "记", "”", "申请", "账户", "，", "并", "创建", "自己", "的", "主题", "和", "条目", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "19", "-", "1", " ", "博客", "\n", "博客", " ", "：", "新建", "一个", "Django", "项目", "，", "将", "其", "命名", "为", "Blog", "。", "在", "这个", "项目", "中", "，", "创建", "一个", "名为", "blogs", "的", "应用程序", "，", "并", "在", "其中", "创建", "一个", "名为", "BlogPost", " ", "的", "模型", "。", "这个", "模型", "应包", "\n", "含", "title", " ", "、", "text", " ", "和", "date", "_", "added", " ", "等", "字", "段", "。", "为", "这个", "项目", "创建", "一个", "超级", "用户", "，", "并", "使用", "管理", "网站", "创建", "几个", "简短", "的", "帖子", "。", "创建", "一个", "主页", "，", "在", "其中", "按", "时间", "顺序", "显示", "所有", "的", "帖", "\n", "子", "。", "\n", "创建", "两个", "表单", "，", "其中", "一个", "用于", "发布", "新", "帖子", "，", "另", "一个", "用于", "编辑", "既有", "的", "帖子", "。", "\n", "尝试", "填写", "这些", "表单", "，", "确认", "它们", "能够", "正确", "地", "工作", "。", "\n", "19.2", "　", "创建", "用户", "账户", "\n", "　", "创建", "用户", "账户"], ["在", "这", "一节", "，", "我们", "将", "建立", "一个", "用户注册", "和", "身份验证", "系统", "，", "让", "用户", "能够", "注册", "账户", "，", "进而", "登录", "和", "注销", "。", "我们", "将", "创建", "一个", "新", "的", "应用程序", "，", "其中", "包含", "与", "处理", "用户", "账户", "相关", "的", "所有", "功能", "。", "我们", "\n", "还", "将", "对模型", "Topic", " ", "稍", "做", "修改", "，", "让", "每个", "主题", "都", "归属于", "特定", "用户", "。", "\n", "19.2", ".", "1", "　", "应用程序", "\n", "　", "应用程序", "users", "\n", "我们", "首先", "使用", "命令", "startapp", " ", "来", "创建", "一个", "名为", "users", " ", "的", "应用程序", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "startapp", " ", "users", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", "\n", "❶", " ", "db", ".", "sqlite3", " ", " ", "learning", "_", "log", " ", " ", "learning", "_", "logs", " ", " ", "ll", "_", "env", " ", " ", "manage", ".", "py", " ", " ", "users", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "ls", " ", "users", "\n", "❷", " ", "admin", ".", "py", " ", "__", "init", "__.", "py", " ", "migrations", " ", "models", ".", "py", " ", "tests", ".", "py", " ", "views", ".", "py", "\n", "这个", "命令", "新建", "一个", "名为", "users", "的", "目录", "（", "见", "❶", "）", "，", "其", "结构", "与", "应用程序", "learning", "_", "logs", " ", "相同", "（", "见", "❷", "）", "。", "\n", "1", ".", " ", "将", "应用程序", "\n", "将", "应用程序", "users", " ", "添加", "到", "\n", "添加", "到", "settings", ".", "py", "中", "\n", "中"], ["1", ".", " ", "将", "应用程序", "\n", "将", "应用程序", "users", " ", "添加", "到", "\n", "添加", "到", "settings", ".", "py", "中", "\n", "中", "\n", "在", "settings", ".", "py", "中", "，", "我们", "需要", "将", "这个", "新", "的", "应用程序", "添加", "到", "INSTALLED", "_", "APPS", " ", "中", "，", "如下", "所示", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "INSTALLED", "_", "APPS", " ", "=", " ", "(", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "我", "的", "应用程序", "\n", " ", " ", " ", " ", "'", "learning", "_", "logs", "'", ",", "\n", " ", " ", " ", " ", "'", "users", "'", ",", "\n", ")", "\n", "--", "snip", "--", "\n", "这样", "，", "Django", "将", "把", "应用程序", "users", " ", "包含", "到", "项目", "中", "。", "\n", "2", ".", " ", "包含", "应用程序", "\n", "包含", "应用程序", "users", " ", "的", "\n", "的", "URL", "\n", "接下来", "，", "我们", "需要", "修改", "项目", "根目录", "中", "的", "urls", ".", "py", "，", "使", "其", "包含", "我们", "将", "为", "应用程序", "users", " ", "定义", "的", "URL", "：", "\n", "urls", ".", "py", "\n", "from", " ", "django", ".", "conf", ".", "urls", " ", "import", " ", "include", ",", " ", "url", "\n", "from", " ", "django", ".", "contrib", " ", "import", " ", "admin", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "admin", "/", "'", ",", " ", "include", "(", "admin", ".", "site", ".", "urls", ")", ")", ","], ["url", "(", "r", "'", "^", "admin", "/", "'", ",", " ", "include", "(", "admin", ".", "site", ".", "urls", ")", ")", ",", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "users", "/", "'", ",", " ", "include", "(", "'", "users", ".", "urls", "'", ",", " ", "namespace", "=", "'", "users", "'", ")", ")", ",", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "'", ",", " ", "include", "(", "'", "learning", "_", "logs", ".", "urls", "'", ",", " ", "namespace", "=", "'", "learning", "_", "logs", "'", ")", ")", ",", "\n", "]", "\n", "我们", "添加", "了", "一行", "代码", "，", "以", "包含", "应用程序", "users", " ", "中", "的", "文件", "urls", ".", "py", "。", "这", "行", "代码", "与", "任何", "以", "单词", "users", "打头", "的", "URL", "（", "如", "http", ":", "/", "/", "localhost", ":", "8000", "/", "users", "/", "login", "/", "）", "都", "匹配", "。", "我们", "还", "创建", "了", "命名", "空", "\n", "间", "'", "users", "'", " ", "，", "以便", "将", "应用程序", "learning", "_", "logs", " ", "的", "URL", "同", "应用程序", "users", " ", "的", "URL", "区分", "开来", "。", "\n", "19.2", ".", "2", "　", "登录", "页面", "\n", "　", "登录", "页面", "\n", "我们", "首先", "来", "实现", "登录", "页面", "的", "功能", "。", "为此", "，", "我们", "将", "使用", "Django", "提供", "的", "默认", "登录", "视图", "，", "因此", "URL", "模式", "会", "稍", "有", "不同", "。", "在", "目录", "learning", "_", "log", "/", "users", "/", "中", "，", "新建", "一个", "名为", "urls", ".", "py", "的", "文件", "，", "并", "在", "其中", "添", "\n", "加", "如下", "代码", "：", "\n", "urls", ".", "py", "\n", " ", " ", "\"", "\"", "\"", "为", "应用程序", "users", "定义", "URL", "模式", "\"", "\"", "\""], ["加", "如下", "代码", "：", "\n", "urls", ".", "py", "\n", " ", " ", "\"", "\"", "\"", "为", "应用程序", "users", "定义", "URL", "模式", "\"", "\"", "\"", "\n", " ", " ", "from", " ", "django", ".", "conf", ".", "urls", " ", "import", " ", "url", "\n", "❶", " ", "from", " ", "django", ".", "contrib", ".", "auth", ".", "views", " ", "import", " ", "login", "\n", " ", " ", "from", " ", ".", " ", "import", " ", "views", "\n", " ", " ", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "登录", "页面", "\n", "❷", " ", " ", " ", " ", " ", "url", "(", "r", "'", "^", "login", "/", "$", "'", ",", " ", "login", ",", " ", "{", "'", "template", "_", "name", "'", ":", " ", "'", "users", "/", "login", ".", "html", "'", "}", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "name", "=", "'", "login", "'", ")", ",", "\n", " ", " ", "]", "\n", "我们", "首先", "导入", "了", "默认", "视图", "login", " ", "（", "见", "❶", "）", "。", "登录", "页面", "的", "URL", "模式", "与", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "users", "/", "login", "/", "匹配", "（", "见", "❷", "）", "。", "这个", "URL", "中", "的", "单词", "users", "让", "Django", "在", "users", "/", "urls", ".", "py", "中", "查找", "，", "而", "单词", "\n", "login", "让", "它", "将", "请求", "发送给", "Django", "默认", "视图", "login", " ", "（", "请", "注意", "，", "视图", "实参", "为", "login", " ", "，", "而", "不是", "views", ".", "login", " ", "）", "。", "鉴于", "我们", "没有", "编写", "自己", "的", "视图", "函数", "，", "我们", "传递", "了", "一个", "字典", "，", "告诉", "Django"], ["去", "哪里", "查找", "我们", "将", "编写", "的", "模板", "。", "这个", "模板", "包含", "在", "应用程序", "users", " ", "而", "不是", "learning", "_", "logs", " ", "中", "。", "\n", "1", ".", " ", "模板", "\n", "模板", "login", ".", "html", "\n", "用户", "请求", "登录", "页面", "时", "，", "Django", "将", "使用", "其", "默认", "视图", "login", " ", "，", "但", "我们", "依然", "需要", "为", "这个", "页面", "提供", "模板", "。", "为此", "，", "在", "目录", "learning", "_", "log", "/", "users", "/", "中", "，", "创建", "一个", "名为", "templates", "的", "目录", "，", "并", "在", "其中", "创建", "一", "\n", "个", "名为", "users", "的", "目录", "。", "以下", "是", "模板", "login", ".", "html", "，", "你", "应", "将", "其", "存储", "到", "目录", "learning", "_", "log", "/", "users", "/", "templates", "/", "users", "/", "中", "：", "\n", "login", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❶", " ", " ", " ", "{", "%", " ", "if", " ", "form", ".", "errors", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "Your", " ", "username", " ", "and", " ", "password", " ", "didn", "'", "t", " ", "match", ".", " ", "Please", " ", "try", " ", "again", ".", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "endif", " ", "%", "}", "\n", "❷", " ", " ", " ", "<", "form", " ", "method", "=", "\"", "post", "\"", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}"], ["{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", "❸", " ", " ", " ", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}"], ["❹", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", ">", "log", " ", "in", "<", "/", "button", ">", "\n", "❺", " ", " ", " ", "<", "input", " ", "type", "=", "\"", "hidden", "\"", " ", "name", "=", "\"", "next", "\"", " ", "value", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", " ", "/", ">", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "这个", "模板", "继承", "了", "base", ".", "html", "，", "旨在", "确保", "登录", "页面", "的", "外观", "与", "网站", "的", "其他", "页面", "相同", "。", "请", "注意", "，", "一个", "应用程序", "中", "的", "模板", "可", "继承", "另", "一个", "应用程序", "中", "的", "模板", "。", "\n", "如果", "表单", "的", "errors", " ", "属性", "被", "设置", "，", "我们", "就", "显示", "一条", "错误", "消息", "（", "见", "❶", "）", "，", "指出", "输入", "的", "用户名", "—", "密码", "对", "与", "数据库", "中", "存储", "的", "任何", "用户名", "—", "密码", "对", "都", "不", "匹配", "。", "\n", "我们", "要", "让", "登录", "视图", "处理", "表单", "，", "因此", "将", "实参", "action", " ", "设置", "为", "登录", "页面", "的", "URL", "（", "见", "❷", "）", "。", "登录", "视图", "将", "一个", "表单", "发送给", "模板", "，", "在", "模板", "中", "，", "我们", "显示", "这个", "表单", "（", "见", "❸", "）", "并", "添加", "一个", "提交", "按", "\n", "钮", "（", "见", "❹", "）", "。", "在", "❺", "处", "，", "我们", "包含", "了", "一个", "隐藏", "的", "表单", "元素", "—", "—", "'", "next", "'", " ", "，", "其中", "的", "实参", "value", " ", "告诉", "Django", "在", "用户", "成功", "登录", "后", "将", "其", "重定向", "到", "什么", "地方", "—", "—", "在", "这里", "是", "主页", "。", "\n", "2", ".", " ", "链接", "到", "登录", "页面", "\n", "链接", "到", "登录", "页面"], ["2", ".", " ", "链接", "到", "登录", "页面", "\n", "链接", "到", "登录", "页面", "\n", "下面", "在", "base", ".", "html", "中", "添加", "到", "登录", "页面", "的", "链接", "，", "让", "所有", "页面", "都", "包含", "它", "。", "用户", "已", "登录", "时", "，", "我们", "不想", "显示", "这个", "链接", "，", "因此", "将", "它", "嵌套", "在", "一个", "{", "%", " ", "if", " ", "%", "}", " ", "标签", "中", "：", "\n", "base", ".", "html", "\n", " ", " ", "<", "p", ">", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", ">", "Learning", " ", "Log", "<", "/", "a", ">", " ", "-", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topics", "'", " ", "%", "}", "\"", ">", "Topics", "<", "/", "a", ">", " ", "-", "\n", "❶", " ", " ", " ", "{", "%", " ", "if", " ", "user", ".", "is", "_", "authenticated", " ", "%", "}", "\n", "❷", " ", " ", " ", " ", " ", "Hello", ",", " ", "{", "{", " ", "user", ".", "username", " ", "}", "}", ".", "\n", " ", " ", " ", " ", "{", "%", " ", "else", " ", "%", "}", "\n", "❸", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", ">", "log", " ", "in", "<", "/", "a", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "endif", " ", "%", "}", "\n", " ", " ", "<", "/", "p", ">", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "{", "%", " ", "endblock", " ", "content", " ", "%", "}"], ["{", "%", " ", "block", " ", "content", " ", "%", "}", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "在", "Django", "身份验证", "系统", "中", "，", "每个", "模板", "都", "可", "使用", "变量", "user", " ", "，", "这个", "变量", "有", "一个", "is", "_", "authenticated", " ", "属性", "：", "如果", "用户", "已", "登录", "，", "该", "属性", "将", "为", "True", " ", "，", "否则", "为", "False", " ", "。", "这", "让", "你", "能够", "向", "已", "\n", "通过", "身份验证", "的", "用户", "显示", "一条", "消息", "，", "而", "向", "未", "通过", "身份验证", "的", "用户", "显示", "另", "一条", "消息", "。", "\n", "在", "这里", "，", "我们", "向", "已", "登录", "的", "用户", "显示", "一条", "问候语", "（", "见", "❶", "）", "。", "对于", "已", "通过", "身份验证", "的", "用户", "，", "还", "设置", "了", "属性", "username", " ", "，", "我们", "使用", "这个", "属性", "来", "个性化", "问候语", "，", "让", "用户", "知道", "他", "已", "登录", "（", "见", "\n", "❷", "）", "。", "在", "❸", "处", "，", "对于", "还", "未", "通过", "身份验证", "的", "用户", "，", "我们", "再", "显示", "一个", "到", "登录", "页面", "的", "链接", "。", "\n", "3", ".", " ", "使用", "登录", "页面", "\n", "使用", "登录", "页面", "\n", "前面", "建立", "了", "一个", "用户", "账户", "，", "下面", "来", "登录", "一下", "，", "看看", "登录", "页面", "是否", "管用", "。", "请", "访问", "http", ":", "/", "/", "localhost", ":", "8000", "/", "admin", "/", "，", "如果", "你", "依然", "是", "以", "管理员", "的", "身份", "登录", "的", "，", "请", "在", "页眉", "上", "找到", "注销", "链接", "并", "单击", "\n", "它", "。"], ["它", "。", "\n", "注销", "后", "，", "访问", "http", ":", "/", "/", "localhost", ":", "8000", "/", "users", "/", "login", "/", "，", "你", "将", "看到", "类似", "于图", "19", "-", "4", "所示", "的", "登录", "页面", "。", "输入", "你", "在", "前面", "设置", "的", "用户名", "和", "密码", "，", "将", "进入", "页面", "index", "。", "。", "在", "这个", "主页", "的", "页眉", "中", "，", "显示", "了", "一条", "\n", "个性化", "问候语", "，", "其中", "包含", "你", "的", "用户名", "。", "\n", "图", "\n", "图", "19", "-", "4", "　", "登录", "页面", "\n", "　", "登录", "页面", "\n", "19.2", ".", "3", "　", "注销", "\n", "　", "注销", "\n", "现在", "需要", "提供", "一个", "让", "用户", "注销", "的", "途径", "。", "我们", "不", "创建", "用于", "注销", "的", "页面", "，", "而", "让", "用户", "只", "需", "单击", "一个", "链接", "就", "能", "注销", "并", "返回", "到", "主页", "。", "为此", "，", "我们", "将", "为", "注销", "链接", "定义", "一个", "URL", "模式", "，", "编写", "一个", "\n", "视图", "函数", "，", "并", "在", "base", ".", "html", "中", "添加", "一个", "注销", "链接", "。", "\n", "1", ".", " ", "注销", "\n", "注销", "URL", "\n", "下面", "的", "代码", "为", "注销", "定义", "了", "URL", "模式", "，", "该", "模式", "与", "URL", " ", "http", ":", "/", "/", "locallwst", ":", "8000", "/", "users", "/", "logout", "/", "匹配", "。", "修改", "后", "的", "users", "/", "urls", ".", "py", "如下", "：", "\n", "urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "#", " ", "登录", "页面", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "注销", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "logout", "/", "$", "'", ",", " ", "views", ".", "logout", "_", "view", ",", " ", "name", "=", "'", "logout", "'", ")", ",", "\n", "]"], ["]", "\n", "这个", "URL", "模式", "将", "请求", "发送给", "函数", "logout", "_", "view", "(", ")", " ", "。", "这样", "给", "这个", "函数", "命名", "，", "旨在", "将", "其", "与", "我们", "将", "在", "其中", "调用", "的", "函数", "logout", "(", ")", " ", "区分", "开来", "（", "请", "确保", "你", "修改", "的", "是", "users", "/", "urls", ".", "py", "，", "而", "不是", "\n", "learning", "_", "log", "/", " ", "urls", ".", "py", "）", "。", "\n", "2", ".", " ", "视图", "函数", "\n", "视图", "函数", "logout", "_", "view", "(", ")", "\n", "函数", "logout", "_", "view", "(", ")", " ", "很", "简单", "：", "只是", "导入", "Django", "函数", "logout", "(", ")", " ", "，", "并", "调用", "它", "，", "再", "重定向", "到", "主页", "。", "请", "打开", "users", "/", "views", ".", "py", "，", "并", "输入", "下面", "的", "代码", "：", "\n", "views", ".", "py"], ["from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect", "\n", " ", " ", "from", " ", "django", ".", "core", ".", "urlresolvers", " ", "import", " ", "reverse", "\n", "❶", " ", "from", " ", "django", ".", "contrib", ".", "auth", " ", "import", " ", "logout", "\n", " ", " ", "def", " ", "logout", "_", "view", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "注销", "用户", "\"", "\"", "\"", "\n", "❷", " ", " ", " ", " ", " ", "logout", "(", "request", ")", "\n", "❸", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "index", "'", ")", ")", "\n", "我们", "从", "django", ".", "contrib", ".", "auth", "中", "导入", "了", "函数", "logout", "(", ")", " ", "（", "见", "❶", "）", "。", "在", "❷", "处", "，", "我们", "调用", "了", "函数", "logout", "(", ")", " ", "，", "它", "要求", "将", "request", " ", "对象", "作为", "实参", "。", "然后", "，", "我们", "重定向", "到", "主页", "（", "见", "❸", "）", "。", "\n", "3", ".", " ", "链接", "到", "注销", "视图", "\n", "链接", "到", "注销", "视图", "\n", "现在", "我们", "需要", "添加", "一个", "注销", "链接", "。", "我们", "在", "base", ".", "html", "中", "添加", "这种", "链接", "，", "让", "每个", "页面", "都", "包含", "它", "；", "我们", "将", "它", "放在", "标签", "{", "%", " ", "if", " ", "user", ".", "is", "_", "authenticated", " ", "%", "}", " ", "中", "，", "使得", "仅当", "用户", "登录", "后", "\n", "才能", "看到", "它", "：", "\n", "base", ".", "html", "\n", "--", "snip", "—"], ["才能", "看到", "它", "：", "\n", "base", ".", "html", "\n", "--", "snip", "—", "\n", " ", " ", "{", "%", " ", "if", " ", "user", ".", "is", "_", "authenticated", " ", "%", "}", "\n", " ", " ", " ", " ", "Hello", ",", " ", "{", "{", " ", "user", ".", "username", " ", "}", "}", ".", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "logout", "'", " ", "%", "}", "\"", ">", "log", " ", "out", "<", "/", "a", ">", "\n", " ", " ", "{", "%", " ", "else", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", ">", "log", " ", "in", "<", "/", "a", ">", "\n", " ", " ", "{", "%", " ", "endif", " ", "%", "}", "\n", "--", "snip", "--", "\n", "图", "19", "-", "5", "显示", "了", "用户", "登录", "后", "看到", "的", "主页", "。", "这里", "的", "重点", "是", "创建", "能够", "正确", "工作", "的", "网站", "，", "因此", "几乎", "没有", "设置", "任何", "样式", "。", "确定", "所", "需", "的", "功能", "都", "能", "正确", "运行", "后", "，", "我们", "将", "设置", "这个", "网站", "的", "样式", "，", "使", "\n", "其", "看起来", "更", "专业", "。", "\n", "图", "\n", "图", "19", "-", "5", "　", "包含", "个性化", "问候语", "和", "注销", "链接", "的", "主页", "\n", "　", "包含", "个性化", "问候语", "和", "注销", "链接", "的", "主页", "\n", "19.2", ".", "4", "　", "注册", "页面", "\n", "　", "注册", "页面", "\n", "下面", "来", "创建", "一个", "让", "新", "用户", "能够", "注册", "的", "页面", "。", "我们", "将", "使用", "Django", "提供", "的", "表单", "UserCreationForm", " ", "，", "但", "编写", "自己", "的", "视图", "函数", "和", "模板", "。", "\n", "1", ".", " ", "注册", "页面", "的", "\n", "注册", "页面", "的", "URL", "模式", "\n", "模式", "\n", "下面", "的", "代码", "定义", "了", "注册", "页面", "的", "URL", "模式", "，", "它", "也", "包含", "在", "users", "/", "urls", ".", "py", "中", "："], ["模式", "\n", "下面", "的", "代码", "定义", "了", "注册", "页面", "的", "URL", "模式", "，", "它", "也", "包含", "在", "users", "/", "urls", ".", "py", "中", "：", "\n", "urls", ".", "py", "\n", "--", "snip", "--", "\n", "urlpatterns", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "#", " ", "登录", "页面", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "#", " ", "注册", "页面", "\n", " ", " ", " ", " ", "url", "(", "r", "'", "^", "register", "/", "$", "'", ",", " ", "views", ".", "register", ",", " ", "name", "=", "'", "register", "'", ")", ",", "\n", "]", "\n", "这个", "模式", "与", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "users", "/", "register", "/", "匹配", "，", "并", "将", "请求", "发送给", "我们", "即将", "编写", "的", "函数", "register", "(", ")", " ", "。", "\n", "2", ".", " ", "视图", "函数", "\n", "视图", "函数", "register", "(", ")", "\n", "在", "注册", "页面", "首次", "被", "请求", "时", "，", "视图", "函数", "register", "(", ")", " ", "需要", "显示", "一个", "空", "的", "注册表", "单", "，", "并", "在", "用户", "提交", "填写", "好", "的", "注册表", "单时", "对", "其", "进行", "处理", "。", "如果", "注册", "成功", "，", "这个", "函数", "还", "需", "让", "用户", "自动", "登", "\n", "录", "。", "请", "在", "users", "/", "views", ".", "py", "中", "添加", "如下", "代码", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", " ", " ", "from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect"], ["from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect", "\n", " ", " ", "from", " ", "django", ".", "core", ".", "urlresolvers", " ", "import", " ", "reverse", "\n", " ", " ", "from", " ", "django", ".", "contrib", ".", "auth", " ", "import", " ", "login", ",", " ", "logout", ",", " ", "authenticate", "\n", " ", " ", "from", " ", "django", ".", "contrib", ".", "auth", ".", "forms", " ", "import", " ", "UserCreationForm", "\n", " ", " ", "def", " ", "logout", "_", "view", "(", "request", ")", ":", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "def", " ", "register", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "注册", "新", "用户", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "显示", "空", "的", "注册表", "单", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "UserCreationForm", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "处理", "填写", "好", "的", "表单", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "UserCreationForm", "(", "data", "=", "request", ".", "POST", ")", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":"], ["❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "user", " ", "=", " ", "form", ".", "save", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "让", "用户", "自动", "登录", "，", "再", "重定向", "到", "主页", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "authenticated", "_", "user", " ", "=", " ", "authenticate", "(", "username", "=", "new", "_", "user", ".", "username", ","], ["password", "=", "request", ".", "POST", "[", "'", "password1", "'", "]", ")", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "login", "(", "request", ",", " ", "authenticated", "_", "user", ")", "\n", "❼", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "index", "'", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "form", "'", ":", " ", "form", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "users", "/", "register", ".", "html", "'", ",", " ", "context", ")", "\n", "我们", "首先", "导入", "了", "函数", "render", "(", ")", " ", "，", "然后", "导入", "了", "函数", "login", "(", ")", " ", "和", "authenticate", "(", ")", " ", "，", "以便", "在", "用户", "正确", "地", "填写", "了", "注册", "信息", "时", "让", "其", "自动", "登录", "。", "我们", "还", "导入", "了", "默认", "表", "\n", "单", "UserCreationForm", " ", "。", "在", "函数", "register", "(", ")", " ", "中", "，", "我们", "检查", "要", "响应", "的", "是否是", "POST", "请求", "。", "如果", "不是", "，", "就", "创建", "一个", "UserCreationForm", " ", "实例", "，", "且", "不", "给", "它", "提供", "任何", "初始", "数据", "（", "见", "\n", "❶", "）", "。"], ["❶", "）", "。", "\n", "如果", "响应", "的", "是", "POST", "请求", "，", "我们", "就", "根据", "提交", "的", "数据", "创建", "一个", "UserCreationForm", " ", "实例", "（", "见", "❷", "）", "，", "并", "检查", "这些", "数据", "是否", "有效", "：", "就", "这里", "而言", "，", "是", "用户名", "未", "包含", "非法", "字符", "，", "输入", "的", "两", "\n", "个", "密码", "相同", "，", "以及", "用户", "没有", "试图", "做", "恶意", "的", "事情", "。", "\n", "如果", "提交", "的", "数据", "有效", "，", "我们", "就", "调用", "表单", "的", "方法", "save", "(", ")", " ", "，", "将", "用户名", "和", "密码", "的", "散列值", "保存", "到", "数据库", "中", "（", "见", "❹", "）", "。", "方法", "save", "(", ")", " ", "返回", "新创建", "的", "用户", "对象", "，", "我们", "将", "其", "存储", "在", "new", "_", "user", "\n", "中", "。", "\n", "保存", "用户", "的", "信息", "后", "，", "我们", "让", "用户", "自动", "登录", "，", "这", "包含", "两个", "步骤", "。", "首先", "，", "我们", "调用", "authenticate", "(", ")", " ", "，", "并", "将", "实参", "new", "_", "user", ".", "username", " ", "和", "密码", "传递", "给", "它", "（", "见", "❺", "）", "。", "用户注册", "时", "，", "\n", "被", "要求", "输入", "密码", "两次", "；", "由于", "表单", "是", "有效", "的", "，", "我们", "知道", "输入", "的", "这", "两个", "密码", "是", "相同", "的", "，", "因此", "可以", "使用", "其中", "任何", "一个", "。", "在", "这里", "，", "我们", "从", "表单", "的", "POST", "数据", "中", "获取", "与键", "'", "password1", "'", " ", "相关", "\n", "联的值", "。", "如果", "用户名", "和", "密码", "无误", "，", "方法", "authenticate", "(", ")", " ", "将", "返回", "一个", "通过", "了", "身份验证", "的", "用户", "对象", "，", "而", "我们", "将", "其", "存储", "在", "authenticated", "_", "user", " ", "中", "。", "接下来", "，", "我们", "调用", "函"], ["数", "login", "(", ")", " ", "，", "并", "将", "对象", "request", " ", "和", "authenticated", "_", "user", " ", "传递", "给", "它", "（", "见", "❻", "）", "，", "这", "将", "为", "新", "用户", "创建", "有效", "的", "会", "话", "。", "最后", "，", "我们", "将", "用户", "重定向", "到", "主页", "（", "见", "❼", "）", "，", "其", "页眉", "中", "显示", "了", "\n", "一条", "个性化", "的", "问候语", "，", "让", "用户", "知道", "注册", "成功", "了", "。", "\n", "3", ".", " ", "注册", "模板", "\n", "注册", "模板", "\n", "注册", "页面", "的", "模板", "与", "登录", "页面", "的", "模板", "类似", "，", "请", "务必", "将", "其", "保存", "到", "login", ".", "html", "所在", "的", "目录", "中", "：", "\n", "register", ".", "html", "\n", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", "<", "form", " ", "method", "=", "\"", "post", "\"", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "register", "'", " ", "%", "}", "\"", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", " ", " ", " ", " ", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", "\n", " ", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", ">", "register", "<", "/", "button", ">", "\n", " ", " ", " ", " ", "<", "input", " ", "type", "=", "\"", "hidden", "\"", " ", "name", "=", "\"", "next", "\"", " ", "value", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", " ", "/", ">", "\n", " ", " ", "<", "/", "form", ">", "\n", "{", "%", " ", "endblock", " ", "content", " ", "%", "}"], ["<", "/", "form", ">", "\n", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "这里", "也", "使用", "了", "方法", "as", "_", "p", " ", "，", "让", "Django", "在", "表单", "中", "正确", "地", "显示", "所有", "的", "字", "段", "，", "包括", "错误", "消息", "—", "—", "如果", "用户", "没有", "正确", "地", "填写", "表单", "。", "\n", "4", ".", " ", "链接", "到", "注册", "页面", "\n", "链接", "到", "注册", "页面", "\n", "接下来", "，", "我们", "添加", "这样", "的", "代码", "，", "即", "在", "用户", "没有", "登录", "时", "显示", "到", "注册", "页面", "的", "链接", "：", "\n", "base", ".", "html", "\n", "--", "snip", "--", "\n", " ", " ", "{", "%", " ", "if", " ", "user", ".", "is", "_", "authenticated", " ", "%", "}", "\n", " ", " ", " ", " ", "Hello", ",", " ", "{", "{", " ", "user", ".", "username", " ", "}", "}", ".", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "logout", "'", " ", "%", "}", "\"", ">", "log", " ", "out", "<", "/", "a", ">", "\n", " ", " ", "{", "%", " ", "else", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "register", "'", " ", "%", "}", "\"", ">", "register", "<", "/", "a", ">", " ", "-", "\n", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", ">", "log", " ", "in", "<", "/", "a", ">", "\n", " ", " ", "{", "%", " ", "endif", " ", "%", "}", "\n", "--", "snip", "--", "\n", "现在", "，", "已", "登录", "的", "用户", "看到", "的", "是", "个性化", "的", "问候语", "和", "注销", "链接", "，", "而", "未", "登录", "的", "用户", "看到", "的", "是", "注册", "链接", "和", "登录", "链接", "。", "请", "尝试", "使用", "注册", "页面", "创建", "几个", "用户名", "各不相同", "的", "用户", "账户", "。"], ["在", "下", "一节", "，", "我们", "将", "对", "一些", "页面", "进行", "限制", "，", "仅", "让", "已", "登录", "的", "用户", "访问", "它们", "，", "我们", "还", "将", "确保", "每个", "主题", "都", "属于", "特定", "用户", "。", "\n", "注意", "\n", "注意", " ", "　", "这里", "的", "注册", "系统", "允许", "用户", "创建", "任意", "数量", "的", "账户", "。", "有些", "系统", "要求", "用户", "确认", "其", "身份", "：", "发送", "一封", "确认", "邮件", "，", "用户", "回复", "后", "其", "账户", "才", "生效", "。", "通过", "这样", "做", "，", "系统生成", "的", "垃圾", "\n", "账户", "将", "比", "这里", "使用", "的", "简单", "系统", "少", "。", "然而", "，", "学习", "创建", "应用程序", "时", "，", "完全", "可以", "像", "这里", "所", "做", "的", "那样", "，", "使用", "简单", "的", "用户注册", "系统", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "19", "-", "2", " ", "博客", "账户", "\n", "博客", "账户", " ", "：", "在", "你", "为", "完成", "练习", "19", "-", "1", "而", "开发", "的", "项目", "Blog", "中", "，", "添加", "一个", "用户", "身份验证", "和", "注册", "系统", "。", "让", "已", "登录", "的", "用户", "在", "屏幕", "上", "看到", "其", "用户名", "，", "并", "让", "未注册", "的", "用户", "看到", "一个", "\n", "到", "注册", "页面", "的", "链接", "。", "\n", "19.3", "　", "让", "用户", "拥有", "自己", "的", "数据", "\n", "　", "让", "用户", "拥有", "自己", "的", "数据", "\n", "用户", "应该", "能够", "输入", "其", "专有", "的", "数据", "，", "因此", "我们", "将", "创建", "一个", "系统", "，", "确定", "各项", "数据", "所属", "的", "用户", "，", "再", "限制", "对", "页面", "的", "访问", "，", "让", "用户", "只能", "使用", "自己", "的", "数据", "。", "\n", "在", "本节", "中", "，", "我们", "将", "修改", "模型", "Topic", " ", "，", "让", "每个", "主题", "都", "归属于", "特定", "用户", "。", "这", "也", "将", "影响", "条目", "，", "因为", "每个", "条目", "都", "属于", "特定", "的", "主题", "。", "我们", "先", "来", "限制", "对", "一些", "页面", "的", "访问", "。", "\n", "19.3", ".", "1", "　", "使用", "\n", "　", "使用", "@", "login", "_", "required", " ", "限制", "访问", "\n", "限制", "访问"], ["19.3", ".", "1", "　", "使用", "\n", "　", "使用", "@", "login", "_", "required", " ", "限制", "访问", "\n", "限制", "访问", "\n", "Django", "提供", "了", "装饰", "器", "@", "login", "_", "required", " ", "，", "让", "你", "能够", "轻松", "地", "实现", "这样", "的", "目标", "：", "对于", "某些", "页面", "，", "只", "允许", "已", "登录", "的", "用户", "访问", "它们", "。", "装饰", "器", "\n", "装饰", "器", " ", "（", "decorator", "）", "是", "放在", "函数", "定义", "前面", "的", "指", "\n", "令", "，", "Python", "在", "函数", "运行", "前", "，", "根据", "它", "来", "修改", "函数", "代码", "的", "行为", "。", "下面", "来看", "一个", "示例", "。", "\n", "1", ".", " ", "限制", "对", "\n", "限制", "对", "topics", " ", "页面", "的", "访问", "\n", "页面", "的", "访问", "\n", "每个", "主题", "都", "归", "特定", "用户", "所有", "，", "因此", "应", "只", "允许", "已", "登录", "的", "用户", "请求", "topics", " ", "页面", "。", "为此", "，", "在", "learning", "_", "logs", "/", "views", ".", "py", "中", "添加", "如下", "代码", "：", "\n", "views", ".", "py", "\n", "--", "snip", "--"], ["from", " ", "django", ".", "core", ".", "urlresolvers", " ", "import", " ", "reverse", "\n", "from", " ", "django", ".", "contrib", ".", "auth", ".", "decorators", " ", "import", " ", "login", "_", "required", "\n", "from", " ", ".", "models", " ", "import", " ", "Topic", ",", " ", "Entry", "\n", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "topics", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "所有", "的", "主题", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "首先", "导入", "了", "函数", "login", "_", "required", "(", ")", " ", "。", "我们", "将", "login", "_", "required", "(", ")", " ", "作为", "装饰", "器", "用于", "视图", "函数", "topics", "(", ")", " ", "—", "—", "在", "它", "前面", "加上", "符号", "@", " ", "和", "login", "_", "required", " ", "，", "让", "Python", "在", "运", "\n", "行", "topics", "(", ")", " ", "的", "代码", "前先", "运行", "login", "_", "required", "(", ")", " ", "的", "代码", "。", "\n", "login", "_", "required", "(", ")", " ", "的", "代码", "检查用户", "是否", "已", "登录", "，", "仅当", "用户", "已", "登录", "时", "，", "Django", "才", "运行", "topics", "(", ")", " ", "的", "代码", "。", "如果", "用户", "未", "登录", "，", "就", "重定向", "到", "登录", "页面", "。", "\n", "为", "实现", "这种", "重定向", "，", "我们", "需要", "修改", "settings", ".", "py", "，", "让", "Django", "知道", "到", "哪里", "去", "查找", "登录", "页面", "。", "请", "在", "settings", ".", "py", "末尾", "添加", "如下", "代码", "："], ["settings", ".", "py", "\n", "\"", "\"", "\"", "\n", "项目", "learning", "_", "log", "的", "Django", "设置", "\n", "--", "snip", "--", "\n", "#", " ", "我", "的", "设置", "\n", "LOGIN", "_", "URL", " ", "=", " ", "'", "/", "users", "/", "login", "/", "'", "\n", "现在", "，", "如果", "未", "登录", "的", "用户", "请求", "装饰", "器", "@", "login", "_", "required", " ", "的", "保护", "页面", "，", "Django", "将", "重定向", "到", "settings", ".", "py", "中", "的", "LOGIN", "_", "URL", " ", "指定", "的", "URL", "。", "\n", "要", "测试", "这个", "设置", "，", "可", "注销", "并", "进入", "主页", "。", "然后", "，", "单击", "链接", "Topics", "，", "这", "将", "重定向", "到", "登录", "页面", "。", "接下来", "，", "使用", "你", "的", "账户", "登录", "，", "并", "再次", "单击", "主页", "中", "的", "Topics", "链接", "，", "你", "将", "看到", "topics", "页面", "。", "\n", "2", ".", " ", "全面", "限制", "对", "项目", "\n", "全面", "限制", "对", "项目", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "的", "访问", "\n", "的", "访问", "\n", "Django", "让", "你", "能够", "轻松", "地", "限制", "对", "页面", "的", "访问", "，", "但", "你", "必须", "针对", "要", "保护", "哪些", "页面", "做出", "决定", "。", "最好", "先", "确定", "项目", "的", "哪些", "页面", "不", "需要", "保护", "，", "再", "限制", "对", "其他", "所有", "页面", "的", "访问", "。", "你", "可以", "轻松", "地", "修改", "\n", "过于", "严格", "的", "访问", "限制", "，", "其", "风险", "比", "不", "限制", "对", "敏感", "页面", "的", "访问", "更", "低", "。", "\n", "在", "项目", "“", "学习", "笔记", "”", "中", "，", "我们", "将", "不", "限制", "对", "主页", "、", "注册", "页面", "和", "注销", "页面", "的", "访问", "，", "并", "限制", "对", "其他", "所有", "页面", "的", "访问", "。"], ["在", "项目", "“", "学习", "笔记", "”", "中", "，", "我们", "将", "不", "限制", "对", "主页", "、", "注册", "页面", "和", "注销", "页面", "的", "访问", "，", "并", "限制", "对", "其他", "所有", "页面", "的", "访问", "。", "\n", "在", "下面", "的", "learning", "_", "logs", "/", "views", ".", "py", "中", "，", "对除", "index", "(", ")", " ", "外", "的", "每个", "视图", "都", "应用", "了", "装饰", "器", "@", "login", "_", "required", " ", "：", "\n", "views", ".", "py", "\n", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "topics", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "topic", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "new", "_", "topic", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "new", "_", "entry", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "edit", "_", "entry", "(", "request", ",", " ", "entry", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["def", " ", "edit", "_", "entry", "(", "request", ",", " ", "entry", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "如果", "你", "在", "未", "登录", "的", "情况", "下", "尝试", "访问", "这些", "页面", "，", "将", "被", "重定向", "到", "登录", "页面", "。", "另外", "，", "你", "还", "不能", "单击", "到", "new", "_", "topic", " ", "等", "页面", "的", "链接", "。", "但", "如果", "你", "输入", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "new", "_", "topic", "/", "，", "将重", "\n", "定向", "到", "登录", "页面", "。", "对于", "所有", "与", "私有", "用户", "数据", "相关", "的", "URL", "，", "都", "应", "限制", "对", "它们", "的", "访问", "。", "\n", "19.3", ".", "2", "　", "将", "数据", "关联", "到", "用户", "\n", "　", "将", "数据", "关联", "到", "用户", "\n", "现在", "，", "需要", "将", "数据", "关联", "到", "提交", "它们", "的", "用户", "。", "我们", "只", "需", "将", "最高层", "的", "数据", "关联", "到", "用户", "，", "这样", "更", "低层", "的", "数据", "将", "自动", "关联", "到", "用户", "。", "例如", "，", "在", "项目", "“", "学习", "笔记", "”", "中", "，", "应用程序", "的", "最高层", "数据", "是", "\n", "主题", "，", "而", "所有", "条目", "都", "与", "特定", "主题", "相关联", "。", "只要", "每个", "主题", "都", "归属于", "特定", "用户", "，", "我们", "就", "能", "确定", "数据库", "中", "每个", "条", "目的", "所有者", "。", "\n", "下面", "来", "修改", "模型", "Topic", " ", "，", "在", "其中", "添加", "一个", "关联", "到", "用户", "的", "外键", "。", "这样", "做后", "，", "我们", "必须", "对", "数据库", "进行", "迁移", "。", "最后", "，", "我们", "必须", "对", "有些", "视图", "进行", "修改", "，", "使", "其", "只", "显示", "与", "当前", "登录", "的", "用户", "相关", "\n", "联", "的", "数据", "。", "\n", "1", ".", " ", "修改", "模型", "\n", "修改", "模型", "Topic", "\n", "对", "models", ".", "py", "的", "修改", "只", "涉及", "两行", "代码", "：", "\n", "models", ".", "py"], ["1", ".", " ", "修改", "模型", "\n", "修改", "模型", "Topic", "\n", "对", "models", ".", "py", "的", "修改", "只", "涉及", "两行", "代码", "：", "\n", "models", ".", "py", "\n", "from", " ", "django", ".", "db", " ", "import", " ", "models", "\n", "from", " ", "django", ".", "contrib", ".", "auth", ".", "models", " ", "import", " ", "User", "\n", "class", " ", "Topic", "(", "models", ".", "Model", ")", ":", "\n", " ", " ", " ", "\"", "\"", "\"", "用户", "要", "学习", "的", "主题", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "text", " ", "=", " ", "models", ".", "CharField", "(", "max", "_", "length", "=", "200", ")", "\n", " ", " ", " ", " ", "date", "_", "added", " ", "=", " ", "models", ".", "DateTimeField", "(", "auto", "_", "now", "_", "add", "=", "True", ")", "\n", " ", " ", " ", " ", "owner", " ", "=", " ", "models", ".", "ForeignKey", "(", "User", ")", "\n", " ", " ", " ", " ", "def", " ", "__", "str", "__", "(", "self", ")", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "返回", "模型", "的", "字符串", "表示", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "self", ".", "text", "\n", "class", " ", "Entry", "(", "models", ".", "Model", ")", ":", "\n", " ", " ", " ", " ", "--", "snip", "--"], ["我们", "首先", "导入", "了", "django", ".", "contrib", ".", "auth", " ", "中", "的", "模型", "User", " ", "，", "然后", "在", "Topic", " ", "中", "添加", "了", "字", "段", "owner", " ", "，", "它", "建立", "到", "模型", "User", " ", "的", "外键", "关系", "。", "\n", "2", ".", " ", "确定", "当前", "有", "哪些", "用户", "\n", "确定", "当前", "有", "哪些", "用户", "\n", "我们", "迁移", "数据库", "时", "，", "Django", "将", "对", "数据库", "进行", "修改", "，", "使", "其", "能够", "存储", "主题", "和", "用户", "之间", "的", "关联", "。", "为", "执行", "迁移", "，", "Django", "需要", "知道", "该", "将", "各个", "既有", "主题", "关联", "到", "哪个", "用户", "。", "最", "简单", "的", "办法", "是", "，", "将", "既", "\n", "有", "主题", "都", "关联", "到", "同一个", "用户", "，", "如", "超级", "用户", "。", "为此", "，", "我们", "需要", "知道", "该", "用户", "的", "ID", "。", "\n", "下面", "来", "查看", "已", "创建", "的", "所有", "用户", "的", "ID", "。", "为此", "，", "启动", "一个", "Django", " ", "shell", "会话", "，", "并", "执行", "如下", "命令", "：", "\n", " ", " ", "(", "venv", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "shell", "\n", "❶", " ", ">", ">", ">", " ", "from", " ", "django", ".", "contrib", ".", "auth", ".", "models", " ", "import", " ", "User", "\n", "❷", " ", ">", ">", ">", " ", "User", ".", "objects", ".", "all", "(", ")", "\n", " ", " ", "[", "<", "User", ":", " ", "ll", "_", "admin", ">", ",", " ", "<", "User", ":", " ", "eric", ">", ",", " ", "<", "User", ":", " ", "willie", ">", "]", "\n", "❸", " ", ">", ">", ">", " ", "for", " ", "user", " ", "in", " ", "User", ".", "objects", ".", "all", "(", ")", ":"], ["❸", " ", ">", ">", ">", " ", "for", " ", "user", " ", "in", " ", "User", ".", "objects", ".", "all", "(", ")", ":", "\n", " ", " ", "...", " ", " ", " ", " ", " ", "print", "(", "user", ".", "username", ",", " ", "user", ".", "id", ")", "\n", " ", " ", "...", "\n", " ", " ", "ll", "_", "admin", " ", "1", "\n", " ", " ", "eric", " ", "2", "\n", " ", " ", "willie", " ", "3", "\n", " ", " ", ">", ">", ">", "\n", "在", "❶", "处", "，", "我们", "在", "shell", "会话", "中", "导入", "了", "模型", "User", " ", "。", "然后", "，", "我们", "查看", "到", "目前为止", "都", "创建", "了", "哪些", "用户", "（", "见", "❷", "）", "。", "输出", "中", "列出", "了", "三个", "用户", "：", "ll", "_", "admin", "、", "eric", "和", "willie", "。", "\n", "在", "❸", "处", "，", "我们", "遍历", "用户", "列表", "，", "并打印", "每位", "用户", "的", "用户名", "和", "ID", "。", "Django", "询问", "要", "将", "既有", "主题", "关联", "到", "哪个", "用户", "时", "，", "我们", "将", "指定", "其中", "的", "一个", "ID", "值", "。", "\n", "3", ".", " ", "迁移", "数据库", "\n", "迁移", "数据库", "\n", "知道", "用户", "ID", "后", "，", "就", "可以", "迁移", "数据库", "了", "。", "\n", "❶", " ", "(", "venv", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "makemigrations", " ", "learning", "_", "logs", "\n", "❷", " ", "You", " ", "are", " ", "trying", " ", "to", " ", "add", " ", "a", " ", "non", "-", "nullable", " ", "field", " ", "'", "owner", "'", " ", "to", " ", "topic", " ", "without", " ", "a", " ", "default", ";"], ["we", " ", "can", "'", "t", " ", "do", " ", "that", " ", "(", "the", " ", "database", " ", "needs", " ", "something", " ", "to", " ", "populate", " ", "existing", " ", "rows", ")", ".", "\n", "❸", " ", "Please", " ", "select", " ", "a", " ", "fix", ":", "\n", " ", " ", " ", "1", ")", " ", "Provide", " ", "a", " ", "one", "-", "off", " ", "default", " ", "now", " ", "(", "will", " ", "be", " ", "set", " ", "on", " ", "all", " ", "existing", " ", "rows", ")", "\n", " ", " ", " ", "2", ")", " ", "Quit", ",", " ", "and", " ", "let", " ", "me", " ", "add", " ", "a", " ", "default", " ", "in", " ", "models", ".", "py", "\n", "❹", " ", "Select", " ", "an", " ", "option", ":", " ", "1", "\n", "❺", " ", "Please", " ", "enter", " ", "the", " ", "default", " ", "value", " ", "now", ",", " ", "as", " ", "valid", " ", "Python", "\n", " ", " ", "The", " ", "datetime", " ", "and", " ", "django", ".", "utils", ".", "timezone", " ", "modules", " ", "are", " ", "available", ",", " ", "so", " ", "you", " ", "can", " ", "do", " ", "e", ".", "g", ".", " ", "timezone", ".", "now", "(", ")", "\n", "❻", " ", ">", ">", ">", " ", "1", "\n", " ", " ", "Migrations", " ", "for", " ", "'", "learning", "_", "logs", "'", ":", "\n", " ", " ", " ", " ", "0003", "_", "topic", "_", "owner", ".", "py", ":", "\n", " ", " ", " ", " ", " ", " ", "-", " ", "Add", " ", "field", " ", "owner", " ", "to", " ", "topic"], ["-", " ", "Add", " ", "field", " ", "owner", " ", "to", " ", "topic", "\n", "我们", "首先", "执行", "了", "命令", "makemigrations", " ", "（", "见", "❶", "）", "。", "在", "❷", "处", "的", "输出", "中", "，", "Django", "指出", "我们", "试图", "给", "既有", "模型", "Topic", " ", "添加", "一个", "必不可少", "（", "不可", "为空", "）", "的", "字", "段", "，", "而", "该", "字", "段", "没有", "默认值", "。", "在", "\n", "❸", "处", "，", "Django", "给", "我们", "提供", "了", "两种", "选择", "：", "要么", "现在", "提供", "默认值", "，", "要么", "退出", "并", "在", "models", ".", "py", "中", "添加", "默认值", "。", "在", "❹", "处", "，", "我们", "选择", "了", "第一个", "选项", "，", "因此", "Django", "让", "我们", "输入", "默认值", "（", "见", "❺", "）", "。", "\n", "为", "将", "所有", "既有", "主题", "都", "关联", "到", "管理", "用户", "ll", "_", "admin", "，", "我", "输入", "了", "用户", "ID", "值", "1", "（", "见", "❻", "）", "。", "并非", "必须", "使用", "超级", "用户", "，", "而", "可", "使用", "已", "创建", "的", "任何", "用户", "的", "ID", "。", "接下来", "，", "Django", "使用", "这个", "值来", "迁移", "数据", "\n", "库", "，", "并", "生成", "了", "迁移", "文件", "0003", "_", "topic", "_", "owner", ".", "py", "，", "它", "在", "模型", "Topic", " ", "中", "添加", "字段", "owner", " ", "。", "\n", "现在", "可以", "执行", "迁移", "了", "。", "为此", "，", "在", "活动", "的", "虚拟环境", "中", "执行", "下面", "的", "命令", "：", "\n", " ", " ", "(", "venv", ")", "learning", "_", "log", "$", " ", "python", " ", "manage", ".", "py", " ", "migrate", "\n", " ", " ", "Operations", " ", "to", " ", "perform", ":", "\n", " ", " ", " ", " ", "Synchronize", " ", "unmigrated", " ", "apps", ":", " ", "messages", ",", " ", "staticfiles"], ["Apply", " ", "all", " ", "migrations", ":", " ", "learning", "_", "logs", ",", " ", "contenttypes", ",", " ", "sessions", ",", " ", "admin", ",", " ", "auth", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "Running", " ", "migrations", ":", "\n", " ", " ", " ", " ", "Rendering", " ", "model", " ", "states", "...", " ", "DONE", "\n", "❶", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0003", "_", "topic", "_", "owner", "...", " ", "OK", "\n", " ", " ", "(", "venv", ")", "learning", "_", "log", "$", "\n", "Django", "应用", "新", "的", "迁移", "，", "结果", "一切顺利", "（", "见", "❶", "）", "。", "\n", "为", "验证", "迁移", "符合", "预期", "，", "可", "在", "shell", "会话", "中", "像", "下面", "这样", "做", "：", "\n", "❶", " ", ">", ">", ">", " ", "from", " ", "learning", "_", "logs", ".", "models", " ", "import", " ", "Topic", "\n", "❷", " ", ">", ">", ">", " ", "for", " ", "topic", " ", "in", " ", "Topic", ".", "objects", ".", "all", "(", ")", ":", "\n", " ", " ", "...", " ", " ", " ", " ", " ", "print", "(", "topic", ",", " ", "topic", ".", "owner", ")", "\n", " ", " ", "...", "\n", " ", " ", "Chess", " ", "ll", "_", "admin", "\n", " ", " ", "Rock", " ", "Climbing", " ", "ll", "_", "admin", "\n", " ", " ", ">", ">", ">"], ["Chess", " ", "ll", "_", "admin", "\n", " ", " ", "Rock", " ", "Climbing", " ", "ll", "_", "admin", "\n", " ", " ", ">", ">", ">", "\n", "我们", "从", "learning", "_", "logs", ".", "models", " ", "中", "导入", "Topic", " ", "（", "见", "❶", "）", "，", "再", "遍历", "所有", "的", "既有", "主题", "，", "并打印", "每个", "主题", "及其", "所属", "的", "用户", "（", "见", "❷", "）", "。", "正如", "你", "看到", "的", "，", "现在", "每个", "主题", "都", "属于", "用户", "\n", "ll", "_", "admin", "。", "\n", "注意", "\n", "注意", " ", "　", "你", "可以", "重置", "数据库", "而", "不是", "迁移", "它", "，", "但", "如果", "这样", "做", "，", "既有", "的", "数据", "都", "将", "丢失", "。", "一种", "不错", "的", "做法", "是", "，", "学习", "如何", "在", "迁移", "数据库", "的", "同时", "确保", "用户", "数据", "的", "完整性", "。", "如果", "你确", "\n", "实", "想要", "一个", "全新", "的", "数据库", "，", "可", "执行命令", "python", " ", "manage", ".", "py", " ", "flush", " ", "，", "这", "将", "重建", "数据库", "的", "结构", "。", "如果", "你", "这样", "做", "，", "就", "必须", "重新", "创建", "超级", "用户", "，", "且", "原来", "的", "所有", "数据", "都", "将", "\n", "丢失", "。", "\n", "19.3", ".", "3", "　", "只", "允许", "用户", "访问", "自己", "的", "主题", "\n", "　", "只", "允许", "用户", "访问", "自己", "的", "主题", "\n", "当前", "，", "不管", "你", "以", "哪个", "用户", "的", "身份", "登录", "，", "都", "能够", "看到", "所有", "的", "主题", "。", "我们", "来", "改变", "这种", "情况", "，", "只", "向", "用户", "显示", "属于", "自己", "的", "主题", "。", "\n", "在", "views", ".", "py", "中", "，", "对", "函数", "topics", "(", ")", " ", "做", "如下", "修改", "：", "\n", "views", ".", "py", "\n", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "topics", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "所有", "的", "主题", "\"", "\"", "\""], ["def", " ", "topics", "(", "request", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "所有", "的", "主题", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "topics", " ", "=", " ", "Topic", ".", "objects", ".", "filter", "(", "owner", "=", "request", ".", "user", ")", ".", "order", "_", "by", "(", "'", "date", "_", "added", "'", ")"], ["context", " ", "=", " ", "{", "'", "topics", "'", ":", " ", "topics", "}", "\n", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "topics", ".", "html", "'", ",", " ", "context", ")", "\n", "--", "snip", "--", "\n", "用户", "登录", "后", "，", "request", " ", "对象", "将", "有", "一个", "user", " ", "属性", "，", "这个", "属性", "存储", "了", "有关", "该", "用户", "的", "信息", "。", "代码", "Topic", ".", "objects", ".", "filter", "(", "owner", "=", "request", ".", "user", ")", " ", "让", "Django", "只", "从", "数据库", "中获", "\n", "取", "owner", " ", "属性", "为", "当前", "用户", "的", "Topic", " ", "对象", "。", "由于", "我们", "没有", "修改", "主题", "的", "显示方式", "，", "因此", "无需", "对", "页面", "topics", "的", "模板", "做", "任何", "修改", "。", "\n", "要", "查看", "结果", "，", "以", "所有", "既有", "主题", "关联", "到", "的", "用户", "的", "身份", "登录", "，", "并", "访问", "topics", "页面", "，", "你", "将", "看到", "所有", "的", "主题", "。", "然后", "，", "注销", "并", "以", "另", "一个", "用户", "的", "身份", "登录", "，", "topics", "页面", "将", "不会", "列出", "任何", "主题", "。", "\n", "19.3", ".", "4", "　", "保护", "用户", "的", "主题", "\n", "　", "保护", "用户", "的", "主题", "\n", "我们", "还", "没有", "限制", "对", "显示", "单个", "主题", "的", "页面", "的", "访问", "，", "因此", "任何", "已", "登录", "的", "用户", "都", "可", "输入", "类似", "于", "http", ":", "/", "/", "localhost", ":", "8000", "/", "topics", "/", "1", "/", "的", "URL", "，", "来", "访问", "显示", "相应", "主题", "的", "页面", "。"], ["你", "自己", "试一试", "就", "明白", "了", "。", "以", "拥有", "所有", "主题", "的", "用户", "的", "身份", "登录", "，", "访问", "特定", "的", "主题", "，", "并", "复制", "该", "页面", "的", "URL", "，", "或", "将", "其中", "的", "ID", "记录下来", "。", "然后", "，", "注销", "并", "以", "另", "一个", "用户", "的", "身份", "登录", "，", "再", "输入", "\n", "显示", "前述", "主题", "的", "页面", "的", "URL", "。", "虽然", "你", "是", "以", "另", "一个", "用户", "登录", "的", "，", "但", "依然", "能够", "查看", "该", "主题", "中", "的", "条目", "。", "\n", "为", "修复", "这种", "问题", "，", "我们", "在", "视图", "函数", "topic", "(", ")", " ", "获取", "请求", "的", "条", "目前", "执行", "检查", "：", "\n", "views", ".", "py", "\n", " ", " ", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", "\n", "❶", " ", "from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect", ",", " ", "Http404", "\n", " ", " ", "from", " ", "django", ".", "core", ".", "urlresolvers", " ", "import", " ", "reverse", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "@", "login", "_", "required", "\n", " ", " ", "def", " ", "topic", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "单个", "主题", "及其", "所有", "的", "条目", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "topic", " ", "=", " ", "Topic", ".", "objects", ".", "get", "(", "id", "=", "topic", "_", "id", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "确认", "请求", "的", "主题", "属于", "当前", "用户", "\n", "❷", " ", " ", " ", " ", " ", "if", " ", "topic", ".", "owner", " ", "!", "=", " ", "request", ".", "user", ":"], ["❷", " ", " ", " ", " ", " ", "if", " ", "topic", ".", "owner", " ", "!", "=", " ", "request", ".", "user", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "raise", " ", "Http404", "\n", " ", " ", " ", " ", " ", " ", "entries", " ", "=", " ", "topic", ".", "entry", "_", "set", ".", "order", "_", "by", "(", "'", "-", "date", "_", "added", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "topic", "'", ":", " ", "topic", ",", " ", "'", "entries", "'", ":", " ", "entries", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "topic", ".", "html", "'", ",", " ", "context", ")", "\n", " ", " ", "--", "snip", "--", "\n", "服务器", "上", "没有", "请求", "的", "资源", "时", "，", "标准", "的", "做法", "是", "返回", "404", "响应", "。", "在", "这里", "，", "我们", "导入", "了", "异常", "Http404", " ", "（", "见", "❶", "）", "，", "并", "在", "用户", "请求", "它", "不能", "查看", "的", "主题", "时", "引发", "这个", "异常", "。", "收到", "主题", "请求", "后", "，", "我", "\n", "们", "在", "渲染", "网页", "前", "检查", "该", "主题", "是否", "属于", "当前", "登录", "的", "用户", "。", "如果", "请求", "的", "主题", "不归", "当前", "用户", "所有", "，", "我们", "就", "引发", "Http404", " ", "异常", "（", "见", "❷", "）", "，", "让", "Django", "返回", "一个", "404", "错误", "页面", "。", "\n", "现在", "，", "如果", "你", "试图", "查看", "其他", "用户", "的", "主题", "条目", "，", "将", "看到", "Django", "发送", "的", "消息", "Page", " ", "Not", " ", "Found", "。", "在", "第", "20", "章", "，", "我们", "将", "对", "这个", "项目", "进行", "配置", "，", "让", "用户", "看到", "更", "合适", "的", "错误", "页面", "。", "\n", "19.3", ".", "5", "　", "保护", "页面"], ["19.3", ".", "5", "　", "保护", "页面", "\n", "　", "保护", "页面", "edit", "_", "entry", "\n", "页面", "edit", "_", "entry", " ", "的", "URL", "为", "http", ":", "/", "/", "localhost", ":", "8000", "/", "edit", "_", "entry", "/", "entry", "_", "id", " ", "/", " ", "，", "其中", " ", "entry", "_", "id", " ", "是", "一个", "数字", "。", "下面", "来", "保护", "这个", "页面", "，", "禁止", "用户", "通过", "输入", "类似", "于", "前面", "\n", "的", "URL", "来", "访问", "其他", "用户", "的", "条目", "：", "\n", "views", ".", "py", "\n", "--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "edit", "_", "entry", "(", "request", ",", " ", "entry", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "编辑", "既有", "条目", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "entry", " ", "=", " ", "Entry", ".", "objects", ".", "get", "(", "id", "=", "entry", "_", "id", ")", "\n", " ", " ", " ", " ", "topic", " ", "=", " ", "entry", ".", "topic", "\n", " ", " ", " ", " ", "if", " ", "topic", ".", "owner", " ", "!", "=", " ", "request", ".", "user", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "raise", " ", "Http404", "\n", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "初次", "请求", "，", "使用", "当前", "条", "目的", "内容", "填充", "表单", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "获取", "指定", "的", "条目", "以及", "与", "之", "相关联", "的", "主题", "，", "然后", "检查", "主题", "的", "所有者", "是否是", "当前", "登录", "的", "用户", "，", "如果", "不是", "，", "就", "引发", "Http404", " ", "异常", "。"], ["19.3", ".", "6", "　", "将", "新", "主题", "关联", "到", "当前", "用户", "\n", "　", "将", "新", "主题", "关联", "到", "当前", "用户", "\n", "当前", "，", "用于", "添加", "新", "主题", "的", "页面", "存在", "问题", "，", "因此", "它", "没有", "将", "新", "主题", "关联", "到", "特定", "用户", "。", "如果", "你", "尝试", "添加", "新", "主题", "，", "将", "看到", "错误", "消息", "IntegrityError", " ", "，", "指", "\n", "出", "learning", "_", "logs", "_", "topic", ".", "user", "_", "id", " ", "不能", "为", "NULL", " ", "。", "Django", "的", "意思", "是", "说", "，", "创建", "新", "主题", "时", "，", "你", "必须", "指定", "其", "owner", " ", "字段", "的", "值", "。", "\n", "由于", "我们", "可以", "通过", "request", " ", "对象", "获悉", "当前", "用户", "，", "因此", "存在", "一个", "修复", "这种", "问题", "的", "简单", "方案", "。", "请", "添加", "下面", "的", "代码", "，", "将", "新", "主题", "关联", "到", "当前", "用户", "：", "\n", "views", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "@", "login", "_", "required", "\n", " ", " ", "def", " ", "new", "_", "topic", "(", "request", ")", ":", "\n", " ", " ", " ", " ", " ", " ", "\"", "\"", "\"", "添加", "新", "主题", "\"", "\"", "\"", "\n", " ", " ", " ", " ", " ", " ", "if", " ", "request", ".", "method", " ", "!", "=", " ", "'", "POST", "'", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "没有", "提交", "的", "数据", ",", "创建", "一个", "空", "表单", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "TopicForm", "(", ")", "\n", " ", " ", " ", " ", " ", " ", "else", ":", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "#", " ", "POST", "提交", "的", "数据", ",", "对", "数据", "进行", "处理", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "form", " ", "=", " ", "TopicForm", "(", "request", ".", "POST", ")"], ["form", " ", "=", " ", "TopicForm", "(", "request", ".", "POST", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "if", " ", "form", ".", "is", "_", "valid", "(", ")", ":", "\n", "❶", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "topic", " ", "=", " ", "form", ".", "save", "(", "commit", "=", "False", ")", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "topic", ".", "owner", " ", "=", " ", "request", ".", "user", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "new", "_", "topic", ".", "save", "(", ")", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "return", " ", "HttpResponseRedirect", "(", "reverse", "(", "'", "learning", "_", "logs", ":", "topics", "'", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "context", " ", "=", " ", "{", "'", "form", "'", ":", " ", "form", "}", "\n", " ", " ", " ", " ", " ", " ", "return", " ", "render", "(", "request", ",", " ", "'", "learning", "_", "logs", "/", "new", "_", "topic", ".", "html", "'", ",", " ", "context", ")", "\n", " ", " ", " ", "--", "snip", "--"], ["我们", "首先", "调用", "form", ".", "save", "(", ")", " ", "，", "并", "传递", "实参", "commit", "=", "False", " ", "，", "这", "是因为", "我们", "先", "修改", "新", "主题", "，", "再", "将", "其", "保存", "到", "数据库", "中", "（", "见", "❶", "）", "。", "接下来", "，", "将", "新", "主题", "的", "owner", " ", "属性", "设置", "为", "当前", "用户", "\n", "（", "见", "❷", "）", "。", "最后", "，", "对刚", "定义", "的", "主题", "实例", "调用", "save", "(", ")", " ", "（", "见", "❸", "）", "。", "现在", "主题", "包含", "所有", "必不可少", "的", "数据", "，", "将", "被", "成功", "地", "保存", "。", "\n", "现在", "，", "这个", "项目", "允许", "任何", "用户注册", "，", "而", "每个", "用户", "想", "添加", "多少", "新", "主题", "都", "可以", "。", "每个", "用户", "都", "只能", "访问", "自己", "的", "数据", "，", "无论是", "查看", "数据", "、", "输入", "新", "数据", "还是", "修改", "旧", "数据", "时", "都", "如此", "。", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "19", "-", "3", " ", "重构", "\n", "重构", " ", "：", "在", "views", ".", "py", "中", "，", "我们", "在", "两个", "地方", "核实", "主题", "关联", "到", "的", "用户", "为", "当前", "登录", "的", "用户", "。", "请", "将", "执行", "这种", "检查", "的", "代码", "放在", "一个", "名为", "check", "_", "topic", "_", "owner", "(", ")", " ", "的", "函数", "中", "，", "\n", "并", "在", "恰当", "的", "地方", "调用", "这个", "函数", "。", "\n", "19", "-", "4", " ", "保护", "页面", "\n", "保护", "页面", "new", "_", "entry", " ", "：", "一个", "用户", "可", "在", "另", "一个", "用户", "的", "学习", "笔记", "中", "添加", "条目", "，", "方法", "是", "输入", "这样", "的", "URL", "，", "即", "其中", "包含", "输入", "另", "一个", "用户", "的", "主题", "的", "ID", "。", "为", "防范", "这种", "攻击", "，", "\n", "请", "在", "保存", "新条", "目前", "，", "核实", "它", "所属", "的", "主题", "归", "当前", "用户", "所有", "。", "\n", "19", "-", "5", " ", "受", "保护", "的", "博客"], ["请", "在", "保存", "新条", "目前", "，", "核实", "它", "所属", "的", "主题", "归", "当前", "用户", "所有", "。", "\n", "19", "-", "5", " ", "受", "保护", "的", "博客", "\n", "受", "保护", "的", "博客", " ", "：", "在", "你", "创建", "的", "项目", "Blog", "中", "，", "确保", "每篇", "博文", "都", "与", "特定", "用户", "相关联", "。", "确保", "任何", "用户", "都", "可", "访问", "所有", "的", "博文", "，", "但", "只有", "已", "登录", "的", "用户", "能够", "发表", "博文", "以及", "编辑", "既", "\n", "有", "博文", "。", "在", "让", "用户", "能够", "编辑", "其", "博文", "的", "视图", "中", "，", "在", "处理", "表单", "前", "确认", "用户", "编辑", "的", "是", "他", "自己", "发表", "的", "博文", "。", "\n", "19.4", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "如何", "使用", "表单", "来", "让", "用户", "添加", "新", "主题", "、", "添加", "新", "条目", "和", "编辑", "既有", "条目", "。", "接下来", "，", "你", "学习", "了", "如何", "实现", "用户", "账户", "。", "你", "让", "老", "用户", "能够", "登录", "和", "注销", "，", "并", "学习", "了", "如何", "使用", "\n", "Django", "提供", "的", "表单", "UserCreationForm", " ", "让", "用户", "能够", "创建", "新", "账户", "。", "\n", "建立", "简单", "的", "用户", "身份验证", "和", "注册", "系统", "后", "，", "你", "通过", "使用", "装饰", "器", "@", "login", "_", "required", " ", "禁止", "未", "登录", "的", "用户", "访问", "特定", "页面", "。", "然后", "，", "你", "通过", "使用", "外键", "将", "数据", "关联", "到", "特定", "用户", "，", "还", "学习", "了", "如何", "\n", "执行", "要求", "指定", "默认", "数据", "的", "数据库", "迁移", "。", "\n", "最后", "，", "你", "学习", "了", "如何", "修改", "视图", "函数", "，", "让", "用户", "只能", "看到", "属于", "他", "的", "数据", "。", "你", "使用", "方法", "filter", "(", ")", " ", "来", "获取", "合适", "的", "数据", "，", "并", "学习", "了", "如何", "将", "请求", "的", "数据", "的", "所有者", "同", "当前", "登录", "的", "用户", "进行", "比", "\n", "较", "。"], ["较", "。", "\n", "该", "让", "哪些", "数据", "可", "随便", "访问", "，", "该", "对", "哪些", "数据", "进行", "保护", "呢", "？", "这", "可能", "并非", "总是", "那么", "显而易见", "，", "但", "通过", "不断", "地", "练习", "就", "能", "掌握", "这种", "技能", "。", "在", "本章", "中", "，", "我们", "就", "该", "如何", "保护", "用户", "数据", "所", "做", "的", "决策", "\n", "表明", "，", "与", "人", "合作开发", "项目", "是", "个", "不错", "的", "主意", "：", "有人", "对", "项目", "进行", "检查", "的话", "，", "更", "容易", "发现", "其", "薄弱环节", "。", "\n", "至此", "，", "我们", "创建", "了", "一个", "功能", "齐备", "的", "项目", "，", "它", "运行", "在", "本地", "计算机", "上", "。", "在", "本书", "的", "最后", "一章", "，", "我们", "将", "设置", "这个", "项目", "的", "样式", "，", "使", "其", "更", "漂亮", "；", "我们", "还", "将", "把", "它", "部署", "到", "一台", "服务器", "上", "，", "让", "任何人", "\n", "都", "可", "通过", "互联网", "注册", "并", "创建", "账户", "。", "\n", "第", "\n", "第", " ", "20", " ", "章", "　", "设置", "应用程序", "的", "样式", "并", "对", "其", "进行", "部署", "\n", "章", "　", "设置", "应用程序", "的", "样式", "并", "对", "其", "进行", "部署", "\n", "当前", "，", "项目", "“", "学习", "笔记", "”", "功能", "已", "齐备", "，", "但", "未", "设置", "样式", "，", "也", "只是", "在", "本地", "计算机", "上", "运行", "。", "在", "本章", "中", "，", "我们", "将", "以", "简单", "而", "专业", "的", "方式", "设置", "这个", "项目", "的", "样式", "，", "再", "将", "其", "部署", "到", "一", "台服", "\n", "务器", "上", "，", "让", "世界", "上", "的", "任何人", "都", "能够", "建立", "账户", "。", "\n", "为", "设置", "样式", "，", "我们", "将", "使用", "Bootstrap", "库", "，", "这是", "一组", "工具", "，", "用于", "为", "Web", "应用程序", "设置", "样式", "，", "使", "其", "在", "任何", "现代", "设备", "上", "都", "看起来", "很", "专业", "，", "无论是", "大型", "的", "平板显示器", "还是", "智能", "手", "\n", "机", "。", "为此", "，", "我们", "将", "使用", "应用程序", "django", "-", "bootstrap3", "，", "这", "也", "让", "你", "能够", "练习", "使用", "其他", "Django", "开发人员", "开发", "的", "应用程序", "。"], ["我们", "将", "把", "项目", "“", "学习", "笔记", "”", "部署", "到", "Heroku", "，", "这个", "网站", "让", "你", "能够", "将", "项目", "推送", "到", "其", "服务器", "，", "让", "任何", "有", "网络连接", "的", "人", "都", "可", "使用", "它", "。", "我们", "还", "将", "使用", "版本", "控制系统", "Git", "来", "跟踪", "对", "这个", "\n", "项目", "所", "做", "的", "修改", "。", "\n", "完成", "项目", "“", "学习", "笔记", "”", "后", "，", "你", "将", "能够", "开发", "简单", "的", "Web", "应用程序", "，", "让", "它们", "看起来", "很漂亮", "，", "再", "将", "它们", "部署", "到", "服务器", "。", "你", "还", "能够", "利用", "更", "高级", "的", "学习", "资源", "来", "提高", "技能", "。", "\n", "20.1", "　", "设置", "项目", "\n", "　", "设置", "项目", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "的", "样式", "\n", "的", "样式", "\n", "我们", "一直", "专注", "于", "项目", "“", "学习", "笔记", "”", "的", "功能", "，", "而", "没有", "考虑", "样式", "设置", "的", "问题", "，", "这是", "有意", "为", "之", "的", "。", "这是", "一种", "不错", "的", "开发方法", "，", "因为", "能", "正确", "运行", "的", "应用程序", "才", "是", "有用", "的", "。", "当然", "，", "应用程序", "能", "\n", "够", "正确", "运行", "后", "，", "外观", "就", "显得", "很", "重要", "了", "，", "因为", "漂亮", "的", "应用程序", "才能", "吸引", "用户", "使用", "它", "。", "\n", "在", "本节", "中", "，", "我", "将", "简要地", "介绍", "应用程序", "django", "-", "bootstrap3", "，", "并", "演示", "如何", "将", "其", "继承", "到", "项目", "中", "，", "为", "部署", "项目", "做好", "准备", "。"], ["20.1", ".", "1", "　", "应用程序", "\n", "　", "应用程序", "django", "-", "bootstrap3", "\n", "我们", "将", "使用", "django", "-", "bootstrap3", "来", "将", "Bootstrap", "继承", "到", "项目", "中", "。", "这个", "应用程序", "下载", "必要", "的", "Bootstrap", "文件", "，", "将", "它们", "放到", "项目", "的", "合适", "位置", "，", "让", "你", "能够", "在", "项目", "的", "模板", "中", "使用", "样式", "设置", "指令", "。", "\n", "为", "安装", "django", "-", "bootstrap3", "，", "在", "活动", "的", "虚拟环境", "中", "执行", "如下", "命令", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "django", "-", "bootstrap3", "\n", "--", "snip", "--", "\n", "Successfully", " ", "installed", " ", "django", "-", "bootstrap3", "\n", "接下来", "，", "需要", "在", "settings", ".", "py", "的", "INSTALLED", "_", "APPS", " ", "中", "添加", "如下", "代码", "，", "在", "项目", "中", "包含", "应用程序", "django", "-", "boostrap3", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "INSTALLED", "_", "APPS", " ", "=", " ", "(", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "'", "django", ".", "contrib", ".", "staticfiles", "'", ",", "\n", " ", " ", " ", " ", "#", " ", "第三方", "应用程序", "\n", " ", " ", " ", " ", "'", "bootstrap3", "'", ",", "\n", " ", " ", " ", " ", "#", " ", "我", "的", "应用程序", "\n", " ", " ", " ", " ", "'", "learning", "_", "logs", "'", ",", "\n", " ", " ", " ", " ", "'", "users", "'", ",", "\n", ")"], ["#", " ", "我", "的", "应用程序", "\n", " ", " ", " ", " ", "'", "learning", "_", "logs", "'", ",", "\n", " ", " ", " ", " ", "'", "users", "'", ",", "\n", ")", "\n", "--", "snip", "--", "\n", "新建", "一个", "用于", "指定", "其他", "开发人员", "开发", "的", "应用程序", "的", "片段", "，", "将", "其", "命名", "为", "“", "第三方", "应用程序", "”", "，", "并", "在", "其中", "添加", "'", "bootstrap3", "'", " ", "。", "大多数", "应用程序", "都", "需要", "包含", "在", "INSTALLED", "_", "APPS", " ", "中", "，", "\n", "为", "确定", "这", "一点", "，", "请", "阅读", "要", "使用", "的", "应用程序", "的", "设置", "说明", "。", "\n", "我们", "需要", "让", "django", "-", "bootstrap3", "包含", "jQuery", "，", "这是", "一个", "JavaScript", "库", "，", "让", "你", "能够", "使用", "Bootstrap", "模板", "提供", "的", "一些", "交互式", "元素", "。", "请", "在", "settings", ".", "py", "的", "末尾", "添加", "如下", "代码", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "#", " ", "我", "的", "设置", "\n", "LOGIN", "_", "URL", " ", "=", " ", "'", "/", "users", "/", "login", "/", "'", "\n", "#", " ", "django", "-", "bootstrap3", "的", "设置", "\n", "BOOTSTRAP3", " ", "=", " ", "{", "\n", " ", " ", " ", " ", "'", "include", "_", "jquery", "'", ":", " ", "True", ",", "\n", " ", " ", " ", " ", "}", "\n", "这些", "代码", "让", "你", "无需", "手工", "下载", "jQuery", "并", "将", "其", "放到", "正确", "的", "地方", "。", "\n", "20.1", ".", "2", "　", "使用", "\n", "　", "使用", "Bootstrap", "来", "设置", "项目", "\n", "来", "设置", "项目", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "的", "样式", "\n", "的", "样式"], ["使用", "Bootstrap", "来", "设置", "项目", "\n", "来", "设置", "项目", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "的", "样式", "\n", "的", "样式", "\n", "Bootstrap", "基本上", "就是", "一个", "大型", "的", "样式", "设置", "工具集", "，", "它", "还", "提供", "了", "大量", "的", "模板", "，", "你", "可", "将", "它们", "应用", "于", "项目", "以", "创建", "独特", "的", "总体", "风格", "。", "对", "Bootstrap", "初学者", "来说", "，", "这些", "模板", "比", "各个", "样式", "设置", "工具", "\n", "使用", "起来", "要", "容易", "得", "多", "。", "要", "查看", "Bootstrap", "提供", "的", "模板", "，", "可", "访问", "http", ":", "/", "/", "getbootstrap", ".", "com", "/", " ", "，", "单击", "Getting", " ", "Started", "，", "再", "向下", "滚动", "到", "Examples", "部分", "，", "并", "找到", "Navbars", " ", "in", " ", "action", "。", "我们", "将", "使用", "模板", "Static", "\n", "top", " ", "navbar", "，", "它", "提供", "了", "简单", "的", "顶部", "导航条", "、", "页面", "标题", "和", "用于", "放置", "页面", "内容", "的", "容器", "。", "\n", "图", "20", "-", "1", "显示", "了", "对", "base", ".", "html", "应用", "这个", "Bootstrap", "模板", "并", "对", "index", ".", "html", "做", "细微", "修改", "后", "的", "主页", "。", "\n", "图", "\n", "图", "20", "-", "1", "　", "项目", "\n", "　", "项目", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "的", "主页", "\n", "的", "主页", "—", "—", "使用", "\n", "使用", "Bootstrap", "设置", "样式", "后", "\n", "设置", "样式", "后", "\n", "知道", "要", "获得", "的", "效果", "后", "，", "接下来", "的", "内容", "理解", "起来", "将", "更", "容易", "。", "\n", "20.1", ".", "3", "　", "修改", "\n", "　", "修改", "base", ".", "html"], ["知道", "要", "获得", "的", "效果", "后", "，", "接下来", "的", "内容", "理解", "起来", "将", "更", "容易", "。", "\n", "20.1", ".", "3", "　", "修改", "\n", "　", "修改", "base", ".", "html", "\n", "我们", "需要", "修改", "模板", "base", ".", "html", "，", "以", "使用", "前述", "Bootstrap", "模板", "。", "我们", "把", "新", "的", "base", ".", "html", "分成", "几个", "部分", "进行", "介绍", "。", "\n", "1", ".", " ", "定义", "\n", "定义", "HTML", "头部", "\n", "头部", "\n", "对", "base", ".", "html", "所", "做", "的", "第一项", "修改", "是", "，", "在", "这个", "文件", "中", "定义", "HTML", "头部", "，", "使得", "显示", "“", "学习", "笔记", "”", "的", "每个", "页面", "时", "，", "浏览器", "标题栏", "都", "显示", "这个", "网站", "的", "名称", "。", "我们", "还", "将", "添加", "一些", "在", "模板", "中", "使用", "\n", "Bootstrap", "所", "需", "的", "信息", "。", "删除", "base", ".", "html", "的", "全部", "代码", "，", "并", "输入", "下面", "的", "代码", "："], ["base", ".", "html", "\n", "❶", " ", "{", "%", " ", "load", " ", "bootstrap3", " ", "%", "}", "\n", "❷", " ", "<", "!", "DOCTYPE", " ", "html", ">", "\n", "❸", " ", "<", "html", " ", "lang", "=", "\"", "en", "\"", ">", "\n", "❹", " ", " ", " ", "<", "head", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "meta", " ", "charset", "=", "\"", "utf", "-", "8", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "meta", " ", "http", "-", "equiv", "=", "\"", "X", "-", "UA", "-", "Compatible", "\"", " ", "content", "=", "\"", "IE", "=", "edge", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "meta", " ", "name", "=", "\"", "viewport", "\"", " ", "content", "=", "\"", "width", "=", "device", "-", "width", ",", " ", "initial", "-", "scale", "=", "1", "\"", ">", "\n", "❺", " ", " ", " ", " ", " ", "<", "title", ">", "Learning", " ", "Log", "<", "/", "title", ">", "\n", "❻", " ", " ", " ", " ", " ", "{", "%", " ", "bootstrap", "_", "css", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "bootstrap", "_", "javascript", " ", "%", "}", "\n", "❼", " ", " ", " ", "<", "/", "head", ">", "\n", "在", "❶", "处", "，", "我们", "加载", "了", "django", "-", "bootstrap3", "中", "的", "模板", "标签集", "。", "接下来", "，", "我们", "将", "这个", "文件", "声明", "为", "使用", "英语", "（", "见", "❸", "）", "编写", "的", "HTML", "文档", "（", "见", "❷", "）", "。", "HTML", "文件", "分为", "两个", "主要", "部分", "：", "头部", "\n", "头部", "\n", "（", "head", "）", "和", "主体"], ["头部", "\n", "（", "head", "）", "和", "主体", "\n", "主体", " ", "（", "body", "）", "；", "在", "这个", "文件", "中", "，", "头部", "始于", "❹", "处", "。", "HTML", "文件", "的", "头部", "不", "包含", "任何", "内容", "：", "它", "只是", "将", "正确", "显示", "页面", "所", "需", "的", "信息", "告诉", "浏览器", "。", "在", "❺", "处", "，", "我们", "包含", "了", "一个", "title", "\n", "元素", "，", "在", "浏览器", "中", "打开", "网站", "“", "学习", "笔记", "”", "的", "页面", "时", "，", "浏览器", "的", "标题栏", "将", "显示", "该", "元素", "的", "内容", "。", "\n", "在", "❻", "处", "，", "我们", "使用", "了", "django", "-", "bootstrap3", "的", "一个", "自定义", "模板", "标签", "，", "它", "让", "Django", "包含", "所有", "的", "Bootstrap", "样式", "文件", "。", "接下来", "的", "标签", "启用", "你", "可能", "在", "页面", "中", "使用", "的", "所有", "交互式", "行为", "，", "如", "可折叠", "的", "导", "\n", "航栏", "。", "❼", "处为", "结束", "标签", "<", "/", "head", ">", " ", "。", "\n", "2", ".", " ", "定义", "导航", "栏", "\n", "定义", "导航", "栏", "\n", "下面", "来", "定义", "页面", "顶部", "的", "导航", "栏", "：", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "<", "/", "head", ">", "\n", " ", " ", " ", " ", "<", "body", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "!", "--", " ", "Static", " ", "navbar", " ", "--", ">", "\n", "❶", " ", " ", " ", " ", " ", "<", "nav", " ", "class", "=", "\"", "navbar", " ", "navbar", "-", "default", " ", "navbar", "-", "static", "-", "top", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "container", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "navbar", "-", "header", "\"", ">"], ["<", "div", " ", "class", "=", "\"", "navbar", "-", "header", "\"", ">", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "button", " ", "type", "=", "\"", "button", "\"", " ", "class", "=", "\"", "navbar", "-", "toggle", " ", "collapsed", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "data", "-", "toggle", "=", "\"", "collapse", "\"", " ", "data", "-", "target", "=", "\"", "#", "navbar", "\"", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "aria", "-", "expanded", "=", "\"", "false", "\"", " ", "aria", "-", "controls", "=", "\"", "navbar", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "button", ">", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "a", " ", "class", "=", "\"", "navbar", "-", "brand", "\"", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "Learning", " ", "Log", "<", "/", "a", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "id", "=", "\"", "navbar", "\"", " ", "class", "=", "\"", "navbar", "-", "collapse", " ", "collapse", "\"", ">", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "ul", " ", "class", "=", "\"", "nav", " ", "navbar", "-", "nav", "\"", ">"], ["❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "ul", " ", "class", "=", "\"", "nav", " ", "navbar", "-", "nav", "\"", ">", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topics", "'", " ", "%", "}", "\"", ">", "Topics", "<", "/", "a", ">", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "ul", ">", "\n", "❼", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "ul", " ", "class", "=", "\"", "nav", " ", "navbar", "-", "nav", " ", "navbar", "-", "right", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "%", " ", "if", " ", "user", ".", "is", "_", "authenticated", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "<", "a", ">", "Hello", ",", " ", "{", "{", " ", "user", ".", "username", " ", "}", "}", ".", "<", "/", "a", ">", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "logout", "'", " ", "%", "}", "\"", ">", "log", " ", "out", "<", "/", "a", ">", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "%", " ", "else", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "register", "'", " ", "%", "}", "\"", ">", "register", "<", "/", "a", ">", "<", "/", "li", ">"], ["<", "li", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", ">", "log", " ", "in", "<", "/", "a", ">", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "%", " ", "endif", " ", "%", "}", "\n", "❽", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "ul", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "<", "!", "--", "/", ".", "nav", "-", "collapse", " ", "--", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "nav", ">", "\n", "第一个", "元素", "为", "起始", "标签", "<", "body", ">", " ", "。", "HTML", "文件", "的", "主体", "包含", "用户", "将", "在", "页面", "上", "看到", "的", "内容", "。", "❶", "处", "是", "一个", "<", "nav", ">", " ", "元素", "，", "表示", "页面", "的", "导航", "链接", "部分", "。", "对于", "这个", "元素", "内", "的", "所有", "内容", "，", "都", "将", "根", "\n", "据", "选择器", "\n", "选择器", " ", "（", "selector", "）", "navbar", " ", "、", "navbar", "-", "default", " ", "和", "navbar", "-", "static", "-", "top", " ", "定义", "的", "Bootstrap", "样式", "规则", "来", "设置", "样式", "。", "选择器", "决定", "了", "特定", "样式", "规则", "将", "应用", "于", "页面", "上", "的", "哪些", "元素", "。", "\n", "在", "❷", "处", "，", "这个", "模板", "定义", "了", "一个", "按钮", "，", "它", "将", "在", "浏览器", "窗口", "太窄", "、", "无法", "水平", "显示", "整个", "导航", "栏时", "显示", "出来", "。", "如果", "用户", "单击", "这个", "按钮", "，", "将", "出现", "一个", "下", "拉", "列表", "，", "其中", "包含", "所有", "的", "导航", "元素", "。", "\n", "在", "用户", "缩小", "浏览器", "窗口", "或", "在", "屏幕", "较", "小", "的", "移动", "设备", "上", "显示", "网站", "时", "，", "collapse", " ", "会", "使", "导航", "栏", "折叠", "起来", "。"], ["在", "用户", "缩小", "浏览器", "窗口", "或", "在", "屏幕", "较", "小", "的", "移动", "设备", "上", "显示", "网站", "时", "，", "collapse", " ", "会", "使", "导航", "栏", "折叠", "起来", "。", "\n", "在", "❸", "处", "，", "我们", "在", "导航", "栏", "的", "最", "左边", "显示", "项目", "名", "，", "并", "将", "其", "设置", "为", "到", "主页", "的", "链接", "，", "因为", "它", "将", "出现", "在", "这个", "项目", "的", "每个", "页面", "中", "。", "\n", "在", "❹", "处", "，", "我们", "定义", "了", "一组", "让", "用户", "能够", "在", "网站", "中", "导航", "的", "链接", "。", "导航", "栏", "其实", "就是", "一个", "以", "<", "ul", ">", " ", "打头", "的", "列表", "（", "见", "❺", "）", "，", "其中", "每个", "链接", "都", "是", "一个", "列表", "项", "（", "<", "li", ">", " ", "）", "。", "要", "添加", "更", "多", "的", "链接", "，", "可", "\n", "插入", "更", "多", "使用", "下述", "结构", "的", "行", "：", "\n", "<", "li", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "title", "'", " ", "%", "}", "\"", ">", "Title", "<", "/", "a", ">", "<", "/", "li", ">", "\n", "这", "行", "表示", "导航", "栏中", "的", "一个", "链接", "。", "这个", "链接", "是", "直接", "从", "base", ".", "html", "的", "前", "一个", "版本", "中", "复制", "而来", "的", "。", "\n", "在", "❼", "处", "，", "我们", "添加", "了", "第二个", "导航", "链接", "列表", "，", "这里", "使用", "的", "选择器", "为", "navbar", "-", "right", " ", "。", "选择器", "navbar", "-", "right", " ", "设置", "一组", "链接", "的", "样式", "，", "使", "其", "出现", "在", "导航", "栏", "右边", "—", "—", "登录", "链接", "和", "注册", "链", "\n", "接", "通常", "出现", "在", "这里", "。", "在", "这里", "，", "我们", "要么", "显示", "问候语", "和", "注销", "链接", "，", "要么", "显示", "注册", "链接", "和", "登录", "链接", "。", "这部分", "余下", "的", "代码", "结束", "包含", "导航", "栏", "的", "元素", "（", "见", "❽", "）", "。", "\n", "3", ".", " ", "定义", "页面", "的", "主要", "部分", "\n", "定义", "页面", "的", "主要", "部分", "\n", "base", ".", "html", "的", "剩余", "部分", "包含", "页面", "的", "主要", "部分", "："], ["3", ".", " ", "定义", "页面", "的", "主要", "部分", "\n", "定义", "页面", "的", "主要", "部分", "\n", "base", ".", "html", "的", "剩余", "部分", "包含", "页面", "的", "主要", "部分", "：", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "nav", ">", "\n", "❶", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "container", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "page", "-", "header", "\"", ">", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "div", ">", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">"], ["<", "/", "div", ">", " ", "<", "!", "--", " ", "/", "container", " ", "--", ">", "\n", " ", " ", " ", " ", "<", "/", "body", ">", "\n", " ", " ", "<", "/", "html", ">", "\n", "❶", "处", "是", "一个", "<", "div", ">", " ", "起始", "标签", "，", "其", "class", "属性", "为", "container", " ", "。", "div", "是", "网页", "的", "一部分", "，", "可", "用于", "任何", "目的", "，", "并", "可", "通过", "边框", "、", "元素", "周围", "的", "空间", "（", "外边", "距", "）", "、", "内容", "和", "边框", "之间", "的", "间距", "（", "内", "边", "\n", "距", "）", "、", "背景色", "和", "其他", "样式", "规则", "来", "设置", "其", "样式", "。", "这个", "div", "是", "一个", "容器", "，", "其中", "包含", "两个", "元素", "：", "一个", "新增", "的", "名为", "header", " ", "的", "块", "（", "见", "❷", "）", "以及", "我们", "在", "第", "18", "章", "使用", "的", "content", " ", "块", "（", "见", "\n", "❸", "）", "。", "header", " ", "块", "的", "内容", "告诉", "用户", "页面", "包含", "哪些", "信息", "以及", "用户", "可", "在", "页面", "上", "执行", "哪些", "操作", "；", "其", "class", "属性", "值", "page", "-", "header", " ", "将", "一系列", "样式", "应用", "于", "这个", "块", "。", "content", " ", "块", "是", "一个", "独立", "的", "\n", "div", "，", "未", "使用", "class", "属性", "指定", "样式", "。", "\n", "如果", "你", "在", "浏览器", "中", "加载", "“", "学习", "笔记", "”", "的", "主页", "，", "将", "看到", "一个", "类似", "于图", "20", "-", "1", "所示", "的", "专业级", "导航", "栏", "。", "请", "尝试", "调整", "窗口", "的", "大小", "，", "使", "其", "非常", "窄", "；", "此时", "导航", "栏", "将", "变成", "一个", "按钮", "，", "如果", "你", "单击", "这个", "按", "\n", "钮", "，", "将", "打开", "一个", "下", "拉", "列表", "，", "其中", "包含", "所有", "的", "导航", "链接", "。", "\n", "注意"], ["钮", "，", "将", "打开", "一个", "下", "拉", "列表", "，", "其中", "包含", "所有", "的", "导航", "链接", "。", "\n", "注意", "\n", "注意", " ", "　", "这个", "简化", "的", "Bootstrap", "模板", "适用", "于", "最新", "的", "浏览器", "，", "而", "较", "早", "的", "浏览器", "可能", "不能", "正确", "地", "渲染", "某些", "样式", "。", "完整", "的", "模板", "可", "在", "http", ":", "/", "/", "getbootstrap", ".", "com", "/", "getting", "-", "started", "/", "#", "examples", "/", " ", "找", "\n", "到", "，", "它", "几乎", "在", "所有", "浏览器", "中", "都", "管用", "。", "\n", "20.1", ".", "4", "　", "使用", "\n", "　", "使用", "jumbotron", "设置", "主页", "的", "样式", "\n", "设置", "主页", "的", "样式", "\n", "下面", "来", "使用", "新", "定义", "的", "header", " ", "块", "及", "另", "一个", "名为", "jumbotron", "的", "Bootstrap", "元素", "修改", "主页", "。", "jumbotron", "元素", "是", "一个", "大框", "，", "相比", "于", "页面", "的", "其他", "部分", "显得", "鹤立鸡群", "，", "你", "想", "在", "其中", "包含", "什么", "东西", "都", "可", "\n", "以", "；", "它", "通常", "用于", "在", "主页", "中", "呈现", "项目", "的", "简要", "描述", "。", "我们", "还", "可以", "修改", "主页", "显示", "的", "消息", "。", "index", ".", "html", "的", "代码", "如下", "：", "\n", "index", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "❶", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", "❷", " ", " ", " ", "<", "div", " ", "class", "=", "'", "jumbotron", "'", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "h1", ">", "Track", " ", "your", " ", "learning", ".", "<", "/", "h1", ">", "\n", " ", " ", " ", " ", "<", "/", "div", ">"], ["<", "h1", ">", "Track", " ", "your", " ", "learning", ".", "<", "/", "h1", ">", "\n", " ", " ", " ", " ", "<", "/", "div", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❸", " ", " ", " ", "<", "h2", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "register", "'", " ", "%", "}", "\"", ">", "Register", " ", "an", " ", "account", "<", "/", "a", ">", " ", "to", " ", "make", "\n", " ", " ", " ", " ", " ", " ", "your", " ", "own", " ", "Learning", " ", "Log", ",", " ", "and", " ", "list", " ", "the", " ", "topics", " ", "you", "'", "re", " ", "learning", " ", "about", ".", "\n", " ", " ", " ", " ", "<", "/", "h2", ">", "\n", " ", " ", " ", " ", "<", "h2", ">", "\n", " ", " ", " ", " ", " ", " ", "Whenever", " ", "you", " ", "learn", " ", "something", " ", "new", " ", "about", " ", "a", " ", "topic", ",", " ", "make", " ", "an", " ", "entry", "\n", " ", " ", " ", " ", " ", " ", "summarizing", " ", "what", " ", "you", "'", "ve", " ", "learned", ".", "\n", " ", " ", " ", " ", "<", "/", "h2", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "在", "❶", "处", "，", "我们", "告诉", "Django", "，", "我们", "要", "定义", "header", " ", "块", "包含", "的", "内容", "。", "在", "一个", "jumbotron", " ", "元素", "（", "见", "❷", "）", "中", "，", "我们", "放置", "了", "一条", "简短", "的", "标语", "—", "—", "Track", " ", "your", " ", "Learning", "，", "让", "首次", "访问者", "大致", "知"], ["道", "“", "学习", "笔记", "”", "是", "做", "什么", "用", "的", "。", "\n", "在", "❸", "处", "，", "我们", "通过", "添加", "一些", "文本", "，", "做", "了", "更", "详细", "的", "说明", "。", "我们", "邀请", "用户", "建立", "账户", "，", "并", "描述", "了", "用户", "可", "执行", "的", "两种", "主要", "操作", "：", "添加", "新", "主题", "以及", "在", "主题", "中", "创建", "条目", "。", "现在", "的", "主页", "类似", "于图", "\n", "20", "-", "1", "所示", "，", "与", "设置", "样式", "前", "相比", "，", "有", "了", "很大", "的", "改进", "。", "\n", "20.1", ".", "5", "　", "设置", "登录", "页面", "的", "样式", "\n", "　", "设置", "登录", "页面", "的", "样式", "\n", "我们", "改进", "了", "登录", "页面", "的", "整体", "外观", "，", "但", "还", "未", "改进", "登录", "表单", "，", "下面", "来", "让", "表单", "与", "页面", "的", "其他", "部分", "一致", "：", "\n", "login", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "❶", " ", "{", "%", " ", "load", " ", "bootstrap3", " ", "%", "}", "\n", "❷", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h2", ">", "Log", " ", "in", " ", "to", " ", "your", " ", "account", ".", "<", "/", "h2", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❸", " ", " ", " ", "<", "form", " ", "method", "=", "\"", "post", "\"", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "users", ":", "login", "'", " ", "%", "}", "\"", " ", "class", "=", "\"", "form", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", "❹", " ", " ", " ", " ", " ", "{", "%", " ", "bootstrap", "_", "form", " ", "form", " ", "%", "}"], ["❹", " ", " ", " ", " ", " ", "{", "%", " ", "bootstrap", "_", "form", " ", "form", " ", "%", "}", "\n", "❺", " ", " ", " ", " ", " ", "{", "%", " ", "buttons", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", " ", "class", "=", "\"", "btn", " ", "btn", "-", "primary", "\"", ">", "log", " ", "in", "<", "/", "button", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "endbuttons", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "<", "input", " ", "type", "=", "\"", "hidden", "\"", " ", "name", "=", "\"", "next", "\"", " ", "value", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "index", "'", " ", "%", "}", "\"", " ", "/", ">", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "在", "❶", "处", "，", "我们", "在", "这个", "模板", "中", "加载", "了", "bootstrap3", "模板", "标签", "。", "在", "❷", "处", "，", "我们", "定义", "了", "header", " ", "块", "，", "它", "描述", "了", "这个", "页面", "是", "做", "什么", "用", "的", "。", "注意", "，", "我们", "从", "这个", "模板", "中", "删除", "了", "{", "%", " ", "if", "\n", "form", ".", "errors", " ", "%", "}", " ", "代码", "块", "，", "因为", "django", "-", "bootstrap3", "会", "自动", "管理", "表单", "错误", "。", "\n", "在", "❸", "处", "，", "我们", "添加", "了", "属性", "class", "=", "\"", "form", "\"", " ", "；", "然后", "使用", "模板", "标签", "{", "%", " ", "bootstrap", "_", "form", " ", "%", "}", " ", "来", "显示", "表单", "（", "见", "❹", "）", "；", "这个", "标签", "替换", "了", "我们", "在", "第", "19", "章", "使用", "的", "标签", "{", "{", " ", "form", ".", "as", "_", "p"], ["}", "}", " ", "。", "模板", "标签", "{", "%", " ", "booststrap", "_", "form", " ", "%", "}", " ", "将", "Bootstrap", "样式", "规则", "应用", "于", "各个", "表单", "元素", "。", "❺", "处", "是", "bootstrap3", "起始", "模板", "标签", "{", "%", " ", "buttons", " ", "%", "}", " ", "，", "它", "将", "Bootstrap", "样式", "应用", "于", "按钮", "。", "\n", "图", "20", "-", "2", "显示", "了", "现在", "渲染", "的", "登录", "表单", "。", "这个", "页面", "比", "以前", "整洁", "得", "多", "，", "其", "风格", "一致", "，", "用途", "明确", "。", "如果", "你", "尝试", "使用", "错误", "的", "用户名", "或", "密码", "登录", "，", "将", "发现", "消息", "的", "样式", "与", "整个", "网站", "也", "是", "一致", "的", "，", "\n", "毫无", "违和感", "。"], ["图", "\n", "图", "20", "-", "2", "　", "使用", "\n", "　", "使用", "Bootstrap", "设置", "样式", "后", "的", "登录", "页面", "\n", "设置", "样式", "后", "的", "登录", "页面", "\n", "20.1", ".", "6", "　", "设置", "\n", "　", "设置", "new", "_", "topic", " ", "页面", "的", "样式", "\n", "页面", "的", "样式", "\n", "下面", "来", "让", "其他", "网页", "的", "风格", "也", "一致", "。", "首先", "来", "修改", "new", "_", "topic", " ", "页面", "\n", "new", "_", "topic", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "load", " ", "bootstrap3", " ", "%", "}", "\n", "❶", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h2", ">", "Add", " ", "a", " ", "new", " ", "topic", ":", "<", "/", "h2", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", "❷", " ", " ", " ", "<", "form", " ", "action", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "topic", "'", " ", "%", "}", "\"", " ", "method", "=", "'", "post", "'", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "class", "=", "\"", "form", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "csrf", "_", "token", " ", "%", "}", "\n", "❸", " ", " ", " ", " ", " ", "{", "%", " ", "bootstrap", "_", "form", " ", "form", " ", "%", "}", "\n", "❹", " ", " ", " ", " ", " ", "{", "%", " ", "buttons", " ", "%", "}"], ["❹", " ", " ", " ", " ", " ", "{", "%", " ", "buttons", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "button", " ", "name", "=", "\"", "submit", "\"", " ", "class", "=", "\"", "btn", " ", "btn", "-", "primary", "\"", ">", "add", " ", "topic", "<", "/", "button", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "endbuttons", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "/", "form", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "这里", "的", "大多数", "修改", "都", "类似", "于", "对", "login", ".", "html", "所", "做", "的", "修改", "：", "在", "❶", "处", "加载", "bootstrap3", "，", "添加", "header", " ", "块", "并", "在", "其中", "包含", "合适", "的", "消息", "；", "接下来", "，", "我们", "在", "标签", "<", "form", ">", " ", "中", "添加", "属性", "class", "=", "\"", "form", "\"", "\n", "（", "见", "❷", "）", "，", "使用", "模板", "标签", "{", "%", " ", "bootstrap", "_", "form", " ", "%", "}", " ", "代替", "{", "{", " ", "form", ".", "as", "_", "p", " ", "}", "}", " ", "（", "见", "❸", "）", "，", "并", "使用", "bootstrap3", "结构", "来", "定义", "提交", "按钮", "（", "见", "❹", "）", "。", "如果", "你", "现在", "登录", "并", "导航", "\n", "到", "new", "_", "topic", " ", "页面", "，", "将", "发现", "其", "外观", "类似", "于", "登录", "页面", "。", "\n", "20.1", ".", "7", "　", "设置", "\n", "　", "设置", "topics", "页面", "的", "样式", "\n", "页面", "的", "样式", "\n", "下面", "来", "确保", "用于", "查看", "信息", "的", "页面", "的", "样式", "也", "是", "合适", "的", "，", "首先", "来", "设置", "topics", "页面", "的", "样式", "：", "\n", "topics", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}"], ["{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "❶", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h1", ">", "Topics", "<", "/", "h1", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "ul", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "for", " ", "topic", " ", "in", " ", "topics", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "\n", "❷", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "h3", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "topic", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "a", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "h3", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "li", ">", "No", " ", "topics", " ", "have", " ", "been", " ", "added", " ", "yet", ".", "<", "/", "li", ">", "\n", " ", " ", " ", " ", " ", " ", "{", "%", " ", "endfor", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "/", "ul", ">", "\n", "❸", " ", " ", " ", "<", "h3", ">", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "topic", "'", " ", "%", "}", "\"", ">", "Add", " ", "new", " ", "topic", "<", "/", "h3", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}"], ["{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "我们", "不", "需要", "标签", "{", "%", " ", "load", " ", "bootstrap3", " ", "%", "}", " ", "，", "因为", "我们", "在", "这个", "文件", "中", "没有", "使用", "任何", "bootstrap3", "自定义", "标签", "。", "我们", "在", "header", " ", "块", "中", "添加", "了", "标题", "Topics", "（", "见", "❶", "）", "。", "为", "设置", "每个", "主题", "的", "\n", "样式", "，", "我们", "将", "它们", "都", "设置", "为", "<", "h3", ">", " ", "元素", "，", "让", "它们", "在", "页面", "上", "显得", "大", "些", "（", "见", "❷", "）", "；", "对于", "添加", "新", "主题", "的", "链接", "，", "也", "做", "了", "同样", "的", "处理", "（", "见", "❸", "）", "。", "\n", "20.1", ".", "8", "　", "设置", "\n", "　", "设置", "topic", "页面", "中", "条", "目的", "样式", "\n", "页面", "中", "条", "目的", "样式", "\n", "topic", "页面", "包含", "的", "内容", "比", "其他", "大部分", "页面", "都", "多", "，", "因此", "需要", "做", "的", "样式", "设置", "工作", "要", "多些", "。", "我们", "将", "使用", "Bootstrap", "面板", "\n", "面板", " ", "（", "panel", "）", "来", "突出", "每个", "条目", "。", "面板", "是", "一个", "带", "预定", "义", "样式", "的", "div", "，", "非常适合"], ["用于", "显示", "主题", "的", "条目", "：", "\n", "topic", ".", "html", "\n", " ", " ", "{", "%", " ", "extends", " ", "'", "learning", "_", "logs", "/", "base", ".", "html", "'", " ", "%", "}", "\n", "❶", " ", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h2", ">", "{", "{", " ", "topic", " ", "}", "}", "<", "/", "h2", ">", "\n", " ", " ", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "block", " ", "content", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "p", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "new", "_", "entry", "'", " ", "topic", ".", "id", " ", "%", "}", "\"", ">", "add", " ", "new", " ", "entry", "<", "/", "a", ">", "\n", " ", " ", " ", " ", "<", "/", "p", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "for", " ", "entry", " ", "in", " ", "entries", " ", "%", "}", "\n", "❷", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "panel", " ", "panel", "-", "default", "\"", ">", "\n", "❸", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "panel", "-", "heading", "\"", ">", "\n", "❹", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "h3", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "{", " ", "entry", ".", "date", "_", "added", "|", "date", ":", "'", "M", " ", "d", ",", " ", "Y", " ", "H", ":", "i", "'", " ", "}", "}", "\n", "❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "small", ">"], ["❺", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "small", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "a", " ", "href", "=", "\"", "{", "%", " ", "url", " ", "'", "learning", "_", "logs", ":", "edit", "_", "entry", "'", " ", "entry", ".", "id", " ", "%", "}", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "edit", " ", "entry", "<", "/", "a", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "small", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "h3", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "\n", "❻", " ", " ", " ", " ", " ", " ", " ", "<", "div", " ", "class", "=", "\"", "panel", "-", "body", "\"", ">", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "{", "{", " ", "entry", ".", "text", "|", "linebreaks", " ", "}", "}", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", "\n", " ", " ", " ", " ", " ", " ", "<", "/", "div", ">", " ", "<", "!", "--", " ", "panel", " ", "--", ">", "\n", " ", " ", " ", " ", "{", "%", " ", "empty", " ", "%", "}", "\n", " ", " ", " ", " ", " ", " ", "There", " ", "are", " ", "no", " ", "entries", " ", "for", " ", "this", " ", "topic", " ", "yet", ".", "\n", " ", " ", " ", " ", "{", "%", " ", "endfor", " ", "%", "}", "\n", " ", " ", "{", "%", " ", "endblock", " ", "content", " ", "%", "}", "\n", "我们", "首先", "将", "主题", "放在", "了", "header", " ", "块", "中", "（", "见", "❶", "）", "。", "然后", "，", "我们", "删除", "了", "这个", "模板", "中", "以前", "使用", "的", "无序", "列表", "结构", "。", "在", "❷", "处", "，", "我们", "创建", "了", "一个", "面板", "式", "div", "元素", "（", "而", "不是", "将", "每个", "条目", "作为", "一个", "列"], ["表项", "）", "，", "其中", "包含", "两个", "嵌套", "的", "div", "：", "一个", "面板", "标题", "（", "panel", "-", "heading", " ", "）", "div", "（", "见", "❸", "）", "和", "一个", "面板", "主体", "（", "panel", "-", "body", " ", "）", "div", "（", "见", "❹", "）", "。", "其中", "面板", "标题", "div", "包含", "条", "目的", "创建", "日期", "以及", "用", "\n", "于", "编辑", "条", "目的", "链接", "，", "它们", "都", "被", "设置", "为", "<", "h3", ">", " ", "元素", "，", "而", "对于", "编辑", "条", "目的", "链接", "，", "还", "使用", "了", "标签", "<", "small", ">", " ", "，", "使", "其", "比", "时间", "戳", "小些", "（", "见", "❺", "）", "。", "\n", "❻", "处", "是", "面板", "主体", "div", "，", "其中", "包含", "条", "目的", "实际", "文本", "。", "注意", "，", "只", "修改", "了", "影响", "页面", "外观", "的", "元素", "，", "对", "在", "页面", "中", "包含", "信息", "的", "Django", "代码", "未", "做", "任何", "修改", "。", "\n", "图", "20", "-", "3", "显示", "了", "修改", "后", "的", "topic", "页面", "。", "“", "学习", "笔记", "”", "的", "功能", "没有", "任何", "变化", "，", "但", "显得", "更", "专业", "了", "，", "对", "用户", "会", "更", "有", "吸引力", "。", "\n", "图", "\n", "图", "20", "-", "3", "　", "使用", "\n", "　", "使用", "Bootstrap", "设置", "样式", "后", "的", "\n", "设置", "样式", "后", "的", "topic", "页面", "\n", "页面", "\n", "注意", "\n", "注意", " ", "　", "要", "使用", "其他", "Bootstrap", "模板", "，", "可", "采用", "与", "本章", "类似", "的", "流程", "：", "将", "这个", "模板", "复制到", "base", ".", "html", "中", "，", "并", "修改", "包含", "实际", "内容", "的", "元素", "，", "以", "使用", "该", "模板", "来", "显示", "项目", "的", "信息", "；", "然后", "，", "\n", "使用", "Bootstrap", "的", "样式", "设置", "工具", "来", "设置", "各个", "页面", "中", "内容", "的", "样式", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "20", "-", "1", " ", "其他", "表单"], ["动手", "试一试", "\n", "动手", "试一试", "\n", "20", "-", "1", " ", "其他", "表单", "\n", "其他", "表单", " ", "：", "我们", "对", "登录", "页面", "和", "add", "_", "topic", " ", "页面", "应用", "了", "Bootstrap", "样式", "。", "请", "对", "其他", "基于", "表单", "的", "页面", "做", "类似", "的", "修改", "：", "new", "_", "entry", " ", "页面", "、", "edit", "_", "entry", " ", "页面", "和", "注册", "页", "\n", "面", "。", "\n", "20", "-", "2", " ", "设置", "博客", "的", "样式", "\n", "设置", "博客", "的", "样式", " ", "：", "对于", "你", "在", "第", "19", "章", "创建", "的", "项目", "Blog", "，", "使用", "Bootstrap", "来", "设置", "其", "样式", "。", "\n", "20.2", "　", "部署", "\n", "　", "部署", "“", "学习", "笔记", "\n", "学习", "笔记", "”", "\n", "至此", "，", "项目", "“", "学习", "笔记", "”", "的", "外观", "显得", "很", "专业", "了", "，", "下面", "来", "将", "其", "部署", "到", "一台", "服务器", "，", "让", "任何", "有", "网络连接", "的", "人", "都", "能够", "使用", "它", "。", "为此", "，", "我们", "将", "使用", "Heroku", "，", "这是", "一个", "基于", "Web", "的", "平台", "，", "让你能", "\n", "够", "管理", "Web", "应用程序", "的", "部署", "。", "我们", "将", "让", "“", "学习", "笔记", "”", "在", "Heroku", "上", "运行", "。", "\n", "在", "Windows", "系统", "上", "的", "部署", "过程", "与", "在", "Linux", "和", "OS", " ", "X", "系统", "上", "稍", "有", "不同", "。", "如果", "你", "使用", "的", "是", "Windows", "，", "请", "阅读", "各节", "的", "“", "注意", "”", "，", "它们", "指出", "了", "在", "Windows", "系统", "上", "需要", "采取", "的", "不同", "做法", "。", "\n", "20.2", ".", "1", "　", "建立", "\n", "　", "建立", "Heroku", "账户", "\n", "账户"], ["要", "建立", "账户", "，", "请", "访问", "https", ":", "/", "/", "heroku", ".", "com", "/", " ", "，", "并", "单击", "其中", "的", "一个", "注册", "链接", "。", "注册", "账户", "是", "免费", "的", "，", "Heroku", "提供", "了", "免费", "试用", "服务", "，", "让", "你", "能够", "将", "项目", "部署", "到", "服务器", "并", "对", "其", "进行", "测试", "。", "\n", "注意", "\n", "注意", " ", "　", "Heroku", "提供", "的", "免费", "试用", "服务", "存在", "一些", "限制", "，", "如可", "部署", "的", "应用程序", "数量", "以及", "用户", "访问", "应用程序", "的", "频率", "。", "但", "这些", "限制", "都", "很", "宽松", "，", "让", "你", "完全", "能够", "在", "不", "支付", "任何", "费用", "的", "\n", "情况", "下", "练习", "部署", "应用程序", "。", "\n", "20.2", ".", "2", "　", "安装", "\n", "　", "安装", "Heroku", " ", "Toolbelt", "\n", "要", "将", "项目", "部署", "到", "Heroku", "的", "服务器", "并", "对", "其", "进行", "管理", "，", "需要", "使用", "Heroku", " ", "Toolbelt", "提供", "的", "工具", "。", "要", "安装", "最新", "的", "Heroku", " ", "Toolbelt", "版本", "，", "请", "访问", "https", ":", "/", "/", "toolbelt", ".", "heroku", ".", "com", "/", " ", "，", "并", "根据", "你", "使用", "的", "操作", "\n", "系统", "按", "相关", "的", "说明", "做", "：", "使用", "只", "包含", "一行", "的", "终端", "命令", "，", "或", "下载", "并", "运行", "安装程序", "。", "\n", "20.2", ".", "3", "　", "安装", "必要", "的", "包", "\n", "　", "安装", "必要", "的", "包", "\n", "你", "还", "需", "安装", "很多", "包", "，", "以", "帮助", "在", "服务器", "上", "支持", "Django", "项目", "提供", "的", "服务", "。", "为此", "，", "在", "活动", "的", "虚拟环境", "中", "执行", "如下", "命令", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "dj", "-", "database", "-", "url"], ["(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "dj", "-", "database", "-", "url", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "dj", "-", "static", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "static3", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "install", " ", "gunicorn", "\n", "务必", "逐个", "地", "执行", "这些", "命令", "，", "这样", "你", "就", "能", "知道", "哪些", "包", "未能", "正确", "地", "安装", "。", "dj", "-", "database", "-", "url", " ", "包", "帮助", "Django", "与", "Heroku", "使用", "的", "数据库", "进行", "通信", "，", "dj", "-", "static", " ", "和", "static3", " ", "包", "帮助", "Django", "\n", "正确", "地", "管理", "静态", "文件", "，", "而", "gunicorn", " ", "是", "一个", "服务器软件", "，", "能够", "在", "在线", "环境", "中", "支持", "应用程序", "提供", "的", "服务", "。", "（", "静态", "文件", "包括", "样式", "规则", "和", "JavaScript", "文件", "。", "）", "\n", "注意", "\n", "注意", " ", "　", "在", "Windows", "系统", "中", "，", "有些", "必不可少", "的", "包", "可能", "无法", "安装", "，", "因此", "如果", "在", "你", "尝试", "安装", "有些", "这样", "的", "包时", "出现", "错误", "消息", "，", "也", "不用", "担心", "。", "重要", "的", "是", "让", "Heroku", "在", "部署", "中", "安装", "这", "\n", "些", "包", "，", "下", "一节", "就", "将", "这样", "做", "。", "\n", "20.2", ".", "4", "　", "创建", "包含", "包", "列表", "的", "文件", "\n", "　", "创建", "包含", "包", "列表", "的", "文件", "requirements", ".", "txt"], ["20.2", ".", "4", "　", "创建", "包含", "包", "列表", "的", "文件", "\n", "　", "创建", "包含", "包", "列表", "的", "文件", "requirements", ".", "txt", "\n", "Heroku", "需要", "知道", "我们", "的", "项目", "依赖于", "哪些", "包", "，", "因此", "我们", "将", "使用", "pip", "来", "生成", "一个", "文件", "，", "其中", "列出", "了", "这些", "包", "。", "同样", "，", "进入", "活动", "虚拟环境", "，", "并", "执行", "如下", "命令", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "pip", " ", "freeze", " ", ">", " ", "requirements", ".", "txt", "\n", "命令", "freeze", " ", "让", "pip", "将", "项目", "中", "当前", "安装", "的", "所有", "包", "的", "名称", "都", "写入", "到", "文件", "requirements", ".", "txt", "中", "。", "请", "打开", "文件", "requirements", ".", "txt", "，", "查看", "项目", "中", "安装", "的", "包", "及其", "版本", "（", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "\n", "看到", "的", "内容", "可能", "不全", "）", "：", "\n", "requirements", ".", "txt", "\n", "Django", "=", "=", "1.8", ".", "4", "\n", "dj", "-", "database", "-", "url", "=", "=", "0.3", ".", "0", "\n", "dj", "-", "static", "=", "=", "0.0", ".", "6", "\n", "django", "-", "bootstrap3", "=", "=", "6.2", ".", "2", "\n", "gunicorn", "=", "=", "19.3", ".", "0", "\n", "static3", "=", "=", "0.6", ".", "1", "\n", "“", "学习", "笔记", "”", "依赖于", "6", "个", "特定", "版本", "的", "包", "，", "因此", "需要", "在", "相应", "的", "环境", "中", "才能", "正确", "地", "运行", "。", "我们", "部署", "“", "学习", "笔记", "”", "时", "，", "Heroku", "将", "安装", "requirements", ".", "txt", "列出", "的", "所有", "包", "，", "从而", "创建", "一个", "环境", "，", "其中", "包"], ["含", "我们", "在", "本地", "使用", "的", "所有", "包", "。", "有鉴于此", "，", "我们", "可以", "信心", "满满", "，", "深信", "项目", "部署", "到", "Heroku", "后", "，", "行为", "将", "与", "它", "在", "本地", "系统", "上", "的", "完全相同", "。", "当", "你", "在", "自己", "的", "系统", "上", "开发", "并", "维护", "各种", "项目", "时", "，", "这", "\n", "将", "是", "一个", "巨大", "的", "优点", "。", "\n", "接下来", "，", "我们", "需要", "在", "包", "列表", "中", "添加", "psycopg2", " ", "，", "它", "帮助", "Heroku", "管理", "活动", "数据库", "。", "为此", "，", "打开", "文件", "requirements", ".", "txt", "，", "并", "添加", "代码", "行", "psycopg2", ">", "=", "2.6", ".", "1", " ", "。", "这", "将", "安装", "2.6", ".", "1", "版", "的", "psycopg2", "\n", "—", "—", "如果", "有", "更", "高", "的", "版本", "，", "则", "安装", "更", "高", "的", "版本", "：", "\n", "requirements", ".", "txt", "\n", "Django", "=", "=", "1.8", ".", "4", "\n", "dj", "-", "database", "-", "url", "=", "=", "0.3", ".", "0", "\n", "dj", "-", "static", "=", "=", "0.0", ".", "6", "\n", "django", "-", "bootstrap3", "=", "=", "6.2", ".", "2", "\n", "gunicorn", "=", "=", "19.3", ".", "0", "\n", "static3", "=", "=", "0.6", ".", "1", "\n", "psycopg2", ">", "=", "2.6", ".", "1", "\n", "如果", "有", "必不可少", "的", "包", "在", "你", "的", "系统", "中", "没有", "安装", "，", "请", "将", "其", "添加", "到", "文件", "requirements", ".", "txt", "中", "。", "最终", "的", "文件", "requirements", ".", "txt", "应", "包含", "上面", "列出", "的", "每个", "包", "。", "如果", "在", "你", "的", "系统", "中", "，", "requirements", ".", "txt", "列出", "的", "\n", "包", "的", "版本", "与", "上面", "列出", "的", "不同", "，", "请", "保留", "原来", "的", "版本号", "。", "\n", "注意"], ["包", "的", "版本", "与", "上面", "列出", "的", "不同", "，", "请", "保留", "原来", "的", "版本号", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "请", "确保", "文件", "requirements", ".", "txt", "的", "内容", "与", "前面", "列出", "的", "一致", "，", "而", "不要", "管", "你", "在", "系统", "中", "能够", "安装", "哪些", "包", "。", "\n", "20.2", ".", "5", "　", "指定", "\n", "　", "指定", "Python", "版本", "\n", "版本", "\n", "如果", "你", "没有", "指定", "Python", "版本", "，", "Heroku", "将", "使用", "其", "当前", "的", "Python", "默认", "版本", "。", "下面", "来", "确保", "Heroku", "使用", "我们", "使用", "的", "Python", "版本", "。", "为此", "，", "在", "活动", "的", "虚拟环境", "中", "，", "执行命令", "python", " ", "--", "version", "\n", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "python", " ", "--", "version", "\n", "Python", " ", "3.5", ".", "0", "\n", "上面", "的", "输出", "表明", "，", "我", "使用", "的", "是", "Python", " ", "3.5", ".", "0", "。", "请", "在", "manage", ".", "py", "所在", "的", "文件夹", "中", "新建", "一个", "名为", "runtime", ".", "txt", "的", "文件", "，", "并", "在", "其中", "输入", "如下", "内容", "：", "\n", "runtime", ".", "txt", "\n", "python", "-", "3.5", ".", "0", "\n", "这个", "文件", "应", "只", "包含", "一行", "内容", "，", "以", "上面", "所示", "的", "格式", "指定", "了", "你", "使用", "的", "Python", "版本", "；", "请", "确保", "输入", "小写", "的", "python", " ", "，", "在", "它", "后面", "输入", "一个", "连", "字符", "，", "再", "输入", "由", "三", "部分", "组成", "的", "版本号", "。"], ["注意", "\n", "注意", " ", "　", "如果", "出现", "错误", "消息", "，", "指出", "不能", "使用", "你", "指定", "的", "Python", "版本", "，", "请", "访问", "https", ":", "/", "/", "devcenter", ".", "heroku", ".", "com", "/", " ", "并", "单击", "Python", "，", "再", "单击", "链接", "Specifying", " ", "a", " ", "Python", " ", "Runtime", "。", "浏览", "打开", "的", "文", "\n", "章", "，", "了解", "支持", "的", "Python", "版本", "，", "并", "使用", "与", "你", "使用", "的", "Python", "版本", "最", "接近", "的", "版本", "。", "\n", "20.2", ".", "6", "　", "为", "部署", "到", "\n", "　", "为", "部署", "到", "Herohu", "而", "修改", "\n", "而", "修改", "settings", ".", "py", "\n", "现在", "需要", "在", "settings", ".", "py", "末尾", "添加", "一个", "片段", "，", "在", "其中", "指定", "一些", "Heroku", "环境", "设置", "：", "\n", "settings", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "django", "-", "bootstrap3", "设置", "\n", " ", " ", "BOOTSTRAP3", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", "'", "include", "_", "jquery", "'", ":", " ", "True", ",", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", "#", " ", "Heroku", "设置", "\n", "❶", " ", "if", " ", "os", ".", "getcwd", "(", ")", " ", "=", "=", " ", "'", "/", "app", "'", ":", "\n", "❷", " ", " ", " ", " ", " ", "import", " ", "dj", "_", "database", "_", "url", "\n", " ", " ", " ", " ", " ", " ", "DATABASES", " ", "=", " ", "{"], ["❷", " ", " ", " ", " ", " ", "import", " ", "dj", "_", "database", "_", "url", "\n", " ", " ", " ", " ", " ", " ", "DATABASES", " ", "=", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "'", "default", "'", ":", " ", "dj", "_", "database", "_", "url", ".", "config", "(", "default", "=", "'", "postgres", ":", "/", "/", "localhost", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "}", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "让", "request", ".", "is", "_", "secure", "(", ")", "承认", "X", "-", "Forwarded", "-", "Proto", "头", "\n", "❸", " ", " ", " ", " ", " ", "SECURE", "_", "PROXY", "_", "SSL", "_", "HEADER", " ", "=", " ", "(", "'", "HTTP", "_", "X", "_", "FORWARDED", "_", "PROTO", "'", ",", " ", "'", "https", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "支持", "所有", "的", "主机", "头", "（", "host", " ", "header", "）", "\n", "❹", " ", " ", " ", " ", " ", "ALLOWED", "_", "HOSTS", " ", "=", " ", "[", "'", "*", "'", "]", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "静态", "资产", "配置", "\n", "❺", " ", " ", " ", " ", " ", "BASE", "_", "DIR", " ", "=", " ", "os", ".", "path", ".", "dirname", "(", "os", ".", "path", ".", "abspath", "(", "__", "file", "__", ")", ")", "\n", " ", " ", " ", " ", " ", " ", "STATIC", "_", "ROOT", " ", "=", " ", "'", "staticfiles", "'", "\n", " ", " ", " ", " ", " ", " ", "STATICFILES", "_", "DIRS", " ", "=", " ", "(", "\n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "os", ".", "path", ".", "join", "(", "BASE", "_", "DIR", ",", " ", "'", "static", "'", ")", ",", "\n", " ", " ", " ", " ", " ", " ", ")"], [")", "\n", "在", "❶", "处", "，", "我们", "使用", "了", "函数", "getcwd", "(", ")", " ", "，", "它", "获取", "当前", "的", "工作", "目录", "\n", "当前", "的", "工作", "目录", " ", "（", "当前", "运行", "的", "文件", "所在", "的", "目录", "）", "。", "在", "Heroku", "部署", "中", "，", "这个", "目录", "总是", "/", "app", "。", "在", "本地", "部署", "中", "，", "这个", "目录", "通常", "是", "项目", "文件", "\n", "夹", "的", "名称", "（", "就", "我们", "的", "项目", "而言", "，", "为", "learning", "_", "log", "）", "。", "这个", "if", " ", "测试", "确保", "仅当", "项目", "被", "部署", "到", "Heroku", "时", "，", "才", "运行", "这个", "代码", "块", "。", "这种", "结构", "让", "我们", "能够", "将", "同一个", "设置", "文件", "用于", "本地", "开发", "环境", "和", "\n", "在线", "服务器", "。", "\n", "在", "❷", "处", "，", "我们", "导入", "了", "dj", "_", "database", "_", "url", " ", "，", "用于", "在", "Heroku", "上", "配置", "服务器", "。", "Heroku", "使用", "PostgreSQL", "（", "也", "叫", "Postgres", "）", "—", "—", "一种", "比", "SQLite", "更", "高级", "的", "数据库", "；", "这些", "设置", "对", "项目", "进行", "配置", "，", "\n", "使", "其", "在", "Heroku", "上", "使用", "Postgres", "数据库", "。", "其他", "设置", "的", "作用", "分别", "如下", "：", "支持", "HTTPS", "请求", "（", "见", "❸", "）", "；", "让", "Django", "能够", "使用", "Heroku", "的", "URL", "来", "提供", "项目", "提供", "的", "服务", "（", "见", "❹", "）", "；", "设置", "项目", "，", "使", "其", "能够", "\n", "在", "Heroku", "上", "正确", "地", "提供", "静态", "文件", "（", "见", "❺", "）", "。", "\n", "20.2", ".", "7", "　", "创建", "启动", "进程", "的", "\n", "　", "创建", "启动", "进程", "的", "Procfile"], ["20.2", ".", "7", "　", "创建", "启动", "进程", "的", "\n", "　", "创建", "启动", "进程", "的", "Procfile", "\n", "Procfile", "告诉", "Heroku", "启动", "哪些", "进程", "，", "以便", "能够", "正确", "地", "提供", "项目", "提供", "的", "服务", "。", "这个", "文件", "只", "包含", "一行", "，", "你", "应", "将", "其", "命名", "为", "Procfile", "（", "其中", "的", "P", "为", "大写", "）", "，", "不", "指定", "文件", "扩展名", "，", "并", "保存", "到", "\n", "manage", ".", "py", "所在", "的", "目录", "中", "。", "\n", "Procfile", "的", "内容", "如下", "：", "\n", "Procfile", "\n", "web", ":", " ", "gunicorn", " ", "learning", "_", "log", ".", "wsgi", " ", "--", "log", "-", "file", " ", "-", "\n", "这", "行", "代码", "让", "Heroku", "将", "gunicorn", "用作", "服务器", "，", "并", "使用", "learning", "_", "log", "/", "wsgi", ".", "py", "中", "的", "设置", "来", "启动", "应用程序", "。", "标志", "log", "-", "file", " ", "告诉", "Heroku", "应", "将", "哪些", "类型", "的", "事件", "写入", "日志", "。", "\n", "20.2", ".", "8", "　", "为", "部署", "到", "\n", "　", "为", "部署", "到", "Herohu", "而", "修改", "\n", "而", "修改", "wsgi", ".", "py", "\n", "为", "部署", "到", "Heroku", "，", "我们", "还", "需", "修改", "wsgi", ".", "py", "，", "因为", "Heroku", "需要", "的", "设置", "与", "我们", "一直", "在", "使用", "的", "设置", "稍", "有", "不同", "：", "\n", "wsgi", ".", "py", "\n", "--", "snip", "--", "\n", "import", " ", "os", "\n", "from", " ", "django", ".", "core", ".", "wsgi", " ", "import", " ", "get", "_", "wsgi", "_", "application", "\n", "from", " ", "dj", "_", "static", " ", "import", " ", "Cling"], ["from", " ", "dj", "_", "static", " ", "import", " ", "Cling", "\n", "os", ".", "environ", ".", "setdefault", "(", "\"", "DJANGO", "_", "SETTINGS", "_", "MODULE", "\"", ",", " ", "\"", "learning", "_", "log", ".", "settings", "\"", ")", "\n", "application", " ", "=", " ", "Cling", "(", "get", "_", "wsgi", "_", "application", "(", ")", ")", "\n", "我们", "导入", "了", "帮助", "正确", "地", "提供", "静态", "文件", "的", "Cling", "，", "并", "使用", "它", "来", "启动", "应用程序", "。", "这些", "代码", "在", "本地", "也", "适用", "，", "因此", "无需", "将", "其", "放在", "if", " ", "代码", "块", "内", "。", "\n", "20.2", ".", "9", "　", "创建", "用于", "存储", "静态", "文件", "的", "目录", "\n", "　", "创建", "用于", "存储", "静态", "文件", "的", "目录", "\n", "在", "Heroku", "上", "，", "Django", "搜集", "所有", "的", "静态", "文件", "，", "并", "将", "它们", "放在", "一个", "地方", "，", "以便", "能够", "高效", "地", "管理", "它们", "。", "我们", "将", "创建", "一个", "用于", "存储", "这些", "静态", "文件", "的", "目录", "。", "在", "文件夹", "learning", "_", "log", "中", "，", "有", "一个名", "\n", "称", "也", "为", "learning", "_", "log", "的", "子", "文件夹", "。", "在", "这个", "子", "文件夹", "中", "，", "新建", "一个", "名为", "static", "的", "文件夹", "，", "因此", "这个", "文件夹", "的", "路径", "为", "learning", "_", "log", "/", "learning", "_", "log", "/", "static", "/", "。", "我们", "还", "需", "在", "这个", "文件夹", "中", "创建", "一个", "占位", "文"], ["件", "，", "因为", "项目", "被", "推送", "到", "Heroku", "时", "，", "它", "将", "不会", "包含", "原来", "为空", "的", "文件夹", "。", "在", "目录", "static", "/", "中", "，", "创建", "一个", "名为", "placeholder", ".", "txt", "的", "文件", "：", "\n", "placeholder", ".", "txt", "\n", "This", " ", "file", " ", "ensures", " ", "that", " ", "learning", "_", "log", "/", "static", "/", " ", "will", " ", "be", " ", "added", " ", "to", " ", "the", " ", "project", ".", "\n", "Django", " ", "will", " ", "collect", " ", "static", " ", "files", " ", "and", " ", "place", " ", "them", " ", "in", " ", "learning", "_", "log", "/", "static", "/", ".", "\n", "上述", "内容", "没有", "什么", "特别之处", "，", "只是", "指出", "了", "在", "项目", "中", "添加", "这个", "文件", "的", "原因", "。", "\n", "20.2", ".", "10", "　", "在", "本地", "使用", "\n", "　", "在", "本地", "使用", "gunicorn", "服务器", "\n", "服务器", "\n", "如果", "你", "使用", "的", "是", "Linux", "或", "OS", " ", "X", "，", "可", "在", "部署", "到", "Heroku", "前", "尝试", "在", "本地", "使用", "gunicorn", "服务器", "。", "为此", "，", "在", "活动", "的", "虚拟环境", "中", "，", "执行命令", "heroku", " ", "local", " ", "以", "启动", "Procfile", "指定", "的", "进程", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "local"], ["Installing", " ", "Heroku", " ", "Toolbelt", " ", "v4", "...", " ", "done", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "forego", " ", "|", " ", "starting", " ", "web.1", " ", "on", " ", "port", " ", "5000", "\n", "❶", " ", "web.1", " ", " ", "|", " ", "[", "2015", "-", "08", "-", "13", " ", "22", ":", "00", ":", "45", " ", "-", "0800", "]", " ", "[", "12875", "]", " ", "[", "INFO", "]", " ", "Starting", " ", "gunicorn", " ", "19.3", ".", "0", "\n", "❷", " ", "web.1", " ", " ", "|", " ", "[", "2015", "-", "08", "-", "13", " ", "22", ":", "00", ":", "45", " ", "-", "0800", "]", " ", "[", "12875", "]", " ", "[", "INFO", "]", " ", "Listening", " ", "at", ":", "\n", " ", " ", " ", " ", " ", " ", "http", ":", "/", "/", "0.0", ".", "0.0", ":", "5000", " ", "(", "12875", ")", "\n", "❸", " ", "web.1", " ", " ", "|", " ", "[", "2015", "-", "08", "-", "13", " ", "22", ":", "00", ":", "45", " ", "-", "0800", "]", " ", "[", "12878", "]", " ", "[", "INFO", "]", " ", "Booting", " ", "worker", " ", "with", " ", "pid", ":", " ", "12878", "\n", "首次", "执行命令", "heroku", " ", "local", " ", "时", "，", "将", "安装", "Heroku", " ", "Toolbelt", "中", "的", "很多", "包", "。", "这里", "的", "输出", "表明", "启动", "了", "gunicorn", "，", "其", "进程", "id", "为", "12875", "（", "见", "❶", "）", "。", "❷", "处", "的", "输出", "表明", "，", "gunicorn", "在", "端口", "5000", "上", "侦听", "请", "\n", "求", "。", "另外", "，", "gunicorn", "还", "启动", "了", "一个", "工作", "进程", "（", "12878", "）", "，", "用于", "帮助", "处理", "请求", "（", "见", "❸", "）", "。"], ["求", "。", "另外", "，", "gunicorn", "还", "启动", "了", "一个", "工作", "进程", "（", "12878", "）", "，", "用于", "帮助", "处理", "请求", "（", "见", "❸", "）", "。", "\n", "为", "确认", "一切", "运行", "正常", "，", "请", "访问", "http", ":", "/", "/", "localhost", ":", "5000", "/", "，", "你", "将", "看到", "“", "学习", "笔记", "”", "的", "主页", "，", "就", "像", "使用", "Django", "服务器", "（", "runserver", "）", "时", "一样", "。", "为", "停止", "heroku", " ", "local", " ", "启动", "的", "进程", "，", "请", "按", "Ctrl", " ", "+", " ", "C", "，", "\n", "你", "将", "在", "本地", "开发", "中", "继续", "使用", "runserver", " ", "。", "\n", "注意", "\n", "注意", " ", "　", "gunicorn", "不能", "在", "Windows", "系统", "上", "运行", "，", "因此", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "请", "跳", "过", "这", "一步", "。", "但", "这", "不会", "影响", "你", "将", "项目", "部署", "到", "Heroku", "。", "\n", "20.2", ".", "11", "　", "使用", "\n", "　", "使用", "Git", "跟踪", "项目", "文件", "\n", "跟踪", "项目", "文件", "\n", "如果", "你", "阅读", "完", "了", "第", "17", "章", "，", "就", "知道", "Git", "是", "一个", "版本", "控制程序", "，", "让", "你", "能够", "在", "每次", "成功", "实现", "新", "功能", "后", "都", "拍摄", "项目", "代码", "的", "快照", "。", "无论", "出现", "什么", "问题", "（", "如", "实现", "新", "功能", "时", "不", "小心", "引入", "了", "bug", "）", "，", "你", "\n", "都", "可以", "轻松", "地", "恢复", "到", "最后", "一个", "可行", "的", "快照", "。", "每个", "快照", "都", "被", "称为", "提交", "\n", "提交", " ", "。", "\n", "使用", "Git", "意味着", "你", "在", "试着", "实现", "新", "功能", "时", "无需", "担心", "破坏", "项目", "。", "将", "项目", "部署", "到", "服务器时", "，", "需要", "确保", "部署", "的", "是", "可行", "版本", "。", "如果", "你", "想", "更", "详细", "地", "了解", "Git", "和", "版本控制", "，", "请参阅", "附录", "D", "。", "\n", "1", ".", " ", "安装", "\n", "安装", "Git"], ["1", ".", " ", "安装", "\n", "安装", "Git", "\n", "Heroku", " ", "Toolbelt", "包含", "Git", "，", "因此", "它", "应该", "已经", "安装", "到", "了", "你", "的", "系统", "中", "。", "然而", "，", "在", "安装", "Heroku", " ", "Toolbelt", "之前", "打开", "的", "终端", "窗口", "中", "无法访问", "Git", "，", "因此", "请", "打开", "一个", "新", "的", "终端", "窗口", "，", "并", "在", "其中", "执行", "命", "\n", "令", "git", " ", "--", "version", " ", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "--", "version", "\n", "git", " ", "version", " ", "2.5", ".", "0", "\n", "如果", "由于", "某种原因", "出现", "了", "错误", "消息", "，", "请参阅", "附录", "D", "中", "的", "Git", "安装", "说明", "。", "\n", "2", ".", " ", "配置", "\n", "配置", "Git", "\n", "Git", "跟踪", "谁", "修改", "了", "项目", "，", "即便", "项目", "由", "一个", "人", "开发", "时", "亦", "如此", "。", "为", "进行", "跟踪", "，", "Git", "需要", "知道", "你", "的", "用户名", "和", "email", "。", "因此", "，", "你", "必须", "提供", "用户名", "，", "但", "对于", "练习", "项目", "，", "可", "随便", "伪造", "一个", "email", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "config", " ", "--", "global", " ", "user", ".", "name", " ", "\"", "ehmatthes", "\"", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "config", " ", "--", "global", " ", "user", ".", "email", " ", "\"", "eric", "@", "example", ".", "com", "\"", "\n", "如果", "你", "忘记", "了", "这", "一步", "，", "当", "你", "首次", "提交", "时", "，", "Git", "将", "提示", "你", "提供", "这些", "信息", "。", "\n", "3", ".", " ", "忽略", "文件", "\n", "忽略", "文件"], ["如果", "你", "忘记", "了", "这", "一步", "，", "当", "你", "首次", "提交", "时", "，", "Git", "将", "提示", "你", "提供", "这些", "信息", "。", "\n", "3", ".", " ", "忽略", "文件", "\n", "忽略", "文件", "\n", "我们", "无需", "让", "Git", "跟踪", "项目", "中", "的", "每个", "文件", "，", "因此", "将", "让", "Git", "忽略", "一些", "文件", "。", "为此", "，", "在", "manage", ".", "py", "所在", "的", "文件夹", "中", "创建", "一个", "名为", ".", "gitignore", "的", "文件", "。", "注意", "，", "这个", "文件名", "以", "句点", "打头", "，", "且", "不", "包含", "扩", "\n", "展名", "。", "在", "这个", "文件", "中", "输入", "如下", "内容", "：", "\n", ".", "gitignore", "\n", "ll", "_", "env", "/", "\n", "__", "pycache", "__", "/", "\n", "*", ".", "sqlite3", "\n", "我们", "让", "Git", "忽略", "目录", "llenv", "，", "因为", "我们", "随时", "都", "可以", "自动", "重新", "创建", "它", "。", "我们", "还", "指定", "不", "跟踪", "目录", " ", "\\", " ", "_", "pycache", "__", "，", "这个", "目录", "包含", "Django", "运行", ".", "py", "文件", "时", "自动", "创建", "的", ".", "pyc", "文件", "。", "我们", "没有", "跟踪", "对本", "\n", "地", "数据库", "的", "修改", "，", "因为", "这是", "一个", "糟糕", "的", "做法", "：", "如果", "你", "在", "服务器", "上", "使用", "的", "是", "SQLite", "，", "当", "你", "将", "项目", "推送", "到", "服务器时", "，", "可能", "会", "不", "小心", "用", "本地", "测试", "数据库", "覆盖", "在线", "数据库", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "请", "将", "_", "pycache", "_", " ", "替换", "为", "*", ".", "pyc", " ", "，", "因为", "Python", " ", "2.7", "不会", "创建", "目录", "__", "pycache", "__", "。", "\n", "4", ".", " ", "提交", "项目", "\n", "提交", "项目"], ["4", ".", " ", "提交", "项目", "\n", "提交", "项目", "\n", "我们", "需要", "为", "“", "学习", "笔记", "”", "初始化", "一个", "Git", "仓库", "，", "将", "所有", "必要", "的", "文件", "都", "加入", "到", "这个", "仓库", "中", "，", "并", "提交", "项目", "的", "初始状态", "，", "如下", "所示", "：", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "init", "\n", " ", " ", "Initialized", " ", "empty", " ", "Git", " ", "repository", " ", "in", " ", "/", "home", "/", "ehmatthes", "/", "pcc", "/", "learning", "_", "log", "/", ".", "git", "/", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "add", " ", ".", "\n", "❸", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "commit", " ", "-", "am", " ", "\"", "Ready", " ", "for", " ", "deployment", " ", "to", " ", "heroku", ".", "\"", "\n", " ", " ", "[", "master", " ", "(", "root", "-", "commit", ")", " ", "dbc1d99", "]", " ", "Ready", " ", "for", " ", "deployment", " ", "to", " ", "heroku", ".", "\n", " ", " ", " ", "43", " ", "files", " ", "changed", ",", " ", "746", " ", "insertions", "(", "+", ")", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", ".", "gitignore", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "Procfile", "\n", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "users", "/", "views", ".", "py"], ["--", "snip", "--", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "users", "/", "views", ".", "py", "\n", "❹", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "在", "❶", "处", "，", "我们", "执行命令", "git", " ", "init", " ", "，", "在", "“", "学习", "笔记", "”", "所在", "的", "目录", "中", "初始化", "一个", "空", "仓库", "。", "在", "❷", "处", "，", "我们", "执行", "了", "命令", "git", " ", "add", " ", ".", " ", "（", "千万", "别忘了", "这个", "句点", "）", "，", "它", "将", "未", "被", "忽略", "的", "文件", "都", "添", "\n", "加", "到", "这个", "仓库", "中", "。", "在", "❸", "处", "，", "我们", "执行", "了", "命令", "git", " ", "commit", " ", "-", "am", " ", "commit", " ", "message", " ", "，", "其中", "的", "标志", "-", "a", " ", "让", "Git", "在", "这个", "提交", "中", "包含", "所有", "修改", "过", "的", "文件", "，", "而", "标志", "-", "m", " ", "让", "Git", "记录", "一条", "日志", "\n", "消息", "。", "\n", "在", "❹", "处", "，", "我们", "执行", "了", "命令", "git", " ", "status", " ", "，", "输出", "表明", "当前", "位于", "分支", "master", "中", "，", "而", "工作", "目录", "是", "干净", "\n", "干净", " ", "（", "clean", "）", "的", "。", "每当", "你", "要", "将", "项目", "推送", "到", "Heroku", "时", "，", "都", "希望", "看到", "这样", "的", "状态", "。", "\n", "20.2", ".", "12", "　", "推送", "到", "\n", "　", "推送", "到", "Heroku"], ["20.2", ".", "12", "　", "推送", "到", "\n", "　", "推送", "到", "Heroku", "\n", "我们", "终于", "为", "将", "项目", "推送", "到", "Heroku", "做好", "了", "准备", "。", "在", "活动", "的", "虚拟环境", "中", "，", "执行", "下面", "的", "命令", "："], ["❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "login", "\n", " ", " ", "Enter", " ", "your", " ", "Heroku", " ", "credentials", ".", "\n", " ", " ", "Email", ":", " ", "eric", "@", "example", ".", "com", "\n", " ", " ", "Password", " ", "(", "typing", " ", "will", " ", "be", " ", "hidden", ")", ":", "\n", " ", " ", "Logged", " ", "in", " ", "as", " ", "eric", "@", "example", ".", "com", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "create", "\n", " ", " ", "Creating", " ", "afternoon", "-", "meadow", "-", "2775", "...", " ", "done", ",", " ", "stack", " ", "is", " ", "cedar", "-", "14", "\n", " ", " ", "https", ":", "/", "/", "afternoon", "-", "meadow", "-", "2775", ".", "herokuapp", ".", "com", "/", " ", "|", "\n", " ", " ", " ", " ", " ", " ", "https", ":", "/", "/", "git", ".", "heroku", ".", "com", "/", "afternoon", "-", "meadow", "-", "2775", ".", "git", "\n", " ", " ", "Git", " ", "remote", " ", "heroku", " ", "added", "\n", "❸", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "push", " ", "heroku", " ", "master", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "remote", ":", " ", "-----", ">", " ", "Launching", "...", " ", "done", ",", " ", "v6"], ["--", "snip", "--", "\n", " ", " ", "remote", ":", " ", "-----", ">", " ", "Launching", "...", " ", "done", ",", " ", "v6", "\n", "❹", " ", "remote", ":", " ", " ", " ", " ", " ", " ", " ", " ", "https", ":", "/", "/", "afternoon", "-", "meadow", "-", "2775", ".", "herokuapp", ".", "com", "/", " ", "deployed", " ", "to", " ", "Heroku", "\n", " ", " ", "remote", ":", " ", "Verifying", " ", "deploy", "....", " ", "done", ".", "\n", " ", " ", "To", " ", "https", ":", "/", "/", "git", ".", "heroku", ".", "com", "/", "afternoon", "-", "meadow", "-", "2775", ".", "git", "\n", " ", " ", " ", " ", " ", "bdb2a35", "..", "62d711d", " ", " ", "master", " ", "-", ">", " ", "master", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "首先", "，", "在", "终端", "会话", "中", "，", "使用", "你", "在", "https", ":", "/", "/", "heroku", ".", "com", "/", " ", "创建", "账户", "时", "指定", "的", "用户名", "和", "密码", "来", "登录", "Heroku", "（", "见", "❶", "）", "。", "然后", "，", "让", "Heroku", "创建", "一个", "空", "项目", "（", "见", "❷", "）", "。", "Heroku", "生成", "的", "项目", "名由", "两个", "\n", "单词", "和", "一个", "数字", "组成", "，", "你", "以后", "可", "修改", "这个", "名称", "。", "接下来", "，", "我们", "执行命令", "git", " ", "push", " ", "heroku", " ", "master", " ", "（", "见", "❸", "）", "，", "它", "让", "Git", "将", "项目", "的", "分支", "master", "推送", "到", "Heroku", "刚才", "创建", "的", "仓库", "中", "；"], ["Heroku", "随后", "使用", "这些", "文件", "在", "其", "服务器", "上", "创建", "项目", "。", "❹", "处", "列出", "了", "用于", "访问", "这个", "项目", "的", "URL", "。", "\n", "执行", "这些", "命令", "后", "，", "项目", "就", "部署", "好", "了", "，", "但", "还", "未", "对", "其", "做", "全面", "的", "配置", "。", "为", "核实", "正确", "地", "启动", "了", "服务器", "进程", "，", "请", "执行命令", "heroku", " ", "ps", " ", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "ps", "\n", "❶", " ", "Free", " ", "quota", " ", "left", ":", " ", "17h", " ", "40m", "\n", "❷", " ", "=", "=", "=", " ", "web", " ", "(", "Free", ")", ":", " ", "`", "gunicorn", " ", "learning", "_", "log", ".", "wsgi", " ", "__", "log", "-", "file", " ", "-", "`", "\n", " ", " ", "web.1", ":", " ", "up", " ", "2015", "/", "08", "/", "14", " ", "07", ":", "08", ":", "51", " ", "(", "~", " ", "10m", " ", "ago", ")", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "输出", "指出", "了", "在", "接下来", "的", "24", "小时", "内", "，", "项目", "还", "可", "在", "多长时间", "内", "处于", "活动状态", "（", "见", "❶", "）", "。", "编写", "本书", "时", "，", "Heroku", "允许", "免费", "部署", "在", "24", "小时", "内", "最", "多", "可以", "有", "18", "小时", "处于", "活动状态", "。", "项目", "的", "活动", "时", "\n", "间", "超过", "这个", "限制", "后", "，", "将", "显示", "标准", "的", "服务器", "错误", "页面", "，", "稍后", "我们", "将", "设置", "这个", "错误", "页面", "。", "在", "❷", "处", "，", "我们", "发现", "启动", "了", "Procfile", "指定", "的", "进程", "。", "\n", "现在", "，", "我们", "可以", "使用", "命令", "heroku", " ", "open", " ", "在", "浏览器", "中", "打开", "这个", "应用程序", "了", "："], ["现在", "，", "我们", "可以", "使用", "命令", "heroku", " ", "open", " ", "在", "浏览器", "中", "打开", "这个", "应用程序", "了", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "open", "\n", "Opening", " ", "afternoon", "-", "meadow", "-", "2775", "...", " ", "done", "\n", "你", "也", "可以", "启动", "浏览器", "并", "输入", "Heroku", "告诉", "你", "的", "URL", "，", "但", "上述", "命令", "可", "实现", "同样", "的", "结果", "。", "你", "将", "看到", "“", "学习", "笔记", "”", "的", "主页", "，", "其", "样式", "设置", "正确", "无误", "，", "但", "你", "还", "无法", "使用", "这个", "应用程序", "，", "因为", "我们", "还", "\n", "没有", "建立", "数据库", "。", "\n", "注意", "\n", "注意", " ", "　", "部署", "到", "Heroku", "的", "流程", "会", "不断", "变化", "。", "如果", "你", "遇到", "无法", "解决", "的", "问题", "，", "请", "通过", "查看", "Heroku", "文档", "来", "获取", "帮助", "。", "为此", "，", "可", "访问", "https", ":", "/", "/", "devcenter", ".", "heroku", ".", "com", "/", " ", "，", "单击", "Python", "，", "再", "\n", "单击", "链接", "Getting", " ", "Started", " ", "with", " ", "Django", "。", "如果", "你", "看不懂", "这些", "文档", "，", "请参阅", "附录", "C", "提供", "的", "建议", "。", "\n", "20.2", ".", "13", "　", "在", "\n", "　", "在", "Heroku", "上", "建立", "数据库", "\n", "上", "建立", "数据库", "\n", "为", "建立", "在线", "数据库", "，", "我们", "需要", "再次", "执行命令", "migrate", " ", "，", "并", "应用", "在", "开发", "期间", "生成", "的", "所有", "迁移", "。", "要", "对", "Heroku", "项目", "执行", "Django", "和", "Python", "命令", "，", "可", "使用", "命令", "heroku", " ", "run", " ", "。", "下面", "演示", "了", "如"], ["何对", "Heroku", "部署", "执行命令", "migrate", " ", "：", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "run", " ", "python", " ", "manage", ".", "py", " ", "migrate", "\n", "❷", " ", "Running", " ", "`", "python", " ", "manage", ".", "py", " ", "migrate", "`", " ", "on", " ", "afternoon", "-", "meadow", "-", "2775", "...", " ", "up", ",", " ", "run.2435", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "❸", " ", "Running", " ", "migrations", ":", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0001", "_", "initial", "...", " ", "OK", "\n", " ", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0002", "_", "entry", "...", " ", "OK", "\n", " ", " ", " ", " ", "Applying", " ", "learning", "_", "logs.0003", "_", "topic", "_", "user", "...", " ", "OK", "\n", " ", " ", " ", " ", "Applying", " ", "sessions.0001", "_", "initial", "...", " ", "OK", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$"], ["(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "我们", "首先", "执行", "了", "命令", "heroku", " ", "run", " ", "python", " ", "manage", ".", "py", " ", "migrate", " ", "（", "见", "❶", "）", "；", "Heroku", "随后", "创建", "一个", "终端", "会话", "来", "执行命令", "migrate", " ", "（", "见", "❷", "）", "。", "在", "❸", "处", "，", "Django", "应用", "默认", "迁移", "以", "\n", "及", "我们", "在", "开发", "“", "学习", "笔记", "”", "期间", "生成", "的", "迁移", "。", "\n", "现在", "如果", "你", "访问", "这个", "部署", "的", "应用程序", "，", "将", "能够", "像", "在", "本地", "系统", "上", "一样", "使用", "它", "。", "然而", "，", "你", "看不到", "你", "在", "本地", "部署", "中", "输入", "的", "任何", "数据", "，", "因为", "它们", "没有", "复制到", "在线", "服务器", "。", "一种", "通常", "的", "做法", "\n", "是", "不", "将", "本地", "数据", "复制到", "在线", "部署", "中", "，", "因为", "本地", "数据", "通常", "是", "测试数据", "。", "\n", "你", "可以", "分享", "“", "学习", "笔记", "”", "的", "Heroku", " ", "URL", "，", "让", "任何人", "都", "可以", "使用", "它", "。", "在", "下", "一节", "，", "我们", "将", "再", "完成", "几个", "任务", "，", "以", "结束", "部署", "过程", "并", "让", "你", "能够", "继续", "开发", "“", "学习", "笔记", "”", "。", "\n", "20.2", ".", "14", "　", "改进", "\n", "　", "改进", "Heroku", "部署", "\n", "部署", "\n", "在", "本节", "中", "，", "我们", "将", "通过", "创建", "超级", "用户", "来", "改进", "部署", "，", "就", "像", "在", "本地", "一样", "。", "我们", "还", "将", "让", "这个", "项目", "更", "安全", "：", "将", "DEBUG", " ", "设置", "为", "False", " ", "，", "让", "用户", "在", "错误", "消息", "中", "看不到", "额外", "的", "信息", "，", "以防", "他们", "\n", "使用", "这些", "信息", "来", "攻击", "服务器", "。", "\n", "1", ".", " ", "在", "\n", "在", "Heroku", "上", "创建", "超级", "用户", "\n", "上", "创建", "超级", "用户"], ["使用", "这些", "信息", "来", "攻击", "服务器", "。", "\n", "1", ".", " ", "在", "\n", "在", "Heroku", "上", "创建", "超级", "用户", "\n", "上", "创建", "超级", "用户", "\n", "我们", "知道", "可", "使用", "命令", "heroku", " ", "run", " ", "来", "执行", "一次性", "命令", "，", "但", "也", "可", "这样", "执行命令", "：", "在", "连接", "到", "了", "Heroku", "服务器", "的", "情况", "下", "，", "使用", "命令", "heroku", " ", "run", " ", "bash", " ", "来", "打开", "Bash", "终端", "会话", "。", "Bash", "是", "\n", "众多", "Linux", "终端", "运行", "的", "语言", "。", "我们", "将", "使用", "Bash", "终端", "会话", "来", "创建", "超级", "用户", "，", "以便", "能够", "访问", "在线", "应用程序", "的", "管理", "网站", "：", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "run", " ", "bash", "\n", " ", " ", "Running", " ", "`", "bash", "`", " ", "on", " ", "afternoon", "-", "meadow", "-", "2775", "...", " ", "up", ",", " ", "run.6244", "\n", "❶", " ", "~", " ", "$", " ", "ls", "\n", " ", " ", "learning", "_", "log", " ", "learning", "_", "logs", " ", "manage", ".", "py", " ", "Procfile", " ", "requirements", ".", "txt", " ", "runtime", ".", "txt", " ", "users", "\n", " ", " ", "staticfiles", "\n", "❷", " ", "~", " ", "$", " ", "python", " ", "manage", ".", "py", " ", "createsuperuser", "\n", " ", " ", "Username", " ", "(", "leave", " ", "blank", " ", "to", " ", "use", " ", "'", "u41907", "'", ")", ":", " ", "ll", "_", "admin", "\n", " ", " ", "Email", " ", "address", ":"], ["Email", " ", "address", ":", "\n", " ", " ", "Password", ":", "\n", " ", " ", "Password", " ", "(", "again", ")", ":", "\n", " ", " ", "Superuser", " ", "created", " ", "successfully", ".", "\n", "❸", " ", "~", " ", "$", " ", "exit", "\n", " ", " ", "exit", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$"], ["在", "❶", "处", "，", "我们", "执行命令", "ls", " ", "，", "以", "查看", "服务器", "上", "有", "哪些", "文件", "和", "目录", "；", "服务器", "包含", "的", "文件", "和", "目录", "应该", "与", "本地", "系统", "相同", "。", "你", "可以", "像", "遍历", "其他", "文件系统", "一样", "遍历", "这个", "文件系统", "。", "\n", "注意", "\n", "注意", " ", "　", "即便", "你", "使用", "的", "是", "Windows", "系统", "，", "也", "应", "使用", "这里", "列出", "的", "命令", "（", "如", "ls", " ", "而", "不是", "dir", " ", "）", "，", "因为", "你", "正", "通过", "远程", "连接", "运行", "一个", "Linux", "终端", "。", "\n", "在", "❷", "处", "，", "我们", "执行", "了", "创建", "超级", "用户", "的", "命令", "，", "它", "像", "第", "18", "章", "在", "本地", "系统", "创建", "超级", "用户", "一样", "提示", "你", "输入", "相关", "的", "信息", "。", "在", "这个", "终端", "会话", "中", "创建", "超级", "用户", "后", "，", "使用", "命令", "exit", " ", "返回", "到", "本地", "系", "\n", "统的", "终端", "会话", "（", "见", "❸", "）", "。", "\n", "现在", "，", "你", "可以", "在", "在线", "应用程序", "的", "URL", "末尾", "添加", "/", "admin", "/", "来", "登录", "管理", "网站", "了", "。", "对", "我", "而言", "，", "这个", "URL", "为", "https", ":", "/", "/", "afternoon", "-", "meadow", "-", "2775", ".", "herokuapp", ".", "com", "/", "admin", "/", " ", "。", "\n", "如果", "已经", "有", "其他人", "开始", "使用", "这个", "项目", "，", "别忘了", "你", "可以", "访问", "他们", "的", "所有", "数据", "！", "千万别", "不", "把", "这", "当回事", "，", "否则", "用户", "就", "不会", "再", "将", "其", "数据", "托付给", "你", "了", "。", "\n", "2", ".", " ", "在", "\n", "在", "Heroku", "上", "创建", "对", "用户", "友好", "的", "\n", "上", "创建", "对", "用户", "友好", "的", "URL"], ["2", ".", " ", "在", "\n", "在", "Heroku", "上", "创建", "对", "用户", "友好", "的", "\n", "上", "创建", "对", "用户", "友好", "的", "URL", "\n", "你", "可能", "希望", "URL", "更", "友好", "，", "比", "https", ":", "/", "/", "afternoon", "-", "meadow", "-", "2775", ".", "herokuapp", ".", "com", "/", " ", "更好", "记", "。", "为此", "，", "可", "只", "需", "使用", "一个", "命令", "来", "重命名", "应用程序", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "apps", ":", "rename", " ", "learning", "-", "log", "\n", "Renaming", " ", "afternoon", "-", "meadow", "-", "2775", " ", "to", " ", "learning", "-", "log", "...", " ", "done", "\n", "https", ":", "/", "/", "learning", "-", "log", ".", "herokuapp", ".", "com", "/", " ", "|", " ", "https", ":", "/", "/", "git", ".", "heroku", ".", "com", "/", "learning", "-", "log", ".", "git", "\n", "Git", " ", "remote", " ", "heroku", " ", "updated", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "给", "应用程序", "命名", "时", "，", "可", "使用", "字母", "、", "数字", "和", "连", "字符", "；", "你", "想", "怎么", "命名", "应用程序", "都", "可以", "，", "只要", "指定", "的", "名称", "未", "被", "别人", "使用", "就行", "。", "现在", "，", "项目", "的", "URL", "变成", "了", "https", ":", "/", "/", "learning", "-", "log", ".", "herokuapp", ".", "com", "/", " ", "；", "\n", "使用", "以前", "的", "URL", "再也", "无法访问", "它", "，", "命令", "apps", ":", "rename", " ", "将", "整个", "项目", "都", "移到", "了", "新", "的", "URL", "处", "。", "\n", "注意"], ["使用", "以前", "的", "URL", "再也", "无法访问", "它", "，", "命令", "apps", ":", "rename", " ", "将", "整个", "项目", "都", "移到", "了", "新", "的", "URL", "处", "。", "\n", "注意", "\n", "注意", " ", "　", "你", "使用", "Heroku", "提供", "的", "免费", "服务", "来", "部署", "项目", "时", "，", "如果", "项目", "在", "指定", "的", "时间", "内未", "收到", "请求", "或", "过于", "活跃", "，", "Heroku", "将", "让", "项目", "进入", "休眠状态", "。", "用户", "初次", "访问", "处于", "休眠状态", "的", "\n", "网站", "时", "，", "加载", "时间", "将", "更长", "，", "但", "对于", "后续", "请求", "，", "服务器", "的", "响应速度", "将", "更", "快", "。", "这", "就是", "Heroku", "能够", "提供", "免费", "部署", "的", "原因", "所在", "。", "\n", "20.2", ".", "15", "　", "确保", "项目", "的", "安全", "\n", "　", "确保", "项目", "的", "安全", "\n", "当前", "，", "我们", "部署", "的", "项目", "存在", "一个", "严重", "的", "安全", "问题", "：", "settings", ".", "py", "包含", "设置", "DEBUG", "=", "True", " ", "，", "它", "在", "发生", "错误", "时", "显示", "调试信息", "。", "开发", "项目", "时", "，", "Django", "的", "错误", "页", "面向", "你", "显示", "了", "重要", "的", "调试", "信", "\n", "息", "，", "如果", "将", "项目", "部署", "到", "服务器", "后", "依然", "保留", "这个", "设置", "，", "将", "给", "攻击者", "提供", "大量", "可", "供", "利用", "的", "信息", "。", "我们", "还", "需", "确保", "任何人", "都", "无法", "看到", "这些", "信息", "，", "也", "不能", "冒充", "项目", "托管", "网站", "来", "重定向", "请求", "。", "\n", "下面", "来", "修改", "settings", ".", "py", "，", "以", "让", "我们", "能够", "在", "本地", "看到", "错误", "消息", "，", "但", "部署", "到", "服务器", "后", "不", "显示", "任何", "错误", "消息", "：", "\n", "settings", ".", "py", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "#", " ", "Heroku", "设置", "\n", " ", " ", "if", " ", "os", ".", "getcwd", "(", ")", " ", "=", "=", " ", "'", "/", "app", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--"], ["if", " ", "os", ".", "getcwd", "(", ")", " ", "=", "=", " ", "'", "/", "app", "'", ":", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "让", "request", ".", "is", "_", "secure", "(", ")", "承认", "X", "-", "Forwarded", "-", "Proto", "头", "\n", " ", " ", " ", " ", " ", " ", "SECURE", "_", "PROXY", "_", "SSL", "_", "HEADER", " ", "=", " ", "(", "'", "HTTP", "_", "X", "_", "FORWARDED", "_", "PROTO", "'", ",", " ", "'", "https", "'", ")", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "只", "允许", "Heroku", "托管", "这个", "项目", "\n", "❶", " ", " ", " ", " ", " ", "ALLOWED", "_", "HOSTS", " ", "=", " ", "[", "'", "learning", "-", "log", ".", "herokuapp", ".", "com", "'", "]", "\n", "❷", " ", " ", " ", " ", " ", "DEBUG", " ", "=", " ", "False", "\n", " ", " ", " ", " ", " ", " ", "#", " ", "静态", "资产", "配置", "\n", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", "我们", "只", "需", "做", "两", "方面", "的", "修改", "。", "在", "❶", "处", "，", "修改", "ALLOWED", "_", "HOSTS", " ", "，", "只", "允许", "Heroku", "托管", "这个", "项目", "。", "你", "需要", "使用", "应用程序", "的", "名称", "，", "可以", "是", "Heroku", "提供", "的", "名称", "（", "如", "afternoon", "-", "meadow", "-", "\n", "2775", ".", "herokuapp", ".", "com", "）", "，", "也", "可以", "是", "你", "选择", "的", "名称", "。", "在", "❷", "处", "，", "我们", "将", "DEBUG", " ", "设置", "为", "False", " ", "，", "让", "Django", "不", "在", "错误", "发生", "时", "显示", "敏感", "信息", "。", "\n", "20.2", ".", "16", "　", "提交", "并", "推送", "修改", "\n", "　", "提交", "并", "推送", "修改"], ["20.2", ".", "16", "　", "提交", "并", "推送", "修改", "\n", "　", "提交", "并", "推送", "修改", "\n", "现在", "需要", "将", "对", "settings", ".", "py", "所", "做", "的", "修改", "提交", "到", "Git", "仓库", "，", "再", "将", "修改", "推送", "到", "Heroku", "。", "下面", "的", "终端", "会话", "演示", "了", "这个", "过程", "：", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "commit", " ", "-", "am", " ", "\"", "Set", " ", "DEBUG", "=", "False", " ", "for", " ", "Heroku", ".", "\"", "\n", " ", " ", "[", "master", " ", "081f635", "]", " ", "Set", " ", "DEBUG", "=", "False", " ", "for", " ", "Heroku", ".", "\n", " ", " ", " ", "1", " ", "file", " ", "changed", ",", " ", "4", " ", "insertions", "(", "+", ")", ",", " ", "2", " ", "deletions", "(", "-", ")", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", "\n", "我们", "执行命令", "git", " ", "commit", " ", "，", "并", "指定", "了", "一条", "简短", "而", "具有", "描述性", "的", "提交", "消息", "（", "见", "❶", "）", "。", "别忘了", "，", "标志", "-", "am", " ", "让", "Git", "提交", "所有", "修改", "过", "的", "文件", "，", "并", "记录", "一条", "日志", "消息", "。", "Git", "找出", "唯一", "一个", "修", "\n", "改过", "的", "文件", "，", "并", "将", "所", "做", "的", "修改", "提交", "到", "仓库", "。"], ["改过", "的", "文件", "，", "并", "将", "所", "做", "的", "修改", "提交", "到", "仓库", "。", "\n", "❷", "处", "显示", "的", "状态", "表明", "我们", "在", "仓库", "的", "分支", "master", "上", "工作", "，", "当前", "没有", "任何", "未", "提交", "的", "修改", "。", "推送", "到", "Heroku", "之前", "，", "必须", "检查", "状态", "并", "看到", "刚才", "所说", "的", "消息", "。", "如果", "你", "没有", "看到", "这样", "的", "消息", "，", "说明", "\n", "有", "未", "提交", "的", "修改", "，", "而", "这些", "修改", "将", "不会", "推送", "到", "服务器", "。", "在", "这种", "情况", "下", "，", "可", "尝试", "再次", "执行命令", "commit", " ", "，", "但", "如果", "你", "不", "知道", "该", "如何", "解决", "这个", "问题", "，", "请", "阅读", "附录", "D", "，", "更", "深入", "地", "了解", "Git", "的", "用", "\n", "法", "。", "\n", "下面", "来", "将", "修改", "后", "的", "仓库", "推送", "到", "Heroku", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "push", " ", "heroku", " ", "master", "\n", "--", "snip", "--", "\n", "remote", ":", " ", "-----", ">", " ", "Python", " ", "app", " ", "detected", "\n", "remote", ":", " ", "-----", ">", " ", "Installing", " ", "dependencies", " ", "with", " ", "pip", "\n", "--", "snip", "--", "\n", "remote", ":", " ", "-----", ">", " ", "Launching", "...", " ", "done", ",", " ", "v8", "\n", "remote", ":", " ", " ", " ", " ", " ", " ", " ", " ", "https", ":", "/", "/", "learning", "-", "log", ".", "herokuapp", ".", "com", "/", " ", "deployed", " ", "to", " ", "Heroku", "\n", "remote", ":", " ", "Verifying", " ", "deploy", "....", " ", "done", "."], ["remote", ":", " ", "Verifying", " ", "deploy", "....", " ", "done", ".", "\n", "To", " ", "https", ":", "/", "/", "git", ".", "heroku", ".", "com", "/", "learning", "-", "log", ".", "git", "\n", " ", " ", " ", "4c9d111", "..", "ef65d2b", " ", " ", "master", " ", "-", ">", " ", "master", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$"], ["Heroku", "发现", "仓库", "发生", "了", "变化", "，", "因此", "重建", "项目", "，", "确保", "所有", "的", "修改", "都", "已", "生效", "。", "它", "不会", "重建", "数据库", "，", "因此", "这次", "无需", "执行命令", "migrate", " ", "。", "\n", "现在", "要", "核实", "部署", "更", "安全", "了", "，", "请", "输入", "项目", "的", "URL", "，", "并", "在", "末尾", "加上", "我们", "未定义", "的", "扩展", "。", "例如", "，", "尝试", "访问", "http", ":", "/", "/", "learning", "-", "log", ".", "herokuapp", ".", "com", "/", "letmein", "/", " ", "。", "你", "将", "看到", "一个", "通用", "的", "错误", "页面", "，", "它", "没有", "\n", "泄露", "任何", "有关", "该项", "目的", "具体", "信息", "。", "如果", "你", "尝试", "向", "本地", "的", "“", "学习", "笔记", "”", "发出", "同样", "的", "请求", "—", "—", "输入", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "letmein", "/", "，", "你", "将", "看到", "完整", "的", "Django", "错误", "页面", "。", "这样", "的", "结果", "非常", "理", "\n", "想", "，", "你", "接着", "开发", "这个", "项目", "时", "，", "将", "看到", "信息", "丰富", "的", "错误", "消息", "，", "但", "用户", "看不到", "有关", "项目", "代码", "的", "重要", "信息", "。", "\n", "20.2", ".", "17", "　", "创建", "自定义", "错误", "页面", "\n", "　", "创建", "自定义", "错误", "页面", "\n", "在", "第", "19", "章", "，", "我们", "对", "“", "学习", "笔记", "”", "进行", "了", "配置", "，", "使", "其", "在", "用户", "请求", "不", "属于", "他", "的", "主题", "或", "条目", "时", "返回", "404", "错误", "。", "你", "可能", "还", "遇到", "过", "一些", "500", "错误", "（", "内部", "错误", "）", "。", "404", "错误", "通常", "意味着", "你", "的", "Django", "代"], ["码是", "正确", "的", "，", "但", "请求", "的", "对象", "不", "存在", "。", "500", "错误", "通常", "意味着", "你", "编写", "的", "代码", "有", "问题", "，", "如", "views", ".", "py", "中", "的", "函数", "有", "问题", "。", "当前", "，", "在", "这", "两种", "情况", "下", "，", "Django", "都", "返回", "通用", "的", "错误", "页面", "，", "但", "我们", "可以", "编", "\n", "写", "外观", "与", "“", "学习", "笔记", "”", "一致", "的", "404", "和", "500", "错误", "页面", "模板", "。", "这些", "模板", "必须", "放在", "根", "模板", "目录", "中", "。", "\n", "1", ".", " ", "创建", "自定义", "模板", "\n", "创建", "自定义", "模板", "\n", "在", "文件夹", "learning", "_", "log", "/", "learning", "_", "log", "中", "，", "新建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "templates", "；", "再", "在", "这个", "文件夹", "中", "新建", "一个", "名为", "404", ".", "html", "的", "文件", "，", "并", "在", "其中", "输入", "如下", "内容", "：", "\n", "404", ".", "html", "\n", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h2", ">", "The", " ", "item", " ", "you", " ", "requested", " ", "is", " ", "not", " ", "available", ".", " ", "(", "404", ")", "<", "/", "h2", ">", "\n", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", "这个", "简单", "的", "模板", "指定", "了", "通用", "的", "404", "错误", "页面", "包含", "的", "信息", "，", "并且", "该", "页面", "的", "外观", "与", "网站", "的", "其他", "部分", "一致", "。", "\n", "再", "创建", "一个", "名为", "500", ".", "html", "的", "文件", "，", "并", "在", "其中", "输入", "如下", "代码", "：", "\n", "500", ".", "html"], ["再", "创建", "一个", "名为", "500", ".", "html", "的", "文件", "，", "并", "在", "其中", "输入", "如下", "代码", "：", "\n", "500", ".", "html", "\n", "{", "%", " ", "extends", " ", "\"", "learning", "_", "logs", "/", "base", ".", "html", "\"", " ", "%", "}", "\n", "{", "%", " ", "block", " ", "header", " ", "%", "}", "\n", " ", " ", " ", " ", "<", "h2", ">", "There", " ", "has", " ", "been", " ", "an", " ", "internal", " ", "error", ".", " ", "(", "500", ")", "<", "/", "h2", ">", "\n", "{", "%", " ", "endblock", " ", "header", " ", "%", "}", "\n", "这些", "新", "文件", "要求", "对", "settings", ".", "py", "做", "细微", "的", "修改", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "TEMPLATES", " ", "=", " ", "[", "\n", " ", " ", " ", " ", "{", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "BACKEND", "'", ":", " ", "'", "django", ".", "template", ".", "backends", ".", "django", ".", "DjangoTemplates", "'", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "DIRS", "'", ":", " ", "[", "os", ".", "path", ".", "join", "(", "BASE", "_", "DIR", ",", " ", "'", "learning", "_", "log", "/", "templates", "'", ")", "]", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "'", "APP", "_", "DIRS", "'", ":", " ", "True", ",", "\n", " ", " ", " ", " ", " ", " ", " ", " ", "--", "snip", "--", "\n", " ", " ", " ", " ", "}", ",", "\n", "]", "\n", "--", "snip", "--", "\n", "这项", "修改", "让", "Django", "在", "根", "模板", "目录", "中", "查找", "错误", "页面", "模板", "。", "\n", "2", ".", " ", "在", "本地", "查看", "错误", "页面", "\n", "在", "本地", "查看", "错误", "页面"], ["2", ".", " ", "在", "本地", "查看", "错误", "页面", "\n", "在", "本地", "查看", "错误", "页面", "\n", "在", "将", "项目", "推送", "到", "Heroku", "之前", "，", "如果", "你", "要", "在", "本地", "查看", "错误", "页面", "是", "什么样", "的", "，", "首先", "需要", "在", "本地", "设置", "中", "设置", "Debug", "=", "False", " ", "，", "以", "禁止显示", "默认", "的", "Django", "调试", "页面", "。", "为此", "，", "可", "对", "settings", ".", "py", "\n", "做", "如下", "修改", "（", "请", "确保", "你", "修改", "的", "是", "用于", "本地", "环境", "的", "settings", ".", "py", "部分", "，", "而", "不是", "用于", "Heroku", "的", "部分", "）", "：", "\n", "settings", ".", "py", "\n", "--", "snip", "--", "\n", "#", " ", "安全", "警告", "：", "不要", "在", "在线", "环境", "中", "启用", "调试", "！", "\n", "DEBUG", " ", "=", " ", "False", "\n", "ALLOWED", "_", "HOSTS", " ", "=", " ", "[", "'", "localhost", "'", "]", "\n", "--", "snip", "--", "\n", "DEBUG", " ", "被", "设置", "为", "False", " ", "时", "，", "你", "必须", "在", "ALLOWED", "_", "HOSTS", " ", "中", "指定", "一个", "主机", "。", "现在", "，", "请求", "一个", "不", "属于", "你", "的", "主题", "或", "条目", "，", "以", "查看", "404", "错误", "页面", "；", "请求", "不", "存在", "的", "URL", "（", "如", "\n", "localhost", ":", "8000", "/", "letmein", "/", "）", "，", "以", "查看", "500", "错误", "页面", "。", "\n", "查看", "错误", "页面", "后", "，", "将", "DEBUG", " ", "重新", "设置", "为", "True", " ", "，", "以", "方便", "你", "进一步", "开发", "“", "学习", "笔记", "”", "。", "（", "在", "settings", ".", "py", "中", "用于", "Heroku", "部署", "的", "部分", "中", "，", "确保", "DEBUG", " ", "依然", "被", "设置", "为", "False", " ", "）", "。", "\n", "注意"], ["注意", "\n", "注意", " ", "　", "500", "错误", "页面", "不会", "显示", "任何", "有关", "当前", "用户", "的", "信息", "，", "因为", "发生", "服务器", "错误", "时", "，", "Django", "不会", "通过", "响应", "发送", "任何", "上下文", "信息", "。", "\n", "3", ".", " ", "将", "修改", "推送", "到", "\n", "将", "修改", "推送", "到", "Heroku", "\n", "现在", "需要", "提交", "对", "模板", "所", "做", "的", "修改", "，", "并", "将", "这些", "修改", "推送", "到", "Heroku", "：", "\n", "❶", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "add", " ", ".", "\n", "❷", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "commit", " ", "-", "am", " ", "\"", "Added", " ", "custom", " ", "404", " ", "and", " ", "500", " ", "error", " ", "pages", ".", "\"", "\n", " ", " ", " ", "3", " ", "files", " ", "changed", ",", " ", "15", " ", "insertions", "(", "+", ")", ",", " ", "10", " ", "deletions", "(", "-", ")", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "learning", "_", "log", "/", "templates", "/", "404", ".", "html", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "learning", "_", "log", "/", "templates", "/", "500", ".", "html", "\n", "❸", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "git", " ", "push", " ", "heroku", " ", "master", "\n", " ", " ", "--", "snip", "--", "\n", " ", " ", "remote", ":", " ", "Verifying", " ", "deploy", "....", " ", "done", "."], ["--", "snip", "--", "\n", " ", " ", "remote", ":", " ", "Verifying", " ", "deploy", "....", " ", "done", ".", "\n", " ", " ", "To", " ", "https", ":", "/", "/", "git", ".", "heroku", ".", "com", "/", "learning", "-", "log", ".", "git", "\n", " ", " ", " ", " ", " ", "2b34ca1", "..", "a64d8d3", " ", " ", "master", " ", "-", ">", " ", "master", "\n", " ", " ", "(", "ll", "_", "env", ")", "learning", "_", "log", "$"], ["在", "❶", "处", "，", "我们", "执行", "了", "命令", "git", " ", "add", " ", "，", "这", "是因为", "我们", "在", "项目", "中", "创建", "了", "一些", "新", "文件", "，", "因此", "需要", "让", "Git", "跟踪", "这些", "文件", "。", "然后", "，", "我们", "提交", "所", "做", "的", "修改", "（", "见", "❷", "）", "，", "并", "将", "修改", "后", "的", "项目", "推送", "到", "\n", "Heroku", "（", "见", "❸", "）", "。", "\n", "现在", "，", "错误", "页面", "出现", "时", "，", "其", "样式", "应该", "与", "网站", "的", "其他", "部分", "一致", "，", "这样", "在", "发生", "错误", "时", "，", "用户", "将", "不会", "感到", "突兀", "。", "\n", "4", ".", " ", "使用", "方法", "\n", "使用", "方法", "get", "_", "object", "_", "or", "_", "404", "(", ")", "\n", "现在", "，", "如果", "用户", "手工", "请求", "不", "存在", "的", "主题", "或", "条目", "，", "将", "导致", "500", "错误", "。", "Django", "尝试", "渲染", "请求", "的", "页面", "，", "但", "没有", "足够", "的", "信息", "来", "完成", "这项", "任务", "，", "进而", "引发", "500", "错误", "。", "对于", "这种", "情形", "，", "将", "其", "视为", "\n", "404", "错误", "更", "合适", "，", "为此", "可", "使用", "Django", "快捷", "函数", "get", "_", "object", "_", "or", "_", "404", "(", ")", " ", "。", "这个", "函数", "尝试", "从", "数据库", "获取", "请求", "的", "对象", "，", "如果", "这个", "对象", "不", "存在", "，", "就", "引发", "404", "异常", "。", "我们", "在", "views", ".", "py", "中", "导入", "\n", "这个", "函数", "，", "并用", "它", "替换", "函数", "get", "(", ")", " ", "：", "\n", "views", ".", "py", "\n", "--", "snip", "--", "\n", "from", " ", "django", ".", "shortcuts", " ", "import", " ", "render", ",", " ", "get", "_", "object", "_", "or", "_", "404", "\n", "from", " ", "django", ".", "http", " ", "import", " ", "HttpResponseRedirect", ",", " ", "Http404", "\n", "--", "snip", "--"], ["--", "snip", "--", "\n", "@", "login", "_", "required", "\n", "def", " ", "topic", "(", "request", ",", " ", "topic", "_", "id", ")", ":", "\n", " ", " ", " ", " ", "\"", "\"", "\"", "显示", "单个", "主题", "及其", "所有", "的", "条目", "\"", "\"", "\"", "\n", " ", " ", " ", " ", "topic", " ", "=", " ", "get", "_", "object", "_", "or", "_", "404", "(", "Topic", ",", " ", "id", "=", "topic", "_", "id", ")", "\n", " ", " ", " ", " ", "#", " ", "确定", "主题", "属于", "当前", "用户", "\n", " ", " ", " ", " ", "--", "snip", "--", "\n", "现在", "，", "如果", "你", "请求", "不", "存在", "的", "主题", "（", "例如", "，", "使用", "URL", " ", "http", ":", "/", "/", "localhost", ":", "8000", "/", "topics", "/", "999999", "/", " ", "）", "，", "将", "看到", "404", "错误", "页面", "。", "为", "部署", "这里", "所", "做", "的", "修改", "，", "再次", "提交", "，", "并", "将", "项目", "推送", "到", "Heroku", "。", "\n", "20.2", ".", "18", "　", "继续", "开发", "\n", "　", "继续", "开发", "\n", "将", "项目", "“", "学习", "笔记", "”", "推送", "到", "服务器", "后", "，", "你", "可能", "想", "进一步", "开发", "它", "或", "开发", "要", "部署", "的", "其他", "项目", "。", "更新", "项目", "的", "过程", "几乎", "完全相同", "。", "\n", "首先", "，", "你", "对", "本地", "项目", "做", "必要", "的", "修改", "。", "如果", "在", "修改", "过程", "中", "创建", "了", "新", "文件", "，", "使用", "命令", "git", " ", "add", " ", ".", " ", "（", "千万别", "忘记", "这个", "命令", "末尾", "的", "句点", "）", "将", "它们", "加入", "到", "Git", "仓库", "中", "。", "如果", "有", "修改", "要求", "迁移", "\n", "数据库", "，", "也", "需要", "执行", "这个", "命令", "，", "因为", "每个", "迁移", "都", "将", "生成", "新", "的", "迁移", "文件", "。"], ["数据库", "，", "也", "需要", "执行", "这个", "命令", "，", "因为", "每个", "迁移", "都", "将", "生成", "新", "的", "迁移", "文件", "。", "\n", "然后", "，", "使用", "命令", "git", " ", "commit", " ", "-", "am", " ", "\"", "commit", " ", "message", " ", "\"", "将", "修改", "提交", "到", "仓库", "，", "再", "使用", "命令", "git", " ", "push", " ", "heroku", " ", "master", " ", "将", "修改", "推送", "到", "Heroku", "。", "如果", "你", "在", "本地", "迁移", "了", "数据库", "，", "\n", "也", "需要", "迁移", "在线", "数据库", "。", "为此", "，", "你", "可以", "使用", "一次性", "命令", "heroku", " ", "run", " ", "python", " ", "manage", ".", "py", " ", "migrate", " ", "，", "也", "可", "使用", "heroku", " ", "run", " ", "bash", " ", "打开", "一个", "远程", "终端", "会话", "，", "并", "在", "其中", "执", "\n", "行", "命令", "python", " ", "manage", ".", "py", " ", "migrate", " ", "。", "然后", "访问", "在线", "项目", "，", "确认", "你", "期望", "看到", "的", "修改", "已", "生效", "。", "\n", "在", "这个", "过程", "中", "很", "容易", "犯错", "，", "因此", "看到", "错误", "时", "不要", "大惊小怪", "。", "如果", "代码", "不能", "正确", "地", "工作", "，", "请", "重新", "审视", "所", "做", "的", "工作", "，", "尝试", "找出", "其中", "的", "错误", "。", "如果", "找不出", "错误", "，", "或者", "不", "知道", "如何", "撤销", "错", "\n", "误", "，", "请参阅", "附录", "C", "中", "有关", "如何", "寻求", "帮助", "的", "建议", "。", "不要", "羞于", "去", "寻求", "帮助", "：", "每个", "学习", "开发", "项目", "的", "人", "都", "可能", "遇到", "过", "你", "面临", "的", "问题", "，", "因此", "总", "有人", "乐意", "伸出", "援手", "。", "通过", "解决", "遇到", "的", "每个", "问", "\n", "题", "，", "可", "让", "你", "的", "技能", "稳步", "提高", "，", "最终", "能够", "开发", "可靠", "而", "有", "意义", "的", "项目", "，", "还", "能", "解决", "别人", "遇到", "的", "问题", "。", "\n", "20.2", ".", "19", "　", "设置", "\n", "　", "设置", "SECRET", "_", "KEY"], ["20.2", ".", "19", "　", "设置", "\n", "　", "设置", "SECRET", "_", "KEY", "\n", "Django", "根据", "settings", ".", "py", "中", "设置", "SECRET", "_", "KEY", " ", "的", "值来", "实现", "大量", "的", "安全", "协议", "。", "在", "这个", "项目", "中", "，", "我们", "提交", "到", "仓库", "的", "设置", "文件", "包含", "设置", "SECRET", "_", "KEY", " ", "。", "对于", "一个", "练习", "项目", "而言", "，", "这", "足够", "\n", "了", "，", "但", "对于", "生产", "网站", "，", "应", "更", "细致", "地", "处理", "设置", "SECRET", "_", "KEY", " ", "。", "如果", "你", "创建", "的", "项目", "的", "用途", "很", "重要", "，", "务必", "研究", "如何", "更", "安全", "地", "处理", "设置", "SECRET", "_", "KEY", " ", "。", "\n", "20.2", ".", "20", "　", "将", "项目", "从", "\n", "　", "将", "项目", "从", "Heroku", "删除", "\n", "删除", "\n", "一个", "不错", "的", "练习", "是", "，", "使用", "同一个", "项目", "或", "一系列", "小", "项目", "执行", "部署", "过程", "多次", "，", "直到", "对", "部署", "过程", "了如指掌", "。", "然而", "，", "你", "需要", "知道", "如何", "删除", "部署", "的", "项目", "。", "Heroku", "可能", "还", "限制", "了", "你", "可", "免费", "托管", "\n", "的", "项目数", "，", "另外", "，", "你", "也", "不", "希望", "让", "自己", "的", "账户", "中", "塞满", "大量", "的", "练习", "项目", "。", "\n", "在", "Heroku", "网站", "（", "https", ":", "/", "/", "heroku", ".", "com", "/", " ", "）", "登录", "后", "，", "你", "将", "被", "重定向", "到", "一个", "页面", "，", "其中", "列出", "了", "你", "托管", "的", "所有", "项目", "。", "单击", "要", "删除", "的", "项目", "，", "你", "将", "看到", "另", "一个", "页面", "，", "其中", "显示", "了", "有关", "这个", "项目", "的", "信"], ["息", "。", "单击", "链接", "Settings", "，", "再", "向下", "滚动", "，", "找到", "用于", "删除", "项目", "的", "链接", "并", "单击", "它", "。", "这种", "操作", "是", "不可", "撤销", "的", "，", "因此", "Heroku", "让", "你", "手工", "输入", "要", "删除", "的", "项目", "的", "名称", "，", "以", "确认", "你", "确实", "要", "删除", "它", "。", "\n", "如果", "你", "喜欢", "在", "终端", "中", "工作", "，", "也", "可", "使用", "命令", "destroy", " ", "来", "删除", "项目", "：", "\n", "(", "ll", "_", "env", ")", "learning", "_", "log", "$", " ", "heroku", " ", "apps", ":", "destroy", " ", "--", "app", " ", "appname", "\n", "其中", " ", "appname", " ", "是", "要", "删除", "的", "项目", "的", "名称", "，", "可能", "类似", "于", "afternoon", "-", "meadow", "-", "2775", " ", "，", "也", "可能", "类似", "于", "learning", "-", "log", " ", "（", "如果", "你", "重命名", "了", "项目", "）", "。", "你", "将", "被", "要求", "再次", "输入", "项目", "名", "，", "以", "\n", "确认", "你", "确实", "要", "删除", "它", "。", "\n", "注意", "\n", "注意", " ", "　", "删除", "Heroku", "上", "的", "项目", "对", "本地", "项目", "没有", "任何", "影响", "。", "如果", "没有", "人", "使用", "你", "部署", "的", "项目", "，", "就", "尽管", "去", "练习", "部署", "过程", "好", "了", "，", "在", "Heroku", "删除", "项目", "再", "重新部署", "完全", "合情合理", "。", "\n", "　", "\n", "动手", "试一试", "\n", "动手", "试一试", "\n", "20", "-", "3", " ", "在线", "博客", "\n", "在线", "博客", " ", "：", "将", "你", "一直", "在", "开发", "的", "项目", "Blog", "部署", "到", "Heroku", "。", "确保", "将", "DEBUG", " ", "设置", "为", "False", " ", "，", "并", "修改", "设置", "ALLOWED", "_", "HOSTS", " ", "，", "让", "部署", "相当", "安全", "。", "\n", "20", "-", "4", " ", "在", "更", "多", "的", "情况", "下", "显示", "\n", "在", "更", "多", "的", "情况", "下", "显示", "404", "错误", "页面"], ["20", "-", "4", " ", "在", "更", "多", "的", "情况", "下", "显示", "\n", "在", "更", "多", "的", "情况", "下", "显示", "404", "错误", "页面", "\n", "错误", "页面", " ", "：", "在", "视图", "函数", "new", "_", "entry", "(", ")", " ", "和", "edit", "_", "entry", "(", ")", " ", "中", "，", "也", "使用", "函数", "get", "_", "object", "_", "or", "_", "404", "(", ")", " ", "。", "完成", "这些", "修改", "后", "进行", "测试", "：", "输", "\n", "入", "类似", "于", "http", ":", "/", "/", "localhost", ":", "8000", "/", "new", "_", "entry", "/", "99999", "/", "的", "URL", "，", "确认", "你", "能够", "看到", "404", "错误", "页面", "。", "\n", "20", "-", "5", " ", "扩展", "\n", "扩展", "“", "学习", "笔记", "\n", "学习", "笔记", "”", " ", "：", "在", "“", "学习", "笔记", "”", "中", "添加", "一项", "功能", "，", "将", "修改", "推送", "到", "在线", "部署", "。", "尝试", "做", "一项", "简单", "的", "修改", "，", "如", "在", "主页", "中", "对", "项目", "作", "更", "详细", "的", "描述", "；", "再", "尝试", "添加", "一项", "更", "高级", "\n", "的", "功能", "，", "如", "让", "用户", "能够", "将", "主题", "设置", "为", "公开", "的", "。", "为此", "，", "需要", "在", "模型", "Topic", " ", "中", "添加", "一个", "名为", "public", " ", "的", "属性", "（", "其", "默认值", "为", "False", " ", "）", "，", "并", "在", "new", "_", "topic", " ", "页面", "中", "添加", "一个", "表", "\n", "单", "元素", "，", "让", "用户", "能够", "将", "私有", "主题", "改为", "公开", "的", "。", "然后", "，", "你", "需要", "迁移", "项目", "，", "并", "修改", "views", ".", "py", "，", "让", "未", "登录", "的", "用户", "也", "可以", "看到", "所有", "公开", "的", "主题", "。", "将", "修改", "推送", "到", "Heroku", "后", "，", "别忘了", "\n", "迁移", "在线", "数据库", "。", "\n", "20.3", "　", "小结", "\n", "　", "小结"], ["迁移", "在线", "数据库", "。", "\n", "20.3", "　", "小结", "\n", "　", "小结", "\n", "在", "本章", "中", "，", "你", "学习", "了", "如何", "使用", "Bootstrap", "库", "和", "应用程序", "django", "-", "bootstrap3", "赋予", "应用程序", "简单", "而", "专业", "的", "外观", "。", "使用", "Bootstrap", "意味着", "无论", "用户", "使用", "哪", "种", "设备", "来", "访问", "你", "的", "项目", "，", "你", "选择", "的", "样式", "\n", "都", "将", "实现", "几乎", "相同", "的", "效果", "。", "\n", "你", "学习", "了", "Bootstrap", "的", "模板", "，", "并", "使用", "模板", "Static", " ", "top", " ", "navbar", "赋予", "了", "“", "学习", "笔记", "”", "简单", "的", "外观", "。", "你", "学习", "了", "如何", "使用", "jumbotron", "来", "突出", "主页", "中", "的", "消息", "，", "还", "学习", "了", "如何", "给", "网站", "的", "所有", "网页", "设置", "一致", "\n", "的", "样式", "。", "\n", "在", "本章", "的", "最后", "一部分", "，", "你", "学习", "了", "如何", "将", "项目", "部署", "到", "Heroku", "的", "服务器", "，", "让", "任何人", "都", "能够", "访问", "它", "。", "你", "创建", "了", "一个", "Heroku", "账户", "，", "并", "安装", "了", "一些", "帮助", "管理", "部署", "过程", "的", "工具", "。", "你", "使用", "Git", "将", "能", "\n", "够", "正确", "运行", "的", "项目", "提交", "到", "一个", "仓库", "，", "再", "将", "这个", "仓库", "推送", "到", "Heroku", "的", "服务器", "。", "最后", "，", "你", "将", "DEBUG", " ", "设置", "为", "False", " ", "，", "以", "确保", "在线", "服务器", "上", "应用程序", "的", "安全", "。", "\n", "至此", "，", "开发", "完", "了", "项目", "“", "学习", "笔记", "”", "后", "，", "你", "可以", "自己", "动手", "开发", "项目", "了", "。", "请", "先", "让", "项目", "尽可能", "简单", "，", "确定", "它", "能", "正确", "运行", "后", "，", "再", "添加", "复杂", "的", "功能", "。", "愿", "你", "学习", "愉快", "，", "开发", "项目", "时有", "好运", "相伴", "！"], ["附录", "\n", "附录", " ", "A", "　", "安装", "\n", "　", "安装", "Python", "\n", "Python", "有", "多个", "不同", "的", "版本", "，", "而", "在", "各种", "操作系统", "中", "安装", "它", "的", "方式", "有", "很多", "。", "如果", "第", "1", "章", "介绍", "的", "方法", "不管", "用", "，", "或者", "你", "要", "安装", "非", "系统", "自带", "的", "Python", "版本", "，", "这个", "附录", "可", "提供", "帮助", "。", "\n", "A.1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", "\n", "几乎", "所有", "Linux", "系统", "都", "默认", "安装", "了", "Python", "，", "但", "你", "可能", "想", "使用", "非", "默认", "版本", "。", "如果", "是", "这样", "，", "请", "首先", "确定", "已", "安装", "的", "Python", "版本", "。", "\n", "A.1", ".", "1", "　", "确定", "已", "安装", "的", "版本", "\n", "　", "确定", "已", "安装", "的", "版本", "\n", "打开", "一个", "终端", "窗口", "，", "并", "执行", "如下", "命令", "：", "\n", "$", " ", "python", " ", "--", "version", "\n", "Python", " ", "2.7", ".", "6", "\n", "输出", "表明", "默认", "版本", "是", "2.7", ".", "6", "，", "但", "系统", "可能", "还", "安装", "了", "一个", "Python", " ", "3", "版本", "。", "为", "核实", "这", "一点", "，", "请", "执行", "如下", "命令", "：", "\n", "$", " ", "python3", " ", "--", "version", "\n", "Python", " ", "3.5", ".", "0", "\n", "输出", "表明", "也", "安装", "了", "Python", " ", "3.5", ".", "0", "。", "安装", "新", "版本", "前", "，", "有", "必要", "执行", "上述", "两个", "命令", "。", "\n", "A.1", ".", "2", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", " ", "3"], ["A.1", ".", "2", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", " ", "3", "\n", "如果", "你", "的", "系统", "没有", "安装", "Python", " ", "3", "，", "或者", "你", "想", "安装", "较", "新", "的", "Python", " ", "3", "版本", "，", "只", "需", "执行", "几个", "命令", "即可", "。", "我们", "使用", "一个", "名为", "deadsnakes", " ", "的", "包", "，", "它", "让", "安装", "多个", "Python", "版本", "变得", "很", "容易", "：", "\n", "$", " ", "sudo", " ", "add", "-", "apt", "-", "repository", " ", "ppa", ":", "fkrull", "/", "deadsnakes", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "update", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "python3.5", "\n", "这些", "命令", "在", "你", "的", "系统", "中", "安装", "Python", " ", "3.5", "。", "下面", "的", "命令", "启动", "一个", "运行", "Python", " ", "3.5", "的", "终端", "会话", "：", "\n", "$", " ", "python3.5", "\n", ">", ">", ">", "\n", "配置", "文本编辑", "器使", "其", "使用", "Python", " ", "3", "以及", "从", "终端", "运行", "程序", "时", "，", "也", "需要", "用到", "这个", "命令", "。", "\n", "A.2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", "\n", "大多数", "OS", " ", "X", "系统", "都", "安装", "了", "Python", "，", "但", "你", "可能", "想", "使用", "非", "默认", "版本", "。", "如果", "是", "这样", "，", "请", "首先", "确定", "已", "安装", "了", "哪个", "版本", "的", "Python", "。", "\n", "A.2", ".", "1", "　", "确定", "已", "安装", "的", "版本", "\n", "　", "确定", "已", "安装", "的", "版本"], ["打开", "一个", "终端", "窗口", "，", "并", "执行", "如下", "命令", "：", "\n", "$", " ", "python", " ", "--", "version", "\n", "Python", " ", "2.7", ".", "6", "\n", "你", "还", "应", "尝试", "执行命令", "python3", " ", "--", "version", " ", "。", "执行", "这个", "命令", "时", "，", "可能", "会", "出现", "错误", "消息", "，", "但", "若", "要", "确定", "安装", "了", "哪些", "Python", "版本", "，", "有", "必要", "执行", "这个", "命令", "。", "\n", "A.2", ".", "2", "　", "使用", "\n", "　", "使用", "Homebrew", "来", "安装", "\n", "来", "安装", "Python", " ", "3", "\n", "如果", "你", "的", "系统", "只", "安装", "了", "Python", " ", "2", "，", "或者", "已", "安装", "的", "Python", " ", "3", "版本", "较", "旧", "，", "可", "使用", "一个", "名为", "Homebrew", "的", "包来", "安装", "最新", "的", "Python", " ", "3", "版本", "。", "\n", "1", ".", " ", "安装", "\n", "安装", "Homebrew", "\n", "Homebrew", "依赖于", "Apple", "包", "Xcode", "，", "因此", "请", "打开", "一个", "终端", "窗口", "并", "执行", "如下", "命令", "：", "\n", "$", " ", "xcode", "-", "select", " ", "--", "install", "\n", "在", "不断", "出现", "的", "确认", "对话框", "中", "都", "单击", "OK", "按钮", "（", "根据", "网络连接", "的", "速度", "，", "这", "可能", "会花", "一些", "时间", "）", "。", "接下来", "安装", "Homebrew", "：", "\n", "$", " ", "ruby", " ", "-", "e", " ", "\"", "$", "(", "curl", " ", "-", "fsSL", " ", "https", ":", "/", "/", "raw", ".", "githubusercontent", ".", "com", "/", "Homebrew", "/", "install", "/", "master", "/", "install", ")", "\""], ["这个", "命令", "可", "在", "Homebrew", "网站", "（", "http", ":", "/", "/", "brew", ".", "sh", "/", " ", "）", "的", "首页", "找到", "。", "在", "curl", " ", "-", "fsSL", " ", "和", "URL", "之间", "，", "务必", "包含", "一个", "空格", "。", "\n", "注意", "\n", "注意", " ", "　", "这个", "命令", "中", "的", "-", "e", " ", "让", "Ruby", "（", "Homebrew", "就是", "使用", "这种", "编程语言", "编写", "的", "）", "执行", "下载", "的", "代码", "。", "除非", "来源", "是", "你", "信任", "的", "，", "否则", "不要", "运行", "这样", "的", "命令", "。", "\n", "为", "确认", "正确", "地", "安装", "了", "Homebrew", "，", "请", "执行", "如下", "命令", "：", "\n", "$", " ", "brew", " ", "doctor", "\n", "Your", " ", "system", " ", "is", " ", "ready", " ", "to", " ", "brew", ".", "\n", "上述", "输出", "表明", "你", "可以", "使用", "Homebrew", "来", "安装", "Python", "包了", "。", "\n", "2", ".", " ", "安装", "\n", "安装", "Python", " ", "3", "\n", "为", "安装", "最新", "的", "Python", " ", "3", "版本", "，", "请", "执行", "如下", "命令", "：", "\n", "$", " ", "brew", " ", "install", " ", "python3", "\n", "下面", "来", "检查", "使用", "这个", "命令", "安装", "的", "是", "哪个", "版本", "：", "\n", "$", " ", "python3", " ", "--", "version", "\n", "Python", " ", "3.5", ".", "0", "\n", "$", "\n", "现在", "，", "你", "可以", "使用", "命令", "python3", " ", "来", "启动", "Python", " ", "3", "终端", "会话", "了", "，", "还", "可", "使用", "命令", "python3", " ", "来", "配置", "文本编辑", "器", "，", "使", "其", "使用", "Python", " ", "3", "而", "不是", "Python", " ", "2", "来", "运行", "Python", "程序", "。", "\n", "A.3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python"], ["A.3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", "\n", "Windows", "系统", "默认", "未", "安装", "Python", "，", "但", "有", "必要", "检查", "系统", "是否", "安装", "了", "它", "。", "为此", "，", "按住", "Shift", "键", "并", "右击", "桌面", "，", "再", "选择", "“", "在", "此处", "打开", "命令", "窗口", "”", "来", "打开", "一个", "终端", "窗口", "。", "你", "也", "可以", "在", "开始菜单", "中执", "\n", "行", "命令", "command", " ", "。", "在", "打开", "的", "终端", "窗口", "中", "，", "执行", "如下", "命令", "：", "\n", ">", " ", "python", " ", "--", "version", "\n", "Python", " ", "3.5", ".", "0", "\n", "如果", "你", "看到", "了", "类似", "于", "上面", "的", "输出", "，", "说明", "已", "安装", "了", "Python", "，", "但", "你", "可能", "想", "安装", "更新", "的", "版本", "。", "如果", "看到", "一条", "错误", "消息", "，", "就", "说明", "你", "需要", "下载", "并", "安装", "Python", "。", "\n", "A.3", ".", "1", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Python", " ", "3", "\n", "访问", "http", ":", "/", "/", "python", ".", "org", "/", "downloads", "/", " ", "，", "并", "单击", "你", "要", "安装", "的", "Python", "版本", "。", "下载安装", "程序", "，", "并", "在", "运行", "它", "时", "选择", "复选框", "Add", " ", "Python", " ", "to", " ", "PATH", "。", "这", "让", "你", "不用", "手工", "修改", "系统", "的", "环境变量", "，", "在", "执行", "命", "\n", "令", "python", " ", "时", "也", "无需", "指定", "其", "完整", "路径", "。", "安装", "Python", "后", "，", "打开", "一个", "新", "的", "终端", "窗口", "，", "并", "在", "其中", "执行命令", "python", " ", "--", "version", " ", "。", "如果", "没有", "报错", "，", "就", "说明", "Python", "安装", "好", "了", "。", "\n", "A.3", ".", "2", "　", "查找", "\n", "　", "查找", "Python", "解释器"], ["A.3", ".", "2", "　", "查找", "\n", "　", "查找", "Python", "解释器", "\n", "解释器", "\n", "如果", "不能", "执行", "简单", "命令", "python", " ", "，", "你", "就", "需要", "告诉", "Windows", "去", "哪里", "查找", "Python", "解释器", "。", "要", "确定", "Python", "解释器", "的", "位置", "，", "请", "打开", "C盘", "，", "并", "在", "其中", "查找", "名称", "以", "Python", "打头", "的", "文件夹", "（", "要", "找到", "这", "\n", "样", "的", "文件夹", "，", "你", "可能", "需要", "在", "Windows", "资源管理", "器中", "的", "搜索", "栏中", "输入", "单词", "python", "）", "。", "打开", "这个", "文件夹", "，", "并", "查找", "名称", "为", "python", "（", "全部", "小写", "）", "的", "文件", "。", "右击", "这个", "文件", "并", "选择", "“", "属性", "”", "，", "你", "将", "\n", "在", "“", "位置", "：", "”", "右边", "看到", "它", "的", "路径", "。", "\n", "在", "终端", "窗口", "中", "，", "使用", "该", "路径", "来", "确定", "刚", "安装", "的", "Python", "版本", "：", "\n", "$", " ", "C", ":", "\\", "\\", "Python35", "\\", "python", " ", "--", "version", "\n", "Python", " ", "3.5", ".", "0"], ["A.3", ".", "3", "　", "将", "\n", "　", "将", "Python", "添加", "到", "环境变量", "\n", "添加", "到", "环境变量", "Path", "中", "\n", "中", "\n", "如果", "每次", "启动", "Python", "终端", "时", "都", "需要", "输入", "完整", "的", "路径", "，", "那", "就", "太", "讨厌", "了", "；", "有鉴于此", "，", "我们", "将", "在", "系统", "中", "添加", "这个", "路径", "，", "让", "你", "只", "需", "使用", "命令", "python", " ", "即可", "。", "如果", "你", "在", "安装", "Python", "时", "选择", "了", "复", "\n", "选框", "Add", " ", "Python", " ", "to", " ", "PATH", "，", "可", "跳", "过", "这", "一步", "。", "打开", "控制面板", "并", "单击", "“", "系统", "和", "安全", "”", "，", "再", "单击", "“", "系统", "”", "。", "单击", "“", "高级", "系统", "设置", "”", "，", "在", "打开", "的", "窗口", "中", "单击", "按钮", "“", "环境变量", "”", "。", "\n", "在", "“", "系统", "变量", "”", "部分", "，", "找到", "并", "单击", "变量", "Path", " ", "，", "再", "单击", "按钮", "“", "编辑", "”", "。", "在", "出现", "的", "对话框", "中", "，", "单击", "“", "变量值", "”", "，", "并", "使用", "右", "箭头键", "滚到", "最", "右边", "。", "千万", "不要", "覆盖", "变量", "原来", "的", "值", "，", "如果", "你", "不", "小心", "这", "\n", "样做", "了", "，", "单击", "“", "取消", "”", "按钮", "，", "再", "重复", "前面", "的", "步骤", "。", "在", "变量值", "的", "末尾", "添加", "一个", "分", "号", "，", "再", "添加", "文件", "python", ".", "exe", "的", "路径", "：", "\n", "%", "SystemRoot%", "\\", "system32", "\\", "...", "\\", "System32", "\\", "WindowsPowerShell", "\\", "v1.0", "\\", ";", "C", ":", "\\", "Python34"], ["关闭", "终端", "窗口", "，", "再", "打开", "一个", "新", "的", "终端", "窗口", "。", "这", "将", "在", "终端", "会话", "中", "加载", "变量", "Path", " ", "的", "新值", "。", "现在", "当", "你", "执行命令", "python", " ", "--", "version", " ", "时", "，", "将", "看到", "刚才", "在", "变量", "Path", " ", "中", "设置", "的", "Python", "版", "\n", "本", "。", "现在", "，", "你", "只", "需", "在", "命令提示符", "下", "输入", "python", " ", "并", "按", "回车", "，", "就", "可", "启动", "Python", "终端", "会话", "了", "。", "\n", "A.4", "　", "\n", "　", "Python", "关键字", "和", "内置", "函数", "\n", "关键字", "和", "内置", "函数", "\n", "Python", "包含", "一系列", "关键字", "和", "内置", "函数", "，", "给", "变量", "命名", "时", "，", "知道", "这些", "关键字", "和", "内置", "函数", "很", "重要", "。", "编程", "中", "面临", "的", "一个", "挑战", "是", "给", "变量", "指定", "合适", "的", "名称", "，", "变量名", "可以", "是", "任何", "东西", "，", "只要", "它", "长短", "\n", "合适", "并", "描述", "了", "变量", "的", "作用", "。", "同时", "，", "不能", "将", "Python", "关键字", "用作", "变量名", "；", "也", "不应", "将", "Python", "内置", "函数", "的", "名称", "用作", "变量名", "，", "否则", "将", "覆盖", "相应", "的", "内置", "函数", "。", "\n", "本节", "将", "列出", "Python", "关键字", "和", "内置", "函数", "的", "名称", "，", "让", "你", "知道", "应", "避免", "使用", "哪些", "变量名", "。", "\n", "A.4", ".", "1", "　", "\n", "　", "Python", "关键字", "\n", "关键字", "\n", "下面", "的", "关键字", "都", "有", "特殊", "含义", "，", "如果", "你", "将", "它们", "用作", "变量名", "，", "将", "引发", "错误", "：", "\n", "False", "\n", "class", "\n", "finally", "\n", "is", "\n", "return", "\n", "None", "\n", "continue", "\n", "for", "\n", "lambda", "\n", "try", "\n", "True", "\n", "def", "\n", "from", "\n", "nonlocal", "\n", "while", "\n", "and", "\n", "del"], ["lambda", "\n", "try", "\n", "True", "\n", "def", "\n", "from", "\n", "nonlocal", "\n", "while", "\n", "and", "\n", "del", "\n", "global", "\n", "not", "\n", "with", "\n", "as", "\n", "elif", "\n", "if", "\n", "or", "\n", "yield", "\n", "assert", "\n", "else", "\n", "import", "\n", "pass", "\n", "break", "\n", "except", "\n", "in", "\n", "raise", "\n", "A.4", ".", "2", "　", "\n", "　", "Python", "内置", "函数", "\n", "内置", "函数", "\n", "将", "内置", "函数", "名", "用作", "变量名", "时", "，", "不会", "导致", "错误", "，", "但", "将", "覆盖", "这些", "函数", "的", "行为", "：", "\n", "abs", "(", ")", "\n", "divmod", "(", ")", "\n", "input", "(", ")", "\n", "open", "(", ")", "\n", "staticmethod", "(", ")", "\n", "all", "(", ")", "\n", "enumerate", "(", ")", "\n", "int", "(", ")", "\n", "ord", "(", ")", "\n", "str", "(", ")", "\n", "any", "(", ")", "\n", "eval", "(", ")", "\n", "isinstance", "(", ")", "\n", "pow", "(", ")", "\n", "sum", "(", ")", "\n", "basestring", "(", ")", "\n", "execfile", "(", ")", "\n", "issubclass", "(", ")", "\n", "print", "(", ")", "\n", "super", "(", ")", "\n", "bin", "(", ")", "\n", "file", "(", ")", "\n", "iter", "(", ")", "\n", "property", "(", ")", "\n", "tuple", "(", ")", "\n", "bool", "(", ")", "\n", "filter", "(", ")", "\n", "len", "(", ")", "\n", "range", "(", ")", "\n", "type", "(", ")", "\n", "bytearray", "(", ")", "\n", "float", "(", ")", "\n", "list", "(", ")", "\n", "raw", "_", "input", "(", ")", "\n", "unichr", "(", ")", "\n", "callable", "(", ")", "\n", "format", "(", ")", "\n", "locals", "(", ")"], ["raw", "_", "input", "(", ")", "\n", "unichr", "(", ")", "\n", "callable", "(", ")", "\n", "format", "(", ")", "\n", "locals", "(", ")", "\n", "reduce", "(", ")", "\n", "unicode", "(", ")", "\n", "chr", "(", ")", "\n", "frozenset", "(", ")", "\n", "long", "(", ")", "\n", "reload", "(", ")", "\n", "vars", "(", ")", "\n", "classmethod", "(", ")", "\n", "getattr", "(", ")", "\n", "map", "(", ")", "\n", "repr", "(", ")", "\n", "xrange", "(", ")", "\n", "cmp", "(", ")", "\n", "globals", "(", ")", "\n", "max", "(", ")", "\n", "reversed", "(", ")", "zip", "(", ")", "\n", "Zip", "(", ")", "\n", "compile", "(", ")", "\n", "hasattr", "(", ")", "\n", "memoryview", "(", ")", "\n", "round", "(", ")", "\n", "__", "import", "__", "(", ")", "\n", "complex", "(", ")", "\n", "hash", "(", ")", "\n", "min", "(", ")", "\n", "set", "(", ")", "\n", "apply", "(", ")", "\n", "delattr", "(", ")", "\n", "help", "(", ")", "\n", "next", "(", ")", "\n", "setattr", "(", ")", "\n", "buffer", "(", ")", "\n", "dict", "(", ")", "\n", "hex", "(", ")", "\n", "object", "(", ")", "\n", "slice", "(", ")", "\n", "coerce", "(", ")", "\n", "dir", "(", ")", "\n", "id", "(", ")", "\n", "oct", "(", ")", "\n", "sorted", "(", ")", "\n", "intern", "(", ")", "\n", "注意", "\n", "注意", " ", "　", "在", "Python", " ", "2.7", "中", "，", "print", " ", "是", "关键字", "而", "不是", "函数", "。", "另外", "，", "Python", " ", "3", "没有", "内置", "函数", "unicode", "(", ")", " ", "。", "这", "两个", "单词", "都", "不", "应用", "作", "变量名", "。", "\n", "附录", "\n", "附录", " ", "B", "　", "文本编辑", "器", "\n", "　", "文本编辑", "器"], ["程序员", "花", "大量", "时间", "来", "编写", "、", "阅读", "和", "编辑", "代码", "，", "因此", "使用", "的", "文本编辑", "器", "必须", "能够", "尽可能", "提高", "完成", "这种", "工作", "的", "效率", "。", "高效", "的", "编辑器", "应", "突出", "代码", "的", "结构", "，", "让你在", "编写", "代码", "时", "\n", "就", "能够", "发现", "常见", "的", "bug", "。", "它", "还", "应", "包含", "自动", "缩进", "功能", "、", "显示", "代码", "长度", "的", "标志", "以及", "用于", "执行", "常见", "操作", "的", "快捷键", "。", "\n", "如果", "你", "是", "编程", "新手", "，", "应", "使用", "具备", "上述", "功能", "但", "学习", "起来", "又", "不难", "的", "编辑器", "。", "另外", "，", "你", "最好", "对", "更", "高级", "的", "编辑器", "有所", "了解", "，", "这样", "就", "知道", "何时", "该", "考虑", "升级", "编辑器", "了", "。", "\n", "对于", "每种", "主要", "的", "操作系统", "，", "我们", "都", "将", "介绍", "一款", "符合", "上述", "条件", "的", "编辑器", "：", "使用", "Linux", "或", "Windows", "系统", "的", "初学者", "可", "使用", "Geany", "；", "使用", "OS", " ", "X", "的", "初学者", "可", "使用", "Sublime", " ", "Text", "（", "它", "在", "\n", "Linux", "和", "Windows", "系统", "中", "的", "效果", "也", "很", "好", "）", "。", "我们", "还", "将", "介绍", "Python", "自带", "的", "编辑器", "IDLE", "。", "最后", "，", "我们", "将", "介绍", "Emacs", "和", "vim", "，", "这是", "两款", "高级", "编辑器", "，", "随着", "你", "不断", "地", "学习", "编程", "，", "经常", "\n", "会", "听到", "有人", "提起", "它们", "。", "我们", "将", "把", "hello", "_", "world", ".", "py", "作为", "示例", "程序", "，", "在", "上述", "每款", "编辑器", "中", "运行", "它", "。", "\n", "B.1", "　", "\n", "　", "Geany", "\n", "Geany", "是", "一款", "简单", "的", "编辑器", "，", "你", "可以", "在", "其中", "直接", "运行", "几乎", "任何", "程序", "。", "它", "还", "在", "一个", "终端", "窗口", "中", "显示", "程序", "的", "输出", "，", "这", "有助于", "你", "逐渐", "习惯", "使用", "终端", "。", "\n", "B.1", ".", "1", "　", "在"], ["B.1", ".", "1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Geany", "\n", "在", "大多数", "Linux", "系统", "中", "，", "安装", "Geany", "只", "需", "一个", "命令", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "geany", "\n", "如果", "你", "的", "系统", "安装", "了", "多个", "版本", "的", "Python", "，", "就", "必须", "配置", "Geany", "，", "使", "其", "使用", "正确", "的", "版本", "。", "启动", "Geany", "，", "选择", "菜单", "File", " ", "▶", " ", "Save", " ", "As", "，", "将", "当前", "的", "空", "文件", "保存", "为", "hello", "_", "world", ".", "py", "，", "再", "在", "编辑", "窗口", "中输", "\n", "入", "下面", "一行", "代码", "：", "\n", "print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "选择", "菜单", "Build", " ", "▶", " ", "Set", " ", "Build", " ", "Commands", "，", "你", "将", "看到", "文字", "Compile", "和", "Execute", "，", "它们", "旁边", "都", "有", "一个", "命令", "。", "默认", "情况", "下", "，", "这", "两个", "命令", "都", "是", "python", " ", "，", "要", "让", "Geany", "使用", "命令", "python3", " ", "，", "必须", "做", "\n", "相应", "的", "修改", "。", "将", "编译", "命令", "修改", "成", "下面", "这样", "：", "\n", "python3", " ", "-", "m", " ", "py", "_", "compile", " ", "\"", "%", "f", "\"", "\n", "你", "必须", "完全", "按", "这里", "显示", "的", "这样", "输出", "这个", "命令", "，", "确保", "空格", "和", "大小写", "都", "完全相同", "。", "\n", "将", "执行命令", "修改", "成", "下面", "这样", "：", "\n", "python3", " ", "\"", "%", "f", "\"", "\n", "同样", "，", "务必", "确保", "空格", "和", "大小写", "都", "完全", "与", "显示", "的", "相同", "。", "\n", "B.1", ".", "2", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Geany"], ["B.1", ".", "2", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Geany", "\n", "要", "下载", "Windows", " ", "Greany", "安装程序", "，", "可", "访问", "http", ":", "/", "/", "geany", ".", "org", "/", " ", "，", "单击", "Download", "下", "的", "Releases", "，", "找到", "安装程序", "geany", "-", "1.25", "_", "setup", ".", "exe", "或", "类似", "的", "文件", "。", "下载安装", "程序", "后", "，", "运行", "它", "并", "接受", "所有", "的", "默认", "\n", "设置", "。", "\n", "启动", "Geany", "，", "选择", "菜单", "File", " ", "▶", " ", "Save", " ", "As", "，", "将", "当前", "的", "空", "文件", "保存", "为", "hello", "_", "world", ".", "py", "，", "再", "在", "编辑", "窗口", "中", "输入", "下面", "一行", "代码", "："], ["print", "(", "\"", "Hello", " ", "Python", " ", "world", "!", "\"", ")", "\n", "现在", "选择", "菜单", "Build", " ", "▶", " ", "Set", " ", "Build", " ", "Commands", "，", "你", "将", "看到", "文字", "Compile", "和", "Execute", "，", "它们", "旁边", "都", "有", "一个", "命令", "。", "默认", "情况", "下", "，", "这", "两个", "命令", "都", "是", "python", " ", "（", "全部", "小写", "）", "，", "但", "Geany", "不", "知道", "这个", "命", "\n", "令", "位于", "系统", "的", "什么", "地方", "。", "你", "需要", "添加", "启动", "终端", "会话", "时", "使用", "的", "路径", "（", "如果", "你", "按", "附录", "A", "描述", "的", "那样", "设置", "了", "变量", "Path", " ", "，", "可", "跳", "过", "这些", "步骤", "）", "。", "在", "编译", "命令", "和", "执行命令", "中", "，", "添加", "命", "\n", "令", "python", " ", "所在", "的", "驱动器", "和", "文件夹", "。", "编译", "命令", "应", "类似", "于", "下面", "这样", "：", "\n", "C", ":", "\\", "Python35", "\\", "python", " ", "-", "m", " ", "py", "_", "compile", " ", "\"", "%", "f", "\"", "\n", "在", "你", "的", "系统", "上", "，", "路径", "可能", "稍", "有", "不同", "，", "但", "你", "必须", "确保", "空格", "和", "大小写", "都", "与", "这里", "显示", "的", "完全相同", "。", "\n", "执行命令", "应", "类似", "于", "下面", "这样", "：", "\n", "C", ":", "\\", "Python35", "\\", "python", " ", "\"", "%", "f", "\"", "\n", "同样", "，", "务必", "确保", "空格", "和", "大小写", "都", "与", "这里", "显示", "的", "完全相同", "。", "正确", "地", "设置", "这些", "命令", "后", "，", "单击", "OK", "按钮", "。", "现在", "，", "你", "应该", "能够", "成功", "地", "运行", "程序", "了", "。", "\n", "B.1", ".", "3", "　", "在", "\n", "　", "在", "Geany", "中", "运行", "\n", "中", "运行", "Python", "程序", "\n", "程序"], ["B.1", ".", "3", "　", "在", "\n", "　", "在", "Geany", "中", "运行", "\n", "中", "运行", "Python", "程序", "\n", "程序", "\n", "在", "Geany", "中", "运行", "程序", "的", "方式", "有", "三种", "。", "为", "运行", "程序", "hello", "_", "world", ".", "py", "，", "可", "选择", "菜单", "Build", " ", "▶", " ", "Execute", "、", "单击", "由", "两个", "齿轮", "组成", "的", "图标", "或", "按", "F5", "。", "运行", "hello", "_", "world", ".", "py", "时", "，", "将", "弹出", "一个", "终端", "窗口", "，", "其中", "\n", "包含", "如下", "输出", "：", "\n", "Hello", " ", "Python", " ", "world", "!", "\n", "------------------", "\n", "(", "program", " ", "exited", " ", "with", " ", "code", ":", " ", "0", ")", "\n", "Press", " ", "return", " ", "to", " ", "continue", "\n", "B.1", ".", "4", "　", "定制", "\n", "　", "定制", "Geany", "的", "设置", "\n", "的", "设置", "\n", "下面", "来", "定制", "本", "附录", "开头", "提到", "的", "功能", "，", "尽可能", "提高", "Geany", "的", "效率", "。", "\n", "1", ".", " ", "将", "制表符", "转换", "为", "空格", "\n", "将", "制表符", "转换", "为", "空格", "\n", "在", "代码", "中", "混合", "使用", "制表符", "和", "空格", "可能", "会", "给", "Python", "程序", "带来", "极难", "诊断", "的", "问题", "。", "为", "在", "Geany", "中", "查看", "缩进", "设置", "，", "选择", "菜单", "Edit", " ", "▶", " ", "Preferences", "，", "再", "依次", "单击", "Editor", "和", "Indentation", "。", "将", "制表符", "宽度", "\n", "设置", "为", "4", "，", "并", "将", "Type", "设置", "为", "Spaces", "。"], ["设置", "为", "4", "，", "并", "将", "Type", "设置", "为", "Spaces", "。", "\n", "如果", "你", "在", "程序", "中", "混合", "使用", "了", "标识符", "和", "空格", "，", "可", "选择", "菜单", "Document", " ", "▶", " ", "Replace", " ", "Tabs", " ", "by", " ", "Spaces", "（", "“", "替换", "制表符", "为", "空格", "”", "）", "，", "将", "所有", "制表符", "都", "转换", "为", "空格", "。", "\n", "2", ".", " ", "设置", "行长", "标志", "\n", "设置", "行长", "标志", "\n", "在", "大多数", "编辑器", "中", "，", "都", "可", "设置", "视觉", "线索", "（", "通常", "是", "一条", "竖线", "）", "，", "来", "指出", "代码", "行应", "在", "什么", "地方", "结束", "。", "要", "在", "Geany", "中", "设置", "这项", "功能", "，", "请", "选择", "菜单", "Edit", " ", "▶", " ", "Preferences", "，", "再", "依次", "单击", "Editor", "和", "\n", "Display", "，", "确保", "启用", "了", "长行", "标志", "，", "再", "确保", "文本框", "“", "列", "”", "中", "的", "值", "为", "79", "。", "\n", "3", ".", " ", "缩进", "和", "撤销", "缩进", "代码", "块", "\n", "缩进", "和", "撤销", "缩进", "代码", "块", "\n", "要", "缩进", "代码", "块", "，", "可", "选择", "它", "，", "再", "选择", "菜单", "Edit", " ", "▶", " ", "Format", " ", "▶", " ", "Increase", " ", "Indent", "，", "也", "可", "按", "Ctrl", " ", "+", " ", "I", "。", "要", "撤销", "代码", "块", "缩进", "，", "可", "选择", "菜单", "Edit", " ", "▶", " ", "Format", " ", "▶", " ", "Decrease", " ", "Indent", "，", "也", "可", "按", "Ctrl", " ", "+", " ", "U", "。", "\n", "4", ".", " ", "将", "代码", "块", "注释", "掉", "\n", "将", "代码", "块", "注释", "掉"], ["4", ".", " ", "将", "代码", "块", "注释", "掉", "\n", "将", "代码", "块", "注释", "掉", "\n", "要", "暂时", "禁用", "一个", "代码", "块", "，", "可", "选择", "它", "，", "并", "将", "它", "注释", "掉", "，", "这样", "Python", "将", "忽略", "它", "。", "为此", "，", "可", "选择", "菜单", "Edit", " ", "▶", " ", "Format", " ", "▶", " ", "Toggle", " ", "Line", " ", "Commentation", "，", "也", "可", "按", "Ctrl", " ", "+", " ", "E", "。", "选择", "的", "代码", "将", "被", "注释", "掉", "，", "\n", "并", "使用", "特殊字符", "序列", "#", "~", " ", "指出", "这", "不是", "常规", "注释", "。", "要", "对", "代码", "块", "取消", "注释", "，", "可", "选择", "它", "，", "并", "再次", "选择", "前述", "菜单", "。", "\n", "B.2", "　", "\n", "　", "Sublime", " ", "Text", "\n", "Sublime", " ", "Text", "是", "一款", "简单", "的", "文本编辑", "器", "，", "它", "在", "OS", " ", "X", "（", "及其", "他", "系统", "）", "中", "易于", "安装", "，", "让", "你", "能够", "直接", "运行", "几乎", "所有", "程序", "。", "它", "还", "能", "在内", "嵌", "在", "Sublime", " ", "Text", "窗口", "内", "的", "终端", "会话", "中", "运行", "代码", "，", "让", "你", "\n", "能够", "轻松", "地", "查看", "输出", "。", "\n", "Sublime", " ", "Text", "的", "许可", "策略", "非常灵活", "，", "你", "可以", "永久", "地", "免费", "使用", "这", "款", "编辑器", "，", "但", "如果", "你", "喜欢", "它", "并", "想", "长期", "使用", "，", "作者", "建议", "你", "购买", "许可证", "。", "我们", "将", "下载", "Sublime", " ", "Text", " ", "3", "—", "—", "编写", "本书", "时", "的", "最新版", "\n", "本", "。", "\n", "B.2", ".", "1", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Sublime", " ", "Text"], ["本", "。", "\n", "B.2", ".", "1", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Sublime", " ", "Text", "\n", "要", "下载", "Sublime", " ", "Text", "安装程序", "，", "可", "访问", "http", ":", "/", "/", "sublimetext", ".", "com", "/", "3", " ", "，", "单击", "链接", "Download", "，", "并", "查找", "OS", " ", "X", "安装程序", "。", "下载安装", "程序", "后", "，", "打开", "它", "，", "再", "将", "Sublime", " ", "Text", "图标", "拖", "放到", "文件夹", "\n", "Applications", "。", "\n", "B.2", ".", "2", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Sublime", " ", "Text", "\n", "在", "大多数", "Linux", "系统", "中", "，", "安装", "Sublime", " ", "Text", "的", "最", "简单", "方式", "是", "通过", "终端", "会话", "，", "如下", "所示", "：", "\n", "$", " ", "sudo", " ", "add", "-", "apt", "-", "repository", " ", "ppa", ":", "webupd8team", "/", "sublime", "-", "text", "-", "3", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "update", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "sublime", "-", "text", "-", "installer", "\n", "B.2", ".", "3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Sublime", " ", "Text", "\n", "从", "http", ":", "/", "/", "www", ".", "sublimetext", ".", "com", "/", "3", " ", "下载", "Windows", "安装程序", "。", "运行", "这个", "安装程序", "，", "你", "将", "在", "开始菜单", "中", "看到", "Sublime", " ", "Text", "。", "\n", "B.2", ".", "4", "　", "在"], ["B.2", ".", "4", "　", "在", "\n", "　", "在", "Sublime", " ", "Text", "中", "运行", "\n", "中", "运行", "Python", "程序", "\n", "程序", "\n", "如果", "你", "使用", "的", "是", "系统", "自带", "的", "Python", "版本", "，", "可能", "无需", "调整", "任何", "设置", "就", "能", "运行", "程序", "。", "要", "运行", "程序", "，", "可", "选择", "菜单", "Tools", " ", "▶", " ", "Build", "或", "按", "Ctrl", " ", "+", " ", "B", "。", "运行", "hello", "_", "world", ".", "py", "时", "，", "你", "将", "在", "Sublime", " ", "Text", "窗口", "\n", "的", "底部", "看到", "一个", "终端", "屏幕", "，", "其中", "包含", "如下", "输出", "："], ["Hello", " ", "Python", " ", "world", "!", "\n", "[", "Finished", " ", "in", " ", "0.1", "s", "]", "\n", "B.2", ".", "5", "　", "配置", "\n", "　", "配置", "Sublime", " ", "Text", "\n", "如果", "你", "安装", "了", "多个", "Python", "版本", "或者", "Sublime", " ", "Text", "不能", "自动", "运行", "程序", "，", "你", "可能", "需要", "设置", "一个", "配置文件", "。", "你", "首先", "需要", "知道", "Python", "解释器", "的", "完整", "路径", "，", "为此", "，", "在", "Linux", "或", "OS", " ", "X", "系统", "中", "执行", "如下", "\n", "命令", "：", "\n", "$", " ", "type", " ", "-", "a", " ", "python3", "\n", "python3", " ", "is", " ", "/", "usr", "/", "local", "/", "bin", "/", "python3", "\n", "请", "将", "python3", " ", "替换", "为", "你", "启动", "终端", "会话", "时", "使用", "的", "命令", "。", "\n", "如果", "你", "使用", "的", "是", "Windows", "系统", "，", "要", "获悉", "Python", "解释器", "的", "路径", "，", "请参阅", "“", "在", "Windows", "系统", "中", "安装", "Python", " ", "3", "”", "一节", "。", "\n", "现在", "，", "启动", "Sublime", " ", "Text", "，", "并", "选择", "菜单", "Tools", " ", "▶", " ", "Build", " ", "System", " ", "▶", " ", "New", " ", "Build", " ", "System", "，", "这", "将", "打开", "一个", "新", "的", "配置文件", "。", "删除", "其中", "的", "所有", "内容", "，", "再", "输入", "如下", "内容", "：", "\n", "Python3", " ", ".", "sublime", "-", "build", "\n", "{", "\n", " ", " ", " ", " ", "\"", "cmd", "\"", ":", " ", "[", "\"", "/", "usr", "/", "local", "/", "bin", "/", "python3", "\"", ",", " ", "\"", "-", "u", "\"", ",", " ", "\"", "$", "file", "\"", "]", ",", "\n", "}"], ["}", "\n", "这些", "代码", "让", "Sublime", " ", "Text", "使用", "命令", "python3", " ", "来", "运行", "当前", "打开", "的", "文件", "。", "请", "确保", "其中", "的", "路径", "为", "你", "在", "前", "一步", "获悉", "的", "路径", "（", "在", "Windows", "系统", "中", "，", "该", "路径", "类似", "于", "C", ":", "/", "Python35", "/", "python", "\n", "）", "。", "将", "这个", "配置文件", "命名", "为", "Python3", ".", "sublime", "-", "build", "，", "并", "将", "其", "保存", "到", "默认", "目录", "—", "—", "选择", "菜单", "Save", "时", "Sublime", " ", "Text", "打开", "的", "目录", "。", "\n", "打开", "hello", "_", "world", ".", "py", "，", "选择", "菜单", "Tools", " ", "▶", " ", "Build", " ", "System", " ", "▶", " ", "Python3", "，", "再", "选择", "菜单", "Tools", " ", "▶", " ", "Build", "，", "你", "将", "在内", "嵌", "在", "Sublime", " ", "Text", "窗口", "底部", "的", "终端", "中", "看到", "输出", "。", "\n", "B.2", ".", "6", "　", "定制", "\n", "　", "定制", "Sublime", " ", "Text", "的", "设置", "\n", "的", "设置", "\n", "下面", "来", "定制", "本", "附录", "开头", "提到", "的", "功能", "，", "以", "尽可能", "提高", "Sublime", " ", "Text", "的", "效率", "。", "\n", "1", ".", " ", "将", "制表符", "转换", "为", "空格", "\n", "将", "制表符", "转换", "为", "空格", "\n", "选择", "菜单", "View", " ", "▶", " ", "Indentation", "，", "核实", "选择", "了", "复选框", "Indent", " ", "Using", " ", "Spaces", "。", "如果", "没有", "选择", "该", "复选框", "，", "现在", "选择", "它", "。", "\n", "2", ".", " ", "设置", "行长", "标志", "\n", "设置", "行长", "标志", "\n", "选择", "菜单", "View", " ", "▶", " ", "Ruler", "，", "再", "单击", "80", "，", "Sublime", " ", "Text", "将", "在", "这个", "80", "字符", "标志", "处", "放置", "一条", "竖线", "。"], ["3", ".", " ", "缩进", "和", "取消", "缩进", "代码", "块", "\n", "缩进", "和", "取消", "缩进", "代码", "块", "\n", "要", "缩进", "代码", "块", "，", "可", "选择", "它", "，", "再", "选择", "菜单", "Edit", " ", "▶", " ", "Line", " ", "▶", " ", "Indent", "或", "按", "Ctrl", " ", "+", " ", "]", "。", "要", "取消", "缩进", "代码", "块", "，", "可", "选择", "菜单", "Edit", " ", "▶", " ", "Line", " ", "▶", " ", "Unindent", "或", "按", "Ctrl", " ", "+", " ", "[", "。", "\n", "4", ".", " ", "将", "代码", "块", "注释", "掉", "\n", "将", "代码", "块", "注释", "掉", "\n", "要", "将", "代码", "块", "注释", "掉", "，", "可", "选择", "它", "，", "再", "选择", "菜单", "Edit", " ", "▶", " ", "Comment", " ", "▶", " ", "Toggle", " ", "Comment", "或", "按", "Ctrl", " ", "+", " ", "/", "。", "要", "取消", "代码", "块", "注释", "，", "再次", "执行", "这个", "命令", "。", "\n", "B.3", "　", "\n", "　", "IDLE", "\n", "IDLE", "是", "Python", "的", "默认", "编辑器", "，", "相比", "于", "Geany", "和", "Sublime", " ", "Text", "，", "它", "不", "那么", "直观", "，", "但", "其他", "教程", "指出", "它", "适合", "初学者", "使用", "，", "因此", "你", "不妨", "试一试", "。", "\n", "B.3", ".", "1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "IDLE", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "3", "，", "请", "像", "下面", "这样", "安装", "idle3", " ", "包", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "idle3", "\n", "如果", "你", "使用", "的", "是", "Python", " ", "2", "，", "请", "像", "下面", "这样", "安装", "idle", " ", "包", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "idle", "\n", "B.3", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "IDLE"], ["B.3", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "IDLE", "\n", "如果", "你", "的", "Python", "是", "使用", "Homebrew", "安装", "的", "，", "那么", "可能", "已经", "安装", "了", "IDLE", "。", "在", "终端", "中", "，", "执行命令", "brew", " ", "linkapps", " ", "，", "它", "告诉", "IDLE", "如何", "在", "系统", "中", "查找", "正确", "的", "Python", "解释器", "。", "随后", "，", "你", "会", "在", "\n", "文件夹", "Applications", "中", "看到", "IDLE", "。", "\n", "如果", "你", "的", "Python", "不是", "使用", "Homebrew", "安装", "的", "，", "请", "访问", "https", ":", "/", "/", "www", ".", "python", ".", "org", "/", "download", "/", "mac", "/", "tcltk", "/", " ", "，", "并", "按", "这里", "的", "说明", "做", "。", "你", "还", "需", "安装", "IDLE", "依赖", "的", "一些", "图形", "包", "。", "\n", "B.3", ".", "3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "IDLE", "\n", "你", "安装", "Python", "时", "，", "应该", "自动", "安装", "了", "IDLE", "，", "因此", "它", "应该", "包含", "在", "开始菜单", "中", "。", "\n", "B.3", ".", "4", "　", "定制", "\n", "　", "定制", "IDLE", "的", "设置", "\n", "的", "设置", "\n", "由于", "IDLE", "是", "默认", "的", "Python", "编辑器", "，", "因此", "它", "的", "大多数", "设置", "都", "被", "设置", "为", "推荐", "的", "Python", "设置", "：", "将", "制表符", "自动", "转换", "为", "空格", "；", "行长", "标志", "出现", "在", "80", "字符", "处", "。", "\n", "1", ".", " ", "缩进", "和", "取消", "缩进", "代码", "块", "\n", "缩进", "和", "取消", "缩进", "代码", "块"], ["1", ".", " ", "缩进", "和", "取消", "缩进", "代码", "块", "\n", "缩进", "和", "取消", "缩进", "代码", "块", "\n", "要", "缩进", "代码", "块", "，", "可", "选择", "它", "，", "再", "选择", "菜单", "Format", " ", "▶", " ", "Indent", " ", "Region", "或", "按", "Ctrl", " ", "+", " ", "]", "；", "要", "取消", "代码", "块", "缩进", "，", "可", "选择", "菜单", "Format", " ", "▶", " ", "Dedent", " ", "Region", "或", "按", "Ctrl", " ", "+", " ", "[", "。", "\n", "2", ".", " ", "将", "代码", "块", "注释", "掉", "\n", "将", "代码", "块", "注释", "掉"], ["要", "将", "代码", "块", "注释", "掉", "，", "可", "选择", "它", "，", "再", "选择", "菜单", "Format", " ", "▶", " ", "Comment", " ", "Out", " ", "Region", "或", "按", "Alt", " ", "+", " ", "3", "。", "要", "取消", "代码", "块", "注释", "，", "可", "选择", "菜单", "Format", " ", "▶", " ", "Uncomment", " ", "Region", "或", "按", "Alt", " ", "+", " ", "4", "。", "\n", "B.4", "　", "\n", "　", "Emacs", "和", "\n", "和", "vim", "\n", "Emacs", "和", "vim", "是", "两款", "流行", "的", "编辑器", "，", "深受", "众多", "经验丰富", "的", "程序员", "的", "喜爱", "，", "因为", "使用", "它们", "时", "，", "用户", "根本", "不用", "离开", "键盘", "。", "因此", "，", "学会", "使用", "这些", "编辑器", "后", "，", "编写", "、", "阅读", "和", "编辑", "代码", "的", "效率", "\n", "将", "极", "高", "；", "这", "也", "意味着", "学习", "使用", "它们", "的", "难度", "极大", "。", "\n", "程序员", "通常", "会", "推荐", "你", "试一试", "，", "但", "很多", "熟练", "的", "程序员", "忘", "了", "编程", "新手", "尝试", "学习", "使用", "它们", "将", "花费", "很多", "时间", "。", "知道", "这些", "编辑器", "是", "有益", "的", "，", "但", "请", "先", "使用", "简单", "的", "编辑器", "，", "它们", "让", "你", "能够", "专注", "于", "\n", "学习", "编程", "，", "而", "不是", "费时间", "去", "学习", "如何", "使用", "编辑器", "。", "等", "你", "能够", "熟悉", "地", "编写", "和", "编辑", "代码", "后", "，", "再", "去", "使用", "这些", "编辑器", "吧", "。", "\n", "附录", "\n", "附录", " ", "C", "　", "寻求", "帮助", "\n", "　", "寻求", "帮助", "\n", "每个", "人", "学习", "编程", "时", "都", "会", "遇到困难", "，", "因此", "作为", "程序员", "，", "需要", "学习", "的", "最", "重要", "的", "技能", "之一", "是", "如何", "高效", "地", "摆脱困境", "。", "这个", "附录", "简要地", "介绍", "几种", "方法", "，", "以", "帮助", "你", "摆脱", "编程", "困境", "。", "\n", "C.1", "　", "第一步", "\n", "　", "第一步", "\n", "陷入困境", "后", "，", "首先", "需要", "判断", "形势", "。", "你", "必须", "能够", "明确", "地", "回答", "如下", "三个", "问题", "，", "才", "能够", "从", "他人", "那里", "获得", "帮助", "。"], ["陷入困境", "后", "，", "首先", "需要", "判断", "形势", "。", "你", "必须", "能够", "明确", "地", "回答", "如下", "三个", "问题", "，", "才", "能够", "从", "他人", "那里", "获得", "帮助", "。", "\n", "你", "想要", "做", "什么", "？", "\n", "你", "已", "尝试", "哪些", "方式", "？", "\n", "结果", "如何", "？", "\n", "答案", "应", "尽可能", "具体", "。", "对于", "第一个", "问题", "，", "像", "“", "我要", "在", "我", "的", "Windows", " ", "10", "计算机上安装", "最新", "版本", "的", "Python", " ", "3", "”", "这样", "明确", "的", "陈述", "足够", "详细", "，", "让", "Python", "社区", "的", "其他", "人员", "能够", "施以援", "手", "；", "而", "像", "“", "我要", "\n", "安装", "Python", "”", "这样", "的", "陈述", "没有", "提供", "足够", "的", "信息", "，", "别人", "无法", "提供", "太多", "的", "帮助", "。", "\n", "对于", "第二个", "问题", "，", "你", "的", "答案", "应", "提供", "足够", "多", "的", "细节", "，", "这样", "别人", "就", "不会", "建议", "你", "去", "重复", "已经", "尝试", "过", "的", "方式", "：", "相比", "于", "“", "我", "访问", "Python", "网站", "，", "并", "下载", "了", "一个", "安装程序", "”", "，", "“", "我访", "\n", "问", "http", ":", "/", "/", "python", ".", "org", "/", "downloads", "/", " ", "，", "并", "单击", "Python", " ", "3", "的", "Download", "按钮", "，", "再", "运行", "这个", "安装程序", "”", "提供", "的", "信息", "更", "详细", "。", "\n", "对于", "最后", "一个", "问题", "，", "知道", "准确", "的", "错误", "消息", "对", "在线", "搜索", "解决方案", "或", "寻求", "帮助", "很", "有用", "。", "\n", "有时候", "，", "通过", "回答", "这", "三个", "问题", "，", "你", "会", "发现", "遗漏", "了", "什么", "，", "从而", "无需", "再", "做", "其他", "的", "事情", "就", "能", "摆脱困境", "。", "程序员", "甚至", "给", "这种", "情形", "提供", "了", "一个", "名称", "，", "称之为", "橡皮", "鸭子", "调试", "法", "。", "如果", "你", "向", "一只"], ["橡皮", "鸭子", "（", "或", "任何", "无", "生命", "的", "东西", "）", "清楚", "地", "阐述", "自己", "的", "处境", "，", "并", "向", "它", "提出", "具体", "的", "问题", "，", "你", "常常", "能够", "回答", "这个", "问题", "。", "有些", "编程", "公司", "甚至", "在", "办公室", "放置", "一个", "橡皮", "鸭子", "，", "旨在", "鼓励", "程序", "\n", "员", "“", "与", "这", "只", "鸭子", "交流", "”", "。", "\n", "C.1", ".", "1", "　", "再", "试试", "\n", "　", "再", "试试", "\n", "只", "需", "回过", "头去", "重新", "来", "一次", "，", "就", "足以", "解决", "很多", "问题", "。", "假设", "你", "正", "模仿", "本书", "的", "示例", "编写", "一个", "for", " ", "循环", "，", "你", "可能", "遗漏", "了", "某种", "简单", "的", "东西", "，", "如", "for", " ", "语句", "末尾", "的", "冒号", "。", "再试一次", "可能", "就", "会", "帮助", "\n", "你", "避免", "重复", "同样", "的", "错误", "。", "\n", "C.1", ".", "2", "　", "歇", "一会儿", "\n", "　", "歇", "一会儿", "\n", "如果", "你", "很", "长时间", "内", "一直", "在", "试图", "解决", "同一个", "问题", "，", "那么", "休息", "一会儿", "实际上", "是", "你", "可", "采取", "的", "最佳", "战术", "。", "长时间", "从事", "一个", "任务", "时", "，", "你", "可能", "变得", "一根", "筋", "，", "脑子里", "想", "的", "都", "是", "一个", "解决方案", "。", "你", "\n", "对", "所", "做", "的", "假设", "往往", "会", "视而不见", "，", "而", "休息", "一会儿", "有助于", "你", "从", "不同", "的", "角度看", "问题", "。", "不用", "休息", "很", "长时间", "，", "只", "需", "让", "你", "能够", "摆脱", "当前", "的", "思维", "方式", "就行", "。", "如果", "你", "坐", "了", "很", "长时间", "，", "起来", "做做", "运", "\n", "动", "。", "溜达", "溜达", "或", "去", "外面", "待", "一会儿", "，", "也", "可以", "喝", "杯水", "，", "或者", "吃点", "清淡", "而", "健康", "的", "零食", "。", "\n", "如果", "你", "心情", "沮丧", "，", "也许", "该", "将", "工作", "放到", "一边", "，", "整天", "都", "不", "考虑", "了", "。", "晚上", "睡个", "好", "觉后", "，", "你", "常常", "会", "发现", "问题", "并", "不是", "那么", "难", "解决", "。", "\n", "C.1", ".", "3", "　", "参考", "本书", "的", "在线", "资源", "\n", "　", "参考", "本书", "的", "在线", "资源"], ["C.1", ".", "3", "　", "参考", "本书", "的", "在线", "资源", "\n", "　", "参考", "本书", "的", "在线", "资源", "\n", "本书", "通过", "https", ":", "/", "/", "www", ".", "nostarch", ".", "com", "/", "pythoncrashcourse", "/", " ", "提供", "了", "配套", "的", "在线", "资源", "，", "其中", "包含", "大量", "有用", "的", "信息", "，", "比如", "如何", "设置", "系统", "以及", "如何", "解决", "每章", "可能", "遇到", "的", "难题", "。", "如果", "你", "还", "没有", "查看", "\n", "这些", "资源", "，", "现在", "就", "去", "查看", "吧", "，", "看看", "它们", "能否", "提供", "帮助", "。"], ["C.2", "　", "在线", "搜索", "\n", "　", "在线", "搜索", "\n", "很", "可能", "有人", "以前", "遇到", "过", "你", "面临", "的", "问题", "，", "并", "在", "网上", "发表", "了", "相关", "的", "文章", "。", "良好", "的", "搜索", "技能", "和", "具体", "的", "关键字", "有助于", "你", "找到", "现有", "的", "资源", "，", "供", "你", "用来", "解决", "当前", "面临", "的", "问题", "。", "例如", "，", "如果", "你", "无", "\n", "法在", "使用", "Windows", " ", "10", "的", "计算机上安装", "Python", " ", "3", "，", "那么", "搜索", "“", "python", " ", "3", " ", "windows", " ", "10", "”", "可能", "会", "让", "你", "马上", "找到", "解决问题", "的", "方案", "。", "\n", "搜索", "计算机", "显示", "的", "错误", "消息", "也", "极", "有", "帮助", "。", "例如", "，", "假设", "你", "试图", "启动", "Python", "终端", "会话", "时", "出现", "了", "如下", "错误", "消息", "：", "\n", ">", " ", "python", "\n", "'", "python", "'", " ", "is", " ", "not", " ", "recognized", " ", "as", " ", "an", " ", "internal", " ", "or", " ", "external", " ", "command", "\n", ">", "\n", "通过", "搜索", "完整", "的", "错误", "消息", "“", "python", " ", "is", " ", "not", " ", "recognized", " ", "as", " ", "an", " ", "internal", " ", "or", " ", "external", " ", "command", " ", "”", "，", "也许", "能", "得到", "不错", "的", "建议", "。", "\n", "当", "你", "搜索", "与", "编程", "相关", "的", "主题", "时", "，", "有", "几个", "网站", "会", "反复", "出现", "。", "下面", "简要地", "介绍", "一下", "这些", "网站", "，", "让", "你", "知道", "它们", "可能", "提供", "什么样", "的", "帮助", "。", "\n", "C.2", ".", "1", "　", "\n", "　", "Stack", " ", "Overflow"], ["C.2", ".", "1", "　", "\n", "　", "Stack", " ", "Overflow", "\n", "Stack", " ", "Overflow", "（", "http", ":", "/", "/", "stackoverflow", ".", "com", "/", " ", "）", "是", "最受", "程序员", "欢迎", "的", "问答", "网站", "之一", "，", "当", "你", "执行", "与", "Python", "相关", "的", "搜索", "时", "，", "它", "常常", "会", "出现", "在", "第一个", "结果", "页", "中", "。", "其", "成员", "在", "陷入困境", "时", "提出", "问题", "，", "\n", "其他", "成员", "努力", "提供", "有", "帮助", "的", "答案", "。", "用户", "可", "推荐", "他", "认为", "最有", "帮助", "的", "答案", "，", "因此", "前", "几个", "答案", "通常", "就是", "最佳答案", "。", "\n", "对于", "很多", "基本", "的", "Python", "问题", "，", "Stack", " ", "Overflow", "都", "有", "非常", "明确", "的", "答案", "，", "因为", "这个", "社区", "在", "不断改进", "。", "它", "鼓励", "用户", "发布", "更新", "的", "帖子", "，", "因此", "这里", "的", "答案", "通常", "与时俱进", "。", "编写", "本书", "时", "，", "Stack", "\n", "Overflow", "回答", "的", "与", "Python", "相关", "的", "问题", "超过", "了", "400", " ", "000", "个", "。", "\n", "C.2", ".", "2", "　", "\n", "　", "Python", "官方", "文档", "\n", "官方", "文档", "\n", "对", "初学者", "来说", "，", "Python", "官方", "文档", "（", "http", ":", "/", "/", "docs", ".", "python", ".", "org", "/", " ", "）", "显得", "有点", "漫不经心", "，", "因为", "其", "主要", "目的", "是", "阐述", "这门", "语言", "，", "而", "不是", "进行", "解释", "。", "官方", "文档", "中", "的", "示例", "应该", "很", "有用", "，", "但", "你", "也许", "不能", "完", "\n", "全", "弄懂", "。", "虽然", "如此", "，", "这", "还是", "一个", "不错", "的", "资源", "，", "如果", "它", "出现", "在", "搜索", "结果", "中", "，", "就", "值得", "你", "去", "参考", "；", "另外", "，", "随着", "你", "对", "Python", "的", "认识", "越来越", "深入", "，", "这个", "资源", "的", "用处", "将", "越来越", "大", "。"], ["C.2", ".", "3", "　", "官方", "库", "文档", "\n", "　", "官方", "库", "文档", "\n", "如果", "你", "使用", "了", "库", "，", "如", "Pygame", "、", "matplotlib", "、", "Django", "等", "，", "搜索", "结果", "中", "通常", "会", "包含", "到", "其", "官方", "文档", "的", "链接", "，", "例如", "，", "http", ":", "/", "/", "docs", ".", "djangoproject", ".", "com", "/", " ", "就", "很", "有用", "。", "如果", "你", "要", "使用", "这些", "库", "，", "最好", "熟悉", "其", "\n", "官方", "文档", "。", "\n", "C.2", ".", "4", "　", "\n", "　", "r", "/", "learnpython", "\n", "Reddit", "包含", "很多", "子", "论坛", "，", "这些", "子", "论坛", "被", "称为", "subreddit", "，", "其中", "的", "r", "/", "learnpython", "（", "http", ":", "/", "/", "reddit", ".", "com", "/", "r", "/", "learnpython", "/", " ", "）", "非常", "活跃", "，", "提供", "的", "信息", "也", "很", "有", "帮助", "。", "你", "可以", "在", "这里", "阅读", "其他人", "提出", "的", "问", "\n", "题", "，", "也", "可", "提出", "自己", "的", "问题", "。", "\n", "C.2", ".", "5", "　", "博客", "\n", "　", "博客", "\n", "很多", "程序员", "都", "有", "博客", "，", "旨在", "与", "人", "分享", "针对", "其", "使用", "的", "语言", "部分", "撰写", "的", "帖子", "。", "接受", "博客", "文章", "提供", "的", "建议", "前", "，", "你", "应", "大致", "浏览", "一下", "前", "几个", "评论", "，", "看看", "其他人", "的", "反应", "。", "如果", "文章", "没有", "任何", "评", "\n", "论", "，", "请", "对", "其持", "保留", "态度", "—", "—", "它", "提供", "的", "建议", "可能", "还", "没有", "人", "验证", "过", "。", "\n", "C.3", "　", "\n", "　", "IRC", "\n", "程序员", "通过", "IRC", "（", "Internet", " ", "Relay", " ", "Chat", "）", "实时", "地", "交流", "。", "如果", "你", "被", "问题", "困住", "，", "那么", "在", "网上", "搜索", "也", "找", "不到", "答案", "，", "那么", "在", "相关", "的", "IRC", "频道", "（", "channel", "）", "中", "寻求", "帮助", "可能", "是", "最佳", "选择", "。", "出没", "在", "这些"], ["频道", "中", "的", "人大", "多", "彬彬有礼", "、", "乐于助人", "，", "在", "你", "能够", "详细", "地", "描述", "你", "想", "做", "什么", "、", "尝试", "了", "哪些", "方法", "以及", "这些", "方法", "的", "结果", "时", "尤其", "如此", "。", "\n", "C.3", ".", "1", "　", "创建", "\n", "　", "创建", "IRC", "账户", "\n", "账户", "\n", "要", "建立", "IRC", "账户", "，", "请", "访问", "http", ":", "/", "/", "webchat", ".", "freenode", ".", "net", "/", " ", "，", "选择", "一个", "昵称", "，", "输入", "验证码", "，", "再", "单击", "Connect", "。", "你", "将", "看到", "一条", "消息", "，", "欢迎", "你", "访问", "freenode", " ", "IRC", "服务器", "。", "在", "窗口", "底部", "的", "方框", "中", "，", "输", "\n", "入", "如下", "命令", "：", "\n", "/", "msg", " ", "nickserv", " ", "register", " ", "password", " ", "email", "\n", "请", "将", "其中", "的", "password", " ", "和", "email", " ", "替换", "为", "你", "的", "密码", "和", "电子邮件", "地址", "。", "请", "选择", "一个", "不", "用于", "其他", "账户", "的", "简单", "密码", "，", "这个", "密码", "不会", "以", "安全", "的", "方式", "传输", "，", "因此", "根本", "不要", "试图", "去", "创建", "安全", "的", "密", "\n", "码", "。", "你", "将", "收到", "一封", "邮件", "，", "其中", "包含", "有关", "如何", "验证", "账户", "的", "说明", "。", "这封", "邮件", "将", "向", "你", "提供", "一个", "类似", "于", "下面", "的", "命令", "：", "\n", "/", "msg", " ", "nickserv", " ", "verify", " ", "register", " ", "nickname", " ", "verification", "_", "code", "\n", "将", "这", "一行", "粘贴", "到", "IRC", "网站", "，", "将", "其中", "的", "nickname", " ", "替换", "为", "你", "在", "前面", "选择", "的", "昵称", "，", "并", "将", "verification", "_", "code", " ", "替换", "为", "你", "看到", "的", "验证码", "。", "现在", "，", "你", "就", "可以", "加入", "频道", "了", "。"], ["C.3", ".", "2", "　", "加入", "频道", "\n", "　", "加入", "频道", "\n", "要", "加入", "Python", "主", "频道", "，", "可", "在", "输入框", "中", "输入", "/", "join", " ", "#", "python", "，", "你", "将", "看到", "一条", "确认", "消息", "，", "指出", "你", "加入", "了", "该", "频道", "，", "还", "将", "看到", "有关", "该", "频道", "的", "简介", "。", "\n", "频道", "##", "learnpython", "（", "两个", "井号", "）", "也", "非常", "活跃", "。", "这个", "频道", "与", "http", ":", "/", "/", "reddit", ".", "com", "/", "r", "/", "learnpython", "/", " ", "相关联", "，", "因此", "你", "在", "其中", "也", "将", "看到", "有关", "r", "/", "learnpython", "上", "发表", "的", "帖子", "的", "消息", "。", "频道", "#", "pyladies", "专注", "于支", "\n", "持", "学习", "Python", "的", "女性", "和", "女性", "程序员", "拥", "趸", "。", "如果", "你", "正在", "开发", "Web", "应用程序", "，", "可能", "想", "加入", "频道", "#", "django", "。", "\n", "加入", "频道", "后", "，", "就", "可", "看到", "其他人", "的", "交流", "，", "还", "可", "提出", "问题", "。", "\n", "C.3", ".", "3", "　", "\n", "　", "IRC", "文化", "\n", "文化", "\n", "要", "获得", "有效", "的", "帮助", "，", "你", "需要", "知道", "一些", "有关", "IRC", "文化", "的", "细节", "。", "将", "重点", "放在", "这个", "附录", "开头", "所说", "的", "三个", "问题", "，", "无疑", "有助于", "获得", "可行", "的", "解决方案", "。", "如果", "你", "能", "准确", "地", "阐述", "你", "要", "做", "什么", "、", "尝试", "了", "\n", "哪些", "方法", "以及", "得到", "的", "结果", "，", "别人", "就", "会", "乐意", "伸出", "援手", "。", "为", "分享", "代码", "或", "输出", "，", "IRC", "成员", "使用", "专门", "为此", "创建", "的", "外部", "网站", "，", "如", "https", ":", "/", "/", "bpaste", ".", "net", "/", "+", "python", "/", " ", "（", "#", "python", "通过", "它", "来", "分享", "代码", "和", "输", "\n", "出", "）", "。", "这", "避免", "了", "频道", "充斥", "着", "代码", "，", "还", "让", "分享", "的", "代码", "阅读", "起来", "容易", "得", "多", "。"], ["出", "）", "。", "这", "避免", "了", "频道", "充斥", "着", "代码", "，", "还", "让", "分享", "的", "代码", "阅读", "起来", "容易", "得", "多", "。", "\n", "一定", "要", "有", "耐心", "，", "这样", "别人", "才", "会", "更", "乐意", "帮助", "你", "。", "准确", "地", "提出", "问题", "，", "并", "等待", "别人", "来", "回答", "。", "虽然", "大家", "都", "在", "忙于", "交流", "，", "但", "通常", "总会", "有人", "及时", "地", "回答", "你", "的", "问题", "。", "如果", "频道", "的", "参与者", "较", "少", "，", "可", "\n", "能", "需要", "等", "一段时间", "才", "会", "有人", "回答", "你", "的", "问题", "。", "\n", "附录", "\n", "附录", " ", "D", "　", "使用", "\n", "　", "使用", "Git", "进行", "版本控制", "\n", "进行", "版本控制"], ["版本", "控制软件", "让", "你", "能够", "拍摄", "处于", "可行", "状态", "的", "项目", "的", "快照", "。", "修改", "项目", "（", "如", "实现", "新", "功能", "）", "后", "，", "如果", "项目", "不能", "正常", "运行", "，", "可", "恢复", "到", "前", "一个", "可行", "状态", "。", "\n", "通过", "使用", "版本", "控制软件", "，", "你", "可以", "无忧无虑", "地", "改进", "项目", "，", "不用", "担心", "项目", "因", "你", "犯了错", "而", "遭到", "破坏", "。", "对", "大型项目", "来说", "，", "这", "显得", "尤其", "重要", "，", "但", "对于", "较", "小", "的", "项目", "，", "哪怕", "是", "只", "包含", "\n", "一个", "文件", "的", "程序", "，", "这", "也", "大有裨益", "。", "\n", "在", "这个", "附录", "中", "，", "你", "将", "学习", "如何", "安装", "Git", "，", "以及", "如何", "使用", "它", "来", "对", "当前", "开发", "的", "程序", "进行", "版本控制", "。", "Git", "是", "当前", "最", "流行", "的", "版本", "控制软件", "，", "它", "包含", "很多", "高级", "工具", "，", "可", "帮助", "团队", "协作", "\n", "开发", "大型项目", "，", "但", "其", "最", "基本", "的", "功能", "也", "非常适合", "独立", "开发人员", "使用", "。", "Git", "通过", "跟踪", "对", "项目", "中", "每个", "文件", "的", "修改", "来", "实现", "版本控制", "，", "如果", "你", "犯了错", "，", "只", "需", "恢复", "到", "保存", "的", "前", "一个", "状", "\n", "态", "即可", "。", "\n", "D.1", "　", "安装", "\n", "　", "安装", "Git", "\n", "Git", "可", "在", "所有", "操作系统", "上", "运行", "，", "但", "其", "安装", "方法", "因", "操作系统", "而异", "。", "接下来", "的", "几节", "详细", "说明", "了", "如何", "在", "各种", "操作系统", "中", "安装", "它", "。", "\n", "D.1", ".", "1", "　", "在", "\n", "　", "在", "Linux", "系统", "中", "安装", "\n", "系统", "中", "安装", "Git", "\n", "要", "在", "Linux", "系统", "中", "安装", "Git", "，", "请", "执行", "如下", "命令", "：", "\n", "$", " ", "sudo", " ", "apt", "-", "get", " ", "install", " ", "git", "\n", "这", "就", "成", "了", "。", "你", "现在", "可以", "在", "项目", "中", "使用", "Git", "了", "。", "\n", "D.1", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Git"], ["D.1", ".", "2", "　", "在", "\n", "　", "在", "OS", " ", "X", "系统", "中", "安装", "\n", "系统", "中", "安装", "Git", "\n", "你", "的", "OS", " ", "X", "系统", "可能", "已经", "安装", "了", "Git", "，", "因此", "请", "尝试", "执行命令", "git", " ", "--", "version", " ", "。", "如果", "你", "在", "输出", "中", "看到", "了", "具体", "的", "版本号", "，", "说明", "你", "的", "系统", "安装", "了", "Git", "；", "如果", "你", "看到", "一条", "消息", "，", "提示", "你", "安装", "\n", "或", "升级", "Git", "，", "只", "需", "按", "屏幕", "上", "的", "说明", "做", "即可", "。", "\n", "你", "也", "可以", "访问", "https", ":", "/", "/", "git", "-", "scm", ".", "com", "/", " ", "，", "单击", "链接", "Downloads", "，", "再", "单击", "适合", "你", "所用", "系统", "的", "安装程序", "。", "\n", "D.1", ".", "3", "　", "在", "\n", "　", "在", "Windows", "系统", "中", "安装", "\n", "系统", "中", "安装", "Git", "\n", "要", "在", "Windows", "系统", "中", "安装", "Git", "，", "请", "访问", "http", ":", "/", "/", "msysgit", ".", "github", ".", "io", "/", " ", "，", "并", "单击", "Download", "。", "\n", "D.1", ".", "4", "　", "配置", "\n", "　", "配置", "Git", "\n", "Git", "跟踪", "谁", "修改", "了", "项目", "，", "哪怕", "参与", "项目", "开发", "的", "人", "只有", "一个", "。", "为此", "，", "Git", "需要", "知道", "你", "的", "用户名", "和", "电子邮件", "地址", "。", "你", "必须", "提供", "用户名", "，", "但", "可以", "使用", "虚构", "的", "电子邮件", "地址", "：", "\n", "$", " ", "git", " ", "config", " ", "--", "global", " ", "user", ".", "name", " ", "\"", "username", "\"", "\n", "$", " ", "git", " ", "config", " ", "--", "global", " ", "user", ".", "email", " ", "\"", "username", "@", "example", ".", "com", "\""], ["如果", "你", "忘记", "了", "这", "一步", "，", "在", "你", "首次", "提交", "时", "，", "Git", "将", "提示", "你", "提供", "这些", "信息", "。", "\n", "D.2", "　", "创建", "项目", "\n", "　", "创建", "项目", "\n", "我们", "来", "创建", "一个", "要", "进行", "版本控制", "的", "项目", "。", "在", "你", "的", "系统", "中", "创建", "一个", "文件夹", "，", "并", "将", "其", "命名", "为", "git", "_", "practice", "。", "在", "这个", "文件夹", "中", "，", "创建", "一个", "简单", "的", "Python", "程序", "：", "\n", "hello", "_", "world", ".", "py", "\n", "print", "(", "\"", "Hello", " ", "Git", " ", "world", "!", "\"", ")"], ["我们", "将", "使用", "这个", "程序", "来", "探索", "Git", "的", "基本功能", "。", "\n", "D.3", "　", "忽略", "文件", "\n", "　", "忽略", "文件", "\n", "扩展", "名为", ".", "pyc", "的", "文件", "是", "根据", ".", "py", "文件", "自动", "生成", "的", "，", "因此", "我们", "无需", "让", "Git", "跟踪", "它们", "。", "这些", "文件", "存储", "在", "目录", "__", "pycache", "__", "中", "。", "为", "让", "Git", "忽略", "这个", "目录", "，", "创建", "一个", "名为", ".", "gitignore", "的", "特殊", "文件", "（", "这个", "\n", "文件名", "以", "句点", "打头", "，", "且", "没有", "扩展名", "）", "，", "并", "在", "其中", "添加", "下面", "一行", "内容", "：", "\n", ".", "gitignore", "\n", "__", "pycache", "__", "/", "\n", "这", "让", "Git", "忽略", "目录", "__", "pycache", "__", "中", "的", "所有", "文件", "。", "使用", "文件", ".", "gitignore", "可", "避免", "项目", "混乱", "，", "开发", "起来", "更", "容易", "。", "\n", "注意", "\n", "注意", " ", "　", "如果", "你", "使用", "的", "是", "Python", " ", "2.7", "，", "请", "将", "这行", "内容", "改为", "*", ".", "pyc", " ", "。", "Python", " ", "2.7", "不会", "创建", "目录", "__", "pycache", "__", "，", "它", "将", "每个", ".", "pyc", "文件", "都", "存储", "在", "相应", ".", "py", "文件", "所在", "的", "目录", "中", "。", "其中", "的", "星", "\n", "号", "让", "Git", "忽略", "所有", "扩展", "名为", ".", "pyc", "的", "文件", "。", "\n", "你", "可能", "需要", "修改", "文本编辑", "器", "的", "设置", "，", "使", "其", "显示", "隐藏", "的", "文件", "，", "这样", "才能", "使用", "它", "来", "打开", "文件", ".", "gitignore", "。", "有些", "编辑器", "被", "设置", "成", "忽略", "名称", "以", "句点", "打头", "的", "文件", "。", "\n", "D.4", "　", "初始化", "仓库", "\n", "　", "初始化", "仓库"], ["D.4", "　", "初始化", "仓库", "\n", "　", "初始化", "仓库", "\n", "你", "创建", "了", "一个", "目录", "，", "其中", "包含", "一个", "Python", "文件", "和", "一个", ".", "gitignore", "文件", "，", "可以", "初始化", "一个", "Git", "仓库", "了", "。", "为此", "，", "打开", "一个", "终端", "窗口", "，", "切换", "到", "文件夹", "git", "_", "practice", "，", "并", "执行", "如下", "命令", "：", "\n", "git", "_", "practice", "$", " ", "git", " ", "init", "\n", "Initialized", " ", "empty", " ", "Git", " ", "repository", " ", "in", " ", "git", "_", "practice", "/", ".", "git", "/", "\n", "git", "_", "practice", "$", "\n", "输出", "表明", "Git", "在", "git", "_", "practice", "中", "初始化", "了", "一个", "空", "仓库", "。", "仓库", "是", "程序", "中", "被", "Git", "主动", "跟踪", "的", "一组", "文件", "。", "Git", "用来", "管理", "仓库", "的", "文件", "都", "存储", "在", "隐藏", "的", ".", "git", "/", "中", "，", "你", "根本", "不", "需要", "与", "这个", "目录", "打交道", "，", "但千", "\n", "万", "不要", "删除", "这个", "目录", "，", "否则", "将", "丢弃", "项目", "的", "所有", "历史记录", "。", "\n", "D.5", "　", "检查", "状态", "\n", "　", "检查", "状态", "\n", "执行", "其他", "操作前", "，", "先", "来看", "一下", "项目", "的", "状态", "：", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", "❶", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", "Initial", " ", "commit", "\n", " ", " ", "#", "\n", "❷", " ", "#", " ", "Untracked", " ", "files", ":"], ["#", "\n", " ", " ", "#", " ", "Initial", " ", "commit", "\n", " ", " ", "#", "\n", "❷", " ", "#", " ", "Untracked", " ", "files", ":", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "add", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "include", " ", "in", " ", "what", " ", "will", " ", "be", " ", "committed", ")", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", " ", " ", ".", "gitignore", "\n", " ", " ", "#", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#", "\n", "❸", " ", "nothing", " ", "added", " ", "to", " ", "commit", " ", "but", " ", "untracked", " ", "files", " ", "present", " ", "(", "use", " ", "\"", "git", " ", "add", "\"", " ", "to", " ", "track", ")", "\n", " ", " ", "git", "_", "practice", "$", "\n", "在", "Git", "中", "，", "分支", "\n", "分支", " ", "是", "项目", "的", "一个", "版本", "。", "从", "这里", "的", "输出", "可知", "，", "我们", "位于", "分支", "master", "上", "（", "见", "❶", "）", "。", "你", "每次", "查看", "项目", "的", "状态", "时", "，", "输出", "都", "将", "指出", "你", "位于", "分支", "master", "上", "。", "接下来", "的", "输出", "表明", "，", "我们", "\n", "将", "进行", "初始", "提交", "。", "提交", "\n", "提交", " ", "是", "项目", "在", "特定", "时间", "点", "的", "快照", "。", "\n", "Git", "指出", "了", "项目", "中未", "被", "跟踪", "的", "文件", "（", "见", "❷", "）", "，", "因为", "我们", "还", "没有", "告诉", "它", "要", "跟踪", "哪些", "文件", "。", "接下来", "，", "我们", "被", "告知", "没有", "将", "任何", "东西", "添加", "到", "当前", "提交", "中", "，", "但", "我们", "可能", "需要", "将", "未", "跟踪", "的", "文件", "加", "\n", "入到", "仓库", "中", "（", "见", "❸", "）", "。", "\n", "D.6", "　", "将", "文件", "加入", "到", "仓库", "中", "\n", "　", "将", "文件", "加入", "到", "仓库", "中"], ["入到", "仓库", "中", "（", "见", "❸", "）", "。", "\n", "D.6", "　", "将", "文件", "加入", "到", "仓库", "中", "\n", "　", "将", "文件", "加入", "到", "仓库", "中", "\n", "下面", "将", "这", "两个", "文件", "加入", "到", "仓库", "中", "，", "并", "再次", "检查", "状态", "：", "\n", "❶", " ", "git", "_", "practice", "$", " ", "git", " ", "add", " ", ".", "\n", "❷", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", "Initial", " ", "commit", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", "Changes", " ", "to", " ", "be", " ", "committed", ":", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "rm", " ", "--", "cached", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "unstage", ")", "\n", " ", " ", "#", "\n", "❸", " ", "#", " ", " ", " ", "new", " ", "file", ":", " ", " ", " ", ".", "gitignore", "\n", " ", " ", "#", " ", " ", " ", "new", " ", "file", ":", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#", "\n", " ", " ", "git", "_", "practice", "$", "\n", "命令", "git", " ", "add", " ", ".", " ", "将", "项目", "中未", "被", "跟踪", "的", "所有", "文件", "都", "加入", "到", "仓库", "中", "（", "见", "❶", "）", "。", "它", "不", "提交", "这些", "文件", "，", "而", "只是", "让", "Git", "开始", "关注", "它们", "。", "现在", "我们", "检查", "项目", "的", "状态", "时", "，", "发现", "Git", "找出", "了", "需要", "提交", "\n", "的", "一些", "修改", "（", "见", "❷", "）", "。", "标签", "new", " ", "file", " ", "意味着", "这些", "文件", "是", "新", "添加", "到", "仓库", "中", "的", "（", "见", "❸", "）", "。", "\n", "D.7", "　", "执行", "提交", "\n", "　", "执行", "提交", "\n", "下面", "来", "执行", "第一次", "提交", "："], ["D.7", "　", "执行", "提交", "\n", "　", "执行", "提交", "\n", "下面", "来", "执行", "第一次", "提交", "：", "\n", "❶", " ", "git", "_", "practice", "$", " ", "git", " ", "commit", " ", "-", "m", " ", "\"", "Started", " ", "project", ".", "\"", "\n", "❷", " ", "[", "master", " ", "(", "root", "-", "commit", ")", " ", "c03d2a3", "]", " ", "Started", " ", "project", ".", "\n", "❸", " ", " ", "2", " ", "files", " ", "changed", ",", " ", "1", " ", "insertion", "(", "+", ")", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", ".", "gitignore", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "hello", "_", "world", ".", "py", "\n", "❹", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master"], ["nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", " ", " ", "git", "_", "practice", "$", "\n", "我们", "执行命令", "git", " ", "commit", " ", "-", "m", " ", "\"", "message", " ", "\"", " ", "（", "见", "❶", "）", "以", "拍摄", "项目", "的", "快照", "。", "标志", "-", "m", " ", "让", "Git", "将", "接下来", "的", "消息", "（", "\"", "Started", " ", "project", ".", "\"", " ", "）", "记录", "到", "项目", "的", "历史记录", "中", "。", "输出", "表明", "我", "\n", "们", "在", "分支", "master", "上", "（", "见", "❷", "）", "，", "且", "有", "两个", "文件", "被", "修改", "了", "（", "见", "❸", "）", "。", "\n", "现在", "我们", "检查", "状态", "时", "，", "发现", "我们", "在", "分支", "master", "上", "，", "且", "工作", "目录", "是", "干净", "的", "（", "见", "❹", "）", "。", "这", "是", "你", "每次", "提交", "项目", "的", "可行", "状态", "时", "都", "希望", "看到", "的", "消息", "。", "如果", "显示", "的", "消息", "不是", "这样", "的", "，", "请", "仔细", "阅", "\n", "读", "，", "很", "可能", "你", "在", "提交", "前", "忘记", "了", "添加", "文件", "。", "\n", "D.8", "　", "查看", "提交", "历史", "\n", "　", "查看", "提交", "历史", "\n", "Git", "记录", "所有", "的", "项目", "提交", "。", "下面", "来看", "一下", "提交", "历史", "：", "\n", "git", "_", "practice", "$", " ", "git", " ", "log", "\n", "commit", " ", "a9d74d87f1aa3b8f5b2688cb586eac1a908cfc7f", "\n", "Author", ":", " ", "Eric", " ", "Matthes", " ", "<", "eric", "@", "example", ".", "com", ">", "\n", "Date", ":", " ", " ", " ", "Mon", " ", "Mar", " ", "16", " ", "07", ":", "23", ":", "32", " ", "2015", " ", "-", "0800", "\n", " ", " ", " ", " ", "Started", " ", "project", "."], ["Started", " ", "project", ".", "\n", "git", "_", "practice", "$", "\n", "你", "每次", "提交", "时", "，", "Git", "都", "会", "生成", "一个", "包含", "40", "字符", "的", "独一无二", "的", "引用", "ID", "。", "它", "记录", "提交", "是", "谁", "执行", "的", "、", "提交", "的", "时间", "以及", "提交", "时", "指定", "的", "消息", "。", "并非", "在", "任何", "情况", "下", "你", "都", "需要", "所有", "这些", "信息", "，", "因此", "\n", "Git", "提供", "了", "一个", "选项", "，", "让", "你", "能够", "打印", "提交", "历史", "条", "目的", "更", "简单", "的", "版本", "：", "\n", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline", "\n", "a9d74d87f1aa3b8f5b2688cb586eac1a908cfc7f", " ", "Started", " ", "project", ".", "\n", "git", "_", "practice", "$", "\n", "标志", "--", "pretty", "=", "oneline", " ", "指定", "显示", "两项", "最", "重要", "的", "信息", "：", "提交", "的", "引用", "ID", "以及", "为", "提交", "记录", "的", "消息", "。", "\n", "D.9", "　", "第二次", "提交", "\n", "　", "第二次", "提交", "\n", "为", "展示", "版本控制", "的", "强大", "威力", "，", "我们", "需要", "对", "项目", "进行", "修改", "，", "并", "提交", "所", "做", "的", "修改", "。", "为此", "，", "我们", "在", "hello", "_", "world", ".", "py", "中", "再", "添加", "一行", "代码", "：", "\n", "hello", "_", "world", ".", "py", "\n", "print", "(", "\"", "Hello", " ", "Git", " ", "world", "!", "\"", ")", "\n", "print", "(", "\"", "Hello", " ", "everyone", ".", "\"", ")", "\n", "如果", "我们", "现在", "查看", "项目", "的", "状态", "，", "将", "发现", "Git", "注意", "到", "了", "这个", "文件", "发生", "了", "变化", "："], ["如果", "我们", "现在", "查看", "项目", "的", "状态", "，", "将", "发现", "Git", "注意", "到", "了", "这个", "文件", "发生", "了", "变化", "：", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", "❶", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "#", " ", "Changes", " ", "not", " ", "staged", " ", "for", " ", "commit", ":", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "add", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "update", " ", "what", " ", "will", " ", "be", " ", "committed", ")", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "checkout", " ", "--", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "discard", " ", "changes", " ", "in", " ", "working", " ", "directory", ")", "\n", " ", " ", "#", "\n", "❷", " ", "#", " ", " ", " ", "modified", ":", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#", "\n", "❸", " ", "no", " ", "changes", " ", "added", " ", "to", " ", "commit", " ", "(", "use", " ", "\"", "git", " ", "add", "\"", " ", "and", "/", "or", " ", "\"", "git", " ", "commit", " ", "-", "a", "\"", ")", "\n", " ", " ", "git", "_", "practice", "$", "\n", "输出", "指出", "了", "我们", "当前", "所在", "的", "分支", "（", "见", "❶", "）", "、", "被", "修改", "了", "的", "文件", "的", "名称", "（", "见", "❷", "）", "，", "还", "指出", "了", "所", "做", "的", "修改", "未", "提交", "（", "见", "❸", "）", "。", "下面", "来", "提交", "所", "做", "的", "修改", "，", "并", "再次", "查看", "状态", "：", "\n", "❶", " ", "git", "_", "practice", "$", " ", "git", " ", "commit", " ", "-", "am", " ", "\"", "Extended", " ", "greeting", ".", "\""], ["[", "master", " ", "08d4d5e", "]", " ", "Extended", " ", "greeting", ".", "\n", " ", " ", " ", "1", " ", "file", " ", "changed", ",", " ", "1", " ", "insertion", "(", "+", ")", "\n", "❷", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", "❸", " ", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline", "\n", " ", " ", "08d4d5e39cb906f6cff197bd48e9ab32203d7ed6", " ", "Extended", " ", "greeting", ".", "\n", " ", " ", "be017b7f06d390261dbc64ff593be6803fd2e3a1", " ", "Started", " ", "project", ".", "\n", " ", " ", "git", "_", "practice", "$", "\n", "我们", "再次", "执行", "了", "提交", "，", "并", "在", "执行命令", "git", " ", "commit", " ", "时", "指定", "了", "标志", "-", "am", " ", "（", "见", "❶", "）", "。", "标志", "-", "a", " ", "让", "Git", "将", "仓库", "中", "所有", "修改", "了", "的", "文件", "都", "加入", "到", "当前", "提交", "中", "（", "如果", "你", "在", "两次", "提交", "之间", "创建", "了", "新", "\n", "文件", "，", "可", "再次", "执行命令", "git", " ", "add", " ", ".", " ", "将", "这些", "新", "文件", "加入", "到", "仓库", "中", "）", "。", "标志", "-", "m", " ", "让", "Git", "在", "提交", "历史", "中", "记录", "一条", "消息", "。"], ["我们", "查看", "项目", "的", "状态", "时", "，", "发现", "工作", "目录", "也", "是", "干净", "的", "（", "见", "❷", "）", "。", "最后", "，", "我们", "发现", "提交", "历史", "中", "包含", "两个", "提交", "（", "见", "❸", "）", "。", "\n", "D.10", "　", "撤销", "修改", "\n", "　", "撤销", "修改", "\n", "下面", "来", "看看", "如何", "放弃", "所", "做", "的", "修改", "，", "恢复", "到", "前", "一个", "可行", "状态", "。", "为此", "，", "首先", "在", "hello", "_", "world", ".", "py", "中", "再", "添加", "一行", "代码", "：", "\n", "hello", "_", "world", ".", "py", "\n", "print", "(", "\"", "Hello", " ", "Git", " ", "world", "!", "\"", ")", "\n", "print", "(", "\"", "Hello", " ", "everyone", ".", "\"", ")", "\n", "print", "(", "\"", "Oh", " ", "no", ",", " ", "I", " ", "broke", " ", "the", " ", "project", "!", "\"", ")"], ["保存", "并", "运行", "这个", "文件", "。", "\n", "我们", "查看", "状态", "，", "发现", "Git", "注意", "到", "了", "所", "做", "的", "修改", "：", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "#", " ", "Changes", " ", "not", " ", "staged", " ", "for", " ", "commit", ":", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "add", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "update", " ", "what", " ", "will", " ", "be", " ", "committed", ")", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "checkout", " ", "--", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "discard", " ", "changes", " ", "in", " ", "working", " ", "directory", ")", "\n", " ", " ", "#", "\n", "❶", " ", "#", " ", " ", " ", "modified", ":", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#", "\n", " ", " ", "no", " ", "changes", " ", "added", " ", "to", " ", "commit", " ", "(", "use", " ", "\"", "git", " ", "add", "\"", " ", "and", "/", "or", " ", "\"", "git", " ", "commit", " ", "-", "a", "\"", ")", "\n", " ", " ", "git", "_", "practice", "$", "\n", "Git", "注意", "到", "我们", "修改", "了", "hello", "_", "world", ".", "py", "（", "见", "❶", "）", "。", "我们", "可以", "提交", "所", "做", "的", "修改", "，", "但", "这次", "我们", "不", "提交", "所", "做", "的", "修改", "，", "而", "要", "恢复", "到", "最后", "一个", "提交", "（", "我们", "知道", "，", "那次", "提交", "时", "项目", "能够", "正常", "地运"], ["行", "）", "。", "为此", "，", "我们", "不", "对", "hello", "_", "world", ".", "py", "执行", "任何", "操作", "—", "—", "不", "删除", "刚", "添加", "的", "代码", "行", "，", "也", "不", "使用", "文本编辑", "器", "的", "撤销", "功能", "，", "而", "在", "终端", "会话", "中", "执行", "如下", "命令", "：", "\n", "git", "_", "practice", "$", " ", "git", " ", "checkout", " ", ".", "\n", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", "#", " ", "On", " ", "branch", " ", "master", "\n", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", "git", "_", "practice", "$", "\n", "命令", "git", " ", "checkout", " ", "让", "你", "能够", "恢复", "到", "以前", "的", "任何", "提交", "。", "命令", "git", " ", "checkout", " ", ".", " ", "放弃", "自", "最后", "一次", "提交", "后", "所", "做", "的", "所有", "修改", "，", "将", "项目", "恢复", "到", "最后", "一次", "提交", "的", "状态", "。", "\n", "如果", "我们", "返回", "到", "文本编辑", "器", "，", "将", "发现", "hello", "_", "world", ".", "py", "被", "修改", "成", "了", "下面", "这样", "：", "\n", "print", "(", "\"", "Hello", " ", "Git", " ", "world", "!", "\"", ")", "\n", "print", "(", "\"", "Hello", " ", "everyone", ".", "\"", ")", "\n", "就", "这个", "项目", "而言", "，", "恢复", "到", "前", "一个", "状态", "微不足道", "，", "但", "如果", "我们", "开发", "的", "是", "大型项目", "，", "其中", "数十个", "文件", "都", "被", "修改", "了", "，", "那么", "恢复", "到", "前", "一个", "状态", "，", "将", "撤销", "自", "最后", "一次", "提交", "后", "对", "这些", "文件", "所", "做"], ["的", "所有", "修改", "。", "这个", "功能", "很", "有用", "：", "实现", "新", "功能", "时", "，", "你", "可以", "根据", "需要", "做", "任意", "数量", "的", "修改", "，", "如果", "这些", "修改", "不", "可行", "，", "可", "撤销", "它们", "，", "而", "不会", "对", "项目", "有", "任何", "伤害", "。", "你", "无需", "记住", "做", "了", "哪些", "修改", "，", "\n", "因而", "不必", "手工", "撤销", "所", "做", "的", "修改", "，", "Git", "会替", "你", "完成", "所有", "这些", "工作", "。", "\n", "注意", "\n", "注意", " ", "　", "想要", "看到", "以前", "的", "版本", "，", "你", "可能", "需要", "在", "编辑器", "窗口", "中", "单击", "，", "以", "刷新", "文件", "。", "\n", "D.11", "　", "检出", "以前", "的", "提交", "\n", "　", "检出", "以前", "的", "提交", "\n", "你", "可以", "检出", "提交", "历史", "中", "的", "任何", "提交", "，", "而", "不仅仅", "是", "最后", "一次", "提交", "，", "为此", "可", "在", "命令", "git", " ", "check", " ", "末尾", "指定", "该", "提交", "的", "引用", "ID", "的", "前", "6", "个字符", "（", "而", "不是", "句点", "）", "。", "通过", "检出", "以前", "的", "提交", "，", "你", "可以", "\n", "对", "其", "进行", "审核", "，", "然后", "返回", "到", "最后", "一次", "提交", "，", "或者", "放弃", "最近", "所", "做", "的", "工作", "，", "并", "选择", "以前", "的", "提交", "：", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline", "\n", " ", " ", "08d4d5e39cb906f6cff197bd48e9ab32203d7ed6", " ", "Extended", " ", "greeting", ".", "\n", " ", " ", "be017b7f06d390261dbc64ff593be6803fd2e3a1", " ", "Started", " ", "project", ".", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "checkout", " ", "be017b"], ["git", "_", "practice", "$", " ", "git", " ", "checkout", " ", "be017b", "\n", " ", " ", "Note", ":", " ", "checking", " ", "out", " ", "'", "be017b", "'", ".", "\n", "❶", " ", "You", " ", "are", " ", "in", " ", "'", "detached", " ", "HEAD", "'", " ", "state", ".", " ", "You", " ", "can", " ", "look", " ", "around", ",", " ", "make", " ", "experimental", "\n", " ", " ", "changes", " ", "and", " ", "commit", " ", "them", ",", " ", "and", " ", "you", " ", "can", " ", "discard", " ", "any", " ", "commits", " ", "you", " ", "make", " ", "in", " ", "this", "\n", " ", " ", "state", " ", "without", " ", "impacting", " ", "any", " ", "branches", " ", "by", " ", "performing", " ", "another", " ", "checkout", ".", "\n", " ", " ", "If", " ", "you", " ", "want", " ", "to", " ", "create", " ", "a", " ", "new", " ", "branch", " ", "to", " ", "retain", " ", "commits", " ", "you", " ", "create", ",", " ", "you", " ", "may", "\n", " ", " ", "do", " ", "so", " ", "(", "now", " ", "or", " ", "later", ")", " ", "by", " ", "using", " ", "-", "b", " ", "with", " ", "the", " ", "checkout", " ", "command", " ", "again", ".", " ", "Example", ":", "\n", " ", " ", " ", " ", "git", " ", "checkout", " ", "-", "b", " ", "new", "_", "branch", "_", "name"], ["git", " ", "checkout", " ", "-", "b", " ", "new", "_", "branch", "_", "name", "\n", " ", " ", "HEAD", " ", "is", " ", "now", " ", "at", " ", "be017b7", "...", " ", "Started", " ", "project", ".", "\n", " ", " ", "git", "_", "practice", "$", "\n", "检出", "以前", "的", "提交", "后", "，", "你", "将", "离开", "分支", "master", "，", "并", "进入", "Git", "所说", "的", "分离", "头", "指针", "（", "detached", " ", "HEAD", "）", "状态", "（", "见", "❶", "）", "。", "HEAD", "表示", "项目", "的", "当前", "状态", "，", "之所以", "说", "我们", "处于", "分离", "状态", "，", "是因为", "我们", "离", "\n", "开", "了", "一个", "命名", "分支", "（", "这里", "是", "master", " ", "）", "。", "\n", "要", "回到", "分支", "master", " ", "，", "可", "检出", "它", "：", "\n", "git", "_", "practice", "$", " ", "git", " ", "checkout", " ", "master", "\n", "Previous", " ", "HEAD", " ", "position", " ", "was", " ", "be017b7", "...", " ", "Started", " ", "project", ".", "\n", "Switched", " ", "to", " ", "branch", " ", "'", "master", "'", "\n", "git", "_", "practice", "$", "\n", "这", "让", "你", "回到", "分支", "master", " ", "。", "除非", "你", "要", "使用", "Git", "的", "高级", "功能", "，", "否则", "在", "检出", "以前", "的", "提交", "后", "，", "最好", "不要", "对", "项目", "做", "任何", "修改", "。", "然而", "，", "如果", "参与", "项目", "开发", "的", "人", "只有", "你", "自己", "，", "而", "你", "又", "想", "放弃", "较近", "\n", "的", "所有", "提交", "，", "并", "恢复", "到", "以前", "的", "状态", "，", "也", "可以", "将", "项目", "重置", "到", "以前", "的", "提交", "。", "为此", "，", "可", "在", "处于", "分支", "master", " ", "上", "的", "情况", "下", "，", "执行", "如下", "命令", "："], ["❶", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", "❷", " ", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline", "\n", " ", " ", "08d4d5e39cb906f6cff197bd48e9ab32203d7ed6", " ", "Extended", " ", "greeting", ".", "\n", " ", " ", "be017b7f06d390261dbc64ff593be6803fd2e3a1", " ", "Started", " ", "project", ".", "\n", "❸", " ", "git", "_", "practice", "$", " ", "git", " ", "reset", " ", "--", "hard", " ", "be017b", "\n", " ", " ", "HEAD", " ", "is", " ", "now", " ", "at", " ", "be017b7", " ", "Started", " ", "project", ".", "\n", "❹", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", "❺", " ", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline"], ["❺", " ", "git", "_", "practice", "$", " ", "git", " ", "log", " ", "--", "pretty", "=", "oneline", "\n", " ", " ", "be017b7f06d390261dbc64ff593be6803fd2e3a1", " ", "Started", " ", "project", ".", "\n", " ", " ", "git", "_", "practice", "$"], ["我们", "首先", "查看", "了", "状态", "，", "确认", "我们", "在", "分支", "master", "上", "（", "见", "❶", "）", "。", "查看", "提交", "历史", "时", "，", "我们", "看到", "了", "两个", "提交", "（", "见", "❷", "）", "。", "接下来", "，", "我们", "执行命令", "git", " ", "reset", " ", "--", "hard", " ", "，", "并", "在", "其中", "指定", "了", "要", "\n", "永久", "地", "恢复", "到", "的", "提交", "的", "引用", "ID", "的", "前", "6", "个字符", "（", "见", "❸", "）", "。", "再次", "查看", "状态", "，", "发现", "我们", "在", "分支", "master", " ", "上", "，", "且", "没有", "需要", "提交", "的", "修改", "（", "见", "❹", "）", "。", "再次", "查看", "提交", "历史", "时", "，", "发现", "我们", "处于", "要", "从", "它", "\n", "重新", "开始", "的", "提交", "中", "（", "见", "❺", "）", "。", "\n", "D.12", "　", "删除", "仓库", "\n", "　", "删除", "仓库", "\n", "有时候", "，", "仓库", "的", "历史记录", "被", "你", "搞乱", "了", "，", "而", "你", "又", "不", "知道", "如何", "恢复", "。", "在", "这种", "情况", "下", "，", "你", "首先", "应", "考虑", "使用", "附录", "C", "介绍", "的", "方法", "寻求", "帮助", "。", "如果", "无法", "恢复", "且", "参与", "项目", "开发", "的", "只有", "你", "一个", "人", "，", "\n", "可", "继续", "使用", "这些", "文件", "，", "但", "要", "将", "项目", "的", "历史记录", "删除", "—", "—", "删除", "目录", ".", "git", "。", "这", "不会", "影响", "任何", "文件", "的", "当前", "状态", "，", "而", "只会", "删除", "所有", "的", "提交", "，", "因此", "你", "将", "无法", "检出", "项目", "的", "其他", "任何", "状态", "。", "\n", "为此", "，", "可", "打开", "一个", "文件", "浏览器", "，", "并", "将", "目录", ".", "git", "删除", "，", "也", "可", "通过", "命令行", "完成", "这个", "任务", "。", "这样", "做后", "，", "你", "需要", "重新", "创建", "一个", "仓库", "，", "以", "重新", "对", "修改", "进行", "跟踪", "。", "下面", "演示", "了", "如何", "在", "终端", "会话", "中", "\n", "完成", "这个", "过程", "：", "\n", "❶", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master"], ["❶", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", "❷", " ", "git", "_", "practice", "$", " ", "rm", " ", "-", "rf", " ", ".", "git", "\n", "❸", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "fatal", ":", " ", "Not", " ", "a", " ", "git", " ", "repository", " ", "(", "or", " ", "any", " ", "of", " ", "the", " ", "parent", " ", "directories", ")", ":", " ", ".", "git", "\n", "❹", " ", "git", "_", "practice", "$", " ", "git", " ", "init", "\n", " ", " ", "Initialized", " ", "empty", " ", "Git", " ", "repository", " ", "in", " ", "git", "_", "practice", "/", ".", "git", "/", "\n", "❺", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", "Initial", " ", "commit", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", "Untracked", " ", "files", ":", "\n", " ", " ", "#", " ", " ", " ", "(", "use", " ", "\"", "git", " ", "add", " ", "<", "file", ">", "...", "\"", " ", "to", " ", "include", " ", "in", " ", "what", " ", "will", " ", "be", " ", "committed", ")", "\n", " ", " ", "#", "\n", " ", " ", "#", " ", " ", " ", ".", "gitignore", "\n", " ", " ", "#", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#"], ["#", "\n", " ", " ", "#", " ", " ", " ", ".", "gitignore", "\n", " ", " ", "#", " ", " ", " ", "hello", "_", "world", ".", "py", "\n", " ", " ", "#", "\n", " ", " ", "nothing", " ", "added", " ", "to", " ", "commit", " ", "but", " ", "untracked", " ", "files", " ", "present", " ", "(", "use", " ", "\"", "git", " ", "add", "\"", " ", "to", " ", "track", ")", "\n", "❻", " ", "git", "_", "practice", "$", " ", "git", " ", "add", " ", ".", "\n", " ", " ", "git", "_", "practice", "$", " ", "git", " ", "commit", " ", "-", "m", " ", "\"", "Starting", " ", "over", ".", "\"", "\n", " ", " ", "[", "master", " ", "(", "root", "-", "commit", ")", " ", "05f5e01", "]", " ", "Starting", " ", "over", ".", "\n", " ", " ", " ", "2", " ", "files", " ", "changed", ",", " ", "2", " ", "insertions", "(", "+", ")", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", ".", "gitignore", "\n", " ", " ", " ", "create", " ", "mode", " ", "100644", " ", "hello", "_", "world", ".", "py", "\n", "❼", " ", "git", "_", "practice", "$", " ", "git", " ", "status", "\n", " ", " ", "#", " ", "On", " ", "branch", " ", "master", "\n", " ", " ", "nothing", " ", "to", " ", "commit", ",", " ", "working", " ", "directory", " ", "clean", "\n", " ", " ", "git", "_", "practice", "$"], ["git", "_", "practice", "$", "\n", "我们", "首先", "查看", "了", "状态", "，", "发现", "工作", "目录", "是", "干净", "的", "（", "见", "❶", "）", "。", "接下来", "，", "我们", "使用", "命令", "rm", " ", "-", "rf", " ", ".", "git", " ", "（", "在", "Windows", "系统", "中", "，", "应", "使用", "命令", "rmdir", " ", "/", "s", " ", ".", "git", " ", "）", "删除", "了", "目录", ".", "git", "（", "见", "❷", "）", "。", "\n", "删除", "文件夹", ".", "git", "后", "，", "当", "我们", "再次", "查看", "状态", "时", "，", "被", "告知", "这", "不是", "一个", "Git", "仓库", "（", "见", "❸", "）", "。", "Git", "用来", "跟踪", "仓库", "的", "信息", "都", "存储", "在", "文件夹", ".", "git", "中", "，", "因此", "删除", "该", "文件夹", "也", "将", "删除", "整个", "仓库", "。", "\n", "接下来", "，", "我们", "使用", "命令", "git", " ", "init", " ", "新建", "一个", "全新", "的", "仓库", "（", "见", "❹", "）", "。", "然后", "，", "我们", "查看", "状态", "，", "发现", "又", "回到", "了", "初始状态", "，", "等待", "着", "第一次", "提交", "（", "见", "❺", "）", "。", "我们", "将", "所有", "文件", "都", "加入", "仓库", "，", "并", "\n", "执行", "第一次", "提交", "（", "见", "❻", "）", "。", "然后", "，", "我们", "再次", "查看", "状态", "，", "发现", "我们", "在", "分支", "master", " ", "上", "，", "且", "没有", "任何", "未", "提交", "的", "修改", "（", "见", "❼", "）", "。", "\n", "需要", "经过", "一定", "的", "练习", "才能", "学会", "使用", "版本控制", "，", "但", "一旦", "开始", "使用", "，", "你", "就", "再也", "离不开", "它", "。", "\n", "后记", "\n", "后记", "\n", "祝贺", "你", "！", "你", "已", "学习", "了", "Python", "基本知识", "，", "并", "利用", "这些", "知识", "创建", "了", "一些", "有", "意义", "的", "项目", "：", "创建", "了", "一款", "游戏", "，", "对", "一些", "数据", "进行", "了", "可视化", "，", "还", "创建", "了", "一个", "Web", "应用程序", "。", "现在", "，", "可"], ["以", "通过", "众多", "不同", "的", "方式", "进一步提高", "编程", "技能", "了", "。", "\n", "首先", "，", "你", "应该", "根据", "自己", "的", "兴趣", "继续", "开发", "有", "意义", "的", "项目", "。", "当", "你", "通过", "编程", "来", "解决", "重要", "的", "相关", "问题", "时", "，", "编程", "将", "更具", "吸引力", "，", "而", "现在", "你", "具备", "了", "开发", "各种", "项目", "所", "需", "的", "技能", "。", "你", "可以", "开发", "自己", "\n", "的", "游戏", "，", "也", "可以", "开发", "模仿", "经典", "街机", "游戏", "的", "游戏", "。", "你", "可能", "想", "研究", "一些", "对", "你", "来说", "很", "重要", "的", "数据", "，", "并", "通过", "可视化", "将", "其中", "有趣", "的", "规律", "和", "关系", "展示", "出来", "。", "你", "可以", "创建", "自己", "的", "Web", "应用程序", "，", "\n", "也", "可", "尝试", "模拟", "自己", "喜欢", "的", "应用程序", "。", "\n", "只要", "有", "机会", "就", "向", "别人", "发出", "邀请", "，", "让", "他们", "尝试", "使用", "你", "编写", "的", "程序", "。", "如果", "你", "编写", "了", "游戏", "，", "邀请", "别人", "来", "玩", "一玩", "；", "如果", "你", "创建", "了", "图表", "，", "向", "别人", "展示", "展示", "，", "看看", "他们", "能否", "看", "明白", "；", "如果", "你", "创", "\n", "建了", "Web", "应用程序", "，", "将", "其", "部署", "到", "在线", "服务器", "，", "并", "邀请", "别人", "尝试", "使用", "它", "。", "听听", "用户", "怎么", "说", "，", "并", "尝试", "根据", "他们", "的", "反馈", "对", "项目", "进行", "改进", "，", "这样", "你", "就", "能", "成为", "更", "优秀", "的", "程序员", "。", "\n", "自己", "动手", "开发", "项目", "时", "，", "肯定", "会", "遇到", "棘手", "乃至", "自己", "无法", "解决", "的", "问题", "。", "想", "办法", "寻求", "帮助", "，", "在", "Python", "社区", "找到", "适合", "自己", "的", "位置", "。", "加入", "当地", "的", "Python", "用户组", "，", "或者", "到", "一些", "在线", "Python", "社区", "去", "\n", "逛逛", "。", "另外", "，", "考虑", "参加", "附近", "举办", "的", "Python", "开发者", "大会", "（", "PyCon", "）", "。"], ["逛逛", "。", "另外", "，", "考虑", "参加", "附近", "举办", "的", "Python", "开发者", "大会", "（", "PyCon", "）", "。", "\n", "你", "应", "尽力", "在", "开发", "自己", "感兴趣", "的", "项目", "和", "提高", "Python", "技能", "之间", "取得", "平衡", "。", "网上", "有", "很多", "Python", "学习", "资料", "，", "市面上", "还有", "大量", "针对", "中级", "程序员", "编写", "的", "Python", "图书", "。", "现在", "你", "掌握", "了", "基本知识", "，", "并", "\n", "知道", "了", "如何", "将", "学到", "的", "技能", "付诸", "应用", "，", "因此", "这些", "资料", "中", "很多", "都", "是", "你", "能看懂", "的", "。", "通过", "阅读", "教程", "和", "图书", "积累", "更", "多", "的", "知识", "，", "加深", "你", "对", "编程", "和", "Python", "的", "认识", "。", "深入", "学习", "Python", "后", "再", "去", "开发", "项目", "\n", "时", "，", "你", "将", "能够", "更", "高效", "地", "解决", "更", "多", "的", "问题", "。", "\n", "祝贺", "你", "在", "学习", "Python", "的", "道路", "上", "走", "了", "这么", "远", "，", "愿", "你", "在", "以后", "的", "学习", "中有", "好运", "相伴", "！", "\n", "看", "完", "了", "\n", "看", "完", "了", "\n", "如果", "您", "对", "本书", "内容", "有", "疑问", "，", "可", "发邮件", "至", "contact", "@", "turingbook", ".", "com", "，", "会", "有", "编辑", "或作", "译者", "协助", "答疑", "。", "也", "可", "访问", "图灵", "社区", "，", "参与", "本书", "讨论", "。", "\n", "如果", "是", "有关", "电子书", "的", "建议", "或", "问题", "，", "请", "联系", "专用", "客服", "邮箱", "：", "ebook", "@", "turingbook", ".", "com", "。", "\n", "在", "这里", "可以", "找到", "我们", "：", "\n", "微博", " ", "@", "图灵", "教育", " ", ":", " ", "好书", "、", "活动", "每日", "播报", "\n", "微博", " ", "@", "图灵", "社区", " ", ":", " ", "电子书", "和", "好", "文章", "的", "消息", "\n", "微博", " ", "@", "图灵", "新知", " ", ":", " ", "图灵", "教育", "的", "科普", "小组", "\n", "微信", " ", "图灵", "访谈", " ", ":", " ", "ituring", "_", "interview", "，", "讲述", "码农", "精彩", "人生"], ["微信", " ", "图灵", "访谈", " ", ":", " ", "ituring", "_", "interview", "，", "讲述", "码农", "精彩", "人生", "\n", "微信", " ", "图灵", "教育", " ", ":", " ", "turingbooks", " ", "　", "　", "\n", "图灵", "社区", "会员", " ", "田芳林", "（", "tianfanglin", "@", "outlook", ".", "com", "）", " ", "专享", " ", "尊重", "版权"]]