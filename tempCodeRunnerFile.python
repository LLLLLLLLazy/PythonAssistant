from openai import OpenAI
import time

class AI:
    def __init__(self):
        self.messages = [
            {
                "role": "system",
                "content": "",
            }
        ]
        self.client = OpenAI(
                api_key="sk-2345ecb2afae4811abbe33775a3e8e87",
                base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
            )
        self.llm_name = "qwen-plus"
    
    def llm(self, prompt: str) -> str:
        # 将用户问题信息添加到messages列表中
        self.messages.append({"role": "user", "content": prompt})
    
        # 调用大模型生成回复信息
        completion = self.client.chat.completions.create(model=self.llm_name, messages=self.messages)
        response = completion.choices[0].message.content
    
        # 将大模型的回复信息添加到messages列表中
        self.messages.append({"role": "assistant", "content": response})
    
        # 返回回复信息
        return response

def main():
    ai = AI()
    prompt = "什么是快乐星球？"
    response = ai.llm(prompt)
    print(response)

if __name__ == "__main__":
    main()